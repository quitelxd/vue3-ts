/* empty css                */import{_ as E,l as T,x as P,c as g,o as _}from"./index-B8lgD0w-.js";const M={id:"cesiumContainer"},S={__name:"Cesium3d",setup(O){window.Cesium=Cesium;let o=null;async function l(){return await Cesium.createWorldTerrainAsync({requestWaterMask:!0,requestVertexNormals:!0})}function u(e){return new Cesium.Viewer("cesiumContainer",{terrainProvider:e,animation:!0,baseLayerPicker:!1,fullscreenButton:!1,sceneModePicker:!1,timeline:!0,navigationHelpButton:!1})}function d(e=116.39,r=39.9,i=100,n=.01){const t=[];for(let s=0;s<=360;s+=90){const c=Cesium.Cartesian3.fromDegrees(e+Math.cos(s*Math.PI/180)*n,r+Math.sin(s*Math.PI/180)*n,i);t.push(c)}return t.push(t[0]),t}function m(e=360,r=10){const i=Cesium.JulianDate.fromDate(new Date),n=Cesium.JulianDate.addSeconds(i,e,new Cesium.JulianDate);return o.clock.startTime=i.clone(),o.clock.stopTime=n.clone(),o.clock.currentTime=i.clone(),o.clock.clockRange=Cesium.ClockRange.LOOP_STOP,o.clock.multiplier=r,{start:i,stop:n}}function p(e,r,i=90){const n=new Cesium.SampledPositionProperty;return e.forEach((t,s)=>{const c=Cesium.JulianDate.addSeconds(r,s*i,new Cesium.JulianDate);n.addSample(c,t)}),n}function C(e){const r=Cesium.Color.WHITE;let i=null;e.screenSpaceEventHandler.setInputAction(n=>{const t=e.scene.pick(n.endPosition);i&&(i.model.color=r,i=null),Cesium.defined(t)&&Cesium.defined(t.id)&&(i=t.id,i.model.color=Cesium.Color.YELLOW.withAlpha(.8))},Cesium.ScreenSpaceEventType.MOUSE_MOVE),e.screenSpaceEventHandler.setInputAction(n=>{const t=e.scene.pick(n.position);if(console.log(t),Cesium.defined(t)&&Cesium.defined(t.id)){const s=t.id;if(console.log(s.properties.id._value),s.name){const c=e.scene.pickPosition(n.position);if(Cesium.defined(c)){const a=Cesium.Cartographic.fromCartesian(c),h=Cesium.Math.toDegrees(a.longitude),y=Cesium.Math.toDegrees(a.latitude),I=a.height,k=`
                        <table class="cesium-infoBox-defaultTable">
                            <tr><th>名称</th><td>${s.name}</td></tr>
                            <tr><th>经度</th><td>${h.toFixed(6)}°</td></tr>
                            <tr><th>纬度</th><td>${y.toFixed(6)}°</td></tr>
                            <tr><th>高度</th><td>${I.toFixed(2)}米</td></tr>
                        </table>
                    `;s.description=k,e.selectedEntity=s}}}else e.selectedEntity=void 0},Cesium.ScreenSpaceEventType.LEFT_CLICK),e.screenSpaceEventHandler.setInputAction(n=>{const t=e.scene.pick(n.position);Cesium.defined(t)&&Cesium.defined(t.id)&&(e.clock.shouldAnimate?e.clock.shouldAnimate=!1:e.clock.shouldAnimate=!0)},Cesium.ScreenSpaceEventType.RIGHT_CLICK)}function f(e,r,i){return o.entities.add({name:"动画模型",availability:new Cesium.TimeIntervalCollection([new Cesium.TimeInterval({start:i.start,stop:i.stop})]),position:r,orientation:new Cesium.VelocityOrientationProperty(r),properties:{id:"自定义id",type:"column"},model:{uri:e,minimumPixelSize:128,maximumScale:2e4,color:Cesium.Color.WHITE,colorBlendMode:Cesium.ColorBlendMode.HIGHLIGHT},path:{resolution:1,material:new Cesium.PolylineGlowMaterialProperty({glowPower:.1,color:Cesium.Color.YELLOW}),width:10}})}return T(async()=>{Cesium.Ion.defaultAccessToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJkMDc2Zjk4Mi0zNzE2LTQ1N2ItYmJiZi03MDBjNzE0OTRlN2UiLCJpZCI6MjI2NTIzLCJpYXQiOjE3NDQwODEyNzh9.ZB7sD_ip91ZAppy29yef0-8JFjpSPmtT3chRIZ44Gak";try{const e=await l();if(o=u(e),!o)throw new Error("Failed to initialize viewer");const r=await Cesium.IonResource.fromAssetId(2648381),i=d(),n=m(),t=p(i,n.start),s=f(r,t,n);C(o),o.zoomTo(s),o.scene.globe.enableLighting=!0,o.scene.globe.depthTestAgainstTerrain=!0}catch(e){console.error("Error initializing scene:",e)}}),P(()=>{o&&(o.destroy(),o=null)}),(e,r)=>(_(),g("div",M))}},J=E(S,[["__scopeId","data-v-3ba76e85"]]);export{J as default};
