import{l as pC}from"./lodash-Cf5vrfnu.js";import{_ as gC,l as yC,c as CC,d as pl,w as gl,e as Xf,o as wC,b as Vf}from"./index-B348wxoe.js";var Qs=Object.freeze({__proto__:null,get Base(){return Zt},get Circle(){return Gm},get Ellipse(){return Ym},get Image(){return hu},get Line(){return Vm},get Marker(){return Zm},get Path(){return du},get Polygon(){return ox},get Polyline(){return lx},get Rect(){return hx},get Text(){return cx}}),Fl=function(t,r){return Fl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},Fl(t,r)};function H(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");Fl(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var S=function(){return S=Object.assign||function(r){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o])}return r},S.apply(this,arguments)};function Sa(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e}function Ot(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function A(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(l){a={error:l}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(a)throw a.error}}return o}function mC(){for(var t=0,r=0,e=arguments.length;r<e;r++)t+=arguments[r].length;for(var n=Array(t),i=0,r=0;r<e;r++)for(var o=arguments[r],a=0,l=o.length;a<l;a++,i++)n[i]=o[a];return n}function P(t,r,e){if(arguments.length===2)for(var n=0,i=r.length,o;n<i;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return t.concat(o||Array.prototype.slice.call(r))}var qf=function(t){return t!==null&&typeof t!="function"&&isFinite(t.length)},xC={}.toString,ba=function(t,r){return xC.call(t)==="[object "+r+"]"},pn=function(t){return ba(t,"Function")},Pe=function(t){return t==null},Bt=function(t){return Array.isArray?Array.isArray(t):ba(t,"Array")},Si=function(t){var r=typeof t;return t!==null&&r==="object"||r==="function"};function se(t,r){if(t){var e;if(Bt(t))for(var n=0,i=t.length;n<i&&(e=r(t[n],n),e!==!1);n++);else if(Si(t)){for(var o in t)if(t.hasOwnProperty(o)&&(e=r(t[o],o),e===!1))break}}}var Kf=function(t){return typeof t=="object"&&t!==null},Wr=function(t){if(Bt(t))return t.reduce(function(r,e){return Math.max(r,e)},t[0])},kr=function(t){if(Bt(t))return t.reduce(function(r,e){return Math.min(r,e)},t[0])},Vt=function(t){return ba(t,"String")},Hl=function(t){return ba(t,"Number")},_C=1e-5;function SC(t,r,e){return e===void 0&&(e=_C),Math.abs(t-r)<e}var Qc=function(t,r){return(t%r+r)%r},bC=Math.PI/180,Jc=function(t){return bC*t},TC=Object.values?function(t){return Object.values(t)}:function(t){var r=[];return se(t,function(e,n){pn(t)&&n==="prototype"||r.push(e)}),r},RC=function(t){return Pe(t)?"":t.toString()},ev=function(t){var r=RC(t);return r.charAt(0).toUpperCase()+r.substring(1)};function EC(t){var r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,16)};return r(t)}function LC(t){var r=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;r(t)}function AC(t,r){for(var e in r)r.hasOwnProperty(e)&&e!=="constructor"&&r[e]!==void 0&&(t[e]=r[e])}function tv(t,r,e,n){return r&&AC(t,r),t}var MC=function(t,r){if(!pn(t))throw new TypeError("Expected a function");var e=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=r?r.apply(this,n):n[0],a=e.cache;if(a.has(o))return a.get(o);var l=t.apply(this,n);return a.set(o,l),l};return e.cache=new Map,e},Xo=function(t,r){if(t===r)return!0;if(!t||!r||Vt(t)||Vt(r))return!1;if(qf(t)||qf(r)){if(t.length!==r.length)return!1;for(var e=!0,n=0;n<t.length&&(e=Xo(t[n],r[n]),!!e);n++);return e}if(Kf(t)||Kf(r)){var i=Object.keys(t),o=Object.keys(r);if(i.length!==o.length)return!1;for(var e=!0,n=0;n<i.length&&(e=Xo(t[i[n]],r[i[n]]),!!e);n++);return e}return!1},wo={},IC=function(t){return t=t||"g",wo[t]?wo[t]+=1:wo[t]=1,t+wo[t]},mo=function(){},xo;MC(function(t,r){r===void 0&&(r={});var e=r.fontSize,n=r.fontFamily,i=r.fontWeight,o=r.fontStyle,a=r.fontVariant;return xo||(xo=document.createElement("canvas").getContext("2d")),xo.font=[o,a,i,e+"px",n].join(" "),xo.measureText(Vt(t)?t:"").width},function(t,r){return r===void 0&&(r={}),mC([t],TC(r)).join("")});var bi=`	
\v\f\r   ᠎             　\u2028\u2029`,OC=new RegExp("([a-z])["+bi+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+bi+"]*,?["+bi+"]*)+)","ig"),BC=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+bi+"]*,?["+bi+"]*","ig"),Dn=function(t){if(!t)return null;if(Bt(t))return t;var r={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},e=[];return String(t).replace(OC,function(n,i,o){var a=[],l=i.toLowerCase();if(o.replace(BC,function(s,u){u&&a.push(+u)}),l==="m"&&a.length>2&&(e.push([i].concat(a.splice(0,2))),l="l",i=i==="m"?"l":"L"),l==="o"&&a.length===1&&e.push([i,a[0]]),l==="r")e.push([i].concat(a));else for(;a.length>=r[l]&&(e.push([i].concat(a.splice(0,r[l]))),!!r[l]););return t}),e},zl=function(t,r){for(var e=[],n=0,i=t.length;i-2*!r>n;n+=2){var o=[{x:+t[n-2],y:+t[n-1]},{x:+t[n],y:+t[n+1]},{x:+t[n+2],y:+t[n+3]},{x:+t[n+4],y:+t[n+5]}];r?n?i-4===n?o[3]={x:+t[0],y:+t[1]}:i-2===n&&(o[2]={x:+t[0],y:+t[1]},o[3]={x:+t[2],y:+t[3]}):o[0]={x:+t[i-2],y:+t[i-1]}:i-4===n?o[3]=o[2]:n||(o[0]={x:+t[n],y:+t[n+1]}),e.push(["C",(-o[0].x+6*o[1].x+o[2].x)/6,(-o[0].y+6*o[1].y+o[2].y)/6,(o[1].x+6*o[2].x-o[3].x)/6,(o[1].y+6*o[2].y-o[3].y)/6,o[2].x,o[2].y])}return e},_o=function(t,r,e,n,i){var o=[];if(i===null&&n===null&&(n=e),t=+t,r=+r,e=+e,n=+n,i!==null){var a=Math.PI/180,l=t+e*Math.cos(-n*a),s=t+e*Math.cos(-i*a),u=r+e*Math.sin(-n*a),f=r+e*Math.sin(-i*a);o=[["M",l,u],["A",e,e,0,+(i-n>180),0,s,f]]}else o=[["M",t,r],["m",0,-n],["a",e,n,0,1,1,0,2*n],["a",e,n,0,1,1,0,-2*n],["z"]];return o},Wl=function(t){if(t=Dn(t),!t||!t.length)return[["M",0,0]];var r=[],e=0,n=0,i=0,o=0,a=0,l,s;t[0][0]==="M"&&(e=+t[0][1],n=+t[0][2],i=e,o=n,a++,r[0]=["M",e,n]);for(var u=t.length===3&&t[0][0]==="M"&&t[1][0].toUpperCase()==="R"&&t[2][0].toUpperCase()==="Z",f=void 0,h=void 0,d=a,c=t.length;d<c;d++){if(r.push(f=[]),h=t[d],l=h[0],l!==l.toUpperCase())switch(f[0]=l.toUpperCase(),f[0]){case"A":f[1]=h[1],f[2]=h[2],f[3]=h[3],f[4]=h[4],f[5]=h[5],f[6]=+h[6]+e,f[7]=+h[7]+n;break;case"V":f[1]=+h[1]+n;break;case"H":f[1]=+h[1]+e;break;case"R":s=[e,n].concat(h.slice(1));for(var v=2,p=s.length;v<p;v++)s[v]=+s[v]+e,s[++v]=+s[v]+n;r.pop(),r=r.concat(zl(s,u));break;case"O":r.pop(),s=_o(e,n,h[1],h[2]),s.push(s[0]),r=r.concat(s);break;case"U":r.pop(),r=r.concat(_o(e,n,h[1],h[2],h[3])),f=["U"].concat(r[r.length-1].slice(-2));break;case"M":i=+h[1]+e,o=+h[2]+n;break;default:for(var v=1,p=h.length;v<p;v++)f[v]=+h[v]+(v%2?e:n)}else if(l==="R")s=[e,n].concat(h.slice(1)),r.pop(),r=r.concat(zl(s,u)),f=["R"].concat(h.slice(-2));else if(l==="O")r.pop(),s=_o(e,n,h[1],h[2]),s.push(s[0]),r=r.concat(s);else if(l==="U")r.pop(),r=r.concat(_o(e,n,h[1],h[2],h[3])),f=["U"].concat(r[r.length-1].slice(-2));else for(var g=0,y=h.length;g<y;g++)f[g]=h[g];if(l=l.toUpperCase(),l!=="O")switch(f[0]){case"Z":e=+i,n=+o;break;case"H":e=f[1];break;case"V":n=f[1];break;case"M":i=f[f.length-2],o=f[f.length-1];break;default:e=f[f.length-2],n=f[f.length-1]}}return r},So=function(t,r,e,n){return[t,r,e,n,e,n]},Zf=function(t,r,e,n,i,o){var a=.3333333333333333,l=2/3;return[a*t+l*e,a*r+l*n,a*i+l*e,a*o+l*n,i,o]},rv=function(t,r,e,n,i,o,a,l,s,u){e===n&&(e+=1);var f=Math.PI*120/180,h=Math.PI/180*(+i||0),d=[],c,v,p,g,y,C=function(yr,en,tn){var Co=yr*Math.cos(tn)-en*Math.sin(tn),vl=yr*Math.sin(tn)+en*Math.cos(tn);return{x:Co,y:vl}};if(u)v=u[0],p=u[1],g=u[2],y=u[3];else{c=C(t,r,-h),t=c.x,r=c.y,c=C(l,s,-h),l=c.x,s=c.y,t===l&&r===s&&(l+=1,s+=1);var w=(t-l)/2,m=(r-s)/2,_=w*w/(e*e)+m*m/(n*n);_>1&&(_=Math.sqrt(_),e=_*e,n=_*n);var b=e*e,T=n*n,E=(o===a?-1:1)*Math.sqrt(Math.abs((b*T-b*m*m-T*w*w)/(b*m*m+T*w*w)));g=E*e*m/n+(t+l)/2,y=E*-n*w/e+(r+s)/2,v=Math.asin(((r-y)/n).toFixed(9)),p=Math.asin(((s-y)/n).toFixed(9)),v=t<g?Math.PI-v:v,p=l<g?Math.PI-p:p,v<0&&(v=Math.PI*2+v),p<0&&(p=Math.PI*2+p),a&&v>p&&(v=v-Math.PI*2),!a&&p>v&&(p=p-Math.PI*2)}var L=p-v;if(Math.abs(L)>f){var F=p,I=l,B=s;p=v+f*(a&&p>v?1:-1),l=g+e*Math.cos(p),s=y+n*Math.sin(p),d=rv(l,s,e,n,i,0,a,I,B,[p,F,g,y])}L=p-v;var k=Math.cos(v),U=Math.sin(v),O=Math.cos(p),z=Math.sin(p),ue=Math.tan(L/4),le=4/3*e*ue,te=4/3*n*ue,Ce=[t,r],fe=[t+le*U,r-te*k],we=[l+le*z,s-te*O],Ee=[l,s];if(fe[0]=2*Ce[0]-fe[0],fe[1]=2*Ce[1]-fe[1],u)return[fe,we,Ee].concat(d);d=[fe,we,Ee].concat(d).join().split(",");for(var he=[],me=0,Ie=d.length;me<Ie;me++)he[me]=me%2?C(d[me-1],d[me],h).y:C(d[me],d[me+1],h).x;return he},kl=function(t,r){var e=Wl(t),n=r&&Wl(r),i={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a=[],l=[],s="",u="",f,h=function(w,m,_){var b,T;if(!w)return["C",m.x,m.y,m.x,m.y,m.x,m.y];switch(!(w[0]in{T:1,Q:1})&&(m.qx=m.qy=null),w[0]){case"M":m.X=w[1],m.Y=w[2];break;case"A":w=["C"].concat(rv.apply(0,[m.x,m.y].concat(w.slice(1))));break;case"S":_==="C"||_==="S"?(b=m.x*2-m.bx,T=m.y*2-m.by):(b=m.x,T=m.y),w=["C",b,T].concat(w.slice(1));break;case"T":_==="Q"||_==="T"?(m.qx=m.x*2-m.qx,m.qy=m.y*2-m.qy):(m.qx=m.x,m.qy=m.y),w=["C"].concat(Zf(m.x,m.y,m.qx,m.qy,w[1],w[2]));break;case"Q":m.qx=w[1],m.qy=w[2],w=["C"].concat(Zf(m.x,m.y,w[1],w[2],w[3],w[4]));break;case"L":w=["C"].concat(So(m.x,m.y,w[1],w[2]));break;case"H":w=["C"].concat(So(m.x,m.y,w[1],m.y));break;case"V":w=["C"].concat(So(m.x,m.y,m.x,w[1]));break;case"Z":w=["C"].concat(So(m.x,m.y,m.X,m.Y));break}return w},d=function(w,m){if(w[m].length>7){w[m].shift();for(var _=w[m];_.length;)a[m]="A",n&&(l[m]="A"),w.splice(m++,0,["C"].concat(_.splice(0,6)));w.splice(m,1),f=Math.max(e.length,n&&n.length||0)}},c=function(w,m,_,b,T){w&&m&&w[T][0]==="M"&&m[T][0]!=="M"&&(m.splice(T,0,["M",b.x,b.y]),_.bx=0,_.by=0,_.x=w[T][1],_.y=w[T][2],f=Math.max(e.length,n&&n.length||0))};f=Math.max(e.length,n&&n.length||0);for(var v=0;v<f;v++){e[v]&&(s=e[v][0]),s!=="C"&&(a[v]=s,v&&(u=a[v-1])),e[v]=h(e[v],i,u),a[v]!=="A"&&s==="C"&&(a[v]="C"),d(e,v),n&&(n[v]&&(s=n[v][0]),s!=="C"&&(l[v]=s,v&&(u=l[v-1])),n[v]=h(n[v],o,u),l[v]!=="A"&&s==="C"&&(l[v]="C"),d(n,v)),c(e,n,i,o,v),c(n,e,o,i,v);var p=e[v],g=n&&n[v],y=p.length,C=n&&g.length;i.x=p[y-2],i.y=p[y-1],i.bx=parseFloat(p[y-4])||i.x,i.by=parseFloat(p[y-3])||i.y,o.bx=n&&(parseFloat(g[C-4])||o.x),o.by=n&&(parseFloat(g[C-3])||o.y),o.x=n&&g[C-2],o.y=n&&g[C-1]}return n?[e,n]:e},DC=/,?([a-z]),?/gi,nv=function(t){return t.join(",").replace(DC,"$1")},jf=function(t,r,e,n,i){var o=-3*r+9*e-9*n+3*i,a=t*o+6*r-12*e+6*n;return t*a-3*r+3*e},Qf=function(t,r,e,n,i,o,a,l,s){s===null&&(s=1),s=s>1?1:s<0?0:s;for(var u=s/2,f=12,h=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],d=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],c=0,v=0;v<f;v++){var p=u*h[v]+u,g=jf(p,t,e,i,a),y=jf(p,r,n,o,l),C=g*g+y*y;c+=d[v]*Math.sqrt(C)}return u*c},NC=function(t,r,e,n,i,o,a,l){for(var s=[],u=[[],[]],f,h,d,c,v=0;v<2;++v){if(v===0?(h=6*t-12*e+6*i,f=-3*t+9*e-9*i+3*a,d=3*e-3*t):(h=6*r-12*n+6*o,f=-3*r+9*n-9*o+3*l,d=3*n-3*r),Math.abs(f)<1e-12){if(Math.abs(h)<1e-12)continue;c=-d/h,c>0&&c<1&&s.push(c);continue}var p=h*h-4*d*f,g=Math.sqrt(p);if(!(p<0)){var y=(-h+g)/(2*f);y>0&&y<1&&s.push(y);var C=(-h-g)/(2*f);C>0&&C<1&&s.push(C)}}for(var w=s.length,m=w,_;w--;)c=s[w],_=1-c,u[0][w]=_*_*_*t+3*_*_*c*e+3*_*c*c*i+c*c*c*a,u[1][w]=_*_*_*r+3*_*_*c*n+3*_*c*c*o+c*c*c*l;return u[0][m]=t,u[1][m]=r,u[0][m+1]=a,u[1][m+1]=l,u[0].length=u[1].length=m+2,{min:{x:Math.min.apply(0,u[0]),y:Math.min.apply(0,u[1])},max:{x:Math.max.apply(0,u[0]),y:Math.max.apply(0,u[1])}}},PC=function(t,r,e,n,i,o,a,l){if(!(Math.max(t,e)<Math.min(i,a)||Math.min(t,e)>Math.max(i,a)||Math.max(r,n)<Math.min(o,l)||Math.min(r,n)>Math.max(o,l))){var s=(t*n-r*e)*(i-a)-(t-e)*(i*l-o*a),u=(t*n-r*e)*(o-l)-(r-n)*(i*l-o*a),f=(t-e)*(o-l)-(r-n)*(i-a);if(f){var h=s/f,d=u/f,c=+h.toFixed(2),v=+d.toFixed(2);if(!(c<+Math.min(t,e).toFixed(2)||c>+Math.max(t,e).toFixed(2)||c<+Math.min(i,a).toFixed(2)||c>+Math.max(i,a).toFixed(2)||v<+Math.min(r,n).toFixed(2)||v>+Math.max(r,n).toFixed(2)||v<+Math.min(o,l).toFixed(2)||v>+Math.max(o,l).toFixed(2)))return{x:h,y:d}}}},Or=function(t,r,e){return r>=t.x&&r<=t.x+t.width&&e>=t.y&&e<=t.y+t.height},iv=function(t,r,e,n,i){if(i)return[["M",+t+ +i,r],["l",e-i*2,0],["a",i,i,0,0,1,i,i],["l",0,n-i*2],["a",i,i,0,0,1,-i,i],["l",i*2-e,0],["a",i,i,0,0,1,-i,-i],["l",0,i*2-n],["a",i,i,0,0,1,i,-i],["z"]];var o=[["M",t,r],["l",e,0],["l",0,n],["l",-e,0],["z"]];return o.parsePathArray=nv,o},Gl=function(t,r,e,n){return t===null&&(t=r=e=n=0),r===null&&(r=t.y,e=t.width,n=t.height,t=t.x),{x:t,y:r,width:e,w:e,height:n,h:n,x2:t+e,y2:r+n,cx:t+e/2,cy:r+n/2,r1:Math.min(e,n)/2,r2:Math.max(e,n)/2,r0:Math.sqrt(e*e+n*n)/2,path:iv(t,r,e,n),vb:[t,r,e,n].join(" ")}},FC=function(t,r){return t=Gl(t),r=Gl(r),Or(r,t.x,t.y)||Or(r,t.x2,t.y)||Or(r,t.x,t.y2)||Or(r,t.x2,t.y2)||Or(t,r.x,r.y)||Or(t,r.x2,r.y)||Or(t,r.x,r.y2)||Or(t,r.x2,r.y2)||(t.x<r.x2&&t.x>r.x||r.x<t.x2&&r.x>t.x)&&(t.y<r.y2&&t.y>r.y||r.y<t.y2&&r.y>t.y)},Jf=function(t,r,e,n,i,o,a,l){Bt(t)||(t=[t,r,e,n,i,o,a,l]);var s=NC.apply(null,t);return Gl(s.min.x,s.min.y,s.max.x-s.min.x,s.max.y-s.min.y)},eh=function(t,r,e,n,i,o,a,l,s){var u=1-s,f=Math.pow(u,3),h=Math.pow(u,2),d=s*s,c=d*s,v=f*t+h*3*s*e+u*3*s*s*i+c*a,p=f*r+h*3*s*n+u*3*s*s*o+c*l,g=t+2*s*(e-t)+d*(i-2*e+t),y=r+2*s*(n-r)+d*(o-2*n+r),C=e+2*s*(i-e)+d*(a-2*i+e),w=n+2*s*(o-n)+d*(l-2*o+n),m=u*t+s*e,_=u*r+s*n,b=u*i+s*a,T=u*o+s*l,E=90-Math.atan2(g-C,y-w)*180/Math.PI;return{x:v,y:p,m:{x:g,y},n:{x:C,y:w},start:{x:m,y:_},end:{x:b,y:T},alpha:E}},HC=function(t,r,e){var n=Jf(t),i=Jf(r);if(!FC(n,i))return[];for(var o=Qf.apply(0,t),a=Qf.apply(0,r),l=~~(o/8),s=~~(a/8),u=[],f=[],h={},d=[],c=0;c<l+1;c++){var v=eh.apply(0,t.concat(c/l));u.push({x:v.x,y:v.y,t:c/l})}for(var c=0;c<s+1;c++){var v=eh.apply(0,r.concat(c/s));f.push({x:v.x,y:v.y,t:c/s})}for(var c=0;c<l;c++)for(var p=0;p<s;p++){var g=u[c],y=u[c+1],C=f[p],w=f[p+1],m=Math.abs(y.x-g.x)<.001?"y":"x",_=Math.abs(w.x-C.x)<.001?"y":"x",b=PC(g.x,g.y,y.x,y.y,C.x,C.y,w.x,w.y);if(b){if(h[b.x.toFixed(4)]===b.y.toFixed(4))continue;h[b.x.toFixed(4)]=b.y.toFixed(4);var T=g.t+Math.abs((b[m]-g[m])/(y[m]-g[m]))*(y.t-g.t),E=C.t+Math.abs((b[_]-C[_])/(w[_]-C[_]))*(w.t-C.t);T>=0&&T<=1&&E>=0&&E<=1&&d.push({x:b.x,y:b.y,t1:T,t2:E})}}return d},zC=function(t,r,e){t=kl(t),r=kl(r);for(var n,i,o,a,l,s,u,f,h,d,c=e?0:[],v=0,p=t.length;v<p;v++){var g=t[v];if(g[0]==="M")n=l=g[1],i=s=g[2];else{g[0]==="C"?(h=[n,i].concat(g.slice(1)),n=h[6],i=h[7]):(h=[n,i,n,i,l,s,l,s],n=l,i=s);for(var y=0,C=r.length;y<C;y++){var w=r[y];if(w[0]==="M")o=u=w[1],a=f=w[2];else{w[0]==="C"?(d=[o,a].concat(w.slice(1)),o=d[6],a=d[7]):(d=[o,a,o,a,u,f,u,f],o=u,a=f);var m=HC(h,d);{for(var _=0,b=m.length;_<b;_++)m[_].segment1=v,m[_].segment2=y,m[_].bez1=h,m[_].bez2=d;c=c.concat(m)}}}}}return c},WC=function(t,r){return zC(t,r)};function kC(t,r){var e=[],n=[];function i(o,a){if(o.length===1)e.push(o[0]),n.push(o[0]);else{for(var l=[],s=0;s<o.length-1;s++)s===0&&e.push(o[0]),s===o.length-2&&n.push(o[s+1]),l[s]=[(1-a)*o[s][0]+a*o[s+1][0],(1-a)*o[s][1]+a*o[s+1][1]];i(l,a)}}return t.length&&i(t,r),{left:e,right:n.reverse()}}function GC(t,r,e){var n=[[t[1],t[2]]];e=e||2;var i=[];r[0]==="A"?(n.push(r[6]),n.push(r[7])):r[0]==="C"?(n.push([r[1],r[2]]),n.push([r[3],r[4]]),n.push([r[5],r[6]])):r[0]==="S"||r[0]==="Q"?(n.push([r[1],r[2]]),n.push([r[3],r[4]])):n.push([r[1],r[2]]);for(var o=n,a=1/e,l=0;l<e-1;l++){var s=a/(1-a*l),u=kC(o,s);i.push(u.left),o=u.right}i.push(o);var f=i.map(function(h){var d=[];return h.length===4&&(d.push("C"),d=d.concat(h[2])),h.length>=3&&(h.length===3&&d.push("Q"),d=d.concat(h[1])),h.length===2&&d.push("L"),d=d.concat(h[h.length-1]),d});return f}var $C=function(t,r,e){if(e===1)return[[].concat(t)];var n=[];if(r[0]==="L"||r[0]==="C"||r[0]==="Q")n=n.concat(GC(t,r,e));else{var i=[].concat(t);i[0]==="M"&&(i[0]="L");for(var o=0;o<=e-1;o++)n.push(i)}return n},YC=function(t,r){if(t.length===1)return t;var e=t.length-1,n=r.length-1,i=e/n,o=[];if(t.length===1&&t[0][0]==="M"){for(var a=0;a<n-e;a++)t.push(t[0]);return t}for(var a=0;a<n;a++){var l=Math.floor(i*a);o[l]=(o[l]||0)+1}var s=o.reduce(function(u,f,h){return h===e?u.concat(t[e]):u.concat($C(t[h],t[h+1],f))},[]);return s.unshift(t[0]),(r[n]==="Z"||r[n]==="z")&&s.push("Z"),s},UC=function(t,r){if(t.length!==r.length)return!1;var e=!0;return se(t,function(n,i){if(n!==r[i])return e=!1,!1}),e};function XC(t,r,e){var n=null,i=e;return r<i&&(i=r,n="add"),t<i&&(i=t,n="del"),{type:n,min:i}}var VC=function(t,r){var e=t.length,n=r.length,i,o,a=0;if(e===0||n===0)return null;for(var l=[],s=0;s<=e;s++)l[s]=[],l[s][0]={min:s};for(var u=0;u<=n;u++)l[0][u]={min:u};for(var s=1;s<=e;s++){i=t[s-1];for(var u=1;u<=n;u++){o=r[u-1],UC(i,o)?a=0:a=1;var f=l[s-1][u].min+1,h=l[s][u-1].min+1,d=l[s-1][u-1].min+a;l[s][u]=XC(f,h,d)}}return l},ov=function(t,r){var e=VC(t,r),n=t.length,i=r.length,o=[],a=1,l=1;if(e[n][i].min!==n){for(var s=1;s<=n;s++){var u=e[s][s].min;l=s;for(var f=a;f<=i;f++)e[s][f].min<u&&(u=e[s][f].min,l=f);a=l,e[s][a].type&&o.push({index:s-1,type:e[s][a].type})}for(var s=o.length-1;s>=0;s--)a=o[s].index,o[s].type==="add"?t.splice(a,0,[].concat(t[a])):t.splice(a,1)}n=t.length;var h=i-n;if(n<i)for(var s=0;s<h;s++)t[n-1][0]==="z"||t[n-1][0]==="Z"?t.splice(n-2,0,t[n-2]):t.push(t[n-1]),n+=1;return t};function yl(t,r,e){for(var n=[].concat(t),i,o=1/(e+1),a=av(r)[0],l=1;l<=e;l++)o*=l,i=Math.floor(t.length*o),i===0?n.unshift([a[0]*o+t[i][0]*(1-o),a[1]*o+t[i][1]*(1-o)]):n.splice(i,0,[a[0]*o+t[i][0]*(1-o),a[1]*o+t[i][1]*(1-o)]);return n}function av(t){var r=[];switch(t[0]){case"M":r.push([t[1],t[2]]);break;case"L":r.push([t[1],t[2]]);break;case"A":r.push([t[6],t[7]]);break;case"Q":r.push([t[3],t[4]]),r.push([t[1],t[2]]);break;case"T":r.push([t[1],t[2]]);break;case"C":r.push([t[5],t[6]]),r.push([t[1],t[2]]),r.push([t[3],t[4]]);break;case"S":r.push([t[3],t[4]]),r.push([t[1],t[2]]);break;case"H":r.push([t[1],t[1]]);break;case"V":r.push([t[1],t[1]]);break}return r}var $l=function(t,r){if(t.length<=1)return t;for(var e,n=0;n<r.length;n++)if(t[n][0]!==r[n][0])switch(e=av(t[n]),r[n][0]){case"M":t[n]=["M"].concat(e[0]);break;case"L":t[n]=["L"].concat(e[0]);break;case"A":t[n]=[].concat(r[n]),t[n][6]=e[0][0],t[n][7]=e[0][1];break;case"Q":if(e.length<2)if(n>0)e=yl(e,t[n-1],1);else{t[n]=r[n];break}t[n]=["Q"].concat(e.reduce(function(i,o){return i.concat(o)},[]));break;case"T":t[n]=["T"].concat(e[0]);break;case"C":if(e.length<3)if(n>0)e=yl(e,t[n-1],2);else{t[n]=r[n];break}t[n]=["C"].concat(e.reduce(function(i,o){return i.concat(o)},[]));break;case"S":if(e.length<2)if(n>0)e=yl(e,t[n-1],1);else{t[n]=r[n];break}t[n]=["S"].concat(e.reduce(function(i,o){return i.concat(o)},[]));break;default:t[n]=r[n]}return t},qC=Object.freeze({__proto__:null,catmullRomToBezier:zl,fillPath:YC,fillPathByDiff:ov,formatPath:$l,intersection:WC,parsePathArray:nv,parsePathString:Dn,pathToAbsolute:Wl,pathToCurve:kl,rectPath:iv}),KC=function(){function t(r,e){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=r,this.name=r,this.originalEvent=e,this.timeStamp=e.timeStamp}return t.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t.prototype.toString=function(){var r=this.type;return"[Event (type="+r+")]"},t.prototype.save=function(){},t.prototype.restore=function(){},t}(),ZC="*",Ta=function(){function t(){this._events={}}return t.prototype.on=function(r,e,n){return this._events[r]||(this._events[r]=[]),this._events[r].push({callback:e,once:!!n}),this},t.prototype.once=function(r,e){return this.on(r,e,!0)},t.prototype.emit=function(r){for(var e=this,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var o=this._events[r]||[],a=this._events[ZC]||[],l=function(s){for(var u=s.length,f=0;f<u;f++)if(s[f]){var h=s[f],d=h.callback,c=h.once;c&&(s.splice(f,1),s.length===0&&delete e._events[r],u--,f--),d.apply(e,n)}};l(o),l(a)},t.prototype.off=function(r,e){if(!r)this._events={};else if(!e)delete this._events[r];else{for(var n=this._events[r]||[],i=n.length,o=0;o<i;o++)n[o].callback===e&&(n.splice(o,1),i--,o--);n.length===0&&delete this._events[r]}return this},t.prototype.getEvents=function(){return this._events},t}();function lv(t,r){var e=t.indexOf(r);e!==-1&&t.splice(e,1)}var th=typeof window<"u"&&typeof window.document<"u";function sv(t,r){if(t.isCanvas())return!0;for(var e=r.getParent(),n=!1;e;){if(e===t){n=!0;break}e=e.getParent()}return n}function Yl(t){return t.cfg.visible&&t.cfg.capture}var jC=function(t){H(r,t);function r(e){var n=t.call(this)||this;n.destroyed=!1;var i=n.getDefaultCfg();return n.cfg=tv(i,e),n}return r.prototype.getDefaultCfg=function(){return{}},r.prototype.get=function(e){return this.cfg[e]},r.prototype.set=function(e,n){this.cfg[e]=n},r.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},r}(Ta),rh=function(t,r,e){if(e||arguments.length===2)for(var n=0,i=r.length,o;n<i;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return t.concat(o||Array.prototype.slice.call(r))},QC=function(){function t(r,e,n){this.name=r,this.version=e,this.os=n,this.type="browser"}return t}(),JC=function(){function t(r){this.version=r,this.type="node",this.name="node",this.os=process.platform}return t}(),e1=function(){function t(r,e,n,i){this.name=r,this.version=e,this.os=n,this.bot=i,this.type="bot-device"}return t}(),t1=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),r1=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),n1=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,i1=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,nh=3,o1=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",n1]],ih=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function a1(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new r1:typeof navigator<"u"?s1(navigator.userAgent):f1()}function l1(t){return t!==""&&o1.reduce(function(r,e){var n=e[0],i=e[1];if(r)return r;var o=i.exec(t);return!!o&&[n,o]},!1)}function s1(t){var r=l1(t);if(!r)return null;var e=r[0],n=r[1];if(e==="searchbot")return new t1;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<nh&&(i=rh(rh([],i,!0),h1(nh-i.length),!0)):i=[];var o=i.join("."),a=u1(t),l=i1.exec(t);return l&&l[1]?new e1(e,o,a,l[1]):new QC(e,o,a)}function u1(t){for(var r=0,e=ih.length;r<e;r++){var n=ih[r],i=n[0],o=n[1],a=o.exec(t);if(a)return i}return null}function f1(){var t=typeof process<"u"&&process.version;return t?new JC(process.version.slice(1)):null}function h1(t){for(var r=[],e=0;e<t;e++)r.push("0");return r}var Vo=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,r=arguments.length;r--;)t+=arguments[r]*arguments[r];return Math.sqrt(t)});function Ra(t,r,e){var n=r[0],i=r[1],o=r[2],a=r[3],l=r[4],s=r[5],u=r[6],f=r[7],h=r[8],d=e[0],c=e[1],v=e[2],p=e[3],g=e[4],y=e[5],C=e[6],w=e[7],m=e[8];return t[0]=d*n+c*a+v*u,t[1]=d*i+c*l+v*f,t[2]=d*o+c*s+v*h,t[3]=p*n+g*a+y*u,t[4]=p*i+g*l+y*f,t[5]=p*o+g*s+y*h,t[6]=C*n+w*a+m*u,t[7]=C*i+w*l+m*f,t[8]=C*o+w*s+m*h,t}function d1(t,r){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=r[0],t[7]=r[1],t[8]=1,t}function c1(t,r){var e=Math.sin(r),n=Math.cos(r);return t[0]=n,t[1]=e,t[2]=0,t[3]=-e,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function v1(t,r){return t[0]=r[0],t[1]=0,t[2]=0,t[3]=0,t[4]=r[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function p1(){var t=new Vo(3);return Vo!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function g1(t,r,e){var n=r[0],i=r[1],o=r[2];return t[0]=n*e[0]+i*e[3]+o*e[6],t[1]=n*e[1]+i*e[4]+o*e[7],t[2]=n*e[2]+i*e[5]+o*e[8],t}(function(){var t=p1();return function(r,e,n,i,o,a){var l,s;for(e||(e=3),n||(n=0),i?s=Math.min(i*e+n,r.length):s=r.length,l=n;l<s;l+=e)t[0]=r[l],t[1]=r[l+1],t[2]=r[l+2],o(t,t,a),r[l]=t[0],r[l+1]=t[1],r[l+2]=t[2];return r}})();function y1(){var t=new Vo(2);return Vo!=Float32Array&&(t[0]=0,t[1]=0),t}function C1(t,r){var e=r[0],n=r[1],i=e*e+n*n;return i>0&&(i=1/Math.sqrt(i)),t[0]=r[0]*i,t[1]=r[1]*i,t}function w1(t,r){return t[0]*r[0]+t[1]*r[1]}function m1(t,r){return t[0]===r[0]&&t[1]===r[1]}(function(){var t=y1();return function(r,e,n,i,o,a){var l,s;for(e||(e=2),n||(n=0),i?s=Math.min(i*e+n,r.length):s=r.length,l=n;l<s;l+=e)t[0]=r[l],t[1]=r[l+1],o(t,t,a),r[l]=t[0],r[l+1]=t[1];return r}})();function x1(t,r,e){var n=[0,0,0,0,0,0,0,0,0];return d1(n,e),Ra(t,n,r)}function _1(t,r,e){var n=[0,0,0,0,0,0,0,0,0];return c1(n,e),Ra(t,n,r)}function S1(t,r,e){var n=[0,0,0,0,0,0,0,0,0];return v1(n,e),Ra(t,n,r)}function b1(t,r,e){return Ra(t,e,r)}function uv(t,r){for(var e=t?[].concat(t):[1,0,0,0,1,0,0,0,1],n=0,i=r.length;n<i;n++){var o=r[n];switch(o[0]){case"t":x1(e,e,[o[1],o[2]]);break;case"s":S1(e,e,[o[1],o[2]]);break;case"r":_1(e,e,o[1]);break;case"m":b1(e,e,o[1]);break}}return e}function oh(t,r){var e=[],n=t[0],i=t[1],o=t[2],a=t[3],l=t[4],s=t[5],u=t[6],f=t[7],h=t[8],d=r[0],c=r[1],v=r[2],p=r[3],g=r[4],y=r[5],C=r[6],w=r[7],m=r[8];return e[0]=d*n+c*a+v*u,e[1]=d*i+c*l+v*f,e[2]=d*o+c*s+v*h,e[3]=p*n+g*a+y*u,e[4]=p*i+g*l+y*f,e[5]=p*o+g*s+y*h,e[6]=C*n+w*a+m*u,e[7]=C*i+w*l+m*f,e[8]=C*o+w*s+m*h,e}function on(t,r){var e=[],n=r[0],i=r[1];return e[0]=t[0]*n+t[3]*i+t[6],e[1]=t[1]*n+t[4]*i+t[7],e}function fv(t){var r=[],e=t[0],n=t[1],i=t[2],o=t[3],a=t[4],l=t[5],s=t[6],u=t[7],f=t[8],h=f*a-l*u,d=-f*o+l*s,c=u*o-a*s,v=e*h+n*d+i*c;return v?(v=1/v,r[0]=h*v,r[1]=(-f*n+i*u)*v,r[2]=(l*n-i*a)*v,r[3]=d*v,r[4]=(f*e-i*s)*v,r[5]=(-l*e+i*o)*v,r[6]=c*v,r[7]=(-u*e+n*s)*v,r[8]=(a*e-n*o)*v,r):null}var pi=uv,Cl="matrix",T1=["zIndex","capture","visible","type"],R1=["repeat"],E1=":",L1="*";function A1(t){for(var r=[],e=0;e<t.length;e++)Bt(t[e])?r.push([].concat(t[e])):r.push(t[e]);return r}function M1(t,r){var e={},n=r.attrs;for(var i in t)e[i]=n[i];return e}function I1(t,r){var e={},n=r.attr();return se(t,function(i,o){R1.indexOf(o)===-1&&!Xo(n[o],i)&&(e[o]=i)}),e}function O1(t,r){if(r.onFrame)return t;var e=r.startTime,n=r.delay,i=r.duration,o=Object.prototype.hasOwnProperty;return se(t,function(a){e+n<a.startTime+a.delay+a.duration&&i>a.delay&&se(r.toAttrs,function(l,s){o.call(a.toAttrs,s)&&(delete a.toAttrs[s],delete a.fromAttrs[s])})}),t}var hv=function(t){H(r,t);function r(e){var n=t.call(this,e)||this;n.attrs={};var i=n.getDefaultAttrs();return tv(i,e.attrs),n.attrs=i,n.initAttrs(i),n.initAnimate(),n}return r.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},r.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},r.prototype.onCanvasChange=function(e){},r.prototype.initAttrs=function(e){},r.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},r.prototype.isGroup=function(){return!1},r.prototype.getParent=function(){return this.get("parent")},r.prototype.getCanvas=function(){return this.get("canvas")},r.prototype.attr=function(){for(var e,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=n[0],a=n[1];if(!o)return this.attrs;if(Si(o)){for(var l in o)this.setAttr(l,o[l]);return this.afterAttrsChange(o),this}return n.length===2?(this.setAttr(o,a),this.afterAttrsChange((e={},e[o]=a,e)),this):this.attrs[o]},r.prototype.isClipped=function(e,n){var i=this.getClip();return i&&!i.isHit(e,n)},r.prototype.setAttr=function(e,n){var i=this.attrs[e];i!==n&&(this.attrs[e]=n,this.onAttrChange(e,n,i))},r.prototype.onAttrChange=function(e,n,i){e==="matrix"&&this.set("totalMatrix",null)},r.prototype.afterAttrsChange=function(e){if(this.cfg.isClipShape){var n=this.cfg.applyTo;n&&n.onCanvasChange("clip")}else this.onCanvasChange("attr")},r.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},r.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},r.prototype.setZIndex=function(e){this.set("zIndex",e);var n=this.getParent();return n&&n.sort(),this},r.prototype.toFront=function(){var e=this.getParent();if(e){var n=e.getChildren();this.get("el");var i=n.indexOf(this);n.splice(i,1),n.push(this),this.onCanvasChange("zIndex")}},r.prototype.toBack=function(){var e=this.getParent();if(e){var n=e.getChildren();this.get("el");var i=n.indexOf(this);n.splice(i,1),n.unshift(this),this.onCanvasChange("zIndex")}},r.prototype.remove=function(e){e===void 0&&(e=!0);var n=this.getParent();n?(lv(n.getChildren(),this),n.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),e&&this.destroy()},r.prototype.resetMatrix=function(){this.attr(Cl,this.getDefaultMatrix()),this.onCanvasChange("matrix")},r.prototype.getMatrix=function(){return this.attr(Cl)},r.prototype.setMatrix=function(e){this.attr(Cl,e),this.onCanvasChange("matrix")},r.prototype.getTotalMatrix=function(){var e=this.cfg.totalMatrix;if(!e){var n=this.attr("matrix"),i=this.cfg.parentMatrix;i&&n?e=oh(i,n):e=n||i,this.set("totalMatrix",e)}return e},r.prototype.applyMatrix=function(e){var n=this.attr("matrix"),i=null;e&&n?i=oh(e,n):i=n||e,this.set("totalMatrix",i),this.set("parentMatrix",e)},r.prototype.getDefaultMatrix=function(){return null},r.prototype.applyToMatrix=function(e){var n=this.attr("matrix");return n?on(n,e):e},r.prototype.invertFromMatrix=function(e){var n=this.attr("matrix");if(n){var i=fv(n);if(i)return on(i,e)}return e},r.prototype.setClip=function(e){var n=this.getCanvas(),i=null;if(e){var o=this.getShapeBase(),a=ev(e.type),l=o[a];l&&(i=new l({type:e.type,isClipShape:!0,applyTo:this,attrs:e.attrs,canvas:n}))}return this.set("clipShape",i),this.onCanvasChange("clip"),i},r.prototype.getClip=function(){var e=this.cfg.clipShape;return e||null},r.prototype.clone=function(){var e=this,n=this.attrs,i={};se(n,function(l,s){Bt(n[s])?i[s]=A1(n[s]):i[s]=n[s]});var o=this.constructor,a=new o({attrs:i});return se(T1,function(l){a.set(l,e.get(l))}),a},r.prototype.destroy=function(){var e=this.destroyed;e||(this.attrs={},t.prototype.destroy.call(this))},r.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},r.prototype.animate=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(!(!this.get("timeline")&&!this.get("canvas"))){this.set("animating",!0);var i=this.get("timeline");i||(i=this.get("canvas").get("timeline"),this.set("timeline",i));var o=this.get("animations")||[];i.timer||i.initTimer();var a=e[0],l=e[1],s=e[2],u=s===void 0?"easeLinear":s,f=e[3],h=f===void 0?mo:f,d=e[4],c=d===void 0?0:d,v,p,g,y,C;pn(a)?(v=a,a={}):Si(a)&&a.onFrame&&(v=a.onFrame,p=a.repeat),Si(l)?(C=l,l=C.duration,u=C.easing||"easeLinear",c=C.delay||0,p=C.repeat||p||!1,h=C.callback||mo,g=C.pauseCallback||mo,y=C.resumeCallback||mo):(Hl(h)&&(c=h,h=null),pn(u)?(h=u,u="easeLinear"):u=u||"easeLinear");var w=I1(a,this),m={fromAttrs:M1(w,this),toAttrs:w,duration:l,easing:u,repeat:p,callback:h,pauseCallback:g,resumeCallback:y,delay:c,startTime:i.getTime(),id:IC(),onFrame:v,pathFormatted:!1};o.length>0?o=O1(o,m):i.addAnimator(this),o.push(m),this.set("animations",o),this.set("_pause",{isPaused:!1})}},r.prototype.stopAnimate=function(e){var n=this;e===void 0&&(e=!0);var i=this.get("animations");se(i,function(o){e&&(o.onFrame?n.attr(o.onFrame(1)):n.attr(o.toAttrs)),o.callback&&o.callback()}),this.set("animating",!1),this.set("animations",[])},r.prototype.pauseAnimate=function(){var e=this.get("timeline"),n=this.get("animations"),i=e.getTime();return se(n,function(o){o._paused=!0,o._pauseTime=i,o.pauseCallback&&o.pauseCallback()}),this.set("_pause",{isPaused:!0,pauseTime:i}),this},r.prototype.resumeAnimate=function(){var e=this.get("timeline"),n=e.getTime(),i=this.get("animations"),o=this.get("_pause").pauseTime;return se(i,function(a){a.startTime=a.startTime+(n-o),a._paused=!1,a._pauseTime=null,a.resumeCallback&&a.resumeCallback()}),this.set("_pause",{isPaused:!1}),this.set("animations",i),this},r.prototype.emitDelegation=function(e,n){var i=this,o=n.propagationPath;this.getEvents();var a;e==="mouseenter"?a=n.fromShape:e==="mouseleave"&&(a=n.toShape);for(var l=function(h){var d=o[h],c=d.get("name");if(c){if((d.isGroup()||d.isCanvas&&d.isCanvas())&&a&&sv(d,a))return"break";Bt(c)?se(c,function(v){i.emitDelegateEvent(d,v,n)}):s.emitDelegateEvent(d,c,n)}},s=this,u=0;u<o.length;u++){var f=l(u);if(f==="break")break}},r.prototype.emitDelegateEvent=function(e,n,i){var o=this.getEvents(),a=n+E1+i.type;(o[a]||o[L1])&&(i.name=a,i.currentTarget=e,i.delegateTarget=this,i.delegateObject=e.get("delegateObject"),this.emit(a,i))},r.prototype.translate=function(e,n){e===void 0&&(e=0),n===void 0&&(n=0);var i=this.getMatrix(),o=pi(i,[["t",e,n]]);return this.setMatrix(o),this},r.prototype.move=function(e,n){var i=this.attr("x")||0,o=this.attr("y")||0;return this.translate(e-i,n-o),this},r.prototype.moveTo=function(e,n){return this.move(e,n)},r.prototype.scale=function(e,n){var i=this.getMatrix(),o=pi(i,[["s",e,n||e]]);return this.setMatrix(o),this},r.prototype.rotate=function(e){var n=this.getMatrix(),i=pi(n,[["r",e]]);return this.setMatrix(i),this},r.prototype.rotateAtStart=function(e){var n=this.attr(),i=n.x,o=n.y,a=this.getMatrix(),l=pi(a,[["t",-i,-o],["r",e],["t",i,o]]);return this.setMatrix(l),this},r.prototype.rotateAtPoint=function(e,n,i){var o=this.getMatrix(),a=pi(o,[["t",-e,-n],["r",i],["t",e,n]]);return this.setMatrix(a),this},r}(jC),ah={},Ul="_INDEX";function dv(t,r){if(t.set("canvas",r),t.isGroup()){var e=t.get("children");e.length&&e.forEach(function(n){dv(n,r)})}}function cv(t,r){if(t.set("timeline",r),t.isGroup()){var e=t.get("children");e.length&&e.forEach(function(n){cv(n,r)})}}function B1(t,r,e){r.set("parent",null),r.set("canvas",null),lv(t.getChildren(),r)}function D1(t){return function(r,e){var n=t(r,e);return n===0?r[Ul]-e[Ul]:n}}var vv=function(t){H(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.isCanvas=function(){return!1},r.prototype.getBBox=function(){var e=1/0,n=-1/0,i=1/0,o=-1/0,a=this.getChildren().filter(function(s){return s.get("visible")&&(!s.isGroup()||s.isGroup()&&s.getChildren().length>0)});a.length>0?se(a,function(s){var u=s.getBBox(),f=u.minX,h=u.maxX,d=u.minY,c=u.maxY;f<e&&(e=f),h>n&&(n=h),d<i&&(i=d),c>o&&(o=c)}):(e=0,n=0,i=0,o=0);var l={x:e,y:i,minX:e,minY:i,maxX:n,maxY:o,width:n-e,height:o-i};return l},r.prototype.getCanvasBBox=function(){var e=1/0,n=-1/0,i=1/0,o=-1/0,a=this.getChildren().filter(function(s){return s.get("visible")&&(!s.isGroup()||s.isGroup()&&s.getChildren().length>0)});a.length>0?se(a,function(s){var u=s.getCanvasBBox(),f=u.minX,h=u.maxX,d=u.minY,c=u.maxY;f<e&&(e=f),h>n&&(n=h),d<i&&(i=d),c>o&&(o=c)}):(e=0,n=0,i=0,o=0);var l={x:e,y:i,minX:e,minY:i,maxX:n,maxY:o,width:n-e,height:o-i};return l},r.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.children=[],e},r.prototype.onAttrChange=function(e,n,i){if(t.prototype.onAttrChange.call(this,e,n,i),e==="matrix"){var o=this.getTotalMatrix();this._applyChildrenMarix(o)}},r.prototype.applyMatrix=function(e){var n=this.getTotalMatrix();t.prototype.applyMatrix.call(this,e);var i=this.getTotalMatrix();i!==n&&this._applyChildrenMarix(i)},r.prototype._applyChildrenMarix=function(e){var n=this.getChildren();se(n,function(i){i.applyMatrix(e)})},r.prototype.addShape=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=e[0],o=e[1];Si(i)?o=i:o.type=i;var a=ah[o.type];a||(a=ev(o.type),ah[o.type]=a);var l=this.getShapeBase(),s=new l[a](o);return this.add(s),s},r.prototype.addGroup=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=e[0],o=e[1],a;if(pn(i))o?a=new i(o):a=new i({parent:this});else{var l=i||{},s=this.getGroupBase();a=new s(l)}return this.add(a),a},r.prototype.getCanvas=function(){var e;return this.isCanvas()?e=this:e=this.get("canvas"),e},r.prototype.getShape=function(e,n,i){if(!Yl(this))return null;var o=this.getChildren(),a;if(this.isCanvas())a=this._findShape(o,e,n,i);else{var l=[e,n,1];l=this.invertFromMatrix(l),this.isClipped(l[0],l[1])||(a=this._findShape(o,l[0],l[1],i))}return a},r.prototype._findShape=function(e,n,i,o){for(var a=null,l=e.length-1;l>=0;l--){var s=e[l];if(Yl(s)&&(s.isGroup()?a=s.getShape(n,i,o):s.isHit(n,i)&&(a=s)),a)break}return a},r.prototype.add=function(e){var n=this.getCanvas(),i=this.getChildren(),o=this.get("timeline"),a=e.getParent();a&&B1(a,e),e.set("parent",this),n&&dv(e,n),o&&cv(e,o),i.push(e),e.onCanvasChange("add"),this._applyElementMatrix(e)},r.prototype._applyElementMatrix=function(e){var n=this.getTotalMatrix();n&&e.applyMatrix(n)},r.prototype.getChildren=function(){return this.get("children")},r.prototype.sort=function(){var e=this.getChildren();se(e,function(n,i){return n[Ul]=i,n}),e.sort(D1(function(n,i){return n.get("zIndex")-i.get("zIndex")})),this.onCanvasChange("sort")},r.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var e=this.getChildren(),n=e.length-1;n>=0;n--)e[n].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},r.prototype.destroy=function(){this.get("destroyed")||(this.clear(),t.prototype.destroy.call(this))},r.prototype.getFirst=function(){return this.getChildByIndex(0)},r.prototype.getLast=function(){var e=this.getChildren();return this.getChildByIndex(e.length-1)},r.prototype.getChildByIndex=function(e){var n=this.getChildren();return n[e]},r.prototype.getCount=function(){var e=this.getChildren();return e.length},r.prototype.contain=function(e){var n=this.getChildren();return n.indexOf(e)>-1},r.prototype.removeChild=function(e,n){n===void 0&&(n=!0),this.contain(e)&&e.remove(n)},r.prototype.findAll=function(e){var n=[],i=this.getChildren();return se(i,function(o){e(o)&&n.push(o),o.isGroup()&&(n=n.concat(o.findAll(e)))}),n},r.prototype.find=function(e){var n=null,i=this.getChildren();return se(i,function(o){if(e(o)?n=o:o.isGroup()&&(n=o.find(e)),n)return!1}),n},r.prototype.findById=function(e){return this.find(function(n){return n.get("id")===e})},r.prototype.findByClassName=function(e){return this.find(function(n){return n.get("className")===e})},r.prototype.findAllByName=function(e){return this.findAll(function(n){return n.get("name")===e})},r}(hv),Un=0,wi=0,gi=0,pv=1e3,qo,mi,Ko=0,gn=0,Ea=0,Mi=typeof performance=="object"&&performance.now?performance:Date,gv=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function yv(){return gn||(gv(N1),gn=Mi.now()+Ea)}function N1(){gn=0}function Xl(){this._call=this._time=this._next=null}Xl.prototype=Js.prototype={constructor:Xl,restart:function(t,r,e){if(typeof t!="function")throw new TypeError("callback is not a function");e=(e==null?yv():+e)+(r==null?0:+r),!this._next&&mi!==this&&(mi?mi._next=this:qo=this,mi=this),this._call=t,this._time=e,Vl()},stop:function(){this._call&&(this._call=null,this._time=1/0,Vl())}};function Js(t,r,e){var n=new Xl;return n.restart(t,r,e),n}function P1(){yv(),++Un;for(var t=qo,r;t;)(r=gn-t._time)>=0&&t._call.call(null,r),t=t._next;--Un}function lh(){gn=(Ko=Mi.now())+Ea,Un=wi=0;try{P1()}finally{Un=0,H1(),gn=0}}function F1(){var t=Mi.now(),r=t-Ko;r>pv&&(Ea-=r,Ko=t)}function H1(){for(var t,r=qo,e,n=1/0;r;)r._call?(n>r._time&&(n=r._time),t=r,r=r._next):(e=r._next,r._next=null,r=t?t._next=e:qo=e);mi=t,Vl(n)}function Vl(t){if(!Un){wi&&(wi=clearTimeout(wi));var r=t-gn;r>24?(t<1/0&&(wi=setTimeout(lh,t-Mi.now()-Ea)),gi&&(gi=clearInterval(gi))):(gi||(Ko=Mi.now(),gi=setInterval(F1,pv)),Un=1,gv(lh))}}function eu(t,r,e){t.prototype=r.prototype=e,e.constructor=t}function Cv(t,r){var e=Object.create(t.prototype);for(var n in r)e[n]=r[n];return e}function to(){}var Ii=.7,Zo=1/Ii,Hn="\\s*([+-]?\\d+)\\s*",Oi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ir="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",z1=/^#([0-9a-f]{3,8})$/,W1=new RegExp(`^rgb\\(${Hn},${Hn},${Hn}\\)$`),k1=new RegExp(`^rgb\\(${ir},${ir},${ir}\\)$`),G1=new RegExp(`^rgba\\(${Hn},${Hn},${Hn},${Oi}\\)$`),$1=new RegExp(`^rgba\\(${ir},${ir},${ir},${Oi}\\)$`),Y1=new RegExp(`^hsl\\(${Oi},${ir},${ir}\\)$`),U1=new RegExp(`^hsla\\(${Oi},${ir},${ir},${Oi}\\)$`),sh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};eu(to,Bi,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:uh,formatHex:uh,formatHex8:X1,formatHsl:V1,formatRgb:fh,toString:fh});function uh(){return this.rgb().formatHex()}function X1(){return this.rgb().formatHex8()}function V1(){return wv(this).formatHsl()}function fh(){return this.rgb().formatRgb()}function Bi(t){var r,e;return t=(t+"").trim().toLowerCase(),(r=z1.exec(t))?(e=r[1].length,r=parseInt(r[1],16),e===6?hh(r):e===3?new ht(r>>8&15|r>>4&240,r>>4&15|r&240,(r&15)<<4|r&15,1):e===8?bo(r>>24&255,r>>16&255,r>>8&255,(r&255)/255):e===4?bo(r>>12&15|r>>8&240,r>>8&15|r>>4&240,r>>4&15|r&240,((r&15)<<4|r&15)/255):null):(r=W1.exec(t))?new ht(r[1],r[2],r[3],1):(r=k1.exec(t))?new ht(r[1]*255/100,r[2]*255/100,r[3]*255/100,1):(r=G1.exec(t))?bo(r[1],r[2],r[3],r[4]):(r=$1.exec(t))?bo(r[1]*255/100,r[2]*255/100,r[3]*255/100,r[4]):(r=Y1.exec(t))?vh(r[1],r[2]/100,r[3]/100,1):(r=U1.exec(t))?vh(r[1],r[2]/100,r[3]/100,r[4]):sh.hasOwnProperty(t)?hh(sh[t]):t==="transparent"?new ht(NaN,NaN,NaN,0):null}function hh(t){return new ht(t>>16&255,t>>8&255,t&255,1)}function bo(t,r,e,n){return n<=0&&(t=r=e=NaN),new ht(t,r,e,n)}function q1(t){return t instanceof to||(t=Bi(t)),t?(t=t.rgb(),new ht(t.r,t.g,t.b,t.opacity)):new ht}function ql(t,r,e,n){return arguments.length===1?q1(t):new ht(t,r,e,n??1)}function ht(t,r,e,n){this.r=+t,this.g=+r,this.b=+e,this.opacity=+n}eu(ht,ql,Cv(to,{brighter(t){return t=t==null?Zo:Math.pow(Zo,t),new ht(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Ii:Math.pow(Ii,t),new ht(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ht(fn(this.r),fn(this.g),fn(this.b),jo(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:dh,formatHex:dh,formatHex8:K1,formatRgb:ch,toString:ch}));function dh(){return`#${an(this.r)}${an(this.g)}${an(this.b)}`}function K1(){return`#${an(this.r)}${an(this.g)}${an(this.b)}${an((isNaN(this.opacity)?1:this.opacity)*255)}`}function ch(){const t=jo(this.opacity);return`${t===1?"rgb(":"rgba("}${fn(this.r)}, ${fn(this.g)}, ${fn(this.b)}${t===1?")":`, ${t})`}`}function jo(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function fn(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function an(t){return t=fn(t),(t<16?"0":"")+t.toString(16)}function vh(t,r,e,n){return n<=0?t=r=e=NaN:e<=0||e>=1?t=r=NaN:r<=0&&(t=NaN),new Wt(t,r,e,n)}function wv(t){if(t instanceof Wt)return new Wt(t.h,t.s,t.l,t.opacity);if(t instanceof to||(t=Bi(t)),!t)return new Wt;if(t instanceof Wt)return t;t=t.rgb();var r=t.r/255,e=t.g/255,n=t.b/255,i=Math.min(r,e,n),o=Math.max(r,e,n),a=NaN,l=o-i,s=(o+i)/2;return l?(r===o?a=(e-n)/l+(e<n)*6:e===o?a=(n-r)/l+2:a=(r-e)/l+4,l/=s<.5?o+i:2-o-i,a*=60):l=s>0&&s<1?0:a,new Wt(a,l,s,t.opacity)}function Z1(t,r,e,n){return arguments.length===1?wv(t):new Wt(t,r,e,n??1)}function Wt(t,r,e,n){this.h=+t,this.s=+r,this.l=+e,this.opacity=+n}eu(Wt,Z1,Cv(to,{brighter(t){return t=t==null?Zo:Math.pow(Zo,t),new Wt(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Ii:Math.pow(Ii,t),new Wt(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,r=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,n=e+(e<.5?e:1-e)*r,i=2*e-n;return new ht(wl(t>=240?t-240:t+120,i,n),wl(t,i,n),wl(t<120?t+240:t-120,i,n),this.opacity)},clamp(){return new Wt(ph(this.h),To(this.s),To(this.l),jo(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=jo(this.opacity);return`${t===1?"hsl(":"hsla("}${ph(this.h)}, ${To(this.s)*100}%, ${To(this.l)*100}%${t===1?")":`, ${t})`}`}}));function ph(t){return t=(t||0)%360,t<0?t+360:t}function To(t){return Math.max(0,Math.min(1,t||0))}function wl(t,r,e){return(t<60?r+(e-r)*t/60:t<180?e:t<240?r+(e-r)*(240-t)/60:r)*255}var tu=t=>()=>t;function j1(t,r){return function(e){return t+e*r}}function Q1(t,r,e){return t=Math.pow(t,e),r=Math.pow(r,e)-t,e=1/e,function(n){return Math.pow(t+n*r,e)}}function J1(t){return(t=+t)==1?mv:function(r,e){return e-r?Q1(r,e,t):tu(isNaN(r)?e:r)}}function mv(t,r){var e=r-t;return e?j1(t,e):tu(isNaN(t)?r:t)}var gh=function t(r){var e=J1(r);function n(i,o){var a=e((i=ql(i)).r,(o=ql(o)).r),l=e(i.g,o.g),s=e(i.b,o.b),u=mv(i.opacity,o.opacity);return function(f){return i.r=a(f),i.g=l(f),i.b=s(f),i.opacity=u(f),i+""}}return n.gamma=t,n}(1);function xv(t,r){r||(r=[]);var e=t?Math.min(r.length,t.length):0,n=r.slice(),i;return function(o){for(i=0;i<e;++i)n[i]=t[i]*(1-o)+r[i]*o;return n}}function _v(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function ew(t,r){return(_v(r)?xv:Sv)(t,r)}function Sv(t,r){var e=r?r.length:0,n=t?Math.min(e,t.length):0,i=new Array(n),o=new Array(e),a;for(a=0;a<n;++a)i[a]=Qo(t[a],r[a]);for(;a<e;++a)o[a]=r[a];return function(l){for(a=0;a<n;++a)o[a]=i[a](l);return o}}function tw(t,r){var e=new Date;return t=+t,r=+r,function(n){return e.setTime(t*(1-n)+r*n),e}}function Kl(t,r){return t=+t,r=+r,function(e){return t*(1-e)+r*e}}function rw(t,r){var e={},n={},i;(t===null||typeof t!="object")&&(t={}),(r===null||typeof r!="object")&&(r={});for(i in r)i in t?e[i]=Qo(t[i],r[i]):n[i]=r[i];return function(o){for(i in e)n[i]=e[i](o);return n}}var Zl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ml=new RegExp(Zl.source,"g");function nw(t){return function(){return t}}function iw(t){return function(r){return t(r)+""}}function ow(t,r){var e=Zl.lastIndex=ml.lastIndex=0,n,i,o,a=-1,l=[],s=[];for(t=t+"",r=r+"";(n=Zl.exec(t))&&(i=ml.exec(r));)(o=i.index)>e&&(o=r.slice(e,o),l[a]?l[a]+=o:l[++a]=o),(n=n[0])===(i=i[0])?l[a]?l[a]+=i:l[++a]=i:(l[++a]=null,s.push({i:a,x:Kl(n,i)})),e=ml.lastIndex;return e<r.length&&(o=r.slice(e),l[a]?l[a]+=o:l[++a]=o),l.length<2?s[0]?iw(s[0].x):nw(r):(r=s.length,function(u){for(var f=0,h;f<r;++f)l[(h=s[f]).i]=h.x(u);return l.join("")})}function Qo(t,r){var e=typeof r,n;return r==null||e==="boolean"?tu(r):(e==="number"?Kl:e==="string"?(n=Bi(r))?(r=n,gh):ow:r instanceof Bi?gh:r instanceof Date?tw:_v(r)?xv:Array.isArray(r)?Sv:typeof r.valueOf!="function"&&typeof r.toString!="function"||isNaN(r)?rw:Kl)(t,r)}function aw(t){return+t}function lw(t){return t*t}function sw(t){return t*(2-t)}function yh(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function bv(t){return t*t*t}function uw(t){return--t*t*t+1}function Ch(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var ru=3,fw=function t(r){r=+r;function e(n){return Math.pow(n,r)}return e.exponent=t,e}(ru),hw=function t(r){r=+r;function e(n){return 1-Math.pow(1-n,r)}return e.exponent=t,e}(ru),wh=function t(r){r=+r;function e(n){return((n*=2)<=1?Math.pow(n,r):2-Math.pow(2-n,r))/2}return e.exponent=t,e}(ru),Tv=Math.PI,Rv=Tv/2;function dw(t){return+t==1?1:1-Math.cos(t*Rv)}function cw(t){return Math.sin(t*Rv)}function mh(t){return(1-Math.cos(Tv*t))/2}function Gr(t){return(Math.pow(2,-10*t)-.0009765625)*1.0009775171065494}function vw(t){return Gr(1-+t)}function pw(t){return 1-Gr(t)}function xh(t){return((t*=2)<=1?Gr(1-t):2-Gr(t-1))/2}function gw(t){return 1-Math.sqrt(1-t*t)}function yw(t){return Math.sqrt(1- --t*t)}function _h(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var jl=4/11,Cw=6/11,ww=8/11,mw=3/4,xw=9/11,_w=10/11,Sw=15/16,bw=21/22,Tw=63/64,Ro=1/jl/jl;function Rw(t){return 1-Di(1-t)}function Di(t){return(t=+t)<jl?Ro*t*t:t<ww?Ro*(t-=Cw)*t+mw:t<_w?Ro*(t-=xw)*t+Sw:Ro*(t-=bw)*t+Tw}function Ew(t){return((t*=2)<=1?1-Di(1-t):Di(t-1)+1)/2}var nu=1.70158,Lw=function t(r){r=+r;function e(n){return(n=+n)*n*(r*(n-1)+n)}return e.overshoot=t,e}(nu),Aw=function t(r){r=+r;function e(n){return--n*n*((n+1)*r+n)+1}return e.overshoot=t,e}(nu),Sh=function t(r){r=+r;function e(n){return((n*=2)<1?n*n*((r+1)*n-r):(n-=2)*n*((r+1)*n+r)+2)/2}return e.overshoot=t,e}(nu),Xn=2*Math.PI,iu=1,ou=.3,Mw=function t(r,e){var n=Math.asin(1/(r=Math.max(1,r)))*(e/=Xn);function i(o){return r*Gr(- --o)*Math.sin((n-o)/e)}return i.amplitude=function(o){return t(o,e*Xn)},i.period=function(o){return t(r,o)},i}(iu,ou),bh=function t(r,e){var n=Math.asin(1/(r=Math.max(1,r)))*(e/=Xn);function i(o){return 1-r*Gr(o=+o)*Math.sin((o+n)/e)}return i.amplitude=function(o){return t(o,e*Xn)},i.period=function(o){return t(r,o)},i}(iu,ou),Iw=function t(r,e){var n=Math.asin(1/(r=Math.max(1,r)))*(e/=Xn);function i(o){return((o=o*2-1)<0?r*Gr(-o)*Math.sin((n-o)/e):2-r*Gr(o)*Math.sin((n+o)/e))/2}return i.amplitude=function(o){return t(o,e*Xn)},i.period=function(o){return t(r,o)},i}(iu,ou),Ow=Object.freeze({__proto__:null,easeLinear:aw,easeQuad:yh,easeQuadIn:lw,easeQuadOut:sw,easeQuadInOut:yh,easeCubic:Ch,easeCubicIn:bv,easeCubicOut:uw,easeCubicInOut:Ch,easePoly:wh,easePolyIn:fw,easePolyOut:hw,easePolyInOut:wh,easeSin:mh,easeSinIn:dw,easeSinOut:cw,easeSinInOut:mh,easeExp:xh,easeExpIn:vw,easeExpOut:pw,easeExpInOut:xh,easeCircle:_h,easeCircleIn:gw,easeCircleOut:yw,easeCircleInOut:_h,easeBounce:Di,easeBounceIn:Rw,easeBounceOut:Di,easeBounceInOut:Ew,easeBack:Sh,easeBackIn:Lw,easeBackOut:Aw,easeBackInOut:Sh,easeElastic:bh,easeElasticIn:Mw,easeElasticOut:bh,easeElasticInOut:Iw}),Bw={};function Dw(t){return Bw[t.toLowerCase()]||Ow[t]}var Nw=function(t){return["fill","stroke","fillStyle","strokeStyle"].includes(t)},Pw=function(t){return/^[r,R,L,l]{1}[\s]*\(/.test(t)},Th=[1,0,0,0,1,0,0,0,1];function Fw(t,r,e){var n={},i=r.fromAttrs,o=r.toAttrs;if(!t.destroyed){var a;for(var l in o)if(!Xo(i[l],o[l]))if(l==="path"){var s=o[l],u=i[l];s.length>u.length?(s=Dn(o[l]),u=Dn(i[l]),u=ov(u,s),u=$l(u,s),r.fromAttrs.path=u,r.toAttrs.path=s):r.pathFormatted||(s=Dn(o[l]),u=Dn(i[l]),u=$l(u,s),r.fromAttrs.path=u,r.toAttrs.path=s,r.pathFormatted=!0),n[l]=[];for(var f=0;f<s.length;f++){for(var h=s[f],d=u[f],c=[],v=0;v<h.length;v++)Hl(h[v])&&d&&Hl(d[v])?(a=Qo(d[v],h[v]),c.push(a(e))):c.push(h[v]);n[l].push(c)}}else if(l==="matrix"){var p=ew(i[l]||Th,o[l]||Th),g=p(e);n[l]=g}else Nw(l)&&Pw(o[l])?n[l]=o[l]:pn(o[l])||(a=Qo(i[l],o[l]),n[l]=a(e));t.attr(n)}}function Hw(t,r,e){var n=r.startTime,i=r.delay;if(e<n+i||r._paused)return!1;var o,a=r.duration,l=r.easing,s=Dw(l);if(e=e-n-r.delay,r.repeat)o=e%a/a,o=s(o);else if(o=e/a,o<1)o=s(o);else return r.onFrame?t.attr(r.onFrame(1)):t.attr(r.toAttrs),!0;if(r.onFrame){var u=r.onFrame(o);t.attr(u)}else Fw(t,r,o);return!1}var zw=function(){function t(r){this.animators=[],this.current=0,this.timer=null,this.canvas=r}return t.prototype.initTimer=function(){var r=this,e=!1,n,i,o;this.timer=Js(function(a){if(r.current=a,r.animators.length>0){for(var l=r.animators.length-1;l>=0;l--){if(n=r.animators[l],n.destroyed){r.removeAnimator(l);continue}if(!n.isAnimatePaused()){i=n.get("animations");for(var s=i.length-1;s>=0;s--)o=i[s],e=Hw(n,o,a),e&&(i.splice(s,1),e=!1,o.callback&&o.callback())}i.length===0&&r.removeAnimator(l)}var u=r.canvas.get("autoDraw");u||r.canvas.draw()}})},t.prototype.addAnimator=function(r){this.animators.push(r)},t.prototype.removeAnimator=function(r){this.animators.splice(r,1)},t.prototype.isAnimating=function(){return!!this.animators.length},t.prototype.stop=function(){this.timer&&this.timer.stop()},t.prototype.stopAllAnimations=function(r){r===void 0&&(r=!0),this.animators.forEach(function(e){e.stopAnimate(r)}),this.animators=[],this.canvas.draw()},t.prototype.getTime=function(){return this.current},t}(),Ww=40,Rh=0,Eh=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function Lh(t,r,e){e.name=r,e.target=t,e.currentTarget=t,e.delegateTarget=t,t.emit(r,e)}function kw(t,r,e){if(e.bubbles){var n=void 0,i=!1;if(r==="mouseenter"?(n=e.fromShape,i=!0):r==="mouseleave"&&(i=!0,n=e.toShape),t.isCanvas()&&i)return;if(n&&sv(t,n)){e.bubbles=!1;return}e.name=r,e.currentTarget=t,e.delegateTarget=t,t.emit(r,e)}}var Gw=function(){function t(r){var e=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(n){var i=n.type;e._triggerEvent(i,n)},this._onDocumentMove=function(n){var i=e.canvas,o=i.get("el");if(o!==n.target&&(e.dragging||e.currentShape)){var a=e._getPointInfo(n);e.dragging&&e._emitEvent("drag",n,a,e.draggingShape)}},this._onDocumentMouseUp=function(n){var i=e.canvas,o=i.get("el");if(o!==n.target&&e.dragging){var a=e._getPointInfo(n);e.draggingShape&&e._emitEvent("drop",n,a,null),e._emitEvent("dragend",n,a,e.draggingShape),e._afterDrag(e.draggingShape,a,n)}},this.canvas=r.canvas}return t.prototype.init=function(){this._bindEvents()},t.prototype._bindEvents=function(){var r=this,e=this.canvas.get("el");se(Eh,function(n){e.addEventListener(n,r._eventCallback)}),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},t.prototype._clearEvents=function(){var r=this,e=this.canvas.get("el");se(Eh,function(n){e.removeEventListener(n,r._eventCallback)}),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},t.prototype._getEventObj=function(r,e,n,i,o,a){var l=new KC(r,e);return l.fromShape=o,l.toShape=a,l.x=n.x,l.y=n.y,l.clientX=n.clientX,l.clientY=n.clientY,l.propagationPath.push(i),l},t.prototype._getShape=function(r,e){return this.canvas.getShape(r.x,r.y,e)},t.prototype._getPointInfo=function(r){var e=this.canvas,n=e.getClientByEvent(r),i=e.getPointByEvent(r);return{x:i.x,y:i.y,clientX:n.x,clientY:n.y}},t.prototype._triggerEvent=function(r,e){var n=this._getPointInfo(e),i=this._getShape(n,e),o=this["_on"+r],a=!1;if(o)o.call(this,n,i,e);else{var l=this.currentShape;r==="mouseenter"||r==="dragenter"||r==="mouseover"?(this._emitEvent(r,e,n,null,null,i),i&&this._emitEvent(r,e,n,i,null,i),r==="mouseenter"&&this.draggingShape&&this._emitEvent("dragenter",e,n,null)):r==="mouseleave"||r==="dragleave"||r==="mouseout"?(a=!0,l&&this._emitEvent(r,e,n,l,l,null),this._emitEvent(r,e,n,null,l,null),r==="mouseleave"&&this.draggingShape&&this._emitEvent("dragleave",e,n,null)):this._emitEvent(r,e,n,i,null,null)}if(a||(this.currentShape=i),i&&!i.get("destroyed")){var s=this.canvas,u=s.get("el");u.style.cursor=i.attr("cursor")||s.get("cursor")}},t.prototype._onmousedown=function(r,e,n){n.button===Rh&&(this.mousedownShape=e,this.mousedownPoint=r,this.mousedownTimeStamp=n.timeStamp),this._emitEvent("mousedown",n,r,e,null,null)},t.prototype._emitMouseoverEvents=function(r,e,n,i){var o=this.canvas.get("el");n!==i&&(n&&(this._emitEvent("mouseout",r,e,n,n,i),this._emitEvent("mouseleave",r,e,n,n,i),(!i||i.get("destroyed"))&&(o.style.cursor=this.canvas.get("cursor"))),i&&(this._emitEvent("mouseover",r,e,i,n,i),this._emitEvent("mouseenter",r,e,i,n,i)))},t.prototype._emitDragoverEvents=function(r,e,n,i,o){i?(i!==n&&(n&&this._emitEvent("dragleave",r,e,n,n,i),this._emitEvent("dragenter",r,e,i,n,i)),o||this._emitEvent("dragover",r,e,i)):n&&this._emitEvent("dragleave",r,e,n,n,i),o&&this._emitEvent("dragover",r,e,i)},t.prototype._afterDrag=function(r,e,n){r&&(r.set("capture",!0),this.draggingShape=null),this.dragging=!1;var i=this._getShape(e,n);i!==r&&this._emitMouseoverEvents(n,e,r,i),this.currentShape=i},t.prototype._onmouseup=function(r,e,n){if(n.button===Rh){var i=this.draggingShape;this.dragging?(i&&this._emitEvent("drop",n,r,e),this._emitEvent("dragend",n,r,i),this._afterDrag(i,r,n)):(this._emitEvent("mouseup",n,r,e),e===this.mousedownShape&&this._emitEvent("click",n,r,e),this.mousedownShape=null,this.mousedownPoint=null)}},t.prototype._ondragover=function(r,e,n){n.preventDefault();var i=this.currentShape;this._emitDragoverEvents(n,r,i,e,!0)},t.prototype._onmousemove=function(r,e,n){var i=this.canvas,o=this.currentShape,a=this.draggingShape;if(this.dragging)a&&this._emitDragoverEvents(n,r,o,e,!1),this._emitEvent("drag",n,r,a);else{var l=this.mousedownPoint;if(l){var s=this.mousedownShape,u=n.timeStamp,f=u-this.mousedownTimeStamp,h=l.clientX-r.clientX,d=l.clientY-r.clientY,c=h*h+d*d;f>120||c>Ww?s&&s.get("draggable")?(a=this.mousedownShape,a.set("capture",!1),this.draggingShape=a,this.dragging=!0,this._emitEvent("dragstart",n,r,a),this.mousedownShape=null,this.mousedownPoint=null):!s&&i.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",n,r,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(n,r,o,e),this._emitEvent("mousemove",n,r,e)):(this._emitMouseoverEvents(n,r,o,e),this._emitEvent("mousemove",n,r,e))}else this._emitMouseoverEvents(n,r,o,e),this._emitEvent("mousemove",n,r,e)}},t.prototype._emitEvent=function(r,e,n,i,o,a){var l=this._getEventObj(r,e,n,i,o,a);if(i){l.shape=i,Lh(i,r,l);for(var s=i.getParent();s;)s.emitDelegation(r,l),l.propagationStopped||kw(s,r,l),l.propagationPath.push(s),s=s.getParent()}else{var u=this.canvas;Lh(u,r,l)}},t.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},t}(),Ah="px",Mh=a1(),$w=Mh&&Mh.name==="firefox",Yw=function(t){H(r,t);function r(e){var n=t.call(this,e)||this;return n.initContainer(),n.initDom(),n.initEvents(),n.initTimeline(),n}return r.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.cursor="default",e.supportCSSTransform=!1,e},r.prototype.initContainer=function(){var e=this.get("container");Vt(e)&&(e=document.getElementById(e),this.set("container",e))},r.prototype.initDom=function(){var e=this.createDom();this.set("el",e);var n=this.get("container");n.appendChild(e),this.setDOMSize(this.get("width"),this.get("height"))},r.prototype.initEvents=function(){var e=new Gw({canvas:this});e.init(),this.set("eventController",e)},r.prototype.initTimeline=function(){var e=new zw(this);this.set("timeline",e)},r.prototype.setDOMSize=function(e,n){var i=this.get("el");th&&(i.style.width=e+Ah,i.style.height=n+Ah)},r.prototype.changeSize=function(e,n){this.setDOMSize(e,n),this.set("width",e),this.set("height",n),this.onCanvasChange("changeSize")},r.prototype.getRenderer=function(){return this.get("renderer")},r.prototype.getCursor=function(){return this.get("cursor")},r.prototype.setCursor=function(e){this.set("cursor",e);var n=this.get("el");th&&n&&(n.style.cursor=e)},r.prototype.getPointByEvent=function(e){var n=this.get("supportCSSTransform");if(n){if($w&&!Pe(e.layerX)&&e.layerX!==e.offsetX)return{x:e.layerX,y:e.layerY};if(!Pe(e.offsetX))return{x:e.offsetX,y:e.offsetY}}var i=this.getClientByEvent(e),o=i.x,a=i.y;return this.getPointByClient(o,a)},r.prototype.getClientByEvent=function(e){var n=e;return e.touches&&(e.type==="touchend"?n=e.changedTouches[0]:n=e.touches[0]),{x:n.clientX,y:n.clientY}},r.prototype.getPointByClient=function(e,n){var i=this.get("el"),o=i.getBoundingClientRect();return{x:e-o.left,y:n-o.top}},r.prototype.getClientByPoint=function(e,n){var i=this.get("el"),o=i.getBoundingClientRect();return{x:e+o.left,y:n+o.top}},r.prototype.draw=function(){},r.prototype.removeDom=function(){var e=this.get("el");e.parentNode.removeChild(e)},r.prototype.clearEvents=function(){var e=this.get("eventController");e.destroy()},r.prototype.isCanvas=function(){return!0},r.prototype.getParent=function(){return null},r.prototype.destroy=function(){var e=this.get("timeline");this.get("destroyed")||(this.clear(),e&&e.stop(),this.clearEvents(),this.removeDom(),t.prototype.destroy.call(this))},r}(vv),Uw=function(t){H(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.isGroup=function(){return!0},r.prototype.isEntityGroup=function(){return!1},r.prototype.clone=function(){for(var e=t.prototype.clone.call(this),n=this.getChildren(),i=0;i<n.length;i++){var o=n[i];e.add(o.clone())}return e},r}(vv),Xw=function(t){H(r,t);function r(e){return t.call(this,e)||this}return r.prototype._isInBBox=function(e,n){var i=this.getBBox();return i.minX<=e&&i.maxX>=e&&i.minY<=n&&i.maxY>=n},r.prototype.afterAttrsChange=function(e){t.prototype.afterAttrsChange.call(this,e),this.clearCacheBBox()},r.prototype.getBBox=function(){var e=this.cfg.bbox;return e||(e=this.calculateBBox(),this.set("bbox",e)),e},r.prototype.getCanvasBBox=function(){var e=this.cfg.canvasBBox;return e||(e=this.calculateCanvasBBox(),this.set("canvasBBox",e)),e},r.prototype.applyMatrix=function(e){t.prototype.applyMatrix.call(this,e),this.set("canvasBBox",null)},r.prototype.calculateCanvasBBox=function(){var e=this.getBBox(),n=this.getTotalMatrix(),i=e.minX,o=e.minY,a=e.maxX,l=e.maxY;if(n){var s=on(n,[e.minX,e.minY]),u=on(n,[e.maxX,e.minY]),f=on(n,[e.minX,e.maxY]),h=on(n,[e.maxX,e.maxY]);i=Math.min(s[0],u[0],f[0],h[0]),a=Math.max(s[0],u[0],f[0],h[0]),o=Math.min(s[1],u[1],f[1],h[1]),l=Math.max(s[1],u[1],f[1],h[1])}var d=this.attrs;if(d.shadowColor){var c=d.shadowBlur,v=c===void 0?0:c,p=d.shadowOffsetX,g=p===void 0?0:p,y=d.shadowOffsetY,C=y===void 0?0:y,w=i-v+g,m=a+v+g,_=o-v+C,b=l+v+C;i=Math.min(i,w),a=Math.max(a,m),o=Math.min(o,_),l=Math.max(l,b)}return{x:i,y:o,minX:i,minY:o,maxX:a,maxY:l,width:a-i,height:l-o}},r.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},r.prototype.isClipShape=function(){return this.get("isClipShape")},r.prototype.isInShape=function(e,n){return!1},r.prototype.isOnlyHitBox=function(){return!1},r.prototype.isHit=function(e,n){var i=this.get("startArrowShape"),o=this.get("endArrowShape"),a=[e,n,1];a=this.invertFromMatrix(a);var l=a[0],s=a[1],u=this._isInBBox(l,s);return this.isOnlyHitBox()?u:!!(u&&!this.isClipped(l,s)&&(this.isInShape(l,s)||i&&i.isHit(l,s)||o&&o.isHit(l,s)))},r}(hv),Ev=new Map;function fr(t,r){Ev.set(t,r)}function Vw(t){return Ev.get(t)}function Lv(t){var r=t.attr(),e=r.x,n=r.y,i=r.width,o=r.height;return{x:e,y:n,width:i,height:o}}function Av(t){var r=t.attr(),e=r.x,n=r.y,i=r.r;return{x:e-i,y:n-i,width:i*2,height:i*2}}function je(t,r,e,n){var i=t-e,o=r-n;return Math.sqrt(i*i+o*o)}function Ho(t,r){return Math.abs(t-r)<.001}function ri(t,r){var e=kr(t),n=kr(r),i=Wr(t),o=Wr(r);return{x:e,y:n,width:i-e,height:o-n}}function La(t){return(t+Math.PI*2)%(Math.PI*2)}var ft={box:function(t,r,e,n){return ri([t,e],[r,n])},length:function(t,r,e,n){return je(t,r,e,n)},pointAt:function(t,r,e,n,i){return{x:(1-i)*t+i*e,y:(1-i)*r+i*n}},pointDistance:function(t,r,e,n,i,o){var a=(e-t)*(i-t)+(n-r)*(o-r);if(a<0)return je(t,r,i,o);var l=(e-t)*(e-t)+(n-r)*(n-r);return a>l?je(e,n,i,o):this.pointToLine(t,r,e,n,i,o)},pointToLine:function(t,r,e,n,i,o){var a=[e-t,n-r];if(m1(a,[0,0]))return Math.sqrt((i-t)*(i-t)+(o-r)*(o-r));var l=[-a[1],a[0]];C1(l,l);var s=[i-t,o-r];return Math.abs(w1(s,l))},tangentAngle:function(t,r,e,n){return Math.atan2(n-r,e-t)}},qw=1e-4;function Mv(t,r,e,n,i,o){var a,l=1/0,s=[e,n],u=20;o&&o>200&&(u=o/10);for(var f=1/u,h=f/10,d=0;d<=u;d++){var c=d*f,v=[i.apply(null,t.concat([c])),i.apply(null,r.concat([c]))],p=je(s[0],s[1],v[0],v[1]);p<l&&(a=c,l=p)}if(a===0)return{x:t[0],y:r[0]};if(a===1){var g=t.length;return{x:t[g-1],y:r[g-1]}}l=1/0;for(var d=0;d<32&&!(h<qw);d++){var y=a-h,C=a+h,v=[i.apply(null,t.concat([y])),i.apply(null,r.concat([y]))],p=je(s[0],s[1],v[0],v[1]);if(y>=0&&p<l)a=y,l=p;else{var w=[i.apply(null,t.concat([C])),i.apply(null,r.concat([C]))],m=je(s[0],s[1],w[0],w[1]);C<=1&&m<l?(a=C,l=m):h*=.5}}return{x:i.apply(null,t.concat([a])),y:i.apply(null,r.concat([a]))}}function Kw(t,r){for(var e=0,n=t.length,i=0;i<n;i++){var o=t[i],a=r[i],l=t[(i+1)%n],s=r[(i+1)%n];e+=je(o,a,l,s)}return e/2}function Br(t,r,e,n){var i=1-n;return i*i*t+2*n*i*r+n*n*e}function Ih(t,r,e){var n=t+e-2*r;if(Ho(n,0))return[.5];var i=(t-r)/n;return i<=1&&i>=0?[i]:[]}function Oh(t,r,e,n){return 2*(1-n)*(r-t)+2*n*(e-r)}function Iv(t,r,e,n,i,o,a){var l=Br(t,e,i,a),s=Br(r,n,o,a),u=ft.pointAt(t,r,e,n,a),f=ft.pointAt(e,n,i,o,a);return[[t,r,u.x,u.y,l,s],[l,s,f.x,f.y,i,o]]}function Ql(t,r,e,n,i,o,a){if(a===0)return(je(t,r,e,n)+je(e,n,i,o)+je(t,r,i,o))/2;var l=Iv(t,r,e,n,i,o,.5),s=l[0],u=l[1];return s.push(a-1),u.push(a-1),Ql.apply(null,s)+Ql.apply(null,u)}var Ov={box:function(t,r,e,n,i,o){var a=Ih(t,e,i)[0],l=Ih(r,n,o)[0],s=[t,i],u=[r,o];return a!==void 0&&s.push(Br(t,e,i,a)),l!==void 0&&u.push(Br(r,n,o,l)),ri(s,u)},length:function(t,r,e,n,i,o){return Ql(t,r,e,n,i,o,3)},nearestPoint:function(t,r,e,n,i,o,a,l){return Mv([t,e,i],[r,n,o],a,l,Br)},pointDistance:function(t,r,e,n,i,o,a,l){var s=this.nearestPoint(t,r,e,n,i,o,a,l);return je(s.x,s.y,a,l)},interpolationAt:Br,pointAt:function(t,r,e,n,i,o,a){return{x:Br(t,e,i,a),y:Br(r,n,o,a)}},divide:function(t,r,e,n,i,o,a){return Iv(t,r,e,n,i,o,a)},tangentAngle:function(t,r,e,n,i,o,a){var l=Oh(t,e,i,a),s=Oh(r,n,o,a),u=Math.atan2(s,l);return La(u)}};function Dr(t,r,e,n,i){var o=1-i;return o*o*o*t+3*r*i*o*o+3*e*i*i*o+n*i*i*i}function Bh(t,r,e,n,i){var o=1-i;return 3*(o*o*(r-t)+2*o*i*(e-r)+i*i*(n-e))}function xl(t,r,e,n){var i=-3*t+9*r-9*e+3*n,o=6*t-12*r+6*e,a=3*r-3*t,l=[],s,u,f;if(Ho(i,0))Ho(o,0)||(s=-a/o,s>=0&&s<=1&&l.push(s));else{var h=o*o-4*i*a;Ho(h,0)?l.push(-o/(2*i)):h>0&&(f=Math.sqrt(h),s=(-o+f)/(2*i),u=(-o-f)/(2*i),s>=0&&s<=1&&l.push(s),u>=0&&u<=1&&l.push(u))}return l}function Bv(t,r,e,n,i,o,a,l,s){var u=Dr(t,e,i,a,s),f=Dr(r,n,o,l,s),h=ft.pointAt(t,r,e,n,s),d=ft.pointAt(e,n,i,o,s),c=ft.pointAt(i,o,a,l,s),v=ft.pointAt(h.x,h.y,d.x,d.y,s),p=ft.pointAt(d.x,d.y,c.x,c.y,s);return[[t,r,h.x,h.y,v.x,v.y,u,f],[u,f,p.x,p.y,c.x,c.y,a,l]]}function Jl(t,r,e,n,i,o,a,l,s){if(s===0)return Kw([t,e,i,a],[r,n,o,l]);var u=Bv(t,r,e,n,i,o,a,l,.5),f=u[0],h=u[1];return f.push(s-1),h.push(s-1),Jl.apply(null,f)+Jl.apply(null,h)}var Ti={extrema:xl,box:function(t,r,e,n,i,o,a,l){for(var s=[t,a],u=[r,l],f=xl(t,e,i,a),h=xl(r,n,o,l),d=0;d<f.length;d++)s.push(Dr(t,e,i,a,f[d]));for(var d=0;d<h.length;d++)u.push(Dr(r,n,o,l,h[d]));return ri(s,u)},length:function(t,r,e,n,i,o,a,l){return Jl(t,r,e,n,i,o,a,l,3)},nearestPoint:function(t,r,e,n,i,o,a,l,s,u,f){return Mv([t,e,i,a],[r,n,o,l],s,u,Dr,f)},pointDistance:function(t,r,e,n,i,o,a,l,s,u,f){var h=this.nearestPoint(t,r,e,n,i,o,a,l,s,u,f);return je(h.x,h.y,s,u)},interpolationAt:Dr,pointAt:function(t,r,e,n,i,o,a,l,s){return{x:Dr(t,e,i,a,s),y:Dr(r,n,o,l,s)}},divide:function(t,r,e,n,i,o,a,l,s){return Bv(t,r,e,n,i,o,a,l,s)},tangentAngle:function(t,r,e,n,i,o,a,l,s){var u=Bh(t,e,i,a,s),f=Bh(r,n,o,l,s);return La(Math.atan2(f,u))}};function Dh(t,r){var e=Math.abs(t);return r>0?e:e*-1}var Zw={box:function(t,r,e,n){return{x:t-e,y:r-n,width:e*2,height:n*2}},length:function(t,r,e,n){return Math.PI*(3*(e+n)-Math.sqrt((3*e+n)*(e+3*n)))},nearestPoint:function(t,r,e,n,i,o){var a=e,l=n;if(a===0||l===0)return{x:t,y:r};for(var s=i-t,u=o-r,f=Math.abs(s),h=Math.abs(u),d=a*a,c=l*l,v=Math.PI/4,p,g,y=0;y<4;y++){p=a*Math.cos(v),g=l*Math.sin(v);var C=(d-c)*Math.pow(Math.cos(v),3)/a,w=(c-d)*Math.pow(Math.sin(v),3)/l,m=p-C,_=g-w,b=f-C,T=h-w,E=Math.hypot(_,m),L=Math.hypot(T,b),F=E*Math.asin((m*T-_*b)/(E*L)),I=F/Math.sqrt(d+c-p*p-g*g);v+=I,v=Math.min(Math.PI/2,Math.max(0,v))}return{x:t+Dh(p,s),y:r+Dh(g,u)}},pointDistance:function(t,r,e,n,i,o){var a=this.nearestPoint(t,r,e,n,i,o);return je(a.x,a.y,i,o)},pointAt:function(t,r,e,n,i){var o=2*Math.PI*i;return{x:t+e*Math.cos(o),y:r+n*Math.sin(o)}},tangentAngle:function(t,r,e,n,i){var o=2*Math.PI*i,a=Math.atan2(n*Math.cos(o),-e*Math.sin(o));return La(a)}};function jw(t,r,e,n,i,o,a,l){return-1*e*Math.cos(i)*Math.sin(l)-n*Math.sin(i)*Math.cos(l)}function Qw(t,r,e,n,i,o,a,l){return-1*e*Math.sin(i)*Math.sin(l)+n*Math.cos(i)*Math.cos(l)}function Jw(t,r,e){return Math.atan(-r/t*Math.tan(e))}function em(t,r,e){return Math.atan(r/(t*Math.tan(e)))}function Nh(t,r,e,n,i,o){return e*Math.cos(i)*Math.cos(o)-n*Math.sin(i)*Math.sin(o)+t}function Ph(t,r,e,n,i,o){return e*Math.sin(i)*Math.cos(o)+n*Math.cos(i)*Math.sin(o)+r}function tm(t,r,e,n){var i=Math.atan2(n*t,e*r);return(i+Math.PI*2)%(Math.PI*2)}function Fh(t,r,e){return{x:t*Math.cos(e),y:r*Math.sin(e)}}function Hh(t,r,e){var n=Math.cos(e),i=Math.sin(e);return[t*n-r*i,t*i+r*n]}var rm={box:function(t,r,e,n,i,o,a){for(var l=Jw(e,n,i),s=1/0,u=-1/0,f=[o,a],h=-Math.PI*2;h<=Math.PI*2;h+=Math.PI){var d=l+h;o<a?o<d&&d<a&&f.push(d):a<d&&d<o&&f.push(d)}for(var h=0;h<f.length;h++){var c=Nh(t,r,e,n,i,f[h]);c<s&&(s=c),c>u&&(u=c)}for(var v=em(e,n,i),p=1/0,g=-1/0,y=[o,a],h=-Math.PI*2;h<=Math.PI*2;h+=Math.PI){var C=v+h;o<a?o<C&&C<a&&y.push(C):a<C&&C<o&&y.push(C)}for(var h=0;h<y.length;h++){var w=Ph(t,r,e,n,i,y[h]);w<p&&(p=w),w>g&&(g=w)}return{x:s,y:p,width:u-s,height:g-p}},length:function(t,r,e,n,i,o,a){},nearestPoint:function(t,r,e,n,i,o,a,l,s){var u=Hh(l-t,s-r,-i),f=u[0],h=u[1],d=Zw.nearestPoint(0,0,e,n,f,h),c=tm(e,n,d.x,d.y);c<o?d=Fh(e,n,o):c>a&&(d=Fh(e,n,a));var v=Hh(d.x,d.y,i);return{x:v[0]+t,y:v[1]+r}},pointDistance:function(t,r,e,n,i,o,a,l,s){var u=this.nearestPoint(t,r,e,n,l,s);return je(u.x,u.y,l,s)},pointAt:function(t,r,e,n,i,o,a,l){var s=(a-o)*l+o;return{x:Nh(t,r,e,n,i,s),y:Ph(t,r,e,n,i,s)}},tangentAngle:function(t,r,e,n,i,o,a,l){var s=(a-o)*l+o,u=jw(t,r,e,n,i,o,a,s),f=Qw(t,r,e,n,i,o,a,s);return La(Math.atan2(f,u))}};function Dv(t){for(var r=0,e=[],n=0;n<t.length-1;n++){var i=t[n],o=t[n+1],a=je(i[0],i[1],o[0],o[1]),l={from:i,to:o,length:a};e.push(l),r+=a}return{segments:e,totalLength:r}}function nm(t){if(t.length<2)return 0;for(var r=0,e=0;e<t.length-1;e++){var n=t[e],i=t[e+1];r+=je(n[0],n[1],i[0],i[1])}return r}function im(t,r){if(r>1||r<0||t.length<2)return null;var e=Dv(t),n=e.segments,i=e.totalLength;if(i===0)return{x:t[0][0],y:t[0][1]};for(var o=0,a=null,l=0;l<n.length;l++){var s=n[l],u=s.from,f=s.to,h=s.length/i;if(r>=o&&r<=o+h){var d=(r-o)/h;a=ft.pointAt(u[0],u[1],f[0],f[1],d);break}o+=h}return a}function om(t,r){if(r>1||r<0||t.length<2)return 0;for(var e=Dv(t),n=e.segments,i=e.totalLength,o=0,a=0,l=0;l<n.length;l++){var s=n[l],u=s.from,f=s.to,h=s.length/i;if(r>=o&&r<=o+h){a=Math.atan2(f[1]-u[1],f[0]-u[0]);break}o+=h}return a}function am(t,r,e){for(var n=1/0,i=0;i<t.length-1;i++){var o=t[i],a=t[i+1],l=ft.pointDistance(o[0],o[1],a[0],a[1],r,e);l<n&&(n=l)}return n}var lm={box:function(t){for(var r=[],e=[],n=0;n<t.length;n++){var i=t[n];r.push(i[0]),e.push(i[1])}return ri(r,e)},length:function(t){return nm(t)},pointAt:function(t,r){return im(t,r)},pointDistance:function(t,r,e){return am(t,r,e)},tangentAngle:function(t,r){return om(t,r)}};function zh(t,r){return!t||!r?t||r:{minX:Math.min(t.minX,r.minX),minY:Math.min(t.minY,r.minY),maxX:Math.max(t.maxX,r.maxX),maxY:Math.max(t.maxY,r.maxY)}}function au(t,r){var e=t.get("startArrowShape"),n=t.get("endArrowShape"),i=null,o=null;return e&&(i=e.getCanvasBBox(),r=zh(r,i)),n&&(o=n.getCanvasBBox(),r=zh(r,o)),r}function sm(t){for(var r=t.attr(),e=r.points,n=[],i=[],o=0;o<e.length;o++){var a=e[o];n.push(a[0]),i.push(a[1])}var l=ri(n,i),s=l.x,u=l.y,f=l.width,h=l.height,d={minX:s,minY:u,maxX:s+f,maxY:u+h};return d=au(t,d),{x:d.minX,y:d.minY,width:d.maxX-d.minX,height:d.maxY-d.minY}}function um(t){for(var r=t.attr(),e=r.points,n=[],i=[],o=0;o<e.length;o++){var a=e[o];n.push(a[0]),i.push(a[1])}return ri(n,i)}var _l=null;function Nv(){if(!_l){var t=document.createElement("canvas");t.width=1,t.height=1,_l=t.getContext("2d")}return _l}function Pv(t,r,e){var n=1;if(Vt(t)&&(n=t.split(`
`).length),n>1){var i=fm(r,e);return r*n+i*(n-1)}return r}function fm(t,r){return r?r-t:t*.14}function hm(t,r){var e=Nv(),n=0;if(Pe(t)||t==="")return n;if(e.save(),e.font=r,Vt(t)&&t.includes(`
`)){var i=t.split(`
`);se(i,function(o){var a=e.measureText(o).width;n<a&&(n=a)})}else n=e.measureText(t).width;return e.restore(),n}function Fv(t){var r=t.fontSize,e=t.fontFamily,n=t.fontWeight,i=t.fontStyle,o=t.fontVariant;return[i,o,n,r+"px",e].join(" ").trim()}function dm(t){var r=t.attr(),e=r.x,n=r.y,i=r.text,o=r.fontSize,a=r.lineHeight,l=r.font;l||(l=Fv(r));var s=hm(i,l),u;if(!s)u={x:e,y:n,width:0,height:0};else{var f=r.textAlign,h=r.textBaseline,d=Pv(i,o,a),c={x:e,y:n-d};f&&(f==="end"||f==="right"?c.x-=s:f==="center"&&(c.x-=s/2)),h&&(h==="top"?c.y+=d:h==="middle"&&(c.y+=d/2)),u={x:c.x,y:c.y,width:s,height:d}}return u}var cm=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,vm=/[^\s\,]+/ig;function pm(t){var r=t||[];if(Bt(r))return r;if(Vt(r))return r=r.match(cm),se(r,function(e,n){if(e=e.match(vm),e[0].length>1){var i=e[0].charAt(0);e.splice(1,0,e[0].substr(1)),e[0]=i}se(e,function(o,a){isNaN(o)||(e[a]=+o)}),r[n]=e}),r}var Ri=`	
\v\f\r   ᠎             　\u2028\u2029`,gm=new RegExp("([a-z])["+Ri+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+Ri+"]*,?["+Ri+"]*)+)","ig"),ym=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+Ri+"]*,?["+Ri+"]*","ig");function Cm(t){if(!t)return null;if(Bt(t))return t;var r={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},e=[];return String(t).replace(gm,function(n,i,o){var a=[],l=i.toLowerCase();if(o.replace(ym,function(s,u){u&&a.push(+u)}),l==="m"&&a.length>2&&(e.push([i].concat(a.splice(0,2))),l="l",i=i==="m"?"l":"L"),l==="o"&&a.length===1&&e.push([i,a[0]]),l==="r")e.push([i].concat(a));else for(;a.length>=r[l]&&(e.push([i].concat(a.splice(0,r[l]))),!!r[l]););return""}),e}var wm=/[a-z]/;function Wh(t,r){return[r[0]+(r[0]-t[0]),r[1]+(r[1]-t[1])]}function Hv(t){var r=Cm(t);if(!r||!r.length)return[["M",0,0]];for(var e=!1,n=0;n<r.length;n++){var i=r[n][0];if(wm.test(i)||["V","H","T","S"].indexOf(i)>=0){e=!0;break}}if(!e)return r;var o=[],a=0,l=0,s=0,u=0,f=0,h=r[0];(h[0]==="M"||h[0]==="m")&&(a=+h[1],l=+h[2],s=a,u=l,f++,o[0]=["M",a,l]);for(var n=f,d=r.length;n<d;n++){var c=r[n],v=o[n-1],p=[],i=c[0],g=i.toUpperCase();if(i!==g)switch(p[0]=g,g){case"A":p[1]=c[1],p[2]=c[2],p[3]=c[3],p[4]=c[4],p[5]=c[5],p[6]=+c[6]+a,p[7]=+c[7]+l;break;case"V":p[1]=+c[1]+l;break;case"H":p[1]=+c[1]+a;break;case"M":s=+c[1]+a,u=+c[2]+l,p[1]=s,p[2]=u;break;default:for(var y=1,C=c.length;y<C;y++)p[y]=+c[y]+(y%2?a:l)}else p=r[n];switch(g){case"Z":a=+s,l=+u;break;case"H":a=p[1],p=["L",a,l];break;case"V":l=p[1],p=["L",a,l];break;case"T":a=p[1],l=p[2];var w=Wh([v[1],v[2]],[v[3],v[4]]);p=["Q",w[0],w[1],a,l];break;case"S":a=p[p.length-2],l=p[p.length-1];var m=v.length,_=Wh([v[m-4],v[m-3]],[v[m-2],v[m-1]]);p=["C",_[0],_[1],p[1],p[2],a,l];break;case"M":s=p[p.length-2],u=p[p.length-1];break;default:a=p[p.length-2],l=p[p.length-1]}o.push(p)}return o}function Eo(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function es(t,r){return Eo(t)*Eo(r)?(t[0]*r[0]+t[1]*r[1])/(Eo(t)*Eo(r)):1}function kh(t,r){return(t[0]*r[1]<t[1]*r[0]?-1:1)*Math.acos(es(t,r))}function ts(t,r){return t[0]===r[0]&&t[1]===r[1]}function mm(t,r){var e=r[1],n=r[2],i=Qc(Jc(r[3]),Math.PI*2),o=r[4],a=r[5],l=t[0],s=t[1],u=r[6],f=r[7],h=Math.cos(i)*(l-u)/2+Math.sin(i)*(s-f)/2,d=-1*Math.sin(i)*(l-u)/2+Math.cos(i)*(s-f)/2,c=h*h/(e*e)+d*d/(n*n);c>1&&(e*=Math.sqrt(c),n*=Math.sqrt(c));var v=e*e*(d*d)+n*n*(h*h),p=v?Math.sqrt((e*e*(n*n)-v)/v):1;o===a&&(p*=-1),isNaN(p)&&(p=0);var g=n?p*e*d/n:0,y=e?p*-n*h/e:0,C=(l+u)/2+Math.cos(i)*g-Math.sin(i)*y,w=(s+f)/2+Math.sin(i)*g+Math.cos(i)*y,m=[(h-g)/e,(d-y)/n],_=[(-1*h-g)/e,(-1*d-y)/n],b=kh([1,0],m),T=kh(m,_);return es(m,_)<=-1&&(T=Math.PI),es(m,_)>=1&&(T=0),a===0&&T>0&&(T=T-2*Math.PI),a===1&&T<0&&(T=T+2*Math.PI),{cx:C,cy:w,rx:ts(t,[u,f])?0:e,ry:ts(t,[u,f])?0:n,startAngle:b,endAngle:b+T,xRotation:i,arcFlag:o,sweepFlag:a}}function Gh(t,r){return[r[0]+(r[0]-t[0]),r[1]+(r[1]-t[1])]}function zv(t){t=pm(t);for(var r=[],e=null,n=null,i=null,o=0,a=t.length,l=0;l<a;l++){var s=t[l];n=t[l+1];var u=s[0],f={command:u,prePoint:e,params:s,startTangent:null,endTangent:null};switch(u){case"M":i=[s[1],s[2]],o=l;break;case"A":var h=mm(e,s);f.arcParams=h;break}if(u==="Z")e=i,n=t[o+1];else{var d=s.length;e=[s[d-2],s[d-1]]}n&&n[0]==="Z"&&(n=t[o],r[o]&&(r[o].prePoint=e)),f.currentPoint=e,r[o]&&ts(e,r[o].currentPoint)&&(r[o].prePoint=f.prePoint);var c=n?[n[n.length-2],n[n.length-1]]:null;f.nextPoint=c;var v=f.prePoint;if(["L","H","V"].includes(u))f.startTangent=[v[0]-e[0],v[1]-e[1]],f.endTangent=[e[0]-v[0],e[1]-v[1]];else if(u==="Q"){var p=[s[1],s[2]];f.startTangent=[v[0]-p[0],v[1]-p[1]],f.endTangent=[e[0]-p[0],e[1]-p[1]]}else if(u==="T"){var g=r[l-1],p=Gh(g.currentPoint,v);g.command==="Q"?(f.command="Q",f.startTangent=[v[0]-p[0],v[1]-p[1]],f.endTangent=[e[0]-p[0],e[1]-p[1]]):(f.command="TL",f.startTangent=[v[0]-e[0],v[1]-e[1]],f.endTangent=[e[0]-v[0],e[1]-v[1]])}else if(u==="C"){var y=[s[1],s[2]],C=[s[3],s[4]];f.startTangent=[v[0]-y[0],v[1]-y[1]],f.endTangent=[e[0]-C[0],e[1]-C[1]],f.startTangent[0]===0&&f.startTangent[1]===0&&(f.startTangent=[y[0]-C[0],y[1]-C[1]]),f.endTangent[0]===0&&f.endTangent[1]===0&&(f.endTangent=[C[0]-y[0],C[1]-y[1]])}else if(u==="S"){var g=r[l-1],y=Gh(g.currentPoint,v),C=[s[1],s[2]];g.command==="C"?(f.command="C",f.startTangent=[v[0]-y[0],v[1]-y[1]],f.endTangent=[e[0]-C[0],e[1]-C[1]]):(f.command="SQ",f.startTangent=[v[0]-C[0],v[1]-C[1]],f.endTangent=[e[0]-C[0],e[1]-C[1]])}else if(u==="A"){var w=.001,m=f.arcParams||{},_=m.cx,b=_===void 0?0:_,T=m.cy,E=T===void 0?0:T,L=m.rx,F=L===void 0?0:L,I=m.ry,B=I===void 0?0:I,k=m.sweepFlag,U=k===void 0?0:k,O=m.startAngle,z=O===void 0?0:O,ue=m.endAngle,le=ue===void 0?0:ue;U===0&&(w*=-1);var te=F*Math.cos(z-w)+b,Ce=B*Math.sin(z-w)+E;f.startTangent=[te-i[0],Ce-i[1]];var fe=F*Math.cos(z+le+w)+b,we=B*Math.sin(z+le-w)+E;f.endTangent=[v[0]-fe,v[1]-we]}r.push(f)}return r}function xm(t,r){for(var e=[],n=[],i=[],o=0;o<t.length;o++){var a=t[o],l=a.currentPoint,s=a.params,u=a.prePoint,f=void 0;switch(a.command){case"Q":f=Ov.box(u[0],u[1],s[1],s[2],s[3],s[4]);break;case"C":f=Ti.box(u[0],u[1],s[1],s[2],s[3],s[4],s[5],s[6]);break;case"A":var h=a.arcParams;f=rm.box(h.cx,h.cy,h.rx,h.ry,h.xRotation,h.startAngle,h.endAngle);break;default:e.push(l[0]),n.push(l[1]);break}f&&(a.box=f,e.push(f.x,f.x+f.width),n.push(f.y,f.y+f.height)),r&&(a.command==="L"||a.command==="M")&&a.prePoint&&a.nextPoint&&i.push(a)}e=e.filter(function(y){return!Number.isNaN(y)&&y!==1/0&&y!==-1/0}),n=n.filter(function(y){return!Number.isNaN(y)&&y!==1/0&&y!==-1/0});var d=kr(e),c=kr(n),v=Wr(e),p=Wr(n);if(i.length===0)return{x:d,y:c,width:v-d,height:p-c};for(var o=0;o<i.length;o++){var a=i[o],l=a.currentPoint,g=void 0;l[0]===d?(g=Lo(a,r),d=d-g.xExtra):l[0]===v&&(g=Lo(a,r),v=v+g.xExtra),l[1]===c?(g=Lo(a,r),c=c-g.yExtra):l[1]===p&&(g=Lo(a,r),p=p+g.yExtra)}return{x:d,y:c,width:v-d,height:p-c}}function Lo(t,r){var e=t.prePoint,n=t.currentPoint,i=t.nextPoint,o=Math.pow(n[0]-e[0],2)+Math.pow(n[1]-e[1],2),a=Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2),l=Math.pow(e[0]-i[0],2)+Math.pow(e[1]-i[1],2),s=Math.acos((o+a-l)/(2*Math.sqrt(o)*Math.sqrt(a)));if(!s||Math.sin(s)===0||SC(s,0))return{xExtra:0,yExtra:0};var u=Math.abs(Math.atan2(i[1]-n[1],i[0]-n[0])),f=Math.abs(Math.atan2(i[0]-n[0],i[1]-n[1]));u=u>Math.PI/2?Math.PI-u:u,f=f>Math.PI/2?Math.PI-f:f;var h={xExtra:Math.cos(s/2-u)*(r/2*(1/Math.sin(s/2)))-r/2||0,yExtra:Math.cos(f-s/2)*(r/2*(1/Math.sin(s/2)))-r/2||0};return h}function _m(t){var r=t.attr(),e=r.path,n=r.stroke,i=n?r.lineWidth:0,o=t.get("segments")||zv(e),a=xm(o,i),l=a.x,s=a.y,u=a.width,f=a.height,h={minX:l,minY:s,maxX:l+u,maxY:s+f};return h=au(t,h),{x:h.minX,y:h.minY,width:h.maxX-h.minX,height:h.maxY-h.minY}}function Sm(t){var r=t.attr(),e=r.x1,n=r.y1,i=r.x2,o=r.y2,a=Math.min(e,i),l=Math.max(e,i),s=Math.min(n,o),u=Math.max(n,o),f={minX:a,maxX:l,minY:s,maxY:u};return f=au(t,f),{x:f.minX,y:f.minY,width:f.maxX-f.minX,height:f.maxY-f.minY}}function bm(t){var r=t.attr(),e=r.x,n=r.y,i=r.rx,o=r.ry;return{x:e-i,y:n-o,width:i*2,height:o*2}}fr("rect",Lv);fr("image",Lv);fr("circle",Av);fr("marker",Av);fr("polyline",sm);fr("polygon",um);fr("text",dm);fr("path",_m);fr("line",Sm);fr("ellipse",bm);function Tm(){return window?window.devicePixelRatio:1}function Wv(t,r,e,n){var i=t-e,o=r-n;return Math.sqrt(i*i+o*o)}function ln(t,r,e,n,i,o){return i>=t&&i<=t+e&&o>=r&&o<=r+n}function Ni(t,r){return!(r.minX>t.maxX||r.maxX<t.minX||r.minY>t.maxY||r.maxY<t.minY)}function Rm(t,r){return!t||!r?t||r:{minX:Math.min(t.minX,r.minX),minY:Math.min(t.minY,r.minY),maxX:Math.max(t.maxX,r.maxX),maxY:Math.max(t.maxY,r.maxY)}}function $h(t,r){return t[0]===r[0]&&t[1]===r[1]}var Em=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,Lm=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,Am=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,kv=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function Gv(t,r){var e=t.match(kv);se(e,function(n){var i=n.split(":");r.addColorStop(i[0],i[1])})}function Mm(t,r,e){var n=Em.exec(e),i=parseFloat(n[1])%360*(Math.PI/180),o=n[2],a=r.getBBox(),l,s;i>=0&&i<1/2*Math.PI?(l={x:a.minX,y:a.minY},s={x:a.maxX,y:a.maxY}):1/2*Math.PI<=i&&i<Math.PI?(l={x:a.maxX,y:a.minY},s={x:a.minX,y:a.maxY}):Math.PI<=i&&i<3/2*Math.PI?(l={x:a.maxX,y:a.maxY},s={x:a.minX,y:a.minY}):(l={x:a.minX,y:a.maxY},s={x:a.maxX,y:a.minY});var u=Math.tan(i),f=u*u,h=(s.x-l.x+u*(s.y-l.y))/(f+1)+l.x,d=u*(s.x-l.x+u*(s.y-l.y))/(f+1)+l.y,c=t.createLinearGradient(l.x,l.y,h,d);return Gv(o,c),c}function Im(t,r,e){var n=Lm.exec(e),i=parseFloat(n[1]),o=parseFloat(n[2]),a=parseFloat(n[3]),l=n[4];if(a===0){var s=l.match(kv);return s[s.length-1].split(":")[1]}var u=r.getBBox(),f=u.maxX-u.minX,h=u.maxY-u.minY,d=Math.sqrt(f*f+h*h)/2,c=t.createRadialGradient(u.minX+f*i,u.minY+h*o,0,u.minX+f/2,u.minY+h/2,a*d);return Gv(l,c),c}function Om(t,r,e){if(r.get("patternSource")&&r.get("patternSource")===e)return r.get("pattern");var n,i,o=Am.exec(e),a=o[1],l=o[2];function s(){n=t.createPattern(i,a),r.set("pattern",n),r.set("patternSource",e)}switch(a){case"a":a="repeat";break;case"x":a="repeat-x";break;case"y":a="repeat-y";break;case"n":a="no-repeat";break;default:a="no-repeat"}return i=new Image,l.match(/^data:/i)||(i.crossOrigin="Anonymous"),i.src=l,i.complete?s():(i.onload=s,i.src=i.src),n}function Bm(t,r,e){var n=r.getBBox();if(isNaN(n.x)||isNaN(n.y)||isNaN(n.width)||isNaN(n.height))return e;if(Vt(e)){if(e[1]==="("||e[2]==="("){if(e[0]==="l")return Mm(t,r,e);if(e[0]==="r")return Im(t,r,e);if(e[0]==="p")return Om(t,r,e)}return e}if(e instanceof CanvasPattern)return e}function Dm(t){var r=0,e=0,n=0,i=0;return Bt(t)?t.length===1?r=e=n=i=t[0]:t.length===2?(r=n=t[0],e=i=t[1]):t.length===3?(r=t[0],e=i=t[1],n=t[2]):(r=t[0],e=t[1],n=t[2],i=t[3]):r=e=n=i=t,[r,e,n,i]}function Ao(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function rs(t,r){return Ao(t)*Ao(r)?(t[0]*r[0]+t[1]*r[1])/(Ao(t)*Ao(r)):1}function Yh(t,r){return(t[0]*r[1]<t[1]*r[0]?-1:1)*Math.acos(rs(t,r))}function Uh(t,r){var e=r[1],n=r[2],i=Qc(Jc(r[3]),Math.PI*2),o=r[4],a=r[5],l=t[0],s=t[1],u=r[6],f=r[7],h=Math.cos(i)*(l-u)/2+Math.sin(i)*(s-f)/2,d=-1*Math.sin(i)*(l-u)/2+Math.cos(i)*(s-f)/2,c=h*h/(e*e)+d*d/(n*n);c>1&&(e*=Math.sqrt(c),n*=Math.sqrt(c));var v=e*e*(d*d)+n*n*(h*h),p=v?Math.sqrt((e*e*(n*n)-v)/v):1;o===a&&(p*=-1),isNaN(p)&&(p=0);var g=n?p*e*d/n:0,y=e?p*-n*h/e:0,C=(l+u)/2+Math.cos(i)*g-Math.sin(i)*y,w=(s+f)/2+Math.sin(i)*g+Math.cos(i)*y,m=[(h-g)/e,(d-y)/n],_=[(-1*h-g)/e,(-1*d-y)/n],b=Yh([1,0],m),T=Yh(m,_);return rs(m,_)<=-1&&(T=Math.PI),rs(m,_)>=1&&(T=0),a===0&&T>0&&(T=T-2*Math.PI),a===1&&T<0&&(T=T+2*Math.PI),{cx:C,cy:w,rx:$h(t,[u,f])?0:e,ry:$h(t,[u,f])?0:n,startAngle:b,endAngle:b+T,xRotation:i,arcFlag:o,sweepFlag:a}}var Jo=Math.sin,ea=Math.cos,lu=Math.atan2,Mo=Math.PI;function $v(t,r,e,n,i,o,a){var l=r.stroke,s=r.lineWidth,u=e-i,f=n-o,h=lu(f,u),d=new du({type:"path",canvas:t.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*ea(Mo/6)+","+10*Jo(Mo/6)+" L0,0 L"+10*ea(Mo/6)+",-"+10*Jo(Mo/6),stroke:l,lineWidth:s}});d.translate(i,o),d.rotateAtPoint(i,o,h),t.set(a?"startArrowShape":"endArrowShape",d)}function Yv(t,r,e,n,i,o,a){var l=r.startArrow,s=r.endArrow,u=r.stroke,f=r.lineWidth,h=a?l:s,d=h.d,c=h.fill,v=h.stroke,p=h.lineWidth,g=Sa(h,["d","fill","stroke","lineWidth"]),y=e-i,C=n-o,w=lu(C,y);d&&(i=i-ea(w)*d,o=o-Jo(w)*d);var m=new du({type:"path",canvas:t.get("canvas"),isArrowShape:!0,attrs:S(S({},g),{stroke:v||u,lineWidth:p||f,fill:c})});m.translate(i,o),m.rotateAtPoint(i,o,w),t.set(a?"startArrowShape":"endArrowShape",m)}function hn(t,r,e,n,i){var o=lu(n-r,e-t);return{dx:ea(o)*i,dy:Jo(o)*i}}function su(t,r,e,n,i,o){typeof r.startArrow=="object"?Yv(t,r,e,n,i,o,!0):r.startArrow?$v(t,r,e,n,i,o,!0):t.set("startArrowShape",null)}function uu(t,r,e,n,i,o){typeof r.endArrow=="object"?Yv(t,r,e,n,i,o,!1):r.endArrow?$v(t,r,e,n,i,o,!1):t.set("startArrowShape",null)}var Xh={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function Vn(t,r){var e=r.attr();for(var n in e){var i=e[n],o=Xh[n]?Xh[n]:n;o==="matrix"&&i?t.transform(i[0],i[1],i[3],i[4],i[6],i[7]):o==="lineDash"&&t.setLineDash?Bt(i)&&t.setLineDash(i):(o==="strokeStyle"||o==="fillStyle"?i=Bm(t,r,i):o==="globalAlpha"&&(i=i*t.globalAlpha),t[o]=i)}}function ns(t,r,e){for(var n=0;n<r.length;n++){var i=r[n];i.cfg.visible?i.draw(t,e):i.skipDraw()}}function Nm(t,r,e){var n=t.get("refreshElements");se(n,function(i){if(i!==t)for(var o=i.cfg.parent;o&&o!==t&&!o.cfg.refresh;)o.cfg.refresh=!0,o=o.cfg.parent}),n[0]===t?fu(r):is(r,e)}function is(t,r){for(var e=0;e<t.length;e++){var n=t[e];if(n.cfg.visible)if(n.cfg.hasChanged)n.cfg.refresh=!0,n.isGroup()&&fu(n.cfg.children);else if(n.cfg.refresh)n.isGroup()&&is(n.cfg.children,r);else{var i=Pm(n,r);n.cfg.refresh=i,i&&n.isGroup()&&is(n.cfg.children,r)}}}function Uv(t){for(var r=0;r<t.length;r++){var e=t[r];e.cfg.hasChanged=!1,e.isGroup()&&!e.destroyed&&Uv(e.cfg.children)}}function fu(t,r){for(var e=0;e<t.length;e++){var n=t[e];n.cfg.visible&&(n.cfg.refresh=!0,n.isGroup()&&fu(n.get("children")))}}function Pm(t,r){var e=t.cfg.cacheCanvasBBox,n=t.cfg.isInView&&e&&Ni(e,r);return n}function Xv(t,r,e,n){var i=e.path,o=e.startArrow,a=e.endArrow;if(i){var l=[0,0],s=[0,0],u={dx:0,dy:0};r.beginPath();for(var f=0;f<i.length;f++){var h=i[f],d=h[0];if(f===0&&o&&o.d){var c=t.getStartTangent();u=hn(c[0][0],c[0][1],c[1][0],c[1][1],o.d)}else if(f===i.length-2&&i[f+1][0]==="Z"&&a&&a.d){var v=i[f+1];if(v[0]==="Z"){var c=t.getEndTangent();u=hn(c[0][0],c[0][1],c[1][0],c[1][1],a.d)}}else if(f===i.length-1&&a&&a.d&&i[0]!=="Z"){var c=t.getEndTangent();u=hn(c[0][0],c[0][1],c[1][0],c[1][1],a.d)}var p=u.dx,g=u.dy;switch(d){case"M":r.moveTo(h[1]-p,h[2]-g),s=[h[1],h[2]];break;case"L":r.lineTo(h[1]-p,h[2]-g);break;case"Q":r.quadraticCurveTo(h[1],h[2],h[3]-p,h[4]-g);break;case"C":r.bezierCurveTo(h[1],h[2],h[3],h[4],h[5]-p,h[6]-g);break;case"A":{var y=void 0;n?(y=n[f],y||(y=Uh(l,h),n[f]=y)):y=Uh(l,h);var C=y.cx,w=y.cy,m=y.rx,_=y.ry,b=y.startAngle,T=y.endAngle,E=y.xRotation,L=y.sweepFlag;if(r.ellipse)r.ellipse(C,w,m,_,E,b,T,1-L);else{var F=m>_?m:_,I=m>_?1:m/_,B=m>_?_/m:1;r.translate(C,w),r.rotate(E),r.scale(I,B),r.arc(0,0,F,b,T,1-L),r.scale(1/I,1/B),r.rotate(-E),r.translate(-C,-w)}break}case"Z":r.closePath();break}if(d==="Z")l=s;else{var k=h.length;l=[h[k-2],h[k-1]]}}}}function Vv(t,r){var e=t.get("canvas");e&&(r==="remove"&&(t._cacheCanvasBBox=t.get("cacheCanvasBBox")),t.get("hasChanged")||(t.set("hasChanged",!0),t.cfg.parent&&t.cfg.parent.get("hasChanged")||(e.refreshElement(t,r,e),e.get("autoDraw")&&e.draw())))}function Fm(t){var r;if(t.destroyed)r=t._cacheCanvasBBox;else{var e=t.get("cacheCanvasBBox"),n=e&&!!(e.width&&e.height),i=t.getCanvasBBox(),o=i&&!!(i.width&&i.height);n&&o?r=Rm(e,i):n?r=e:o&&(r=i)}return r}function Hm(t){if(!t.length)return null;var r=[],e=[],n=[],i=[];return se(t,function(o){var a=Fm(o);a&&(r.push(a.minX),e.push(a.minY),n.push(a.maxX),i.push(a.maxY))}),{minX:kr(r),minY:kr(e),maxX:Wr(n),maxY:Wr(i)}}function zm(t,r){return!t||!r||!Ni(t,r)?null:{minX:Math.max(t.minX,r.minX),minY:Math.max(t.minY,r.minY),maxX:Math.min(t.maxX,r.maxX),maxY:Math.min(t.maxY,r.maxY)}}var hr=function(t){H(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.onCanvasChange=function(e){Vv(this,e)},r.prototype.getShapeBase=function(){return Qs},r.prototype.getGroupBase=function(){return r},r.prototype._applyClip=function(e,n){n&&(e.save(),Vn(e,n),n.createPath(e),e.restore(),e.clip(),n._afterDraw())},r.prototype.cacheCanvasBBox=function(){var e=this.cfg.children,n=[],i=[];se(e,function(d){var c=d.cfg.cacheCanvasBBox;c&&d.cfg.isInView&&(n.push(c.minX,c.maxX),i.push(c.minY,c.maxY))});var o=null;if(n.length){var a=kr(n),l=Wr(n),s=kr(i),u=Wr(i);o={minX:a,minY:s,x:a,y:s,maxX:l,maxY:u,width:l-a,height:u-s};var f=this.cfg.canvas;if(f){var h=f.getViewRange();this.set("isInView",Ni(o,h))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",o)},r.prototype.draw=function(e,n){var i=this.cfg.children,o=n?this.cfg.refresh:!0;i.length&&o&&(e.save(),Vn(e,this),this._applyClip(e,this.getClip()),ns(e,i,n),e.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},r.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},r}(Uw),Wm=function(t){H(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return S(S({},e),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},r.prototype.getShapeBase=function(){return Qs},r.prototype.getGroupBase=function(){return hr},r.prototype.onCanvasChange=function(e){Vv(this,e)},r.prototype.calculateBBox=function(){var e=this.get("type"),n=this.getHitLineWidth(),i=Vw(e),o=i(this),a=n/2,l=o.x-a,s=o.y-a,u=o.x+o.width+a,f=o.y+o.height+a;return{x:l,minX:l,y:s,minY:s,width:o.width+n,height:o.height+n,maxX:u,maxY:f}},r.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},r.prototype.isStroke=function(){return!!this.attrs.stroke},r.prototype._applyClip=function(e,n){n&&(e.save(),Vn(e,n),n.createPath(e),e.restore(),e.clip(),n._afterDraw())},r.prototype.draw=function(e,n){var i=this.cfg.clipShape;if(n){if(this.cfg.refresh===!1){this.set("hasChanged",!1);return}var o=this.getCanvasBBox();if(!Ni(n,o)){this.set("hasChanged",!1),this.cfg.isInView&&this._afterDraw();return}}e.save(),Vn(e,this),this._applyClip(e,i),this.drawPath(e),e.restore(),this._afterDraw()},r.prototype.getCanvasViewBox=function(){var e=this.cfg.canvas;return e?e.getViewRange():null},r.prototype.cacheCanvasBBox=function(){var e=this.getCanvasViewBox();if(e){var n=this.getCanvasBBox(),i=Ni(n,e);this.set("isInView",i),i?this.set("cacheCanvasBBox",n):this.set("cacheCanvasBBox",null)}},r.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},r.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},r.prototype.drawPath=function(e){this.createPath(e),this.strokeAndFill(e),this.afterDrawPath(e)},r.prototype.fill=function(e){e.fill()},r.prototype.stroke=function(e){e.stroke()},r.prototype.strokeAndFill=function(e){var n=this.attrs,i=n.lineWidth,o=n.opacity,a=n.strokeOpacity,l=n.fillOpacity;this.isFill()&&(!Pe(l)&&l!==1?(e.globalAlpha=l,this.fill(e),e.globalAlpha=o):this.fill(e)),this.isStroke()&&i>0&&(!Pe(a)&&a!==1&&(e.globalAlpha=a),this.stroke(e)),this.afterDrawPath(e)},r.prototype.createPath=function(e){},r.prototype.afterDrawPath=function(e){},r.prototype.isInShape=function(e,n){var i=this.isStroke(),o=this.isFill(),a=this.getHitLineWidth();return this.isInStrokeOrPath(e,n,i,o,a)},r.prototype.isInStrokeOrPath=function(e,n,i,o,a){return!1},r.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var e=this.attrs;return e.lineWidth+e.lineAppendWidth},r}(Xw),Zt=Wm,km=function(t){H(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return S(S({},e),{x:0,y:0,r:0})},r.prototype.isInStrokeOrPath=function(e,n,i,o,a){var l=this.attr(),s=l.x,u=l.y,f=l.r,h=a/2,d=Wv(s,u,e,n);return o&&i?d<=f+h:o?d<=f:i?d>=f-h&&d<=f+h:!1},r.prototype.createPath=function(e){var n=this.attr(),i=n.x,o=n.y,a=n.r;e.beginPath(),e.arc(i,o,a,0,Math.PI*2,!1),e.closePath()},r}(Zt),Gm=km;function Io(t,r,e,n){return t/(e*e)+r/(n*n)}var $m=function(t){H(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return S(S({},e),{x:0,y:0,rx:0,ry:0})},r.prototype.isInStrokeOrPath=function(e,n,i,o,a){var l=this.attr(),s=a/2,u=l.x,f=l.y,h=l.rx,d=l.ry,c=(e-u)*(e-u),v=(n-f)*(n-f);return o&&i?Io(c,v,h+s,d+s)<=1:o?Io(c,v,h,d)<=1:i?Io(c,v,h-s,d-s)>=1&&Io(c,v,h+s,d+s)<=1:!1},r.prototype.createPath=function(e){var n=this.attr(),i=n.x,o=n.y,a=n.rx,l=n.ry;if(e.beginPath(),e.ellipse)e.ellipse(i,o,a,l,0,0,Math.PI*2,!1);else{var s=a>l?a:l,u=a>l?1:a/l,f=a>l?l/a:1;e.save(),e.translate(i,o),e.scale(u,f),e.arc(0,0,s,0,Math.PI*2),e.restore(),e.closePath()}},r}(Zt),Ym=$m;function Vh(t){return t instanceof HTMLElement&&Vt(t.nodeName)&&t.nodeName.toUpperCase()==="CANVAS"}var Um=function(t){H(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return S(S({},e),{x:0,y:0,width:0,height:0})},r.prototype.initAttrs=function(e){this._setImage(e.img)},r.prototype.isStroke=function(){return!1},r.prototype.isOnlyHitBox=function(){return!0},r.prototype._afterLoading=function(){if(this.get("toDraw")===!0){var e=this.get("canvas");e?e.draw():this.createPath(this.get("context"))}},r.prototype._setImage=function(e){var n=this,i=this.attrs;if(Vt(e)){var o=new Image;o.onload=function(){if(n.destroyed)return!1;n.attr("img",o),n.set("loading",!1),n._afterLoading();var a=n.get("callback");a&&a.call(n)},o.crossOrigin="Anonymous",o.src=e,this.set("loading",!0)}else e instanceof Image?(i.width||(i.width=e.width),i.height||(i.height=e.height)):Vh(e)&&(i.width||(i.width=Number(e.getAttribute("width"))),i.height||(i.height,Number(e.getAttribute("height"))))},r.prototype.onAttrChange=function(e,n,i){t.prototype.onAttrChange.call(this,e,n,i),e==="img"&&this._setImage(n)},r.prototype.createPath=function(e){if(this.get("loading")){this.set("toDraw",!0),this.set("context",e);return}var n=this.attr(),i=n.x,o=n.y,a=n.width,l=n.height,s=n.sx,u=n.sy,f=n.swidth,h=n.sheight,d=n.img;(d instanceof Image||Vh(d))&&(!Pe(s)&&!Pe(u)&&!Pe(f)&&!Pe(h)?e.drawImage(d,s,u,f,h,i,o,a,l):e.drawImage(d,i,o,a,l))},r}(Zt),hu=Um;function Pr(t,r,e,n,i,o,a){var l=Math.min(t,e),s=Math.max(t,e),u=Math.min(r,n),f=Math.max(r,n),h=i/2;return o>=l-h&&o<=s+h&&a>=u-h&&a<=f+h?ft.pointToLine(t,r,e,n,o,a)<=i/2:!1}var Xm=function(t){H(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return S(S({},e),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},r.prototype.initAttrs=function(e){this.setArrow()},r.prototype.onAttrChange=function(e,n,i){t.prototype.onAttrChange.call(this,e,n,i),this.setArrow()},r.prototype.setArrow=function(){var e=this.attr(),n=e.x1,i=e.y1,o=e.x2,a=e.y2,l=e.startArrow,s=e.endArrow;l&&su(this,e,o,a,n,i),s&&uu(this,e,n,i,o,a)},r.prototype.isInStrokeOrPath=function(e,n,i,o,a){if(!i||!a)return!1;var l=this.attr(),s=l.x1,u=l.y1,f=l.x2,h=l.y2;return Pr(s,u,f,h,a,e,n)},r.prototype.createPath=function(e){var n=this.attr(),i=n.x1,o=n.y1,a=n.x2,l=n.y2,s=n.startArrow,u=n.endArrow,f={dx:0,dy:0},h={dx:0,dy:0};s&&s.d&&(f=hn(i,o,a,l,n.startArrow.d)),u&&u.d&&(h=hn(i,o,a,l,n.endArrow.d)),e.beginPath(),e.moveTo(i+f.dx,o+f.dy),e.lineTo(a-h.dx,l-h.dy)},r.prototype.afterDrawPath=function(e){var n=this.get("startArrowShape"),i=this.get("endArrowShape");n&&n.draw(e),i&&i.draw(e)},r.prototype.getTotalLength=function(){var e=this.attr(),n=e.x1,i=e.y1,o=e.x2,a=e.y2;return ft.length(n,i,o,a)},r.prototype.getPoint=function(e){var n=this.attr(),i=n.x1,o=n.y1,a=n.x2,l=n.y2;return ft.pointAt(i,o,a,l,e)},r}(Zt),Vm=Xm,qm={circle:function(t,r,e){return[["M",t-e,r],["A",e,e,0,1,0,t+e,r],["A",e,e,0,1,0,t-e,r]]},square:function(t,r,e){return[["M",t-e,r-e],["L",t+e,r-e],["L",t+e,r+e],["L",t-e,r+e],["Z"]]},diamond:function(t,r,e){return[["M",t-e,r],["L",t,r-e],["L",t+e,r],["L",t,r+e],["Z"]]},triangle:function(t,r,e){var n=e*Math.sin(.3333333333333333*Math.PI);return[["M",t-e,r+n],["L",t,r-n],["L",t+e,r+n],["Z"]]},"triangle-down":function(t,r,e){var n=e*Math.sin(.3333333333333333*Math.PI);return[["M",t-e,r-n],["L",t+e,r-n],["L",t,r+n],["Z"]]}},Km=function(t){H(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.initAttrs=function(e){this._resetParamsCache()},r.prototype._resetParamsCache=function(){this.set("paramsCache",{})},r.prototype.onAttrChange=function(e,n,i){t.prototype.onAttrChange.call(this,e,n,i),["symbol","x","y","r","radius"].indexOf(e)!==-1&&this._resetParamsCache()},r.prototype.isOnlyHitBox=function(){return!0},r.prototype._getR=function(e){return Pe(e.r)?e.radius:e.r},r.prototype._getPath=function(){var e=this.attr(),n=e.x,i=e.y,o=e.symbol||"circle",a=this._getR(e),l,s;if(pn(o))l=o,s=l(n,i,a),s=Hv(s);else{if(l=r.Symbols[o],!l)return console.warn(o+" marker is not supported."),null;s=l(n,i,a)}return s},r.prototype.createPath=function(e){var n=this._getPath(),i=this.get("paramsCache");Xv(this,e,{path:n},i)},r.Symbols=qm,r}(Zt),Zm=Km;function qv(t,r,e){var n=Nv();return t.createPath(n),n.isPointInPath(r,e)}var jm=1e-6;function Sl(t){return Math.abs(t)<jm?0:t<0?-1:1}function Qm(t,r,e){return(e[0]-t[0])*(r[1]-t[1])===(r[0]-t[0])*(e[1]-t[1])&&Math.min(t[0],r[0])<=e[0]&&e[0]<=Math.max(t[0],r[0])&&Math.min(t[1],r[1])<=e[1]&&e[1]<=Math.max(t[1],r[1])}function Kv(t,r,e){var n=!1,i=t.length;if(i<=2)return!1;for(var o=0;o<i;o++){var a=t[o],l=t[(o+1)%i];if(Qm(a,l,[r,e]))return!0;Sl(a[1]-e)>0!=Sl(l[1]-e)>0&&Sl(r-(e-a[1])*(a[0]-l[0])/(a[1]-l[1])-a[0])<0&&(n=!n)}return n}function xi(t,r,e,n,i,o,a,l){var s=(Math.atan2(l-r,a-t)+Math.PI*2)%(Math.PI*2);if(s<n||s>i)return!1;var u={x:t+e*Math.cos(s),y:r+e*Math.sin(s)};return Wv(u.x,u.y,a,l)<=o/2}var Jm=uv;function ex(t){for(var r=!1,e=t.length,n=0;n<e;n++){var i=t[n],o=i[0];if(o==="C"||o==="A"||o==="Q"){r=!0;break}}return r}function tx(t,r,e,n,i){for(var o=!1,a=r/2,l=0;l<t.length;l++){var s=t[l],u=s.currentPoint,f=s.params,h=s.prePoint,d=s.box;if(!(d&&!ln(d.x-a,d.y-a,d.width+r,d.height+r,e,n))){switch(s.command){case"L":case"Z":o=Pr(h[0],h[1],u[0],u[1],r,e,n);break;case"Q":var c=Ov.pointDistance(h[0],h[1],f[1],f[2],f[3],f[4],e,n);o=c<=r/2;break;case"C":var v=Ti.pointDistance(h[0],h[1],f[1],f[2],f[3],f[4],f[5],f[6],e,n,i);o=v<=r/2;break;case"A":var p=s.arcParams,g=p.cx,y=p.cy,C=p.rx,w=p.ry,m=p.startAngle,_=p.endAngle,b=p.xRotation,T=[e,n,1],E=C>w?C:w,L=C>w?1:C/w,F=C>w?w/C:1,I=Jm(null,[["t",-g,-y],["r",-b],["s",1/L,1/F]]);g1(T,T,I),o=xi(0,0,E,m,_,r,T[0],T[1]);break}if(o)break}}return o}function rx(t){for(var r=t.length,e=[],n=[],i=[],o=0;o<r;o++){var a=t[o],l=a[0];l==="M"?(i.length&&(n.push(i),i=[]),i.push([a[1],a[2]])):l==="Z"?i.length&&(e.push(i),i=[]):i.push([a[1],a[2]])}return i.length>0&&n.push(i),{polygons:e,polylines:n}}var Oo=S({hasArc:ex,extractPolygons:rx,isPointInStroke:tx},qC);function qh(t,r,e){for(var n=!1,i=0;i<t.length;i++){var o=t[i];if(n=Kv(o,r,e),n)break}return n}var nx=function(t){H(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return S(S({},e),{startArrow:!1,endArrow:!1})},r.prototype.initAttrs=function(e){this._setPathArr(e.path),this.setArrow()},r.prototype.onAttrChange=function(e,n,i){t.prototype.onAttrChange.call(this,e,n,i),e==="path"&&this._setPathArr(n),this.setArrow()},r.prototype._setPathArr=function(e){this.attrs.path=Hv(e);var n=Oo.hasArc(e);this.set("hasArc",n),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},r.prototype.getSegments=function(){var e=this.get("segements");return e||(e=zv(this.attr("path")),this.set("segments",e)),e},r.prototype.setArrow=function(){var e=this.attr(),n=e.startArrow,i=e.endArrow;if(n){var o=this.getStartTangent();su(this,e,o[0][0],o[0][1],o[1][0],o[1][1])}if(i){var o=this.getEndTangent();uu(this,e,o[0][0],o[0][1],o[1][0],o[1][1])}},r.prototype.isInStrokeOrPath=function(e,n,i,o,a){var l=this.getSegments(),s=this.get("hasArc"),u=!1;if(i){var f=this.getTotalLength();u=Oo.isPointInStroke(l,a,e,n,f)}if(!u&&o)if(s)u=qv(this,e,n);else{var h=this.attr("path"),d=Oo.extractPolygons(h);u=qh(d.polygons,e,n)||qh(d.polylines,e,n)}return u},r.prototype.createPath=function(e){var n=this.attr(),i=this.get("paramsCache");Xv(this,e,n,i)},r.prototype.afterDrawPath=function(e){var n=this.get("startArrowShape"),i=this.get("endArrowShape");n&&n.draw(e),i&&i.draw(e)},r.prototype.getTotalLength=function(){var e=this.get("totalLength");return Pe(e)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):e},r.prototype.getPoint=function(e){var n=this.get("tCache");n||(this._calculateCurve(),this._setTcache(),n=this.get("tCache"));var i,o,a=this.get("curve");if(!n||n.length===0)return a?{x:a[0][1],y:a[0][2]}:null;se(n,function(f,h){e>=f[0]&&e<=f[1]&&(i=(e-f[0])/(f[1]-f[0]),o=h)});var l=a[o];if(Pe(l)||Pe(o))return null;var s=l.length,u=a[o+1];return Ti.pointAt(l[s-2],l[s-1],u[1],u[2],u[3],u[4],u[5],u[6],i)},r.prototype._calculateCurve=function(){var e=this.attr().path;this.set("curve",Oo.pathToCurve(e))},r.prototype._setTcache=function(){var e=0,n=0,i=[],o,a,l,s,u=this.get("curve");if(u){if(se(u,function(f,h){l=u[h+1],s=f.length,l&&(e+=Ti.length(f[s-2],f[s-1],l[1],l[2],l[3],l[4],l[5],l[6])||0)}),this.set("totalLength",e),e===0){this.set("tCache",[]);return}se(u,function(f,h){l=u[h+1],s=f.length,l&&(o=[],o[0]=n/e,a=Ti.length(f[s-2],f[s-1],l[1],l[2],l[3],l[4],l[5],l[6]),n+=a||0,o[1]=n/e,i.push(o))}),this.set("tCache",i)}},r.prototype.getStartTangent=function(){var e=this.getSegments(),n;if(e.length>1){var i=e[0].currentPoint,o=e[1].currentPoint,a=e[1].startTangent;n=[],a?(n.push([i[0]-a[0],i[1]-a[1]]),n.push([i[0],i[1]])):(n.push([o[0],o[1]]),n.push([i[0],i[1]]))}return n},r.prototype.getEndTangent=function(){var e=this.getSegments(),n=e.length,i;if(n>1){var o=e[n-2].currentPoint,a=e[n-1].currentPoint,l=e[n-1].endTangent;i=[],l?(i.push([a[0]-l[0],a[1]-l[1]]),i.push([a[0],a[1]])):(i.push([o[0],o[1]]),i.push([a[0],a[1]]))}return i},r}(Zt),du=nx;function Zv(t,r,e,n,i){var o=t.length;if(o<2)return!1;for(var a=0;a<o-1;a++){var l=t[a][0],s=t[a][1],u=t[a+1][0],f=t[a+1][1];if(Pr(l,s,u,f,r,e,n))return!0}if(i){var h=t[0],d=t[o-1];if(Pr(h[0],h[1],d[0],d[1],r,e,n))return!0}return!1}var ix=function(t){H(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.isInStrokeOrPath=function(e,n,i,o,a){var l=this.attr().points,s=!1;return i&&(s=Zv(l,a,e,n,!0)),!s&&o&&(s=Kv(l,e,n)),s},r.prototype.createPath=function(e){var n=this.attr(),i=n.points;if(!(i.length<2)){e.beginPath();for(var o=0;o<i.length;o++){var a=i[o];o===0?e.moveTo(a[0],a[1]):e.lineTo(a[0],a[1])}e.closePath()}},r}(Zt),ox=ix,ax=function(t){H(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return S(S({},e),{startArrow:!1,endArrow:!1})},r.prototype.initAttrs=function(e){this.setArrow()},r.prototype.onAttrChange=function(e,n,i){t.prototype.onAttrChange.call(this,e,n,i),this.setArrow(),["points"].indexOf(e)!==-1&&this._resetCache()},r.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},r.prototype.setArrow=function(){var e=this.attr(),n=this.attrs,i=n.points,o=n.startArrow,a=n.endArrow,l=i.length,s=i[0][0],u=i[0][1],f=i[l-1][0],h=i[l-1][1];o&&su(this,e,i[1][0],i[1][1],s,u),a&&uu(this,e,i[l-2][0],i[l-2][1],f,h)},r.prototype.isFill=function(){return!1},r.prototype.isInStrokeOrPath=function(e,n,i,o,a){if(!i||!a)return!1;var l=this.attr().points;return Zv(l,a,e,n,!1)},r.prototype.isStroke=function(){return!0},r.prototype.createPath=function(e){var n=this.attr(),i=n.points,o=n.startArrow,a=n.endArrow,l=i.length;if(!(i.length<2)){var s=i[0][0],u=i[0][1],f=i[l-1][0],h=i[l-1][1];if(o&&o.d){var d=hn(s,u,i[1][0],i[1][1],o.d);s+=d.dx,u+=d.dy}if(a&&a.d){var d=hn(i[l-2][0],i[l-2][1],f,h,a.d);f-=d.dx,h-=d.dy}e.beginPath(),e.moveTo(s,u);for(var c=0;c<l-1;c++){var v=i[c];e.lineTo(v[0],v[1])}e.lineTo(f,h)}},r.prototype.afterDrawPath=function(e){var n=this.get("startArrowShape"),i=this.get("endArrowShape");n&&n.draw(e),i&&i.draw(e)},r.prototype.getTotalLength=function(){var e=this.attr().points,n=this.get("totalLength");return Pe(n)?(this.set("totalLength",lm.length(e)),this.get("totalLength")):n},r.prototype.getPoint=function(e){var n=this.attr().points,i=this.get("tCache");i||(this._setTcache(),i=this.get("tCache"));var o,a;return se(i,function(l,s){e>=l[0]&&e<=l[1]&&(o=(e-l[0])/(l[1]-l[0]),a=s)}),ft.pointAt(n[a][0],n[a][1],n[a+1][0],n[a+1][1],o)},r.prototype._setTcache=function(){var e=this.attr().points;if(!(!e||e.length===0)){var n=this.getTotalLength();if(!(n<=0)){var i=0,o=[],a,l;se(e,function(s,u){e[u+1]&&(a=[],a[0]=i/n,l=ft.length(s[0],s[1],e[u+1][0],e[u+1][1]),i+=l,a[1]=i/n,o.push(a))}),this.set("tCache",o)}}},r.prototype.getStartTangent=function(){var e=this.attr().points,n=[];return n.push([e[1][0],e[1][1]]),n.push([e[0][0],e[0][1]]),n},r.prototype.getEndTangent=function(){var e=this.attr().points,n=e.length-1,i=[];return i.push([e[n-1][0],e[n-1][1]]),i.push([e[n][0],e[n][1]]),i},r}(Zt),lx=ax;function sx(t,r,e,n,i,o,a){var l=i/2;return ln(t-l,r-l,e,i,o,a)||ln(t+e-l,r-l,i,n,o,a)||ln(t+l,r+n-l,e,i,o,a)||ln(t-l,r+l,i,n,o,a)}function ux(t,r,e,n,i,o,a,l){return Pr(t+i,r,t+e-i,r,o,a,l)||Pr(t+e,r+i,t+e,r+n-i,o,a,l)||Pr(t+e-i,r+n,t+i,r+n,o,a,l)||Pr(t,r+n-i,t,r+i,o,a,l)||xi(t+e-i,r+i,i,1.5*Math.PI,2*Math.PI,o,a,l)||xi(t+e-i,r+n-i,i,0,.5*Math.PI,o,a,l)||xi(t+i,r+n-i,i,.5*Math.PI,Math.PI,o,a,l)||xi(t+i,r+i,i,Math.PI,1.5*Math.PI,o,a,l)}var fx=function(t){H(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return S(S({},e),{x:0,y:0,width:0,height:0,radius:0})},r.prototype.isInStrokeOrPath=function(e,n,i,o,a){var l=this.attr(),s=l.x,u=l.y,f=l.width,h=l.height,d=l.radius;if(d){var v=!1;return i&&(v=ux(s,u,f,h,d,a,e,n)),!v&&o&&(v=qv(this,e,n)),v}else{var c=a/2;if(o&&i)return ln(s-c,u-c,f+c,h+c,e,n);if(o)return ln(s,u,f,h,e,n);if(i)return sx(s,u,f,h,a,e,n)}},r.prototype.createPath=function(e){var n=this.attr(),i=n.x,o=n.y,a=n.width,l=n.height,s=n.radius;if(e.beginPath(),s===0)e.rect(i,o,a,l);else{var u=Dm(s),f=u[0],h=u[1],d=u[2],c=u[3];e.moveTo(i+f,o),e.lineTo(i+a-h,o),h!==0&&e.arc(i+a-h,o+h,h,-Math.PI/2,0),e.lineTo(i+a,o+l-d),d!==0&&e.arc(i+a-d,o+l-d,d,0,Math.PI/2),e.lineTo(i+c,o+l),c!==0&&e.arc(i+c,o+l-c,c,Math.PI/2,Math.PI),e.lineTo(i,o+f),f!==0&&e.arc(i+f,o+f,f,Math.PI,Math.PI*1.5),e.closePath()}},r}(Zt),hx=fx,dx=function(t){H(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return S(S({},e),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},r.prototype.isOnlyHitBox=function(){return!0},r.prototype.initAttrs=function(e){this._assembleFont(),e.text&&this._setText(e.text)},r.prototype._assembleFont=function(){var e=this.attrs;e.font=Fv(e)},r.prototype._setText=function(e){var n=null;Vt(e)&&e.indexOf(`
`)!==-1&&(n=e.split(`
`)),this.set("textArr",n)},r.prototype.onAttrChange=function(e,n,i){t.prototype.onAttrChange.call(this,e,n,i),e.startsWith("font")&&this._assembleFont(),e==="text"&&this._setText(n)},r.prototype._getSpaceingY=function(){var e=this.attrs,n=e.lineHeight,i=e.fontSize*1;return n?n-i:i*.14},r.prototype._drawTextArr=function(e,n,i){var o=this.attrs,a=o.textBaseline,l=o.x,s=o.y,u=o.fontSize*1,f=this._getSpaceingY(),h=Pv(o.text,o.fontSize,o.lineHeight),d;se(n,function(c,v){d=s+v*(f+u)-h+u,a==="middle"&&(d+=h-u-(h-u)/2),a==="top"&&(d+=h-u),Pe(c)||(i?e.fillText(c,l,d):e.strokeText(c,l,d))})},r.prototype._drawText=function(e,n){var i=this.attr(),o=i.x,a=i.y,l=this.get("textArr");if(l)this._drawTextArr(e,l,n);else{var s=i.text;Pe(s)||(n?e.fillText(s,o,a):e.strokeText(s,o,a))}},r.prototype.strokeAndFill=function(e){var n=this.attrs,i=n.lineWidth,o=n.opacity,a=n.strokeOpacity,l=n.fillOpacity;this.isStroke()&&i>0&&(!Pe(a)&&a!==1&&(e.globalAlpha=o),this.stroke(e)),this.isFill()&&(!Pe(l)&&l!==1?(e.globalAlpha=l,this.fill(e),e.globalAlpha=o):this.fill(e)),this.afterDrawPath(e)},r.prototype.fill=function(e){this._drawText(e,!0)},r.prototype.stroke=function(e){this._drawText(e,!1)},r}(Zt),cx=dx;function vx(t,r){if(r){var e=fv(r);return on(e,t)}return t}function jv(t,r,e){var n=t.getTotalMatrix();if(n){var i=vx([r,e,1],n),o=i[0],a=i[1];return[o,a]}return[r,e]}function Kh(t,r,e){if(t.isCanvas&&t.isCanvas())return!0;if(!Yl(t)||t.cfg.isInView===!1)return!1;if(t.cfg.clipShape){var n=jv(t,r,e),i=n[0],o=n[1];if(t.isClipped(i,o))return!1}var a=t.cfg.cacheCanvasBBox||t.getCanvasBBox();return r>=a.minX&&r<=a.maxX&&e>=a.minY&&e<=a.maxY}function Qv(t,r,e){if(!Kh(t,r,e))return null;for(var n=null,i=t.getChildren(),o=i.length,a=o-1;a>=0;a--){var l=i[a];if(l.isGroup())n=Qv(l,r,e);else if(Kh(l,r,e)){var s=l,u=jv(l,r,e),f=u[0],h=u[1];s.isInShape(f,h)&&(n=l)}if(n)break}return n}var Zh=function(t){H(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.renderer="canvas",e.autoDraw=!0,e.localRefresh=!0,e.refreshElements=[],e.clipView=!0,e.quickHit=!1,e},r.prototype.onCanvasChange=function(e){(e==="attr"||e==="sort"||e==="changeSize")&&(this.set("refreshElements",[this]),this.draw())},r.prototype.getShapeBase=function(){return Qs},r.prototype.getGroupBase=function(){return hr},r.prototype.getPixelRatio=function(){var e=this.get("pixelRatio")||Tm();return e>=1?Math.ceil(e):1},r.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},r.prototype.createDom=function(){var e=document.createElement("canvas"),n=e.getContext("2d");return this.set("context",n),e},r.prototype.setDOMSize=function(e,n){t.prototype.setDOMSize.call(this,e,n);var i=this.get("context"),o=this.get("el"),a=this.getPixelRatio();o.width=a*e,o.height=a*n,a>1&&i.scale(a,a)},r.prototype.clear=function(){t.prototype.clear.call(this),this._clearFrame();var e=this.get("context"),n=this.get("el");e.clearRect(0,0,n.width,n.height)},r.prototype.getShape=function(e,n){var i;return this.get("quickHit")?i=Qv(this,e,n):i=t.prototype.getShape.call(this,e,n,null),i},r.prototype._getRefreshRegion=function(){var e=this.get("refreshElements"),n=this.getViewRange(),i;if(e.length&&e[0]===this)i=n;else if(i=Hm(e),i){i.minX=Math.floor(i.minX),i.minY=Math.floor(i.minY),i.maxX=Math.ceil(i.maxX),i.maxY=Math.ceil(i.maxY),i.maxY+=1;var o=this.get("clipView");o&&(i=zm(i,n))}return i},r.prototype.refreshElement=function(e){var n=this.get("refreshElements");n.push(e)},r.prototype._clearFrame=function(){var e=this.get("drawFrame");e&&(LC(e),this.set("drawFrame",null),this.set("refreshElements",[]))},r.prototype.draw=function(){var e=this.get("drawFrame");this.get("autoDraw")&&e||this._startDraw()},r.prototype._drawAll=function(){var e=this.get("context"),n=this.get("el"),i=this.getChildren();e.clearRect(0,0,n.width,n.height),Vn(e,this),ns(e,i),this.set("refreshElements",[])},r.prototype._drawRegion=function(){var e=this.get("context"),n=this.get("refreshElements"),i=this.getChildren(),o=this._getRefreshRegion();o?(e.clearRect(o.minX,o.minY,o.maxX-o.minX,o.maxY-o.minY),e.save(),e.beginPath(),e.rect(o.minX,o.minY,o.maxX-o.minX,o.maxY-o.minY),e.clip(),Vn(e,this),Nm(this,i,o),ns(e,i,o),e.restore()):n.length&&Uv(n),se(n,function(a){a.get("hasChanged")&&a.set("hasChanged",!1)}),this.set("refreshElements",[])},r.prototype._startDraw=function(){var e=this,n=this.get("drawFrame");n||(n=EC(function(){e.get("localRefresh")?e._drawRegion():e._drawAll(),e.set("drawFrame",null)}),this.set("drawFrame",n))},r.prototype.skipDraw=function(){},r.prototype.removeDom=function(){var e=this.get("el");e.width=0,e.height=0,e.parentNode.removeChild(e)},r}(Yw),dt="$$value$$",re="$$extra$$",cu="$$origin$$",px="$$extra_column$$",lr="$$total$$",zo="$$multi$$",yn="$$series_number$$",Tn="$$empty_field_value$$",vu="$$empty_extra_placeholder$$",jh;(function(t){t.DATA_CELL_CLICK_EVENT="interaction:data-cell-click",t.MERGED_CELLS_CLICK_EVENT="interaction:merged-cells-click",t.CORNER_TEXT_CLICK_EVENT="interaction:corner-cell-text-click",t.ROW_COLUMN_CLICK_EVENT="interaction:row-column-click",t.ROW_TEXT_CLICK_EVENT="interaction:row-text-click",t.HOVER_EVENT="interaction:hover",t.TREND_ICON_CLICK="interaction:trend-icon-click"})(jh||(jh={}));var rt;(function(t){t.MOUSE_DOWN="mousedown",t.MOUSE_MOVE="mousemove",t.MOUSE_OUT="mouseout",t.MOUSE_LEAVE="mouseleave",t.MOUSE_UP="mouseup",t.KEY_DOWN="keydown",t.KEY_UP="keyup",t.CLICK="click",t.HOVER="hover",t.DOUBLE_CLICK="dblclick",t.CONTEXT_MENU="contextmenu"})(rt||(rt={}));var R;(function(t){t.ROW_CELL_HOVER="row-cell:hover",t.ROW_CELL_CLICK="row-cell:click",t.ROW_CELL_DOUBLE_CLICK="row-cell:double-click",t.ROW_CELL_CONTEXT_MENU="row-cell:context-menu",t.ROW_CELL_MOUSE_DOWN="row-cell:mouse-down",t.ROW_CELL_MOUSE_UP="row-cell:mouse-up",t.ROW_CELL_MOUSE_MOVE="row-cell:mouse-move",t.ROW_CELL_COLLAPSE_TREE_ROWS="row-cell:collapsed-tree-rows",t.ROW_CELL_SCROLL="row-cell:scroll",t.ROW_CELL_BRUSH_SELECTION="row-cell:brush-selection",t.COL_CELL_HOVER="col-cell:hover",t.COL_CELL_CLICK="col-cell:click",t.COL_CELL_DOUBLE_CLICK="col-cell:double-click",t.COL_CELL_CONTEXT_MENU="col-cell:context-menu",t.COL_CELL_MOUSE_DOWN="col-cell:mouse-down",t.COL_CELL_MOUSE_UP="col-cell:mouse-up",t.COL_CELL_MOUSE_MOVE="col-cell:mouse-move",t.COL_CELL_BRUSH_SELECTION="col-cell:brush-selection",t.DATA_CELL_HOVER="data-cell:hover",t.DATA_CELL_CLICK="data-cell:click",t.DATA_CELL_DOUBLE_CLICK="data-cell:double-click",t.DATA_CELL_CONTEXT_MENU="data-cell:context-menu",t.DATA_CELL_MOUSE_UP="data-cell:mouse-up",t.DATA_CELL_MOUSE_DOWN="data-cell:mouse-down",t.DATA_CELL_MOUSE_MOVE="data-cell:mouse-move",t.DATA_CELL_TREND_ICON_CLICK="data-cell:trend-icon-click",t.DATA_CELL_BRUSH_SELECTION="data-cell:brush-selection",t.DATA_CELL_SELECT_MOVE="data-cell:select-move",t.CORNER_CELL_HOVER="corner-cell:hover",t.CORNER_CELL_CLICK="corner-cell:click",t.CORNER_CELL_DOUBLE_CLICK="corner-cell:double-click",t.CORNER_CELL_CONTEXT_MENU="corner-cell:context-menu",t.CORNER_CELL_MOUSE_DOWN="corner-cell:mouse-down",t.CORNER_CELL_MOUSE_UP="corner-cell:mouse-up",t.CORNER_CELL_MOUSE_MOVE="corner-cell:mouse-move",t.MERGED_CELLS_HOVER="merged-cells:hover",t.MERGED_CELLS_CLICK="merged-cells:click",t.MERGED_CELLS_DOUBLE_CLICK="merged-cells:double-click",t.MERGED_CELLS_CONTEXT_MENU="merged-cell:context-menu",t.MERGED_CELLS_MOUSE_DOWN="merged-cells:mouse-down",t.MERGED_CELLS_MOUSE_UP="merged-cells:mouse-up",t.MERGED_CELLS_MOUSE_MOVE="merged-cells:mouse-move",t.RANGE_SORT="sort:range-sort",t.RANGE_SORTED="sort:range-sorted",t.RANGE_FILTER="filter:range-filter",t.RANGE_FILTERED="filter:range-filtered",t.LAYOUT_AFTER_HEADER_LAYOUT="layout:after-header-layout",t.LAYOUT_CELL_SCROLL="layout:cell-scroll",t.LAYOUT_PAGINATION="layout:pagination",t.LAYOUT_COLLAPSE_ROWS="layout:collapsed-rows",t.LAYOUT_AFTER_COLLAPSE_ROWS="layout:after-collapsed-rows",t.LAYOUT_AFTER_REAL_DATA_CELL_RENDER="layout:after-real-data-cell-render",t.LAYOUT_TREE_ROWS_COLLAPSE_ALL="layout:toggle-collapse-all",t.LAYOUT_COLS_EXPANDED="layout:table-col-expanded",t.LAYOUT_COLS_HIDDEN="layout:table-col-hidden",t.LAYOUT_AFTER_RENDER="layout:after-render",t.LAYOUT_BEFORE_RENDER="layout:before-render",t.LAYOUT_DESTROY="layout:destroy",t.LAYOUT_RESIZE="layout:resize",t.LAYOUT_RESIZE_SERIES_WIDTH="layout:resize-series-width",t.LAYOUT_RESIZE_ROW_WIDTH="layout:resize-row-width",t.LAYOUT_RESIZE_ROW_HEIGHT="layout:resize-row-height",t.LAYOUT_RESIZE_COL_WIDTH="layout:resize-column-width",t.LAYOUT_RESIZE_COL_HEIGHT="layout:resize-column-height",t.LAYOUT_RESIZE_TREE_WIDTH="layout:resize-tree-width",t.LAYOUT_RESIZE_MOUSE_DOWN="layout:resize:mouse-down",t.LAYOUT_RESIZE_MOUSE_MOVE="layout:resize:mouse-move",t.LAYOUT_RESIZE_MOUSE_UP="layout:resize-mouse-up",t.GLOBAL_KEYBOARD_DOWN="global:keyboard-down",t.GLOBAL_KEYBOARD_UP="global:keyboard-up",t.GLOBAL_COPIED="global:copied",t.GLOBAL_MOUSE_UP="global:mouse-up",t.GLOBAL_MOUSE_MOVE="global:mouse-move",t.GLOBAL_ACTION_ICON_CLICK="global:action-icon-click",t.GLOBAL_ACTION_ICON_HOVER="global:action-icon-hover",t.GLOBAL_ACTION_ICON_HOVER_OFF="global:action-icon-hover-off",t.GLOBAL_CONTEXT_MENU="global:context-menu",t.GLOBAL_CLICK="global:click",t.GLOBAL_DOUBLE_CLICK="global:double-click",t.GLOBAL_SELECTED="global:selected",t.GLOBAL_HOVER="global:hover",t.GLOBAL_RESET="global:reset",t.GLOBAL_LINK_FIELD_JUMP="global:link-field-jump",t.GLOBAL_SCROLL="global:scroll"})(R||(R={}));var gx=0,yx=3,Jv=3,Pi=4,Cx=5,wx=5,mx=1,xx=1,ep=2,_x="backGroundGroup",Sx="foreGroundGroup",bx="panelGroup",Tx="panelScrollGroup",Qh="mergedCellsGroup",tp="frozenRowGroup",rp="frozenColGroup",Rx="frozenTrailingRowGroup",Ex="frozenTrailingColGroup",Lx="frozenTopGroup",Ax="frozenBottomGroup",qn="rowResizeAreaGroup",np="rowFrozenResizeAreaGroup",ta="frozenSplitLine",Jh="rowIndexResizeAreaGroup",os="cornerResizeAreaGroup",ip="colResizeAreaGroup",op="colFrozenResizeAreaGroup",Mx="colScrollGroup",Ix="colFrozenGroup",Ox="colFrozenTrailingGroup",ed="gridGroup",Bx="rowScrollGroup",Dx="rowHeaderFrozenGroup",Nx="series-number-node",ap="horizontal-resize-area-",lp="root",Ke="[&]",as="-",Aa="-",td=28,rd=16,sp=16,Px=.5,bl=50,Kn;(function(t){t.Line="line",t.Bar="bar",t.Bullet="bullet"})(Kn||(Kn={}));var nd="square",zn="...",Fx="antv-s2",ra="valueRanges",pu={},up="#000000",ls="#FFFFFF",Hx={data:[],totalData:[],fields:{rows:[],columns:[],values:[],customTreeItems:[],valueInCols:!0},meta:[],sortParams:[],filterParams:[]},Cr,Be;(function(t){t.ROW="row",t.COL="col",t.TRAILING_ROW="trailingRow",t.TRAILING_COL="trailingCol",t.SCROLL="scroll",t.TOP="top",t.BOTTOM="bottom"})(Be||(Be={}));var Lt;(function(t){t.FROZEN_COL="frozenCol",t.FROZEN_ROW="frozenRow",t.FROZEN_TRAILING_COL="frozenTrailingCol",t.FROZEN_TRAILING_ROW="frozenTrailingRow"})(Lt||(Lt={}));var fp=(Cr={},Cr[Be.ROW]="frozenRowGroup",Cr[Be.COL]="frozenColGroup",Cr[Be.TRAILING_COL]="frozenTrailingColGroup",Cr[Be.TRAILING_ROW]="frozenTrailingRowGroup",Cr[Be.SCROLL]="panelScrollGroup",Cr[Be.TOP]="frozenTopGroup",Cr[Be.BOTTOM]="frozenBottomGroup",Cr),tt;(function(t){t.CORNER_CELL_CLICK="cornerCellClick",t.DATA_CELL_CLICK="dataCellClick",t.MERGED_CELLS_CLICK="mergedCellsClick",t.ROW_COLUMN_CLICK="rowColumnClick",t.ROW_TEXT_CLICK="rowTextClick",t.HOVER="hover",t.BRUSH_SELECTION="brushSelection",t.ROW_BRUSH_SELECTION="rowBrushSelection",t.COL_BRUSH_SELECTION="colBrushSelection",t.COL_ROW_RESIZE="rowColResize",t.DATA_CELL_MULTI_SELECTION="dataCellMultiSelection",t.RANGE_SELECTION="rangeSelection",t.SELECTED_CELL_MOVE="selectedCellMove"})(tt||(tt={}));var G;(function(t){t.ALL_SELECTED="allSelected",t.SELECTED="selected",t.BRUSH_SELECTED="brushSelected",t.UNSELECTED="unselected",t.HOVER="hover",t.HOVER_FOCUS="hoverFocus",t.HIGHLIGHT="highlight",t.SEARCH_RESULT="searchResult",t.PREPARE_SELECT="prepareSelect"})(G||(G={}));var N;(function(t){t.DATA_CELL="dataCell",t.HEADER_CELL="headerCell",t.ROW_CELL="rowCell",t.COL_CELL="colCell",t.CORNER_CELL="cornerCell",t.MERGED_CELL="mergedCell"})(N||(N={}));var ss=800,wt={textOpacity:"fillOpacity",backgroundOpacity:"fillOpacity",backgroundColor:"fill",borderOpacity:"strokeOpacity",borderColor:"stroke",borderWidth:"lineWidth",opacity:"opacity"},zx={textShape:["textOpacity"],textShapes:["textOpacity"],linkFieldShape:["opacity"],interactiveBgShape:["backgroundColor","backgroundOpacity"],interactiveBorderShape:["borderColor","borderOpacity","borderWidth"]},us="interactionStateInfo",qe;(function(t){t.CLICK="click",t.UN_DRAGGED="unDragged",t.DRAGGED="dragged"})(qe||(qe={}));var Ze;(function(t){t.SHIFT="Shift",t.COPY="c",t.ESC="Escape",t.META="Meta",t.CONTROL="Control",t.ARROW_UP="ArrowUp",t.ARROW_DOWN="ArrowDown",t.ARROW_LEFT="ArrowLeft",t.ARROW_RIGHT="ArrowRight"})(Ze||(Ze={}));var id;(function(t){t.ASC="ASC",t.DESC="DESC"})(id||(id={}));var Q;(function(t){t.HOVER="hover",t.CLICK="click",t.BRUSH_SELECTION="brushSelection",t.ROW_BRUSH_SELECTION="rowBrushSelection",t.COL_BRUSH_SELECTION="colBrushSelection",t.MULTI_SELECTION="multiSelection",t.RESIZE="resize"})(Q||(Q={}));var od={x:{value:0,scroll:!1},y:{value:0,scroll:!1}},na;(function(t){t.CONTENT="content",t.CANVAS="canvas"})(na||(na={}));var ze;(function(t){t.SCROLL_UP="scrollUp",t.SCROLL_DOWN="scrollDown"})(ze||(ze={}));var ia;(function(t){t[t.SCROLL_UP=-1]="SCROLL_UP",t[t.SCROLL_DOWN=1]="SCROLL_DOWN"})(ia||(ia={}));var Wx="RESIZE_START_GUIDE_LINE",kx="RESIZE_END_GUIDE_LINE",Gx="RESIZE_MASK",Mt;(function(t){t.Horizontal="col",t.Vertical="row"})(Mt||(Mt={}));var nt;(function(t){t.Field="field",t.Cell="cell",t.Tree="tree",t.Series="series"})(nt||(nt={}));var oa;(function(t){t.ALL="all",t.CURRENT="current"})(oa||(oa={}));var hp=1,Cn;(function(t){t.Adaptive="adaptive",t.ColAdaptive="colAdaptive",t.Compact="compact"})(Cn||(Cn={}));var ad=120,$x={layoutWidthType:Cn.Adaptive,showTreeLeafNodeAlignDot:!1,collapsedRows:{},collapsedCols:{},cellCfg:{width:96,height:30},rowCfg:{width:null,widthByField:{},heightByField:{}},colCfg:{height:30,widthByFieldValue:{},heightByField:{}},device:"pc"},Yx={width:600,height:480,debug:!1,hierarchyType:"grid",conditions:{},totals:{},tooltip:{showTooltip:!1,autoAdjustBoundary:"body",operation:{hiddenColumns:!1,trend:!1,sort:!1,menus:[]}},interaction:{linkFields:[],hiddenColumnFields:[],selectedCellsSpotlight:!1,hoverHighlight:!0,hoverFocus:{duration:ss},scrollSpeedRatio:{horizontal:1,vertical:1},autoResetSheetStyle:!0,brushSelection:{data:!0,row:!1,col:!1},multiSelection:!0,rangeSelection:!0,scrollbarPosition:na.CONTENT,resize:{rowCellVertical:!0,cornerCellHorizontal:!0,colCellHorizontal:!0,colCellVertical:!0,rowResizeType:oa.ALL},eventListenerOptions:!1,selectedCellHighlight:!1,overscrollBehavior:"auto"},showSeriesNumber:!1,customSVGIcons:[],showDefaultHeaderActionIcon:!1,headerActionIcons:[],style:$x,frozenRowHeader:!0,frozenRowCount:0,frozenColCount:0,frozenTrailingRowCount:0,frozenTrailingColCount:0,hdAdapter:!0,cornerText:"",cornerExtraFieldText:"",placeholder:Aa,supportCSSTransform:!1,devicePixelRatio:window.devicePixelRatio},Ux=typeof global=="object"&&global&&global.Object===Object&&global,dp=Ux,Xx=typeof self=="object"&&self&&self.Object===Object&&self,Vx=dp||Xx||Function("return this")(),ke=Vx,qx=ke.Symbol,Qe=qx,cp=Object.prototype,Kx=cp.hasOwnProperty,Zx=cp.toString,yi=Qe?Qe.toStringTag:void 0;function jx(t){var r=Kx.call(t,yi),e=t[yi];try{t[yi]=void 0;var n=!0}catch{}var i=Zx.call(t);return n&&(r?t[yi]=e:delete t[yi]),i}var Qx=Object.prototype,Jx=Qx.toString;function e_(t){return Jx.call(t)}var t_="[object Null]",r_="[object Undefined]",ld=Qe?Qe.toStringTag:void 0;function lt(t){return t==null?t===void 0?r_:t_:ld&&ld in Object(t)?jx(t):e_(t)}function Le(t){return t!=null&&typeof t=="object"}var n_="[object Symbol]";function St(t){return typeof t=="symbol"||Le(t)&&lt(t)==n_}var i_=NaN;function sd(t){return typeof t=="number"?t:St(t)?i_:+t}function Te(t,r){for(var e=-1,n=t==null?0:t.length,i=Array(n);++e<n;)i[e]=r(t[e],e,t);return i}var o_=Array.isArray,X=o_,ud=Qe?Qe.prototype:void 0,fd=ud?ud.toString:void 0;function bt(t){if(typeof t=="string")return t;if(X(t))return Te(t,bt)+"";if(St(t))return fd?fd.call(t):"";var r=t+"";return r=="0"&&1/t==-1/0?"-0":r}function Ma(t,r){return function(e,n){var i;if(e===void 0&&n===void 0)return r;if(e!==void 0&&(i=e),n!==void 0){if(i===void 0)return n;typeof e=="string"||typeof n=="string"?(e=bt(e),n=bt(n)):(e=sd(e),n=sd(n)),i=t(e,n)}return i}}var a_=Ma(function(t,r){return t+r},0),l_=a_,s_=/\s/;function vp(t){for(var r=t.length;r--&&s_.test(t.charAt(r)););return r}var u_=/^\s+/;function pp(t){return t&&t.slice(0,vp(t)+1).replace(u_,"")}function pe(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}var hd=NaN,f_=/^[-+]0x[0-9a-f]+$/i,h_=/^0b[01]+$/i,d_=/^0o[0-7]+$/i,c_=parseInt;function xt(t){if(typeof t=="number")return t;if(St(t))return hd;if(pe(t)){var r=typeof t.valueOf=="function"?t.valueOf():t;t=pe(r)?r+"":r}if(typeof t!="string")return t===0?t:+t;t=pp(t);var e=h_.test(t);return e||d_.test(t)?c_(t.slice(2),e?2:8):f_.test(t)?hd:+t}var v_=1/0,p_=17976931348623157e292;function Sr(t){if(!t)return t===0?t:0;if(t=xt(t),t===v_||t===-1/0){var r=t<0?-1:1;return r*p_}return t===t?t:0}function ne(t){var r=Sr(t),e=r%1;return r===r?e?r-e:r:0}var g_="Expected a function";function y_(t,r){if(typeof r!="function")throw new TypeError(g_);return t=ne(t),function(){if(--t<1)return r.apply(this,arguments)}}function st(t){return t}var C_="[object AsyncFunction]",w_="[object Function]",m_="[object GeneratorFunction]",x_="[object Proxy]";function Xe(t){if(!pe(t))return!1;var r=lt(t);return r==w_||r==m_||r==C_||r==x_}var __=ke["__core-js_shared__"],Wo=__,dd=function(){var t=/[^.]+$/.exec(Wo&&Wo.keys&&Wo.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function S_(t){return!!dd&&dd in t}var b_=Function.prototype,T_=b_.toString;function Rn(t){if(t!=null){try{return T_.call(t)}catch{}try{return t+""}catch{}}return""}var R_=/[\\^$.*+?()[\]{}|]/g,E_=/^\[object .+?Constructor\]$/,L_=Function.prototype,A_=Object.prototype,M_=L_.toString,I_=A_.hasOwnProperty,O_=RegExp("^"+M_.call(I_).replace(R_,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function gp(t){if(!pe(t)||S_(t))return!1;var r=Xe(t)?O_:E_;return r.test(Rn(t))}function B_(t,r){return t==null?void 0:t[r]}function En(t,r){var e=B_(t,r);return gp(e)?e:void 0}var D_=En(ke,"WeakMap"),Fi=D_,N_=Fi&&new Fi,aa=N_,P_=aa?function(t,r){return aa.set(t,r),t}:st,yp=P_,cd=Object.create,F_=function(){function t(){}return function(r){if(!pe(r))return{};if(cd)return cd(r);t.prototype=r;var e=new t;return t.prototype=void 0,e}}(),ni=F_;function Hi(t){return function(){var r=arguments;switch(r.length){case 0:return new t;case 1:return new t(r[0]);case 2:return new t(r[0],r[1]);case 3:return new t(r[0],r[1],r[2]);case 4:return new t(r[0],r[1],r[2],r[3]);case 5:return new t(r[0],r[1],r[2],r[3],r[4]);case 6:return new t(r[0],r[1],r[2],r[3],r[4],r[5]);case 7:return new t(r[0],r[1],r[2],r[3],r[4],r[5],r[6])}var e=ni(t.prototype),n=t.apply(e,r);return pe(n)?n:e}}var H_=1;function z_(t,r,e){var n=r&H_,i=Hi(t);function o(){var a=this&&this!==ke&&this instanceof o?i:t;return a.apply(n?e:this,arguments)}return o}function Tt(t,r,e){switch(e.length){case 0:return t.call(r);case 1:return t.call(r,e[0]);case 2:return t.call(r,e[0],e[1]);case 3:return t.call(r,e[0],e[1],e[2])}return t.apply(r,e)}var W_=Math.max;function Cp(t,r,e,n){for(var i=-1,o=t.length,a=e.length,l=-1,s=r.length,u=W_(o-a,0),f=Array(s+u),h=!n;++l<s;)f[l]=r[l];for(;++i<a;)(h||i<o)&&(f[e[i]]=t[i]);for(;u--;)f[l++]=t[i++];return f}var k_=Math.max;function wp(t,r,e,n){for(var i=-1,o=t.length,a=-1,l=e.length,s=-1,u=r.length,f=k_(o-l,0),h=Array(f+u),d=!n;++i<f;)h[i]=t[i];for(var c=i;++s<u;)h[c+s]=r[s];for(;++a<l;)(d||i<o)&&(h[c+e[a]]=t[i++]);return h}function G_(t,r){for(var e=t.length,n=0;e--;)t[e]===r&&++n;return n}function Ia(){}var $_=4294967295;function ae(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=$_,this.__views__=[]}ae.prototype=ni(Ia.prototype);ae.prototype.constructor=ae;function Oa(){}var Y_=aa?function(t){return aa.get(t)}:Oa,gu=Y_,U_={},Wn=U_,X_=Object.prototype,V_=X_.hasOwnProperty;function ko(t){for(var r=t.name+"",e=Wn[r],n=V_.call(Wn,r)?e.length:0;n--;){var i=e[n],o=i.func;if(o==null||o==t)return i.name}return r}function Dt(t,r){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!r,this.__index__=0,this.__values__=void 0}Dt.prototype=ni(Ia.prototype);Dt.prototype.constructor=Dt;function ct(t,r){var e=-1,n=t.length;for(r||(r=Array(n));++e<n;)r[e]=t[e];return r}function mp(t){if(t instanceof ae)return t.clone();var r=new Dt(t.__wrapped__,t.__chain__);return r.__actions__=ct(t.__actions__),r.__index__=t.__index__,r.__values__=t.__values__,r}var q_=Object.prototype,K_=q_.hasOwnProperty;function x(t){if(Le(t)&&!X(t)&&!(t instanceof ae)){if(t instanceof Dt)return t;if(K_.call(t,"__wrapped__"))return mp(t)}return new Dt(t)}x.prototype=Ia.prototype;x.prototype.constructor=x;function fs(t){var r=ko(t),e=x[r];if(typeof e!="function"||!(r in ae.prototype))return!1;if(t===e)return!0;var n=gu(e);return!!n&&t===n[0]}var Z_=800,j_=16,Q_=Date.now;function xp(t){var r=0,e=0;return function(){var n=Q_(),i=j_-(n-e);if(e=n,i>0){if(++r>=Z_)return arguments[0]}else r=0;return t.apply(void 0,arguments)}}var J_=xp(yp),_p=J_,eS=/\{\n\/\* \[wrapped with (.+)\] \*/,tS=/,? & /;function rS(t){var r=t.match(eS);return r?r[1].split(tS):[]}var nS=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function iS(t,r){var e=r.length;if(!e)return t;var n=e-1;return r[n]=(e>1?"& ":"")+r[n],r=r.join(e>2?", ":" "),t.replace(nS,`{
/* [wrapped with `+r+`] */
`)}function kn(t){return function(){return t}}var oS=function(){try{var t=En(Object,"defineProperty");return t({},"",{}),t}catch{}}(),la=oS,aS=la?function(t,r){return la(t,"toString",{configurable:!0,enumerable:!1,value:kn(r),writable:!0})}:st,lS=aS,sS=xp(lS),yu=sS;function Ft(t,r){for(var e=-1,n=t==null?0:t.length;++e<n&&r(t[e],e,t)!==!1;);return t}function Ba(t,r,e,n){for(var i=t.length,o=e+(n?1:-1);n?o--:++o<i;)if(r(t[o],o,t))return o;return-1}function Sp(t){return t!==t}function uS(t,r,e){for(var n=e-1,i=t.length;++n<i;)if(t[n]===r)return n;return-1}function ii(t,r,e){return r===r?uS(t,r,e):Ba(t,Sp,e)}function Da(t,r){var e=t==null?0:t.length;return!!e&&ii(t,r,0)>-1}var fS=1,hS=2,dS=8,cS=16,vS=32,pS=64,gS=128,yS=256,CS=512,wS=[["ary",gS],["bind",fS],["bindKey",hS],["curry",dS],["curryRight",cS],["flip",CS],["partial",vS],["partialRight",pS],["rearg",yS]];function mS(t,r){return Ft(wS,function(e){var n="_."+e[0];r&e[1]&&!Da(t,n)&&t.push(n)}),t.sort()}function bp(t,r,e){var n=r+"";return yu(t,iS(n,mS(rS(n),e)))}var xS=4,_S=8,vd=32,pd=64;function Tp(t,r,e,n,i,o,a,l,s,u){var f=r&_S,h=f?a:void 0,d=f?void 0:a,c=f?o:void 0,v=f?void 0:o;r|=f?vd:pd,r&=~(f?pd:vd),r&xS||(r&=-4);var p=[t,r,i,c,h,v,d,l,s,u],g=e.apply(void 0,p);return fs(t)&&_p(g,p),g.placeholder=n,bp(g,t,r)}function oi(t){var r=t;return r.placeholder}var SS=9007199254740991,bS=/^(?:0|[1-9]\d*)$/;function br(t,r){var e=typeof t;return r=r??SS,!!r&&(e=="number"||e!="symbol"&&bS.test(t))&&t>-1&&t%1==0&&t<r}var TS=Math.min;function RS(t,r){for(var e=t.length,n=TS(r.length,e),i=ct(t);n--;){var o=r[n];t[n]=br(o,e)?i[o]:void 0}return t}var gd="__lodash_placeholder__";function $r(t,r){for(var e=-1,n=t.length,i=0,o=[];++e<n;){var a=t[e];(a===r||a===gd)&&(t[e]=gd,o[i++]=e)}return o}var ES=1,LS=2,AS=8,MS=16,IS=128,OS=512;function Na(t,r,e,n,i,o,a,l,s,u){var f=r&IS,h=r&ES,d=r&LS,c=r&(AS|MS),v=r&OS,p=d?void 0:Hi(t);function g(){for(var y=arguments.length,C=Array(y),w=y;w--;)C[w]=arguments[w];if(c)var m=oi(g),_=G_(C,m);if(n&&(C=Cp(C,n,i,c)),o&&(C=wp(C,o,a,c)),y-=_,c&&y<u){var b=$r(C,m);return Tp(t,r,Na,g.placeholder,e,C,b,l,s,u-y)}var T=h?e:this,E=d?T[t]:t;return y=C.length,l?C=RS(C,l):v&&y>1&&C.reverse(),f&&s<y&&(C.length=s),this&&this!==ke&&this instanceof g&&(E=p||Hi(E)),E.apply(T,C)}return g}function BS(t,r,e){var n=Hi(t);function i(){for(var o=arguments.length,a=Array(o),l=o,s=oi(i);l--;)a[l]=arguments[l];var u=o<3&&a[0]!==s&&a[o-1]!==s?[]:$r(a,s);if(o-=u.length,o<e)return Tp(t,r,Na,i.placeholder,void 0,a,u,void 0,void 0,e-o);var f=this&&this!==ke&&this instanceof i?n:t;return Tt(f,this,a)}return i}var DS=1;function NS(t,r,e,n){var i=r&DS,o=Hi(t);function a(){for(var l=-1,s=arguments.length,u=-1,f=n.length,h=Array(f+s),d=this&&this!==ke&&this instanceof a?o:t;++u<f;)h[u]=n[u];for(;s--;)h[u++]=arguments[++l];return Tt(d,i?e:this,h)}return a}var yd="__lodash_placeholder__",Tl=1,PS=2,FS=4,Cd=8,Ci=128,wd=256,HS=Math.min;function zS(t,r){var e=t[1],n=r[1],i=e|n,o=i<(Tl|PS|Ci),a=n==Ci&&e==Cd||n==Ci&&e==wd&&t[7].length<=r[8]||n==(Ci|wd)&&r[7].length<=r[8]&&e==Cd;if(!(o||a))return t;n&Tl&&(t[2]=r[2],i|=e&Tl?0:FS);var l=r[3];if(l){var s=t[3];t[3]=s?Cp(s,l,r[4]):l,t[4]=s?$r(t[3],yd):r[4]}return l=r[5],l&&(s=t[5],t[5]=s?wp(s,l,r[6]):l,t[6]=s?$r(t[5],yd):r[6]),l=r[7],l&&(t[7]=l),n&Ci&&(t[8]=t[8]==null?r[8]:HS(t[8],r[8])),t[9]==null&&(t[9]=r[9]),t[0]=r[0],t[1]=i,t}var WS="Expected a function",md=1,kS=2,xd=8,_d=16,Sd=32,GS=64,bd=Math.max;function Tr(t,r,e,n,i,o,a,l){var s=r&kS;if(!s&&typeof t!="function")throw new TypeError(WS);var u=n?n.length:0;if(u||(r&=-97,n=i=void 0),a=a===void 0?a:bd(ne(a),0),l=l===void 0?l:ne(l),u-=i?i.length:0,r&GS){var f=n,h=i;n=i=void 0}var d=s?void 0:gu(t),c=[t,r,e,n,i,f,h,o,a,l];if(d&&zS(c,d),t=c[0],r=c[1],e=c[2],n=c[3],i=c[4],l=c[9]=c[9]===void 0?s?0:t.length:bd(c[9]-u,0),!l&&r&(xd|_d)&&(r&=-25),!r||r==md)var v=z_(t,r,e);else r==xd||r==_d?v=BS(t,r,l):(r==Sd||r==(md|Sd))&&!i.length?v=NS(t,r,e,n):v=Na.apply(void 0,c);var p=d?yp:_p;return bp(p(v,c),t,r)}var $S=128;function Rp(t,r,e){return r=e?void 0:r,r=t&&r==null?t.length:r,Tr(t,$S,void 0,void 0,void 0,void 0,r)}function Rr(t,r,e){r=="__proto__"&&la?la(t,r,{configurable:!0,enumerable:!0,value:e,writable:!0}):t[r]=e}function jt(t,r){return t===r||t!==t&&r!==r}var YS=Object.prototype,US=YS.hasOwnProperty;function ro(t,r,e){var n=t[r];(!(US.call(t,r)&&jt(n,e))||e===void 0&&!(r in t))&&Rr(t,r,e)}function dr(t,r,e,n){var i=!e;e||(e={});for(var o=-1,a=r.length;++o<a;){var l=r[o],s=n?n(e[l],t[l],l,e,t):void 0;s===void 0&&(s=t[l]),i?Rr(e,l,s):ro(e,l,s)}return e}var Td=Math.max;function Ep(t,r,e){return r=Td(r===void 0?t.length-1:r,0),function(){for(var n=arguments,i=-1,o=Td(n.length-r,0),a=Array(o);++i<o;)a[i]=n[r+i];i=-1;for(var l=Array(r+1);++i<r;)l[i]=n[i];return l[r]=e(a),Tt(t,this,l)}}function ie(t,r){return yu(Ep(t,r,st),t+"")}var XS=9007199254740991;function Pa(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=XS}function gt(t){return t!=null&&Pa(t.length)&&!Xe(t)}function at(t,r,e){if(!pe(e))return!1;var n=typeof r;return(n=="number"?gt(e)&&br(r,e.length):n=="string"&&r in e)?jt(e[r],t):!1}function ai(t){return ie(function(r,e){var n=-1,i=e.length,o=i>1?e[i-1]:void 0,a=i>2?e[2]:void 0;for(o=t.length>3&&typeof o=="function"?(i--,o):void 0,a&&at(e[0],e[1],a)&&(o=i<3?void 0:o,i=1),r=Object(r);++n<i;){var l=e[n];l&&t(r,l,n,o)}return r})}var VS=Object.prototype;function no(t){var r=t&&t.constructor,e=typeof r=="function"&&r.prototype||VS;return t===e}function Cu(t,r){for(var e=-1,n=Array(t);++e<t;)n[e]=r(e);return n}var qS="[object Arguments]";function Rd(t){return Le(t)&&lt(t)==qS}var Lp=Object.prototype,KS=Lp.hasOwnProperty,ZS=Lp.propertyIsEnumerable,jS=Rd(function(){return arguments}())?Rd:function(t){return Le(t)&&KS.call(t,"callee")&&!ZS.call(t,"callee")},wn=jS;function wu(){return!1}var Ap=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Ed=Ap&&typeof module=="object"&&module&&!module.nodeType&&module,QS=Ed&&Ed.exports===Ap,Ld=QS?ke.Buffer:void 0,JS=Ld?Ld.isBuffer:void 0,eb=JS||wu,Yr=eb,tb="[object Arguments]",rb="[object Array]",nb="[object Boolean]",ib="[object Date]",ob="[object Error]",ab="[object Function]",lb="[object Map]",sb="[object Number]",ub="[object Object]",fb="[object RegExp]",hb="[object Set]",db="[object String]",cb="[object WeakMap]",vb="[object ArrayBuffer]",pb="[object DataView]",gb="[object Float32Array]",yb="[object Float64Array]",Cb="[object Int8Array]",wb="[object Int16Array]",mb="[object Int32Array]",xb="[object Uint8Array]",_b="[object Uint8ClampedArray]",Sb="[object Uint16Array]",bb="[object Uint32Array]",Se={};Se[gb]=Se[yb]=Se[Cb]=Se[wb]=Se[mb]=Se[xb]=Se[_b]=Se[Sb]=Se[bb]=!0;Se[tb]=Se[rb]=Se[vb]=Se[nb]=Se[pb]=Se[ib]=Se[ob]=Se[ab]=Se[lb]=Se[sb]=Se[ub]=Se[fb]=Se[hb]=Se[db]=Se[cb]=!1;function Tb(t){return Le(t)&&Pa(t.length)&&!!Se[lt(t)]}function Rt(t){return function(r){return t(r)}}var Mp=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Ei=Mp&&typeof module=="object"&&module&&!module.nodeType&&module,Rb=Ei&&Ei.exports===Mp,Rl=Rb&&dp.process,Eb=function(){try{var t=Ei&&Ei.require&&Ei.require("util").types;return t||Rl&&Rl.binding&&Rl.binding("util")}catch{}}(),Nt=Eb,Ad=Nt&&Nt.isTypedArray,Lb=Ad?Rt(Ad):Tb,li=Lb,Ab=Object.prototype,Mb=Ab.hasOwnProperty;function Ip(t,r){var e=X(t),n=!e&&wn(t),i=!e&&!n&&Yr(t),o=!e&&!n&&!i&&li(t),a=e||n||i||o,l=a?Cu(t.length,String):[],s=l.length;for(var u in t)(r||Mb.call(t,u))&&!(a&&(u=="length"||i&&(u=="offset"||u=="parent")||o&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||br(u,s)))&&l.push(u);return l}function Op(t,r){return function(e){return t(r(e))}}var Ib=Op(Object.keys,Object),Ob=Ib,Bb=Object.prototype,Db=Bb.hasOwnProperty;function mu(t){if(!no(t))return Ob(t);var r=[];for(var e in Object(t))Db.call(t,e)&&e!="constructor"&&r.push(e);return r}function Ae(t){return gt(t)?Ip(t):mu(t)}var Nb=Object.prototype,Pb=Nb.hasOwnProperty,Fb=ai(function(t,r){if(no(r)||gt(r)){dr(r,Ae(r),t);return}for(var e in r)Pb.call(r,e)&&ro(t,e,r[e])}),Bp=Fb;function Hb(t){var r=[];if(t!=null)for(var e in Object(t))r.push(e);return r}var zb=Object.prototype,Wb=zb.hasOwnProperty;function kb(t){if(!pe(t))return Hb(t);var r=no(t),e=[];for(var n in t)n=="constructor"&&(r||!Wb.call(t,n))||e.push(n);return e}function yt(t){return gt(t)?Ip(t,!0):kb(t)}var Gb=ai(function(t,r){dr(r,yt(r),t)}),$b=Gb,Yb=ai(function(t,r,e,n){dr(r,yt(r),t,n)}),hs=Yb,Ub=ai(function(t,r,e,n){dr(r,Ae(r),t,n)}),Xb=Ub,Vb=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,qb=/^\w*$/;function xu(t,r){if(X(t))return!1;var e=typeof t;return e=="number"||e=="symbol"||e=="boolean"||t==null||St(t)?!0:qb.test(t)||!Vb.test(t)||r!=null&&t in Object(r)}var Kb=En(Object,"create"),zi=Kb;function Zb(){this.__data__=zi?zi(null):{},this.size=0}function jb(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}var Qb="__lodash_hash_undefined__",Jb=Object.prototype,eT=Jb.hasOwnProperty;function tT(t){var r=this.__data__;if(zi){var e=r[t];return e===Qb?void 0:e}return eT.call(r,t)?r[t]:void 0}var rT=Object.prototype,nT=rT.hasOwnProperty;function iT(t){var r=this.__data__;return zi?r[t]!==void 0:nT.call(r,t)}var oT="__lodash_hash_undefined__";function aT(t,r){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=zi&&r===void 0?oT:r,this}function mn(t){var r=-1,e=t==null?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}mn.prototype.clear=Zb;mn.prototype.delete=jb;mn.prototype.get=tT;mn.prototype.has=iT;mn.prototype.set=aT;function lT(){this.__data__=[],this.size=0}function Fa(t,r){for(var e=t.length;e--;)if(jt(t[e][0],r))return e;return-1}var sT=Array.prototype,uT=sT.splice;function fT(t){var r=this.__data__,e=Fa(r,t);if(e<0)return!1;var n=r.length-1;return e==n?r.pop():uT.call(r,e,1),--this.size,!0}function hT(t){var r=this.__data__,e=Fa(r,t);return e<0?void 0:r[e][1]}function dT(t){return Fa(this.__data__,t)>-1}function cT(t,r){var e=this.__data__,n=Fa(e,t);return n<0?(++this.size,e.push([t,r])):e[n][1]=r,this}function Er(t){var r=-1,e=t==null?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}Er.prototype.clear=lT;Er.prototype.delete=fT;Er.prototype.get=hT;Er.prototype.has=dT;Er.prototype.set=cT;var vT=En(ke,"Map"),Wi=vT;function pT(){this.size=0,this.__data__={hash:new mn,map:new(Wi||Er),string:new mn}}function gT(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}function Ha(t,r){var e=t.__data__;return gT(r)?e[typeof r=="string"?"string":"hash"]:e.map}function yT(t){var r=Ha(this,t).delete(t);return this.size-=r?1:0,r}function CT(t){return Ha(this,t).get(t)}function wT(t){return Ha(this,t).has(t)}function mT(t,r){var e=Ha(this,t),n=e.size;return e.set(t,r),this.size+=e.size==n?0:1,this}function Lr(t){var r=-1,e=t==null?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}Lr.prototype.clear=pT;Lr.prototype.delete=yT;Lr.prototype.get=CT;Lr.prototype.has=wT;Lr.prototype.set=mT;var xT="Expected a function";function Ln(t,r){if(typeof t!="function"||r!=null&&typeof r!="function")throw new TypeError(xT);var e=function(){var n=arguments,i=r?r.apply(this,n):n[0],o=e.cache;if(o.has(i))return o.get(i);var a=t.apply(this,n);return e.cache=o.set(i,a)||o,a};return e.cache=new(Ln.Cache||Lr),e}Ln.Cache=Lr;var _T=500;function ST(t){var r=Ln(t,function(n){return e.size===_T&&e.clear(),n}),e=r.cache;return r}var bT=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,TT=/\\(\\)?/g,RT=ST(function(t){var r=[];return t.charCodeAt(0)===46&&r.push(""),t.replace(bT,function(e,n,i,o){r.push(i?o.replace(TT,"$1"):n||e)}),r}),Dp=RT;function de(t){return t==null?"":bt(t)}function Vr(t,r){return X(t)?t:xu(t,r)?[t]:Dp(de(t))}function cr(t){if(typeof t=="string"||St(t))return t;var r=t+"";return r=="0"&&1/t==-1/0?"-0":r}function An(t,r){r=Vr(r,t);for(var e=0,n=r.length;t!=null&&e<n;)t=t[cr(r[e++])];return e&&e==n?t:void 0}function K(t,r,e){var n=t==null?void 0:An(t,r);return n===void 0?e:n}function _u(t,r){for(var e=-1,n=r.length,i=Array(n),o=t==null;++e<n;)i[e]=o?void 0:K(t,r[e]);return i}function qr(t,r){for(var e=-1,n=r.length,i=t.length;++e<n;)t[i+e]=r[e];return t}var Md=Qe?Qe.isConcatSpreadable:void 0;function ET(t){return X(t)||wn(t)||!!(Md&&t&&t[Md])}function Ve(t,r,e,n,i){var o=-1,a=t.length;for(e||(e=ET),i||(i=[]);++o<a;){var l=t[o];r>0&&e(l)?r>1?Ve(l,r-1,e,n,i):qr(i,l):n||(i[i.length]=l)}return i}function Np(t){var r=t==null?0:t.length;return r?Ve(t,1):[]}function Ar(t){return yu(Ep(t,void 0,Np),t+"")}var LT=Ar(_u),AT=LT,MT=Op(Object.getPrototypeOf,Object),za=MT,IT="[object Object]",OT=Function.prototype,BT=Object.prototype,Pp=OT.toString,DT=BT.hasOwnProperty,NT=Pp.call(Object);function io(t){if(!Le(t)||lt(t)!=IT)return!1;var r=za(t);if(r===null)return!0;var e=DT.call(r,"constructor")&&r.constructor;return typeof e=="function"&&e instanceof e&&Pp.call(e)==NT}var PT="[object DOMException]",FT="[object Error]";function Su(t){if(!Le(t))return!1;var r=lt(t);return r==FT||r==PT||typeof t.message=="string"&&typeof t.name=="string"&&!io(t)}var HT=ie(function(t,r){try{return Tt(t,void 0,r)}catch(e){return Su(e)?e:new Error(e)}}),Fp=HT,zT="Expected a function";function Hp(t,r){var e;if(typeof r!="function")throw new TypeError(zT);return t=ne(t),function(){return--t>0&&(e=r.apply(this,arguments)),t<=1&&(r=void 0),e}}var WT=1,kT=32,bu=ie(function(t,r,e){var n=WT;if(e.length){var i=$r(e,oi(bu));n|=kT}return Tr(t,n,r,e,i)});bu.placeholder={};var zp=bu,GT=Ar(function(t,r){return Ft(r,function(e){e=cr(e),Rr(t,e,zp(t[e],t))}),t}),$T=GT,YT=1,UT=2,XT=32,Tu=ie(function(t,r,e){var n=YT|UT;if(e.length){var i=$r(e,oi(Tu));n|=XT}return Tr(r,n,t,e,i)});Tu.placeholder={};var VT=Tu;function Pt(t,r,e){var n=-1,i=t.length;r<0&&(r=-r>i?0:i+r),e=e>i?i:e,e<0&&(e+=i),i=r>e?0:e-r>>>0,r>>>=0;for(var o=Array(i);++n<i;)o[n]=t[n+r];return o}function Kr(t,r,e){var n=t.length;return e=e===void 0?n:e,!r&&e>=n?t:Pt(t,r,e)}var qT="\\ud800-\\udfff",KT="\\u0300-\\u036f",ZT="\\ufe20-\\ufe2f",jT="\\u20d0-\\u20ff",QT=KT+ZT+jT,JT="\\ufe0e\\ufe0f",e2="\\u200d",t2=RegExp("["+e2+qT+QT+JT+"]");function si(t){return t2.test(t)}function r2(t){return t.split("")}var Wp="\\ud800-\\udfff",n2="\\u0300-\\u036f",i2="\\ufe20-\\ufe2f",o2="\\u20d0-\\u20ff",a2=n2+i2+o2,l2="\\ufe0e\\ufe0f",s2="["+Wp+"]",ds="["+a2+"]",cs="\\ud83c[\\udffb-\\udfff]",u2="(?:"+ds+"|"+cs+")",kp="[^"+Wp+"]",Gp="(?:\\ud83c[\\udde6-\\uddff]){2}",$p="[\\ud800-\\udbff][\\udc00-\\udfff]",f2="\\u200d",Yp=u2+"?",Up="["+l2+"]?",h2="(?:"+f2+"(?:"+[kp,Gp,$p].join("|")+")"+Up+Yp+")*",d2=Up+Yp+h2,c2="(?:"+[kp+ds+"?",ds,Gp,$p,s2].join("|")+")",v2=RegExp(cs+"(?="+cs+")|"+c2+d2,"g");function p2(t){return t.match(v2)||[]}function qt(t){return si(t)?p2(t):r2(t)}function Xp(t){return function(r){r=de(r);var e=si(r)?qt(r):void 0,n=e?e[0]:r.charAt(0),i=e?Kr(e,1).join(""):r.slice(1);return n[t]()+i}}var g2=Xp("toUpperCase"),Ru=g2;function Vp(t){return Ru(de(t).toLowerCase())}function Eu(t,r,e,n){var i=-1,o=t==null?0:t.length;for(n&&o&&(e=t[++i]);++i<o;)e=r(e,t[i],i,t);return e}function Lu(t){return function(r){return t==null?void 0:t[r]}}var y2={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},C2=Lu(y2),w2=C2,m2=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,x2="\\u0300-\\u036f",_2="\\ufe20-\\ufe2f",S2="\\u20d0-\\u20ff",b2=x2+_2+S2,T2="["+b2+"]",R2=RegExp(T2,"g");function qp(t){return t=de(t),t&&t.replace(m2,w2).replace(R2,"")}var E2=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function L2(t){return t.match(E2)||[]}var A2=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function M2(t){return A2.test(t)}var Kp="\\ud800-\\udfff",I2="\\u0300-\\u036f",O2="\\ufe20-\\ufe2f",B2="\\u20d0-\\u20ff",D2=I2+O2+B2,Zp="\\u2700-\\u27bf",jp="a-z\\xdf-\\xf6\\xf8-\\xff",N2="\\xac\\xb1\\xd7\\xf7",P2="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",F2="\\u2000-\\u206f",H2=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Qp="A-Z\\xc0-\\xd6\\xd8-\\xde",z2="\\ufe0e\\ufe0f",Jp=N2+P2+F2+H2,e0="['’]",Id="["+Jp+"]",W2="["+D2+"]",t0="\\d+",k2="["+Zp+"]",r0="["+jp+"]",n0="[^"+Kp+Jp+t0+Zp+jp+Qp+"]",G2="\\ud83c[\\udffb-\\udfff]",$2="(?:"+W2+"|"+G2+")",Y2="[^"+Kp+"]",i0="(?:\\ud83c[\\udde6-\\uddff]){2}",o0="[\\ud800-\\udbff][\\udc00-\\udfff]",Bn="["+Qp+"]",U2="\\u200d",Od="(?:"+r0+"|"+n0+")",X2="(?:"+Bn+"|"+n0+")",Bd="(?:"+e0+"(?:d|ll|m|re|s|t|ve))?",Dd="(?:"+e0+"(?:D|LL|M|RE|S|T|VE))?",a0=$2+"?",l0="["+z2+"]?",V2="(?:"+U2+"(?:"+[Y2,i0,o0].join("|")+")"+l0+a0+")*",q2="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",K2="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Z2=l0+a0+V2,j2="(?:"+[k2,i0,o0].join("|")+")"+Z2,Q2=RegExp([Bn+"?"+r0+"+"+Bd+"(?="+[Id,Bn,"$"].join("|")+")",X2+"+"+Dd+"(?="+[Id,Bn+Od,"$"].join("|")+")",Bn+"?"+Od+"+"+Bd,Bn+"+"+Dd,K2,q2,t0,j2].join("|"),"g");function J2(t){return t.match(Q2)||[]}function s0(t,r,e){return t=de(t),r=e?void 0:r,r===void 0?M2(t)?J2(t):L2(t):t.match(r)||[]}var eR="['’]",tR=RegExp(eR,"g");function ui(t){return function(r){return Eu(s0(qp(r).replace(tR,"")),t,"")}}var rR=ui(function(t,r,e){return r=r.toLowerCase(),t+(e?Vp(r):r)}),nR=rR;function iR(){if(!arguments.length)return[];var t=arguments[0];return X(t)?t:[t]}var oR=ke.isFinite,aR=Math.min;function Au(t){var r=Math[t];return function(e,n){if(e=xt(e),n=n==null?0:aR(ne(n),292),n&&oR(e)){var i=(de(e)+"e").split("e"),o=r(i[0]+"e"+(+i[1]+n));return i=(de(o)+"e").split("e"),+(i[0]+"e"+(+i[1]-n))}return r(e)}}var lR=Au("ceil"),sR=lR;function u0(t){var r=x(t);return r.__chain__=!0,r}var uR=Math.ceil,fR=Math.max;function hR(t,r,e){(e?at(t,r,e):r===void 0)?r=1:r=fR(ne(r),0);var n=t==null?0:t.length;if(!n||r<1)return[];for(var i=0,o=0,a=Array(uR(n/r));i<n;)a[o++]=Pt(t,i,i+=r);return a}function Mn(t,r,e){return t===t&&(e!==void 0&&(t=t<=e?t:e),r!==void 0&&(t=t>=r?t:r)),t}function sa(t,r,e){return e===void 0&&(e=r,r=void 0),e!==void 0&&(e=xt(e),e=e===e?e:0),r!==void 0&&(r=xt(r),r=r===r?r:0),Mn(xt(t),r,e)}function dR(){this.__data__=new Er,this.size=0}function cR(t){var r=this.__data__,e=r.delete(t);return this.size=r.size,e}function vR(t){return this.__data__.get(t)}function pR(t){return this.__data__.has(t)}var gR=200;function yR(t,r){var e=this.__data__;if(e instanceof Er){var n=e.__data__;if(!Wi||n.length<gR-1)return n.push([t,r]),this.size=++e.size,this;e=this.__data__=new Lr(n)}return e.set(t,r),this.size=e.size,this}function Yt(t){var r=this.__data__=new Er(t);this.size=r.size}Yt.prototype.clear=dR;Yt.prototype.delete=cR;Yt.prototype.get=vR;Yt.prototype.has=pR;Yt.prototype.set=yR;function f0(t,r){return t&&dr(r,Ae(r),t)}function CR(t,r){return t&&dr(r,yt(r),t)}var h0=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Nd=h0&&typeof module=="object"&&module&&!module.nodeType&&module,wR=Nd&&Nd.exports===h0,Pd=wR?ke.Buffer:void 0,Fd=Pd?Pd.allocUnsafe:void 0;function d0(t,r){if(r)return t.slice();var e=t.length,n=Fd?Fd(e):new t.constructor(e);return t.copy(n),n}function Zr(t,r){for(var e=-1,n=t==null?0:t.length,i=0,o=[];++e<n;){var a=t[e];r(a,e,t)&&(o[i++]=a)}return o}function Mu(){return[]}var mR=Object.prototype,xR=mR.propertyIsEnumerable,Hd=Object.getOwnPropertySymbols,_R=Hd?function(t){return t==null?[]:(t=Object(t),Zr(Hd(t),function(r){return xR.call(t,r)}))}:Mu,Iu=_R;function SR(t,r){return dr(t,Iu(t),r)}var bR=Object.getOwnPropertySymbols,TR=bR?function(t){for(var r=[];t;)qr(r,Iu(t)),t=za(t);return r}:Mu,c0=TR;function RR(t,r){return dr(t,c0(t),r)}function v0(t,r,e){var n=r(t);return X(t)?n:qr(n,e(t))}function vs(t){return v0(t,Ae,Iu)}function Ou(t){return v0(t,yt,c0)}var ER=En(ke,"DataView"),ps=ER,LR=En(ke,"Promise"),gs=LR,AR=En(ke,"Set"),Gn=AR,zd="[object Map]",MR="[object Object]",Wd="[object Promise]",kd="[object Set]",Gd="[object WeakMap]",$d="[object DataView]",IR=Rn(ps),OR=Rn(Wi),BR=Rn(gs),DR=Rn(Gn),NR=Rn(Fi),rn=lt;(ps&&rn(new ps(new ArrayBuffer(1)))!=$d||Wi&&rn(new Wi)!=zd||gs&&rn(gs.resolve())!=Wd||Gn&&rn(new Gn)!=kd||Fi&&rn(new Fi)!=Gd)&&(rn=function(t){var r=lt(t),e=r==MR?t.constructor:void 0,n=e?Rn(e):"";if(n)switch(n){case IR:return $d;case OR:return zd;case BR:return Wd;case DR:return kd;case NR:return Gd}return r});var sr=rn,PR=Object.prototype,FR=PR.hasOwnProperty;function HR(t){var r=t.length,e=new t.constructor(r);return r&&typeof t[0]=="string"&&FR.call(t,"index")&&(e.index=t.index,e.input=t.input),e}var zR=ke.Uint8Array,ua=zR;function Bu(t){var r=new t.constructor(t.byteLength);return new ua(r).set(new ua(t)),r}function WR(t,r){var e=r?Bu(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.byteLength)}var kR=/\w*$/;function GR(t){var r=new t.constructor(t.source,kR.exec(t));return r.lastIndex=t.lastIndex,r}var Yd=Qe?Qe.prototype:void 0,Ud=Yd?Yd.valueOf:void 0;function $R(t){return Ud?Object(Ud.call(t)):{}}function p0(t,r){var e=r?Bu(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)}var YR="[object Boolean]",UR="[object Date]",XR="[object Map]",VR="[object Number]",qR="[object RegExp]",KR="[object Set]",ZR="[object String]",jR="[object Symbol]",QR="[object ArrayBuffer]",JR="[object DataView]",eE="[object Float32Array]",tE="[object Float64Array]",rE="[object Int8Array]",nE="[object Int16Array]",iE="[object Int32Array]",oE="[object Uint8Array]",aE="[object Uint8ClampedArray]",lE="[object Uint16Array]",sE="[object Uint32Array]";function uE(t,r,e){var n=t.constructor;switch(r){case QR:return Bu(t);case YR:case UR:return new n(+t);case JR:return WR(t,e);case eE:case tE:case rE:case nE:case iE:case oE:case aE:case lE:case sE:return p0(t,e);case XR:return new n;case VR:case ZR:return new n(t);case qR:return GR(t);case KR:return new n;case jR:return $R(t)}}function g0(t){return typeof t.constructor=="function"&&!no(t)?ni(za(t)):{}}var fE="[object Map]";function hE(t){return Le(t)&&sr(t)==fE}var Xd=Nt&&Nt.isMap,dE=Xd?Rt(Xd):hE,y0=dE,cE="[object Set]";function vE(t){return Le(t)&&sr(t)==cE}var Vd=Nt&&Nt.isSet,pE=Vd?Rt(Vd):vE,C0=pE,gE=1,yE=2,CE=4,w0="[object Arguments]",wE="[object Array]",mE="[object Boolean]",xE="[object Date]",_E="[object Error]",m0="[object Function]",SE="[object GeneratorFunction]",bE="[object Map]",TE="[object Number]",x0="[object Object]",RE="[object RegExp]",EE="[object Set]",LE="[object String]",AE="[object Symbol]",ME="[object WeakMap]",IE="[object ArrayBuffer]",OE="[object DataView]",BE="[object Float32Array]",DE="[object Float64Array]",NE="[object Int8Array]",PE="[object Int16Array]",FE="[object Int32Array]",HE="[object Uint8Array]",zE="[object Uint8ClampedArray]",WE="[object Uint16Array]",kE="[object Uint32Array]",_e={};_e[w0]=_e[wE]=_e[IE]=_e[OE]=_e[mE]=_e[xE]=_e[BE]=_e[DE]=_e[NE]=_e[PE]=_e[FE]=_e[bE]=_e[TE]=_e[x0]=_e[RE]=_e[EE]=_e[LE]=_e[AE]=_e[HE]=_e[zE]=_e[WE]=_e[kE]=!0;_e[_E]=_e[m0]=_e[ME]=!1;function It(t,r,e,n,i,o){var a,l=r&gE,s=r&yE,u=r&CE;if(e&&(a=i?e(t,n,i,o):e(t)),a!==void 0)return a;if(!pe(t))return t;var f=X(t);if(f){if(a=HR(t),!l)return ct(t,a)}else{var h=sr(t),d=h==m0||h==SE;if(Yr(t))return d0(t,l);if(h==x0||h==w0||d&&!i){if(a=s||d?{}:g0(t),!l)return s?RR(t,CR(a,t)):SR(t,f0(a,t))}else{if(!_e[h])return i?t:{};a=uE(t,h,l)}}o||(o=new Yt);var c=o.get(t);if(c)return c;o.set(t,a),C0(t)?t.forEach(function(g){a.add(It(g,r,e,g,t,o))}):y0(t)&&t.forEach(function(g,y){a.set(y,It(g,r,e,y,t,o))});var v=u?s?Ou:vs:s?yt:Ae,p=f?void 0:v(t);return Ft(p||t,function(g,y){p&&(y=g,g=t[y]),ro(a,y,It(g,r,e,y,t,o))}),a}var GE=4;function oo(t){return It(t,GE)}var $E=1,YE=4;function ys(t){return It(t,$E|YE)}var UE=1,XE=4;function VE(t,r){return r=typeof r=="function"?r:void 0,It(t,UE|XE,r)}var qE=4;function KE(t,r){return r=typeof r=="function"?r:void 0,It(t,qE,r)}function ZE(){return new Dt(this.value(),this.__chain__)}function Ut(t){for(var r=-1,e=t==null?0:t.length,n=0,i=[];++r<e;){var o=t[r];o&&(i[n++]=o)}return i}function Nn(){var t=arguments.length;if(!t)return[];for(var r=Array(t-1),e=arguments[0],n=t;n--;)r[n-1]=arguments[n];return qr(X(e)?ct(e):[e],Ve(r,1))}var jE="__lodash_hash_undefined__";function QE(t){return this.__data__.set(t,jE),this}function JE(t){return this.__data__.has(t)}function xn(t){var r=-1,e=t==null?0:t.length;for(this.__data__=new Lr;++r<e;)this.add(t[r])}xn.prototype.add=xn.prototype.push=QE;xn.prototype.has=JE;function Du(t,r){for(var e=-1,n=t==null?0:t.length;++e<n;)if(r(t[e],e,t))return!0;return!1}function ki(t,r){return t.has(r)}var eL=1,tL=2;function _0(t,r,e,n,i,o){var a=e&eL,l=t.length,s=r.length;if(l!=s&&!(a&&s>l))return!1;var u=o.get(t),f=o.get(r);if(u&&f)return u==r&&f==t;var h=-1,d=!0,c=e&tL?new xn:void 0;for(o.set(t,r),o.set(r,t);++h<l;){var v=t[h],p=r[h];if(n)var g=a?n(p,v,h,r,t,o):n(v,p,h,t,r,o);if(g!==void 0){if(g)continue;d=!1;break}if(c){if(!Du(r,function(y,C){if(!ki(c,C)&&(v===y||i(v,y,e,n,o)))return c.push(C)})){d=!1;break}}else if(!(v===p||i(v,p,e,n,o))){d=!1;break}}return o.delete(t),o.delete(r),d}function Nu(t){var r=-1,e=Array(t.size);return t.forEach(function(n,i){e[++r]=[i,n]}),e}function Wa(t){var r=-1,e=Array(t.size);return t.forEach(function(n){e[++r]=n}),e}var rL=1,nL=2,iL="[object Boolean]",oL="[object Date]",aL="[object Error]",lL="[object Map]",sL="[object Number]",uL="[object RegExp]",fL="[object Set]",hL="[object String]",dL="[object Symbol]",cL="[object ArrayBuffer]",vL="[object DataView]",qd=Qe?Qe.prototype:void 0,El=qd?qd.valueOf:void 0;function pL(t,r,e,n,i,o,a){switch(e){case vL:if(t.byteLength!=r.byteLength||t.byteOffset!=r.byteOffset)return!1;t=t.buffer,r=r.buffer;case cL:return!(t.byteLength!=r.byteLength||!o(new ua(t),new ua(r)));case iL:case oL:case sL:return jt(+t,+r);case aL:return t.name==r.name&&t.message==r.message;case uL:case hL:return t==r+"";case lL:var l=Nu;case fL:var s=n&rL;if(l||(l=Wa),t.size!=r.size&&!s)return!1;var u=a.get(t);if(u)return u==r;n|=nL,a.set(t,r);var f=_0(l(t),l(r),n,i,o,a);return a.delete(t),f;case dL:if(El)return El.call(t)==El.call(r)}return!1}var gL=1,yL=Object.prototype,CL=yL.hasOwnProperty;function wL(t,r,e,n,i,o){var a=e&gL,l=vs(t),s=l.length,u=vs(r),f=u.length;if(s!=f&&!a)return!1;for(var h=s;h--;){var d=l[h];if(!(a?d in r:CL.call(r,d)))return!1}var c=o.get(t),v=o.get(r);if(c&&v)return c==r&&v==t;var p=!0;o.set(t,r),o.set(r,t);for(var g=a;++h<s;){d=l[h];var y=t[d],C=r[d];if(n)var w=a?n(C,y,d,r,t,o):n(y,C,d,t,r,o);if(!(w===void 0?y===C||i(y,C,e,n,o):w)){p=!1;break}g||(g=d=="constructor")}if(p&&!g){var m=t.constructor,_=r.constructor;m!=_&&"constructor"in t&&"constructor"in r&&!(typeof m=="function"&&m instanceof m&&typeof _=="function"&&_ instanceof _)&&(p=!1)}return o.delete(t),o.delete(r),p}var mL=1,Kd="[object Arguments]",Zd="[object Array]",Bo="[object Object]",xL=Object.prototype,jd=xL.hasOwnProperty;function _L(t,r,e,n,i,o){var a=X(t),l=X(r),s=a?Zd:sr(t),u=l?Zd:sr(r);s=s==Kd?Bo:s,u=u==Kd?Bo:u;var f=s==Bo,h=u==Bo,d=s==u;if(d&&Yr(t)){if(!Yr(r))return!1;a=!0,f=!1}if(d&&!f)return o||(o=new Yt),a||li(t)?_0(t,r,e,n,i,o):pL(t,r,s,e,n,i,o);if(!(e&mL)){var c=f&&jd.call(t,"__wrapped__"),v=h&&jd.call(r,"__wrapped__");if(c||v){var p=c?t.value():t,g=v?r.value():r;return o||(o=new Yt),i(p,g,e,n,o)}}return d?(o||(o=new Yt),wL(t,r,e,n,i,o)):!1}function ao(t,r,e,n,i){return t===r?!0:t==null||r==null||!Le(t)&&!Le(r)?t!==t&&r!==r:_L(t,r,e,n,ao,i)}var SL=1,bL=2;function Pu(t,r,e,n){var i=e.length,o=i,a=!n;if(t==null)return!o;for(t=Object(t);i--;){var l=e[i];if(a&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++i<o;){l=e[i];var s=l[0],u=t[s],f=l[1];if(a&&l[2]){if(u===void 0&&!(s in t))return!1}else{var h=new Yt;if(n)var d=n(u,f,s,t,r,h);if(!(d===void 0?ao(f,u,SL|bL,n,h):d))return!1}}return!0}function S0(t){return t===t&&!pe(t)}function Fu(t){for(var r=Ae(t),e=r.length;e--;){var n=r[e],i=t[n];r[e]=[n,i,S0(i)]}return r}function b0(t,r){return function(e){return e==null?!1:e[t]===r&&(r!==void 0||t in Object(e))}}function T0(t){var r=Fu(t);return r.length==1&&r[0][2]?b0(r[0][0],r[0][1]):function(e){return e===t||Pu(e,t,r)}}function TL(t,r){return t!=null&&r in Object(t)}function R0(t,r,e){r=Vr(r,t);for(var n=-1,i=r.length,o=!1;++n<i;){var a=cr(r[n]);if(!(o=t!=null&&e(t,a)))break;t=t[a]}return o||++n!=i?o:(i=t==null?0:t.length,!!i&&Pa(i)&&br(a,i)&&(X(t)||wn(t)))}function _n(t,r){return t!=null&&R0(t,r,TL)}var RL=1,EL=2;function E0(t,r){return xu(t)&&S0(r)?b0(cr(t),r):function(e){var n=K(e,t);return n===void 0&&n===r?_n(e,t):ao(r,n,RL|EL)}}function Hu(t){return function(r){return r==null?void 0:r[t]}}function LL(t){return function(r){return An(r,t)}}function L0(t){return xu(t)?Hu(cr(t)):LL(t)}function ee(t){return typeof t=="function"?t:t==null?st:typeof t=="object"?X(t)?E0(t[0],t[1]):T0(t):L0(t)}var AL="Expected a function";function A0(t){var r=t==null?0:t.length,e=ee;return t=r?Te(t,function(n){if(typeof n[1]!="function")throw new TypeError(AL);return[e(n[0]),n[1]]}):[],ie(function(n){for(var i=-1;++i<r;){var o=t[i];if(Tt(o[0],this,n))return Tt(o[1],this,n)}})}function M0(t,r,e){var n=e.length;if(t==null)return!n;for(t=Object(t);n--;){var i=e[n],o=r[i],a=t[i];if(a===void 0&&!(i in t)||!o(a))return!1}return!0}function ML(t){var r=Ae(t);return function(e){return M0(e,t,r)}}var IL=1;function OL(t){return ML(It(t,IL))}function BL(t,r){return r==null||M0(t,r,Ae(r))}function DL(t,r,e,n){for(var i=-1,o=t==null?0:t.length;++i<o;){var a=t[i];r(n,a,e(a),t)}return n}function I0(t){return function(r,e,n){for(var i=-1,o=Object(r),a=n(r),l=a.length;l--;){var s=a[t?l:++i];if(e(o[s],s,o)===!1)break}return r}}var NL=I0(),zu=NL;function vr(t,r){return t&&zu(t,r,Ae)}function O0(t,r){return function(e,n){if(e==null)return e;if(!gt(e))return t(e,n);for(var i=e.length,o=r?i:-1,a=Object(e);(r?o--:++o<i)&&n(a[o],o,a)!==!1;);return e}}var PL=O0(vr),jr=PL;function FL(t,r,e,n){return jr(t,function(i,o,a){r(n,i,e(i),a)}),n}function ka(t,r){return function(e,n){var i=X(e)?DL:FL,o=r?r():{};return i(e,t,ee(n),o)}}var HL=Object.prototype,zL=HL.hasOwnProperty,WL=ka(function(t,r,e){zL.call(t,e)?++t[e]:Rr(t,e,1)}),kL=WL;function GL(t,r){var e=ni(t);return r==null?e:f0(e,r)}var $L=8;function Wu(t,r,e){r=e?void 0:r;var n=Tr(t,$L,void 0,void 0,void 0,void 0,void 0,r);return n.placeholder=Wu.placeholder,n}Wu.placeholder={};var YL=16;function ku(t,r,e){r=e?void 0:r;var n=Tr(t,YL,void 0,void 0,void 0,void 0,void 0,r);return n.placeholder=ku.placeholder,n}ku.placeholder={};var UL=function(){return ke.Date.now()},Go=UL,XL="Expected a function",VL=Math.max,qL=Math.min;function Gi(t,r,e){var n,i,o,a,l,s,u=0,f=!1,h=!1,d=!0;if(typeof t!="function")throw new TypeError(XL);r=xt(r)||0,pe(e)&&(f=!!e.leading,h="maxWait"in e,o=h?VL(xt(e.maxWait)||0,r):o,d="trailing"in e?!!e.trailing:d);function c(b){var T=n,E=i;return n=i=void 0,u=b,a=t.apply(E,T),a}function v(b){return u=b,l=setTimeout(y,r),f?c(b):a}function p(b){var T=b-s,E=b-u,L=r-T;return h?qL(L,o-E):L}function g(b){var T=b-s,E=b-u;return s===void 0||T>=r||T<0||h&&E>=o}function y(){var b=Go();if(g(b))return C(b);l=setTimeout(y,p(b))}function C(b){return l=void 0,d&&n?c(b):(n=i=void 0,a)}function w(){l!==void 0&&clearTimeout(l),u=0,n=s=i=l=void 0}function m(){return l===void 0?a:C(Go())}function _(){var b=Go(),T=g(b);if(n=arguments,i=this,s=b,T){if(l===void 0)return v(s);if(h)return clearTimeout(l),l=setTimeout(y,r),c(s)}return l===void 0&&(l=setTimeout(y,r)),a}return _.cancel=w,_.flush=m,_}function KL(t,r){return t==null||t!==t?r:t}var B0=Object.prototype,ZL=B0.hasOwnProperty,jL=ie(function(t,r){t=Object(t);var e=-1,n=r.length,i=n>2?r[2]:void 0;for(i&&at(r[0],r[1],i)&&(n=1);++e<n;)for(var o=r[e],a=yt(o),l=-1,s=a.length;++l<s;){var u=a[l],f=t[u];(f===void 0||jt(f,B0[u])&&!ZL.call(t,u))&&(t[u]=o[u])}return t}),QL=jL;function Cs(t,r,e){(e!==void 0&&!jt(t[r],e)||e===void 0&&!(r in t))&&Rr(t,r,e)}function Oe(t){return Le(t)&&gt(t)}function ws(t,r){if(!(r==="constructor"&&typeof t[r]=="function")&&r!="__proto__")return t[r]}function D0(t){return dr(t,yt(t))}function JL(t,r,e,n,i,o,a){var l=ws(t,e),s=ws(r,e),u=a.get(s);if(u){Cs(t,e,u);return}var f=o?o(l,s,e+"",t,r,a):void 0,h=f===void 0;if(h){var d=X(s),c=!d&&Yr(s),v=!d&&!c&&li(s);f=s,d||c||v?X(l)?f=l:Oe(l)?f=ct(l):c?(h=!1,f=d0(s,!0)):v?(h=!1,f=p0(s,!0)):f=[]:io(s)||wn(s)?(f=l,wn(l)?f=D0(l):(!pe(l)||Xe(l))&&(f=g0(s))):h=!1}h&&(a.set(s,f),i(f,s,n,o,a),a.delete(s)),Cs(t,e,f)}function Ga(t,r,e,n,i){t!==r&&zu(r,function(o,a){if(i||(i=new Yt),pe(o))JL(t,r,a,e,Ga,n,i);else{var l=n?n(ws(t,a),o,a+"",t,r,i):void 0;l===void 0&&(l=o),Cs(t,a,l)}},yt)}function N0(t,r,e,n,i,o){return pe(t)&&pe(r)&&(o.set(r,t),Ga(t,r,void 0,N0,o),o.delete(r)),t}var eA=ai(function(t,r,e,n){Ga(t,r,e,n)}),Gu=eA,tA=ie(function(t){return t.push(void 0,N0),Tt(Gu,void 0,t)}),rA=tA,nA="Expected a function";function P0(t,r,e){if(typeof t!="function")throw new TypeError(nA);return setTimeout(function(){t.apply(void 0,e)},r)}var iA=ie(function(t,r){return P0(t,1,r)}),oA=iA,aA=ie(function(t,r,e){return P0(t,xt(r)||0,e)}),lA=aA;function $u(t,r,e){for(var n=-1,i=t==null?0:t.length;++n<i;)if(e(r,t[n]))return!0;return!1}var sA=200;function lo(t,r,e,n){var i=-1,o=Da,a=!0,l=t.length,s=[],u=r.length;if(!l)return s;e&&(r=Te(r,Rt(e))),n?(o=$u,a=!1):r.length>=sA&&(o=ki,a=!1,r=new xn(r));e:for(;++i<l;){var f=t[i],h=e==null?f:e(f);if(f=n||f!==0?f:0,a&&h===h){for(var d=u;d--;)if(r[d]===h)continue e;s.push(f)}else o(r,h,n)||s.push(f)}return s}var uA=ie(function(t,r){return Oe(t)?lo(t,Ve(r,1,Oe,!0)):[]}),F0=uA;function ge(t){var r=t==null?0:t.length;return r?t[r-1]:void 0}var fA=ie(function(t,r){var e=ge(r);return Oe(e)&&(e=void 0),Oe(t)?lo(t,Ve(r,1,Oe,!0),ee(e)):[]}),hA=fA,dA=ie(function(t,r){var e=ge(r);return Oe(e)&&(e=void 0),Oe(t)?lo(t,Ve(r,1,Oe,!0),void 0,e):[]}),H0=dA,cA=Ma(function(t,r){return t/r},1),vA=cA;function pA(t,r,e){var n=t==null?0:t.length;return n?(r=e||r===void 0?1:ne(r),Pt(t,r<0?0:r,n)):[]}function gA(t,r,e){var n=t==null?0:t.length;return n?(r=e||r===void 0?1:ne(r),r=n-r,Pt(t,0,r<0?0:r)):[]}function $a(t,r,e,n){for(var i=t.length,o=n?i:-1;(n?o--:++o<i)&&r(t[o],o,t););return e?Pt(t,n?0:o,n?o+1:i):Pt(t,n?o+1:0,n?i:o)}function yA(t,r){return t&&t.length?$a(t,ee(r),!0,!0):[]}function CA(t,r){return t&&t.length?$a(t,ee(r),!0):[]}function pr(t){return typeof t=="function"?t:st}function J(t,r){var e=X(t)?Ft:jr;return e(t,pr(r))}function wA(t,r){for(var e=t==null?0:t.length;e--&&r(t[e],e,t)!==!1;);return t}var mA=I0(!0),z0=mA;function Yu(t,r){return t&&z0(t,r,Ae)}var xA=O0(Yu,!0),W0=xA;function _A(t,r){var e=X(t)?wA:W0;return e(t,pr(r))}function SA(t,r,e){t=de(t),r=bt(r);var n=t.length;e=e===void 0?n:Mn(ne(e),0,n);var i=e;return e-=r.length,e>=0&&t.slice(e,i)==r}function bA(t,r){return Te(r,function(e){return[e,t[e]]})}function TA(t){var r=-1,e=Array(t.size);return t.forEach(function(n){e[++r]=[n,n]}),e}var RA="[object Map]",EA="[object Set]";function k0(t){return function(r){var e=sr(r);return e==RA?Nu(r):e==EA?TA(r):bA(r,t(r))}}var LA=k0(Ae),AA=LA,MA=k0(yt),IA=MA,OA={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},BA=Lu(OA),DA=BA,G0=/[&<>"']/g,NA=RegExp(G0.source);function Uu(t){return t=de(t),t&&NA.test(t)?t.replace(G0,DA):t}var $0=/[\\^$.*+?()[\]{}|]/g,PA=RegExp($0.source);function FA(t){return t=de(t),t&&PA.test(t)?t.replace($0,"\\$&"):t}function Y0(t,r){for(var e=-1,n=t==null?0:t.length;++e<n;)if(!r(t[e],e,t))return!1;return!0}function HA(t,r){var e=!0;return jr(t,function(n,i,o){return e=!!r(n,i,o),e}),e}function Ya(t,r,e){var n=X(t)?Y0:HA;return e&&at(t,r,e)&&(r=void 0),n(t,ee(r))}var zA=4294967295;function U0(t){return t?Mn(ne(t),0,zA):0}function WA(t,r,e,n){var i=t.length;for(e=ne(e),e<0&&(e=-e>i?0:i+e),n=n===void 0||n>i?i:ne(n),n<0&&(n+=i),n=e>n?0:U0(n);e<n;)t[e++]=r;return t}function kA(t,r,e,n){var i=t==null?0:t.length;return i?(e&&typeof e!="number"&&at(t,r,e)&&(e=0,n=i),WA(t,r,e,n)):[]}function X0(t,r){var e=[];return jr(t,function(n,i,o){r(n,i,o)&&e.push(n)}),e}function Mr(t,r){var e=X(t)?Zr:X0;return e(t,ee(r))}function V0(t){return function(r,e,n){var i=Object(r);if(!gt(r)){var o=ee(e);r=Ae(r),e=function(l){return o(i[l],l,i)}}var a=t(r,e,n);return a>-1?i[o?r[a]:a]:void 0}}var GA=Math.max;function Zn(t,r,e){var n=t==null?0:t.length;if(!n)return-1;var i=e==null?0:ne(e);return i<0&&(i=GA(n+i,0)),Ba(t,ee(r),i)}var $A=V0(Zn),Je=$A;function q0(t,r,e){var n;return e(t,function(i,o,a){if(r(i,o,a))return n=o,!1}),n}function YA(t,r){return q0(t,ee(r),vr)}var UA=Math.max,XA=Math.min;function K0(t,r,e){var n=t==null?0:t.length;if(!n)return-1;var i=n-1;return e!==void 0&&(i=ne(e),i=e<0?UA(n+i,0):XA(i,n-1)),Ba(t,ee(r),i,!0)}var VA=V0(K0),Ua=VA;function qA(t,r){return q0(t,ee(r),Yu)}function fi(t){return t&&t.length?t[0]:void 0}function Z0(t,r){var e=-1,n=gt(t)?Array(t.length):[];return jr(t,function(i,o,a){n[++e]=r(i,o,a)}),n}function oe(t,r){var e=X(t)?Te:Z0;return e(t,ee(r))}function so(t,r){return Ve(oe(t,r),1)}var KA=1/0;function ZA(t,r){return Ve(oe(t,r),KA)}function jA(t,r,e){return e=e===void 0?1:ne(e),Ve(oe(t,r),e)}var QA=1/0;function j0(t){var r=t==null?0:t.length;return r?Ve(t,QA):[]}function JA(t,r){var e=t==null?0:t.length;return e?(r=r===void 0?1:ne(r),Ve(t,r)):[]}var eM=512;function tM(t){return Tr(t,eM)}var rM=Au("floor"),nM=rM,iM="Expected a function",oM=8,aM=32,lM=128,sM=256;function Q0(t){return Ar(function(r){var e=r.length,n=e,i=Dt.prototype.thru;for(t&&r.reverse();n--;){var o=r[n];if(typeof o!="function")throw new TypeError(iM);if(i&&!a&&ko(o)=="wrapper")var a=new Dt([],!0)}for(n=a?n:e;++n<e;){o=r[n];var l=ko(o),s=l=="wrapper"?gu(o):void 0;s&&fs(s[0])&&s[1]==(lM|oM|aM|sM)&&!s[4].length&&s[9]==1?a=a[ko(s[0])].apply(a,s[3]):a=o.length==1&&fs(o)?a[l]():a.thru(o)}return function(){var u=arguments,f=u[0];if(a&&u.length==1&&X(f))return a.plant(f).value();for(var h=0,d=e?r[h].apply(this,u):f;++h<e;)d=r[h].call(this,d);return d}})}var uM=Q0(),fM=uM,hM=Q0(!0),dM=hM;function J0(t,r){return t==null?t:zu(t,pr(r),yt)}function cM(t,r){return t==null?t:z0(t,pr(r),yt)}function vM(t,r){return t&&vr(t,pr(r))}function pM(t,r){return t&&Yu(t,pr(r))}function gM(t){for(var r=-1,e=t==null?0:t.length,n={};++r<e;){var i=t[r];n[i[0]]=i[1]}return n}function Xa(t,r){return Zr(r,function(e){return Xe(t[e])})}function yM(t){return t==null?[]:Xa(t,Ae(t))}function CM(t){return t==null?[]:Xa(t,yt(t))}var wM=Object.prototype,mM=wM.hasOwnProperty,xM=ka(function(t,r,e){mM.call(t,e)?t[e].push(r):Rr(t,e,[r])}),_M=xM;function Xu(t,r){return t>r}function Va(t){return function(r,e){return typeof r=="string"&&typeof e=="string"||(r=xt(r),e=xt(e)),t(r,e)}}var SM=Va(Xu),bM=SM,TM=Va(function(t,r){return t>=r}),RM=TM,EM=Object.prototype,LM=EM.hasOwnProperty;function AM(t,r){return t!=null&&LM.call(t,r)}function ms(t,r){return t!=null&&R0(t,r,AM)}var MM=Math.max,IM=Math.min;function OM(t,r,e){return t>=IM(r,e)&&t<MM(r,e)}function xs(t,r,e){return r=Sr(r),e===void 0?(e=r,r=0):e=Sr(e),t=xt(t),OM(t,r,e)}var BM="[object String]";function hi(t){return typeof t=="string"||!X(t)&&Le(t)&&lt(t)==BM}function Vu(t,r){return Te(r,function(e){return t[e]})}function Ir(t){return t==null?[]:Vu(t,Ae(t))}var DM=Math.max;function ot(t,r,e,n){t=gt(t)?t:Ir(t),e=e&&!n?ne(e):0;var i=t.length;return e<0&&(e=DM(i+e,0)),hi(t)?e<=i&&t.indexOf(r,e)>-1:!!i&&ii(t,r,e)>-1}var NM=Math.max;function qa(t,r,e){var n=t==null?0:t.length;if(!n)return-1;var i=e==null?0:ne(e);return i<0&&(i=NM(n+i,0)),ii(t,r,i)}function PM(t){var r=t==null?0:t.length;return r?Pt(t,0,-1):[]}var FM=Math.min;function qu(t,r,e){for(var n=e?$u:Da,i=t[0].length,o=t.length,a=o,l=Array(o),s=1/0,u=[];a--;){var f=t[a];a&&r&&(f=Te(f,Rt(r))),s=FM(f.length,s),l[a]=!e&&(r||i>=120&&f.length>=120)?new xn(a&&f):void 0}f=t[0];var h=-1,d=l[0];e:for(;++h<i&&u.length<s;){var c=f[h],v=r?r(c):c;if(c=e||c!==0?c:0,!(d?ki(d,v):n(u,v,e))){for(a=o;--a;){var p=l[a];if(!(p?ki(p,v):n(t[a],v,e)))continue e}d&&d.push(v),u.push(c)}}return u}function Ku(t){return Oe(t)?t:[]}var HM=ie(function(t){var r=Te(t,Ku);return r.length&&r[0]===t[0]?qu(r):[]}),eg=HM,zM=ie(function(t){var r=ge(t),e=Te(t,Ku);return r===ge(e)?r=void 0:e.pop(),e.length&&e[0]===t[0]?qu(e,ee(r)):[]}),WM=zM,kM=ie(function(t){var r=ge(t),e=Te(t,Ku);return r=typeof r=="function"?r:void 0,r&&e.pop(),e.length&&e[0]===t[0]?qu(e,void 0,r):[]}),GM=kM;function $M(t,r,e,n){return vr(t,function(i,o,a){r(n,e(i),o,a)}),n}function tg(t,r){return function(e,n){return $M(e,t,r(n),{})}}var YM=Object.prototype,UM=YM.toString,XM=tg(function(t,r,e){r!=null&&typeof r.toString!="function"&&(r=UM.call(r)),t[r]=e},kn(st)),VM=XM,rg=Object.prototype,qM=rg.hasOwnProperty,KM=rg.toString,ZM=tg(function(t,r,e){r!=null&&typeof r.toString!="function"&&(r=KM.call(r)),qM.call(t,r)?t[r].push(e):t[r]=[e]},ee),jM=ZM;function ng(t,r){return r.length<2?t:An(t,Pt(r,0,-1))}function uo(t,r,e){r=Vr(r,t),t=ng(t,r);var n=t==null?t:t[cr(ge(r))];return n==null?void 0:Tt(n,t,e)}var QM=ie(uo),JM=QM,eI=ie(function(t,r,e){var n=-1,i=typeof r=="function",o=gt(t)?Array(t.length):[];return jr(t,function(a){o[++n]=i?Tt(r,a,e):uo(a,r,e)}),o}),tI=eI,rI="[object ArrayBuffer]";function nI(t){return Le(t)&&lt(t)==rI}var Qd=Nt&&Nt.isArrayBuffer,iI=Qd?Rt(Qd):nI,oI=iI,aI="[object Boolean]";function tr(t){return t===!0||t===!1||Le(t)&&lt(t)==aI}var lI="[object Date]";function sI(t){return Le(t)&&lt(t)==lI}var Jd=Nt&&Nt.isDate,uI=Jd?Rt(Jd):sI,fI=uI;function hI(t){return Le(t)&&t.nodeType===1&&!io(t)}var dI="[object Map]",cI="[object Set]",vI=Object.prototype,pI=vI.hasOwnProperty;function D(t){if(t==null)return!0;if(gt(t)&&(X(t)||typeof t=="string"||typeof t.splice=="function"||Yr(t)||li(t)||wn(t)))return!t.length;var r=sr(t);if(r==dI||r==cI)return!t.size;if(no(t))return!mu(t).length;for(var e in t)if(pI.call(t,e))return!1;return!0}function Ue(t,r){return ao(t,r)}function gI(t,r,e){e=typeof e=="function"?e:void 0;var n=e?e(t,r):void 0;return n===void 0?ao(t,r,void 0,e):!!n}var yI=ke.isFinite;function CI(t){return typeof t=="number"&&yI(t)}function ig(t){return typeof t=="number"&&t==ne(t)}function wI(t,r){return t===r||Pu(t,r,Fu(r))}function mI(t,r,e){return e=typeof e=="function"?e:void 0,Pu(t,r,Fu(r),e)}var xI="[object Number]";function it(t){return typeof t=="number"||Le(t)&&lt(t)==xI}function og(t){return it(t)&&t!=+t}var _I=Wo?Xe:wu,SI=_I,bI="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.";function TI(t){if(SI(t))throw new Error(bI);return gp(t)}function Fe(t){return t==null}function ag(t){return t===null}var RI="[object RegExp]";function EI(t){return Le(t)&&lt(t)==RI}var ec=Nt&&Nt.isRegExp,LI=ec?Rt(ec):EI,Zu=LI,AI=9007199254740991;function MI(t){return ig(t)&&t>=-9007199254740991&&t<=AI}function Ka(t){return t===void 0}var II="[object WeakMap]";function OI(t){return Le(t)&&sr(t)==II}var BI="[object WeakSet]";function DI(t){return Le(t)&&lt(t)==BI}var NI=1;function PI(t){return ee(typeof t=="function"?t:It(t,NI))}var FI=Array.prototype,HI=FI.join;function zI(t,r){return t==null?"":HI.call(t,r)}var WI=ui(function(t,r,e){return t+(e?"-":"")+r.toLowerCase()}),kI=WI,GI=ka(function(t,r,e){Rr(t,e,r)}),$I=GI;function YI(t,r,e){for(var n=e+1;n--;)if(t[n]===r)return n;return n}var UI=Math.max,XI=Math.min;function VI(t,r,e){var n=t==null?0:t.length;if(!n)return-1;var i=n;return e!==void 0&&(i=ne(e),i=i<0?UI(n+i,0):XI(i,n-1)),r===r?YI(t,r,i):Ba(t,Sp,i,!0)}var qI=ui(function(t,r,e){return t+(e?" ":"")+r.toLowerCase()}),ju=qI,KI=Xp("toLowerCase"),ZI=KI;function Qu(t,r){return t<r}var jI=Va(Qu),QI=jI,JI=Va(function(t,r){return t<=r}),eO=JI;function lg(t,r){var e={};return r=ee(r),vr(t,function(n,i,o){Rr(e,r(n,i,o),n)}),e}function tO(t,r){var e={};return r=ee(r),vr(t,function(n,i,o){Rr(e,i,r(n,i,o))}),e}var rO=1;function _s(t){return T0(It(t,rO))}var nO=1;function iO(t,r){return E0(t,It(r,nO))}function Za(t,r,e){for(var n=-1,i=t.length;++n<i;){var o=t[n],a=r(o);if(a!=null&&(l===void 0?a===a&&!St(a):e(a,l)))var l=a,s=o}return s}function jn(t){return t&&t.length?Za(t,st,Xu):void 0}function Ju(t,r){return t&&t.length?Za(t,ee(r),Xu):void 0}function ef(t,r){for(var e,n=-1,i=t.length;++n<i;){var o=r(t[n]);o!==void 0&&(e=e===void 0?o:e+o)}return e}var oO=NaN;function sg(t,r){var e=t==null?0:t.length;return e?ef(t,r)/e:oO}function aO(t){return sg(t,st)}function lO(t,r){return sg(t,ee(r))}var sO=ai(function(t,r,e){Ga(t,r,e)}),fa=sO,uO=ie(function(t,r){return function(e){return uo(e,t,r)}}),fO=uO,hO=ie(function(t,r){return function(e){return uo(t,e,r)}}),dO=hO;function tf(t){return t&&t.length?Za(t,st,Qu):void 0}function cO(t,r){return t&&t.length?Za(t,ee(r),Qu):void 0}function vO(t,r,e){var n=Ae(r),i=Xa(r,n),o=!(pe(e)&&"chain"in e)||!!e.chain,a=Xe(t);return Ft(i,function(l){var s=r[l];t[l]=s,a&&(t.prototype[l]=function(){var u=this.__chain__;if(o||u){var f=t(this.__wrapped__),h=f.__actions__=ct(this.__actions__);return h.push({func:s,args:arguments,thisArg:t}),f.__chain__=u,f}return s.apply(t,qr([this.value()],arguments))})}),t}var pO=Ma(function(t,r){return t*r},1),gO=pO,yO="Expected a function";function ja(t){if(typeof t!="function")throw new TypeError(yO);return function(){var r=arguments;switch(r.length){case 0:return!t.call(this);case 1:return!t.call(this,r[0]);case 2:return!t.call(this,r[0],r[1]);case 3:return!t.call(this,r[0],r[1],r[2])}return!t.apply(this,r)}}function CO(t){for(var r,e=[];!(r=t.next()).done;)e.push(r.value);return e}var wO="[object Map]",mO="[object Set]",Ll=Qe?Qe.iterator:void 0;function ug(t){if(!t)return[];if(gt(t))return hi(t)?qt(t):ct(t);if(Ll&&t[Ll])return CO(t[Ll]());var r=sr(t),e=r==wO?Nu:r==mO?Wa:Ir;return e(t)}function xO(){this.__values__===void 0&&(this.__values__=ug(this.value()));var t=this.__index__>=this.__values__.length,r=t?void 0:this.__values__[this.__index__++];return{done:t,value:r}}function fg(t,r){var e=t.length;if(e)return r+=r<0?e:0,br(r,e)?t[r]:void 0}function _O(t,r){return t&&t.length?fg(t,ne(r)):void 0}function SO(t){return t=ne(t),ie(function(r){return fg(r,t)})}function rf(t,r){return r=Vr(r,t),t=ng(t,r),t==null||delete t[cr(ge(r))]}function bO(t){return io(t)?void 0:t}var TO=1,RO=2,EO=4,LO=Ar(function(t,r){var e={};if(t==null)return e;var n=!1;r=Te(r,function(o){return o=Vr(o,t),n||(n=o.length>1),o}),dr(t,Ou(t),e),n&&(e=It(e,TO|RO|EO,bO));for(var i=r.length;i--;)rf(e,r[i]);return e}),nf=LO;function fo(t,r,e,n){if(!pe(t))return t;r=Vr(r,t);for(var i=-1,o=r.length,a=o-1,l=t;l!=null&&++i<o;){var s=cr(r[i]),u=e;if(s==="__proto__"||s==="constructor"||s==="prototype")return t;if(i!=a){var f=l[s];u=n?n(f,s,l):void 0,u===void 0&&(u=pe(f)?f:br(r[i+1])?[]:{})}ro(l,s,u),l=l[s]}return t}function hg(t,r,e){for(var n=-1,i=r.length,o={};++n<i;){var a=r[n],l=An(t,a);e(l,a)&&fo(o,Vr(a,t),l)}return o}function of(t,r){if(t==null)return{};var e=Te(Ou(t),function(n){return[n]});return r=ee(r),hg(t,e,function(n,i){return r(n,i[0])})}function AO(t,r){return of(t,ja(ee(r)))}function MO(t){return Hp(2,t)}function IO(t,r){var e=t.length;for(t.sort(r);e--;)t[e]=t[e].value;return t}function dg(t,r){if(t!==r){var e=t!==void 0,n=t===null,i=t===t,o=St(t),a=r!==void 0,l=r===null,s=r===r,u=St(r);if(!l&&!u&&!o&&t>r||o&&a&&s&&!l&&!u||n&&a&&s||!e&&s||!i)return 1;if(!n&&!o&&!u&&t<r||u&&e&&i&&!n&&!o||l&&e&&i||!a&&i||!s)return-1}return 0}function OO(t,r,e){for(var n=-1,i=t.criteria,o=r.criteria,a=i.length,l=e.length;++n<a;){var s=dg(i[n],o[n]);if(s){if(n>=l)return s;var u=e[n];return s*(u=="desc"?-1:1)}}return t.index-r.index}function cg(t,r,e){r.length?r=Te(r,function(o){return X(o)?function(a){return An(a,o.length===1?o[0]:o)}:o}):r=[st];var n=-1;r=Te(r,Rt(ee));var i=Z0(t,function(o,a,l){var s=Te(r,function(u){return u(o)});return{criteria:s,index:++n,value:o}});return IO(i,function(o,a){return OO(o,a,e)})}function af(t,r,e,n){return t==null?[]:(X(r)||(r=r==null?[]:[r]),e=n?void 0:e,X(e)||(e=e==null?[]:[e]),cg(t,r,e))}function lf(t){return Ar(function(r){return r=Te(r,Rt(ee)),ie(function(e){var n=this;return t(r,function(i){return Tt(i,n,e)})})})}var BO=lf(Te),DO=BO,NO=ie,PO=NO,FO=Math.min,HO=PO(function(t,r){r=r.length==1&&X(r[0])?Te(r[0],Rt(ee)):Te(Ve(r,1),Rt(ee));var e=r.length;return ie(function(n){for(var i=-1,o=FO(n.length,e);++i<o;)n[i]=r[i].call(this,n[i]);return Tt(t,this,n)})}),zO=HO,WO=lf(Y0),kO=WO,GO=lf(Du),$O=GO,YO=9007199254740991,UO=Math.floor;function Ss(t,r){var e="";if(!t||r<1||r>YO)return e;do r%2&&(e+=t),r=UO(r/2),r&&(t+=t);while(r);return e}var XO=Hu("length"),VO=XO,vg="\\ud800-\\udfff",qO="\\u0300-\\u036f",KO="\\ufe20-\\ufe2f",ZO="\\u20d0-\\u20ff",jO=qO+KO+ZO,QO="\\ufe0e\\ufe0f",JO="["+vg+"]",bs="["+jO+"]",Ts="\\ud83c[\\udffb-\\udfff]",eB="(?:"+bs+"|"+Ts+")",pg="[^"+vg+"]",gg="(?:\\ud83c[\\udde6-\\uddff]){2}",yg="[\\ud800-\\udbff][\\udc00-\\udfff]",tB="\\u200d",Cg=eB+"?",wg="["+QO+"]?",rB="(?:"+tB+"(?:"+[pg,gg,yg].join("|")+")"+wg+Cg+")*",nB=wg+Cg+rB,iB="(?:"+[pg+bs+"?",bs,gg,yg,JO].join("|")+")",tc=RegExp(Ts+"(?="+Ts+")|"+iB+nB,"g");function oB(t){for(var r=tc.lastIndex=0;tc.test(t);)++r;return r}function di(t){return si(t)?oB(t):VO(t)}var aB=Math.ceil;function ha(t,r){r=r===void 0?" ":bt(r);var e=r.length;if(e<2)return e?Ss(r,t):r;var n=Ss(r,aB(t/di(r)));return si(r)?Kr(qt(n),0,t).join(""):n.slice(0,t)}var lB=Math.ceil,sB=Math.floor;function uB(t,r,e){t=de(t),r=ne(r);var n=r?di(t):0;if(!r||n>=r)return t;var i=(r-n)/2;return ha(sB(i),e)+t+ha(lB(i),e)}function fB(t,r,e){t=de(t),r=ne(r);var n=r?di(t):0;return r&&n<r?t+ha(r-n,e):t}function hB(t,r,e){t=de(t),r=ne(r);var n=r?di(t):0;return r&&n<r?ha(r-n,e)+t:t}var dB=/^\s+/,cB=ke.parseInt;function vB(t,r,e){return e||r==null?r=0:r&&(r=+r),cB(de(t).replace(dB,""),r||0)}var pB=32,sf=ie(function(t,r){var e=$r(r,oi(sf));return Tr(t,pB,void 0,r,e)});sf.placeholder={};var mg=sf,gB=64,uf=ie(function(t,r){var e=$r(r,oi(uf));return Tr(t,gB,void 0,r,e)});uf.placeholder={};var yB=uf,CB=ka(function(t,r,e){t[e?0:1].push(r)},function(){return[[],[]]}),wB=CB;function mB(t,r){return hg(t,r,function(e,n){return _n(t,n)})}var xB=Ar(function(t,r){return t==null?{}:mB(t,r)}),xg=xB;function _B(t){for(var r,e=this;e instanceof Ia;){var n=mp(e);n.__index__=0,n.__values__=void 0,r?i.__wrapped__=n:r=n;var i=n;e=e.__wrapped__}return i.__wrapped__=t,r}function SB(t){return function(r){return t==null?void 0:An(t,r)}}function bB(t,r,e,n){for(var i=e-1,o=t.length;++i<o;)if(n(t[i],r))return i;return-1}var TB=Array.prototype,rc=TB.splice;function ff(t,r,e,n){var i=n?bB:ii,o=-1,a=r.length,l=t;for(t===r&&(r=ct(r)),e&&(l=Te(t,Rt(e)));++o<a;)for(var s=0,u=r[o],f=e?e(u):u;(s=i(l,f,s,n))>-1;)l!==t&&rc.call(l,s,1),rc.call(t,s,1);return t}function _g(t,r){return t&&t.length&&r&&r.length?ff(t,r):t}var RB=ie(_g),EB=RB;function LB(t,r,e){return t&&t.length&&r&&r.length?ff(t,r,ee(e)):t}function AB(t,r,e){return t&&t.length&&r&&r.length?ff(t,r,void 0,e):t}var MB=Array.prototype,IB=MB.splice;function Sg(t,r){for(var e=t?r.length:0,n=e-1;e--;){var i=r[e];if(e==n||i!==o){var o=i;br(i)?IB.call(t,i,1):rf(t,i)}}return t}var OB=Ar(function(t,r){var e=t==null?0:t.length,n=_u(t,r);return Sg(t,Te(r,function(i){return br(i,e)?+i:i}).sort(dg)),n}),BB=OB,DB=Math.floor,NB=Math.random;function hf(t,r){return t+DB(NB()*(r-t+1))}var PB=parseFloat,FB=Math.min,HB=Math.random;function zB(t,r,e){if(e&&typeof e!="boolean"&&at(t,r,e)&&(r=e=void 0),e===void 0&&(typeof r=="boolean"?(e=r,r=void 0):typeof t=="boolean"&&(e=t,t=void 0)),t===void 0&&r===void 0?(t=0,r=1):(t=Sr(t),r===void 0?(r=t,t=0):r=Sr(r)),t>r){var n=t;t=r,r=n}if(e||t%1||r%1){var i=HB();return FB(t+i*(r-t+PB("1e-"+((i+"").length-1))),r)}return hf(t,r)}var WB=Math.ceil,kB=Math.max;function GB(t,r,e,n){for(var i=-1,o=kB(WB((r-t)/(e||1)),0),a=Array(o);o--;)a[n?o:++i]=t,t+=e;return a}function bg(t){return function(r,e,n){return n&&typeof n!="number"&&at(r,e,n)&&(e=n=void 0),r=Sr(r),e===void 0?(e=r,r=0):e=Sr(e),n=n===void 0?r<e?1:-1:Sr(n),GB(r,e,n,t)}}var $B=bg(),$n=$B,YB=bg(!0),UB=YB,XB=256,VB=Ar(function(t,r){return Tr(t,XB,void 0,void 0,void 0,r)}),qB=VB;function Tg(t,r,e,n,i){return i(t,function(o,a,l){e=n?(n=!1,o):r(e,o,a,l)}),e}function Qa(t,r,e){var n=X(t)?Eu:Tg,i=arguments.length<3;return n(t,ee(r),e,i,jr)}function KB(t,r,e,n){var i=t==null?0:t.length;for(n&&i&&(e=t[--i]);i--;)e=r(e,t[i],i,t);return e}function ZB(t,r,e){var n=X(t)?KB:Tg,i=arguments.length<3;return n(t,ee(r),e,i,W0)}function jB(t,r){var e=X(t)?Zr:X0;return e(t,ja(ee(r)))}function QB(t,r){var e=[];if(!(t&&t.length))return e;var n=-1,i=[],o=t.length;for(r=ee(r);++n<o;){var a=t[n];r(a,n,t)&&(e.push(a),i.push(n))}return Sg(t,i),e}function JB(t,r,e){return(e?at(t,r,e):r===void 0)?r=1:r=ne(r),Ss(de(t),r)}function e8(){var t=arguments,r=de(t[0]);return t.length<3?r:r.replace(t[1],t[2])}var t8="Expected a function";function r8(t,r){if(typeof t!="function")throw new TypeError(t8);return r=r===void 0?r:ne(r),ie(t,r)}function n8(t,r,e){r=Vr(r,t);var n=-1,i=r.length;for(i||(i=1,t=void 0);++n<i;){var o=t==null?void 0:t[cr(r[n])];o===void 0&&(n=i,o=e),t=Xe(o)?o.call(t):o}return t}var i8=Array.prototype,o8=i8.reverse;function Rs(t){return t==null?t:o8.call(t)}var a8=Au("round"),l8=a8;function Rg(t){var r=t.length;return r?t[hf(0,r-1)]:void 0}function s8(t){return Rg(Ir(t))}function u8(t){var r=X(t)?Rg:s8;return r(t)}function Ja(t,r){var e=-1,n=t.length,i=n-1;for(r=r===void 0?n:r;++e<r;){var o=hf(e,i),a=t[o];t[o]=t[e],t[e]=a}return t.length=r,t}function f8(t,r){return Ja(ct(t),Mn(r,0,t.length))}function h8(t,r){var e=Ir(t);return Ja(e,Mn(r,0,e.length))}function d8(t,r,e){(e?at(t,r,e):r===void 0)?r=1:r=ne(r);var n=X(t)?f8:h8;return n(t,r)}function $i(t,r,e){return t==null?t:fo(t,r,e)}function c8(t,r,e,n){return n=typeof n=="function"?n:void 0,t==null?t:fo(t,r,e,n)}function v8(t){return Ja(ct(t))}function p8(t){return Ja(Ir(t))}function g8(t){var r=X(t)?v8:p8;return r(t)}var y8="[object Map]",C8="[object Set]";function Pn(t){if(t==null)return 0;if(gt(t))return hi(t)?di(t):t.length;var r=sr(t);return r==y8||r==C8?t.size:mu(t).length}function w8(t,r,e){var n=t==null?0:t.length;return n?(e&&typeof e!="number"&&at(t,r,e)?(r=0,e=n):(r=r==null?0:ne(r),e=e===void 0?n:ne(e)),Pt(t,r,e)):[]}var m8=ui(function(t,r,e){return t+(e?"_":"")+r.toLowerCase()}),x8=m8;function _8(t,r){var e;return jr(t,function(n,i,o){return e=r(n,i,o),!e}),!!e}function Eg(t,r,e){var n=X(t)?Du:_8;return e&&at(t,r,e)&&(r=void 0),n(t,ee(r))}var S8=ie(function(t,r){if(t==null)return[];var e=r.length;return e>1&&at(t,r[0],r[1])?r=[]:e>2&&at(r[0],r[1],r[2])&&(r=[r[0]]),cg(t,Ve(r,1),[])}),Lg=S8,b8=4294967295,T8=b8-1,R8=Math.floor,E8=Math.min;function df(t,r,e,n){var i=0,o=t==null?0:t.length;if(o===0)return 0;r=e(r);for(var a=r!==r,l=r===null,s=St(r),u=r===void 0;i<o;){var f=R8((i+o)/2),h=e(t[f]),d=h!==void 0,c=h===null,v=h===h,p=St(h);if(a)var g=n||v;else u?g=v&&(n||d):l?g=v&&d&&(n||!c):s?g=v&&d&&!c&&(n||!p):c||p?g=!1:g=n?h<=r:h<r;g?i=f+1:o=f}return E8(o,T8)}var L8=4294967295,A8=L8>>>1;function el(t,r,e){var n=0,i=t==null?n:t.length;if(typeof r=="number"&&r===r&&i<=A8){for(;n<i;){var o=n+i>>>1,a=t[o];a!==null&&!St(a)&&(e?a<=r:a<r)?n=o+1:i=o}return i}return df(t,r,st,e)}function M8(t,r){return el(t,r)}function I8(t,r,e){return df(t,r,ee(e))}function O8(t,r){var e=t==null?0:t.length;if(e){var n=el(t,r);if(n<e&&jt(t[n],r))return n}return-1}function B8(t,r){return el(t,r,!0)}function D8(t,r,e){return df(t,r,ee(e),!0)}function N8(t,r){var e=t==null?0:t.length;if(e){var n=el(t,r,!0)-1;if(jt(t[n],r))return n}return-1}function Ag(t,r){for(var e=-1,n=t.length,i=0,o=[];++e<n;){var a=t[e],l=r?r(a):a;if(!e||!jt(l,s)){var s=l;o[i++]=a===0?0:a}}return o}function P8(t){return t&&t.length?Ag(t):[]}function F8(t,r){return t&&t.length?Ag(t,ee(r)):[]}var H8=4294967295;function cf(t,r,e){return e&&typeof e!="number"&&at(t,r,e)&&(r=e=void 0),e=e===void 0?H8:e>>>0,e?(t=de(t),t&&(typeof r=="string"||r!=null&&!Zu(r))&&(r=bt(r),!r&&si(t))?Kr(qt(t),0,e):t.split(r,e)):[]}var z8="Expected a function",W8=Math.max;function k8(t,r){if(typeof t!="function")throw new TypeError(z8);return r=r==null?0:W8(ne(r),0),ie(function(e){var n=e[r],i=Kr(e,0,r);return n&&qr(i,n),Tt(t,this,i)})}var G8=ui(function(t,r,e){return t+(e?" ":"")+Ru(r)}),$8=G8;function Y8(t,r,e){return t=de(t),e=e==null?0:Mn(ne(e),0,t.length),r=bt(r),t.slice(e,e+r.length)==r}function U8(){return{}}function X8(){return""}function Mg(){return!0}var V8=Ma(function(t,r){return t-r},0),q8=V8;function K8(t){return t&&t.length?ef(t,st):0}function Ig(t,r){return t&&t.length?ef(t,ee(r)):0}function Z8(t){var r=t==null?0:t.length;return r?Pt(t,1,r):[]}function j8(t,r,e){return t&&t.length?(r=e||r===void 0?1:ne(r),Pt(t,0,r<0?0:r)):[]}function Q8(t,r,e){var n=t==null?0:t.length;return n?(r=e||r===void 0?1:ne(r),r=n-r,Pt(t,r<0?0:r,n)):[]}function J8(t,r){return t&&t.length?$a(t,ee(r),!1,!0):[]}function e3(t,r){return t&&t.length?$a(t,ee(r)):[]}function t3(t,r){return r(t),t}var Og=Object.prototype,r3=Og.hasOwnProperty;function nc(t,r,e,n){return t===void 0||jt(t,Og[e])&&!r3.call(n,e)?r:t}var n3={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function i3(t){return"\\"+n3[t]}var o3=/<%=([\s\S]+?)%>/g,Bg=o3,a3=/<%-([\s\S]+?)%>/g,l3=a3,s3=/<%([\s\S]+?)%>/g,u3=s3,f3={escape:l3,evaluate:u3,interpolate:Bg,variable:"",imports:{_:{escape:Uu}}},Es=f3,h3="Invalid `variable` option passed into `_.template`",d3=/\b__p \+= '';/g,c3=/\b(__p \+=) '' \+/g,v3=/(__e\(.*?\)|\b__t\)) \+\n'';/g,p3=/[()=,{}\[\]\/\s]/,g3=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Do=/($^)/,y3=/['\n\r\u2028\u2029\\]/g,C3=Object.prototype,ic=C3.hasOwnProperty;function w3(t,r,e){var n=Es.imports._.templateSettings||Es;e&&at(t,r,e)&&(r=void 0),t=de(t),r=hs({},r,n,nc);var i=hs({},r.imports,n.imports,nc),o=Ae(i),a=Vu(i,o),l,s,u=0,f=r.interpolate||Do,h="__p += '",d=RegExp((r.escape||Do).source+"|"+f.source+"|"+(f===Bg?g3:Do).source+"|"+(r.evaluate||Do).source+"|$","g"),c=ic.call(r,"sourceURL")?"//# sourceURL="+(r.sourceURL+"").replace(/\s/g," ")+`
`:"";t.replace(d,function(g,y,C,w,m,_){return C||(C=w),h+=t.slice(u,_).replace(y3,i3),y&&(l=!0,h+=`' +
__e(`+y+`) +
'`),m&&(s=!0,h+=`';
`+m+`;
__p += '`),C&&(h+=`' +
((__t = (`+C+`)) == null ? '' : __t) +
'`),u=_+g.length,g}),h+=`';
`;var v=ic.call(r,"variable")&&r.variable;if(!v)h=`with (obj) {
`+h+`
}
`;else if(p3.test(v))throw new Error(h3);h=(s?h.replace(d3,""):h).replace(c3,"$1").replace(v3,"$1;"),h="function("+(v||"obj")+`) {
`+(v?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(l?", __e = _.escape":"")+(s?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+h+`return __p
}`;var p=Fp(function(){return Function(o,c+"return "+h).apply(void 0,a)});if(p.source=h,Su(p))throw p;return p}var m3="Expected a function";function vf(t,r,e){var n=!0,i=!0;if(typeof t!="function")throw new TypeError(m3);return pe(e)&&(n="leading"in e?!!e.leading:n,i="trailing"in e?!!e.trailing:i),Gi(t,r,{leading:n,maxWait:r,trailing:i})}function tl(t,r){return r(t)}var x3=9007199254740991,Al=4294967295,_3=Math.min;function S3(t,r){if(t=ne(t),t<1||t>x3)return[];var e=Al,n=_3(t,Al);r=pr(r),t-=Al;for(var i=Cu(n,r);++e<t;)r(e);return i}function b3(){return this}function Dg(t,r){var e=t;return e instanceof ae&&(e=e.value()),Eu(r,function(n,i){return i.func.apply(i.thisArg,qr([n],i.args))},e)}function T3(){return Dg(this.__wrapped__,this.__actions__)}function R3(t){return de(t).toLowerCase()}function E3(t){return X(t)?Te(t,cr):St(t)?[t]:ct(Dp(de(t)))}var L3=9007199254740991;function A3(t){return t?Mn(ne(t),-9007199254740991,L3):t===0?t:0}function Yi(t){return de(t).toUpperCase()}function M3(t,r,e){var n=X(t),i=n||Yr(t)||li(t);if(r=ee(r),e==null){var o=t&&t.constructor;i?e=n?new o:[]:pe(t)?e=Xe(o)?ni(za(t)):{}:e={}}return(i?Ft:vr)(t,function(a,l,s){return r(e,a,l,s)}),e}function Ng(t,r){for(var e=t.length;e--&&ii(r,t[e],0)>-1;);return e}function Pg(t,r){for(var e=-1,n=t.length;++e<n&&ii(r,t[e],0)>-1;);return e}function I3(t,r,e){if(t=de(t),t&&(e||r===void 0))return pp(t);if(!t||!(r=bt(r)))return t;var n=qt(t),i=qt(r),o=Pg(n,i),a=Ng(n,i)+1;return Kr(n,o,a).join("")}function O3(t,r,e){if(t=de(t),t&&(e||r===void 0))return t.slice(0,vp(t)+1);if(!t||!(r=bt(r)))return t;var n=qt(t),i=Ng(n,qt(r))+1;return Kr(n,0,i).join("")}var B3=/^\s+/;function D3(t,r,e){if(t=de(t),t&&(e||r===void 0))return t.replace(B3,"");if(!t||!(r=bt(r)))return t;var n=qt(t),i=Pg(n,qt(r));return Kr(n,i).join("")}var N3=30,P3="...",F3=/\w*$/;function H3(t,r){var e=N3,n=P3;if(pe(r)){var i="separator"in r?r.separator:i;e="length"in r?ne(r.length):e,n="omission"in r?bt(r.omission):n}t=de(t);var o=t.length;if(si(t)){var a=qt(t);o=a.length}if(e>=o)return t;var l=e-di(n);if(l<1)return n;var s=a?Kr(a,0,l).join(""):t.slice(0,l);if(i===void 0)return s+n;if(a&&(l+=s.length-l),Zu(i)){if(t.slice(l).search(i)){var u,f=s;for(i.global||(i=RegExp(i.source,de(F3.exec(i))+"g")),i.lastIndex=0;u=i.exec(f);)var h=u.index;s=s.slice(0,h===void 0?l:h)}}else if(t.indexOf(bt(i),l)!=l){var d=s.lastIndexOf(i);d>-1&&(s=s.slice(0,d))}return s+n}function z3(t){return Rp(t,1)}var W3={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},k3=Lu(W3),G3=k3,Fg=/&(?:amp|lt|gt|quot|#39);/g,$3=RegExp(Fg.source);function Y3(t){return t=de(t),t&&$3.test(t)?t.replace(Fg,G3):t}var U3=1/0,X3=Gn&&1/Wa(new Gn([,-0]))[1]==U3?function(t){return new Gn(t)}:Oa,V3=X3,q3=200;function Ur(t,r,e){var n=-1,i=Da,o=t.length,a=!0,l=[],s=l;if(e)a=!1,i=$u;else if(o>=q3){var u=r?null:V3(t);if(u)return Wa(u);a=!1,i=ki,s=new xn}else s=r?[]:l;e:for(;++n<o;){var f=t[n],h=r?r(f):f;if(f=e||f!==0?f:0,a&&h===h){for(var d=s.length;d--;)if(s[d]===h)continue e;r&&s.push(h),l.push(f)}else i(s,h,e)||(s!==l&&s.push(h),l.push(f))}return l}var K3=ie(function(t){return Ur(Ve(t,1,Oe,!0))}),Z3=K3,j3=ie(function(t){var r=ge(t);return Oe(r)&&(r=void 0),Ur(Ve(t,1,Oe,!0),ee(r))}),Q3=j3,J3=ie(function(t){var r=ge(t);return r=typeof r=="function"?r:void 0,Ur(Ve(t,1,Oe,!0),void 0,r)}),eD=J3;function mr(t){return t&&t.length?Ur(t):[]}function tD(t,r){return t&&t.length?Ur(t,ee(r)):[]}function rD(t,r){return r=typeof r=="function"?r:void 0,t&&t.length?Ur(t,void 0,r):[]}var nD=0;function iD(t){var r=++nD;return de(t)+r}function Ls(t,r){return t==null?!0:rf(t,r)}var oD=Math.max;function pf(t){if(!(t&&t.length))return[];var r=0;return t=Zr(t,function(e){if(Oe(e))return r=oD(e.length,r),!0}),Cu(r,function(e){return Te(t,Hu(e))})}function Hg(t,r){if(!(t&&t.length))return[];var e=pf(t);return r==null?e:Te(e,function(n){return Tt(r,void 0,n)})}function zg(t,r,e,n){return fo(t,r,e(An(t,r)),n)}function aD(t,r,e){return t==null?t:zg(t,r,pr(e))}function lD(t,r,e,n){return n=typeof n=="function"?n:void 0,t==null?t:zg(t,r,pr(e),n)}var sD=ui(function(t,r,e){return t+(e?" ":"")+r.toUpperCase()}),uD=sD;function fD(t){return t==null?[]:Vu(t,yt(t))}var hD=ie(function(t,r){return Oe(t)?lo(t,r):[]}),dD=hD;function cD(t,r){return mg(pr(r),t)}var vD=Ar(function(t){var r=t.length,e=r?t[0]:0,n=this.__wrapped__,i=function(o){return _u(o,t)};return r>1||this.__actions__.length||!(n instanceof ae)||!br(e)?this.thru(i):(n=n.slice(e,+e+(r?1:0)),n.__actions__.push({func:tl,args:[i],thisArg:void 0}),new Dt(n,this.__chain__).thru(function(o){return r&&!o.length&&o.push(void 0),o}))}),pD=vD;function gD(){return u0(this)}function yD(){var t=this.__wrapped__;if(t instanceof ae){var r=t;return this.__actions__.length&&(r=new ae(this)),r=r.reverse(),r.__actions__.push({func:tl,args:[Rs],thisArg:void 0}),new Dt(r,this.__chain__)}return this.thru(Rs)}function gf(t,r,e){var n=t.length;if(n<2)return n?Ur(t[0]):[];for(var i=-1,o=Array(n);++i<n;)for(var a=t[i],l=-1;++l<n;)l!=i&&(o[i]=lo(o[i]||a,t[l],r,e));return Ur(Ve(o,1),r,e)}var CD=ie(function(t){return gf(Zr(t,Oe))}),wD=CD,mD=ie(function(t){var r=ge(t);return Oe(r)&&(r=void 0),gf(Zr(t,Oe),ee(r))}),xD=mD,_D=ie(function(t){var r=ge(t);return r=typeof r=="function"?r:void 0,gf(Zr(t,Oe),void 0,r)}),SD=_D,bD=ie(pf),rl=bD;function Wg(t,r,e){for(var n=-1,i=t.length,o=r.length,a={};++n<i;){var l=n<o?r[n]:void 0;e(a,t[n],l)}return a}function TD(t,r){return Wg(t||[],r||[],ro)}function RD(t,r){return Wg(t||[],r||[],fo)}var ED=ie(function(t){var r=t.length,e=r>1?t[r-1]:void 0;return e=typeof e=="function"?(t.pop(),e):void 0,Hg(t,e)}),LD=ED,W={chunk:hR,compact:Ut,concat:Nn,difference:F0,differenceBy:hA,differenceWith:H0,drop:pA,dropRight:gA,dropRightWhile:yA,dropWhile:CA,fill:kA,findIndex:Zn,findLastIndex:K0,flatten:Np,flattenDeep:j0,flattenDepth:JA,fromPairs:gM,head:fi,indexOf:qa,initial:PM,intersection:eg,intersectionBy:WM,intersectionWith:GM,join:zI,lastIndexOf:VI,nth:_O,pull:EB,pullAll:_g,pullAllBy:LB,pullAllWith:AB,pullAt:BB,remove:QB,reverse:Rs,slice:w8,sortedIndex:M8,sortedIndexBy:I8,sortedIndexOf:O8,sortedLastIndex:B8,sortedLastIndexBy:D8,sortedLastIndexOf:N8,sortedUniq:P8,sortedUniqBy:F8,tail:Z8,take:j8,takeRight:Q8,takeRightWhile:J8,takeWhile:e3,union:Z3,unionBy:Q3,unionWith:eD,uniq:mr,uniqBy:tD,uniqWith:rD,unzip:pf,unzipWith:Hg,without:dD,xor:wD,xorBy:xD,xorWith:SD,zip:rl,zipObject:TD,zipObjectDeep:RD,zipWith:LD},ye={countBy:kL,every:Ya,filter:Mr,find:Je,findLast:Ua,flatMap:so,flatMapDeep:ZA,flatMapDepth:jA,forEach:J,forEachRight:_A,groupBy:_M,includes:ot,invokeMap:tI,keyBy:$I,map:oe,orderBy:af,partition:wB,reduce:Qa,reduceRight:ZB,reject:jB,sample:u8,sampleSize:d8,shuffle:g8,size:Pn,some:Eg,sortBy:Lg},AD={now:Go},Me={after:y_,ary:Rp,before:Hp,bind:zp,bindKey:VT,curry:Wu,curryRight:ku,debounce:Gi,defer:oA,delay:lA,flip:tM,memoize:Ln,once:MO,overArgs:zO,partial:mg,partialRight:yB,rearg:qB,rest:r8,spread:k8,throttle:vf,unary:z3,wrap:cD},V={castArray:iR,clone:oo,cloneDeep:ys,cloneDeepWith:VE,cloneWith:KE,conformsTo:BL,eq:jt,gt:bM,gte:RM,isArguments:wn,isArrayBuffer:oI,isArrayLike:gt,isArrayLikeObject:Oe,isBoolean:tr,isBuffer:Yr,isDate:fI,isElement:hI,isEmpty:D,isEqual:Ue,isEqualWith:gI,isError:Su,isFinite:CI,isFunction:Xe,isInteger:ig,isLength:Pa,isMap:y0,isMatch:wI,isMatchWith:mI,isNaN:og,isNative:TI,isNil:Fe,isNull:ag,isNumber:it,isObjectLike:Le,isPlainObject:io,isRegExp:Zu,isSafeInteger:MI,isSet:C0,isString:hi,isSymbol:St,isTypedArray:li,isUndefined:Ka,isWeakMap:OI,isWeakSet:DI,lt:QI,lte:eO,toArray:ug,toFinite:Sr,toLength:U0,toNumber:xt,toPlainObject:D0,toSafeInteger:A3,toString:de},ut={add:l_,ceil:sR,divide:vA,floor:nM,max:jn,maxBy:Ju,mean:aO,meanBy:lO,min:tf,minBy:cO,multiply:gO,round:l8,subtract:q8,sum:K8,sumBy:Ig},yf={clamp:sa,inRange:xs,random:zB},j={assign:Bp,assignIn:$b,assignInWith:hs,assignWith:Xb,at:AT,create:GL,defaults:QL,defaultsDeep:rA,findKey:YA,findLastKey:qA,forIn:J0,forInRight:cM,forOwn:vM,forOwnRight:pM,functions:yM,functionsIn:CM,get:K,has:ms,hasIn:_n,invert:VM,invertBy:jM,invoke:JM,keysIn:yt,mapKeys:lg,mapValues:tO,merge:fa,mergeWith:Gu,omit:nf,omitBy:AO,pick:xg,pickBy:of,result:n8,set:$i,setWith:c8,toPairs:AA,toPairsIn:IA,transform:M3,unset:Ls,update:aD,updateWith:lD,values:Ir,valuesIn:fD},gr={at:pD,chain:u0,commit:ZE,next:xO,plant:_B,reverse:yD,tap:t3,toIterator:b3,value:T3,wrapperChain:gD},ce={camelCase:nR,capitalize:Vp,deburr:qp,endsWith:SA,escape:Uu,escapeRegExp:FA,kebabCase:kI,lowerCase:ju,lowerFirst:ZI,pad:uB,padEnd:fB,padStart:hB,parseInt:vB,repeat:JB,replace:e8,snakeCase:x8,split:cf,startCase:$8,startsWith:Y8,template:w3,templateSettings:Es,toLower:R3,toUpper:Yi,trim:I3,trimEnd:O3,trimStart:D3,truncate:H3,unescape:Y3,upperCase:uD,upperFirst:Ru,words:s0},ve={attempt:Fp,bindAll:$T,cond:A0,conforms:OL,constant:kn,defaultTo:KL,flow:fM,flowRight:dM,iteratee:PI,matches:_s,matchesProperty:iO,method:fO,methodOf:dO,noop:Oa,nthArg:SO,over:DO,overEvery:kO,overSome:$O,property:L0,propertyOf:SB,range:$n,rangeRight:UB,stubArray:Mu,stubFalse:wu,stubObject:U8,stubString:X8,stubTrue:Mg,times:S3,toPath:E3,uniqueId:iD};function MD(){var t=new ae(this.__wrapped__);return t.__actions__=ct(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=ct(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=ct(this.__views__),t}function ID(){if(this.__filtered__){var t=new ae(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}var OD=Math.max,BD=Math.min;function DD(t,r,e){for(var n=-1,i=e.length;++n<i;){var o=e[n],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":r-=a;break;case"take":r=BD(r,t+a);break;case"takeRight":t=OD(t,r-a);break}}return{start:t,end:r}}var ND=1,PD=2,FD=Math.min;function HD(){var t=this.__wrapped__.value(),r=this.__dir__,e=X(t),n=r<0,i=e?t.length:0,o=DD(0,i,this.__views__),a=o.start,l=o.end,s=l-a,u=n?l:a-1,f=this.__iteratees__,h=f.length,d=0,c=FD(s,this.__takeCount__);if(!e||!n&&i==s&&c==s)return Dg(t,this.__actions__);var v=[];e:for(;s--&&d<c;){u+=r;for(var p=-1,g=t[u];++p<h;){var y=f[p],C=y.iteratee,w=y.type,m=C(g);if(w==PD)g=m;else if(!m){if(w==ND)continue e;break e}}v[d++]=g}return v}/**
 * @license
 * Lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash modularize exports="es" -o ./`
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var zD="4.17.21",WD=2,kD=1,GD=3,kg=4294967295,$D=Array.prototype,YD=Object.prototype,Gg=YD.hasOwnProperty,oc=Qe?Qe.iterator:void 0,UD=Math.max,ac=Math.min,Cf=function(t){return function(r,e,n){if(n==null){var i=pe(e),o=i&&Ae(e),a=o&&o.length&&Xa(e,o);(a?a.length:i)||(n=e,e=r,r=this)}return t(r,e,n)}}(vO);x.after=Me.after;x.ary=Me.ary;x.assign=j.assign;x.assignIn=j.assignIn;x.assignInWith=j.assignInWith;x.assignWith=j.assignWith;x.at=j.at;x.before=Me.before;x.bind=Me.bind;x.bindAll=ve.bindAll;x.bindKey=Me.bindKey;x.castArray=V.castArray;x.chain=gr.chain;x.chunk=W.chunk;x.compact=W.compact;x.concat=W.concat;x.cond=ve.cond;x.conforms=ve.conforms;x.constant=ve.constant;x.countBy=ye.countBy;x.create=j.create;x.curry=Me.curry;x.curryRight=Me.curryRight;x.debounce=Me.debounce;x.defaults=j.defaults;x.defaultsDeep=j.defaultsDeep;x.defer=Me.defer;x.delay=Me.delay;x.difference=W.difference;x.differenceBy=W.differenceBy;x.differenceWith=W.differenceWith;x.drop=W.drop;x.dropRight=W.dropRight;x.dropRightWhile=W.dropRightWhile;x.dropWhile=W.dropWhile;x.fill=W.fill;x.filter=ye.filter;x.flatMap=ye.flatMap;x.flatMapDeep=ye.flatMapDeep;x.flatMapDepth=ye.flatMapDepth;x.flatten=W.flatten;x.flattenDeep=W.flattenDeep;x.flattenDepth=W.flattenDepth;x.flip=Me.flip;x.flow=ve.flow;x.flowRight=ve.flowRight;x.fromPairs=W.fromPairs;x.functions=j.functions;x.functionsIn=j.functionsIn;x.groupBy=ye.groupBy;x.initial=W.initial;x.intersection=W.intersection;x.intersectionBy=W.intersectionBy;x.intersectionWith=W.intersectionWith;x.invert=j.invert;x.invertBy=j.invertBy;x.invokeMap=ye.invokeMap;x.iteratee=ve.iteratee;x.keyBy=ye.keyBy;x.keys=Ae;x.keysIn=j.keysIn;x.map=ye.map;x.mapKeys=j.mapKeys;x.mapValues=j.mapValues;x.matches=ve.matches;x.matchesProperty=ve.matchesProperty;x.memoize=Me.memoize;x.merge=j.merge;x.mergeWith=j.mergeWith;x.method=ve.method;x.methodOf=ve.methodOf;x.mixin=Cf;x.negate=ja;x.nthArg=ve.nthArg;x.omit=j.omit;x.omitBy=j.omitBy;x.once=Me.once;x.orderBy=ye.orderBy;x.over=ve.over;x.overArgs=Me.overArgs;x.overEvery=ve.overEvery;x.overSome=ve.overSome;x.partial=Me.partial;x.partialRight=Me.partialRight;x.partition=ye.partition;x.pick=j.pick;x.pickBy=j.pickBy;x.property=ve.property;x.propertyOf=ve.propertyOf;x.pull=W.pull;x.pullAll=W.pullAll;x.pullAllBy=W.pullAllBy;x.pullAllWith=W.pullAllWith;x.pullAt=W.pullAt;x.range=ve.range;x.rangeRight=ve.rangeRight;x.rearg=Me.rearg;x.reject=ye.reject;x.remove=W.remove;x.rest=Me.rest;x.reverse=W.reverse;x.sampleSize=ye.sampleSize;x.set=j.set;x.setWith=j.setWith;x.shuffle=ye.shuffle;x.slice=W.slice;x.sortBy=ye.sortBy;x.sortedUniq=W.sortedUniq;x.sortedUniqBy=W.sortedUniqBy;x.split=ce.split;x.spread=Me.spread;x.tail=W.tail;x.take=W.take;x.takeRight=W.takeRight;x.takeRightWhile=W.takeRightWhile;x.takeWhile=W.takeWhile;x.tap=gr.tap;x.throttle=Me.throttle;x.thru=tl;x.toArray=V.toArray;x.toPairs=j.toPairs;x.toPairsIn=j.toPairsIn;x.toPath=ve.toPath;x.toPlainObject=V.toPlainObject;x.transform=j.transform;x.unary=Me.unary;x.union=W.union;x.unionBy=W.unionBy;x.unionWith=W.unionWith;x.uniq=W.uniq;x.uniqBy=W.uniqBy;x.uniqWith=W.uniqWith;x.unset=j.unset;x.unzip=W.unzip;x.unzipWith=W.unzipWith;x.update=j.update;x.updateWith=j.updateWith;x.values=j.values;x.valuesIn=j.valuesIn;x.without=W.without;x.words=ce.words;x.wrap=Me.wrap;x.xor=W.xor;x.xorBy=W.xorBy;x.xorWith=W.xorWith;x.zip=W.zip;x.zipObject=W.zipObject;x.zipObjectDeep=W.zipObjectDeep;x.zipWith=W.zipWith;x.entries=j.toPairs;x.entriesIn=j.toPairsIn;x.extend=j.assignIn;x.extendWith=j.assignInWith;Cf(x,x);x.add=ut.add;x.attempt=ve.attempt;x.camelCase=ce.camelCase;x.capitalize=ce.capitalize;x.ceil=ut.ceil;x.clamp=yf.clamp;x.clone=V.clone;x.cloneDeep=V.cloneDeep;x.cloneDeepWith=V.cloneDeepWith;x.cloneWith=V.cloneWith;x.conformsTo=V.conformsTo;x.deburr=ce.deburr;x.defaultTo=ve.defaultTo;x.divide=ut.divide;x.endsWith=ce.endsWith;x.eq=V.eq;x.escape=ce.escape;x.escapeRegExp=ce.escapeRegExp;x.every=ye.every;x.find=ye.find;x.findIndex=W.findIndex;x.findKey=j.findKey;x.findLast=ye.findLast;x.findLastIndex=W.findLastIndex;x.findLastKey=j.findLastKey;x.floor=ut.floor;x.forEach=ye.forEach;x.forEachRight=ye.forEachRight;x.forIn=j.forIn;x.forInRight=j.forInRight;x.forOwn=j.forOwn;x.forOwnRight=j.forOwnRight;x.get=j.get;x.gt=V.gt;x.gte=V.gte;x.has=j.has;x.hasIn=j.hasIn;x.head=W.head;x.identity=st;x.includes=ye.includes;x.indexOf=W.indexOf;x.inRange=yf.inRange;x.invoke=j.invoke;x.isArguments=V.isArguments;x.isArray=X;x.isArrayBuffer=V.isArrayBuffer;x.isArrayLike=V.isArrayLike;x.isArrayLikeObject=V.isArrayLikeObject;x.isBoolean=V.isBoolean;x.isBuffer=V.isBuffer;x.isDate=V.isDate;x.isElement=V.isElement;x.isEmpty=V.isEmpty;x.isEqual=V.isEqual;x.isEqualWith=V.isEqualWith;x.isError=V.isError;x.isFinite=V.isFinite;x.isFunction=V.isFunction;x.isInteger=V.isInteger;x.isLength=V.isLength;x.isMap=V.isMap;x.isMatch=V.isMatch;x.isMatchWith=V.isMatchWith;x.isNaN=V.isNaN;x.isNative=V.isNative;x.isNil=V.isNil;x.isNull=V.isNull;x.isNumber=V.isNumber;x.isObject=pe;x.isObjectLike=V.isObjectLike;x.isPlainObject=V.isPlainObject;x.isRegExp=V.isRegExp;x.isSafeInteger=V.isSafeInteger;x.isSet=V.isSet;x.isString=V.isString;x.isSymbol=V.isSymbol;x.isTypedArray=V.isTypedArray;x.isUndefined=V.isUndefined;x.isWeakMap=V.isWeakMap;x.isWeakSet=V.isWeakSet;x.join=W.join;x.kebabCase=ce.kebabCase;x.last=ge;x.lastIndexOf=W.lastIndexOf;x.lowerCase=ce.lowerCase;x.lowerFirst=ce.lowerFirst;x.lt=V.lt;x.lte=V.lte;x.max=ut.max;x.maxBy=ut.maxBy;x.mean=ut.mean;x.meanBy=ut.meanBy;x.min=ut.min;x.minBy=ut.minBy;x.stubArray=ve.stubArray;x.stubFalse=ve.stubFalse;x.stubObject=ve.stubObject;x.stubString=ve.stubString;x.stubTrue=ve.stubTrue;x.multiply=ut.multiply;x.nth=W.nth;x.noop=ve.noop;x.now=AD.now;x.pad=ce.pad;x.padEnd=ce.padEnd;x.padStart=ce.padStart;x.parseInt=ce.parseInt;x.random=yf.random;x.reduce=ye.reduce;x.reduceRight=ye.reduceRight;x.repeat=ce.repeat;x.replace=ce.replace;x.result=j.result;x.round=ut.round;x.sample=ye.sample;x.size=ye.size;x.snakeCase=ce.snakeCase;x.some=ye.some;x.sortedIndex=W.sortedIndex;x.sortedIndexBy=W.sortedIndexBy;x.sortedIndexOf=W.sortedIndexOf;x.sortedLastIndex=W.sortedLastIndex;x.sortedLastIndexBy=W.sortedLastIndexBy;x.sortedLastIndexOf=W.sortedLastIndexOf;x.startCase=ce.startCase;x.startsWith=ce.startsWith;x.subtract=ut.subtract;x.sum=ut.sum;x.sumBy=ut.sumBy;x.template=ce.template;x.times=ve.times;x.toFinite=V.toFinite;x.toInteger=ne;x.toLength=V.toLength;x.toLower=ce.toLower;x.toNumber=V.toNumber;x.toSafeInteger=V.toSafeInteger;x.toString=V.toString;x.toUpper=ce.toUpper;x.trim=ce.trim;x.trimEnd=ce.trimEnd;x.trimStart=ce.trimStart;x.truncate=ce.truncate;x.unescape=ce.unescape;x.uniqueId=ve.uniqueId;x.upperCase=ce.upperCase;x.upperFirst=ce.upperFirst;x.each=ye.forEach;x.eachRight=ye.forEachRight;x.first=W.head;Cf(x,function(){var t={};return vr(x,function(r,e){Gg.call(x.prototype,e)||(t[e]=r)}),t}(),{chain:!1});x.VERSION=zD;(x.templateSettings=ce.templateSettings).imports._=x;Ft(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){x[t].placeholder=x});Ft(["drop","take"],function(t,r){ae.prototype[t]=function(e){e=e===void 0?1:UD(ne(e),0);var n=this.__filtered__&&!r?new ae(this):this.clone();return n.__filtered__?n.__takeCount__=ac(e,n.__takeCount__):n.__views__.push({size:ac(e,kg),type:t+(n.__dir__<0?"Right":"")}),n},ae.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}});Ft(["filter","map","takeWhile"],function(t,r){var e=r+1,n=e==kD||e==GD;ae.prototype[t]=function(i){var o=this.clone();return o.__iteratees__.push({iteratee:ee(i),type:e}),o.__filtered__=o.__filtered__||n,o}});Ft(["head","last"],function(t,r){var e="take"+(r?"Right":"");ae.prototype[t]=function(){return this[e](1).value()[0]}});Ft(["initial","tail"],function(t,r){var e="drop"+(r?"":"Right");ae.prototype[t]=function(){return this.__filtered__?new ae(this):this[e](1)}});ae.prototype.compact=function(){return this.filter(st)};ae.prototype.find=function(t){return this.filter(t).head()};ae.prototype.findLast=function(t){return this.reverse().find(t)};ae.prototype.invokeMap=ie(function(t,r){return typeof t=="function"?new ae(this):this.map(function(e){return uo(e,t,r)})});ae.prototype.reject=function(t){return this.filter(ja(ee(t)))};ae.prototype.slice=function(t,r){t=ne(t);var e=this;return e.__filtered__&&(t>0||r<0)?new ae(e):(t<0?e=e.takeRight(-t):t&&(e=e.drop(t)),r!==void 0&&(r=ne(r),e=r<0?e.dropRight(-r):e.take(r-t)),e)};ae.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()};ae.prototype.toArray=function(){return this.take(kg)};vr(ae.prototype,function(t,r){var e=/^(?:filter|find|map|reject)|While$/.test(r),n=/^(?:head|last)$/.test(r),i=x[n?"take"+(r=="last"?"Right":""):r],o=n||/^find/.test(r);i&&(x.prototype[r]=function(){var a=this.__wrapped__,l=n?[1]:arguments,s=a instanceof ae,u=l[0],f=s||X(a),h=function(y){var C=i.apply(x,qr([y],l));return n&&d?C[0]:C};f&&e&&typeof u=="function"&&u.length!=1&&(s=f=!1);var d=this.__chain__,c=!!this.__actions__.length,v=o&&!d,p=s&&!c;if(!o&&f){a=p?a:new ae(this);var g=t.apply(a,l);return g.__actions__.push({func:tl,args:[h],thisArg:void 0}),new Dt(g,d)}return v&&p?t.apply(this,l):(g=this.thru(h),v?n?g.value()[0]:g.value():g)})});Ft(["pop","push","shift","sort","splice","unshift"],function(t){var r=$D[t],e=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",n=/^(?:pop|shift)$/.test(t);x.prototype[t]=function(){var i=arguments;if(n&&!this.__chain__){var o=this.value();return r.apply(X(o)?o:[],i)}return this[e](function(a){return r.apply(X(a)?a:[],i)})}});vr(ae.prototype,function(t,r){var e=x[r];if(e){var n=e.name+"";Gg.call(Wn,n)||(Wn[n]=[]),Wn[n].push({name:r,func:e})}});Wn[Na(void 0,WD).name]=[{name:"wrapper",func:void 0}];ae.prototype.clone=MD;ae.prototype.reverse=ID;ae.prototype.value=HD;x.prototype.at=gr.at;x.prototype.chain=gr.wrapperChain;x.prototype.commit=gr.commit;x.prototype.next=gr.next;x.prototype.plant=gr.plant;x.prototype.reverse=gr.reverse;x.prototype.toJSON=x.prototype.valueOf=x.prototype.value=gr.value;x.prototype.first=x.prototype.head;oc&&(x.prototype[oc]=gr.toIterator);function da(t){"@babel/helpers - typeof";return da=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},da(t)}var XD=/^\s+/,VD=/\s+$/;function $(t,r){if(t=t||"",r=r||{},t instanceof $)return t;if(!(this instanceof $))return new $(t,r);var e=qD(t);this._originalInput=t,this._r=e.r,this._g=e.g,this._b=e.b,this._a=e.a,this._roundA=Math.round(100*this._a)/100,this._format=r.format||e.format,this._gradientType=r.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=e.ok}$.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var r=this.toRgb();return(r.r*299+r.g*587+r.b*114)/1e3},getLuminance:function(){var r=this.toRgb(),e,n,i,o,a,l;return e=r.r/255,n=r.g/255,i=r.b/255,e<=.03928?o=e/12.92:o=Math.pow((e+.055)/1.055,2.4),n<=.03928?a=n/12.92:a=Math.pow((n+.055)/1.055,2.4),i<=.03928?l=i/12.92:l=Math.pow((i+.055)/1.055,2.4),.2126*o+.7152*a+.0722*l},setAlpha:function(r){return this._a=$g(r),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var r=sc(this._r,this._g,this._b);return{h:r.h*360,s:r.s,v:r.v,a:this._a}},toHsvString:function(){var r=sc(this._r,this._g,this._b),e=Math.round(r.h*360),n=Math.round(r.s*100),i=Math.round(r.v*100);return this._a==1?"hsv("+e+", "+n+"%, "+i+"%)":"hsva("+e+", "+n+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var r=lc(this._r,this._g,this._b);return{h:r.h*360,s:r.s,l:r.l,a:this._a}},toHslString:function(){var r=lc(this._r,this._g,this._b),e=Math.round(r.h*360),n=Math.round(r.s*100),i=Math.round(r.l*100);return this._a==1?"hsl("+e+", "+n+"%, "+i+"%)":"hsla("+e+", "+n+"%, "+i+"%, "+this._roundA+")"},toHex:function(r){return uc(this._r,this._g,this._b,r)},toHexString:function(r){return"#"+this.toHex(r)},toHex8:function(r){return QD(this._r,this._g,this._b,this._a,r)},toHex8String:function(r){return"#"+this.toHex8(r)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(be(this._r,255)*100)+"%",g:Math.round(be(this._g,255)*100)+"%",b:Math.round(be(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(be(this._r,255)*100)+"%, "+Math.round(be(this._g,255)*100)+"%, "+Math.round(be(this._b,255)*100)+"%)":"rgba("+Math.round(be(this._r,255)*100)+"%, "+Math.round(be(this._g,255)*100)+"%, "+Math.round(be(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:f4[uc(this._r,this._g,this._b,!0)]||!1},toFilter:function(r){var e="#"+fc(this._r,this._g,this._b,this._a),n=e,i=this._gradientType?"GradientType = 1, ":"";if(r){var o=$(r);n="#"+fc(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+e+",endColorstr="+n+")"},toString:function(r){var e=!!r;r=r||this._format;var n=!1,i=this._a<1&&this._a>=0,o=!e&&i&&(r==="hex"||r==="hex6"||r==="hex3"||r==="hex4"||r==="hex8"||r==="name");return o?r==="name"&&this._a===0?this.toName():this.toRgbString():(r==="rgb"&&(n=this.toRgbString()),r==="prgb"&&(n=this.toPercentageRgbString()),(r==="hex"||r==="hex6")&&(n=this.toHexString()),r==="hex3"&&(n=this.toHexString(!0)),r==="hex4"&&(n=this.toHex8String(!0)),r==="hex8"&&(n=this.toHex8String()),r==="name"&&(n=this.toName()),r==="hsl"&&(n=this.toHslString()),r==="hsv"&&(n=this.toHsvString()),n||this.toHexString())},clone:function(){return $(this.toString())},_applyModification:function(r,e){var n=r.apply(null,[this].concat([].slice.call(e)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(r4,arguments)},brighten:function(){return this._applyModification(n4,arguments)},darken:function(){return this._applyModification(i4,arguments)},desaturate:function(){return this._applyModification(JD,arguments)},saturate:function(){return this._applyModification(e4,arguments)},greyscale:function(){return this._applyModification(t4,arguments)},spin:function(){return this._applyModification(o4,arguments)},_applyCombination:function(r,e){return r.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(s4,arguments)},complement:function(){return this._applyCombination(a4,arguments)},monochromatic:function(){return this._applyCombination(u4,arguments)},splitcomplement:function(){return this._applyCombination(l4,arguments)},triad:function(){return this._applyCombination(hc,[3])},tetrad:function(){return this._applyCombination(hc,[4])}};$.fromRatio=function(t,r){if(da(t)=="object"){var e={};for(var n in t)t.hasOwnProperty(n)&&(n==="a"?e[n]=t[n]:e[n]=_i(t[n]));t=e}return $(t,r)};function qD(t){var r={r:0,g:0,b:0},e=1,n=null,i=null,o=null,a=!1,l=!1;return typeof t=="string"&&(t=v4(t)),da(t)=="object"&&(wr(t.r)&&wr(t.g)&&wr(t.b)?(r=KD(t.r,t.g,t.b),a=!0,l=String(t.r).substr(-1)==="%"?"prgb":"rgb"):wr(t.h)&&wr(t.s)&&wr(t.v)?(n=_i(t.s),i=_i(t.v),r=jD(t.h,n,i),a=!0,l="hsv"):wr(t.h)&&wr(t.s)&&wr(t.l)&&(n=_i(t.s),o=_i(t.l),r=ZD(t.h,n,o),a=!0,l="hsl"),t.hasOwnProperty("a")&&(e=t.a)),e=$g(e),{ok:a,format:t.format||l,r:Math.min(255,Math.max(r.r,0)),g:Math.min(255,Math.max(r.g,0)),b:Math.min(255,Math.max(r.b,0)),a:e}}function KD(t,r,e){return{r:be(t,255)*255,g:be(r,255)*255,b:be(e,255)*255}}function lc(t,r,e){t=be(t,255),r=be(r,255),e=be(e,255);var n=Math.max(t,r,e),i=Math.min(t,r,e),o,a,l=(n+i)/2;if(n==i)o=a=0;else{var s=n-i;switch(a=l>.5?s/(2-n-i):s/(n+i),n){case t:o=(r-e)/s+(r<e?6:0);break;case r:o=(e-t)/s+2;break;case e:o=(t-r)/s+4;break}o/=6}return{h:o,s:a,l}}function ZD(t,r,e){var n,i,o;t=be(t,360),r=be(r,100),e=be(e,100);function a(u,f,h){return h<0&&(h+=1),h>1&&(h-=1),h<1/6?u+(f-u)*6*h:h<1/2?f:h<2/3?u+(f-u)*(2/3-h)*6:u}if(r===0)n=i=o=e;else{var l=e<.5?e*(1+r):e+r-e*r,s=2*e-l;n=a(s,l,t+1/3),i=a(s,l,t),o=a(s,l,t-1/3)}return{r:n*255,g:i*255,b:o*255}}function sc(t,r,e){t=be(t,255),r=be(r,255),e=be(e,255);var n=Math.max(t,r,e),i=Math.min(t,r,e),o,a,l=n,s=n-i;if(a=n===0?0:s/n,n==i)o=0;else{switch(n){case t:o=(r-e)/s+(r<e?6:0);break;case r:o=(e-t)/s+2;break;case e:o=(t-r)/s+4;break}o/=6}return{h:o,s:a,v:l}}function jD(t,r,e){t=be(t,360)*6,r=be(r,100),e=be(e,100);var n=Math.floor(t),i=t-n,o=e*(1-r),a=e*(1-i*r),l=e*(1-(1-i)*r),s=n%6,u=[e,a,o,o,l,e][s],f=[l,e,e,a,o,o][s],h=[o,o,l,e,e,a][s];return{r:u*255,g:f*255,b:h*255}}function uc(t,r,e,n){var i=[Gt(Math.round(t).toString(16)),Gt(Math.round(r).toString(16)),Gt(Math.round(e).toString(16))];return n&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function QD(t,r,e,n,i){var o=[Gt(Math.round(t).toString(16)),Gt(Math.round(r).toString(16)),Gt(Math.round(e).toString(16)),Gt(Yg(n))];return i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}function fc(t,r,e,n){var i=[Gt(Yg(n)),Gt(Math.round(t).toString(16)),Gt(Math.round(r).toString(16)),Gt(Math.round(e).toString(16))];return i.join("")}$.equals=function(t,r){return!t||!r?!1:$(t).toRgbString()==$(r).toRgbString()};$.random=function(){return $.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function JD(t,r){r=r===0?0:r||10;var e=$(t).toHsl();return e.s-=r/100,e.s=nl(e.s),$(e)}function e4(t,r){r=r===0?0:r||10;var e=$(t).toHsl();return e.s+=r/100,e.s=nl(e.s),$(e)}function t4(t){return $(t).desaturate(100)}function r4(t,r){r=r===0?0:r||10;var e=$(t).toHsl();return e.l+=r/100,e.l=nl(e.l),$(e)}function n4(t,r){r=r===0?0:r||10;var e=$(t).toRgb();return e.r=Math.max(0,Math.min(255,e.r-Math.round(255*-(r/100)))),e.g=Math.max(0,Math.min(255,e.g-Math.round(255*-(r/100)))),e.b=Math.max(0,Math.min(255,e.b-Math.round(255*-(r/100)))),$(e)}function i4(t,r){r=r===0?0:r||10;var e=$(t).toHsl();return e.l-=r/100,e.l=nl(e.l),$(e)}function o4(t,r){var e=$(t).toHsl(),n=(e.h+r)%360;return e.h=n<0?360+n:n,$(e)}function a4(t){var r=$(t).toHsl();return r.h=(r.h+180)%360,$(r)}function hc(t,r){if(isNaN(r)||r<=0)throw new Error("Argument to polyad must be a positive number");for(var e=$(t).toHsl(),n=[$(t)],i=360/r,o=1;o<r;o++)n.push($({h:(e.h+o*i)%360,s:e.s,l:e.l}));return n}function l4(t){var r=$(t).toHsl(),e=r.h;return[$(t),$({h:(e+72)%360,s:r.s,l:r.l}),$({h:(e+216)%360,s:r.s,l:r.l})]}function s4(t,r,e){r=r||6,e=e||30;var n=$(t).toHsl(),i=360/e,o=[$(t)];for(n.h=(n.h-(i*r>>1)+720)%360;--r;)n.h=(n.h+i)%360,o.push($(n));return o}function u4(t,r){r=r||6;for(var e=$(t).toHsv(),n=e.h,i=e.s,o=e.v,a=[],l=1/r;r--;)a.push($({h:n,s:i,v:o})),o=(o+l)%1;return a}$.mix=function(t,r,e){e=e===0?0:e||50;var n=$(t).toRgb(),i=$(r).toRgb(),o=e/100,a={r:(i.r-n.r)*o+n.r,g:(i.g-n.g)*o+n.g,b:(i.b-n.b)*o+n.b,a:(i.a-n.a)*o+n.a};return $(a)};$.readability=function(t,r){var e=$(t),n=$(r);return(Math.max(e.getLuminance(),n.getLuminance())+.05)/(Math.min(e.getLuminance(),n.getLuminance())+.05)};$.isReadable=function(t,r,e){var n=$.readability(t,r),i,o;switch(o=!1,i=p4(e),i.level+i.size){case"AAsmall":case"AAAlarge":o=n>=4.5;break;case"AAlarge":o=n>=3;break;case"AAAsmall":o=n>=7;break}return o};$.mostReadable=function(t,r,e){var n=null,i=0,o,a,l,s;e=e||{},a=e.includeFallbackColors,l=e.level,s=e.size;for(var u=0;u<r.length;u++)o=$.readability(t,r[u]),o>i&&(i=o,n=$(r[u]));return $.isReadable(t,n,{level:l,size:s})||!a?n:(e.includeFallbackColors=!1,$.mostReadable(t,["#fff","#000"],e))};var As=$.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},f4=$.hexNames=h4(As);function h4(t){var r={};for(var e in t)t.hasOwnProperty(e)&&(r[t[e]]=e);return r}function $g(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function be(t,r){d4(t)&&(t="100%");var e=c4(t);return t=Math.min(r,Math.max(0,parseFloat(t))),e&&(t=parseInt(t*r,10)/100),Math.abs(t-r)<1e-6?1:t%r/parseFloat(r)}function nl(t){return Math.min(1,Math.max(0,t))}function Ct(t){return parseInt(t,16)}function d4(t){return typeof t=="string"&&t.indexOf(".")!=-1&&parseFloat(t)===1}function c4(t){return typeof t=="string"&&t.indexOf("%")!=-1}function Gt(t){return t.length==1?"0"+t:""+t}function _i(t){return t<=1&&(t=t*100+"%"),t}function Yg(t){return Math.round(parseFloat(t)*255).toString(16)}function dc(t){return Ct(t)/255}var zt=function(){var t="[-\\+]?\\d+%?",r="[-\\+]?\\d*\\.\\d+%?",e="(?:"+r+")|(?:"+t+")",n="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?",i="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?";return{CSS_UNIT:new RegExp(e),rgb:new RegExp("rgb"+n),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+n),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+n),hsva:new RegExp("hsva"+i),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function wr(t){return!!zt.CSS_UNIT.exec(t)}function v4(t){t=t.replace(XD,"").replace(VD,"").toLowerCase();var r=!1;if(As[t])t=As[t],r=!0;else if(t=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var e;return(e=zt.rgb.exec(t))?{r:e[1],g:e[2],b:e[3]}:(e=zt.rgba.exec(t))?{r:e[1],g:e[2],b:e[3],a:e[4]}:(e=zt.hsl.exec(t))?{h:e[1],s:e[2],l:e[3]}:(e=zt.hsla.exec(t))?{h:e[1],s:e[2],l:e[3],a:e[4]}:(e=zt.hsv.exec(t))?{h:e[1],s:e[2],v:e[3]}:(e=zt.hsva.exec(t))?{h:e[1],s:e[2],v:e[3],a:e[4]}:(e=zt.hex8.exec(t))?{r:Ct(e[1]),g:Ct(e[2]),b:Ct(e[3]),a:dc(e[4]),format:r?"name":"hex8"}:(e=zt.hex6.exec(t))?{r:Ct(e[1]),g:Ct(e[2]),b:Ct(e[3]),format:r?"name":"hex"}:(e=zt.hex4.exec(t))?{r:Ct(e[1]+""+e[1]),g:Ct(e[2]+""+e[2]),b:Ct(e[3]+""+e[3]),a:dc(e[4]+""+e[4]),format:r?"name":"hex8"}:(e=zt.hex3.exec(t))?{r:Ct(e[1]+""+e[1]),g:Ct(e[2]+""+e[2]),b:Ct(e[3]+""+e[3]),format:r?"name":"hex"}:!1}function p4(t){var r,e;return t=t||{level:"AA",size:"small"},r=(t.level||"AA").toUpperCase(),e=(t.size||"small").toLowerCase(),r!=="AA"&&r!=="AAA"&&(r="AA"),e!=="small"&&e!=="large"&&(e="small"),{level:r,size:e}}var g4="#FFFFFF",y4="#000000",C4=[95,85,75,30,15,0,15,30,45,60,80],w4=15,Ug=function(t){return $(t).getLuminance()<=.5},m4=function(t,r){return $.isReadable(t,r,{level:"AA",size:"small"})},x4=[{fontColorIndex:0,bgColorIndex:3},{fontColorIndex:13,bgColorIndex:8},{fontColorIndex:14,bgColorIndex:1}],_4=function(t){for(var r=[],e=0;e<11;e++){var n=C4[e];r.push(Yi(n===0?t:$.mix(t,e<5?g4:y4,n).toHexString()))}return r},wf=function(t){t===void 0&&(t={});var r=Array.from(Array(w4)).fill(ls),e=t.basicColorRelations,n=e===void 0?[]:e,i=t.brandColor,o=_4(i);return n.forEach(function(a){r[a.basicColorIndex]=o[a.standardColorIndex]}),x4.forEach(function(a){var l=a.fontColorIndex,s=a.bgColorIndex;r[l]=Ug(r[s])?ls:up}),S(S({},t),{basicColors:r})},S4={brandColor:"#3471F9",semanticColors:{red:"#FF4D4F",green:"#29A294",yellow:"#FAAD14"},others:{highlight:"#87B5FF",results:"#F0F7FF"},basicColorRelations:[{basicColorIndex:1,standardColorIndex:0},{basicColorIndex:2,standardColorIndex:1},{basicColorIndex:3,standardColorIndex:5},{basicColorIndex:4,standardColorIndex:6},{basicColorIndex:5,standardColorIndex:6},{basicColorIndex:6,standardColorIndex:6},{basicColorIndex:7,standardColorIndex:5},{basicColorIndex:9,standardColorIndex:1},{basicColorIndex:10,standardColorIndex:4},{basicColorIndex:11,standardColorIndex:4},{basicColorIndex:12,standardColorIndex:5}]},b4=wf(S4),T4={brandColor:"#326EF4",semanticColors:{red:"#FF4D4F",green:"#29A294",yellow:"#FAAD14"},others:{highlight:"#87B5FF",results:"#F0F7FF"},basicColorRelations:[{basicColorIndex:1,standardColorIndex:0},{basicColorIndex:2,standardColorIndex:1},{basicColorIndex:3,standardColorIndex:1},{basicColorIndex:4,standardColorIndex:2},{basicColorIndex:5,standardColorIndex:7},{basicColorIndex:6,standardColorIndex:5},{basicColorIndex:7,standardColorIndex:5},{basicColorIndex:9,standardColorIndex:1},{basicColorIndex:10,standardColorIndex:2},{basicColorIndex:11,standardColorIndex:5},{basicColorIndex:12,standardColorIndex:5}]},R4=wf(T4),E4={brandColor:"#9DA7B6",semanticColors:{red:"#FF4D4F",green:"#29A294",yellow:"#FAAD14"},others:{highlight:"#87B5FF",results:"#F0F7FF"},basicColorRelations:[{basicColorIndex:1,standardColorIndex:0},{basicColorIndex:2,standardColorIndex:1},{basicColorIndex:3,standardColorIndex:1},{basicColorIndex:4,standardColorIndex:2},{basicColorIndex:5,standardColorIndex:7},{basicColorIndex:6,standardColorIndex:8},{basicColorIndex:7,standardColorIndex:5},{basicColorIndex:9,standardColorIndex:1},{basicColorIndex:10,standardColorIndex:2},{basicColorIndex:11,standardColorIndex:3},{basicColorIndex:12,standardColorIndex:3}]},L4=wf(E4),A4={default:R4,colorful:b4,gray:L4},Ht="Roboto, PingFangSC, BlinkMacSystemFont, Microsoft YaHei, Arial, sans-serif",M4=12,I4={小计:"Total",总计:"Total",总和:"(SUM)",项:"items",已选择:"selected",序号:"Index",度量:"Measure",数值:"Measure",共计:"Total",条:"",隐藏:"Hide",趋势:"Trend",组内升序:"Group ASC",组内降序:"Group DESC",升序:"ASC",降序:"DESC",不排序:"No order","，":", "},O4={小计:"Промежуточный итог",总计:"Общий итог",总和:"(СУММА)",项:"элемент(-а/-ов)",已选择:"выбрано",序号:"Индекс",度量:"Мера",数值:"Численная величина",共计:"Общее количество",条:"",隐藏:"Скрыть",趋势:"Курс",组内升序:"Группировать по возрастанию",组内降序:"Группировать по убыванию",升序:"По возрастанию",降序:"По убыванию",不排序:"Не отсортировано","，":", "},B4={小计:"小计",总计:"总计",总和:"（总和）",项:"项",已选择:"已选择",序号:"序号",度量:"度量",数值:"数值",共计:"共计",条:"条",趋势:"趋势",隐藏:"隐藏",组内升序:"组内升序",升序:"升序",降序:"降序",组内降序:"组内降序",不排序:"不排序","，":"，"},D4="zh_CN",N4=D4,P4={zh_CN:B4,en_US:I4,ru_RU:O4},He=function(t,r){return r===void 0&&(r=t),K(P4,[N4,t],r)},F4="".concat(Fx,"-tooltip"),mf="".concat(F4,"-container"),H4="".concat(mf,"-show"),z4="".concat(mf,"-hide"),cc={x:15,y:10},W4=function(){return{key:"hiddenColumns",text:He("隐藏"),icon:"EyeOutlined"}},k4=function(){return{key:"trend",text:He("趋势"),icon:"Trend"}},G4=function(){return[{key:"asc",icon:"groupAsc",text:He("组内升序")},{key:"desc",icon:"groupDesc",text:He("组内降序")},{key:"none",text:He("不排序")}]},$4=function(){return[{key:"asc",icon:"groupAsc",text:He("升序")},{key:"desc",icon:"groupDesc",text:He("降序")},{key:"none",text:He("不排序")}]},vc;(function(t){t[t.ALL=0]="ALL",t[t.COL=1]="COL",t[t.ROW=2]="ROW"})(vc||(vc={}));var Ms=1,At;(function(t){t.All="all",t.DetailOnly="detailOnly"})(At||(At={}));function We(t){return t==="mobile"?!0:/(iPhone|iPad|SymbianOS|Windows Phone|iPod|iOS|Android)/i.test(navigator.userAgent)}function Y4(){return/iPhone/gi.test(navigator.userAgent)&&window.screen.height===812&&window.screen.width===375}function Xg(){return/windows/i.test(navigator.userAgent)}var U4=function(t){var r=t||"default";return A4[r.toLowerCase()]},X4=function(t){var r,e,n,i,o,a=(t==null?void 0:t.palette)||U4(t==null?void 0:t.name),l=a.basicColors,s=a.semanticColors,u=a.others,f=(r=t==null?void 0:t.spreadsheet)===null||r===void 0?void 0:r.isTableMode(),h=Xg()?"bold":700,d=function(){var c,v;return{bolderText:{fontFamily:Ht,fontSize:12,fontWeight:h,fill:l[13],opacity:1,textAlign:"right",textBaseline:"middle",linkTextFill:l[6]},text:{fontFamily:Ht,fontSize:12,fontWeight:"normal",fill:l[13],opacity:1,textAlign:"right",textBaseline:"middle",linkTextFill:l[6]},cell:{crossBackgroundColor:l[1],backgroundColor:l[8],backgroundColorOpacity:1,horizontalBorderColor:l[9],horizontalBorderColorOpacity:1,verticalBorderColor:l[9],verticalBorderColorOpacity:1,horizontalBorderWidth:1,verticalBorderWidth:1,borderDash:[],padding:{top:8,right:8,bottom:8,left:8},interactionState:{hover:{backgroundColor:l[2],backgroundOpacity:.6},hoverFocus:{backgroundColor:l[2],backgroundOpacity:.6,borderColor:l[14],borderWidth:1,borderOpacity:1},selected:{backgroundColor:l[2],backgroundOpacity:.6},unselected:{backgroundOpacity:.3,textOpacity:.3,opacity:.3},searchResult:{backgroundColor:(c=u==null?void 0:u.results)!==null&&c!==void 0?c:l[2],backgroundOpacity:1},highlight:{backgroundColor:(v=u==null?void 0:u.highlight)!==null&&v!==void 0?v:l[6],backgroundOpacity:1},prepareSelect:{borderColor:l[14],borderOpacity:1,borderWidth:1}}},miniChart:{line:{point:{size:2.2,fill:l[6],opacity:1},linkLine:{size:1.5,fill:l[6],opacity:.6}},bar:{intervalPadding:4,fill:l[6],opacity:1},bullet:{progressBar:{widthPercent:.6,height:10,innerHeight:6},comparativeMeasure:{width:1,height:12,fill:l[13],opacity:.25},rangeColors:{good:s==null?void 0:s.green,satisfactory:s.yellow,bad:s.red},backgroundColor:"#E9E9E9"},interval:{height:M4,fill:l[7]}},icon:{fill:l[13],downIconColor:s.red,upIconColor:s.green,size:10,margin:{right:4,left:4}}}};return{cornerCell:{bolderText:{fontFamily:Ht,fontSize:12,fontWeight:h,fill:l[0],opacity:1,textAlign:f?"center":"left",textBaseline:"middle"},text:{fontFamily:Ht,fontSize:12,fontWeight:h,fill:l[0],opacity:1,textAlign:"right",textBaseline:"middle"},cell:{backgroundColor:l[3],backgroundColorOpacity:1,horizontalBorderColor:l[10],horizontalBorderColorOpacity:1,verticalBorderColor:l[10],verticalBorderColorOpacity:1,horizontalBorderWidth:1,verticalBorderWidth:1,borderDash:[],padding:{top:0,right:8,bottom:0,left:8}},icon:{fill:l[0],size:10,margin:{right:4,left:4}}},rowCell:{seriesText:{fontFamily:Ht,fontSize:12,fontWeight:"normal",fill:l[14],linkTextFill:l[6],opacity:1,textBaseline:f?"middle":"top",textAlign:"center"},measureText:{fontFamily:Ht,fontSize:12,fontWeight:"normal",fill:l[14],linkTextFill:l[6],opacity:1,textAlign:f?"center":"left",textBaseline:"top"},bolderText:{fontFamily:Ht,fontSize:12,fontWeight:h,fill:l[14],linkTextFill:l[6],opacity:1,textAlign:f?"center":"left",textBaseline:"top"},text:{fontFamily:Ht,fontSize:12,fontWeight:"normal",fill:l[14],linkTextFill:l[6],opacity:1,textBaseline:"top",textAlign:f?"center":"left"},cell:{backgroundColor:l[1],backgroundColorOpacity:1,horizontalBorderColor:l[9],horizontalBorderColorOpacity:1,verticalBorderColor:l[9],verticalBorderColorOpacity:1,horizontalBorderWidth:1,verticalBorderWidth:1,borderDash:[],padding:{top:0,right:8,bottom:0,left:8},interactionState:{hover:{backgroundColor:l[2],backgroundOpacity:.6},selected:{backgroundColor:l[2],backgroundOpacity:.6},unselected:{backgroundOpacity:.3,textOpacity:.3,opacity:.3},prepareSelect:{borderColor:l[14],borderOpacity:1,borderWidth:1},searchResult:{backgroundColor:(e=u==null?void 0:u.results)!==null&&e!==void 0?e:l[2],backgroundOpacity:1},highlight:{backgroundColor:(n=u==null?void 0:u.highlight)!==null&&n!==void 0?n:l[6],backgroundOpacity:1}}},icon:{fill:l[14],size:10,margin:{right:4,left:4}},seriesNumberWidth:80},colCell:{measureText:{fontFamily:Ht,fontSize:12,fontWeight:"normal",fill:l[0],opacity:1,textAlign:"right",textBaseline:"middle"},bolderText:{fontFamily:Ht,fontSize:12,fontWeight:h,fill:l[0],opacity:1,textAlign:"center",textBaseline:"middle"},text:{fontFamily:Ht,fontSize:12,fontWeight:"normal",fill:l[0],opacity:1,textAlign:"center",textBaseline:"middle"},cell:{backgroundColor:l[3],backgroundColorOpacity:1,horizontalBorderColor:l[10],horizontalBorderColorOpacity:1,verticalBorderColor:l[10],verticalBorderColorOpacity:1,horizontalBorderWidth:1,verticalBorderWidth:1,borderDash:[],padding:{top:0,right:8,bottom:0,left:8},interactionState:{hover:{backgroundColor:l[4],backgroundOpacity:.6},selected:{backgroundColor:l[4],backgroundOpacity:.6},unselected:{backgroundOpacity:.3,textOpacity:.3,opacity:.3},prepareSelect:{borderColor:l[14],borderOpacity:1,borderWidth:1},searchResult:{backgroundColor:(i=u==null?void 0:u.results)!==null&&i!==void 0?i:l[2],backgroundOpacity:1},highlight:{backgroundColor:(o=u==null?void 0:u.highlight)!==null&&o!==void 0?o:l[6],backgroundOpacity:1}}},icon:{fill:l[0],size:10,margin:{top:6,right:4,bottom:6,left:4}}},dataCell:d(),mergedCell:d(),resizeArea:{size:3,background:l[7],backgroundOpacity:0,guideLineColor:l[7],guideLineDisableColor:"rgba(0,0,0,0.25)",guideLineDash:[3,3],interactionState:{hover:{backgroundColor:l[7],backgroundOpacity:1}}},scrollBar:{trackColor:"rgba(0,0,0,0.01)",thumbHoverColor:"rgba(0,0,0,0.25)",thumbColor:"rgba(0,0,0,0.15)",thumbHorizontalMinSize:32,thumbVerticalMinSize:32,size:We()?3:6,hoverSize:We()?4:8,lineCap:"round"},splitLine:{horizontalBorderColor:l[12],horizontalBorderColorOpacity:.2,horizontalBorderWidth:2,verticalBorderColor:l[11],verticalBorderColorOpacity:.25,verticalBorderWidth:2,showShadow:!0,shadowWidth:8,shadowColors:{left:"rgba(0,0,0,0.1)",right:"rgba(0,0,0,0)"},borderDash:[]},prepareSelectMask:{backgroundColor:l[5],backgroundOpacity:.3},background:{color:l[8],opacity:1}}},Ge=function(){function t(r){this.x=0,this.y=0,this.width=0,this.height=0,this.colIndex=-1,this.level=0,this.isLeaf=!1,this.children=[],this.padding=0;var e=r.id,n=r.key,i=r.value,o=r.label,a=r.parent,l=r.level,s=r.rowIndex,u=r.isTotals,f=r.isGrandTotals,h=r.isSubTotals,d=r.isCollapsed,c=r.isTotalRoot,v=r.hierarchy,p=r.isPivotMode,g=r.seriesNumberWidth,y=r.field,C=r.spreadsheet,w=r.query,m=r.belongsCell,_=r.inCollapseNode,b=r.isTotalMeasure,T=r.isLeaf,E=r.extra;this.id=e,this.key=n,this.value=i,this.label=o||i,this.parent=a,this.level=l,this.rowIndex=s,this.isTotals=u,this.isCollapsed=d,this.hierarchy=v,this.isPivotMode=p,this.seriesNumberWidth=g,this.field=y,this.spreadsheet=C,this.query=w,this.belongsCell=m,this.inCollapseNode=_,this.isTotalMeasure=b,this.isLeaf=T,this.isGrandTotals=f,this.isSubTotals=h,this.isTotalRoot=c,this.extra=E}return t.getFieldPath=function(r,e){if(r&&!r.isTotals||r&&e){for(var n=r.parent,i=[r.field];n&&n.id!==lp;)i.push(n.field),n=n.parent;return i.reverse()}},t.getAllLeaveNodes=function(r){var e=[];if(r.isLeaf)return[r];for(var n=P([],A(r.children),!1),i=n.shift();i;)i.isLeaf?e.push(i):n.unshift.apply(n,P([],A(i.children),!1)),i=n.shift();return e},t.getAllChildrenNodes=function(r){var e=[];if(r.isLeaf)return[r];for(var n=P([],A(r.children||[]),!1),i=n.shift();i;)e.push(i),n.unshift.apply(n,P([],A(i.children),!1)),i=n.shift();return e},t.getAllBranch=function(r){for(var e=[],n=this.getAllLeaveNodes(r),i=n.shift(),o=[];i;){o.unshift(i);for(var a=i.parent;a&&!Ue(a,r);){o.unshift(a);a=a.parent}e.push(o),i=n.shift(),o=[]}return e},t.blankNode=function(){return new t({id:"",key:"",value:""})},t.rootNode=function(){return new t({id:"root",key:"",value:""})},t.prototype.toJSON=function(){return nf(this,["config","hierarchy","parent","spreadsheet"])},t.prototype.getHeadLeafChild=function(){for(var r=this;!D(r.children);)r=fi(r.children);return r},t.prototype.getTotalHeightForTreeHierarchy=function(){return this.height===0||D(this.children)?this.height:this.children.reduce(function(r,e){return r+e.getTotalHeightForTreeHierarchy()},this.height)},t}(),Vg=function(){function t(){this.width=0,this.height=0,this.maxLevel=-1,this.sampleNodesForAllLevels=[],this.sampleNodeForLastLevel=null,this.allNodesWithoutRoot=[],this.indexNode=[]}return t.prototype.getLeaves=function(){return this.allNodesWithoutRoot.filter(function(r){return r.isLeaf})},t.prototype.getNodes=function(r){return r!==void 0?this.allNodesWithoutRoot.filter(function(e){return e.level===r}):this.allNodesWithoutRoot},t.prototype.getNodesLessThanLevel=function(r){return this.allNodesWithoutRoot.filter(function(e){return e.level<=r})},t.prototype.pushNode=function(r,e){e===void 0&&(e=-1),e===-1?this.allNodesWithoutRoot.push(r):this.allNodesWithoutRoot.splice(e,0,r)},t.prototype.pushIndexNode=function(r){this.indexNode.push(r)},t.prototype.getIndexNodes=function(){return this.indexNode},t}(),Qn=function(){function t(r){var e=r.label,n=r.isSubTotals,i=r.isGrandTotals,o=r.isTotalRoot;this.label=e,this.isSubTotals=n,this.isGrandTotals=i,this.isTotalRoot=o}return t}(),V4=function(t){var r,e=t.isFirstField,n=t.currentField,i=t.fieldValues,o=t.spreadsheet,a=t.lastField,l=o.getTotalsConfig(e?n:a),s,u;e?l!=null&&l.showGrandTotals&&(s=l.reverseLayout?"unshift":"push",u=new Qn({label:l.label,isSubTotals:!1,isGrandTotals:!0,isTotalRoot:!0})):l!=null&&l.showSubTotals&&(x.size(i)>1||x.get(l,"showSubTotals.always")!==!1)&&n!==re&&(s=l.reverseSubLayout?"unshift":"push",u=new Qn({label:l.subLabel,isSubTotals:!0,isGrandTotals:!1,isTotalRoot:!0})),(r=i[s])===null||r===void 0||r.call(i,u)};function Is(t,r){for(var e={},n=t;n&&n.key;)(!n.isTotalRoot||r)&&n.value!==Tn&&(e[n.key]=n.value),n=n.parent;return e}var q4="Transform Data",K4="Header Layout",Z4="Data Cell Render",rr=function(){function t(){var r=this;this.debug=!1,this.debugCallback=function(e,n){if(r.debug){var i=performance.now();n();var o=performance.now();console.log(e,"".concat(o-i," ms"))}else n()},this.logger=function(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];r.debug&&console.log.apply(console,P([e],A(n),!1))}}return t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.setDebug=function(r){this.debug=r},t}(),j4=`
<svg width="10px" height="10px" viewBox="0 0 10 10" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" font-family="Roboto, PingFangSC, BlinkMacSystemFont, Microsoft YaHei, Arial, sans-serif" font-size="12" font-weight="bold">
    <text id="↓" fill="#29A294">
        <tspan x="-0.225097656" y="8.5">↓</tspan>
    </text>
</g>
</svg>`,Q4=`<svg width="10px" height="10px" viewBox="0 0 10 10" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" font-family="Roboto, PingFangSC, BlinkMacSystemFont, Microsoft YaHei, Arial, sans-serif" font-size="12" font-weight="bold">
    <text id="↑" fill="#FF4D4F">
        <tspan x="-0.225097656" y="8.5">↑</tspan>
    </text>
</g>
</svg>
`,J4=`<?xml version="1.0" encoding="UTF-8"?>
<svg width="7px" height="9px" viewBox="0 0 7 9" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <!-- Generator: Sketch 58 (84663) - https://sketch.com -->
    <title>down</title>
    <desc>Created with Sketch.</desc>
    <g id="一期开发" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <polygon id="down" fill="#58AE57" transform="translate(3.500000, 4.500000) scale(1, -1) translate(-3.500000, -4.500000) " points="3.5 0 7 9 0 9"></polygon>
    </g>
</svg>`,e5=`<?xml version="1.0" encoding="UTF-8"?>
<svg width="7px" height="9px" viewBox="0 0 7 9" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <!-- Generator: Sketch 58 (84663) - https://sketch.com -->
    <title>up</title>
    <desc>Created with Sketch.</desc>
    <g id="一期开发" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <polygon id="up" fill="#F46649" points="3.5 0 7 9 0 9"></polygon>
    </g>
</svg> `,t5=`<svg t="1557124621626" class="icon" style="" viewBox="0 0 1024 1024" version="1.1"
xmlns="http://www.w3.org/2000/svg" p-id="17452"
xmlns:xlink="http://www.w3.org/1999/xlink" width="14" height="14">
<defs>
  <style type="text/css"></style>
</defs>
<path d="M182.272 167.04a8 8 0 0 0-12.544 0L57.728 309.056A8 8 0 0 0 64 321.984h76.032v530.048c0 4.352 3.584 7.936 7.936 7.936h56.064a8 8 0 0 0 7.936-7.936V321.92H288a8 8 0 0 0 6.272-12.992l-112-141.888z m209.728 626.944h176c4.416 0 8 3.584 8 8v56a8 8 0 0 1-8 8h-176A8 8 0 0 1 384 857.984v-56c0-4.416 3.584-8 8-8z m0-424h368c4.416 0 8 3.648 8 8v56a8 8 0 0 1-8 8h-368A8 8 0 0 1 384 433.984v-56c0-4.352 3.584-8 8-8z m528-139.968h-528A8 8 0 0 1 384 222.016v-56c0-4.416 3.584-8 8-8h528c4.416 0 8 3.584 8 8v56a8 8 0 0 1-8 8z m-256 424h-272A8 8 0 0 1 384 646.016v-56c0-4.416 3.584-8 8-8h272c4.416 0 8 3.584 8 8v56a8 8 0 0 1-8 8z" p-id="17453"></path>
</svg>`,r5=`<svg t="1557124685600" class="icon" style="" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" p-id="17561"
  xmlns:xlink="http://www.w3.org/1999/xlink" width="14" height="14">
  <defs>
    <style type="text/css"></style>
  </defs>
  <path d="M182.272 856.96a8 8 0 0 1-12.544 0l-112-141.952A8 8 0 0 1 64 702.08h76.032V172.032c0-4.416 3.584-8 7.936-8h56.064c4.352 0 7.936 3.584 7.936 8v529.984H288c6.72 0 10.496 7.808 6.272 12.992l-112 141.888z m209.728-626.944h176A8 8 0 0 0 576 222.016v-56a8 8 0 0 0-8-8h-176A8 8 0 0 0 384 166.016v56c0 4.416 3.584 8 8 8z m0 424h368a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8h-368A8 8 0 0 0 384 590.016v56c0 4.416 3.584 8 8 8z m528 139.968h-528a8 8 0 0 0-8 8v56c0 4.416 3.584 8 8 8h528a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8z m-256-424h-272A8 8 0 0 0 384 377.984v56c0 4.416 3.584 8 8 8h272a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8z" p-id="17562"></path>
</svg>`,n5=`<svg t="1557124695786" class="icon" style="" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" p-id="17670"
  xmlns:xlink="http://www.w3.org/1999/xlink" width="14" height="14">
  <defs>
    <style type="text/css"></style>
  </defs>
  <path d="M182.272 167.04a8 8 0 0 0-12.544 0L57.728 309.056A8 8 0 0 0 64 321.984h76.032v530.048c0 4.352 3.584 7.936 7.936 7.936h56.064a8 8 0 0 0 7.936-7.936V321.92H288a8 8 0 0 0 6.272-12.992l-112-141.888z m209.728 62.976h304A8 8 0 0 0 704 222.016v-56a8 8 0 0 0-8-8h-304A8 8 0 0 0 384 166.016v56c0 4.416 3.584 8 8 8z m0 424h304a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8h-304A8 8 0 0 0 384 590.016v56c0 4.416 3.584 8 8 8z m528 139.968h-528a8 8 0 0 0-8 8v56c0 4.416 3.584 8 8 8h528a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8z m0-424h-528A8 8 0 0 0 384 377.984v56c0 4.416 3.584 8 8 8h528a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8z" p-id="17671"></path>
</svg>`,i5=`<svg t="1557124710652" class="icon" style="" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" p-id="17779"
  xmlns:xlink="http://www.w3.org/1999/xlink" width="14" height="14">
  <defs>
    <style type="text/css"></style>
  </defs>
  <path d="M182.272 856.96a8 8 0 0 1-12.544 0l-112-141.952A8 8 0 0 1 64 702.08h76.032V172.032c0-4.416 3.584-8 7.936-8h56.064c4.352 0 7.936 3.584 7.936 8v529.984H288c6.72 0 10.496 7.808 6.272 12.992l-112 141.888z m209.728-626.944h304A8 8 0 0 0 704 222.016v-56a8 8 0 0 0-8-8h-304A8 8 0 0 0 384 166.016v56c0 4.416 3.584 8 8 8z m0 424h304a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8h-304A8 8 0 0 0 384 590.016v56c0 4.416 3.584 8 8 8z m528 139.968h-528a8 8 0 0 0-8 8v56c0 4.416 3.584 8 8 8h528a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8z m0-424h-528A8 8 0 0 0 384 377.984v56c0 4.416 3.584 8 8 8h528a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8z" p-id="17780"></path>
</svg>`,o5=`<svg width="16px" height="16px" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="设计输出" stroke="none" stroke-width="1" fill-opacity="0.25" fill-rule="evenodd">
    <g id="设计输出-移动端指标详情页-阅读端" transform="translate(-3275.000000, -724.000000)" fill-rule="nonzero">
        <g id="编组-39" transform="translate(3064.500000, 667.000000)">
            <g id="编组-36" transform="translate(80.500000, 44.000000)">
                <g id="不排序" transform="translate(130.000000, 13.000000)">
                    <path d="M12.0009375,12.40625 C12.0696875,12.40625 12.1259375,12.4625 12.1259375,12.53125 L12.1259375,12.53125 L12.1259375,13.40625 C12.1259375,13.475 12.0696875,13.53125 12.0009375,13.53125 L12.0009375,13.53125 L6.25093747,13.53125 C6.18218747,13.53125 6.12593747,13.475 6.12593747,13.40625 L6.12593747,13.40625 L6.12593747,12.53125 C6.12593747,12.4625 6.18218747,12.40625 6.25093747,12.40625 L6.25093747,12.40625 Z M2.93949997,2.5801875 L2.97437497,2.6109375 L4.72437497,4.828125 C4.78062497,4.89776786 4.74503823,4.99725765 4.66779698,5.02426203 L4.62593747,5.03125 L3.438,5.03089062 L3.43843747,10.9691406 L4.62593747,10.9691406 C4.73062497,10.9691406 4.78999997,11.0910156 4.72437497,11.1722656 L2.97437497,13.3894531 C2.92437497,13.4535156 2.82749997,13.4535156 2.77749997,13.3894531 L1.02749997,11.1722656 C0.961874969,11.0894531 1.02124997,10.9691406 1.12593747,10.9691406 L2.31343747,10.9691406 L2.313,5.03089062 L1.12593747,5.03125 C1.03620533,5.03125 0.979764,4.94285714 1.00679571,4.8654519 L1.02749997,4.828125 L2.77749997,2.6109375 C2.81749997,2.5596875 2.88749997,2.5494375 2.93949997,2.5801875 Z M10.5009375,9.09375 C10.5696875,9.09375 10.6259375,9.15 10.6259375,9.21875 L10.6259375,9.21875 L10.6259375,10.09375 C10.6259375,10.1625 10.5696875,10.21875 10.5009375,10.21875 L10.5009375,10.21875 L6.25093747,10.21875 C6.18218747,10.21875 6.12593747,10.1625 6.12593747,10.09375 L6.12593747,10.09375 L6.12593747,9.21875 C6.12593747,9.15 6.18218747,9.09375 6.25093747,9.09375 L6.25093747,9.09375 Z M14.5009375,5.78125 C14.5696875,5.78125 14.6259375,5.8375 14.6259375,5.90625 L14.6259375,5.90625 L14.6259375,6.78125 C14.6259375,6.85 14.5696875,6.90625 14.5009375,6.90625 L14.5009375,6.90625 L6.25093747,6.90625 C6.18218747,6.90625 6.12593747,6.85 6.12593747,6.78125 L6.12593747,6.78125 L6.12593747,5.90625 C6.12593747,5.8375 6.18218747,5.78125 6.25093747,5.78125 L6.25093747,5.78125 Z M9.00093747,2.46875 C9.06968747,2.46875 9.12593747,2.525 9.12593747,2.59375 L9.12593747,2.59375 L9.12593747,3.46875 C9.12593747,3.5375 9.06968747,3.59375 9.00093747,3.59375 L9.00093747,3.59375 L6.25093747,3.59375 C6.18218747,3.59375 6.12593747,3.5375 6.12593747,3.46875 L6.12593747,3.46875 L6.12593747,2.59375 C6.12593747,2.525 6.18218747,2.46875 6.25093747,2.46875 L6.25093747,2.46875 Z" id="形状结合"></path>
                </g>
            </g>
        </g>
    </g>q
</g>
</svg>`,a5='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1590389330617" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="19656" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path d="M512 64c-247.4 0-448 200.6-448 448s200.6 448 448 448 448-200.6 448-448-200.6-448-448-448z m0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z" fill="" p-id="19657"></path><path d="M464 336c0 26.5 21.5 48 48 48s48-21.5 48-48-21.5-48-48-48-48 21.5-48 48zM536 448h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-272c0-4.4-3.6-8-8-8z" fill="" p-id="19658"></path></svg>',l5=`<?xml version="1.0" encoding="UTF-8"?>
<svg width="23px" height="12px" viewBox="0 0 23 12" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <title>编组 8备份 3</title>
    <g id="----隐藏列标注！" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="隐藏列标注" transform="translate(-275.000000, -824.000000)">
            <rect fill="#FFFFFF" x="0" y="0" width="1333" height="1167"></rect>
            <g id="编组-8备份-3" transform="translate(275.000000, 824.000000)">
                <rect id="矩形" stroke-opacity="0.25" stroke="#000000" fill="#F7F7F7" x="0.5" y="0.5" width="11" height="11"></rect>
                <rect id="矩形备份-9" stroke-opacity="0.25" stroke="#000000" fill="#F7F7F7" x="11.5" y="0.5" width="11" height="11"></rect>
                <g id="7.Icon/arrow/15.down/fill" transform="translate(6.000000, 6.000000) rotate(90.000000) translate(-6.000000, -6.000000) " fill="#000000" fill-rule="nonzero" opacity="0.65">
                    <path d="M7.25020811,6.37218077 L4.91348936,8.20968077 C4.82677061,8.27764952 4.69903624,8.21671202 4.69903624,8.10655577 L4.69903624,4.43272764 C4.69903624,4.32257139 4.82677061,4.26046202 4.91348936,4.32960264 L7.25020811,6.16593077 C7.31700499,6.21866514 7.31700499,6.31944639 7.25020811,6.37218077 Z" id="fill" transform="translate(5.999671, 6.269385) rotate(90.000000) translate(-5.999671, -6.269385) "></path>
                </g>
                <g id="7.Icon/arrow/15.down/fill" transform="translate(17.000000, 6.000000) rotate(270.000000) translate(-17.000000, -6.000000) translate(11.000000, 0.000000)" fill="#000000" fill-rule="nonzero" opacity="0.65">
                    <path d="M7.25020811,6.37218077 L4.91348936,8.20968077 C4.82677061,8.27764952 4.69903624,8.21671202 4.69903624,8.10655577 L4.69903624,4.43272764 C4.69903624,4.32257139 4.82677061,4.26046202 4.91348936,4.32960264 L7.25020811,6.16593077 C7.31700499,6.21866514 7.31700499,6.31944639 7.25020811,6.37218077 Z" id="fill" transform="translate(5.999671, 6.269385) rotate(90.000000) translate(-5.999671, -6.269385) "></path>
                </g>
            </g>
            <line x1="286.5" y1="813" x2="286.5" y2="864.5" id="路径-2备份-3" stroke="#000000" opacity="0.25"></line>
        </g>
    </g>
</svg>`,s5=`<svg t="1557140120188" class="icon" style="" viewBox="0 0 1024 1024" version="1.1"
xmlns="http://www.w3.org/2000/svg" p-id="16909" xmlns:xlink="http://www.w3.org/1999/xlink"
width="200" height="200">
	<defs>
		<style type="text/css">
		</style>
	</defs>
	<path d="M328 544h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"
	p-id="16910">
	</path>
	<path d="M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32z m-40 728H184V184h656v656z"
	p-id="16911">
	</path>
</svg>`,u5=`<svg t="1557140186692" class="icon" style="" viewBox="0 0 1024 1024" version="1.1"
xmlns="http://www.w3.org/2000/svg" p-id="17025" xmlns:xlink="http://www.w3.org/1999/xlink"
width="200" height="200">
	<defs>
		<style type="text/css">
		</style>
	</defs>
	<path d="M328 544h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"
	p-id="17026">
	</path>
	<path d="M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32z m-40 728H184V184h656v656z"
	p-id="17027">
	</path>
</svg>`,f5=`<svg t="1565940955886" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
     p-id="17472" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200">
  <defs>
    <style type="text/css"></style>
  </defs>
  <path
    d="M948 392.992l-403.008 488.99200001Q532 896 512.992 896t-32-14.016L76 392.992q-18.016-20.992-7.008-46.016T108 321.98400001L916 321.98400001q28 0 39.008 24.99199999T948 392.992z"
    p-id="17473" data-spm-anchor-id="a313x.7781069.0.i2" class="selected"></path>
</svg>
`,h5=`<svg t="1565940955886" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
     p-id="17472" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200">
  <defs>
    <style type="text/css"></style>
  </defs>
  <path
    fill-opacity="0.45"
    d="M948 392.992l-403.008 488.99200001Q532 896 512.992 896t-32-14.016L76 392.992q-18.016-20.992-7.008-46.016T108 321.98400001L916 321.98400001q28 0 39.008 24.99199999T948 392.992z"
    p-id="17473" data-spm-anchor-id="a313x.7781069.0.i2" class="selected"></path>
</svg>
`,d5=`<svg t="1565940979768" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
p-id="17620" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200">
<defs>
<style type="text/css"></style>
</defs>
<path
d="M76 631.008l403.008-488.99200001Q492 128 511.008 128t32 14.016L948 631.008q18.016 20.992 7.008 46.016T916 702.01599999L108 702.01599999q-28 0-39.008-24.99199999T76 631.008z"
p-id="17621"></path>
</svg>
`,c5=`<svg t="1565940979768" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
     p-id="17620" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200">
  <defs>
    <style type="text/css"></style>
  </defs>
  <path
    fill-opacity="0.45"
    d="M76 631.008l403.008-488.99200001Q492 128 511.008 128t32 14.016L948 631.008q18.016 20.992 7.008 46.016T916 702.01599999L108 702.01599999q-28 0-39.008-24.99199999T76 631.008z"
    p-id="17621"></path>
</svg>
`,v5='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1596433821690" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="20229" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><style type="text/css"></style></defs><path d="M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM305.8 637.7c3.1 3.1 8.1 3.1 11.3 0l138.3-137.6L583 628.5c3.1 3.1 8.2 3.1 11.3 0l275.4-275.3c3.1-3.1 3.1-8.2 0-11.3l-39.6-39.6c-3.1-3.1-8.2-3.1-11.3 0l-230 229.9L461.4 404c-3.1-3.1-8.2-3.1-11.3 0L266.3 586.7c-3.1 3.1-3.1 8.2 0 11.3l39.5 39.7z" p-id="20230"></path></svg>',p5=`<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1608030723688" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="21482" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16"><defs><style type="text/css"></style></defs><path d="M547.648 696a32 32 0 0 1 31.488 26.24l0.512 5.76v151.68l145.216-144.512a32 32 0 0 1 40.832-3.648l4.416 3.712a32 32 0 0 1 3.584 40.832l-3.712 4.48-203.072 202.24a32 32 0 0 1-40.768 3.648l-4.416-3.712-202.24-202.24a32 32 0 0 1 40.832-48.96l4.416 3.712 150.912 150.912v-158.144a32 32 0 0 1 32-32z m194.56-529.28l4.928 3.072 233.792 180.224a32 32 0 0 1 1.728 49.28l-4.864 3.52-409.792 245.568a32 32 0 0 1-27.328 2.624l-5.184-2.432-422.4-245.568a32 32 0 0 1-7.552-49.28l4.544-4.032 242.816-180.288a32 32 0 0 1 42.432 47.552l-4.288 3.84-203.84 151.296 364.16 211.648 353.28-211.712-196.608-151.552a32 32 0 0 1-8.896-40l3.136-4.864a32 32 0 0 1 40-8.96zM547.712 28.672a32 32 0 0 1 31.488 26.24l0.512 5.76v396.992a32 32 0 0 1-63.488 5.76l-0.512-5.76V60.736a32 32 0 0 1 32-32z" p-id="21483" fill="currentColor"></path></svg>
`,g5='<svg viewBox="64 64 896 896" focusable="false" data-icon="eye" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"></path></svg>',pc=Object.freeze({__proto__:null,ArrowDown:j4,ArrowUp:Q4,CellDown:J4,CellUp:e5,GlobalAsc:t5,GlobalDesc:r5,GroupAsc:n5,GroupDesc:i5,GroupNone:o5,Minus:s5,Plus:u5,SortDown:h5,SortUp:c5,SortDownSelected:f5,SortUpSelected:d5,InfoCircle:a5,ExpandColIcon:l5,Trend:v5,DrillDownIcon:p5,EyeOutlined:g5}),qg={},Kg=function(t,r){qg[ju(t)]=r},y5=function(t){return qg[ju(t)]};Ae(pc).forEach(function(t){Kg(t,pc[t])});var gc="<svg",yc="data:image/svg+xml",Cc={},Ui=function(t){H(r,t);function r(e){var n=t.call(this,e)||this;return n.isOnlineLink=function(i){return/^(https?:)?(\/\/)/.test(i)},n.render(),n}return r.prototype.getImage=function(e,n,i){var o=this;return new Promise(function(a,l){var s=y5(e);if(s){var u=new Image;u.onload=function(){Cc[n]=u,a(u)},u.onerror=l,s.includes(yc)||o.isOnlineLink(s)?(u.src=s,u.crossOrigin="anonymous"):(i&&(s=s.replace(/fill=[\'\"]#?\w+[\'\"]/g,""),s=s.replace(/fill>/g,">")),s=s.replace(gc,"".concat(gc,' fill="').concat(i,'"')),u.src="".concat(yc,";utf-8,").concat(encodeURIComponent(s)))}})},r.prototype.render=function(){var e=this.cfg,n=e.name,i=e.fill,o=oo(this.cfg),a=S(S({},nf(o,"fill")),{type:r.type}),l=new hu({attrs:a});this.iconImageShape=l,this.setImageAttrs({name:n,fill:i})},r.prototype.setImageAttrs=function(e){var n=this,i=e.name,o=e.fill,a=this.iconImageShape;i=i||a.attrs.name,o=o||a.attrs.fill;var l="".concat(i,"-").concat(o),s=Cc[l];s?(a.attr("img",s),this.addShape("image",a)):this.getImage(i,l,o).then(function(u){var f,h,d,c=(d=(h=(f=n.getParent())===null||f===void 0?void 0:f.getMeta)===null||h===void 0?void 0:h.call(f).spreadsheet)===null||d===void 0?void 0:d.container;if(n.destroyed||c&&!c.get("refreshElements")){rr.getInstance().logger("GuiIcon ".concat(i," destroyed."));return}a.attr("img",u),n.addShape("image",a)}).catch(function(u){if(u instanceof TypeError){console.warn("GuiIcon ".concat(i," destroyed:"),u);return}console.error("GuiIcon ".concat(i," load failed:"),u)})},r.type="__GUI_ICON__",r}(hr),Ne;(function(t){t.TOP="TOP",t.BOTTOM="BOTTOM",t.LEFT="LEFT",t.RIGHT="RIGHT"})(Ne||(Ne={}));var sn;(function(t){t.SUM="SUM",t.MIN="MIN",t.MAX="MAX",t.AVG="AVG"})(sn||(sn={}));var kt;(function(t){t.Row="row",t.Col="col",t.Series="series"})(kt||(kt={}));var C5=function(){function t(){this.store=new Map}return t.prototype.set=function(r,e){return this.store.set(r,e)},t.prototype.get=function(r,e){var n,i=this.store.get(r);return(n=i)!==null&&n!==void 0?n:e},t.prototype.clear=function(){this.store.clear()},t.prototype.size=function(){return this.store.size},t}(),$o=function(t){var r,e,n=t.facetCfg,i=t.level,o=t.fields,a=n.colCfg,l=n.spreadsheet,s=n.dataSet,u=s.moreThanOneValue(),f=(e=(r=l.dataCfg.fields)===null||r===void 0?void 0:r.valueInCols)!==null&&e!==void 0?e:!0,h=(a==null?void 0:a.hideMeasureColumn)&&f&&!u&&ot(o,re),d=h?2:1;return i===o.length-d},Zg=function(t,r,e,n){return r.layoutArrange?r.layoutArrange(r.spreadsheet,e,n,t):t},xf=function(t,r,e,n){var i,o,a=(o=(i=t.spreadsheet)===null||i===void 0?void 0:i.facet)===null||o===void 0?void 0:o.getHiddenColumnsInfo(e);if(a&&t.columns.find(function(p){return p===e.field}))return!1;var l=!0,s=function(p,g,y){g===void 0&&(g=-1),y===void 0&&(y=-1),g===-1?(r.children.push(p),n.pushNode(p)):(r.children.splice(g,0,p),n.pushNode(p,y))};if(t.layoutHierarchy){var u=t.layoutHierarchy(t.spreadsheet,e);if(u){var f=tr(u==null?void 0:u.delete)?u==null?void 0:u.delete:!1;l=!f;var h=u.push,d=u.unshift,c=r.children.length,v=n.getNodes().length;D(d)||(J(d,function(p){s(p)}),c=r.children.length,v=n.getNodes().length),D(h)||J(h,function(p){s(p)}),f||s(e,c,v)}else s(e)}else s(e);return l},Os=function(t,r,e){t!=null&&t.layoutCoordinate&&(r!=null&&r.isLeaf||e!=null&&e.isLeaf)&&(t==null||t.layoutCoordinate(t.spreadsheet,r,e))},w5=function(t,r){var e=t==null?void 0:t.layoutDataPosition;if(e){var n=r.getCellMeta,i=e(t.spreadsheet,n);return S(S({},r),{getCellMeta:i})}return r},jg=function(){function t(r){this.label=r}return t}(),Qg=function(t){var r=t.addTotalMeasureInTotal,e=t.parentNode,n=t.currentField,i=t.fields,o=t.facetCfg,a=t.hierarchy,l=i.indexOf(n),s=o.dataSet,u=o.values,f=o.spreadsheet,h=[],d={},c=f.getTotalsConfig(n),v=e.isGrandTotals?c.totalsGroupDimensions||[]:c.subTotalsGroupDimensions||[],p=s.isEmpty()?[]:v;if(p!=null&&p.includes(n)){d=Is(e);var g=s.getDimensionValues(n,d);h.push.apply(h,P([],A((g||[]).map(function(C){return new Qn({label:C,isSubTotals:e.isSubTotals,isGrandTotals:e.isGrandTotals,isTotalRoot:!1})})),!1)),D(h)&&n&&h.push(Tn)}else if(r&&n===re)d=Is(e),h.push.apply(h,P([],A(u.map(function(C){return new jg(C)})),!1));else if($o({facetCfg:o,level:l,fields:i})){e.isLeaf=!0,a.pushIndexNode(e),e.rowIndex=a.getIndexNodes().length-1;return}else{Qg(S(S({},t),{currentField:i[l+1]}));return}var y=h.filter(function(C){return!Ka(C)});_f(S(S({},t),{fieldValues:y,level:l,parentNode:e,query:d}))},m5=function(t){var r,e=t.parentNode,n=t.currentField,i=t.fields,o=t.facetCfg,a=i.indexOf(n),l=o.dataSet,s=o.spreadsheet,u=[],f={};f=Is(e,!0);var h=l.getDimensionValues(n,f),d=Zg(h,o,e,n);u.push.apply(u,P([],A(d||[]),!1)),D(u)&&n&&(n===re?u.push.apply(u,P([],A((r=l.fields)===null||r===void 0?void 0:r.values),!1)):u.push(Tn)),V4({currentField:n,lastField:i[a-1],isFirstField:a===0,fieldValues:u,spreadsheet:s});var c=u.filter(function(v){return!Ka(v)});_f(S(S({},t),{fieldValues:c,level:a,parentNode:e,query:f}))},Jg=function(t){t.parentNode.isTotals?Qg(t):m5(t)},Xi=function(t,r){return"".concat(t).concat(Ke).concat(r)},_f=function(t){var r,e,n,i,o,a,l,s,u,f,h=t.currentField,d=t.fields,c=t.fieldValues,v=t.facetCfg,p=t.hierarchy,g=t.parentNode,y=t.level,C=t.query,w=t.addMeasureInTotalQuery,m=t.addTotalMeasureInTotal,_=v.spreadsheet,b=v.collapsedCols;try{for(var T=Ot(c.entries()),E=T.next();!E.done;E=T.next()){var L=A(E.value,2),F=L[0],I=L[1],B=I instanceof Qn,k=I instanceof jg,U=void 0,O=void 0,z=!1,ue=!1,le=!1,te=!1,Ce=h;if(B){var fe=I;ue=fe.isGrandTotals,le=fe.isSubTotals,te=fe.isTotalRoot,U=He(I.label),te?O=C:O=S(S({},C),(n={},n[h]=U,n)),w&&(O[re]=(l=_==null?void 0:_.dataSet)===null||l===void 0?void 0:l.fields.values[0]),z=$o({facetCfg:v,level:y,fields:d})}else k?(U=He(I.label),O=S(S({},C),(i={},i[re]=U,i)),Ce=re,ue=g.isGrandTotals,le=g.isSubTotals,z=$o({facetCfg:v,level:y,fields:d})):_.isTableMode()?(U=I,Ce=d[F],O=S(S({},C),(o={},o[Ce]=U,o)),z=!0):(U=I,O=U===Tn?S({},C):S(S({},C),(a={},a[h]=U,a)),z=$o({facetCfg:v,level:y,fields:d}));var we=Xi(g.id,U);if(!we)return;var Ee=tr(b==null?void 0:b[we])?b==null?void 0:b[we]:!1,he=new Ge({id:we,key:Ce,value:U,level:y,field:Ce,parent:g,isTotals:B||k,isGrandTotals:ue,isSubTotals:le,isTotalMeasure:k,isCollapsed:Ee,isTotalRoot:te,hierarchy:p,query:O,spreadsheet:_,isLeaf:z||Ee}),me=xf(v,g,he,p),Ie=(s=_==null?void 0:_.facet)===null||s===void 0?void 0:s.getHiddenColumnsInfo(he);Ie&&g&&(g.hiddenChildNodeInfo=Ie),y>p.maxLevel&&!ue&&!g.isGrandTotals&&!g.isSubTotals&&!he.isSubTotals&&(p.sampleNodesForAllLevels.push(he),p.maxLevel=y,p.sampleNodeForLastLevel=Ie?((u=Ie==null?void 0:Ie.displaySiblingNode)===null||u===void 0?void 0:u.next)||((f=Ie==null?void 0:Ie.displaySiblingNode)===null||f===void 0?void 0:f.prev):he);var yr=z||Ee||!me;yr?(he.isLeaf=!0,p.pushIndexNode(he),he.rowIndex=p.getIndexNodes().length-1):Jg({addTotalMeasureInTotal:m,addMeasureInTotalQuery:w,parentNode:he,currentField:d[y+1],fields:d,facetCfg:v,hierarchy:p})}}catch(en){r={error:en}}finally{try{E&&!E.done&&(e=T.return)&&e.call(T)}finally{if(r)throw r.error}}},ey=function(t,r,e,n){var i=r.facetCfg,o=r.hierarchy,a=r.parentNode,l=i.dataSet;t.forEach(function(s,u){typeof s=="string"&&(s={key:s});var f=s.key,h=f===yn?He("序号"):l.getFieldName(f),d=n||a;if(_f({currentField:f,fields:[f],fieldValues:[h],facetCfg:i,hierarchy:o,parentNode:d,level:e,query:{},addMeasureInTotalQuery:!1,addTotalMeasureInTotal:!1}),s.children&&s.children.length){var c=d.children[u];c.isLeaf=!1,ey(s.children,r,e+1,c)}})},dn=function(t,r){return r>0&&t<r},cn=function(t,r,e){return r>0&&t>=e-r},il=function(t,r,e){return e>0&&t<r+e},ho=function(t,r,e){return e>0&&t>=r+1-e},Sf=function(t,r,e,n,i,o){var a=Zn(e,function(h,d){var c=t-(Fe(o)?0:o)+i.x;return c>=h&&c<e[d+1]},0);a=Math.max(a,0);var l=Zn(e,function(h,d){var c=i.width+t+i.x;return c>=h&&c<e[d+1]},a);l=Math.min(l===-1?1/0:l,e.length-2);var s=n.getIndexRange(r+i.y,i.height+r+i.y),u=s.start,f=s.end;return[a,l,u,f]},x5=function(t,r,e){var n=2,i=Math.abs(t/r),o=i<=1/n?0:t,a=i>n?0:r;return[o*e.horizontal,a*e.vertical]},xr=function(t,r,e){var n,i,o=t==null?void 0:t.getMatrix(),a=(n=o==null?void 0:o[6])!==null&&n!==void 0?n:0,l=(i=o==null?void 0:o[7])!==null&&i!==void 0?i:0;t==null||t.translate(r-a,e-l)},ol=function(t,r){var e,n=t==null?void 0:t.getMatrix(),i=(e=n==null?void 0:n[6])!==null&&e!==void 0?e:0;t==null||t.translate(r-i,0)},_5=function(t,r){var e,n=t==null?void 0:t.getMatrix(),i=(e=n==null?void 0:n[7])!==null&&e!==void 0?e:0;t==null||t.translate(0,r-i)},S5=function(t,r,e,n){var i=r.frozenColCount,o=r.frozenRowCount,a=r.frozenTrailingColCount,l=r.frozenTrailingRowCount,s=t.colIndex,u=t.rowIndex;return il(u,n.start,o)?Be.ROW:ho(u,n.end,l)?Be.TRAILING_ROW:dn(s,i)?Be.COL:cn(s,a,e)?Be.TRAILING_COL:Be.SCROLL},b5=function(t,r,e){for(var n,i=t.frozenColCount,o=t.frozenRowCount,a=t.frozenTrailingColCount,l=t.frozenTrailingRowCount,s=(n={},n[Be.TOP]=[],n[Be.BOTTOM]=[],n),u=0;u<i;u++){for(var f=e.start;f<e.start+o;f++)s[Be.TOP].push({x:u,y:f});if(l>0)for(var f=0;f<l;f++){var h=e.end-f;s[Be.BOTTOM].push({x:u,y:h})}}for(var u=0;u<a;u++){for(var d=r-1-u,f=e.start;f<e.start+o;f++)s[Be.TOP].push({x:d,y:f});if(l>0)for(var f=0;f<l;f++){var h=e.end-f;s[Be.BOTTOM].push({x:d,y:h})}}return s},T5=function(t,r,e,n){var i=r.frozenColCount,o=r.frozenRowCount,a=r.frozenTrailingColCount,l=r.frozenTrailingRowCount,s=P([],A(t),!1);dn(s[0],i)&&(s[0]=i),cn(s[1],a,e)&&(s[1]=e-a-1),il(s[2],n.start,o)&&(s[2]=n.start+o),ho(s[3],n.end,l)&&(s[3]=n.end-l);var u=P([],A(s),!1);u[2]=n.start,u[3]=n.start+o-1;var f=P([],A(s),!1);f[0]=0,f[1]=i-1;var h=P([],A(s),!1);h[2]=n.end+1-l,h[3]=n.end;var d=P([],A(s),!1);return d[0]=e-a,d[1]=e-1,{center:s,frozenRow:u,frozenCol:f,frozenTrailingCol:d,frozenTrailingRow:h}},R5=function(t,r){var e=t,n=0,i=e.getTotalLength()-1;if(r){var o=r.current,a=o===void 0?Ms:o,l=r.pageSize;n=Math.max((a-1)*l,0),i=Math.min(a*l-1,e.getTotalLength()-1)}return{start:n,end:i}},ca=function(t,r,e){var n=r,i=e,o=function(a){return a.isLeaf?1:a.children?a.children.reduce(function(l,s){return l+=o(s),l},0):0};return r&&(n=t.slice(0,r).reduce(function(a,l){return a+=o(l),a},0)),e&&(i=t.slice(t.length-e).reduce(function(a,l){return a+=o(l),a},0)),{colCount:n,trailingColCount:i}},ty=function(t,r){return t.reduce(function(e,n){typeof n=="string"&&(n={key:n});var i=S({},n);return i.children?(i.children=ty(i.children,r),e.push(i),e):(r[i.key]&&e.push(i),e)},[])},nr=function(t){return t.parent.id==="root"},E5=function(t){for(;!nr(t);)t=t.parent;return t},L5=function(t){var r=[],e=function(n){n.forEach(function(i){typeof i=="string"||!i.children?r.push(i):e(i.children)})};return e(t),r},ci=function(t){var r=L5(t);return r.map(function(e){return typeof e=="string"?e:e.key})},Bs=function(t){var r=t.children[0];return r?r.isLeaf?r:Bs(r):t},A5=function(t){return D(t.rows)&&D(t.columns)&&D(t.values)&&D(t.customTreeItems)},Jn=function(t,r){var e,n=t.pagination,i=t.frozenFirstRow,o=t.hierarchyType,a=t.showSeriesNumber,l=n&&n.pageSize,s=!1,u=r==null?void 0:r[0];if(!l&&i){s=((e=u==null?void 0:u.children)===null||e===void 0?void 0:e.length)===0;var f=o==="tree"||o==="customTree";f&&!s&&(s=!a)}var h=s&&!!u;return{frozenRowCount:h?1:0,frozenColCount:0,frozenTrailingColCount:0,frozenTrailingRowCount:0,enableFrozenFirstRow:s,frozenRowHeight:h?u.height:0}},M5=function(t){return t===Tn?Aa:t},I5=function(t){var r=t.facetCfg,e=r.columns,n=r.spreadsheet,i=n.store.get("hiddenColumnsDetail"),o=r==null?void 0:r.showSeriesNumber,a=ci(e),l=a.filter(function(h){return i?i.every(function(d){return d.hideColumnNodes.every(function(c){return c.field!==h})}):!0}),s=P([],A(l),!1),u=P([],A(e),!1),f={};o&&(u.unshift({key:yn}),f[yn]=!0),s.reduce(function(h,d){return h[d]=!0,h},f),ey(ty(u,f),t,0,null)},Fn=function(t){return Number.parseFloat((xt(t)||0).toPrecision(sp))},Hr=function(t,r,e){if(e===void 0&&(e=0),!Object.values(t).find(function(a){return a>0}))return t;var n=S({},t);n.frozenColCount>=r&&(n.frozenColCount=r);var i=r-n.frozenColCount;n.frozenTrailingColCount>i&&(n.frozenTrailingColCount=i),n.frozenRowCount>=e&&(n.frozenRowCount=e);var o=e-n.frozenRowCount;return n.frozenTrailingRowCount>o&&(n.frozenTrailingRowCount=o),n},O5=function(t){var r;return(r=t==null?void 0:t.position)!==null&&r!==void 0?r:"right"},B5=function(t,r){t===void 0&&(t=0),r===void 0&&(r=0),t=Fn(t),r=Fn(r);var e=t>=0,n=r>=0&&t<=0,i=e?t:r,o=n?0:i,a=r-t;return function(l){var s=e?0:1,u=n?sa(Math.abs(0-t)/a,0,1):s,f=sa((l-o)/a,-1,1);return{zeroScale:u,scale:f}}},ry=function(t,r){return Ua(t,function(e){return e.field instanceof RegExp?e.field.test(r):e.field===r})},bf=function(t){return fa({size:0,position:"right",margin:{left:0,right:0}},t)},ny=function(t,r,e){var n=r.size,i=r.margin,o=ry(t==null?void 0:t.icon,e),a=o&&o.mapping&&{size:n,margin:i,position:O5(o)};return bf(a)};function _t(t,r,e){var n;return(n=t==null?void 0:t.addShape)===null||n===void 0?void 0:n.call(t,"rect",S({zIndex:1,attrs:r},e||{}))}function D5(t,r){var e;return(e=t==null?void 0:t.addShape)===null||e===void 0?void 0:e.call(t,"polygon",{attrs:r})}function N5(t,r){var e;return(e=t==null?void 0:t.addShape)===null||e===void 0?void 0:e.call(t,"polyline",{attrs:r})}function iy(t,r){var e;return(e=t==null?void 0:t.addShape)===null||e===void 0?void 0:e.call(t,"circle",{attrs:r})}function Sn(t,r,e,n,i,o,a,l){var s;return!D(r)&&t&&J(r,function(u){t.contain(u)&&t.removeChild(u,!0)}),(s=t==null?void 0:t.addShape)===null||s===void 0?void 0:s.call(t,"text",{attrs:S(S({x:e,y:n,text:i,originalText:l},o),a)})}function $e(t,r,e){var n;return(n=t==null?void 0:t.addShape)===null||n===void 0?void 0:n.call(t,"line",{zIndex:100,attrs:S(S({},r),e)})}function Et(t,r,e){if(!D(t)){var n=X(t)?t:[t];n.forEach(function(i){$i(i,"attrs.".concat(r),e)})}}function Tf(t,r){var e=new Ui(r);return t==null||t.add(e),e}function oy(t,r,e,n,i){var o=new Ui(S(S({name:n?"Plus":"Minus"},r),{fill:e}));return Xe(i)&&o.on("click",i),t==null||t.add(o),o}var Ds="s2-offscreen-canvas",P5=function(){var t=document.getElementById(Ds);return t||(t=document.createElement("canvas"),t.id=Ds,t.style.display="none",document.body.appendChild(t),t)},F5=function(){var t;(t=document.getElementById(Ds))===null||t===void 0||t.remove()},ay=function(t,r){var e,n,i,o=t.data,a=t.encode,l=t.type,s=r.getMeta(),u=s.x,f=s.y,h=s.height,d=s.width,c=r.getStyle(N.DATA_CELL),v=c.cell,p=c.miniChart,g=[],y=oe(o,function(k){return g.push(k==null?void 0:k[a.y]),{x:k[a.x],y:k[a.y]}}),C=jn(g),w=tf(g),m=C-w,_=u+v.padding.left,b=u+d-v.padding.right,T=f+v.padding.top,E=f+h-v.padding.bottom,L=E-T,F=l===Kn.Bar?(b-_-(g.length-1)*((e=p==null?void 0:p.bar)===null||e===void 0?void 0:e.intervalPadding))/g.length+((n=p==null?void 0:p.bar)===null||n===void 0?void 0:n.intervalPadding):(i=(b-_)/(g.length-1))!==null&&i!==void 0?i:0,I=[],B=oe(y,function(k,U){var O,z=_+U*F,ue;if(m!==0?ue=E-((k==null?void 0:k.y)-w)/m*L:ue=w>0?T:E,l===Kn.Bar){var le=void 0,te=void 0;w<0&&C>0&&m!==0?(le=E-(0-w)/m*L,te=Math.abs(ue-le),(k==null?void 0:k.y)<0&&(ue=le)):(le=w<0?T:E,m=jn([Math.abs(C),Math.abs(w)]),te=m===0?L:Math.abs((k==null?void 0:k.y)-0)/m*L,ue=le);var Ce=F-((O=p==null?void 0:p.bar)===null||O===void 0?void 0:O.intervalPadding);I.push([Ce,te])}return[z,ue]});return{points:B,box:I}},H5=function(t,r){if(!(D(t==null?void 0:t.data)||D(r))){var e=r.getStyle(N.DATA_CELL),n=e.miniChart,i=n.line,o=i.point,a=i.linkLine,l=ay(t,r).points;N5(r,{points:l,stroke:a.fill,lineWidth:a.size,opacity:a.opacity});for(var s=0;s<l.length;s++)iy(r,{x:l[s][0],y:l[s][1],r:o.size,fill:o.fill,fillOpacity:o.opacity})}},z5=function(t,r){if(!(D(t==null?void 0:t.data)||D(r)))for(var e=r.getStyle(N.DATA_CELL),n=e.miniChart,i=n.bar,o=ay(t,r),a=o.points,l=o.box,s=0;s<a.length;s++)_t(r,{x:a[s][0],y:a[s][1],width:l[s][0],height:l[s][1],fill:i.fill,fillOpacity:i.opacity})},W5=function(t,r,e){var n=Number(r)-Number(t);return Number.isNaN(n)||Number(t)<0?e.bad:n<=.1?e.good:n>.1&&n<=.2?e.satisfactory:e.bad},k5=function(t,r){var e,n,i=Number(t);if(Number.isNaN(i))return t;var o=(e=r.min)!==null&&e!==void 0?e:r,a=(n=r.max)!==null&&n!==void 0?n:r,l=new Intl.NumberFormat("en-US",{minimumFractionDigits:o,maximumFractionDigits:a,useGrouping:!1,style:"percent"});return l.format(i)},G5=function(t){var r,e,n,i,o,a;if(!D(t)){var l=t.getCellArea(),s=l.x,u=l.y,f=l.height,h=l.width,d=t.findFieldCondition((r=t.cellConditions)===null||r===void 0?void 0:r.interval);if(d&&d.mapping){var c=t.mappingValue(d);if(!c)return;var v=c.isCompare?c:t.valueRangeByField,p=Fn(v.minValue),g=Fn(v.maxValue),y=Fe(c==null?void 0:c.fieldValue)?Fn(t.getMeta().fieldValue):Fn(c==null?void 0:c.fieldValue);if(y<p||y>g)return;var C=(n=(e=t.getStyle().miniChart.interval)===null||e===void 0?void 0:e.height)!==null&&n!==void 0?n:t.getStyle().cell.miniBarChartHeight,w=(o=(i=t.getStyle().miniChart.interval)===null||i===void 0?void 0:i.fill)!==null&&o!==void 0?o:t.getStyle().cell.miniBarChartFillColor,m=B5(p,g),_=m(y),b=_.zeroScale,T=_.scale,E=(a=c.fill)!==null&&a!==void 0?a:w;return _t(t,{x:s+h*b,y:u+f/2-C/2,width:h*T,height:C,fill:E})}}},$5=function(t,r){var e,n=r.getStyle(N.DATA_CELL),i=r.getMeta(),o=i.x,a=i.y,l=i.height,s=i.width,u=i.spreadsheet;if(D(t)){Sn(r,[],o+s-n.cell.padding.right,a+l/2,In(r,u.options.placeholder),n.text);return}var f=n.miniChart.bullet,h=f.progressBar,d=f.comparativeMeasure,c=f.rangeColors,v=f.backgroundColor,p=t.measure,g=t.target,y=Math.max(Number(p),0),C=Math.max(Number(g),0),w=k5(p,2),m=(h==null?void 0:h.widthPercent)>1?(h==null?void 0:h.widthPercent)/100:h==null?void 0:h.widthPercent,_=n.cell.padding,b=s-_.left-_.right,T=m*b,E=b-T,L=o+s-_.right-T,F=a+l/2-h.height/2;_t(r,{x:L,y:F,width:T,height:h.height,fill:v,textBaseline:n.text.textBaseline});var I=K(r.getMeta(),"spreadsheet.options.bullet.getRangeColor"),B=Math.max(Math.min(T*y,T),0);_t(r,{x:L,y:F+(h.height-h.innerHeight)/2,width:B,height:h.innerHeight,fill:(e=I==null?void 0:I(y,C))!==null&&e!==void 0?e:W5(y,C,c)});var k=L+T*C;$e(r,{x1:k,y1:a+(l-d.height)/2,x2:k,y2:a+(l-d.height)/2+d.height},{stroke:(d==null?void 0:d.fill)||(d==null?void 0:d.color),lineWidth:d.width,opacity:d==null?void 0:d.opacity}),Sn(r,[],L-_.right,a+l/2,ei({measureTextWidth:u.measureTextWidth,text:w,maxWidth:E-_.right,fontParam:n.text}),n.text)},Y5=function(t,r){switch(r==null?void 0:r.type){case Kn.Line:H5(r,t);break;case Kn.Bar:z5(r,t);break;default:$5(r,t);break}},ly=function(t,r){var e=t.x,n=t.y,i=t.width,o=t.height,a=i-(r==null?void 0:r.left)-(r==null?void 0:r.right),l=o-(r==null?void 0:r.top)-(r==null?void 0:r.bottom);return{x:e+(r==null?void 0:r.left),y:n+(r==null?void 0:r.top),width:a,height:l}},sy=function(t,r){return r=bf(r),t-r.size-r.margin.right-r.margin.left},va=function(t,r,e){var n=t.y,i=t.height;e===void 0&&(e=0);var o=0;switch(r){case"top":o=n;break;case"middle":o=n+i/2-e/2;break;default:o=n+i-e;break}return o},co=function(t,r,e,n,i){e===void 0&&(e=0),i===void 0&&(i=1);var o=t.x,a=t.width,l=r||{},s=l.textAlign,u=l.textBaseline,f=bf(n),h=f.size,d=f.margin,c=f.position,v=i*(h+d.left)+(i?d.right:0),p,g;switch(s){case"left":p=o+(c==="left"?v:0),g=o+(c==="left"?d.left:e+d.left);break;case"center":{var y=v-(c==="left"?d.left:d.right)+e,C=o+a/2-y/2;p=C+e/2+(c==="left"?v-d.left:0),g=C+(c==="left"?0:e+d.left);break}default:{p=o+a-(c==="right"?v:0),g=o+a-(c==="right"?v-d.left:e+v-d.left);break}}var w=va(t,u,0),m=va(t,u,h);return{text:{x:p,y:w},icon:{x:g,y:m}}},U5=function(t,r){return co(t,r).text},X5=function(t,r,e){var n=r.start+r.width,i=t.start+t.width,o,a;if(r.start<=t.start&&n>=i)o=t.start+t.width/2,a=t.width;else if(r.start<=t.start){var l=r.width-(t.start-r.start);o=l<e?n-e/2:n-l/2,a=l}else if(n>=i){var l=r.width-(n-i);o=l<e?r.start+e/2:r.start+l/2,a=l}else o=r.start+r.width/2,a=r.width;return{start:o,width:a}},bn=function(t,r,e){var n=r.x,i=r.y,o=r.width,a=r.height,l=e.horizontalBorderWidth,s=e.horizontalBorderColorOpacity,u=e.horizontalBorderColor,f=e.verticalBorderWidth,h=e.verticalBorderColor,d=e.verticalBorderColorOpacity,c=e.borderDash,v,p,g,y,C;if(t===Ne.TOP||t===Ne.BOTTOM){var w=i;t===Ne.TOP?w=i+f/2:w=i+a-f/2,p=w,y=w,v=n,g=n+o,C={lineWidth:l,stroke:u,strokeOpacity:s,lineDash:c}}if(t===Ne.LEFT||t===Ne.RIGHT){var m=n;t===Ne.LEFT?m=n+l/2:m=n+o-l/2,v=m,g=m,p=i,y=i+a,C={lineWidth:f,stroke:h,strokeOpacity:d,lineDash:c}}return{position:{x1:v,x2:g,y1:p,y2:y},style:C}},V5=function(t,r,e){e===void 0&&(e={left:0,right:0});var n=S({},t);return r==="left"?(n.start+=e.left,n.width-=e.left):r==="right"&&(n.width-=e.right),n},q5=function(t,r,e,n){var i=r+e,o=t.start;if(n==="center")return o-e/2;var a=t.width-i>0,l=a?t.width/2:i/2;return n==="left"?o-l:o+l-e};Ln(function(t,r){if(t===void 0&&(t=""),!r)return 0;var e=P5().getContext("2d"),n=r,i=n.fontSize,o=n.fontFamily,a=n.fontWeight,l=n.fontStyle,s=n.fontVariant;return e.font=[l,s,a,"".concat(i,"px"),o].join(" ").trim(),e.measureText("".concat(t)).width},function(t,r){return P([t],A(Ir(r)),!1).join("")});var wc=function(t,r,e,n){var i=16,o=t(zn,n),a;hi(r)?a=r:a=de(r);var l=e,s=[],u,f;if(t(r,n)<=e)return r;for(var h=!0;h;){if(u=a.substr(0,i),f=t(u,n),f+o>l&&f>l){h=!1;break}if(s.push(u),l-=f,a=a.substr(i),!a)return s.join("")}for(var d=!0;d;){if(u=a.substr(0,1),f=t(u,n),f+o>l){d=!1;break}if(s.push(u),l-=f,a=a.substr(1),!a)return s.join("")}return"".concat(s.join(""),"...")},ei=function(t){var r=t.measureTextWidth,e=t.text,n=t.maxWidth,i=t.fontParam,o=t.priorityParam,a=t.placeholder,l={},s=a??Aa,u=Fe(e)||e===""||e===Tn,f=u?s:"".concat(e),h=o;if(i&&X(i)?h=i:l=i||{},!h||!h.length)return wc(r,f,n,l);var d=[],c=[f];h.forEach(function(y){c.forEach(function(C,w){var m=-1,_=C.match(new RegExp(y));if(_){var b=_[0];m=_.index,d.push(b);var T=m+b.length,E=C.slice(0,m),L=C.slice(T),F=[E,L].filter(function(I){return!!I});c.splice.apply(c,P([w,1],A(F),!1))}})}),c=d.concat(c);var v=f,p=r(zn,l),g=n;return c.forEach(function(y){if(g<=0){var C=v.indexOf(y),w=v.slice(C-3,C);if(w&&w!==zn){var m=r(y,l);v=v.replace(y,m>p?zn:y)}else v=v.replace(y,"");g-=p}else{var m=r(y,l);if(g<m&&m>p){var _=wc(r,y,g,l);v=v.replace(y,_),g=0}else g-=m}}),v},K5=function(t,r,e,n){var i=r.right,o=e||0;return t+i/2+o},Z5=function(t){var r,e,n=t.getMeta().isTotals,i=(e=(r=t).isMeasureField)===null||e===void 0?void 0:e.call(r),o=t.getStyle(t.cellType||N.DATA_CELL),a;return i?a=o.measureText:n?a=o.bolderText:a=o.text,{cellStyle:o,textStyle:a}},j5=function(t){var r=t.rowIndex,e=t.colIndex,n=t.meta,i=t.data,o=t.textStyle,a=t.textCondition,l=o==null?void 0:o.fill;return a!=null&&a.mapping&&(l=a==null?void 0:a.mapping(i,{rowIndex:r,colIndex:e,meta:n}).fill),S(S({},o),{fill:l})},In=function(t,r){return Xe(r)?r(t):r},Q5=function(t,r,e){for(var n=t.x,i=t.y,o=t.width,a=t.height,l=a/Pn(r),s=[],u,f,h,d=0,c=oe(e,function(y){return y>1?y/100:y}),v=0;v<Pn(r);v++){f=i+l*v;var p=[];u=n,d=0;for(var g=0;g<Pn(r[v]);g++)h=D(c)?o/Pn(r[0]):o*c[g],u=K5(n,{right:0},d),d+=h,p.push({x:u,y:f,width:h,height:l});s.push(p)}return s},J5=function(t,r,e){var n,i,o,a;e===void 0&&(e=!0);var l=t.getContentArea(),s=l.x,u=l.y,f=l.height,h=l.width,d=t.getMeta().fieldValue,c=d.values,v=t.getMeta().spreadsheet,p=v.options,g=v.measureTextWidth,y=p.style.cellCfg.valuesCfg,C=(i=(n=p==null?void 0:p.conditions)===null||n===void 0?void 0:n.text)===null||i===void 0?void 0:i[0],w=(a=(o=p==null?void 0:p.conditions)===null||o===void 0?void 0:o.icon)===null||a===void 0?void 0:a[0];if(!X(c)){Y5(t,c);return}var m=y==null?void 0:y.widthPercent,_=0;if(d!=null&&d.label){var b=t.getStyle(N.DATA_CELL),T=b.bolderText;_=f/(c.length+1);var E=Sn(t,[],s,u+_/2,ei({measureTextWidth:g,text:d.label,maxWidth:h,fontParam:T}),T);t.addTextShape(E)}for(var L=Z5(t),F=L.cellStyle,I=L.textStyle,B=F==null?void 0:F.icon,k=w&&w.mapping&&{size:B==null?void 0:B.size,margin:B==null?void 0:B.margin,position:w==null?void 0:w.position},U,O=Q5({x:s,y:u+_,height:f-_,width:h},c,m),z=0;z<c.length;z++)for(var ue=oo(c[z]),le=0;le<ue.length;le++){U=ue[le];var te=e?j5({rowIndex:z,colIndex:le,meta:t==null?void 0:t.getMeta(),data:U,textStyle:I,textCondition:C}):I,Ce=(t==null?void 0:t.getMeta().spreadsheet.options).placeholder,fe=In(t==null?void 0:t.getMeta(),Ce),we=sy(O[z][le].width,B),Ee=ei({measureTextWidth:g,text:U,maxWidth:we,fontParam:te,placeholder:fe}),he=g(Ee,I),me=co(O[z][le],I,he,k,w?1:0),E=Sn(t,[],me.text.x,me.text.y,Ee,te,{},U==null?void 0:U.toString());if(t.addTextShape(E),w&&e){var Ie=w==null?void 0:w.mapping(U,{rowIndex:z,colIndex:le,meta:t==null?void 0:t.getMeta()});if(Ie){var yr=Tf(t,S(S({},me.icon),{name:Ie.icon,width:B==null?void 0:B.size,height:B==null?void 0:B.size,fill:Ie.fill}));t.addConditionIconShape(yr)}}}},Ml=function(t,r){return r===void 0&&(r=1),(t==null?void 0:t.width)*r},e6=function(t){try{return JSON.parse(t)}catch{return null}},t6=function(t,r,e){return t.sort(function(n,i){var o=r.indexOf(n),a=r.indexOf(i);return o===-1&&a===-1?0:o===-1?1:a===-1?-1:o-a})},r6=function(t){return t===void 0&&(t=[]),t.filter(function(r){return r!==lr&&r!==vu})},n6=function(t){return X(t)?j0(t):[t]},i6=function(t,r){var e;return(e=t==null?void 0:t.filter(function(n){return!(r!=null&&r.includes(n))}))===null||e===void 0?void 0:e.concat(r)};function o6(t,r){var e=t.isRowTotal,n=t.isRowSubTotal,i=t.isColTotal,o=t.isColSubTotal,a=r||{},l=a.row,s=a.col,u=l||{},f=u.calcTotals,h=f===void 0?{}:f,d=u.calcSubTotals,c=d===void 0?{}:d,v=s||{},p=v.calcTotals,g=p===void 0?{}:p,y=v.calcSubTotals,C=y===void 0?{}:y,w=function(m,_){if((m.aggregation||m.calcFunc)&&_)return{aggregation:m.aggregation,calcFunc:m.calcFunc}};return w(g,i)||w(C,o)||w(h,e)||w(c,n)}function Vi(t){return t===zo}function nn(t,r,e){return t===void 0&&(t={}),r===void 0&&(r=[]),e===void 0&&(e=lr),r.reduce(function(n,i){var o=t[i];return i in t?n.push(String(o)):n.push(e),n},[])}function uy(t,r){var e=r.filter(function(n){return n in t});return D(e)&&e.push(vu),e}function mc(t,r,e){t===void 0&&(t={}),r===void 0&&(r=[]);var n=[];function i(o,a,l){return a.reduce(function(s,u){var f=o[u];return u in o?s.push(String(f)):u===re&&l?s.push(l):s.push(lr),s},[])}return e?e.forEach(function(o){n.push(i(t,r,o))}):n.push(i(t,r)),n}function a6(t,r,e){var n,i=r.slice(0,r.indexOf(t)+1);return(n=e.map(function(o){return i.map(function(a){return o[a]}).join("".concat(Ke))}))===null||n===void 0?void 0:n.filter(function(o){return o})}function pa(t,r){return t.concat(r).filter(function(e){return e!==re}).join(Ke)}function ga(t){var r=t.rowDimensionValues,e=t.colDimensionValues,n=t.isFirstCreate,i=t.onFirstCreate,o=t.rowFields,a=t.colFields,l=t.rowPivotMeta,s=t.colPivotMeta,u=t.prefix,f=u===void 0?"":u,h=function(v,p,g,y){for(var C=g,w=[],m=0;m<p.length;m++){var _=p[m];if(n&&C&&!(C!=null&&C.has(_))){var b=p.slice(0,m+1).map(function(B){return String(B)}),T=b.join(Ke),E=_===lr,L=void 0;E?L=0:C.has(lr)?L=C.size:L=C.size+1,C.set(_,{id:T,dimensions:b,value:_,level:L,children:new Map}),i==null||i({dimension:v==null?void 0:v[m],dimensionPath:T,careRepeated:y})}var F=C==null?void 0:C.get(_);if(w.push(Vi(_)?_:F==null?void 0:F.level),F){var I=v==null?void 0:v[m+1];n&&F.childField!==I&&(F.childField=I),C=F==null?void 0:F.children}}return w},d=h(o,r,l,!1),c=h(a,e,s,!0);return P(P([f],A(d),!1),A(c),!1)}function l6(t){var r=t.rows,e=t.columns,n=t.values,i=t.valueInCols,o=t.data,a=o===void 0?[]:o,l=t.indexesData,s=l===void 0?{}:l,u=t.sortedDimensionValues,f=t.rowPivotMeta,h=t.colPivotMeta,d=t.getExistValuesByDataItem,c=[],v=new Set(eg(r,e)),p=function(y){var C=y.dimension,w=y.dimensionPath,m=y.careRepeated,_=m===void 0?!0:m;_&&v.has(C)||(u[C]||(u[C]=[])).push(w)},g=pa(r,e);return a.forEach(function(y){var C,w,m,_;if(!(!y||D(y))){var b=d?d(y,n):uy(y,n),T=mc(y,r,i?null:b),E=mc(y,e,i?b:null);try{for(var L=Ot(T),F=L.next();!F.done;F=L.next()){var I=F.value;try{for(var B=(m=void 0,Ot(E)),k=B.next();!k.done;k=B.next()){var U=k.value,O=ga({rowDimensionValues:I,colDimensionValues:U,rowPivotMeta:f,colPivotMeta:h,rowFields:r,colFields:e,isFirstCreate:!0,onFirstCreate:p,prefix:g});c.push(O),$i(s,O,y)}}catch(z){m={error:z}}finally{try{k&&!k.done&&(_=B.return)&&_.call(B)}finally{if(m)throw m.error}}}}catch(z){C={error:z}}finally{try{F&&!F.done&&(w=L.return)&&w.call(L)}finally{if(C)throw C.error}}}}),{paths:c,indexesData:s,rowPivotMeta:f,colPivotMeta:h,sortedDimensionValues:u}}function xc(t,r){if(!(!t||!r)){var e=r.split(Ke),n=ge(e),i=t;J(e,function(o,a){var l=i.get(o);return l?(o===n?(l.children=new Map,l.childField=void 0):i=l.children,!0):a===0&&o===lp})}}function s6(t,r,e){var n=function(a){var l=Je(t,function(s){var u=s.field;return u===a});return K(l,"name",a)},i=r||e,o={field:re,name:i,formatter:function(a){return n(a)}};return o}function Li(t,r){return{isRowTotal:t.isGrandTotals,isRowSubTotal:t.isSubTotals,isColTotal:r.isGrandTotals,isColSubTotal:r.isSubTotals}}function u6(t){for(var r=null,e=0;e<t.length;e++){var n=t[e];if(Vi(n))r=e;else if(!ag(r)&&r<e)return!0}return!1}function fy(t){var r=t.pivotMeta,e=t.dimensionValues,n=t.fieldIdx,i=t.queryType,o=t.fields,a=t.sortedDimensionValues,l={children:r},s=[l];function u(d,c){var v,p=so(d,function(C){var w,m,_=[];try{for(var b=Ot(C.children.values()),T=b.next();!T.done;T=b.next()){var E=T.value;E.value!==vu&&(i===At.All||E.value!==lr)&&_.push(E)}}catch(L){w={error:L}}finally{try{T&&!T.done&&(m=b.return)&&m.call(b)}finally{if(w)throw w.error}}return _});if(d.length>1){var g=(v=a[c])!==null&&v!==void 0?v:[],y=new Map(g.map(function(C,w){return[C,w]}));return p.sort(function(C,w){return y.get(C.id)-y.get(w.id)}),p}return p}for(var f=function(d){var c=e[d],v=o[d];Vi(c)?s=u(s,v):s=s.map(function(p){return p.children.get(c)}).filter(Boolean)},h=0;h<=n;h++)f(h);return s}function _c(t){var r=t.dimensionValues,e=t.pivotMeta,n=t.fields,i=t.sortedDimensionValues,o=t.queryType,a=o===void 0?At.All:o;if(!u6(r))return[r];var l=fy({pivotMeta:e,dimensionValues:r,fieldIdx:r.length-1,queryType:a,fields:n,sortedDimensionValues:i});return l.map(function(s){return s.dimensions})}function f6(t){var r=t.rowFields,e=t.rowDimensionValues,n=t.rowPivotMeta,i=t.colFields,o=t.colDimensionValues,a=t.colPivotMeta,l=t.queryType,s=t.sortedDimensionValues,u=_c({dimensionValues:e,pivotMeta:n,fields:r,sortedDimensionValues:s,queryType:l}),f=_c({dimensionValues:o,pivotMeta:a,fields:i,sortedDimensionValues:s,queryType:l});return{rowQueries:u,colQueries:f}}function h6(t,r){return t?X(t)?so(t,function(e){if(!X(e))return Ut([e]);var n=r===At.DetailOnly?1:0;return Ut(e.slice(n))}):Ut([t]):[]}var No;function Sc(t,r){return!t||!r?!1:String(t).toLowerCase()===String(r).toLowerCase()}var d6=`\r
`,c6="	",ya=function(t,r){var e=t.getColumnNodes().find(function(n){return n.id===r});return t.isPivotMode()?e==null?void 0:e.value:e==null?void 0:e.field},v6=function(t,r){var e=r.getColumnNodes().find(function(n){return n.colIndex===t});return ya(r,e.id)},p6=function(t,r){var e=t.rowIndex,n=t.colIndex;return[r.getRowNodes().find(function(i){return i.rowIndex===e}),r.getColumnNodes().find(function(i){return i.colIndex===n})]},qi=function(t,r){var e=r.getColumnNodes().find(function(i){return i.colIndex===t}),n=ya(r,e.id);return r.options.interaction.copyWithFormat?r.dataSet.getFieldFormatter(n):function(i){return i}},g6=function(t){var r,e,n,i,o=((i=(n=(e=t.options)===null||e===void 0?void 0:e.style)===null||n===void 0?void 0:n.colCfg)===null||i===void 0?void 0:i.hideMeasureColumn)&&t.isValueInCols();return o?(r={},r[re]=t.dataCfg.fields.values[0],r):{}},y6=function(t,r,e){var n,i;if(e.isPivotMode()){var o=A(p6(t,e),2),a=o[0],l=o[1],s=g6(e),u=e.dataSet.getCellData({query:S(S(S({},a.query),l.query),s),rowNode:a,isTotals:a.isTotals||a.isTotalMeasure||l.isTotals||l.isTotalMeasure,totalStatus:Li(a,l)});return(n=u==null?void 0:u[dt])!==null&&n!==void 0?n:""}var f=v6(t.colIndex,e);return(i=r[t.rowIndex])===null||i===void 0?void 0:i[f]},hy=function(t,r,e){var n=qi(t.colIndex,e);return n(y6(t,r,e))},Rf=function(t){return/\n/.test(t)?'"'+t.replace(/\r\n?/g,`
`)+'"':t},Ki=function(t,r){var e=t.split(Ke);return r?e.slice(e.length-r):(e.shift(),e)},Ns=function(t,r){return oe(t,function(e){return r.dataSet.getFieldName(e)})},Re;(function(t){t.PLAIN="text/plain",t.HTML="text/html"})(Re||(Re={}));var C6=function(t){return{type:Re.PLAIN,content:oe(t,function(r){return r.join(c6)}).join(d6)}},w6=function(t){function r(n,i){return n.map(function(o){return"<".concat(i,">").concat(Uu(o),"</").concat(i,">")}).join("")}function e(n,i){return n.map(function(o){return"<".concat(i,">").concat(r(o,"td"),"</").concat(i,">")}).join("")}return{type:Re.HTML,content:'<meta charset="utf-8"><table><tbody>'.concat(e(t,"tr"),"</tbody></table>")}},m6=(No={},No[Re.PLAIN]=C6,No[Re.HTML]=w6,No);function vt(t){return m6[t]}function x6(t,r){return r===void 0&&(r=Re.PLAIN),Array.isArray(r)?[].concat(t).filter(function(e){return r.includes(e.type)}).map(function(e){return e.content}):[].concat(t).filter(function(e){return(e==null?void 0:e.type)===r}).map(function(e){return e.content})[0]||""}var dy=function(t,r,e){var n,i,o,a,l,s,u=(i=(n=t[0])===null||n===void 0?void 0:n.length)!==null&&i!==void 0?i:0,f=(o=r==null?void 0:r.length)!==null&&o!==void 0?o:0,h=(l=(a=e[0])===null||a===void 0?void 0:a.length)!==null&&l!==void 0?l:0,d=(s=e.length)!==null&&s!==void 0?s:0,c=u+h,v=f+d,p=Array.from(Array(v),function(){return new Array(c)});return p=oe(p,function(g,y){return oe(g,function(C,w){if(w>=0&&w<u&&y>=0&&y<f)return"";if(w>=u&&w<=c&&y>=0&&y<f)return r[y][w-u];if(w>=0&&w<u&&y>=f&&y<v)return t[y-f][w];if(w>=u&&w<=c&&y>=f&&y<v)return e[y-f][w-u]})}),[vt(Re.PLAIN)(p),vt(Re.HTML)(p)]},_6=function(t,r,e){var n=r.map(function(i){return i.map(function(o){return o?Rf(hy(o,t,e)):""})});return[vt(Re.PLAIN)(n),vt(Re.HTML)(n)]},S6=function(t){if(!(t!=null&&t.length))return[];var r=A([{row:1/0,col:1/0},{row:0,col:0}],2),e=r[0],n=r[1];t.forEach(function(s){var u=s.rowIndex,f=s.colIndex;e.col=Math.min(f,e.col),e.row=Math.min(u,e.row),n.col=Math.max(f,n.col),n.row=Math.max(u,n.row)});var i=A([n.row-e.row+1,n.col-e.col+1],2),o=i[0],a=i[1],l=new Array(o).fill("").map(function(){return new Array(a).fill("")});return t.forEach(function(s){var u=s.rowIndex,f=s.colIndex,h=A([u-e.row,f-e.col],2),d=h[0],c=h[1];l[d][c]=s}),l},b6=function(t,r){var e=t.dataSet.getDisplayDataSet(),n=r.length?r.map(function(o){return{field:ya(t,o.id),formatter:qi(o.colIndex,t)}}):t.dataCfg.fields.columns.map(function(o){return t.getColumnNodes().find(function(a){return a.field===o})}).map(function(o){return{field:ya(t,o.id),formatter:qi(o.colIndex,t)}}),i=e.map(function(o){return n.map(function(a){var l=a.field,s=a.formatter;return Rf(s(o[l]))})});return[vt(Re.PLAIN)(i),vt(Re.HTML)(i)]},cy=function(t,r,e){return oe(t,function(n){return r.map(function(i){var o,a=e.dataSet.getCellData({query:S(S({},n.query),i.query),rowNode:n,isTotals:n.isTotals||n.isTotalMeasure||i.isTotals||i.isTotalMeasure,totalStatus:Li(n,i)});return qi(i.colIndex,e)((o=a==null?void 0:a[dt])!==null&&o!==void 0?o:"")})})},T6=function(t,r,e){var n=cy(r,e,t);return[vt(Re.PLAIN)(n),vt(Re.HTML)(n)]},R6=function(t,r,e){var n=oe(r,function(a){return Ki(a.id)}),i=rl.apply(void 0,P([],A(oe(e,function(a){return Ki(a.id)})),!1)),o=cy(r,e,t);return dy(n,i,o)};function vy(t,r,e){var n=t.options.interaction.copyWithHeader;return n?R6(t,r,e):T6(t,r,e)}var E6=function(t,r){var e=t.getRowNodes().filter(function(o){return o.isLeaf||t.isHierarchyTreeType()}),n=t.getColumnNodes().filter(function(o){return o.isLeaf}),i=r.length?r.reduce(function(o,a){return o.push.apply(o,P([],A(n.filter(function(l){return l.id.startsWith(a.id)})),!1)),o},[]):n;return vy(t,e,i)},bc=function(t,r,e){return r.isPivotMode()?E6(r,e):b6(r,e)},L6=function(t,r){var e=t.dataSet.getDisplayDataSet(),n=e.filter(function(i,o){return r.map(function(a){return a.rowIndex}).includes(o)}).map(function(i){var o=t.getColumnNodes().reduce(function(a,l,s){return a[l.field]=s,a},{});return Object.keys(i).sort(function(a,l){return o[a]-o[l]}).map(function(a){return t.getColumnNodes().find(function(l){return l.field===a})}).filter(Boolean).map(function(a){return Rf(qi(a.colIndex,t)(i[a.field]))})});return[vt(Re.PLAIN)(n),vt(Re.HTML)(n)]},A6=function(t,r){var e=t.getRowNodes().filter(function(o){return o.isLeaf||t.isHierarchyTreeType()}),n=t.getColumnNodes().filter(function(o){return o.isLeaf}),i=r.reduce(function(o,a){return o.push.apply(o,P([],A(e.filter(function(l){return l.id.startsWith(a.id)})),!1)),o},[]);return vy(t,i,n)},M6=function(t,r,e){return r.isPivotMode()?A6(r,e):L6(r,e)},I6=function(t,r,e){var n=rl.apply(void 0,P([],A(oe(t[0],function(a){var l,s=(a==null?void 0:a.colId)||ge((l=a==null?void 0:a.id)===null||l===void 0?void 0:l.split(as))||"";return Ns(Ki(s),e)})),!1)),i=oe(t,function(a){var l,s,u,f=((l=a==null?void 0:a[0])===null||l===void 0?void 0:l.rowId)||fi((u=(s=a==null?void 0:a[0])===null||s===void 0?void 0:s.id)===null||u===void 0?void 0:u.split(as))||"";return Ns(Ki(f),e)}),o=oe(t,function(a){return oe(a,function(l){return hy(l,r,e)})});return dy(i,n,o)};function O6(t){var r=new Set;return J(t,function(e){var n=e.getMeta().level;r.has(n)||r.add(n)}),r}function B6(t,r){return Mr(t,function(e){var n=e.getMeta(),i=n.level===r,o=n.isTotals&&D(n.children);return i||o})}function D6(t,r){for(var e=t,n={level:r},i=e.label;e.level>=0;){for(var o=n.level-e.level;o>0;)i="".concat(e.label).concat(Ke).concat(i),o--;n=e,e=e.parent}return i}function N6(t,r,e){return oe(t,function(n){var i=n.getMeta(),o=i.id,a=i.isTotals,l=i.spreadsheet,s=a?D6(i,r):o,u=Ki(s,e.size);return Ns(u,l)})}function P6(t){var r,e=O6(t),n=(r=jn(Array.from(e)))!==null&&r!==void 0?r:0,i=B6(t,n),o=t[0].cellType===N.COL_CELL,a=N6(i,n,e);return o&&(a=rl.apply(void 0,P([],A(a),!1))),[vt(Re.PLAIN)(a),vt(Re.HTML)(a)]}var F6=function(t,r,e){return oe(r,function(n){var i;return(i=t[n])!==null&&i!==void 0?i:e})},H6=function(t,r){var e=t.options.placeholder,n=t.dataCfg.fields,i=n.rows,o=n.columns,a=n.values,l=In(t,e),s=t.getColumnLeafNodes(),u=[];if(t.isTableMode()){var f=Mr(s,function(v){return v.field!==yn});u=oe(r,function(v){return oe(f,function(p){var g;return(g=v==null?void 0:v[p.field])!==null&&g!==void 0?g:l})})}else if(t.isPivotMode()){var h=P(P(P([],A(i),!1),A(o),!1),A(a),!1),d=n6(r),c=d.filter(function(v){return P(P([],A(i),!1),A(o),!1).every(function(p){return!Fe(v[p])})});u=Qa(c,function(v,p){return P(P([],A(v),!1),[F6(p,h,l)],!1)},[])}return[vt(Re.PLAIN)(u),vt(Re.HTML)(u)]};function z6(t,r){var e,n,i=r.filter(function(f){var h=f.type;return h===N.COL_CELL}),o=r.filter(function(f){var h=f.type;return h===N.ROW_CELL}),a=t.dataSet.getDisplayDataSet();if(t.interaction.getCurrentStateName()===G.ALL_SELECTED)n=bc(a,t,[]);else if(i.length)n=bc(a,t,i);else if(o.length)n=M6(a,t,o);else{if(!r.length)return;var l=S6(r),s=t.interaction.getSelectedCellHighlight().currentRow;if(s){var u=af(r,"rowIndex","asc").map(function(f){return t.dataSet.getRowData(f)});n=H6(t,u)}else!((e=t.options.interaction)===null||e===void 0)&&e.copyWithHeader?n=I6(l,a,t):n=_6(a,l,t)}return n}var W6=function(t){var r,e=t.interaction,n=e.getState().cells||[],i,o=(r=e.getInteractedCells())!==null&&r!==void 0?r:[],a=D(o)?!1:Ya(o,function(l){return l.cellType===N.ROW_CELL||l.cellType===N.COL_CELL});return a?i=P6(o):i=z6(t,n),i&&G6(i),x6(i,Re.PLAIN)},py=function(t){return new Promise(function(r,e){var n;Array.isArray(t)?n=K(t.filter(function(a){return a.type===Re.PLAIN}),"[0].content",""):n=t.content||"";var i=document.createElement("textarea");i.value=n,document.body.appendChild(i),i.focus({preventScroll:!0}),i.select();var o=document.execCommand("copy");document.body.removeChild(i),o?r():e()})},k6=function(t){return navigator.clipboard.write([new ClipboardItem([].concat(t).reduce(function(r,e){var n,i=e.type,o=e.content,a=o.replace(/\x00/g,"");return S(S({},r),(n={},n[i]=new Blob([a],{type:i}),n))},{}))]).catch(function(){return py(t)})},G6=function(t,r){r===void 0&&(r=!1);var e;return typeof t=="string"?e={content:t,type:Re.PLAIN}:e=t,!navigator.clipboard||!window.ClipboardItem||r?py(e):k6(e)},Ef=function(t,r,e){var n,i=t.split(Ke);if(e)n=[t];else{n=[Xi(i[0],i[1])];for(var o=2;o<i.length;o+=1)n.push(Xi(n[o-2],i[o]))}var a=Mr(r,function(l){var s;return n.includes((s=l.getMeta())===null||s===void 0?void 0:s.id)});return a},gy=function(t,r,e){if(t){var n=Ef(t,r);J(n,function(i){i.updateByState(e)})}},$6=function(t,r){return typeof t=="function"?t(r):t.some(function(e){return e===r.key||e===r.id||e===r.valueField})},Jt=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var e=function(i,o){if(X(i)&&X(o))return o},n=P(P([],A(t),!1),[e],!1);return Gu.apply(void 0,P([{}],A(n),!1))},Y6=function(t){var r=["rows","columns","values"],e=r.reduce(function(n,i){var o=t[i],a=mr(o);return Ue(a,o)||console.warn("fields.".concat(i,":[").concat(o,"] should be unique")),n[i]=a,n},{});return S(S({},t),e)},Il=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var e=Jt.apply(void 0,P([Hx],A(t),!1));return e.fields=Y6(e.fields),(!D(e.fields.customTreeItems)||D(e.fields.values))&&(e.fields.valueInCols=!1),e},Tc=function(t){return Jt(Yx,t)},al=function(t){H(r,t);function r(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=t.call(this,{})||this;return a.textShapes=[],a.actualTextWidth=0,a.conditionIconShapes=[],a.stateShapes=new Map,a.meta=e,a.spreadsheet=n,a.theme=n.theme,a.conditions=a.spreadsheet.options.conditions,a.handleRestOptions.apply(a,P([],A(i),!1)),a.shouldInit()&&a.initCell(),a}return r.prototype.getMeta=function(){return this.meta},r.prototype.setMeta=function(e){this.meta=Jt(this.meta,e)},r.prototype.getIconStyle=function(){return this.theme[this.cellType].icon},r.prototype.getTextAndIconPosition=function(e){e===void 0&&(e=1);var n=this.getTextStyle(),i=this.getIconStyle();return co(this.getContentArea(),n,this.actualTextWidth,i,e)},r.prototype.getActualText=function(){return this.actualText},r.prototype.isTextOverflowing=function(){var e=this.getActualText();return e?ot(e,zn):e!==this.getFieldValue()},r.prototype.getFieldValue=function(){var e=this.getFormattedFieldValue().formattedValue;return e===Tn?this.getActualText():e},r.prototype.handleRestOptions=function(){},r.prototype.shouldInit=function(){var e=this.meta,n=e.width,i=e.height;return n>0&&i>0},r.prototype.getStyle=function(e){return K(this.theme,e||this.cellType)},r.prototype.getResizeAreaStyle=function(){return this.getStyle("resizeArea")},r.prototype.shouldDrawResizeAreaByType=function(e,n){var i=this.spreadsheet.options.interaction.resize;return tr(i)?i:Xe(i.visible)?i.visible(n):i[e]},r.prototype.getCellArea=function(){var e=this.meta,n=e.x,i=e.y,o=e.height,a=e.width;return{x:n,y:i,height:o,width:a}},r.prototype.getContentArea=function(){var e=this.getStyle()||this.theme.dataCell,n=(e==null?void 0:e.cell).padding;return ly(this.getCellArea(),n)},r.prototype.getIconPosition=function(e){return e===void 0&&(e=1),this.getTextAndIconPosition(e).icon},r.prototype.drawTextShape=function(){var e=this.getFormattedFieldValue().formattedValue,n=this.getMaxTextWidth(),i=this.getTextStyle(),o=this.spreadsheet,a=o.options.placeholder,l=o.measureTextWidth,s=In(this,a),u=ei({measureTextWidth:l,text:e,maxWidth:n,fontParam:i,placeholder:s});this.actualText=u,this.actualTextWidth=l(u,i);var f=this.getTextPosition();this.textShape=Sn(this,[this.textShape],f.x,f.y,u,i),this.textShapes.push(this.textShape)},r.prototype.drawLinkFieldShape=function(e,n){if(e){var i=this.spreadsheet.options.style.device;if(!We(i)){var o=this.getTextStyle(),a=this.getTextPosition(),l=a.x;o.textAlign==="center"?l-=this.actualTextWidth/2:o.textAlign==="right"&&(l-=this.actualTextWidth);var s=this.textShape.getBBox().maxY;this.linkFieldShape=$e(this,{x1:l,y1:s+1,x2:l+this.actualTextWidth,y2:s+1},{stroke:n,lineWidth:1})}this.textShape.attr({fill:n,cursor:"pointer",appendInfo:{isLinkFieldText:!0,cellData:this.meta}})}},r.prototype.getLinkFieldStyle=function(){return this.getTextStyle().linkTextFill},r.prototype.drawLinkField=function(e){var n=this.spreadsheet.options.interaction.linkFields,i=n===void 0?[]:n,o=this.getLinkFieldStyle(),a=$6(i,e);this.drawLinkFieldShape(a,o)},r.prototype.updateByState=function(e,n){var i=this;this.spreadsheet.interaction.setInteractedCells(n);var o=K(this.theme,"".concat(this.cellType,".cell.interactionState.").concat(e));J(o,function(a,l){var s=Ae(of(zx,function(u){return ot(u,l)}));s.forEach(function(u){var f=i.stateShapes.has(u),h=f?i.stateShapes.get(u):i[u],d=X(h)?h:[h];if(f&&d.forEach(function(v){v.set("visible",!0)}),u==="interactiveBorderShape"&&l==="borderWidth"&&it(a)){var c=i.getInteractiveBorderShapeStyle(a);J(c,function(v,p){Et(d,p,v)})}Et(d,wt[l],a)})})},r.prototype.getInteractiveBorderShapeStyle=function(e){var n=this.getCellArea(),i=n.x,o=n.y,a=n.height,l=n.width,s=this.theme.dataCell.cell,u=s.horizontalBorderWidth,f=s.verticalBorderWidth;return{x:i+f/2+e/2,y:o+u/2+e/2,width:l-f-e,height:a-u-e}},r.prototype.hideInteractionShape=function(){this.stateShapes.forEach(function(e){Et(e,wt.backgroundOpacity,0),Et(e,wt.backgroundColor,"transparent"),Et(e,wt.borderOpacity,0),Et(e,wt.borderWidth,1),Et(e,wt.borderColor,"transparent")})},r.prototype.clearUnselectedState=function(){Et(this.backgroundShape,wt.backgroundOpacity,1),Et(this.textShapes,wt.textOpacity,1),Et(this.linkFieldShape,wt.opacity,1)},r.prototype.getTextShape=function(){return this.textShape},r.prototype.getTextShapes=function(){return this.textShapes||[this.textShape]},r.prototype.addTextShape=function(e){e&&this.textShapes.push(e)},r.prototype.getConditionIconShape=function(){return this.conditionIconShape},r.prototype.getConditionIconShapes=function(){return this.conditionIconShapes||[this.conditionIconShape]},r.prototype.addConditionIconShape=function(e){e&&this.conditionIconShapes.push(e)},r.prototype.resetTextAndConditionIconShapes=function(){this.textShapes=[],this.conditionIconShapes=[]},Object.defineProperty(r.prototype,"cellConditions",{get:function(){return this.conditions},enumerable:!1,configurable:!0}),r.prototype.drawConditionIconShapes=function(){var e,n=this.findFieldCondition((e=this.conditions)===null||e===void 0?void 0:e.icon);if(n&&n.mapping){var i=this.mappingValue(n),o=this.getIconPosition(),a=this.theme.dataCell.icon.size;D(i==null?void 0:i.icon)||(this.conditionIconShape=Tf(this,S(S({},o),{name:i.icon,width:a,height:a,fill:i.fill})),this.addConditionIconShape(this.conditionIconShape))}},r.prototype.getTextConditionFill=function(e){var n,i,o=e.fill,a=this.findFieldCondition((n=this.conditions)===null||n===void 0?void 0:n.text);return a!=null&&a.mapping&&(o=((i=this.mappingValue(a))===null||i===void 0?void 0:i.fill)||e.fill),o},r.prototype.getCrossBackgroundColor=function(e){var n=this.getStyle().cell,i=n.crossBackgroundColor,o=n.backgroundColorOpacity;return i&&e%2===0?{backgroundColorOpacity:o,backgroundColor:i}:{backgroundColorOpacity:o,backgroundColor:this.getStyle().cell.backgroundColor}},r}(hr),yy=function(t,r){return r?r(t[re],t[dt]):t[dt]},un=function(t,r){var e=r.getMeta().id;return t.some(function(n){return Ue(n.id,e)})},vo=function(t,r){return"".concat(t).concat(as).concat(r)},U6=function(t){var r=t.interaction.getSelectedCellHighlight(),e=r.currentRow,n=r.currentCol,i=r.rowHeader,o=r.colHeader;return e||n||i||o},Lf=function(t){return t.type===N.DATA_CELL},X6=function(t,r){J(t,function(e){Lf(e)&&e.rowIndex===r.getMeta().rowIndex&&r.updateByState(G.SELECTED)})},V6=function(t,r){J(t,function(e){Lf(e)&&e.colIndex===r.getMeta().colIndex&&r.updateByState(G.SELECTED)})},q6=function(t,r){J(t,function(e){Lf(e)&&e.rowIndex===r.getMeta().rowIndex&&e.colIndex===r.getMeta().colIndex&&r.updateByState(G.SELECTED)})},K6=function(t,r,e){var n=e.interaction.getSelectedCellHighlight(),i=n.rowHeader,o=n.colHeader,a=n.currentRow,l=n.currentCol,s=r.cellType===N.ROW_CELL,u=e.isTableMode()&&e.options.showSeriesNumber&&i&&s;(a||u)&&X6(t,r),l&&V6(t,r),(i||o)&&q6(t,r)},Qr=function(t){H(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"cellType",{get:function(){return N.DATA_CELL},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"valueRangeByField",{get:function(){return this.spreadsheet.dataSet.getValueRangeByField(this.meta.valueField)},enumerable:!1,configurable:!0}),r.prototype.handleByStateName=function(e,n){un(e,this)&&this.updateByState(n)},r.prototype.handleSearchResult=function(e){if(un(e,this)){var n=Je(e,function(i){return i==null?void 0:i.isTarget});n.id===this.getMeta().id?this.updateByState(G.HIGHLIGHT):this.updateByState(G.SEARCH_RESULT)}},r.prototype.handleSelect=function(e){var n,i=(n=e==null?void 0:e[0])===null||n===void 0?void 0:n.type;switch(i){case N.COL_CELL:this.changeRowColSelectState("colIndex");break;case N.ROW_CELL:this.changeRowColSelectState("rowIndex");break;case N.DATA_CELL:U6(this.spreadsheet)?K6(e,this,this.spreadsheet):un(e,this)?this.updateByState(G.SELECTED):this.spreadsheet.options.interaction.selectedCellsSpotlight&&this.updateByState(G.UNSELECTED);break}},r.prototype.handleHover=function(e){var n=fi(e);if(n.type!==N.DATA_CELL){this.hideInteractionShape();return}var i=this.spreadsheet.interaction.getHoverHighlight(),o=i.currentRow,a=i.currentCol;if(o||a){var l=this.meta.colIndex,s=this.meta.rowIndex;a&&l===(n==null?void 0:n.colIndex)||o&&s===(n==null?void 0:n.rowIndex)?this.updateByState(G.HOVER):this.hideInteractionShape()}var u=this.getMeta(),f=u.id,h=u.rowIndex,d=u.colIndex;Ue(n.id,f)&&Ue(n.rowIndex,h)&&Ue(n.colIndex,d)&&this.updateByState(G.HOVER_FOCUS)},r.prototype.update=function(){var e=this.spreadsheet.interaction.getCurrentStateName(),n=this.spreadsheet.interaction.getCells();if(e===G.ALL_SELECTED){this.updateByState(G.SELECTED);return}if(!(D(n)||!e))switch(e){case G.SELECTED:this.handleSelect(n);break;case G.HOVER_FOCUS:case G.HOVER:this.handleHover(n);break;case G.SEARCH_RESULT:this.handleSearchResult(n);break;default:this.handleByStateName(n,e);break}},r.prototype.setMeta=function(e){t.prototype.setMeta.call(this,e),this.initCell()},r.prototype.drawTextShape=function(){t.prototype.drawTextShape.call(this),this.drawLinkField(this.meta)},r.prototype.initCell=function(){this.resetTextAndConditionIconShapes(),this.drawBackgroundShape(),this.drawInteractiveBgShape(),this.shouldHideRowSubtotalData()||(this.drawConditionIntervalShape(),this.drawTextShape(),this.drawConditionIconShapes()),this.drawInteractiveBorderShape(),this.meta.isFrozenCorner&&this.drawBorderShape(),this.update()},r.prototype.getDefaultTextFill=function(e){var n=e.fill,i=this.getBackgroundColor(),o=i.backgroundColor,a=i.intelligentReverseTextColor;return Ug(o)&&(n===up||!m4(o,n))&&a&&(n=ls),n},r.prototype.getTextStyle=function(){var e=this.meta.isTotals,n=e?this.theme.dataCell.bolderText:this.theme.dataCell.text,i=this.getTextConditionFill(S(S({},n),{fill:this.getDefaultTextFill(n)}));return S(S({},n),{fill:i})},r.prototype.getIconStyle=function(){return ny(this.conditions,this.theme.dataCell.icon,this.meta.valueField)},r.prototype.drawConditionIntervalShape=function(){this.conditionIntervalShape=G5(this)},r.prototype.shouldHideRowSubtotalData=function(){var e,n=this.meta,i=n.rowId,o=n.rowIndex,a=this.spreadsheet.store.get("drillDownIdPathMap");if(a!=null&&a.has(i))return!1;var l=((e=this.spreadsheet.options.totals)!==null&&e!==void 0?e:{}).row,s=l===void 0?{}:l,u=this.spreadsheet.facet.layoutResult.rowLeafNodes[o],f=!(u!=null&&u.isGrandTotals)&&(u==null?void 0:u.isTotals);return this.spreadsheet.options.hierarchyType==="tree"&&!s.showSubTotals&&f},r.prototype.getFormattedFieldValue=function(){var e;if(this.shouldHideRowSubtotalData())return{value:null,formattedValue:Aa};var n=this.meta,i=n.rowId,o=n.valueField,a=n.fieldValue,l=n.data,s=n.id,u=(e=this.spreadsheet.dataSet.displayFormattedValueMap)===null||e===void 0?void 0:e.get(s),f=this.spreadsheet.dataSet.getFieldMeta(i),h=f?i:o,d=this.spreadsheet.dataSet.getFieldFormatter(h),c=u??d(a,l,this.meta);return{value:a,formattedValue:c}},r.prototype.getMaxTextWidth=function(){var e=this.getContentArea().width,n=this.getIconStyle();return sy(e,n)},r.prototype.getTextPosition=function(){return this.getTextAndIconPosition().text},r.prototype.getBackgroundColor=function(){var e,n=this.getCrossBackgroundColor(this.meta.rowIndex),i=n.backgroundColor,o=n.backgroundColorOpacity;if(this.shouldHideRowSubtotalData())return{backgroundColor:i,backgroundColorOpacity:o};var a=this.findFieldCondition((e=this.conditions)===null||e===void 0?void 0:e.background),l=!1;if(a&&a.mapping){var s=this.mappingValue(a);s&&(i=s.fill,l=s.intelligentReverseTextColor,o=1)}return{backgroundColor:i,backgroundColorOpacity:o,intelligentReverseTextColor:l}},r.prototype.drawBackgroundShape=function(){var e=this.getBackgroundColor(),n=e.backgroundColor,i=e.backgroundColorOpacity;this.backgroundShape=_t(this,S(S({},this.getCellArea()),{fill:n,fillOpacity:i}))},r.prototype.drawInteractiveBorderShape=function(){var e=1,n=this.getCellArea(),i=n.x,o=n.y,a=n.height,l=n.width;this.stateShapes.set("interactiveBorderShape",_t(this,{x:i+e,y:o+e,width:l-e*2,height:a-e*2},{capture:!1,visible:!1}))},r.prototype.drawInteractiveBgShape=function(){this.stateShapes.set("interactiveBgShape",_t(this,S({},this.getCellArea()),{visible:!1}))},r.prototype.changeRowColSelectState=function(e){var n=this.spreadsheet.interaction,i=K(this.meta,e),o=n.getState(),a=o.nodes,l=a===void 0?[]:a,s=o.cells,u=s===void 0?[]:s,f=!1;if(this.spreadsheet.isTableMode()&&l.length){var h=l[0].hierarchy.getLeaves();f=h.some(function(d,c){return l.some(function(v){return v===d})?c===i:!1})}else f=P(P([],A(l),!1),A(u),!1).some(function(d){return K(d,e)===i});f?this.updateByState(G.SELECTED):this.spreadsheet.options.interaction.selectedCellsSpotlight?this.updateByState(G.UNSELECTED):this.hideInteractionShape()},r.prototype.drawBorderShape=function(){var e=this;[Ne.BOTTOM,Ne.RIGHT].forEach(function(n){var i=bn(n,e.getCellArea(),e.getStyle().cell),o=i.position,a=i.style;$e(e,o,a)})},r.prototype.findFieldCondition=function(e){return ry(e,this.meta.valueField)},r.prototype.mappingValue=function(e){var n=this.meta.fieldValue,i=this.spreadsheet.isTableMode()?this.spreadsheet.dataSet.getCellData({query:{rowIndex:this.meta.rowIndex}}):this.meta.data;return e==null?void 0:e.mapping(n,i)},r.prototype.updateByState=function(e){if(t.prototype.updateByState.call(this,e,this),e===G.UNSELECTED){var n=K(this.theme,"".concat(this.cellType,".cell.interactionState.").concat(e));n&&this.toggleConditionIntervalShapeOpacity(n.opacity)}},r.prototype.clearUnselectedState=function(){t.prototype.clearUnselectedState.call(this),this.toggleConditionIntervalShapeOpacity(1)},r.prototype.toggleConditionIntervalShapeOpacity=function(e){Et(this.conditionIntervalShape,wt.backgroundOpacity,e),Et(this.conditionIconShapes,wt.opacity,e)},r.prototype.drawLeftBorder=function(){var e=bn(Ne.LEFT,this.getCellArea(),this.getStyle().cell),n=e.position,i=e.style;$e(this,n,i)},r}(al),Z6=function(t){H(r,t);function r(e,n,i){return t.call(this,i,e,n)||this}return r.prototype.handleRestOptions=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=A(e,1),o=i[0];this.cells=o},Object.defineProperty(r.prototype,"cellType",{get:function(){return N.MERGED_CELL},enumerable:!1,configurable:!0}),r.prototype.update=function(){},r.prototype.initCell=function(){this.resetTextAndConditionIconShapes(),this.conditions=this.spreadsheet.options.conditions,this.drawBackgroundShape(),this.drawTextShape()},r.prototype.drawBackgroundShape=function(){var e=eN(this.cells),n=this.theme.dataCell.cell;this.backgroundShape=D5(this,{points:e,stroke:n.horizontalBorderColor,fill:n.backgroundColor,lineHeight:n.horizontalBorderWidth})},r.prototype.drawTextShape=function(){D(this.meta)||(pe(this.meta.fieldValue)?J5(this):t.prototype.drawTextShape.call(this))},r}(Qr),j6=function(t,r,e,n){var i=[t,r],o=[t+e,r],a=[t+e,r+n],l=[t,r+n];return[[i,o],[o,a],[a,l],[l,i]]},Q6=function(t){var r=[];return J(t,function(e){var n=[e[1],e[0]];JSON.stringify(t).includes(JSON.stringify(n))||r.push(e)}),r},J6=function(t,r){return Je(r,function(e){return Ue(e[0],t[1])})},eN=function(t){var r=[];t.forEach(function(a){var l=a.getMeta(),s=l.x,u=l.y,f=l.width,h=l.height;r=r.concat(j6(s,u,f,h))}),r=Q6(r);for(var e=[],n=r[0],i=n,o=[];!Ue(n,o);)e=e.concat(i),o=J6(i,r),i=o;return e},tN=function(t,r){var e=[],n;return J(t,function(i){var o,a,l,s=(a=(o=r==null?void 0:r.facet)===null||o===void 0?void 0:o.layoutResult)===null||a===void 0?void 0:a.getCellMeta(i.rowIndex,i.colIndex);if(s){var u=(l=r==null?void 0:r.facet)===null||l===void 0?void 0:l.cfg.dataCell(s);n=i!=null&&i.showText?s:n,e.push(u)}}),{cells:e,cellsMeta:n}},rN=function(t,r){var e=[],n=[],i;return J(t,function(o){var a=Je(r,function(l){var s,u=(s=l==null?void 0:l.getMeta)===null||s===void 0?void 0:s.call(l);if((u==null?void 0:u.colIndex)===(o==null?void 0:o.colIndex)&&(u==null?void 0:u.rowIndex)===(o==null?void 0:o.rowIndex))return l});a?(e.push(a),i=o!=null&&o.showText?a==null?void 0:a.getMeta():i):n.push(o)}),{cells:e,invisibleCellInfo:n,cellsMeta:i}},Cy=function(t,r,e){var n;e===void 0&&(e=[]);var i=rN(e,t),o=i.cellsMeta,a=i.cells,l=i.invisibleCellInfo,s=o,u=a,f=(l==null?void 0:l.length)>0&&l.length<e.length;if(f){var h=tN(l,r),d=h.cells,c=h.cellsMeta;s=s||c,u=a.concat(d)}return!D(a)&&!s&&(s=(n=u[0])===null||n===void 0?void 0:n.getMeta()),{cells:u,viewMeta:s}},nN=function(t){var r=t.interaction,e=r.getActiveCells(),n=[];return J(e,function(i,o){var a=i.getMeta(),l=o===0?{showText:!0}:{};n.push(S(S({},l),{colIndex:a==null?void 0:a.colIndex,rowIndex:a==null?void 0:a.rowIndex}))}),n},wy=function(t,r,e){var n;return!((n=t.options)===null||n===void 0)&&n.mergedCell?t.options.mergedCell(t,r,e):new Z6(t,r,e)},iN=function(t,r,e){var n,i=r||nN(t);if((i==null?void 0:i.length)<=1){console.error("[mergeCell]: The merged cells must be more than one!");return}var o=t.interaction.getPanelGroupAllDataCells(),a=Cy(o,t,i),l=a.cells,s=a.viewMeta;if(!D(l)){var u=((n=t.options)===null||n===void 0?void 0:n.mergedCellsInfo)||[];u.push(i),t.setOptions({mergedCellsInfo:u});var f=e?void 0:s;t.panelScrollGroup.addMergeCell(wy(t,l,f))}},oN=function(t,r){var e=oe(t.cells,function(n){return{colIndex:n.getMeta().colIndex,rowIndex:n.getMeta().rowIndex}});return Mr(r,function(n){var i=n.map(function(o){return o.showText?{colIndex:o.colIndex,rowIndex:o.rowIndex}:o});return!Ue(i,e)})},aN=function(t,r){var e,n,i;if(!r||r.cellType!==N.MERGED_CELL){console.error("[unmergeCell]: The ".concat(r," is not a MergedCell"));return}var o=oN(r,(e=t.options)===null||e===void 0?void 0:e.mergedCellsInfo);(o==null?void 0:o.length)!==((i=(n=t.options)===null||n===void 0?void 0:n.mergedCellsInfo)===null||i===void 0?void 0:i.length)&&(t.setOptions({mergedCellsInfo:o}),r.remove(!0))},lN=function(t){return oe(t,function(r){return{cells:r.cells,viewMeta:r.getMeta()}})},Rc=function(t,r){return H0(t,r,function(e,n){return Ue(e.viewMeta.id,n.viewMeta.id)})},sN=function(t,r){var e,n=(e=t.options)===null||e===void 0?void 0:e.mergedCellsInfo;if(!D(n)){var i=t.interaction.getPanelGroupAllDataCells();if(!D(i)){var o=[];n.forEach(function(f){var h=Cy(i,t,f);h.cells.length>0&&o.push(h)});var a=r.getChildren(),l=lN(a),s=Rc(l,o),u=Rc(o,l);J(s,function(f){var h=Je(a,function(d){return Ue(d.getMeta().id,f.viewMeta.id)});h==null||h.remove(!0)}),J(u,function(f){var h=f.cells,d=f.viewMeta;r.add(wy(t,h,d))})}}},my=function(t){var r=t.includes(Ke)?"id":"field";return r},Ps=function(t,r){r===void 0&&(r=[]);var e=t.getInitColumnLeafNodes();return Ut(r.map(function(n){var i=my(n);return e.find(function(o){return o[i]===n})}))},uN=function(t,r){if(r===void 0&&(r=[]),D(r))return{prev:null,next:null};var e=t.getInitColumnLeafNodes(),n=Ps(t,r).map(function(s){return s==null?void 0:s.colIndex}),i=Math.max.apply(Math,P([],A(n),!1)),o=Math.min.apply(Math,P([],A(n),!1)),a=e.find(function(s){return s.colIndex===i+1}),l=e.find(function(s){return s.colIndex===o-1});return{prev:l||null,next:a||null}},fN=function(t,r){if(D(r))return[];var e=Number.NEGATIVE_INFINITY;return t.reduce(function(n,i,o){if(!r.includes(i))return n;if(o===e+1){var a=ge(n);a.push(i)}else{var l=[i];n.push(l)}return e=o,n},[])},Ec=function(t,r,e){r===void 0&&(r=[]),e===void 0&&(e=!1);var n=function(h,d){h===void 0&&(h=[]),d===void 0&&(d=[]),t.setOptions({interaction:{hiddenColumnFields:h}}),t.interaction.reset(),t.store.set("hiddenColumnsDetail",d),t.render(!1,{reBuildHiddenColumnsDetail:!1})};if(D(r)&&e){n();return}var i=t.store.get("hiddenColumnsDetail",[]),o=t.options.interaction.hiddenColumnFields;if(!(Ue(r,o)&&!e)){var a=mr(P(P([],A(r),!1),A(o),!1)),l=Ps(t,a).every(function(h,d,c){var v=c[d+1];return!v||Math.abs(h.colIndex-v.colIndex)===1}),s=uN(t,l?a:r),u={hideColumnNodes:Ps(t,r),displaySiblingNode:s},f=P(P([],A(i),!1),[u],!1);t.emit(R.LAYOUT_COLS_HIDDEN,u,f),n(a,f)}},hN=function(t){var r=t.dataCfg.fields.columns,e=r===void 0?[]:r;return t.isTableMode()?e:t.getInitColumnLeafNodes().map(function(n){var i=n.id;return i})},Af=function(t,r,e){r===void 0&&(r=[]),e===void 0&&(e=!1),D(r)&&e&&Ec(t,r,!0);var n=hN(t),i=ci(n),o=fN(i,r);o.forEach(function(a){Ec(t,a,e)})},dN=function(t,r){var e=t.getColumnLeafNodes(),n=t.getInitColumnLeafNodes(),i=my(r);return K(ge(e),i)===r&&K(ge(n),i)!==r},cN=function(t){return(t==null?void 0:t.next)||(t==null?void 0:t.prev)},vN=function(t){var r=cN(t);return r==null?void 0:r.id},Fs=function(t,r){return vN(t)===r},Zi=function(t){var r=t.type,e=t.id,n=t.theme,i=t.width,o=t.height,a=Sa(t,["type","id","theme","width","height"]),l=r===Mt.Horizontal?n.size:null,s=r===Mt.Vertical?n.size:null;return{fill:n.background,fillOpacity:n.backgroundOpacity,cursor:"".concat(r,"-resize"),width:l,height:s,appendInfo:S(S({},a),{isResizeArea:!0,type:r,id:e,width:i,height:o,size:n.size})}},po=function(t,r){if(t.foregroundGroup){var e=t.foregroundGroup.findById(r);return e||t.foregroundGroup.addGroup({id:r,zIndex:Cx})}},Mf=function(t,r,e){var n=e??{},i=n.scrollX,o=i===void 0?0:i,a=n.scrollY,l=a===void 0?0:a,s=!(t.x-o>r.x+r.width||t.x+t.width-o<r.x),u=!(t.y-l>r.y+r.height||t.y+t.height-l<r.y);return s&&u},pN=function(t,r,e){if(!t)return!1;var n=t.iconNames,i=t.displayCondition,o=t.belongsCell;return D(n)||o!==e?!1:i?n.some(function(a){return i(r,a)}):!0},If=function(t,r,e){var n=Je(t,function(o){return pN(o,r,e)});if(n){var i=n.iconNames;return n.displayCondition&&(i=i.filter(function(o){return n.displayCondition(r,o)})),S(S({},n),{iconNames:i})}},xy=function(t,r){var e=t.label,n=t.field;return Ue(n,re)?{formattedValue:r||e,value:e}:{formattedValue:e,value:e}},vi=function(t){return Yi(t)==="ASC"},Of=function(t){return Yi(t)==="DESC"},Lc=function(t){return!og(Number(t))},Ac=function(t,r,e){var n=vi(r)?1:-1,i=["-",void 0];return t==null?void 0:t.sort(function(o,a){var l=o,s=a;if(e){if(l=o[e],s=a[e],Lc(l)&&Lc(s))return(Number(l)-Number(s))*n;if(l&&(i!=null&&i.includes(l==null?void 0:l.toString())))return-n;if(Number(l)&&(i!=null&&i.includes(s==null?void 0:s.toString())))return n}return!Fe(l)&&!Fe(s)?l.toString().localeCompare(s.toString(),"zh")*n:l?n:-n})},_y=function(t,r,e){return e?i6(r,mr(t)):P([],A(new Set(P(P([],A(t),!1),A(r),!1))),!1)},Sy=function(t){var r=t.sortByValues,e=t.originValues,n=e.filter(function(l){return r.find(function(s){return ge(cf(l,Ke))===s})}),i=n.map(function(l){var s=l.split(Ke);if(s.length>1){var u=s.slice(0,s.length-1).join(Ke);return[u,s[s.length-1]]}return s}),o=Array.from(new Set(i.map(function(l){return l[0]})));i.sort(function(l,s){var u=l.slice(0,l.length-1),f=s.slice(0,s.length-1);if(u.join()!==f.join()){var h=o.indexOf(u[0]),d=o.indexOf(f[0]);return h-d}var c=r.indexOf(l[l.length-1]),v=r.indexOf(s[s.length-1]);return c-v});var a=i.map(function(l){return l.join(Ke)});return t6(e,a)},gN=function(t){var r=t.originValues,e=t.measureValues,n=t.sortParam,i=t.dataSet,o=n.sortFunc,a=n.sortFieldId,l=n.sortMethod,s=o(S({data:e},n));return s!=null&&s.length?(i.fields.rows.indexOf(a)>0||i.fields.columns.indexOf(a)>0)&&!ot(s[0],Ke)?Sy({sortByValues:s,originValues:r}):_y(s,r,vi(l)):r},yN=function(t){var r=t.sortParam,e=t.measureValues,n=t.originValues,i=t.dataSet,o=r.sortByMeasure,a=r.query,l=r.sortFieldId,s=r.sortMethod,u=i.fields,f=u.rows,h=u.columns,d=f.includes(l),c;if(o){var v=Ac(e,s,o===lr?a[re]:o);c=a6(l,d?f:ci(h),v)}else c=oe(Ac(e,s));return _y(c,n,vi(s))},CN=function(t){var r=t.sortParam,e=t.originValues,n=t.measureValues,i=t.dataSet,o=r.sortFunc,a=r.sortMethod,l=r.sortBy,s=e,u={originValues:e,measureValues:n,sortParam:r,dataSet:i};return o?s=gN(u):l?s=Sy({sortByValues:l,originValues:e}):(vi(a)||Of(a))&&(s=yN(u)),s},wN=function(t,r,e){var n,i={},o=ot(t,Ke);if(o)for(var a=cf(t,Ke),l=!((n=r==null?void 0:r.rows)===null||n===void 0)&&n.includes(e)?r.rows:ci(r.columns),s=0;s<=qa(l,e);s++)i[l[s]]=a[s];else i[e]=t;return i},Mc=function(t){return t.filter(function(r){return r!==re})},mN=function(t){var r=t.dataSet,e=t.sortParam,n=t.originValues,i=r.fields,o=e.sortByMeasure,a=e.query,l=e.sortFieldId;if(o!==lr){var s=r.getMultiData(a,{queryType:At.DetailOnly});return s}var u=r.getMultiData(a,{queryType:At.All}),f=ci(i.columns),h=ot(i.rows,l),d=Mc(h?i.rows:f),c=Mc(h?f:i.rows),v=d[d.indexOf(l)+1],p=Ae(a),g=c.filter(function(C){return!p.includes(C)}),y=u.filter(function(C){var w=new Set(Object.keys(C[cu]));if(!w.has(l)||w.has(v))return!1;var m=g.every(function(_){return!w.has(_)});return m});return D(y)?Ut(oe(n,function(C){var w=wN(C,i,l);return r.getTotalValue(S(S({},a),w))})):y},xN=function(t){var r=t.dataSet,e=t.sortParam,n=t.originValues,i=t.isSortByMeasure,o;return i?o=mN(t):o=n,CN({sortParam:e,originValues:n,measureValues:o,dataSet:r})},by=function(t,r){if(t!=null&&t.sortMethod){if(vi(t==null?void 0:t.sortMethod))return"groupAsc";if(Of(t==null?void 0:t.sortMethod))return"groupDesc"}if(r)return"SortDown"},Ic=function(t){var r,e,n=t.pivotMeta,i=t.dimensions,o=t.sortedDimensionValues,a=t.sortFieldId,l={children:n},s=[l];try{for(var u=Ot(i),f=u.next();!f.done;f=u.next()){var h=f.value;if(h!==a)s=so(s,function(d){return P([],A(d.children.values()),!1)});else{s.forEach(function(d){var c=P([],A(d.children.values()),!1),v=Lg(c,function(p){return qa(o,p.id)}).map(function(p){return[p.value,p]});d.children=new Map(v)});break}}}catch(d){r={error:d}}finally{try{f&&!f.done&&(e=u.return)&&e.call(u)}finally{if(r)throw r.error}}return l.children},Bf=function(t){H(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.handleRestOptions=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=A(e,1),o=i[0];this.headerConfig=S({},o);var a=this.meta,l=a.value,s=a.query,u=this.spreadsheet.dataCfg.sortParams,f=this.isSortCell(),h=Je(P([],A(u),!1).reverse(),function(c){return f&&(c==null?void 0:c.sortByMeasure)===l&&Ue(K(c,"query"),s)}),d=by(h,f);this.headerConfig.sortParam=S(S(S({},this.headerConfig.sortParam),h||{query:s}),{type:d})},r.prototype.initCell=function(){this.resetTextAndConditionIconShapes(),this.actionIcons=[],this.hasDefaultHiddenIcon=!1},r.prototype.getTreeIcon=function(){return this.treeIcon},r.prototype.getInteractiveBorderShapeStyle=function(e){var n=this.getCellArea(),i=n.x,o=n.y,a=n.height,l=n.width;return{x:i+e,y:o+e,width:l-e*2,height:a-e*2}},r.prototype.getFormattedFieldValue=function(){var e=this.meta,n=e.label,i=e.isTotalRoot,o=e.isGrandTotals,a=this.spreadsheet.dataSet.getFieldFormatter(this.meta.field),l=!0;this.spreadsheet.isTableMode()?l=!1:this.spreadsheet.isHierarchyTreeType()?l=!(o&&i):l=!i;var s=l&&a?a(n,void 0,this.meta):n;return{formattedValue:s,value:n}},r.prototype.getActionIconCfg=function(){return If(this.spreadsheet.options.headerActionIcons,this.meta,this.cellType)},r.prototype.showSortIcon=function(){var e=this.spreadsheet,n=e.options,i=e.dataCfg,o=D(i.fields.values);if(n.showDefaultHeaderActionIcon&&!o){var a=this.headerConfig.sortParam,l=this.meta.query;return l&&Ue(a==null?void 0:a.query,l)&&(a==null?void 0:a.type)&&(a==null?void 0:a.type)!=="none"}return!1},r.prototype.getActionIconsCount=function(){if(this.showSortIcon())return 1;var e=this.getActionIconCfg();if(e){var n=e.iconNames;return n.length}return 0},r.prototype.getActionIconsWidth=function(){var e=this.getStyle().icon,n=e.size,i=e.margin;return(n+i.left)*this.getActionIconsCount()},r.prototype.drawSortIcons=function(){var e=this;if(this.showSortIcon()){var n=this.getStyle(),i=n.icon,o=n.text,a=this.getTextConditionFill(o),l=this.headerConfig.sortParam,s=this.getIconPosition(),u=new Ui(S(S({name:K(l,"type","none")},s),{width:i.size,height:i.size,fill:a}));u.on("click",function(f){e.spreadsheet.emit(R.GLOBAL_ACTION_ICON_CLICK,f),e.spreadsheet.handleGroupSort(f,e.meta)}),this.add(u),this.actionIcons.push(u)}},r.prototype.hasDefaultHideActionIcon=function(){return this.hasDefaultHiddenIcon},r.prototype.addActionIcon=function(e){var n=this,i=e.x,o=e.y,a=e.iconName,l=e.defaultHide,s=e.action,u=e.onClick,f=e.onHover,h=this.getStyle(),d=h.icon,c=h.text,v=this.getTextConditionFill(c),p=(d==null?void 0:d.fill)||v,g=new Ui({name:a,x:i,y:o,width:d==null?void 0:d.size,height:d==null?void 0:d.size,fill:p});g.set("visible",!l),g.on("mouseover",function(y){n.spreadsheet.emit(R.GLOBAL_ACTION_ICON_HOVER,y),f==null||f({hovering:!0,iconName:a,meta:n.meta,event:y})}),g.on("mouseleave",function(y){n.spreadsheet.emit(R.GLOBAL_ACTION_ICON_HOVER_OFF,y),f==null||f({hovering:!1,iconName:a,meta:n.meta,event:y})}),g.on("click",function(y){var C;n.spreadsheet.emit(R.GLOBAL_ACTION_ICON_CLICK,y),(C=u||s)===null||C===void 0||C({iconName:a,meta:n.meta,event:y})}),this.actionIcons.push(g),this.add(g)},r.prototype.drawActionIcons=function(){var e=this;if(this.showSortIcon()){this.drawSortIcons();return}var n=this.getActionIconCfg();if(n){var i=n.iconNames,o=n.action,a=n.onClick,l=n.onHover,s=n.defaultHide,u=this.getIconPosition(i.length),f=this.getStyle().icon,h=f.size,d=f.margin;J(i,function(c,v){var p=u.x+v*h+v*d.left,g=u.y,y=typeof s=="function"?s(e.meta,c):s;y&&(e.hasDefaultHiddenIcon=!0),e.addActionIcon({iconName:c,x:p,y:g,defaultHide:y,action:o,onClick:a,onHover:l})})}},r.prototype.drawBackgroundShape=function(){var e=this.getBackgroundColor(),n=e.backgroundColor,i=e.backgroundColorOpacity;this.backgroundShape=_t(this,S(S({},this.getCellArea()),{fill:n,fillOpacity:i}))},r.prototype.isSortCell=function(){var e,n,i,o=(n=(e=this.spreadsheet)===null||e===void 0?void 0:e.isValueInCols)===null||n===void 0?void 0:n.call(e),a=this.meta.level===((i=this.meta.hierarchy)===null||i===void 0?void 0:i.maxLevel);return o?a&&this.cellType===N.COL_CELL:a&&this.cellType===N.ROW_CELL},r.prototype.handleByStateName=function(e,n){un(e,this)&&this.updateByState(n)},r.prototype.handleSearchResult=function(e){if(un(e,this)){var n=Je(e,function(i){return i==null?void 0:i.isTarget});n.id===this.getMeta().id?this.updateByState(G.HIGHLIGHT):this.updateByState(G.SEARCH_RESULT)}},r.prototype.handleHover=function(e){var n;un(e,this)&&(this.updateByState(G.HOVER),this.hasDefaultHideActionIcon()&&this.toggleActionIcon((n=e==null?void 0:e[0])===null||n===void 0?void 0:n.id))},r.prototype.handleSelect=function(e,n){un(e,this)&&this.updateByState(G.SELECTED);var i=oe(n,"id");ot(i,this.meta.id)&&this.updateByState(G.SELECTED)},r.prototype.getTextStyle=function(){var e=this.getStyle(),n=e.text,i=e.bolderText,o=e.measureText,a;this.isMeasureField()?a=o||n:this.isBolderText()?a=i:a=n;var l=this.getTextConditionFill(a);return S(S({},a),{fill:l})},r.prototype.getBackgroundColor=function(){var e,n=((e=this.getStyle())===null||e===void 0?void 0:e.cell)||{},i=n.backgroundColor,o=n.backgroundColorOpacity;return this.getBackgroundColorByCondition(i,o)},r.prototype.getBackgroundColorByCondition=function(e,n){var i,o=e,a=this.findFieldCondition((i=this.conditions)===null||i===void 0?void 0:i.background);if(a&&a.mapping){var l=this.mappingValue(a);l&&(o=l.fill)}return{backgroundColor:o,backgroundColorOpacity:n}},r.prototype.toggleActionIcon=function(e){if(this.getMeta().id===e){var n=[];J(this.actionIcons,function(i){i.get("visible")||(i.set("visible",!0),n.push(i))}),this.spreadsheet.store.set("visibleActionIcons",n)}},r.prototype.update=function(){var e=this.spreadsheet.interaction,n=e==null?void 0:e.getState(),i=e==null?void 0:e.getCells([N.CORNER_CELL,N.COL_CELL,N.ROW_CELL]);if(fi(i))switch(n==null?void 0:n.stateName){case G.SELECTED:case G.BRUSH_SELECTED:this.handleSelect(i,n==null?void 0:n.nodes);break;case G.HOVER_FOCUS:case G.HOVER:this.handleHover(i);break;case G.SEARCH_RESULT:this.handleSearchResult(i);break;default:this.handleByStateName(i,n==null?void 0:n.stateName);break}},r.prototype.updateByState=function(e){t.prototype.updateByState.call(this,e,this)},r.prototype.hideInteractionShape=function(){t.prototype.hideInteractionShape.call(this)},r.prototype.isMeasureField=function(){return[re,px].includes(this.meta.field)},r.prototype.mappingValue=function(e){var n=this.getMeta().label;return e==null?void 0:e.mapping(n,this.meta)},r.prototype.findFieldCondition=function(e){var n=this;return Ua(e,function(i){return i.field instanceof RegExp?i.field.test(n.meta.field):i.field===n.meta.field})},r}(al),ll=function(t){H(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"cellType",{get:function(){return N.COL_CELL},enumerable:!1,configurable:!0}),r.prototype.initCell=function(){t.prototype.initCell.call(this),this.drawBackgroundShape(),this.drawInteractiveBgShape(),this.drawInteractiveBorderShape(),this.drawTextShape(),this.drawConditionIconShapes(),this.drawActionIcons(),this.drawBorders(),this.drawResizeArea(),this.addExpandColumnIconShapes(),this.update()},r.prototype.drawInteractiveBgShape=function(){this.stateShapes.set("interactiveBgShape",_t(this,S({},this.getCellArea()),{visible:!1}))},r.prototype.drawInteractiveBorderShape=function(){var e=2;this.stateShapes.set("interactiveBorderShape",_t(this,this.getInteractiveBorderShapeStyle(e),{visible:!1}))},r.prototype.getMaxTextWidth=function(){var e=this.getContentArea().width;return e-this.getActionIconsWidth()},r.prototype.getIconPosition=function(){if(this.meta.isLeaf)return t.prototype.getIconPosition.call(this,this.getActionIconsCount());var e=this.getIconStyle(),n=e.margin.left,i=this.getTextStyle(),o=this.textPosition,a=o==null?void 0:o.x,l=(o==null?void 0:o.y)-e.size/2;return i.textAlign==="left"?{x:a+this.actualTextWidth+n,y:l}:i.textAlign==="right"?{x:a+n,y:l}:{x:a+this.actualTextWidth/2+n,y:l}},r.prototype.isBolderText=function(){var e=this.meta,n=e.isLeaf,i=e.isTotals;return!!(i||!n)},r.prototype.getTextPosition=function(){var e,n=this.meta.isLeaf,i=this.headerConfig,o=i.width,a=i.scrollContainsRowHeader,l=i.cornerWidth,s=i.scrollX,u=this.getTextStyle(),f=this.getContentArea(),h=this.getIconStyle();if(n)return co(f,u,this.actualTextWidth,h,this.getActionIconsCount()).text;var d={start:s-(a?l:0),width:o+(a?l:0)},c=this.getTextStyle().textAlign,v=V5(d,c,(e=this.getStyle().cell)===null||e===void 0?void 0:e.padding),p=this.getActionIconsWidth(),g=this.actualTextWidth+p,y=X5(v,{start:f.x,width:f.width},g),C=q5(y,this.actualTextWidth,p,c),w=f.y+f.height/2;return this.textPosition={x:C,y:w},this.textPosition},r.prototype.getActionIconsWidth=function(){var e=this.getStyle().icon,n=e.size,i=e.margin,o=this.getActionIconsCount();return(n+i.left)*o+(o>0?i.right:0)},r.prototype.getColResizeAreaKey=function(){return this.meta.key},r.prototype.getColResizeArea=function(){return po(this.spreadsheet,ip)},r.prototype.getHorizontalResizeAreaName=function(){return"".concat(ap).concat(this.meta.key)},r.prototype.drawHorizontalResizeArea=function(){var e,n,i=((n=(e=this.spreadsheet.options.style)===null||e===void 0?void 0:e.colCfg)===null||n===void 0?void 0:n.height)===0;if(!(i||!this.shouldDrawResizeAreaByType("colCellVertical",this))){var o=this.headerConfig,a=o.cornerWidth,l=o.viewportWidth,s=this.meta,u=s.y,f=s.height,h=this.getResizeAreaStyle(),d=this.getColResizeArea(),c=this.getHorizontalResizeAreaName(),v=d.find(function(g){return g.attrs.name===c});if(!v){var p=a+l;d.addShape("rect",{attrs:S(S({},Zi({theme:h,type:Mt.Vertical,id:this.getColResizeAreaKey(),effect:nt.Field,offsetX:0,offsetY:u,width:p,height:f,meta:this.meta})),{name:c,x:0,y:u+f-h.size/2,width:p})})}}},r.prototype.shouldAddVerticalResizeArea=function(){var e=this.meta,n=e.x,i=e.y,o=e.width,a=e.height,l=this.headerConfig,s=l.scrollX,u=l.scrollY,f=l.scrollContainsRowHeader,h=l.cornerWidth,d=l.height,c=l.width,v=this.getResizeAreaStyle(),p={x:n+o-v.size/2,y:i,width:v.size,height:a},g={x:f?-h:0,y:0,width:f?h+c:c,height:d};return Mf(p,g,{scrollX:s,scrollY:u})},r.prototype.getVerticalResizeAreaOffset=function(){var e=this.meta,n=e.x,i=e.y,o=this.headerConfig,a=o.scrollX,l=o.position;return{x:l.x+n-a,y:l.y+i}},r.prototype.drawVerticalResizeArea=function(){if(!(!this.meta.isLeaf||!this.shouldDrawResizeAreaByType("colCellHorizontal",this))){var e=this.meta,n=e.label,i=e.width,o=e.height,a=this.getResizeAreaStyle(),l=this.getColResizeArea();if(this.shouldAddVerticalResizeArea()){var s=this.getVerticalResizeAreaOffset(),u=s.x,f=s.y;l.addShape("rect",{attrs:S(S({},Zi({theme:a,type:Mt.Horizontal,effect:nt.Cell,id:n,offsetX:u,offsetY:f,width:i,height:o,meta:this.meta})),{x:u+i-a.size/2,y:f,height:o})})}}},r.prototype.drawResizeArea=function(){this.drawHorizontalResizeArea(),this.drawVerticalResizeArea()},r.prototype.drawHorizontalBorder=function(){var e=bn(Ne.TOP,this.meta,this.theme.colCell.cell),n=e.position,i=e.style;$e(this,n,i)},r.prototype.drawVerticalBorder=function(e){var n=bn(e,this.meta,this.theme.colCell.cell),i=n.position,o=n.style;$e(this,i,o)},r.prototype.drawBorders=function(){var e=this.spreadsheet,n=e.options,i=e.isTableMode;this.meta.colIndex===0&&i()&&!n.showSeriesNumber&&this.drawVerticalBorder(Ne.LEFT),this.drawHorizontalBorder(),this.drawVerticalBorder(Ne.RIGHT)},r.prototype.hasHiddenColumnCell=function(){var e=this,n=this.spreadsheet.options,i=n.interaction.hiddenColumnFields,o=i===void 0?[]:i,a=n.tooltip.operation,l=this.spreadsheet.store.get("hiddenColumnsDetail",[]);return D(l)||D(o)||!a.hiddenColumns?!1:!!l.find(function(s){return Fs(s==null?void 0:s.displaySiblingNode,e.meta.id)})},r.prototype.getExpandIconTheme=function(){var e=this.getStyle();return e.icon},r.prototype.addExpandColumnSplitLine=function(){var e=this.meta,n=e.x,i=e.y,o=e.width,a=e.height,l=this.theme.splitLine,s=l.horizontalBorderColor,u=l.horizontalBorderWidth,f=l.horizontalBorderColorOpacity,h=l.borderDash,d=this.isLastColumn()?n+o-u:n;$e(this,{x1:d,y1:i,x2:d,y2:i+a},{stroke:s,lineWidth:u,strokeOpacity:f,lineDash:h})},r.prototype.addExpandColumnIconShapes=function(){this.hasHiddenColumnCell()&&(this.addExpandColumnSplitLine(),this.addExpandColumnIcons())},r.prototype.addExpandColumnIcons=function(){var e=this.isLastColumn();this.addExpandColumnIcon(e),this.isAllDisplaySiblingNodeHidden()&&e&&this.addExpandColumnIcon(!1)},r.prototype.addExpandColumnIcon=function(e){var n=this,i=this.getExpandColumnIconConfig(e),o=Tf(this,S(S({},i),{name:"ExpandColIcon",cursor:"pointer"}));o.on("click",function(){n.spreadsheet.emit(R.LAYOUT_COLS_EXPANDED,n.meta)})},r.prototype.getExpandColumnIconConfig=function(e){var n=this.getExpandIconTheme().size,i=this.getCellArea(),o=i.x,a=i.y,l=i.width,s=i.height,u=o-n,f=e?u+l:u,h=a+s/2-n/2;return{x:f,y:h,width:n*2,height:n}},r.prototype.isLastColumn=function(){return dN(this.spreadsheet,this.meta.id)},r.prototype.isAllDisplaySiblingNodeHidden=function(){var e=this.meta.id,n=this.spreadsheet.store.get("hiddenColumnsDetail",[]),i=n.find(function(a){var l,s=a.displaySiblingNode;return((l=s==null?void 0:s.next)===null||l===void 0?void 0:l.id)===e}),o=n.find(function(a){var l,s=a.displaySiblingNode;return((l=s==null?void 0:s.prev)===null||l===void 0?void 0:l.id)===e});return o&&i},r}(Bf),_N=function(t){H(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.isBolderText=function(){var e=this.meta.cornerType;return e===kt.Col},Object.defineProperty(r.prototype,"cellType",{get:function(){return N.CORNER_CELL},enumerable:!1,configurable:!0}),r.prototype.initCell=function(){t.prototype.initCell.call(this),this.resetTextAndConditionIconShapes(),this.drawBackgroundShape(),this.drawTreeIcon(),this.drawCellText(),this.drawConditionIconShapes(),this.drawActionIcons(),this.drawBorderShape(),this.drawResizeArea(),this.update()},r.prototype.drawCellText=function(){this.drawTextShape()},r.prototype.drawTextShape=function(){var e=this.getContentArea().x,n=this.getCellArea(),i=n.y,o=n.height,a=this.getTextStyle(),l=this.getCornerText(),s=this.getMaxTextWidth(),u=In(this.meta,this.spreadsheet.options.placeholder),f=this.spreadsheet.measureTextWidth,h=ei({measureTextWidth:f,text:l,maxWidth:s,fontParam:a,placeholder:u});this.actualText=h;var d=h.indexOf(zn),c=h,v="";if(d!==-1&&this.spreadsheet.isHierarchyTreeType()){var p=d+(Y4()?1:0);c=l.substr(0,p),v=l.slice(p),v=ei({measureTextWidth:f,text:v,maxWidth:s,fontParam:a})}var g=U5({x:e+this.getTreeIconWidth(),y:i,width:s,height:o},a).x,y=i+(D(v)?o/2:o/4);this.addTextShape(Sn(this,[this.textShapes[0]],g,y,c,a)),D(v)||this.addTextShape(Sn(this,[this.textShapes[1]],g,i+o*.75,v,a)),this.actualTextWidth=jn([f(c,a),f(v,a)])},r.prototype.drawTreeIcon=function(){var e=this;if(!(!this.showTreeIcon()||this.meta.cornerType===kt.Col)){var n=this.headerConfig.hierarchyCollapse,i=this.getStyle().icon.size,o=this.getTextStyle(),a=o.textBaseline,l=o.fill,s=this.getContentArea();this.treeIcon=oy(this,{x:s.x,y:va(s,a,i),width:i,height:i},l,n,function(){e.headerConfig.spreadsheet.store.set("scrollY",0),e.headerConfig.spreadsheet.emit(R.LAYOUT_TREE_ROWS_COLLAPSE_ALL,n)})}},r.prototype.drawBorderShape=function(){var e=this;[Ne.TOP,Ne.LEFT].forEach(function(n){var i=bn(n,e.getCellArea(),e.getStyle().cell),o=i.position,a=i.style;$e(e,o,a)})},r.prototype.isLastRowCornerCell=function(){var e=this.meta,n=e.cornerType,i=e.field,o=this.headerConfig.rows;return n===kt.Row&&(this.spreadsheet.isHierarchyTreeType()||ge(o)===i)},r.prototype.getResizeAreaEffect=function(){var e=this.meta.cornerType;return e===kt.Series?nt.Series:this.isLastRowCornerCell()&&this.spreadsheet.isHierarchyTreeType()?nt.Tree:nt.Field},r.prototype.drawResizeArea=function(){if(this.shouldDrawResizeAreaByType("cornerCellHorizontal",this)){var e=this.getResizeAreaStyle(),n=po(this.spreadsheet,os),i=this.headerConfig,o=i.position,a=i.scrollX,l=i.scrollY,s=i.width,u=i.height,f=this.meta,h=f.x,d=f.y,c=f.width,v=f.height,p=f.field,g=f.cornerType,y={x:h+c-e.size/2,y:d,width:e.size,height:v},C={x:0,y:0,width:s,height:u};if(!(g===kt.Col||!Mf(y,C,{scrollX:a,scrollY:l}))){var w=o.x+h-a,m=o.y+(this.isLastRowCornerCell()?0:d);n.addShape("rect",{attrs:S(S({},Zi({theme:e,id:p,type:Mt.Horizontal,effect:this.getResizeAreaEffect(),offsetX:w,offsetY:m,width:c,height:v,meta:this.meta})),{x:w+c-e.size/2,y:m,height:this.isLastRowCornerCell()?u:v})})}}},r.prototype.showTreeIcon=function(){var e;return this.spreadsheet.isHierarchyTreeType()&&((e=this.meta)===null||e===void 0?void 0:e.x)===0},r.prototype.getIconPosition=function(){var e,n,i=(n=(e=this.textShapes)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.cfg.attrs,o=this.getTextStyle(),a=o.textBaseline,l=o.textAlign,s=this.getStyle().icon,u=s.size,f=s.margin,h=(i==null?void 0:i.x)+A0([[_s("center"),kn(this.actualTextWidth/2)],[_s("right"),kn(0)],[Mg,kn(this.actualTextWidth)]])(l)+f.left,d=va(this.getContentArea(),a,u);return{x:h,y:d}},r.prototype.getTreeIconWidth=function(){var e=this.getStyle().icon,n=e.size,i=e.margin;return this.showTreeIcon()?n+i.right:0},r.prototype.getTextStyle=function(){var e=this.getStyle(),n=e.text,i=e.bolderText,o=this.isBolderText()?n:i,a=this.getTextConditionFill(o);return S(S({},o),{fill:a})},r.prototype.getMaxTextWidth=function(){var e=this.getContentArea().width;return e-this.getTreeIconWidth()-this.getActionIconsWidth()},r.prototype.getTextPosition=function(){return{x:0,y:0}},r.prototype.getFormattedFieldValue=function(){return xy(this.meta,this.spreadsheet.dataSet.getFieldName(this.meta.label))},r.prototype.getCornerText=function(){var e=this.getFormattedFieldValue().formattedValue;return e},r}(Bf),SN=function(t,r,e,n){var i,o,a=K(n,"size"),l=K(n,"margin"),s=0;return t.options.showDefaultHeaderActionIcon?s=1:s=(o=(i=If(t.options.headerActionIcons,r,e))===null||i===void 0?void 0:i.iconNames.length)!==null&&o!==void 0?o:0,s*(a+l.left)+(s>0?l.right:0)},Ty=function(t,r,e){var n,i,o=((n=e.icon.margin)===null||n===void 0?void 0:n.left)||0,a=((i=e.icon.margin)===null||i===void 0?void 0:i.right)||0,l=t.store.get("hiddenColumnsDetail",[]),s=!1,u=!1;l.forEach(function(h){var d,c,v,p;((c=(d=h==null?void 0:h.displaySiblingNode)===null||d===void 0?void 0:d.prev)===null||c===void 0?void 0:c.field)===r&&(s=!0),((p=(v=h==null?void 0:h.displaySiblingNode)===null||v===void 0?void 0:v.next)===null||p===void 0?void 0:p.field)===r&&(u=!0)});var f=K(e,"icon.size");return{left:u?f+a:0,right:s?f+o:0}},bN=function(t,r,e){var n=K(e,"cell.padding"),i=Ty(t,r.field,e);return n.left+n.right+SN(t,r,N.COL_CELL,K(e,"icon"))+i.left+i.right},Ry=function(t){H(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.handleRestOptions=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=A(e,1),o=i[0];this.headerConfig=S({},o);var a=this.meta.field,l=this.spreadsheet.dataCfg.sortParams,s=Je(l,function(f){return(f==null?void 0:f.sortFieldId)===a}),u=by(s,!0);this.headerConfig.sortParam=S(S(S({},this.headerConfig.sortParam),s||{}),{type:u})},r.prototype.isFrozenCell=function(){var e=this.spreadsheet.options,n=e.frozenColCount,i=e.frozenTrailingColCount,o=this.spreadsheet.facet.layoutResult.colNodes.filter(function(l){return nr(l)}),a=E5(this.meta).colIndex;return dn(a,n)||cn(a,i,o.length)},r.prototype.getFormattedFieldValue=function(){return xy(this.meta,this.spreadsheet.dataSet.getFieldName(this.meta.label))},r.prototype.shouldAddVerticalResizeArea=function(){return this.isFrozenCell()?!0:t.prototype.shouldAddVerticalResizeArea.call(this)},r.prototype.getVerticalResizeAreaOffset=function(){var e=this.meta,n=e.x,i=e.y,o=this.headerConfig,a=o.scrollX,l=o.position;return this.isFrozenCell()?{x:n,y:i}:{x:l.x+n-a,y:l.y+i}},r.prototype.getColResizeArea=function(){var e=this.isFrozenCell();return e?po(this.spreadsheet,op):t.prototype.getColResizeArea.call(this)},r.prototype.isSortCell=function(){return!0},r.prototype.showSortIcon=function(){return this.spreadsheet.options.showDefaultHeaderActionIcon},r.prototype.getTextStyle=function(){var e=this.getStyle();return e==null?void 0:e.bolderText},r.prototype.getContentArea=function(){var e,n=(((e=this.getStyle())===null||e===void 0?void 0:e.cell)||this.theme.dataCell.cell).padding,i=S({},n),o=Ty(this.spreadsheet,this.meta.field,this.getStyle());return o.left&&(i.left=(i.left||0)+o.left),o.right&&(i.right=(i.right||0)+o.right),ly(this.getCellArea(),i)},r.prototype.getHorizontalResizeAreaName=function(){return"".concat(ap).concat("table-col-cell")},r.prototype.drawBackgroundShape=function(){var e=this.getStyle().cell.backgroundColor;this.backgroundShape=_t(this,S(S({},this.getCellArea()),{fill:e}))},r}(ll),TN=function(t){H(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.getStyle=function(e){return e?this.theme[e]:K(this,"theme.cornerCell")},r.prototype.showSortIcon=function(){return!1},r.prototype.drawLeftBorder=function(){var e=bn(Ne.LEFT,this.getCellArea(),this.getStyle().cell),n=e.position,i=e.style;$e(this,n,i)},r.prototype.drawBorders=function(){t.prototype.drawBorders.call(this),this.meta.colIndex===0&&this.drawLeftBorder()},r}(Ry),sl=function(t){H(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.getLinkFieldStyle=function(){return this.theme.rowCell.text.linkTextFill},r.prototype.drawBorderShape=function(){t.prototype.drawBorderShape.call(this),this.meta.colIndex===0&&this.drawLeftBorder()},r.prototype.shouldDrawResizeArea=function(){return this.meta.colIndex===0},r.prototype.drawResizeArea=function(){if(this.shouldDrawResizeArea()){var e=this.getCellArea(),n=e.x,i=e.y,o=e.width,a=e.height,l=this.meta.rowIndex,s=this.getResizeAreaStyle(),u=this.spreadsheet.options,f=u.frozenRowCount,h=u.frozenTrailingRowCount,d=this.spreadsheet.facet.getCellRange(),c=il(l,d.start,f),v=ho(l,d.end,h),p=c||v,g=p?np:qn,y=po(this.spreadsheet,g),C=this.spreadsheet.facet.layoutResult.colsHierarchy.height,w=this.spreadsheet.facet.getScrollOffset().scrollY,m=this.spreadsheet.facet.getPaginationScrollY(),_=w+m,b=i+(v?0:C);v||(b-=c?m:_),y.addShape("rect",{attrs:S(S({},Zi({id:String(this.meta.rowIndex),theme:s,type:Mt.Vertical,effect:nt.Cell,offsetX:n,offsetY:b,width:o,height:a,meta:this.meta})),{x:n,y:b+a-s.size/2,width:o})})}},r}(Qr),Ey=function(t){H(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"cellType",{get:function(){return N.ROW_CELL},enumerable:!1,configurable:!0}),r.prototype.getTextStyle=function(){return this.theme.rowCell.seriesText},r}(sl),ul=function(){function t(r){this.EVENT="gesture",this.gm=r}return t.prototype.do=function(r){var e=r.type;switch(e){case"touchstart":this.onTouchStart(r);break;case"touchmove":this.onTouchMove(r);break;case"touchend":this.onTouchEnd(r);break;case"touchcancel":this.onTouchCancel(r);break;default:return}},t.prototype.emit=function(r){this.gm.emit(this.EVENT,r)},t}(),RN=function(t){H(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.EVENT="pan",e}return r.prototype.onTouchCancel=function(e){},r.prototype.onTouchEnd=function(e){},r.prototype.onTouchMove=function(e){var n=e.x,i=e.y,o=n-this.preX,a=i-this.preY;this.preX=n,this.preY=i,this.emit({x:n,y:i,deltaX:o,deltaY:a,event:e})},r.prototype.onTouchStart=function(e){var n=e.x,i=e.y;this.preX=n,this.preY=i},r}(ul),zr=typeof performance=="object"&&performance.now?performance:Date,EN=300,Oc=10,LN=function(t){H(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.EVENT="press",e}return r.prototype.onTouchCancel=function(e){this.clearTimeout()},r.prototype.onTouchEnd=function(e){this.clearTimeout()},r.prototype.onTouchMove=function(e){var n=e.x,i=e.y;(n-this.touchStartX>Oc||i-this.touchStartY>Oc)&&this.clearTimeout()},r.prototype.onTouchStart=function(e){var n=this;this.clearTimeout();var i=e.x,o=e.y;this.touchStartTime=zr.now(),this.touchStartX=i,this.touchStartY=o,this.pressTimeout=window.setTimeout(function(){n.emit({x:i,y:o,event:e})},EN)},r.prototype.clearTimeout=function(){window.clearTimeout(this.pressTimeout)},r}(ul),AN=100,MN=function(t){H(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.EVENT="swipe",e.latestMoveTime=0,e.ms=0,e.speedX=0,e.speedY=0,e.preX=0,e.preY=0,e}return r.prototype.onTouchCancel=function(e){},r.prototype.onTouchEnd=function(e){var n=this.speedX,i=this.speedY;if(zr.now()-this.latestMoveTime<AN){var o=e.x,a=e.y;this.emit({x:o,y:a,speedX:n,speedY:i,event:e})}},r.prototype.onTouchMove=function(e){var n=e.x,i=e.y,o=zr.now(),a=n-this.preX,l=i-this.preY,s=o-this.ms;this.speedX=a/s,this.speedY=l/s,this.latestMoveTime=o},r.prototype.onTouchStart=function(e){var n=e.x,i=e.y;this.speedX=this.speedY=0,this.preX=n,this.preY=i,this.ms=zr.now()},r}(ul),IN=300,Bc=2,ON=function(t){H(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.EVENT="tap",e}return r.prototype.onTouchCancel=function(e){},r.prototype.onTouchEnd=function(e){var n=e.x,i=e.y;n-this.touchStartX<Bc&&i-this.touchStartY<Bc&&zr.now()-this.touchStartTime<IN&&this.emit({x:n,y:i,event:e})},r.prototype.onTouchMove=function(e){},r.prototype.onTouchStart=function(e){var n=e.x,i=e.y;this.touchStartTime=zr.now(),this.touchStartX=n,this.touchStartY=i},r}(ul),BN={Pan:RN,Press:LN,Swipe:MN,Tap:ON},DN=function(t){return BN[t]},Ly=function(t){H(r,t);function r(e,n){n===void 0&&(n={});var i=t.call(this)||this;return i.onTouchStart=function(o){i.preventEvent(o),i.element.on("touchmove",i.onTouchMove),i.element.on("touchend",i.onTouchEnd),i.element.on("touchcancel",i.onTouchCancel),i.emit("touchdown",o),i.doGestures(o)},i.onTouchMove=function(o){i.preventEvent(o),i.emit("touchmove",o),i.doGestures(o)},i.onTouchEnd=function(o){i.preventEvent(o),i.emit("touchend",o),i.element.off("touchmove",i.onTouchMove),i.element.off("touchend",i.onTouchEnd),i.element.off("touchcancel",i.onTouchCancel),i.doGestures(o)},i.onTouchCancel=function(o){i.preventEvent(o),i.emit("touchcancel",o),i.element.off("touchmove",i.onTouchMove),i.element.off("touchend",i.onTouchEnd),i.element.off("touchcancel",i.onTouchCancel),i.doGestures(o)},i.element=e,i.options=n,i.initialGestures(),i.bindTouchStart(),i}return r.prototype.destroy=function(){this.element.off("touchstart",this.onTouchStart),this.off()},r.prototype.initialGestures=function(){var e=this,n=this.options.gestures||["Pan","Press","Swipe","Tap"];this.gestures=n.map(function(i){var o=DN(i);return new o(e)})},r.prototype.bindTouchStart=function(){this.element.on("touchstart",this.onTouchStart)},r.prototype.preventEvent=function(e){var n=e.type,i=this.options.prevents||[];i.includes(n)&&e.preventDefault()},r.prototype.doGestures=function(e){this.gestures.forEach(function(n){n.do(e)})},r}(Ta),NN=bv,PN=800,FN="swipe",HN="pan",Dc="wheel",zN=function(t){H(r,t);function r(e){var n=t.call(this)||this;return n.rafMs=0,n.onPan=function(i){n.raf&&cancelAnimationFrame(n.raf);var o=i.deltaX,a=i.deltaY,l=n.getWrapperEvent(i,o,a);n.emit(Dc,l)},n.onSwipe=function(i){var o=i.speedX,a=i.speedY;n.rafMs=zr.now(),n.ms=n.rafMs,(o!==0||a!==0)&&n.rafInertia(i)},n.element=e,n.gm=new Ly(e,{gestures:["Pan","Swipe"]}),n.gm.on(FN,n.onSwipe),n.gm.on(HN,n.onPan),n}return r.prototype.destroy=function(){window.cancelAnimationFrame(this.raf),this.gm.destroy(),this.off()},r.prototype.rafInertia=function(e){var n=this,i=e.speedX,o=e.speedY;this.raf=window.requestAnimationFrame(function(){var a=zr.now(),l=(a-n.ms)/PN;if(l<1){l=NN(1-l);var s=a-n.rafMs,u=i*l*s,f=o*l*s,h=n.getWrapperEvent(e,u,f);n.emit(Dc,h),n.rafMs=a,n.rafInertia(e)}})},r.prototype.getWrapperEvent=function(e,n,i){return S(S({},e),{deltaX:-n,deltaY:-i})},r}(Ta),WN=function(t){var r=0,e=t.children;return e==null||e.forEach(function(n){r+=n.height||0}),r},Ay=function(t,r,e,n,i){var o=0,a=t+(r-i)/2,l=t+(r+i)/2,s=e+n;return t+i>=s?o=t:s<l?o=e+n-i:e>a?t+r-e>i?o=e:o=t+r-i:o=t+(r-i)/2,o},kN=function(t){H(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"cellType",{get:function(){return N.ROW_CELL},enumerable:!1,configurable:!0}),r.prototype.destroy=function(){var e;t.prototype.destroy.call(this),(e=this.gm)===null||e===void 0||e.destroy()},r.prototype.initCell=function(){t.prototype.initCell.call(this),this.drawBackgroundShape(),this.drawInteractiveBgShape(),this.drawInteractiveBorderShape(),this.drawTextShape(),this.drawConditionIconShapes(),this.drawTreeIcon(),this.drawTreeLeafNodeAlignDot(),this.drawRectBorder(),this.drawResizeAreaInLeaf(),this.drawActionIcons(),this.update()},r.prototype.getBackgroundColor=function(){var e=this.getCrossBackgroundColor(this.meta.rowIndex),n=e.backgroundColor,i=e.backgroundColorOpacity;return this.getBackgroundColorByCondition(n,i)},r.prototype.drawInteractiveBorderShape=function(){var e=2;this.stateShapes.set("interactiveBorderShape",_t(this,this.getInteractiveBorderShapeStyle(e),{visible:!1}))},r.prototype.drawInteractiveBgShape=function(){this.stateShapes.set("interactiveBgShape",_t(this,S({},this.getCellArea()),{visible:!1}))},r.prototype.showTreeIcon=function(){return this.spreadsheet.isHierarchyTreeType()&&!this.meta.isLeaf},r.prototype.showTreeLeafNodeAlignDot=function(){var e;return((e=this.spreadsheet.options.style)===null||e===void 0?void 0:e.showTreeLeafNodeAlignDot)&&this.spreadsheet.isHierarchyTreeType()},r.prototype.getParentTreeIconCfg=function(){if(!(!this.showTreeLeafNodeAlignDot()||!this.spreadsheet.isHierarchyTreeType()||!this.meta.isLeaf))return K(this.meta,"parent.belongsCell.treeIcon.cfg")},r.prototype.drawTreeIcon=function(){var e=this;if(this.showTreeIcon()){var n=this.meta,i=n.isCollapsed,o=n.id,a=n.hierarchy,l=this.getContentArea().x,s=this.getTextStyle().fill,u=this.getStyle().icon.size,f=this.getContentIndent(),h=l+f,d=this.getIconYPosition();this.treeIcon=oy(this,{x:h,y:d,width:u,height:u},s,i,function(){if(!We()){if(!i){var c=e.spreadsheet.store.get("scrollY"),v=e.headerConfig.viewportHeight||0,p=WN(e.meta),g=a.height-p;if(c>0&&c+v>g){var y=g-v;e.spreadsheet.store.set("scrollY",y>0?y:0)}}e.spreadsheet.emit(R.ROW_CELL_COLLAPSE_TREE_ROWS,{id:o,isCollapsed:!i,node:e.meta})}}),We()&&(this.gm=new Ly(this,{gestures:["Tap"]}),this.gm.on("tap",function(){e.spreadsheet.emit(R.ROW_CELL_COLLAPSE_TREE_ROWS,{id:o,isCollapsed:!i,node:e.meta})}))}},r.prototype.drawTreeLeafNodeAlignDot=function(){var e=this.getParentTreeIconCfg();if(e){var n=this.getStyle().icon,i=n.size,o=n.margin,a=e.x+i+o.right,l=this.getTextPosition().y,s=this.getTextStyle(),u=s.fill,f=s.fontSize,h=i/5;this.treeLeafNodeAlignDot=iy(this,{x:a+i/2,y:l+(f-h)/2,r:h,fill:u,fillOpacity:.3})}},r.prototype.isBolderText=function(){var e=this.meta,n=e.isLeaf,i=e.isTotals,o=e.level;return!n&&o===0||i},r.prototype.drawTextShape=function(){t.prototype.drawTextShape.call(this),this.drawLinkField(this.meta)},r.prototype.drawRectBorder=function(){var e=this,n=this.getCellArea().x,i=this.getContentIndent(),o=this.spreadsheet.isHierarchyTreeType()?n:n+i;[Ne.BOTTOM,Ne.LEFT].forEach(function(a){var l=bn(a,S(S({},e.getCellArea()),{x:o}),e.getStyle().cell),s=l.position,u=l.style;$e(e,s,u)})},r.prototype.getResizeClipAreaBBox=function(){var e=this.headerConfig,n=e.width,i=e.viewportHeight;return{x:0,y:0,width:n,height:i}},r.prototype.drawResizeAreaInLeaf=function(){if(!(!this.meta.isLeaf||!this.shouldDrawResizeAreaByType("rowCellVertical",this))){var e=this.getCellArea(),n=e.x,i=e.y,o=e.width,a=e.height,l=this.getResizeAreaStyle(),s=po(this.spreadsheet,qn),u=this.headerConfig,f=u.position,h=u.seriesNumberWidth,d=u.width,c=u.scrollX,v=u.scrollY,p={x:n+h,y:i+a-l.size/2,width:o,height:l.size},g=this.getResizeClipAreaBBox();if(Mf(p,g,{scrollX:c,scrollY:v})){var y=(f==null?void 0:f.x)+n-c+h,C=(f==null?void 0:f.y)+i-v,w=this.spreadsheet.isFrozenRowHeader()?d-h-(n-c):o;s.addShape("rect",{attrs:S(S({},Zi({id:this.meta.id,theme:l,type:Mt.Vertical,effect:nt.Cell,offsetX:y,offsetY:C,width:o,height:a,meta:this.meta})),{x:y,y:C+a-l.size/2,width:w})})}}},r.prototype.getContentIndent=function(){if(!this.spreadsheet.isHierarchyTreeType())return 0;for(var e=this.getStyle(),n=e.icon,i=e.cell,o=n.size+n.margin.right,a=this.meta.parent,l=0;a;)a.height!==0&&(l+=o),a=a.parent;return this.showTreeLeafNodeAlignDot()&&(l+=this.isTreeLevel()?0:i.padding.right+n.margin.right),l},r.prototype.getTextIndent=function(){var e=this.getStyle().icon,n=e.size,i=e.margin,o=this.getContentIndent(),a=this.showTreeIcon()||this.isTreeLevel()&&this.showTreeLeafNodeAlignDot()?n+i.right:0;return o+a},r.prototype.isTreeLevel=function(){return Je(K(this.meta,"parent.children"),function(e){return!e.isLeaf})},r.prototype.getIconPosition=function(){if(!this.textShape)return{x:0,y:0};var e=this.textShape.cfg.attrs,n=e.x,i=e.y,o=e.textAlign,a=this.getStyle().icon.margin.left;return o==="left"?{x:n+this.actualTextWidth+a,y:i}:o==="right"?{x:n+a,y:i}:{x:n+this.actualTextWidth/2+a,y:i}},r.prototype.getMaxTextWidth=function(){var e=this.getContentArea().width;return e-this.getTextIndent()-this.getActionIconsWidth()},r.prototype.getTextArea=function(){var e=this.getContentArea(),n=this.getTextIndent();return S(S({},e),{x:e.x+n,width:e.width-n})},r.prototype.getAdjustTextAreaHeight=function(e,n,i){var o=e.height;return!this.spreadsheet.facet.vScrollBar&&e.y+e.height>n+i&&(o=n+i-e.y),o},r.prototype.calculateTextY=function(e){var n=e.textArea,i=e.adjustTextAreaHeight,o=this.headerConfig,a=o.scrollY,l=o.viewportHeight,s=this.getTextStyle().fontSize;return Ay(n.y,i,a,l,s)},r.prototype.getTextPosition=function(){var e=this.getTextArea(),n=this.headerConfig,i=n.scrollY,o=n.viewportHeight,a=this.getAdjustTextAreaHeight(e,i,o),l=this.calculateTextY({textArea:e,adjustTextAreaHeight:a}),s=co(e,this.getTextStyle(),0,this.getIconStyle(),this.getActionIconsCount()).text.x;return{x:s,y:l}},r.prototype.getIconYPosition=function(){var e=this.getTextPosition().y,n=this.getStyle().icon.size,i=this.getTextStyle().fontSize;return e+(i-n)/2},r}(Bf),go=function(t){H(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.handleRestOptions=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=A(e),o=i[0],a=i.slice(1);t.prototype.handleRestOptions.call(this,o,a),this.frozenRowCell=a[0]},r.prototype.getAdjustTextAreaHeight=function(e,n,i){var o=e.y-this.getFrozenFirstRowHeight(),a=e.height;return!this.spreadsheet.facet.vScrollBar&&o+e.height>n+i&&(a=n+i-o),a},r.prototype.calculateTextY=function(e){var n=e.textArea,i=e.adjustTextAreaHeight,o=this.headerConfig,a=o.scrollY,l=o.viewportHeight,s=this.getTextStyle().fontSize;return Ay(n.y,i,a+this.getFrozenFirstRowHeight(),l,s)},r.prototype.getResizeClipAreaBBox=function(){return S(S({},t.prototype.getResizeClipAreaBBox.call(this)),{y:this.getFrozenFirstRowHeight()})},r.prototype.getFrozenFirstRowHeight=function(){var e;if(this.frozenRowCell)return 0;var n=this.spreadsheet,i=n.facet,o=n.options,a=Jn(o,(e=i==null?void 0:i.layoutResult)===null||e===void 0?void 0:e.rowNodes).frozenRowHeight;return a},r}(kN),My=function(t){H(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.initCell=function(){this.drawBackgroundShape(),this.drawRectBorder(),this.drawTextShape()},r.prototype.getTextStyle=function(){var e;return(e=this.getStyle())===null||e===void 0?void 0:e.seriesText},r.prototype.getTextPosition=function(){return t.prototype.getTextPosition.call(this)},r.prototype.getActionIconsCount=function(){return 0},r.prototype.getIconStyle=function(){},r.prototype.drawResizeAreaInLeaf=function(){},r.prototype.update=function(){},r.prototype.findFieldCondition=function(){},r.prototype.mappingValue=function(){},r}(go),Ca=function(t){return[Ze.META,Ze.CONTROL].includes(t.key)},Iy=function(t){return t.ctrlKey||t.metaKey},or=function(t){var r=t.getMeta(),e=r||{},n=e.id,i=e.colIndex,o=e.rowIndex,a=e.rowQuery;return{id:n,colIndex:i,rowIndex:o,type:t.cellType,rowQuery:a}},GN=function(t,r){var e=t.interaction;e.changeState({stateName:G.SELECTED,cells:r}),t.emit(R.GLOBAL_SELECTED,e.getActiveCells())};function Hs(t,r){var e=Math.min(t.rowIndex,r.rowIndex),n=Math.max(t.rowIndex,r.rowIndex),i=Math.min(t.colIndex,r.colIndex),o=Math.max(t.colIndex,r.colIndex);return{start:{rowIndex:e,colIndex:i},end:{rowIndex:n,colIndex:o}}}function $N(t,r){var e=r.interaction,n=r.facet,i=r.options;if(r.isTableMode()){if(!i.showSeriesNumber)return[];var o=n.layoutResult.colLeafNodes[0].id,a=vo(String(t.rowIndex),o),l=[],s=e.getAllCells().find(function(u){return u.getMeta().id===a});return s&&s instanceof Ey&&l.push(s),l}return Ef(t.rowId,e.getAllRowHeaderCells(),r.isHierarchyTreeType())}var Df=function(t,r){var e=t.getSelectedCellHighlight(),n=e.colHeader,i=e.rowHeader;n&&t.updateCells(t.getAllColHeaderCells()),i&&t.updateCells(t.getAllRowHeaderCells()),r()},Oy=function(t){var r=t.store.get("visibleActionIcons"),e=t.interaction.getInteractedCells(),n=t.interaction.getState().cells;if(D(e)&&D(n)&&D(r))return!1;if(J(r,function(o){o.set("visible",!1)}),t.store.set("visibleActionIcons",[]),J(e,function(o){o.hideInteractionShape()}),t.interaction.resetState(),t.options.interaction.selectedCellsSpotlight){var i=t.interaction.getPanelGroupAllUnSelectedDataCells()||[];J(i,function(o){o.clearUnselectedState()})}return!0},YN=function(t,r){var e=r==null?void 0:r.stateName;t.interaction.isEqualStateName(e)||(Oy(t),t.hideTooltip(),t.store.set(us,r))},UN=function(t,r,e){var n,i,o=e.facet,a=o.panelBBox.width,l=o==null?void 0:o.frozenGroupInfo,s=(n=l==null?void 0:l.frozenCol.width)!==null&&n!==void 0?n:0,u=(i=l==null?void 0:l.frozenTrailingCol.width)!==null&&i!==void 0?i:0,f=o.layoutResult.colLeafNodes[t];return r===ze.SCROLL_UP?f.x-s:f.x+f.width-(a-u)},XN=function(t,r,e){var n,i,o=e.facet,a=o.viewCellHeights.getCellOffsetY,l=o.panelBBox.height,s=a(t+1);if(Fe(s))return 0;var u=o==null?void 0:o.frozenGroupInfo,f=(n=u==null?void 0:u.frozenRow.height)!==null&&n!==void 0?n:0,h=(i=u==null?void 0:u.frozenTrailingRow.height)!==null&&i!==void 0?i:0;return r===ze.SCROLL_UP?a(t)-f:s-(l-h)};/*!
 *  decimal.js v10.4.3
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var zs=9e15,Jr=1e9,Ws="0123456789abcdef",wa="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",ma="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",ks={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-9e15,maxE:zs,crypto:!1},By,_r,Z=!0,fl="[DecimalError] ",Xr=fl+"Invalid argument: ",Dy=fl+"Precision limit exceeded",Ny=fl+"crypto unavailable",Py="[object Decimal]",et=Math.floor,De=Math.pow,VN=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,qN=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,KN=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,Fy=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Xt=1e7,q=7,ZN=9007199254740991,jN=wa.length-1,Gs=ma.length-1,M={toStringTag:Py};M.absoluteValue=M.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),Y(t)};M.ceil=function(){return Y(new this.constructor(this),this.e+1,2)};M.clampedTo=M.clamp=function(t,r){var e,n=this,i=n.constructor;if(t=new i(t),r=new i(r),!t.s||!r.s)return new i(NaN);if(t.gt(r))throw Error(Xr+r);return e=n.cmp(t),e<0?t:n.cmp(r)>0?r:new i(n)};M.comparedTo=M.cmp=function(t){var r,e,n,i,o=this,a=o.d,l=(t=new o.constructor(t)).d,s=o.s,u=t.s;if(!a||!l)return!s||!u?NaN:s!==u?s:a===l?0:!a^s<0?1:-1;if(!a[0]||!l[0])return a[0]?s:l[0]?-u:0;if(s!==u)return s;if(o.e!==t.e)return o.e>t.e^s<0?1:-1;for(n=a.length,i=l.length,r=0,e=n<i?n:i;r<e;++r)if(a[r]!==l[r])return a[r]>l[r]^s<0?1:-1;return n===i?0:n>i^s<0?1:-1};M.cosine=M.cos=function(){var t,r,e=this,n=e.constructor;return e.d?e.d[0]?(t=n.precision,r=n.rounding,n.precision=t+Math.max(e.e,e.sd())+q,n.rounding=1,e=QN(n,Gy(n,e)),n.precision=t,n.rounding=r,Y(_r==2||_r==3?e.neg():e,t,r,!0)):new n(1):new n(NaN)};M.cubeRoot=M.cbrt=function(){var t,r,e,n,i,o,a,l,s,u,f=this,h=f.constructor;if(!f.isFinite()||f.isZero())return new h(f);for(Z=!1,o=f.s*De(f.s*f,1/3),!o||Math.abs(o)==1/0?(e=Ye(f.d),t=f.e,(o=(t-e.length+1)%3)&&(e+=o==1||o==-2?"0":"00"),o=De(e,1/3),t=et((t+1)/3)-(t%3==(t<0?-1:2)),o==1/0?e="5e"+t:(e=o.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),n=new h(e),n.s=f.s):n=new h(o.toString()),a=(t=h.precision)+3;;)if(l=n,s=l.times(l).times(l),u=s.plus(f),n=xe(u.plus(f).times(l),u.plus(s),a+2,1),Ye(l.d).slice(0,a)===(e=Ye(n.d)).slice(0,a))if(e=e.slice(a-3,a+1),e=="9999"||!i&&e=="4999"){if(!i&&(Y(l,t+1,0),l.times(l).times(l).eq(f))){n=l;break}a+=4,i=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(Y(n,t+1,1),r=!n.times(n).times(n).eq(f));break}return Z=!0,Y(n,t,h.rounding,r)};M.decimalPlaces=M.dp=function(){var t,r=this.d,e=NaN;if(r){if(t=r.length-1,e=(t-et(this.e/q))*q,t=r[t],t)for(;t%10==0;t/=10)e--;e<0&&(e=0)}return e};M.dividedBy=M.div=function(t){return xe(this,new this.constructor(t))};M.dividedToIntegerBy=M.divToInt=function(t){var r=this,e=r.constructor;return Y(xe(r,new e(t),0,1,1),e.precision,e.rounding)};M.equals=M.eq=function(t){return this.cmp(t)===0};M.floor=function(){return Y(new this.constructor(this),this.e+1,3)};M.greaterThan=M.gt=function(t){return this.cmp(t)>0};M.greaterThanOrEqualTo=M.gte=function(t){var r=this.cmp(t);return r==1||r===0};M.hyperbolicCosine=M.cosh=function(){var t,r,e,n,i,o=this,a=o.constructor,l=new a(1);if(!o.isFinite())return new a(o.s?1/0:NaN);if(o.isZero())return l;e=a.precision,n=a.rounding,a.precision=e+Math.max(o.e,o.sd())+4,a.rounding=1,i=o.d.length,i<32?(t=Math.ceil(i/3),r=(1/dl(4,t)).toString()):(t=16,r="2.3283064365386962890625e-10"),o=ti(a,1,o.times(r),new a(1),!0);for(var s,u=t,f=new a(8);u--;)s=o.times(o),o=l.minus(s.times(f.minus(s.times(f))));return Y(o,a.precision=e,a.rounding=n,!0)};M.hyperbolicSine=M.sinh=function(){var t,r,e,n,i=this,o=i.constructor;if(!i.isFinite()||i.isZero())return new o(i);if(r=o.precision,e=o.rounding,o.precision=r+Math.max(i.e,i.sd())+4,o.rounding=1,n=i.d.length,n<3)i=ti(o,2,i,i,!0);else{t=1.4*Math.sqrt(n),t=t>16?16:t|0,i=i.times(1/dl(5,t)),i=ti(o,2,i,i,!0);for(var a,l=new o(5),s=new o(16),u=new o(20);t--;)a=i.times(i),i=i.times(l.plus(a.times(s.times(a).plus(u))))}return o.precision=r,o.rounding=e,Y(i,r,e,!0)};M.hyperbolicTangent=M.tanh=function(){var t,r,e=this,n=e.constructor;return e.isFinite()?e.isZero()?new n(e):(t=n.precision,r=n.rounding,n.precision=t+7,n.rounding=1,xe(e.sinh(),e.cosh(),n.precision=t,n.rounding=r)):new n(e.s)};M.inverseCosine=M.acos=function(){var t,r=this,e=r.constructor,n=r.abs().cmp(1),i=e.precision,o=e.rounding;return n!==-1?n===0?r.isNeg()?$t(e,i,o):new e(0):new e(NaN):r.isZero()?$t(e,i+4,o).times(.5):(e.precision=i+6,e.rounding=1,r=r.asin(),t=$t(e,i+4,o).times(.5),e.precision=i,e.rounding=o,t.minus(r))};M.inverseHyperbolicCosine=M.acosh=function(){var t,r,e=this,n=e.constructor;return e.lte(1)?new n(e.eq(1)?0:NaN):e.isFinite()?(t=n.precision,r=n.rounding,n.precision=t+Math.max(Math.abs(e.e),e.sd())+4,n.rounding=1,Z=!1,e=e.times(e).minus(1).sqrt().plus(e),Z=!0,n.precision=t,n.rounding=r,e.ln()):new n(e)};M.inverseHyperbolicSine=M.asinh=function(){var t,r,e=this,n=e.constructor;return!e.isFinite()||e.isZero()?new n(e):(t=n.precision,r=n.rounding,n.precision=t+2*Math.max(Math.abs(e.e),e.sd())+6,n.rounding=1,Z=!1,e=e.times(e).plus(1).sqrt().plus(e),Z=!0,n.precision=t,n.rounding=r,e.ln())};M.inverseHyperbolicTangent=M.atanh=function(){var t,r,e,n,i=this,o=i.constructor;return i.isFinite()?i.e>=0?new o(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(t=o.precision,r=o.rounding,n=i.sd(),Math.max(n,t)<2*-i.e-1?Y(new o(i),t,r,!0):(o.precision=e=n-i.e,i=xe(i.plus(1),new o(1).minus(i),e+t,1),o.precision=t+4,o.rounding=1,i=i.ln(),o.precision=t,o.rounding=r,i.times(.5))):new o(NaN)};M.inverseSine=M.asin=function(){var t,r,e,n,i=this,o=i.constructor;return i.isZero()?new o(i):(r=i.abs().cmp(1),e=o.precision,n=o.rounding,r!==-1?r===0?(t=$t(o,e+4,n).times(.5),t.s=i.s,t):new o(NaN):(o.precision=e+6,o.rounding=1,i=i.div(new o(1).minus(i.times(i)).sqrt().plus(1)).atan(),o.precision=e,o.rounding=n,i.times(2)))};M.inverseTangent=M.atan=function(){var t,r,e,n,i,o,a,l,s,u=this,f=u.constructor,h=f.precision,d=f.rounding;if(u.isFinite()){if(u.isZero())return new f(u);if(u.abs().eq(1)&&h+4<=Gs)return a=$t(f,h+4,d).times(.25),a.s=u.s,a}else{if(!u.s)return new f(NaN);if(h+4<=Gs)return a=$t(f,h+4,d).times(.5),a.s=u.s,a}for(f.precision=l=h+10,f.rounding=1,e=Math.min(28,l/q+2|0),t=e;t;--t)u=u.div(u.times(u).plus(1).sqrt().plus(1));for(Z=!1,r=Math.ceil(l/q),n=1,s=u.times(u),a=new f(u),i=u;t!==-1;)if(i=i.times(s),o=a.minus(i.div(n+=2)),i=i.times(s),a=o.plus(i.div(n+=2)),a.d[r]!==void 0)for(t=r;a.d[t]===o.d[t]&&t--;);return e&&(a=a.times(2<<e-1)),Z=!0,Y(a,f.precision=h,f.rounding=d,!0)};M.isFinite=function(){return!!this.d};M.isInteger=M.isInt=function(){return!!this.d&&et(this.e/q)>this.d.length-2};M.isNaN=function(){return!this.s};M.isNegative=M.isNeg=function(){return this.s<0};M.isPositive=M.isPos=function(){return this.s>0};M.isZero=function(){return!!this.d&&this.d[0]===0};M.lessThan=M.lt=function(t){return this.cmp(t)<0};M.lessThanOrEqualTo=M.lte=function(t){return this.cmp(t)<1};M.logarithm=M.log=function(t){var r,e,n,i,o,a,l,s,u=this,f=u.constructor,h=f.precision,d=f.rounding,c=5;if(t==null)t=new f(10),r=!0;else{if(t=new f(t),e=t.d,t.s<0||!e||!e[0]||t.eq(1))return new f(NaN);r=t.eq(10)}if(e=u.d,u.s<0||!e||!e[0]||u.eq(1))return new f(e&&!e[0]?-1/0:u.s!=1?NaN:e?0:1/0);if(r)if(e.length>1)o=!0;else{for(i=e[0];i%10===0;)i/=10;o=i!==1}if(Z=!1,l=h+c,a=Fr(u,l),n=r?xa(f,l+10):Fr(t,l),s=xe(a,n,l,1),ji(s.d,i=h,d))do if(l+=10,a=Fr(u,l),n=r?xa(f,l+10):Fr(t,l),s=xe(a,n,l,1),!o){+Ye(s.d).slice(i+1,i+15)+1==1e14&&(s=Y(s,h+1,0));break}while(ji(s.d,i+=10,d));return Z=!0,Y(s,h,d)};M.minus=M.sub=function(t){var r,e,n,i,o,a,l,s,u,f,h,d,c=this,v=c.constructor;if(t=new v(t),!c.d||!t.d)return!c.s||!t.s?t=new v(NaN):c.d?t.s=-t.s:t=new v(t.d||c.s!==t.s?c:NaN),t;if(c.s!=t.s)return t.s=-t.s,c.plus(t);if(u=c.d,d=t.d,l=v.precision,s=v.rounding,!u[0]||!d[0]){if(d[0])t.s=-t.s;else if(u[0])t=new v(c);else return new v(s===3?-0:0);return Z?Y(t,l,s):t}if(e=et(t.e/q),f=et(c.e/q),u=u.slice(),o=f-e,o){for(h=o<0,h?(r=u,o=-o,a=d.length):(r=d,e=f,a=u.length),n=Math.max(Math.ceil(l/q),a)+2,o>n&&(o=n,r.length=1),r.reverse(),n=o;n--;)r.push(0);r.reverse()}else{for(n=u.length,a=d.length,h=n<a,h&&(a=n),n=0;n<a;n++)if(u[n]!=d[n]){h=u[n]<d[n];break}o=0}for(h&&(r=u,u=d,d=r,t.s=-t.s),a=u.length,n=d.length-a;n>0;--n)u[a++]=0;for(n=d.length;n>o;){if(u[--n]<d[n]){for(i=n;i&&u[--i]===0;)u[i]=Xt-1;--u[i],u[n]+=Xt}u[n]-=d[n]}for(;u[--a]===0;)u.pop();for(;u[0]===0;u.shift())--e;return u[0]?(t.d=u,t.e=hl(u,e),Z?Y(t,l,s):t):new v(s===3?-0:0)};M.modulo=M.mod=function(t){var r,e=this,n=e.constructor;return t=new n(t),!e.d||!t.s||t.d&&!t.d[0]?new n(NaN):!t.d||e.d&&!e.d[0]?Y(new n(e),n.precision,n.rounding):(Z=!1,n.modulo==9?(r=xe(e,t.abs(),0,3,1),r.s*=t.s):r=xe(e,t,0,n.modulo,1),r=r.times(t),Z=!0,e.minus(r))};M.naturalExponential=M.exp=function(){return $s(this)};M.naturalLogarithm=M.ln=function(){return Fr(this)};M.negated=M.neg=function(){var t=new this.constructor(this);return t.s=-t.s,Y(t)};M.plus=M.add=function(t){var r,e,n,i,o,a,l,s,u,f,h=this,d=h.constructor;if(t=new d(t),!h.d||!t.d)return!h.s||!t.s?t=new d(NaN):h.d||(t=new d(t.d||h.s===t.s?h:NaN)),t;if(h.s!=t.s)return t.s=-t.s,h.minus(t);if(u=h.d,f=t.d,l=d.precision,s=d.rounding,!u[0]||!f[0])return f[0]||(t=new d(h)),Z?Y(t,l,s):t;if(o=et(h.e/q),n=et(t.e/q),u=u.slice(),i=o-n,i){for(i<0?(e=u,i=-i,a=f.length):(e=f,n=o,a=u.length),o=Math.ceil(l/q),a=o>a?o+1:a+1,i>a&&(i=a,e.length=1),e.reverse();i--;)e.push(0);e.reverse()}for(a=u.length,i=f.length,a-i<0&&(i=a,e=f,f=u,u=e),r=0;i;)r=(u[--i]=u[i]+f[i]+r)/Xt|0,u[i]%=Xt;for(r&&(u.unshift(r),++n),a=u.length;u[--a]==0;)u.pop();return t.d=u,t.e=hl(u,n),Z?Y(t,l,s):t};M.precision=M.sd=function(t){var r,e=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Xr+t);return e.d?(r=Hy(e.d),t&&e.e+1>r&&(r=e.e+1)):r=NaN,r};M.round=function(){var t=this,r=t.constructor;return Y(new r(t),t.e+1,r.rounding)};M.sine=M.sin=function(){var t,r,e=this,n=e.constructor;return e.isFinite()?e.isZero()?new n(e):(t=n.precision,r=n.rounding,n.precision=t+Math.max(e.e,e.sd())+q,n.rounding=1,e=eP(n,Gy(n,e)),n.precision=t,n.rounding=r,Y(_r>2?e.neg():e,t,r,!0)):new n(NaN)};M.squareRoot=M.sqrt=function(){var t,r,e,n,i,o,a=this,l=a.d,s=a.e,u=a.s,f=a.constructor;if(u!==1||!l||!l[0])return new f(!u||u<0&&(!l||l[0])?NaN:l?a:1/0);for(Z=!1,u=Math.sqrt(+a),u==0||u==1/0?(r=Ye(l),(r.length+s)%2==0&&(r+="0"),u=Math.sqrt(r),s=et((s+1)/2)-(s<0||s%2),u==1/0?r="5e"+s:(r=u.toExponential(),r=r.slice(0,r.indexOf("e")+1)+s),n=new f(r)):n=new f(u.toString()),e=(s=f.precision)+3;;)if(o=n,n=o.plus(xe(a,o,e+2,1)).times(.5),Ye(o.d).slice(0,e)===(r=Ye(n.d)).slice(0,e))if(r=r.slice(e-3,e+1),r=="9999"||!i&&r=="4999"){if(!i&&(Y(o,s+1,0),o.times(o).eq(a))){n=o;break}e+=4,i=1}else{(!+r||!+r.slice(1)&&r.charAt(0)=="5")&&(Y(n,s+1,1),t=!n.times(n).eq(a));break}return Z=!0,Y(n,s,f.rounding,t)};M.tangent=M.tan=function(){var t,r,e=this,n=e.constructor;return e.isFinite()?e.isZero()?new n(e):(t=n.precision,r=n.rounding,n.precision=t+10,n.rounding=1,e=e.sin(),e.s=1,e=xe(e,new n(1).minus(e.times(e)).sqrt(),t+10,0),n.precision=t,n.rounding=r,Y(_r==2||_r==4?e.neg():e,t,r,!0)):new n(NaN)};M.times=M.mul=function(t){var r,e,n,i,o,a,l,s,u,f=this,h=f.constructor,d=f.d,c=(t=new h(t)).d;if(t.s*=f.s,!d||!d[0]||!c||!c[0])return new h(!t.s||d&&!d[0]&&!c||c&&!c[0]&&!d?NaN:!d||!c?t.s/0:t.s*0);for(e=et(f.e/q)+et(t.e/q),s=d.length,u=c.length,s<u&&(o=d,d=c,c=o,a=s,s=u,u=a),o=[],a=s+u,n=a;n--;)o.push(0);for(n=u;--n>=0;){for(r=0,i=s+n;i>n;)l=o[i]+c[n]*d[i-n-1]+r,o[i--]=l%Xt|0,r=l/Xt|0;o[i]=(o[i]+r)%Xt|0}for(;!o[--a];)o.pop();return r?++e:o.shift(),t.d=o,t.e=hl(o,e),Z?Y(t,h.precision,h.rounding):t};M.toBinary=function(t,r){return Nf(this,2,t,r)};M.toDecimalPlaces=M.toDP=function(t,r){var e=this,n=e.constructor;return e=new n(e),t===void 0?e:(pt(t,0,Jr),r===void 0?r=n.rounding:pt(r,0,8),Y(e,t+e.e+1,r))};M.toExponential=function(t,r){var e,n=this,i=n.constructor;return t===void 0?e=ur(n,!0):(pt(t,0,Jr),r===void 0?r=i.rounding:pt(r,0,8),n=Y(new i(n),t+1,r),e=ur(n,!0,t+1)),n.isNeg()&&!n.isZero()?"-"+e:e};M.toFixed=function(t,r){var e,n,i=this,o=i.constructor;return t===void 0?e=ur(i):(pt(t,0,Jr),r===void 0?r=o.rounding:pt(r,0,8),n=Y(new o(i),t+i.e+1,r),e=ur(n,!1,t+n.e+1)),i.isNeg()&&!i.isZero()?"-"+e:e};M.toFraction=function(t){var r,e,n,i,o,a,l,s,u,f,h,d,c=this,v=c.d,p=c.constructor;if(!v)return new p(c);if(u=e=new p(1),n=s=new p(0),r=new p(n),o=r.e=Hy(v)-c.e-1,a=o%q,r.d[0]=De(10,a<0?q+a:a),t==null)t=o>0?r:u;else{if(l=new p(t),!l.isInt()||l.lt(u))throw Error(Xr+l);t=l.gt(r)?o>0?r:u:l}for(Z=!1,l=new p(Ye(v)),f=p.precision,p.precision=o=v.length*q*2;h=xe(l,r,0,1,1),i=e.plus(h.times(n)),i.cmp(t)!=1;)e=n,n=i,i=u,u=s.plus(h.times(i)),s=i,i=r,r=l.minus(h.times(i)),l=i;return i=xe(t.minus(e),n,0,1,1),s=s.plus(i.times(u)),e=e.plus(i.times(n)),s.s=u.s=c.s,d=xe(u,n,o,1).minus(c).abs().cmp(xe(s,e,o,1).minus(c).abs())<1?[u,n]:[s,e],p.precision=f,Z=!0,d};M.toHexadecimal=M.toHex=function(t,r){return Nf(this,16,t,r)};M.toNearest=function(t,r){var e=this,n=e.constructor;if(e=new n(e),t==null){if(!e.d)return e;t=new n(1),r=n.rounding}else{if(t=new n(t),r===void 0?r=n.rounding:pt(r,0,8),!e.d)return t.s?e:t;if(!t.d)return t.s&&(t.s=e.s),t}return t.d[0]?(Z=!1,e=xe(e,t,0,r,1).times(t),Z=!0,Y(e)):(t.s=e.s,e=t),e};M.toNumber=function(){return+this};M.toOctal=function(t,r){return Nf(this,8,t,r)};M.toPower=M.pow=function(t){var r,e,n,i,o,a,l=this,s=l.constructor,u=+(t=new s(t));if(!l.d||!t.d||!l.d[0]||!t.d[0])return new s(De(+l,u));if(l=new s(l),l.eq(1))return l;if(n=s.precision,o=s.rounding,t.eq(1))return Y(l,n,o);if(r=et(t.e/q),r>=t.d.length-1&&(e=u<0?-u:u)<=ZN)return i=zy(s,l,e,n),t.s<0?new s(1).div(i):Y(i,n,o);if(a=l.s,a<0){if(r<t.d.length-1)return new s(NaN);if(t.d[r]&1||(a=1),l.e==0&&l.d[0]==1&&l.d.length==1)return l.s=a,l}return e=De(+l,u),r=e==0||!isFinite(e)?et(u*(Math.log("0."+Ye(l.d))/Math.LN10+l.e+1)):new s(e+"").e,r>s.maxE+1||r<s.minE-1?new s(r>0?a/0:0):(Z=!1,s.rounding=l.s=1,e=Math.min(12,(r+"").length),i=$s(t.times(Fr(l,n+e)),n),i.d&&(i=Y(i,n+5,1),ji(i.d,n,o)&&(r=n+10,i=Y($s(t.times(Fr(l,r+e)),r),r+5,1),+Ye(i.d).slice(n+1,n+15)+1==1e14&&(i=Y(i,n+1,0)))),i.s=a,Z=!0,s.rounding=o,Y(i,n,o))};M.toPrecision=function(t,r){var e,n=this,i=n.constructor;return t===void 0?e=ur(n,n.e<=i.toExpNeg||n.e>=i.toExpPos):(pt(t,1,Jr),r===void 0?r=i.rounding:pt(r,0,8),n=Y(new i(n),t,r),e=ur(n,t<=n.e||n.e<=i.toExpNeg,t)),n.isNeg()&&!n.isZero()?"-"+e:e};M.toSignificantDigits=M.toSD=function(t,r){var e=this,n=e.constructor;return t===void 0?(t=n.precision,r=n.rounding):(pt(t,1,Jr),r===void 0?r=n.rounding:pt(r,0,8)),Y(new n(e),t,r)};M.toString=function(){var t=this,r=t.constructor,e=ur(t,t.e<=r.toExpNeg||t.e>=r.toExpPos);return t.isNeg()&&!t.isZero()?"-"+e:e};M.truncated=M.trunc=function(){return Y(new this.constructor(this),this.e+1,1)};M.valueOf=M.toJSON=function(){var t=this,r=t.constructor,e=ur(t,t.e<=r.toExpNeg||t.e>=r.toExpPos);return t.isNeg()?"-"+e:e};function Ye(t){var r,e,n,i=t.length-1,o="",a=t[0];if(i>0){for(o+=a,r=1;r<i;r++)n=t[r]+"",e=q-n.length,e&&(o+=Nr(e)),o+=n;a=t[r],n=a+"",e=q-n.length,e&&(o+=Nr(e))}else if(a===0)return"0";for(;a%10===0;)a/=10;return o+a}function pt(t,r,e){if(t!==~~t||t<r||t>e)throw Error(Xr+t)}function ji(t,r,e,n){var i,o,a,l;for(o=t[0];o>=10;o/=10)--r;return--r<0?(r+=q,i=0):(i=Math.ceil((r+1)/q),r%=q),o=De(10,q-r),l=t[i]%o|0,n==null?r<3?(r==0?l=l/100|0:r==1&&(l=l/10|0),a=e<4&&l==99999||e>3&&l==49999||l==5e4||l==0):a=(e<4&&l+1==o||e>3&&l+1==o/2)&&(t[i+1]/o/100|0)==De(10,r-2)-1||(l==o/2||l==0)&&(t[i+1]/o/100|0)==0:r<4?(r==0?l=l/1e3|0:r==1?l=l/100|0:r==2&&(l=l/10|0),a=(n||e<4)&&l==9999||!n&&e>3&&l==4999):a=((n||e<4)&&l+1==o||!n&&e>3&&l+1==o/2)&&(t[i+1]/o/1e3|0)==De(10,r-3)-1,a}function Yo(t,r,e){for(var n,i=[0],o,a=0,l=t.length;a<l;){for(o=i.length;o--;)i[o]*=r;for(i[0]+=Ws.indexOf(t.charAt(a++)),n=0;n<i.length;n++)i[n]>e-1&&(i[n+1]===void 0&&(i[n+1]=0),i[n+1]+=i[n]/e|0,i[n]%=e)}return i.reverse()}function QN(t,r){var e,n,i;if(r.isZero())return r;n=r.d.length,n<32?(e=Math.ceil(n/3),i=(1/dl(4,e)).toString()):(e=16,i="2.3283064365386962890625e-10"),t.precision+=e,r=ti(t,1,r.times(i),new t(1));for(var o=e;o--;){var a=r.times(r);r=a.times(a).minus(a).times(8).plus(1)}return t.precision-=e,r}var xe=function(){function t(n,i,o){var a,l=0,s=n.length;for(n=n.slice();s--;)a=n[s]*i+l,n[s]=a%o|0,l=a/o|0;return l&&n.unshift(l),n}function r(n,i,o,a){var l,s;if(o!=a)s=o>a?1:-1;else for(l=s=0;l<o;l++)if(n[l]!=i[l]){s=n[l]>i[l]?1:-1;break}return s}function e(n,i,o,a){for(var l=0;o--;)n[o]-=l,l=n[o]<i[o]?1:0,n[o]=l*a+n[o]-i[o];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,o,a,l,s){var u,f,h,d,c,v,p,g,y,C,w,m,_,b,T,E,L,F,I,B,k=n.constructor,U=n.s==i.s?1:-1,O=n.d,z=i.d;if(!O||!O[0]||!z||!z[0])return new k(!n.s||!i.s||(O?z&&O[0]==z[0]:!z)?NaN:O&&O[0]==0||!z?U*0:U/0);for(s?(c=1,f=n.e-i.e):(s=Xt,c=q,f=et(n.e/c)-et(i.e/c)),I=z.length,L=O.length,y=new k(U),C=y.d=[],h=0;z[h]==(O[h]||0);h++);if(z[h]>(O[h]||0)&&f--,o==null?(b=o=k.precision,a=k.rounding):l?b=o+(n.e-i.e)+1:b=o,b<0)C.push(1),v=!0;else{if(b=b/c+2|0,h=0,I==1){for(d=0,z=z[0],b++;(h<L||d)&&b--;h++)T=d*s+(O[h]||0),C[h]=T/z|0,d=T%z|0;v=d||h<L}else{for(d=s/(z[0]+1)|0,d>1&&(z=t(z,d,s),O=t(O,d,s),I=z.length,L=O.length),E=I,w=O.slice(0,I),m=w.length;m<I;)w[m++]=0;B=z.slice(),B.unshift(0),F=z[0],z[1]>=s/2&&++F;do d=0,u=r(z,w,I,m),u<0?(_=w[0],I!=m&&(_=_*s+(w[1]||0)),d=_/F|0,d>1?(d>=s&&(d=s-1),p=t(z,d,s),g=p.length,m=w.length,u=r(p,w,g,m),u==1&&(d--,e(p,I<g?B:z,g,s))):(d==0&&(u=d=1),p=z.slice()),g=p.length,g<m&&p.unshift(0),e(w,p,m,s),u==-1&&(m=w.length,u=r(z,w,I,m),u<1&&(d++,e(w,I<m?B:z,m,s))),m=w.length):u===0&&(d++,w=[0]),C[h++]=d,u&&w[0]?w[m++]=O[E]||0:(w=[O[E]],m=1);while((E++<L||w[0]!==void 0)&&b--);v=w[0]!==void 0}C[0]||C.shift()}if(c==1)y.e=f,By=v;else{for(h=1,d=C[0];d>=10;d/=10)h++;y.e=h+f*c-1,Y(y,l?o+y.e+1:o,a,v)}return y}}();function Y(t,r,e,n){var i,o,a,l,s,u,f,h,d,c=t.constructor;e:if(r!=null){if(h=t.d,!h)return t;for(i=1,l=h[0];l>=10;l/=10)i++;if(o=r-i,o<0)o+=q,a=r,f=h[d=0],s=f/De(10,i-a-1)%10|0;else if(d=Math.ceil((o+1)/q),l=h.length,d>=l)if(n){for(;l++<=d;)h.push(0);f=s=0,i=1,o%=q,a=o-q+1}else break e;else{for(f=l=h[d],i=1;l>=10;l/=10)i++;o%=q,a=o-q+i,s=a<0?0:f/De(10,i-a-1)%10|0}if(n=n||r<0||h[d+1]!==void 0||(a<0?f:f%De(10,i-a-1)),u=e<4?(s||n)&&(e==0||e==(t.s<0?3:2)):s>5||s==5&&(e==4||n||e==6&&(o>0?a>0?f/De(10,i-a):0:h[d-1])%10&1||e==(t.s<0?8:7)),r<1||!h[0])return h.length=0,u?(r-=t.e+1,h[0]=De(10,(q-r%q)%q),t.e=-r||0):h[0]=t.e=0,t;if(o==0?(h.length=d,l=1,d--):(h.length=d+1,l=De(10,q-o),h[d]=a>0?(f/De(10,i-a)%De(10,a)|0)*l:0),u)for(;;)if(d==0){for(o=1,a=h[0];a>=10;a/=10)o++;for(a=h[0]+=l,l=1;a>=10;a/=10)l++;o!=l&&(t.e++,h[0]==Xt&&(h[0]=1));break}else{if(h[d]+=l,h[d]!=Xt)break;h[d--]=0,l=1}for(o=h.length;h[--o]===0;)h.pop()}return Z&&(t.e>c.maxE?(t.d=null,t.e=NaN):t.e<c.minE&&(t.e=0,t.d=[0])),t}function ur(t,r,e){if(!t.isFinite())return ky(t);var n,i=t.e,o=Ye(t.d),a=o.length;return r?(e&&(n=e-a)>0?o=o.charAt(0)+"."+o.slice(1)+Nr(n):a>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(t.e<0?"e":"e+")+t.e):i<0?(o="0."+Nr(-i-1)+o,e&&(n=e-a)>0&&(o+=Nr(n))):i>=a?(o+=Nr(i+1-a),e&&(n=e-i-1)>0&&(o=o+"."+Nr(n))):((n=i+1)<a&&(o=o.slice(0,n)+"."+o.slice(n)),e&&(n=e-a)>0&&(i+1===a&&(o+="."),o+=Nr(n))),o}function hl(t,r){var e=t[0];for(r*=q;e>=10;e/=10)r++;return r}function xa(t,r,e){if(r>jN)throw Z=!0,e&&(t.precision=e),Error(Dy);return Y(new t(wa),r,1,!0)}function $t(t,r,e){if(r>Gs)throw Error(Dy);return Y(new t(ma),r,e,!0)}function Hy(t){var r=t.length-1,e=r*q+1;if(r=t[r],r){for(;r%10==0;r/=10)e--;for(r=t[0];r>=10;r/=10)e++}return e}function Nr(t){for(var r="";t--;)r+="0";return r}function zy(t,r,e,n){var i,o=new t(1),a=Math.ceil(n/q+4);for(Z=!1;;){if(e%2&&(o=o.times(r),Pc(o.d,a)&&(i=!0)),e=et(e/2),e===0){e=o.d.length-1,i&&o.d[e]===0&&++o.d[e];break}r=r.times(r),Pc(r.d,a)}return Z=!0,o}function Nc(t){return t.d[t.d.length-1]&1}function Wy(t,r,e){for(var n,i=new t(r[0]),o=0;++o<r.length;)if(n=new t(r[o]),n.s)i[e](n)&&(i=n);else{i=n;break}return i}function $s(t,r){var e,n,i,o,a,l,s,u=0,f=0,h=0,d=t.constructor,c=d.rounding,v=d.precision;if(!t.d||!t.d[0]||t.e>17)return new d(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:NaN);for(r==null?(Z=!1,s=v):s=r,l=new d(.03125);t.e>-2;)t=t.times(l),h+=5;for(n=Math.log(De(2,h))/Math.LN10*2+5|0,s+=n,e=o=a=new d(1),d.precision=s;;){if(o=Y(o.times(t),s,1),e=e.times(++f),l=a.plus(xe(o,e,s,1)),Ye(l.d).slice(0,s)===Ye(a.d).slice(0,s)){for(i=h;i--;)a=Y(a.times(a),s,1);if(r==null)if(u<3&&ji(a.d,s-n,c,u))d.precision=s+=10,e=o=l=new d(1),f=0,u++;else return Y(a,d.precision=v,c,Z=!0);else return d.precision=v,a}a=l}}function Fr(t,r){var e,n,i,o,a,l,s,u,f,h,d,c=1,v=10,p=t,g=p.d,y=p.constructor,C=y.rounding,w=y.precision;if(p.s<0||!g||!g[0]||!p.e&&g[0]==1&&g.length==1)return new y(g&&!g[0]?-1/0:p.s!=1?NaN:g?0:p);if(r==null?(Z=!1,f=w):f=r,y.precision=f+=v,e=Ye(g),n=e.charAt(0),Math.abs(o=p.e)<15e14){for(;n<7&&n!=1||n==1&&e.charAt(1)>3;)p=p.times(t),e=Ye(p.d),n=e.charAt(0),c++;o=p.e,n>1?(p=new y("0."+e),o++):p=new y(n+"."+e.slice(1))}else return u=xa(y,f+2,w).times(o+""),p=Fr(new y(n+"."+e.slice(1)),f-v).plus(u),y.precision=w,r==null?Y(p,w,C,Z=!0):p;for(h=p,s=a=p=xe(p.minus(1),p.plus(1),f,1),d=Y(p.times(p),f,1),i=3;;){if(a=Y(a.times(d),f,1),u=s.plus(xe(a,new y(i),f,1)),Ye(u.d).slice(0,f)===Ye(s.d).slice(0,f))if(s=s.times(2),o!==0&&(s=s.plus(xa(y,f+2,w).times(o+""))),s=xe(s,new y(c),f,1),r==null)if(ji(s.d,f-v,C,l))y.precision=f+=v,u=a=p=xe(h.minus(1),h.plus(1),f,1),d=Y(p.times(p),f,1),i=l=1;else return Y(s,y.precision=w,C,Z=!0);else return y.precision=w,s;s=u,i+=2}}function ky(t){return String(t.s*t.s/0)}function Ys(t,r){var e,n,i;for((e=r.indexOf("."))>-1&&(r=r.replace(".","")),(n=r.search(/e/i))>0?(e<0&&(e=n),e+=+r.slice(n+1),r=r.substring(0,n)):e<0&&(e=r.length),n=0;r.charCodeAt(n)===48;n++);for(i=r.length;r.charCodeAt(i-1)===48;--i);if(r=r.slice(n,i),r){if(i-=n,t.e=e=e-n-1,t.d=[],n=(e+1)%q,e<0&&(n+=q),n<i){for(n&&t.d.push(+r.slice(0,n)),i-=q;n<i;)t.d.push(+r.slice(n,n+=q));r=r.slice(n),n=q-r.length}else n-=i;for(;n--;)r+="0";t.d.push(+r),Z&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function JN(t,r){var e,n,i,o,a,l,s,u,f;if(r.indexOf("_")>-1){if(r=r.replace(/(\d)_(?=\d)/g,"$1"),Fy.test(r))return Ys(t,r)}else if(r==="Infinity"||r==="NaN")return+r||(t.s=NaN),t.e=NaN,t.d=null,t;if(qN.test(r))e=16,r=r.toLowerCase();else if(VN.test(r))e=2;else if(KN.test(r))e=8;else throw Error(Xr+r);for(o=r.search(/p/i),o>0?(s=+r.slice(o+1),r=r.substring(2,o)):r=r.slice(2),o=r.indexOf("."),a=o>=0,n=t.constructor,a&&(r=r.replace(".",""),l=r.length,o=l-o,i=zy(n,new n(e),o,o*2)),u=Yo(r,e,Xt),f=u.length-1,o=f;u[o]===0;--o)u.pop();return o<0?new n(t.s*0):(t.e=hl(u,f),t.d=u,Z=!1,a&&(t=xe(t,i,l*4)),s&&(t=t.times(Math.abs(s)<54?De(2,s):Kt.pow(2,s))),Z=!0,t)}function eP(t,r){var e,n=r.d.length;if(n<3)return r.isZero()?r:ti(t,2,r,r);e=1.4*Math.sqrt(n),e=e>16?16:e|0,r=r.times(1/dl(5,e)),r=ti(t,2,r,r);for(var i,o=new t(5),a=new t(16),l=new t(20);e--;)i=r.times(r),r=r.times(o.plus(i.times(a.times(i).minus(l))));return r}function ti(t,r,e,n,i){var o,a,l,s,u=t.precision,f=Math.ceil(u/q);for(Z=!1,s=e.times(e),l=new t(n);;){if(a=xe(l.times(s),new t(r++*r++),u,1),l=i?n.plus(a):n.minus(a),n=xe(a.times(s),new t(r++*r++),u,1),a=l.plus(n),a.d[f]!==void 0){for(o=f;a.d[o]===l.d[o]&&o--;);if(o==-1)break}o=l,l=n,n=a,a=o}return Z=!0,a.d.length=f+1,a}function dl(t,r){for(var e=t;--r;)e*=t;return e}function Gy(t,r){var e,n=r.s<0,i=$t(t,t.precision,1),o=i.times(.5);if(r=r.abs(),r.lte(o))return _r=n?4:1,r;if(e=r.divToInt(i),e.isZero())_r=n?3:2;else{if(r=r.minus(e.times(i)),r.lte(o))return _r=Nc(e)?n?2:3:n?4:1,r;_r=Nc(e)?n?1:4:n?3:2}return r.minus(i).abs()}function Nf(t,r,e,n){var i,o,a,l,s,u,f,h,d,c=t.constructor,v=e!==void 0;if(v?(pt(e,1,Jr),n===void 0?n=c.rounding:pt(n,0,8)):(e=c.precision,n=c.rounding),!t.isFinite())f=ky(t);else{for(f=ur(t),a=f.indexOf("."),v?(i=2,r==16?e=e*4-3:r==8&&(e=e*3-2)):i=r,a>=0&&(f=f.replace(".",""),d=new c(1),d.e=f.length-a,d.d=Yo(ur(d),10,i),d.e=d.d.length),h=Yo(f,10,i),o=s=h.length;h[--s]==0;)h.pop();if(!h[0])f=v?"0p+0":"0";else{if(a<0?o--:(t=new c(t),t.d=h,t.e=o,t=xe(t,d,e,n,0,i),h=t.d,o=t.e,u=By),a=h[e],l=i/2,u=u||h[e+1]!==void 0,u=n<4?(a!==void 0||u)&&(n===0||n===(t.s<0?3:2)):a>l||a===l&&(n===4||u||n===6&&h[e-1]&1||n===(t.s<0?8:7)),h.length=e,u)for(;++h[--e]>i-1;)h[e]=0,e||(++o,h.unshift(1));for(s=h.length;!h[s-1];--s);for(a=0,f="";a<s;a++)f+=Ws.charAt(h[a]);if(v){if(s>1)if(r==16||r==8){for(a=r==16?4:3,--s;s%a;s++)f+="0";for(h=Yo(f,i,r),s=h.length;!h[s-1];--s);for(a=1,f="1.";a<s;a++)f+=Ws.charAt(h[a])}else f=f.charAt(0)+"."+f.slice(1);f=f+(o<0?"p":"p+")+o}else if(o<0){for(;++o;)f="0"+f;f="0."+f}else if(++o>s)for(o-=s;o--;)f+="0";else o<s&&(f=f.slice(0,o)+"."+f.slice(o))}f=(r==16?"0x":r==2?"0b":r==8?"0o":"")+f}return t.s<0?"-"+f:f}function Pc(t,r){if(t.length>r)return t.length=r,!0}function tP(t){return new this(t).abs()}function rP(t){return new this(t).acos()}function nP(t){return new this(t).acosh()}function iP(t,r){return new this(t).plus(r)}function oP(t){return new this(t).asin()}function aP(t){return new this(t).asinh()}function lP(t){return new this(t).atan()}function sP(t){return new this(t).atanh()}function uP(t,r){t=new this(t),r=new this(r);var e,n=this.precision,i=this.rounding,o=n+4;return!t.s||!r.s?e=new this(NaN):!t.d&&!r.d?(e=$t(this,o,1).times(r.s>0?.25:.75),e.s=t.s):!r.d||t.isZero()?(e=r.s<0?$t(this,n,i):new this(0),e.s=t.s):!t.d||r.isZero()?(e=$t(this,o,1).times(.5),e.s=t.s):r.s<0?(this.precision=o,this.rounding=1,e=this.atan(xe(t,r,o,1)),r=$t(this,o,1),this.precision=n,this.rounding=i,e=t.s<0?e.minus(r):e.plus(r)):e=this.atan(xe(t,r,o,1)),e}function fP(t){return new this(t).cbrt()}function hP(t){return Y(t=new this(t),t.e+1,2)}function dP(t,r,e){return new this(t).clamp(r,e)}function cP(t){if(!t||typeof t!="object")throw Error(fl+"Object expected");var r,e,n,i=t.defaults===!0,o=["precision",1,Jr,"rounding",0,8,"toExpNeg",-9e15,0,"toExpPos",0,zs,"maxE",0,zs,"minE",-9e15,0,"modulo",0,9];for(r=0;r<o.length;r+=3)if(e=o[r],i&&(this[e]=ks[e]),(n=t[e])!==void 0)if(et(n)===n&&n>=o[r+1]&&n<=o[r+2])this[e]=n;else throw Error(Xr+e+": "+n);if(e="crypto",i&&(this[e]=ks[e]),(n=t[e])!==void 0)if(n===!0||n===!1||n===0||n===1)if(n)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[e]=!0;else throw Error(Ny);else this[e]=!1;else throw Error(Xr+e+": "+n);return this}function vP(t){return new this(t).cos()}function pP(t){return new this(t).cosh()}function $y(t){var r,e,n;function i(o){var a,l,s,u=this;if(!(u instanceof i))return new i(o);if(u.constructor=i,Fc(o)){u.s=o.s,Z?!o.d||o.e>i.maxE?(u.e=NaN,u.d=null):o.e<i.minE?(u.e=0,u.d=[0]):(u.e=o.e,u.d=o.d.slice()):(u.e=o.e,u.d=o.d?o.d.slice():o.d);return}if(s=typeof o,s==="number"){if(o===0){u.s=1/o<0?-1:1,u.e=0,u.d=[0];return}if(o<0?(o=-o,u.s=-1):u.s=1,o===~~o&&o<1e7){for(a=0,l=o;l>=10;l/=10)a++;Z?a>i.maxE?(u.e=NaN,u.d=null):a<i.minE?(u.e=0,u.d=[0]):(u.e=a,u.d=[o]):(u.e=a,u.d=[o]);return}else if(o*0!==0){o||(u.s=NaN),u.e=NaN,u.d=null;return}return Ys(u,o.toString())}else if(s!=="string")throw Error(Xr+o);return(l=o.charCodeAt(0))===45?(o=o.slice(1),u.s=-1):(l===43&&(o=o.slice(1)),u.s=1),Fy.test(o)?Ys(u,o):JN(u,o)}if(i.prototype=M,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=cP,i.clone=$y,i.isDecimal=Fc,i.abs=tP,i.acos=rP,i.acosh=nP,i.add=iP,i.asin=oP,i.asinh=aP,i.atan=lP,i.atanh=sP,i.atan2=uP,i.cbrt=fP,i.ceil=hP,i.clamp=dP,i.cos=vP,i.cosh=pP,i.div=gP,i.exp=yP,i.floor=CP,i.hypot=wP,i.ln=mP,i.log=xP,i.log10=SP,i.log2=_P,i.max=bP,i.min=TP,i.mod=RP,i.mul=EP,i.pow=LP,i.random=AP,i.round=MP,i.sign=IP,i.sin=OP,i.sinh=BP,i.sqrt=DP,i.sub=NP,i.sum=PP,i.tan=FP,i.tanh=HP,i.trunc=zP,t===void 0&&(t={}),t&&t.defaults!==!0)for(n=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],r=0;r<n.length;)t.hasOwnProperty(e=n[r++])||(t[e]=this[e]);return i.config(t),i}function gP(t,r){return new this(t).div(r)}function yP(t){return new this(t).exp()}function CP(t){return Y(t=new this(t),t.e+1,3)}function wP(){var t,r,e=new this(0);for(Z=!1,t=0;t<arguments.length;)if(r=new this(arguments[t++]),r.d)e.d&&(e=e.plus(r.times(r)));else{if(r.s)return Z=!0,new this(1/0);e=r}return Z=!0,e.sqrt()}function Fc(t){return t instanceof Kt||t&&t.toStringTag===Py||!1}function mP(t){return new this(t).ln()}function xP(t,r){return new this(t).log(r)}function _P(t){return new this(t).log(2)}function SP(t){return new this(t).log(10)}function bP(){return Wy(this,arguments,"lt")}function TP(){return Wy(this,arguments,"gt")}function RP(t,r){return new this(t).mod(r)}function EP(t,r){return new this(t).mul(r)}function LP(t,r){return new this(t).pow(r)}function AP(t){var r,e,n,i,o=0,a=new this(1),l=[];if(t===void 0?t=this.precision:pt(t,1,Jr),n=Math.ceil(t/q),this.crypto)if(crypto.getRandomValues)for(r=crypto.getRandomValues(new Uint32Array(n));o<n;)i=r[o],i>=429e7?r[o]=crypto.getRandomValues(new Uint32Array(1))[0]:l[o++]=i%1e7;else if(crypto.randomBytes){for(r=crypto.randomBytes(n*=4);o<n;)i=r[o]+(r[o+1]<<8)+(r[o+2]<<16)+((r[o+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(r,o):(l.push(i%1e7),o+=4);o=n/4}else throw Error(Ny);else for(;o<n;)l[o++]=Math.random()*1e7|0;for(n=l[--o],t%=q,n&&t&&(i=De(10,q-t),l[o]=(n/i|0)*i);l[o]===0;o--)l.pop();if(o<0)e=0,l=[0];else{for(e=-1;l[0]===0;e-=q)l.shift();for(n=1,i=l[0];i>=10;i/=10)n++;n<q&&(e-=q-n)}return a.e=e,a.d=l,a}function MP(t){return Y(t=new this(t),t.e+1,this.rounding)}function IP(t){return t=new this(t),t.d?t.d[0]?t.s:0*t.s:t.s||NaN}function OP(t){return new this(t).sin()}function BP(t){return new this(t).sinh()}function DP(t){return new this(t).sqrt()}function NP(t,r){return new this(t).sub(r)}function PP(){var t=0,r=arguments,e=new this(r[t]);for(Z=!1;e.s&&++t<r.length;)e=e.plus(r[t]);return Z=!0,Y(e,this.precision,this.rounding)}function FP(t){return new this(t).tan()}function HP(t){return new this(t).tanh()}function zP(t){return Y(t=new this(t),t.e+1,1)}M[Symbol.for("nodejs.util.inspect.custom")]=M.toString;M[Symbol.toStringTag]="Decimal";var Kt=M.constructor=$y(ks);wa=new Kt(wa);ma=new Kt(ma);var On,Yy=function(t){return typeof t=="number"?Number.isNaN(t):t&&typeof t=="string"?Number.isNaN(Number(t)):!0},Pf=function(t,r,e){return e===void 0&&(e=!1),t!=null&&t.length?t.reduce(function(n,i){var o=K(i,r),a=Yy(o);if(e&&a)return n;var l=a?0:o;return n.push(new Kt(l)),n},[]):[]},Uy=function(t,r){var e=Pf(t,r);return e.length?Kt.sum.apply(Kt,P([],A(e),!1)).toNumber():0},Hc=function(t,r,e){var n=Pf(r,e,!0);if(n!=null&&n.length)return Kt[t].apply(Kt,P([],A(n),!1)).toNumber()},WP=function(t,r){var e=Pf(t,r);return e!=null&&e.length?Kt.sum.apply(Kt,P([],A(e),!1)).dividedBy(e.length).toNumber():0},kP=(On={},On[sn.SUM]=Uy,On[sn.MIN]=function(t,r){return Hc("min",t,r)},On[sn.MAX]=function(t,r){return Hc("max",t,r)},On[sn.AVG]=WP,On),GP=function(t){return pe(t)&&"values"in t},$P=function(t){var r=t.spreadsheet,e=t.position,n=t.tooltipContainer,i=t.autoAdjustBoundary,o=r.getCanvasElement(),a=e.x+cc.x,l=e.y+cc.y;if(!i||!o)return{x:a,y:l};var s=i==="body",u=r.facet.panelBBox,f=u.maxX,h=u.maxY,d=r.options,c=d.width,v=d.height,p=o.getBoundingClientRect(),g=p.top,y=p.left,C=n.getBoundingClientRect(),w=C.width,m=C.height,_=document.body.getBoundingClientRect(),b=_.width,T=_.height,E=s?b:Math.min(c,f)+y,L=s?T:Math.min(v,h)+g;return a+w>=E&&(a=E-w),l+m>=L&&(l=L-m),{x:a,y:l}},YP=function(t){return S({operator:{onClick:Oa,menus:[]},enterable:!0,enableFormat:!0},t)},Us=function(t){return S(S({},t==null?void 0:t.colQuery),t==null?void 0:t.rowQuery)},Po=function(t,r){var e;if(t){var n=r.style,i=r.className,o=i===void 0?[]:i,a=r.visible;if(n&&Object.assign(t.style,n),o.length){var l=o.filter(Boolean);(e=t.classList).add.apply(e,P([],A(l),!1))}t.classList.toggle(H4,a),t.classList.toggle(z4,!a)}},UP=function(t){var r=it(t)&&Number.isNaN(t),e=t==="";return Fe(t)||r||e?"-":t},Ff=function(t,r){var e,n=(e=t==null?void 0:t.dataSet)===null||e===void 0?void 0:e.getFieldFormatter(r);return function(i,o){return UP(n(i,o))}},Uo=function(t,r){var e,n=r.data,i=r.field,o=r.valueField,a=r.useCompleteDataForFormatter,l=a===void 0?!0:a,s=(e=t==null?void 0:t.dataSet)===null||e===void 0?void 0:e.getFieldName(i),u=Ff(t,i),f=pe(n[i])?JSON.stringify(n[i]):n[i],h=u(o||f,l?n:void 0);return{name:s,value:h}},zc=function(t,r,e){var n=Mr(Nn([],r),function(o){return o!==re&&e[o]}),i=oe(n,function(o){return Uo(t,{data:e,field:o,useCompleteDataForFormatter:!1})});return i},XP=function(t,r,e){var n,i,o,a,l=(e||{}).isTotals,s=[],u=[];if(r){var f=(i=(n=t==null?void 0:t.dataSet)===null||n===void 0?void 0:n.fields)===null||i===void 0?void 0:i.columns,h=(a=(o=t==null?void 0:t.dataSet)===null||o===void 0?void 0:o.fields)===null||a===void 0?void 0:a.rows;s=zc(t,ci(f||[]),r),u=zc(t,h,r)}return D(s)&&D(u)&&l&&(s=[{value:He("总计")}]),{cols:s,rows:u}},VP=function(t,r,e){if(r){var n=e.isTotals,i=r[re],o=r[i],a=[];if(n)a.push(Uo(t,{data:r,field:i,valueField:K(r,dt)}));else if(GP(o)&&t.getTooltipDataItemMappingCallback()){var l=yy(r,t.getTooltipDataItemMappingCallback());J(l,function(s,u){a.push(Uo(t,{data:l,field:u}))})}else a.push(Uo(t,{data:r,field:i}));return a}},qP=function(t,r,e){var n;if(e)return He("总计");var i=(n=t==null?void 0:t.dataSet)===null||n===void 0?void 0:n.getFieldName(r);return i&&i!=="undefined"?i:""},Wc=function(t,r,e){e===void 0&&(e=!0);var n=[];return J(r,function(i,o){J(t,function(a){!e&&a.colIndex!==-1?n.push([o,a.colIndex]):e&&a.rowIndex!==-1&&n.push([a.rowIndex,o])})}),n},KP=function(t,r){var e,n=r.rowLeafNodes,i=r.colLeafNodes,o=t.interaction.getState(),a=o.nodes,l=a===void 0?[]:a,s=o.cells,u=s===void 0?[]:s,f=(e=u==null?void 0:u[0])===null||e===void 0?void 0:e.type,h=l.filter(function(d){return d==null?void 0:d.isLeaf});return f===N.COL_CELL?Wc(h,n,!1):f===N.ROW_CELL?Wc(h,i):[]},ZP=function(t,r,e){var n,i=(n=t.facet)===null||n===void 0?void 0:n.layoutResult,o=function(s){var u=r==null?void 0:r.getMeta(),f=u==null?void 0:u.isTotals,h=(r==null?void 0:r.cellType)===N.COL_CELL,d=(r==null?void 0:r.cellType)===N.ROW_CELL;if(!h&&!d)return!1;var c=i.colNodes.find(function(g){return g.colIndex===s.colIndex}),v=i.rowNodes.find(function(g){return g.rowIndex===s.rowIndex}),p=h?v==null?void 0:v.isTotals:c==null?void 0:c.isTotals;return!f&&(s==null?void 0:s.isTotals)||f&&p};if(e){var a=KP(t,i);return Ut(oe(a,function(s){var u=A(s,2),f=u[0],h=u[1],d=i.getCellMeta(f,h);if(!o(d))return(d==null?void 0:d.data)||Us(d)}))}var l=t.interaction.getCells();return l.filter(function(s){var u=i.getCellMeta(s.rowIndex,s.colIndex);return!o(u)}).map(function(s){var u=i.getCellMeta(s.rowIndex,s.colIndex);return(u==null?void 0:u.data)||Us(u)})},jP=function(t){var r=t.spreadsheet,e=t.targetCell,n=t.options,i=n===void 0?{}:n,o=[],a={},l=r.isTableMode();if(l&&(i!=null&&i.showSingleTips)){var s=e.getMeta(),u=s!=null&&s.field?r.dataSet.getMultiData({field:s.field}):[r.dataSet.getRowData(s)];return[{selectedData:u,name:"",value:""}]}var f=ZP(r,e,i.showSingleTips);return J(f,function(h){var d;a[h==null?void 0:h[re]]?(d=a[h==null?void 0:h[re]])===null||d===void 0||d.push(h):a[h==null?void 0:h[re]]=[h]}),lg(a,function(h,d){var c,v=qP(r,d,i==null?void 0:i.isTotals),p="",g="";if(Ya(h,function(_){return Yy(K(_,dt))})){var y=r.options.placeholder,C=In(a,y);p=C,g=C}else{var w=Ff(r,d),m=Uy(h,dt);g=m,p=(c=w==null?void 0:w(m,h))!==null&&c!==void 0?c:parseFloat(m.toPrecision(sp))}o.push({selectedData:h,name:v,value:p,originValue:g})}),o},QP=function(t){if(t){var r=t.getMeta();if(!r.isTotals){var e=Je(r.spreadsheet.dataCfg.meta,{field:r.field||r.value||r.valueField}),n=e==null?void 0:e.field;return r.spreadsheet.dataSet.getFieldDescription(n)}}},JP=function(t){var r=t.spreadsheet,e=t.cellInfos,n=e===void 0?[]:e,i=t.options,o=i===void 0?{}:i,a=t.targetCell,l=null,s=null,u=null,f=QP(a),h=n[0]||{};if(!(o!=null&&o.hideSummary))l=jP({spreadsheet:r,options:o,targetCell:a});else if(o.showSingleTips){var d=Ff(r,h.valueField),c=d(h.value),v=o.enableFormat?r.dataSet.getFieldName(h.value)||c:r.dataSet.getFieldName(h.valueField);h.name=v||""}else s=XP(r,h,o),u=VP(r,h,o);var p=h||{},g=p.interpretation,y=p.infos,C=p.tips,w=p.name;return{summaries:l,interpretation:g,infos:y,tips:C,name:w,headInfo:s,details:u,description:f}},e9=function(t){return oe(t,function(r){var e=r.getMeta();return Bp({},e.query||{},xg(e,["colIndex","rowIndex"]))})},Hf=function(t){if(!t.interaction.isSelectedState())return[];var r=t.dataCfg.fields.valueInCols;return t.interaction.getCells().reduce(function(e,n){var i=t.facet.layoutResult.getCellMeta(n==null?void 0:n.rowIndex,n==null?void 0:n.colIndex),o=Us(i);if(D(i)||D(o))return[];var a=S(S({},o),{colIndex:r?i.colIndex:null,rowIndex:r?null:i.rowIndex}),l=e.find(function(s){return Ue(a,s)});return l||e.push(a),e},[])},t9=function(t,r){t===void 0&&(t={});var e=function(l){return Jt(t,l)},n=t.col,i=t.row,o=t.data,a=t.corner;return r===N.COL_CELL?e(n):r===N.ROW_CELL?e(i):r===N.DATA_CELL?e(o):r===N.CORNER_CELL?e(a):S({},t)},zf=function(t,r){var e;if(!(!r||!t)){var n=(e=t.getCellType)===null||e===void 0?void 0:e.call(t,r==null?void 0:r.target);return t9(t.options.tooltip,n)}},Xy=function(t,r){var e=r.defaultMenus,n=e===void 0?[]:e,i=r.cell,o=function(l){return l===void 0&&(l=[]),l.filter(function(s){var u;return Xe(s.visible)?s.visible(i):(u=s.visible)!==null&&u!==void 0?u:!0}).map(function(s){return s.children&&(s.children=o(s.children)),s})},a=o(t.menus);return{onClick:t.onClick,menus:Ut(P(P([],A(n),!1),A(a),!1))}},r9=function(t,r){for(var e=!1,n=r;n&&n!==document.body;){if(t===n){e=!0;break}n=n.parentElement}return e},n9=function(t){t.store.set(ra,pu)},i9=function(t,r){var e=t.store.get(ra,pu);t.store.set(ra,S(S({},e),r))},o9=function(t,r){var e=t.store.get(ra,pu);return e[r]},Vy=function(){function t(r){var e=this;this.displayFormattedValueMap=new Map,this.getFieldMeta=Ln(function(n,i){return Je(e.meta||i,function(o){return o.field===n})}),this.spreadsheet=r}return t.prototype.getFieldName=function(r){var e=K(this.getFieldMeta(r,this.meta),"name",r);return M5(e)},t.prototype.getFieldFormatter=function(r){return K(this.getFieldMeta(r,this.meta),"formatter",st)},t.prototype.getFieldDescription=function(r){return K(this.getFieldMeta(r,this.meta),"description")},t.prototype.setDataCfg=function(r){this.getFieldMeta.cache.clear();var e=this.processDataCfg(r),n=e.fields,i=e.meta,o=e.data,a=e.totalData,l=e.sortParams,s=e.filterParams;this.fields=n,this.meta=i,this.originData=o,this.totalData=a,this.sortParams=l,this.filterParams=s,this.displayData=this.originData,this.indexesData={}},t.prototype.processMeta=function(r,e){var n,i;return r===void 0&&(r=[]),P(P([],A(r),!1),[s6(r,(i=(n=this.spreadsheet)===null||n===void 0?void 0:n.options)===null||i===void 0?void 0:i.cornerExtraFieldText,e)],!1)},t.prototype.getDisplayDataSet=function(){return this.displayData||[]},t.prototype.isEmpty=function(){return D(this.getDisplayDataSet())},t.prototype.getEmptyViewIndexes=function(){return[]},t.prototype.getValueRangeByField=function(r){var e,n=o9(this.spreadsheet,r);if(n)return n;var i=Ut(oe(this.originData,function(a){var l=a[r];return Fe(l)?null:Number.parseFloat(l)})),o={maxValue:jn(i),minValue:tf(i)};return i9(this.spreadsheet,(e={},e[r]=o,e)),o},t.prototype.moreThanOneValue=function(){var r,e;return((e=(r=this.fields)===null||r===void 0?void 0:r.values)===null||e===void 0?void 0:e.length)>1},t}(),Xs=function(){function t(r){this.extraField=r}return t.createProxyData=function(r,e){return new Proxy(r,new t(e))},t.createProxyDataList=function(r,e){return e.map(function(n){return t.createProxyData(r,n)})},t.prototype.get=function(r,e){return e===cu?r:e===re?this.extraField:e===dt?r[this.extraField]:r[e]},t.prototype.has=function(r,e){return e===re||e===dt?!0:e in r},t.prototype.ownKeys=function(r){return Object.keys(r).concat(re,dt)},t.prototype.getOwnPropertyDescriptor=function(r,e){return e===re||e===dt?{configurable:!0,enumerable:!0}:Object.getOwnPropertyDescriptor(r,e)},t}(),Vs=function(t){H(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.handleDimensionValuesSort=function(){J(e.sortParams,function(n){var i=n.sortFieldId,o=n.sortByMeasure;if(i){var a=P([],A(e.sortedDimensionValues[i]||[]),!1),l=xN({dataSet:e,sortParam:n,originValues:a,isSortByMeasure:!D(o)});e.sortedDimensionValues[i]=l,e.handlePivotMetaSort(i,l)}})},e.getTotalStatus=function(n){var i=e.fields,o=i.columns,a=i.rows,l=function(u,f){if(f){var h=Je(u,function(d){return!ms(n,d)});return h&&h!==fi(u)}return Ya(u,function(d){return!ms(n,d)})},s=function(u,f){return f?u.filter(function(h){return h!==re}):u};return{isRowTotal:l(s(a,!e.spreadsheet.isValueInCols())),isRowSubTotal:l(a,!0),isColTotal:l(s(o,e.spreadsheet.isValueInCols())),isColSubTotal:l(o,!0)}},e}return r.prototype.getExistValuesByDataItem=function(e,n){return uy(e,n)},r.prototype.setDataCfg=function(e){t.prototype.setDataCfg.call(this,e);var n=this.fields.rows;this.sortedDimensionValues={},this.rowPivotMeta=new Map,this.colPivotMeta=new Map,this.dimensionValuesCache=new Map,this.transformIndexesData(this.originData.concat(this.totalData),n),this.handleDimensionValuesSort()},r.prototype.transformIndexesData=function(e,n){var i=this,o=this.fields,a=o.columns,l=o.values,s=o.valueInCols,u;return rr.getInstance().debugCallback(q4,function(){u=l6({rows:n,columns:a,values:l,valueInCols:s,data:e,indexesData:i.indexesData,sortedDimensionValues:i.sortedDimensionValues,rowPivotMeta:i.rowPivotMeta,colPivotMeta:i.colPivotMeta,getExistValuesByDataItem:i.getExistValuesByDataItem}),i.indexesData=u.indexesData,i.rowPivotMeta=u.rowPivotMeta,i.colPivotMeta=u.colPivotMeta,i.sortedDimensionValues=u.sortedDimensionValues}),u},r.prototype.transformDrillDownData=function(e,n,i){var o=this,a,l=Ge.getFieldPath(i,!0),s=P(P([],A(l),!1),[e],!1),u=this.spreadsheet.store,f=i==null?void 0:i.id,h=(a=u.get("drillDownIdPathMap"))!==null&&a!==void 0?a:new Map;h.has(f)&&(J(h.get(f),function(c){Ls(o.indexesData,c)}),xc(this.rowPivotMeta,f));var d=this.transformIndexesData(n,s).paths;h.set(f,d),u.set("drillDownIdPathMap",h)},r.prototype.clearDrillDownData=function(e){var n=this,i=this.spreadsheet.store,o=i.get("drillDownIdPathMap");if(!o)return!1;var a=i.get("drillDownDataCache",[]);if(e){var l=o.get(e);l&&J(l,function(c){Ls(n.indexesData,c)}),xc(this.rowPivotMeta,e),o.delete(e);var s=Mr(a,function(c){return o.has(c==null?void 0:c.rowId)});i.set("drillDownDataCache",s);var u=s.map(function(c){return c==null?void 0:c.drillLevel}),f=i.get("drillDownFieldInLevel",[]),h=f.filter(function(c){return ot(u,c==null?void 0:c.drillLevel)});i.set("drillDownFieldInLevel",h)}else{o.clear();var d=this.spreadsheet.store.get("originalDataCfg");D(d)||this.spreadsheet.setDataCfg(d),this.spreadsheet.store.set("drillItemsNum",-1),this.spreadsheet.store.set("drillDownDataCache",[]),this.spreadsheet.store.set("drillDownFieldInLevel",[])}return i.set("drillDownIdPathMap",o),!0},r.prototype.handlePivotMetaSort=function(e,n){var i=this.fields,o=i.rows,a=i.columns;ot(o,e)?this.rowPivotMeta=Ic({pivotMeta:this.rowPivotMeta,dimensions:o,sortFieldId:e,sortedDimensionValues:n}):ot(a,e)&&(this.colPivotMeta=Ic({pivotMeta:this.colPivotMeta,dimensions:a,sortFieldId:e,sortedDimensionValues:n}))},r.prototype.processDataCfg=function(e){var n=e.data,i=e.meta,o=i===void 0?[]:i,a=e.fields,l=e.sortParams,s=l===void 0?[]:l,u=e.totalData,f=a.columns,h=a.rows,d=a.values,c=a.valueInCols,v=a.customValueOrder,p=f,g=h;c?p=this.isCustomMeasuresPosition(v)?this.handleCustomMeasuresOrder(v,p):mr(P(P([],A(f),!1),[re],!1)):g=this.isCustomMeasuresPosition(v)?this.handleCustomMeasuresOrder(v,g):mr(P(P([],A(h),!1),[re],!1));var y=this.processMeta(o,He("数值"));return{data:n,totalData:u,meta:y,fields:S(S({},a),{rows:g,columns:p,values:d}),sortParams:s}},r.prototype.getFieldsAndPivotMetaByField=function(e){var n=this.fields||{},i=n.rows,o=i===void 0?[]:i,a=n.columns,l=a===void 0?[]:a;return o.includes(e)?{dimensions:o,pivotMeta:this.rowPivotMeta}:l.includes(e)?{dimensions:l,pivotMeta:this.colPivotMeta}:{}},r.prototype.getDimensionValues=function(e,n){n===void 0&&(n={});var i=this.getFieldsAndPivotMetaByField(e),o=i.pivotMeta,a=i.dimensions;if(!o||!a)return[];var l=D(n);if(this.dimensionValuesCache.has(e)&&l)return this.dimensionValuesCache.get(e);var s=nn(n,a,zo),u=fy({pivotMeta:o,dimensionValues:s,fields:a,fieldIdx:qa(a,e),queryType:At.DetailOnly,sortedDimensionValues:this.sortedDimensionValues}),f=mr(u.map(function(h){return h.value}));return l&&this.dimensionValuesCache.set(e,f),f},r.prototype.getTotalValue=function(e,n){var i,o=this.spreadsheet.options,a=Eg(n),l=a?n:this.getTotalStatus(e),s=o6(l,o==null?void 0:o.totals)||{},u=s.aggregation,f=s.calcFunc,h=D(o==null?void 0:o.totals)&&!this.spreadsheet.isHierarchyTreeType()?sn.SUM:"",d=kP[u||h];if(d||f){var c=this.getMultiData(e,{queryType:At.DetailOnly}),v=void 0;return f?v=f(e,c,this.spreadsheet):d&&(v=d(c,dt)),S(S({},e),(i={},i[dt]=v,i[e[re]]=v,i))}},r.prototype.getCellData=function(e){var n,i,o,a=e||{},l=a.query,s=l===void 0?{}:l,u=a.rowNode,f=a.isTotals,h=f===void 0?!1:f,d=a.totalStatus,c=this.fields,v=c.rows,p=c.columns,g=v,y=(n=this.spreadsheet)===null||n===void 0?void 0:n.store.get("drillDownIdPathMap"),C=Array.from((i=y==null?void 0:y.keys())!==null&&i!==void 0?i:[]).some(function(T){return u==null?void 0:u.id.startsWith(T)});u&&C&&(g=(o=Ge.getFieldPath(u,C))!==null&&o!==void 0?o:v);var w=nn(s,g),m=nn(s,p),_=ga({rowDimensionValues:w,colDimensionValues:m,rowPivotMeta:this.rowPivotMeta,colPivotMeta:this.colPivotMeta,rowFields:g,colFields:p,prefix:pa(g,p)}),b=K(this.indexesData,_);if(b)return Xs.createProxyData(b,s[re]);if(h)return this.getTotalValue(s,d)},r.prototype.getQueryExtraFields=function(e){var n=this.fields.values,i=e[re];return i?ot(n,i)?[i]:[]:n},r.prototype.getMultiData=function(e,n,i,o,a){var l,s,u,f;e===void 0&&(e={}),o===void 0&&(o=[]),a===void 0&&(a=!0),D(e)&&console.warn("query: ".concat(e,` shouldn't be empty, you can get all data from dataCfg if you're intended.
 you should use { EXTRA_FIELD: xxx} as least if you want query all specific value data`));var h=pe(n)?n:{queryType:a?At.All:At.DetailOnly,drillDownFields:o},d=h.drillDownFields,c=d===void 0?[]:d,v=h.queryType,p=v===void 0?At.All:v,g=this.fields,y=g.rows,C=g.columns,w=D(c)?y:y.concat(c),m=nn(e,w,zo),_=nn(e,C,zo),b=f6({rowDimensionValues:m,colDimensionValues:_,rowPivotMeta:this.rowPivotMeta,colPivotMeta:this.colPivotMeta,rowFields:w,colFields:C,sortedDimensionValues:this.sortedDimensionValues,queryType:p}),T=b.rowQueries,E=b.colQueries,L=pa(w,C),F=[];try{for(var I=Ot(T),B=I.next();!B.done;B=I.next()){var k=B.value;try{for(var U=(u=void 0,Ot(E)),O=U.next();!O.done;O=U.next()){for(var z=O.value,ue=ga({rowDimensionValues:k,colDimensionValues:z,rowPivotMeta:this.rowPivotMeta,colPivotMeta:this.colPivotMeta,rowFields:w,colFields:C,prefix:L}),le=!1,te=this.indexesData,Ce=function(he){var me=ue[he];le?Vi(me)?te=h6(te,p):te=Ut(oe(te,function(Ie){return Ie==null?void 0:Ie[me]})):Vi(me)?(le=!0,te=Ut([te]),he--):te=te==null?void 0:te[me],fe=he},fe,we=0;we<ue.length;we++)Ce(we),we=fe;X(te)?F.push.apply(F,P([],A(te),!1)):te&&F.push(te)}}catch(he){u={error:he}}finally{try{O&&!O.done&&(f=U.return)&&f.call(U)}finally{if(u)throw u.error}}}}catch(he){l={error:he}}finally{try{B&&!B.done&&(s=I.return)&&s.call(I)}finally{if(l)throw l.error}}var Ee=this.getQueryExtraFields(e);return so(mr(F),function(he){return he?Xs.createProxyDataList(he,Ee):[]})},r.prototype.getFieldFormatter=function(e,n){return e===lr?this.getFieldFormatterForTotalValue(n):t.prototype.getFieldFormatter.call(this,e)},r.prototype.getFieldFormatterForTotalValue=function(e){var n;return!this.spreadsheet.isValueInCols()&&e&&(n=K(e.rowQuery,re)),n=n??K(this.fields.values,0),t.prototype.getFieldFormatter.call(this,n)},r.prototype.handleCustomMeasuresOrder=function(e,n){var i=mr(P([],A(n),!1));return n.length>=e?(i.splice(e,0,re),i):P(P([],A(i),!1),[re],!1)},r.prototype.isCustomMeasuresPosition=function(e){return it(e)},r.prototype.getRowData=function(e){return this.getMultiData(e.rowQuery)},r}(Vy),a9=function(t){H(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.getCellData=function(e){var n=e.query,i=this.fields,o=i.rows,a=i.columns,l=nn(n,o),s=nn(n,a),u=ga({rowDimensionValues:l,colDimensionValues:s,rowPivotMeta:this.rowPivotMeta,colPivotMeta:this.colPivotMeta,rowFields:o,colFields:a,prefix:pa(o,a)}),f=K(this.indexesData,u);return f&&Xs.createProxyData(f,n[re])},r.prototype.processDataCfg=function(e){var n=e.meta,i=this.processMeta(n,He("指标"));return S(S({},e),{meta:i,fields:S(S({},e.fields),{rows:[re],valueInCols:!1})})},r}(Vs),l9=function(t){H(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.handleDimensionValueFilter=function(){J(e.filterParams,function(n){var i=n.filterKey,o=n.filteredValues,a=n.customFilter,l=new Set(o),s=function(f){return!l.has(f[i])},u=Mr(e.displayData,function(f){return a?a(f)&&s(f):s(f)});e.displayData=e.getDisplayData(u)})},e.handleDimensionValuesSort=function(){J(e.sortParams,function(n){var i,o=n.sortFieldId,a=n.sortBy,l=n.sortFunc,s=n.sortMethod,u=n.query;if(o){var f=e.displayData,h=[];if(u){var d=[];f.forEach(function(C){for(var w=Object.keys(u),m=!0,_=0;_<w.length;_++){var b=w[_];if(C[b]!==u[b]){m=!1,h.push(C);break}}m&&d.push(C)}),f=d}var c=f;if(l)c=l(S(S({},n),{data:f}));else if(a&&!Xe(a)){var v=P([],A(a),!1).reverse();c=f.sort(function(C,w){var m=v.indexOf(C[o]),_=v.indexOf(w[o]);return _-m})}else if(vi(s)||Of(s)){var p=In(e.spreadsheet,(i=e.spreadsheet.options)===null||i===void 0?void 0:i.placeholder),g=Xe(a)?a:null,y=function(C){return C[o]===p?Number.MIN_VALUE:C[o]};c=af(f,[g||y],[s.toLocaleLowerCase()])}h.length&&(c=P(P([],A(c),!1),A(h),!1)),e.displayData=e.getDisplayData(c)}})},e}return r.prototype.processDataCfg=function(e){return e},r.prototype.setDataCfg=function(e){t.prototype.setDataCfg.call(this,e),this.handleDimensionValueFilter(),this.handleDimensionValuesSort()},r.prototype.getStartFrozenRows=function(e){var n=(this.spreadsheet.options||{}).frozenRowCount;return n?e.slice(0,n):[]},r.prototype.getEndFrozenRows=function(e){var n=(this.spreadsheet.options||{}).frozenTrailingRowCount;return n?e.slice(-n):[]},r.prototype.getDisplayData=function(e){var n=this.getStartFrozenRows(e),i=this.getEndFrozenRows(e),o=e.slice(n.length||0,-i.length||void 0);return P(P(P([],A(n),!1),A(o),!1),A(i),!1)},r.prototype.getDimensionValues=function(){return[]},r.prototype.getCellData=function(e){var n=e.query;if(!(this.displayData.length===0&&n.rowIndex===0)){var i=this.displayData[n.rowIndex];return!_n(n,"field")||!pe(i)?i:i[n.field]}},r.prototype.getMultiData=function(e){if(!e)return this.displayData;var n=this.displayData[e.rowIndex]?[this.displayData[e.rowIndex]]:this.displayData;return _n(e,"field")?n.map(function(i){return i[e.field]}):n},r.prototype.getRowData=function(e){return this.getCellData({query:{rowIndex:e.rowIndex}})},r}(Vy);function Wf(t,r,e){t.prototype=r.prototype=e,e.constructor=t}function qy(t,r){var e=Object.create(t.prototype);for(var n in r)e[n]=r[n];return e}function yo(){}var Qi=.7,_a=1/Qi,Yn="\\s*([+-]?\\d+)\\s*",Ji="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",ar="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",s9=/^#([0-9a-f]{3,8})$/,u9=new RegExp("^rgb\\("+[Yn,Yn,Yn]+"\\)$"),f9=new RegExp("^rgb\\("+[ar,ar,ar]+"\\)$"),h9=new RegExp("^rgba\\("+[Yn,Yn,Yn,Ji]+"\\)$"),d9=new RegExp("^rgba\\("+[ar,ar,ar,Ji]+"\\)$"),c9=new RegExp("^hsl\\("+[Ji,ar,ar]+"\\)$"),v9=new RegExp("^hsla\\("+[Ji,ar,ar,Ji]+"\\)$"),kc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Wf(yo,eo,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Gc,formatHex:Gc,formatHsl:p9,formatRgb:$c,toString:$c});function Gc(){return this.rgb().formatHex()}function p9(){return Ky(this).formatHsl()}function $c(){return this.rgb().formatRgb()}function eo(t){var r,e;return t=(t+"").trim().toLowerCase(),(r=s9.exec(t))?(e=r[1].length,r=parseInt(r[1],16),e===6?Yc(r):e===3?new mt(r>>8&15|r>>4&240,r>>4&15|r&240,(r&15)<<4|r&15,1):e===8?Fo(r>>24&255,r>>16&255,r>>8&255,(r&255)/255):e===4?Fo(r>>12&15|r>>8&240,r>>8&15|r>>4&240,r>>4&15|r&240,((r&15)<<4|r&15)/255):null):(r=u9.exec(t))?new mt(r[1],r[2],r[3],1):(r=f9.exec(t))?new mt(r[1]*255/100,r[2]*255/100,r[3]*255/100,1):(r=h9.exec(t))?Fo(r[1],r[2],r[3],r[4]):(r=d9.exec(t))?Fo(r[1]*255/100,r[2]*255/100,r[3]*255/100,r[4]):(r=c9.exec(t))?Vc(r[1],r[2]/100,r[3]/100,1):(r=v9.exec(t))?Vc(r[1],r[2]/100,r[3]/100,r[4]):kc.hasOwnProperty(t)?Yc(kc[t]):t==="transparent"?new mt(NaN,NaN,NaN,0):null}function Yc(t){return new mt(t>>16&255,t>>8&255,t&255,1)}function Fo(t,r,e,n){return n<=0&&(t=r=e=NaN),new mt(t,r,e,n)}function g9(t){return t instanceof yo||(t=eo(t)),t?(t=t.rgb(),new mt(t.r,t.g,t.b,t.opacity)):new mt}function qs(t,r,e,n){return arguments.length===1?g9(t):new mt(t,r,e,n??1)}function mt(t,r,e,n){this.r=+t,this.g=+r,this.b=+e,this.opacity=+n}Wf(mt,qs,qy(yo,{brighter:function(t){return t=t==null?_a:Math.pow(_a,t),new mt(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=t==null?Qi:Math.pow(Qi,t),new mt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Uc,formatHex:Uc,formatRgb:Xc,toString:Xc}));function Uc(){return"#"+Ol(this.r)+Ol(this.g)+Ol(this.b)}function Xc(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}function Ol(t){return t=Math.max(0,Math.min(255,Math.round(t)||0)),(t<16?"0":"")+t.toString(16)}function Vc(t,r,e,n){return n<=0?t=r=e=NaN:e<=0||e>=1?t=r=NaN:r<=0&&(t=NaN),new er(t,r,e,n)}function Ky(t){if(t instanceof er)return new er(t.h,t.s,t.l,t.opacity);if(t instanceof yo||(t=eo(t)),!t)return new er;if(t instanceof er)return t;t=t.rgb();var r=t.r/255,e=t.g/255,n=t.b/255,i=Math.min(r,e,n),o=Math.max(r,e,n),a=NaN,l=o-i,s=(o+i)/2;return l?(r===o?a=(e-n)/l+(e<n)*6:e===o?a=(n-r)/l+2:a=(r-e)/l+4,l/=s<.5?o+i:2-o-i,a*=60):l=s>0&&s<1?0:a,new er(a,l,s,t.opacity)}function y9(t,r,e,n){return arguments.length===1?Ky(t):new er(t,r,e,n??1)}function er(t,r,e,n){this.h=+t,this.s=+r,this.l=+e,this.opacity=+n}Wf(er,y9,qy(yo,{brighter:function(t){return t=t==null?_a:Math.pow(_a,t),new er(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?Qi:Math.pow(Qi,t),new er(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,r=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,n=e+(e<.5?e:1-e)*r,i=2*e-n;return new mt(Bl(t>=240?t-240:t+120,i,n),Bl(t,i,n),Bl(t<120?t+240:t-120,i,n),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(t===1?")":", "+t+")")}}));function Bl(t,r,e){return(t<60?r+(e-r)*t/60:t<180?e:t<240?r+(e-r)*(240-t)/60:r)*255}function kf(t){return function(){return t}}function C9(t,r){return function(e){return t+e*r}}function w9(t,r,e){return t=Math.pow(t,e),r=Math.pow(r,e)-t,e=1/e,function(n){return Math.pow(t+n*r,e)}}function m9(t){return(t=+t)==1?Zy:function(r,e){return e-r?w9(r,e,t):kf(isNaN(r)?e:r)}}function Zy(t,r){var e=r-t;return e?C9(t,e):kf(isNaN(t)?r:t)}var qc=function t(r){var e=m9(r);function n(i,o){var a=e((i=qs(i)).r,(o=qs(o)).r),l=e(i.g,o.g),s=e(i.b,o.b),u=Zy(i.opacity,o.opacity);return function(f){return i.r=a(f),i.g=l(f),i.b=s(f),i.opacity=u(f),i+""}}return n.gamma=t,n}(1);function jy(t,r){r||(r=[]);var e=t?Math.min(r.length,t.length):0,n=r.slice(),i;return function(o){for(i=0;i<e;++i)n[i]=t[i]*(1-o)+r[i]*o;return n}}function Qy(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function x9(t,r){return(Qy(r)?jy:Jy)(t,r)}function Jy(t,r){var e=r?r.length:0,n=t?Math.min(e,t.length):0,i=new Array(n),o=new Array(e),a;for(a=0;a<n;++a)i[a]=eC(t[a],r[a]);for(;a<e;++a)o[a]=r[a];return function(l){for(a=0;a<n;++a)o[a]=i[a](l);return o}}function _9(t,r){var e=new Date;return t=+t,r=+r,function(n){return e.setTime(t*(1-n)+r*n),e}}function Ks(t,r){return t=+t,r=+r,function(e){return t*(1-e)+r*e}}function S9(t,r){var e={},n={},i;(t===null||typeof t!="object")&&(t={}),(r===null||typeof r!="object")&&(r={});for(i in r)i in t?e[i]=eC(t[i],r[i]):n[i]=r[i];return function(o){for(i in e)n[i]=e[i](o);return n}}var Zs=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Dl=new RegExp(Zs.source,"g");function b9(t){return function(){return t}}function T9(t){return function(r){return t(r)+""}}function R9(t,r){var e=Zs.lastIndex=Dl.lastIndex=0,n,i,o,a=-1,l=[],s=[];for(t=t+"",r=r+"";(n=Zs.exec(t))&&(i=Dl.exec(r));)(o=i.index)>e&&(o=r.slice(e,o),l[a]?l[a]+=o:l[++a]=o),(n=n[0])===(i=i[0])?l[a]?l[a]+=i:l[++a]=i:(l[++a]=null,s.push({i:a,x:Ks(n,i)})),e=Dl.lastIndex;return e<r.length&&(o=r.slice(e),l[a]?l[a]+=o:l[++a]=o),l.length<2?s[0]?T9(s[0].x):b9(r):(r=s.length,function(u){for(var f=0,h;f<r;++f)l[(h=s[f]).i]=h.x(u);return l.join("")})}function eC(t,r){var e=typeof r,n;return r==null||e==="boolean"?kf(r):(e==="number"?Ks:e==="string"?(n=eo(r))?(r=n,qc):R9:r instanceof eo?qc:r instanceof Date?_9:Qy(r)?jy:Array.isArray(r)?Jy:typeof r.valueOf!="function"&&typeof r.toString!="function"||isNaN(r)?S9:Ks)(t,r)}var vn;(function(t){t.ScrollChange="scroll-change",t.ScrollEnd="scroll-end"})(vn||(vn={}));var Nl=function(t){H(r,t);function r(e){var n=t.call(this,e)||this;n.isMobile=!1,n.eventHandlers=[],n.scrollFrameId=null,n.getCoordinatesName=function(){var c=n.isHorizontal?"x1":"y1",v=n.isHorizontal?"x2":"y2";return{from:c,to:v}},n.getCoordinatesWithBBoxExtraPadding=function(){var c=n.theme.size,v=n.isHorizontal?0:c/2,p=n.isHorizontal?c:c/2;return{start:n.thumbOffset+v,end:n.thumbOffset+n.thumbLen-p}},n.current=function(){var c=n.thumbLen/n.trackLen,v=n.thumbOffset/n.trackLen;return v/(1-c)},n.updateThumbLen=function(c){if(n.thumbLen!==c){n.thumbLen=c;var v=n.getCoordinatesName();n.thumbShape.attr(v.to,n.thumbOffset+c),n.emitScrollChange(n.thumbOffset/(n.trackLen-n.thumbLen)*n.scrollTargetMaxOffset,!1)}},n.updateThumbOffset=function(c,v){var p;v===void 0&&(v=!0);var g=n.validateRange(c),y=n.thumbOffset===g&&g!==0;if(!y){n.thumbOffset=g;var C=n.getCoordinatesName(),w=C.from,m=C.to,_=n.getCoordinatesWithBBoxExtraPadding(),b=_.start,T=_.end;n.thumbShape.attr((p={},p[w]=b,p[m]=T,p)),v&&n.emitScrollChange(g/(n.trackLen-n.thumbLen)*n.scrollTargetMaxOffset,!1)}},n.onlyUpdateThumbOffset=function(c){var v;n.updateThumbOffset(c,!1),(v=n.get("canvas"))===null||v===void 0||v.draw()},n.emitScrollChange=function(c,v){v===void 0&&(v=!0),cancelAnimationFrame(n.scrollFrameId),n.scrollFrameId=requestAnimationFrame(function(){n.emit(vn.ScrollChange,{offset:c,updateThumbOffset:v})})},n.addEventListener=function(c,v,p){return c==null||c.addEventListener(v,p,!1),{remove:function(){c==null||c.removeEventListener(v,p,!1)}}},n.addEvent=function(c,v,p){c.on(v,p),n.eventHandlers.push({target:c,type:v,handler:p})},n.initScrollBar=function(){n.scrollBarGroup=n.createScrollBarGroup(),n.scrollBarGroup.move(n.position.x,n.position.y),n.bindEvents()},n.createScrollBarGroup=function(){var c=n.addGroup({className:n.isHorizontal?"horizontalBar":"verticalBar"});return n.trackShape=n.createTrackShape(c),n.thumbShape=n.createThumbShape(c),c},n.createTrackShape=function(c){var v=n.theme,p=v.lineCap,g=p===void 0?"round":p,y=v.trackColor,C=v.size,w={lineWidth:C,stroke:y,lineCap:g};return n.isHorizontal?c.addShape("line",{attrs:S(S({},w),{x1:0,y1:C/2,x2:n.trackLen,y2:C/2})}):c.addShape("line",{attrs:S(S({},w),{x1:C/2,y1:0,x2:C/2,y2:n.trackLen})})},n.createThumbShape=function(c){var v=n.theme,p=v.size,g=v.lineCap,y=g===void 0?"round":g,C=v.thumbColor,w={lineWidth:p,stroke:C,lineCap:y,cursor:"default"},m=n.getCoordinatesWithBBoxExtraPadding(),_=m.start,b=m.end;return n.isHorizontal?c.addShape("line",{attrs:S(S({},w),{x1:_,y1:p/2,x2:b,y2:p/2})}):c.addShape("line",{attrs:S(S({},w),{x1:p/2,y1:_,x2:p/2,y2:b})})},n.bindEvents=function(){n.on("mousedown",n.onStartEvent(!1)),n.on("mouseup",n.onMouseUp),n.on("touchstart",n.onStartEvent(!0)),n.on("touchend",n.onMouseUp),n.trackShape.on("click",n.onTrackClick),n.thumbShape.on("mouseover",n.onTrackMouseOver),n.thumbShape.on("mouseout",n.onTrackMouseOut)},n.onStartEvent=function(c){return function(v){v.preventDefault(),n.isMobile=c;var p=n.isMobile?K(v,"touches.0",v):v,g=p.clientX,y=p.clientY;n.startPos=n.isHorizontal?g:y,n.bindLaterEvent()}},n.bindLaterEvent=function(){var c=n.get("canvas"),v=document.body,p=[];n.isMobile?(p=[n.addEventListener(v,"touchmove",n.onMouseMove),n.addEventListener(v,"touchend",n.onMouseUp),n.addEventListener(v,"touchcancel",n.onMouseUp)],n.addEvent(c,"touchend",n.onMouseUp),n.addEvent(c,"touchcancel",n.onMouseUp)):(p=[n.addEventListener(v,"mousemove",n.onMouseMove),n.addEventListener(v,"mouseup",n.onMouseUp),n.addEventListener(v,"mouseleave",n.onMouseUp)],n.addEvent(c,"mouseup",n.onMouseUp)),n.clearEvents=function(){p.forEach(function(g){g==null||g.remove()}),J(n.eventHandlers,function(g){var y;(y=g.target)===null||y===void 0||y.off(g.type,g.handler)}),n.eventHandlers.length=0}},n.onTrackClick=function(c){var v=n.isHorizontal?c.x-n.position.x-n.thumbLen/2:c.y-n.position.y-n.thumbLen/2,p=n.validateRange(v);n.updateThumbOffset(p)},n.onMouseMove=function(c){c.preventDefault();var v=n.isMobile?K(c,"touches.0",c):c,p=v.clientX,g=v.clientY,y=n.isHorizontal?p:g,C=y-n.startPos;n.startPos=y,n.updateThumbOffset(n.thumbOffset+C)},n.onMouseUp=function(c){var v;n.emit(vn.ScrollEnd,{}),c.preventDefault(),(v=n.clearEvents)===null||v===void 0||v.call(n)},n.onTrackMouseOver=function(){var c=n.theme,v=c.thumbHoverColor,p=c.hoverSize;n.thumbShape.attr("stroke",v),n.thumbShape.attr("lineWidth",p)},n.onTrackMouseOut=function(){var c=n.theme,v=c.thumbColor,p=c.size;n.thumbShape.attr("stroke",v),n.thumbShape.attr("lineWidth",p)},n.validateRange=function(c){var v=c;return c+n.thumbLen>n.trackLen?v=n.trackLen-n.thumbLen:c+n.thumbLen<n.thumbLen&&(v=0),v};var i=e.isHorizontal,o=i===void 0?!1:i,a=e.trackLen,l=e.thumbLen,s=e.position,u=e.thumbOffset,f=u===void 0?0:u,h=e.theme,d=e.scrollTargetMaxOffset;return n.isHorizontal=o,n.thumbOffset=f,n.trackLen=a,n.thumbLen=l,n.position=s,n.theme=h,n.scrollTargetMaxOffset=d,n.initScrollBar(),n}return r}(hr),tC=function(t,r,e){if(e<=0)return{start:0,end:0};var n=Zn(t,function(o,a){var l=r;return l>=o&&l<t[a+1]},0);n=Math.max(n,0);var i=e===r?n:Zn(t,function(o,a){var l=e;return l>o&&l<=t[a+1]},n);return i=Math.min(i===-1?1/0:i,t.length-2),{start:n,end:i}},E9=function(t,r){var e=r.width,n=r.originalWidth,i=Math.min(n-e,t);return i<0?0:i},Pl=function(t,r,e){var n=Math.min(r-e,t);return n<0?0:n},Ai=function(t,r){if(t===void 0&&(t=[]),D(t))return[];var e=[];return t.forEach(function(n){if(n instanceof r&&e.push(n),n instanceof hr){var i=n.getChildren();i.forEach(function(o){o instanceof r&&e.push(o)})}}),e},rC=function(t,r,e){return e.slice(t,r+1).map(function(n){return n.x+n.width})},cl=function(t,r,e){for(var n=[],i=t;i<r+1;i++)n.push(e.getCellOffsetY(i+1));return n},L9=function(t,r,e,n){var i=cl(t,r,n),o=n.getCellOffsetY(t);return i.map(function(a){return a-o+e})},Kc=function(t,r,e){var n=A(e,4),i=n[0],o=n[1],a=n[2],l=n[3];return t>=i&&t<=o&&r>=a&&r<=l},Zc=function(t){for(var r=A(t,4),e=r[0],n=r[1],i=r[2],o=r[3],a=[],l=e;l<=n;l+=1)for(var s=i;s<=o;s+=1)a.push([l,s]);return a},A9=function(t,r){var e=[],n=[];if(D(t))return D(r)?{add:e,remove:n}:{add:Zc(r),remove:n};if(D(r))return{add:e,remove:Zc(t)};for(var i=A(t,4),o=i[0],a=i[1],l=i[2],s=i[3],u=A(r,4),f=u[0],h=u[1],d=u[2],c=u[3],v=o;v<=a;v++)for(var p=l;p<=s;p++)Kc(v,p,r)||n.push([v,p]);for(var v=f;v<=h;v+=1)for(var p=d;p<=c;p+=1)Kc(v,p,t)||e.push([v,p]);return{add:e,remove:n}},M9=function(t,r){var e=[],n=[];return Object.keys(r).forEach(function(i){var o=A9((t==null?void 0:t[i])||[],r[i]),a=o.add,l=o.remove;e.push.apply(e,P([],A(a),!1)),n.push.apply(n,P([],A(l),!1))}),{add:e,remove:n}},nC=function(){function t(r,e){e===void 0&&(e=!1),this.x=0,this.y=0,this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.width=0,this.height=0,this.originalWidth=0,this.originalHeight=0,this.viewportHeight=0,this.viewportWidth=0,this.facet=r,this.spreadsheet=r.spreadsheet,this.layoutResult=r.layoutResult,e&&this.calculateBBox()}return t}(),iC=function(t){H(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.calculateBBox=function(){var e=this.getCornerBBoxWidth(),n=this.getCornerBBoxHeight();this.width=e,this.height=n,this.maxX=e,this.maxY=n},r.prototype.getCornerBBoxOriginalHeight=function(){var e=this.layoutResult.colsHierarchy,n=this.spreadsheet.options.style.colCfg;return e.sampleNodeForLastLevel?Math.floor(e.height):n==null?void 0:n.height},r.prototype.getCornerBBoxHeight=function(){return this.originalHeight=this.getCornerBBoxOriginalHeight(),this.originalHeight},r.prototype.getCornerBBoxWidth=function(){var e=this.layoutResult.rowsHierarchy;return this.originalWidth=Math.floor(e.width+this.facet.getSeriesNumberWidth()),this.spreadsheet.isScrollContainsRowHeader()?this.originalWidth:this.adjustCornerBBoxWidth()},r.prototype.adjustCornerBBoxWidth=function(){var e=this.layoutResult.colsHierarchy,n=this.spreadsheet.options.width,i=n*Px,o=e==null?void 0:e.width,a=n-this.originalWidth;if(this.originalWidth<=i||o<=a)return this.originalWidth;var l=0,s=n-i;return o<=s?l=this.originalWidth-(o-a):l=i,Math.floor(l)},r}(nC),I9=function(t){H(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.calculateBBox=function(){this.originalWidth=this.facet.getRealWidth(),this.originalHeight=this.facet.getRealHeight();var e=this.facet.cornerBBox,n={x:Math.floor(e.maxX),y:Math.floor(e.maxY)},i=this.spreadsheet.theme.scrollBar.size,o=this.spreadsheet.options,a=o.width,l=o.height,s=Math.max(0,a-n.x),u=Math.max(0,l-n.y-i);this.x=n.x,this.y=n.y,this.width=s,this.height=u,this.viewportHeight=Math.abs(Math.floor(Math.min(u,this.originalHeight))),this.viewportWidth=Math.abs(Math.floor(Math.min(s,this.originalWidth))),this.maxX=n.x+this.viewportWidth,this.maxY=n.y+this.viewportHeight,this.minX=n.x,this.minY=n.y;var f=this.spreadsheet.options,h=f.frozenTrailingColCount,d=f.frozenTrailingRowCount;h>0&&(this.viewportWidth=this.width,this.maxX=n.x+this.width),d>0&&(this.viewportHeight=this.height,this.maxY=n.y+this.height)},r}(nC),Gf=function(t){H(r,t);function r(e){var n=t.call(this,e)||this;return n.isHeaderCellInViewport=function(i,o,a,l){return i+o>=a&&a+l>=i},n.headerConfig=e,n}return r.prototype.getConfig=function(){return this.headerConfig},r.prototype.clearResizeAreaGroup=function(e){var n=this.get("parent"),i=n==null?void 0:n.findById(e);i==null||i.clear()},r.prototype.render=function(e){this.clearResizeAreaGroup(e),this.clear(),this.layout(),this.offset(),this.clip()},r.prototype.onScrollXY=function(e,n,i){this.headerConfig.scrollX=e,this.headerConfig.scrollY=n,this.render(i)},r.prototype.onRowScrollX=function(e,n){this.headerConfig.scrollX=e,this.render(n)},r.prototype.clear=function(){t.prototype.clear.call(this)},r}(hr),$f=function(t){H(r,t);function r(e){var n=t.call(this,e)||this;return n.scrollGroup=n.addGroup({name:Mx,zIndex:Jv}),n}return r.prototype.onColScroll=function(e,n){this.headerConfig.scrollX!==e&&(this.headerConfig.scrollX=e,this.render(n))},r.prototype.clip=function(){var e=this.headerConfig,n=e.width,i=e.height,o=e.scrollX,a=e.spreadsheet,l=a.isFrozenRowHeader();this.scrollGroup.setClip({type:"rect",attrs:{x:l?o:0,y:0,width:l?n:n+o,height:i}})},r.prototype.clear=function(){var e,n;(e=this.scrollGroup)===null||e===void 0||e.clear(),(n=this.background)===null||n===void 0||n.remove(!0)},r.prototype.getCellInstance=function(e,n,i){return new ll(e,n,i)},r.prototype.getCellGroup=function(e){return this.scrollGroup},r.prototype.isColCellInRect=function(e){var n=this.headerConfig,i=n.spreadsheet,o=n.cornerWidth,a=n.width,l=n.scrollX;return a+l>e.x&&l-(i.isFrozenRowHeader()?0:o)<e.x+e.width},r.prototype.layout=function(){var e=this,n=this.headerConfig,i=n.data,o=n.spreadsheet,a=o.options.colCell;J(i,function(l){var s=l;if(e.isColCellInRect(s)){var u=(a==null?void 0:a(s,o,e.headerConfig))||e.getCellInstance(s,o,e.headerConfig);s.belongsCell=u;var f=e.getCellGroup(s);f.add(u)}})},r.prototype.offset=function(){var e=this.headerConfig,n=e.position,i=e.scrollX;ol(this.scrollGroup,n.x-i)},r}(Gf),O9=function(t){H(r,t);function r(e){return t.call(this,e)||this}return r.getCornerHeader=function(e,n,i,o,a,l){var s=e.width,u=e.height,f=n.originalWidth,h=n.originalHeight,d=n.width,c=n.height,v=this.getCornerNodes({x:n.x,y:n.y},f,h,o.rows,o.columns,a.rowsHierarchy,a.colsHierarchy,o.dataSet,i,l);return new r({data:v,position:{x:n.x,y:n.y},width:d,height:c,originalHeight:h,originalWidth:f,viewportWidth:s,viewportHeight:u,hierarchyType:o.hierarchyType,hierarchyCollapse:o.hierarchyCollapse,rows:o.rows,columns:o.columns,seriesNumberWidth:i,spreadsheet:l})},r.getCornerNodes=function(e,n,i,o,a,l,s,u,f,h){var d,c,v,p=[],g=h.options.style.colCfg,y=s==null?void 0:s.sampleNodeForLastLevel,C=(d=y==null?void 0:y.y)!==null&&d!==void 0?d:0,w=(v=(c=y==null?void 0:y.height)!==null&&c!==void 0?c:g==null?void 0:g.height)!==null&&v!==void 0?v:0;if(f){var m=new Ge({id:"",key:Nx,value:He("序号")});m.x=e==null?void 0:e.x,m.y=C,m.width=f,m.height=w,m.isPivotMode=!0,m.spreadsheet=h,m.cornerType=kt.Series,p.push(m)}if(h.isHierarchyTreeType()){var _=this.getTreeCornerText(h),b=new Ge({key:"",id:_,value:_});b.x=e.x+f,b.y=C,b.width=n-f,b.height=w,b.seriesNumberWidth=f,b.isPivotMode=!0,b.spreadsheet=h,b.cornerType=kt.Row,p.push(b)}else l.sampleNodesForAllLevels.forEach(function(T){var E=o[T.level],L=new Ge({key:E,id:E,value:u.getFieldName(E)});L.x=T.x+f,L.y=C,L.width=T.width,L.height=w,L.field=E,L.isPivotMode=!0,L.cornerType=kt.Row,L.spreadsheet=h,p.push(L)});return s.sampleNodesForAllLevels.forEach(function(T){if(T.level<s.maxLevel){var E=a[T.level],L=new Ge({key:E,id:E,value:u.getFieldName(E)});L.x=e.x,L.y=T.y,L.width=n,L.height=T.height,L.field=E,L.isPivotMode=!0,L.cornerType=kt.Col,L.spreadsheet=h,p.push(L)}}),p},r.getTreeCornerText=function(e){var n=e.dataSet.fields.rows,i=n===void 0?[]:n,o=e.options.cornerText;if(o)return o;var a=e.store.get("drillDownFieldInLevel",[]),l=a.map(function(u){return u.drillField}),s=i.filter(function(u){return!ot(l,u)}).map(function(u){return e.dataSet.getFieldName(u)}).join("/");return s},r.prototype.onCorScroll=function(e,n){this.headerConfig.scrollX=e,this.render(n)},r.prototype.destroy=function(){t.prototype.destroy.call(this)},r.prototype.layout=function(){this.renderCells()},r.prototype.renderCells=function(){var e=this,n,i,o,a,l=this.headerConfig,s=l.data,u=l.spreadsheet,f=(i=(n=u==null?void 0:u.facet)===null||n===void 0?void 0:n.cfg)===null||i===void 0?void 0:i.cornerHeader,h=(a=(o=u==null?void 0:u.facet)===null||o===void 0?void 0:o.cfg)===null||a===void 0?void 0:a.cornerCell;if(f){f(this,u,this.headerConfig);return}s.forEach(function(d){var c;h&&(c=h(d,e.headerConfig.spreadsheet,e.headerConfig)),D(c)&&(c=new _N(d,e.headerConfig.spreadsheet,e.headerConfig)),e.add(c)})},r.prototype.offset=function(){var e=this.headerConfig.scrollX;ol(this,-e)},r.prototype.clip=function(){var e=this.headerConfig,n=e.width,i=e.height,o=e.scrollX;this.setClip({type:"rect",attrs:{x:o,y:0,width:n,height:i}})},r.prototype.getNodes=function(){return this.headerConfig.data||[]},r}(Gf),B9=function(t){H(r,t);function r(e){var n=t.call(this,e)||this;return n.render(),n}return r.prototype.layout=function(){this.addCornerBottomBorder(),this.addCornerRightBorder(),this.addSplitLineShadow()},r.prototype.render=function(){this.clear(),this.layout()},r.prototype.onBorderScroll=function(e){this.cfg.scrollX=e;var n=this.cfg.position;xr(this,n.x-e,0),this.render()},r.prototype.onChangeShadowVisibility=function(e,n){this.cfg.showViewportLeftShadow=e>0,this.cfg.showViewportRightShadow=Math.floor(e)<Math.floor(n),this.render()},r.prototype.addCornerRightBorder=function(){var e,n=this.cfg,i=n.isPivotMode;if(i){var o=n.width,a=n.height,l=n.viewportHeight,s=n.position,u=n.spreadsheet,f=(e=u.theme)===null||e===void 0?void 0:e.splitLine,h=s.x+o,d=s.y,c=s.y+a+l;this.addShape("line",{attrs:{x1:h,y1:d,x2:h,y2:c,stroke:f.verticalBorderColor,lineWidth:f.verticalBorderWidth,opacity:f.verticalBorderColorOpacity,lineDash:f.borderDash}})}},r.prototype.addCornerBottomBorder=function(){var e,n=this.cfg,i=n.width,o=n.height,a=n.viewportWidth,l=n.position,s=n.scrollX,u=n.scrollContainsRowHeader,f=n.spreadsheet,h=(e=f.theme)===null||e===void 0?void 0:e.splitLine,d=l.x,c=d+i+a+(u?s:0),v=l.y+o-1;this.addShape("line",{attrs:{x1:d,y1:v,x2:c,y2:v,stroke:h.horizontalBorderColor,lineWidth:h.horizontalBorderWidth,opacity:h.horizontalBorderColorOpacity,lineDash:h.borderDash}})},r.prototype.addSplitLineShadow=function(){var e,n=this.cfg,i=n.isPivotMode,o=n.spreadsheet,a=(e=o.theme)===null||e===void 0?void 0:e.splitLine;!i||!a.showShadow||!o.isFrozenRowHeader()||(this.addSplitLineLeftShadow(),this.addSplitLineRightShadow())},r.prototype.addSplitLineLeftShadow=function(){var e,n,i;if(this.cfg.showViewportLeftShadow){var o=this.cfg,a=o.width,l=o.height,s=o.viewportHeight,u=o.position,f=o.spreadsheet,h=(e=f.theme)===null||e===void 0?void 0:e.splitLine,d=u.x+a,c=u.y;this.addShape("rect",{attrs:{x:d,y:c,width:h.shadowWidth,height:s+l,fill:"l (0) 0:".concat((n=h.shadowColors)===null||n===void 0?void 0:n.left," 1:").concat((i=h.shadowColors)===null||i===void 0?void 0:i.right)}})}},r.prototype.addSplitLineRightShadow=function(){var e,n,i;if(this.cfg.showViewportRightShadow){var o=this.cfg,a=o.width,l=o.height,s=o.viewportHeight,u=o.viewportWidth,f=o.position,h=o.spreadsheet,d=(e=h.theme)===null||e===void 0?void 0:e.splitLine,c=f.x+a+u-d.shadowWidth,v=f.y;this.addShape("rect",{attrs:{x:c,y:v,width:d.shadowWidth,height:s+l,fill:"l (0) 0:".concat((n=d.shadowColors)===null||n===void 0?void 0:n.right," 1:").concat((i=d.shadowColors)===null||i===void 0?void 0:i.left)}})}},r}(hr),Yf=function(t){H(r,t);function r(e){return t.call(this,e)||this}return r.prototype.destroy=function(){t.prototype.destroy.call(this),this.gm&&this.gm.destroy()},r.prototype.rowCellInRect=function(e){var n=this.headerConfig,i=n.width,o=n.viewportHeight,a=n.seriesNumberWidth,l=n.scrollY,s=n.scrollX;return o+l>e.y&&l<e.y+e.height&&i-a+s>e.x&&s-a<e.x+e.width},r.prototype.createCellInstance=function(e){return new go(e,this.headerConfig.spreadsheet,this.headerConfig)},r.prototype.getCellGroup=function(e){return this},r.prototype.getCustomRowCell=function(){var e,n,i=this.headerConfig.spreadsheet;return(n=(e=i==null?void 0:i.facet)===null||e===void 0?void 0:e.cfg)===null||n===void 0?void 0:n.rowCell},r.prototype.layout=function(){var e=this,n=this.headerConfig,i=n.data,o=n.spreadsheet,a=this.getCustomRowCell();J(i,function(l){if(e.rowCellInRect(l)&&l.height!==0){var s=void 0;a&&(s=a(l,o,e.headerConfig)),D(s)&&o.isPivotMode()&&(s=e.createCellInstance(l)),l.belongsCell=s;var u=e.getCellGroup(l);u.add(s)}})},r.prototype.offset=function(){var e=this.headerConfig,n=e.scrollX,i=e.scrollY,o=e.position,a=e.seriesNumberWidth;xr(this,o.x-n+a,o.y-i)},r.prototype.clip=function(){var e=this.headerConfig,n=e.width,i=e.viewportHeight,o=e.scrollX,a=e.scrollY,l=e.seriesNumberWidth;this.setClip({type:"rect",attrs:{x:o-l,y:a,width:n,height:i}})},r}(Gf),oC=function(t){H(r,t);function r(e){var n=t.call(this,e)||this;n.scrollGroup=n.addGroup({name:Bx,zIndex:Jv}),n.frozenHeadGroup=n.addGroup({name:Dx,zIndex:Pi});var i=n.headerConfig,o=i.position,a=i.seriesNumberWidth;return xr(n.frozenHeadGroup,o.x+a,o.y),n}return r.prototype.rowCellInRectXDir=function(e){var n=this.headerConfig,i=n.width,o=n.scrollX,a=n.seriesNumberWidth,l=e.x+a;return i+o>l&&o<l+e.width},r.prototype.rowCellInRectYDir=function(e){var n=this.headerConfig,i=n.viewportHeight,o=n.scrollY,a=e.y-this.getFrozenFirstRowHeight();return i+o>a&&o<a+e.height},r.prototype.rowCellInRect=function(e){var n=this.rowCellInRectXDir(e);return this.isFrozenRow(e)?n:n&&this.rowCellInRectYDir(e)},r.prototype.getCellGroup=function(e){return this.isFrozenRow(e)?this.frozenHeadGroup:this.scrollGroup},r.prototype.offset=function(){var e=this.headerConfig,n=e.scrollX,i=e.scrollY,o=e.position,a=e.seriesNumberWidth,l=o.x-n+a;xr(this.scrollGroup,l,o.y-i),ol(this.frozenHeadGroup,l)},r.prototype.clip=function(){var e=this.headerConfig,n=e.width,i=e.viewportHeight,o=e.scrollX,a=e.scrollY,l=e.seriesNumberWidth,s=o-l;this.scrollGroup.setClip({type:"rect",attrs:{x:s,y:a+this.getFrozenFirstRowHeight(),width:n,height:i}}),this.frozenHeadGroup.setClip({type:"rect",attrs:{x:s,y:0,width:this.headerConfig.width,height:this.getFrozenFirstRowHeight()}})},r.prototype.isFrozenRow=function(e){var n,i=this.headerConfig.spreadsheet,o=i.facet,a=Jn(i.options,(n=o.layoutResult)===null||n===void 0?void 0:n.rowNodes).frozenRowCount;return a>0&&e.rowIndex>=0&&e.rowIndex<a},r.prototype.getFrozenFirstRowHeight=function(){var e,n=this.headerConfig.spreadsheet,i=n.facet,o=Jn(n.options,(e=i.layoutResult)===null||e===void 0?void 0:e.rowNodes).frozenRowHeight;return o},r.prototype.clear=function(){this.frozenHeadGroup.clear(),this.scrollGroup.clear()},r}(Yf),aC=function(t){H(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.getSeriesNumberHeader=function(e){var n,i=e.viewportBBox,o=e.seriesNumberWidth,a=e.leafNodes,l=e.spreadsheet,s=e.cornerWidth,u=i.height,f=i.viewportHeight,h=[],d=l.isHierarchyTreeType();a.forEach(function(C){var w=new Ge({id:"",key:"",value:"".concat(h.length+1)});w.x=C.x,w.y=C.y,w.height=d?C.getTotalHeightForTreeHierarchy():C.height,w.width=o,w.rowIndex=C.rowIndex,w.spreadsheet=l,w.isLeaf=!0,h.push(w)});var c=l.facet,v=Jn(l.options,(n=c.layoutResult)===null||n===void 0?void 0:n.rowNodes),p=v.frozenRowCount,g=v.frozenRowHeight,y=!!p;return new r({width:s,height:u,viewportWidth:s,viewportHeight:y?f-g:f,position:{x:0,y:i.y},data:h,spreadsheet:l,seriesNumberWidth:0,hierarchyType:l.options.hierarchyType,linkFields:[]})},r.prototype.createCellInstance=function(e){var n=this.isFrozenRow(e);return new My(e,this.headerConfig.spreadsheet,S(S({},this.headerConfig),{scrollY:n?0:this.headerConfig.scrollY}),n)},r.prototype.getCustomRowCell=function(){return null},r}(oC),D9=function(t){H(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.createCellInstance=function(e){var n=this.headerConfig,i=n.spreadsheet,o=n.scrollY,a=this.isFrozenRow(e);return new go(e,i,S(S({},this.headerConfig),{scrollY:a?0:o}),a)},r}(oC),N9=function(){function t(r){var e=this;this.scrollFrameId=null,this.hideScrollBar=function(){var n,i,o;(n=e.hRowScrollBar)===null||n===void 0||n.hide(),(i=e.hScrollBar)===null||i===void 0||i.hide(),(o=e.vScrollBar)===null||o===void 0||o.hide()},this.delayHideScrollBar=Gi(this.hideScrollBar,1e3),this.delayHideScrollbarOnMobile=function(){We()&&e.delayHideScrollBar()},this.showVerticalScrollBar=function(){var n;(n=e.vScrollBar)===null||n===void 0||n.show()},this.showHorizontalScrollBar=function(){var n,i;(n=e.hRowScrollBar)===null||n===void 0||n.show(),(i=e.hScrollBar)===null||i===void 0||i.show()},this.onContainerWheelForMobileCompatibility=function(){var n=e.spreadsheet.getCanvasElement(),i,o;n.addEventListener("touchstart",function(a){i=a.touches[0].clientY}),n.addEventListener("touchend",function(a){o=a.changedTouches[0].clientY,o<i?e.scrollDirection=ze.SCROLL_UP:o>i&&(e.scrollDirection=ze.SCROLL_DOWN)})},this.onContainerWheel=function(){e.onContainerWheelForPc(),e.onContainerWheelForMobile()},this.getMobileWheelDeltaY=function(n){return e.scrollDirection===ze.SCROLL_UP?Math.max(0,n):e.scrollDirection===ze.SCROLL_DOWN?Math.min(0,n):n},this.onContainerWheelForPc=function(){var n=e.spreadsheet.getCanvasElement();n==null||n.addEventListener("wheel",e.onWheel)},this.onContainerWheelForMobile=function(){e.mobileWheel=new zN(e.spreadsheet.container),e.mobileWheel.on("wheel",function(n){e.spreadsheet.hideTooltip();var i=n.event,o=n.deltaX,a=n.deltaY,l=n.x,s=n.y,u=e.getMobileWheelDeltaY(a);e.onWheel(S(S({},i),{deltaX:o,deltaY:u,offsetX:l,offsetY:s}))}),e.onContainerWheelForMobileCompatibility()},this.bindEvents=function(){e.onContainerWheel(),e.emitPaginationEvent()},this.setScrollOffset=function(n){Object.keys(n).forEach(function(i){var o=n[i];Ka(o)||e.spreadsheet.store.set(i,Math.floor(o))})},this.getScrollOffset=function(){var n=e.spreadsheet.store;return{scrollX:n.get("scrollX",0),scrollY:n.get("scrollY",0),rowHeaderScrollX:n.get("rowHeaderScrollX",0)}},this.emitPaginationEvent=function(){var n=e.cfg.pagination;if(n){var i=n.current,o=i===void 0?Ms:i,a=n.pageSize,l=e.viewCellHeights.getTotalLength(),s=Math.floor((l-1)/a)+1;e.cfg.spreadsheet.emit(R.LAYOUT_PAGINATION,{pageSize:a,pageCount:s,total:l,current:o})}},this.unbindEvents=function(){var n=e.spreadsheet.getCanvasElement();n==null||n.removeEventListener("wheel",e.onWheel),e.mobileWheel.destroy()},this.clipPanelGroup=function(){var n;e.foregroundGroup=e.spreadsheet.foregroundGroup,e.backgroundGroup=e.spreadsheet.backgroundGroup,e.panelGroup=e.spreadsheet.panelGroup;var i=e.panelBBox,o=i.width,a=i.height;(n=e.spreadsheet.panelScrollGroup)===null||n===void 0||n.setClip({type:"rect",attrs:{x:0,y:e.cornerBBox.height,width:o,height:a}})},this.calculateCellWidthHeight=function(){var n=e.layoutResult.colLeafNodes,i=Qa(n,function(o,a){return o.push(ge(o)+a.width),o},[0]);e.viewCellWidths=i,e.viewCellHeights=e.getViewCellHeights(e.layoutResult)},this.getRealScrollX=function(n,i){return i===void 0&&(i=0),e.cfg.spreadsheet.isScrollContainsRowHeader()?n:i},this.calculatePanelBBox=function(){e.panelBBox=new I9(e,!0)},this.getRealWidth=function(){return ge(e.viewCellWidths)},this.getRealHeight=function(){var n=e.cfg.pagination,i=e.viewCellHeights;if(n){var o=e.getCellRange(),a=o.start,l=o.end;return i.getCellOffsetY(l+1)-i.getCellOffsetY(a)}return i.getTotalHeight()},this.clearAllGroup=function(){for(var n=e.panelGroup.getChildren()||[],i=n.length-1;i>=0;i--){var o=n[i];o instanceof hr?o.set("children",[]):n[i].remove()}e.foregroundGroup.set("children",[]),e.backgroundGroup.set("children",[])},this.scrollWithAnimation=function(n,i,o){var a,l,s,u;n===void 0&&(n={}),i===void 0&&(i=200);var f=e.getAdjustedScrollOffset({scrollX:((a=n.offsetX)===null||a===void 0?void 0:a.value)||0,scrollY:((l=n.offsetY)===null||l===void 0?void 0:l.value)||0,rowHeaderScrollX:((s=n.rowHeaderOffsetX)===null||s===void 0?void 0:s.value)||0}),h=f.scrollX,d=f.scrollY,c=f.rowHeaderScrollX;(u=e.timer)===null||u===void 0||u.stop();var v=e.getScrollOffset(),p=[h??v.scrollX,d??v.scrollY,c??v.rowHeaderScrollX],g=x9(Object.values(v),p);e.timer=Js(function(y){try{var C=Math.min(y/i,1),w=A(g(C),3),m=w[0],_=w[1],b=w[2];e.setScrollOffset({rowHeaderScrollX:b,scrollX:m,scrollY:_}),e.startScroll(),y>i&&(e.timer.stop(),o==null||o())}catch(T){console.error(T),e.timer.stop()}})},this.scrollImmediately=function(n){var i,o,a;n===void 0&&(n={});var l=e.getAdjustedScrollOffset({scrollX:((i=n.offsetX)===null||i===void 0?void 0:i.value)||0,scrollY:((o=n.offsetY)===null||o===void 0?void 0:o.value)||0,rowHeaderScrollX:((a=n.rowHeaderOffsetX)===null||a===void 0?void 0:a.value)||0}),s=l.scrollX,u=l.scrollY,f=l.rowHeaderScrollX;e.setScrollOffset({scrollX:s,scrollY:u,rowHeaderScrollX:f}),e.startScroll()},this.startScroll=function(n){var i,o,a;n===void 0&&(n=!1);var l=e.getScrollOffset(),s=l.rowHeaderScrollX,u=l.scrollX,f=l.scrollY;(i=e.hRowScrollBar)===null||i===void 0||i.onlyUpdateThumbOffset(e.getScrollBarOffset(s,e.hRowScrollBar)),(o=e.hScrollBar)===null||o===void 0||o.onlyUpdateThumbOffset(e.getScrollBarOffset(u,e.hScrollBar)),(a=e.vScrollBar)===null||a===void 0||a.onlyUpdateThumbOffset(e.getScrollBarOffset(f,e.vScrollBar)),e.dynamicRenderCell(n)},this.getRendererHeight=function(){var n=e.getCellRange(),i=n.start,o=n.end;return e.viewCellHeights.getCellOffsetY(o+1)-e.viewCellHeights.getCellOffsetY(i)},this.getAdjustedScrollOffset=function(n){var i=n.scrollX,o=n.scrollY,a=n.rowHeaderScrollX;return{scrollX:Pl(i,e.layoutResult.colsHierarchy.width,e.panelBBox.width),scrollY:Pl(o,e.getRendererHeight(),e.panelBBox.height),rowHeaderScrollX:E9(a,e.cornerBBox)}},this.renderRowScrollBar=function(n){if(!e.cfg.spreadsheet.isScrollContainsRowHeader()&&e.cornerBBox.width<e.cornerBBox.originalWidth){var i=e.cornerBBox.originalWidth-e.cornerBBox.width,o=e.getScrollbarPosition().maxY,a=e.spreadsheet.theme,l=a.splitLine,s=a.scrollBar,u=Math.max(e.cornerBBox.width*e.cornerBBox.width/e.cornerBBox.originalWidth,s==null?void 0:s.thumbHorizontalMinSize),f=u-(l==null?void 0:l.verticalBorderWidth);e.hRowScrollBar=new Nl({isHorizontal:!0,trackLen:e.cornerBBox.width,thumbLen:f,position:{x:e.cornerBBox.minX+e.scrollBarSize/2,y:o},thumbOffset:n*(e.cornerBBox.width-u)/i,theme:e.scrollBarTheme,scrollTargetMaxOffset:i}),e.hRowScrollBar.on(vn.ScrollChange,function(h){var d,c,v=h.offset,p=e.getValidScrollBarOffset(v,i),g=Math.floor(p);e.setScrollOffset({rowHeaderScrollX:g}),(d=e.rowHeader)===null||d===void 0||d.onRowScrollX(g,qn),(c=e.rowIndexHeader)===null||c===void 0||c.onRowScrollX(g,Jh),e.cornerHeader.onRowScrollX(g,os);var y=e.getScrollBarOffset(g,e.hRowScrollBar),C=e.getScrollOffset(),w=C.scrollX,m=C.scrollY,_={scrollX:w,scrollY:m,rowHeaderScrollX:y};e.hRowScrollBar.updateThumbOffset(y,!1),e.spreadsheet.emit(R.ROW_CELL_SCROLL,_),e.spreadsheet.emit(R.GLOBAL_SCROLL,_)}),e.foregroundGroup.add(e.hRowScrollBar)}},this.getValidScrollBarOffset=function(n,i){return sa(n,0,i)},this.renderHScrollBar=function(n,i,o){if(Math.floor(n)<Math.floor(i)){var a=e.scrollBarSize/2,l=e.getScrollbarPosition().maxY,s=n+(e.cfg.spreadsheet.isScrollContainsRowHeader()?Math.min(e.cornerBBox.width,e.getCanvasHW().width):0),u={x:e.panelBBox.minX+(e.cfg.spreadsheet.isScrollContainsRowHeader()?-e.cornerBBox.width+a:a),y:l},f=i+(e.cfg.spreadsheet.isScrollContainsRowHeader()?e.cornerBBox.width:0),h=e.spreadsheet.theme.scrollBar,d=f-s,c=Math.max(s/f*s,h==null?void 0:h.thumbHorizontalMinSize);e.hScrollBar=new Nl({isHorizontal:!0,trackLen:s,thumbLen:c,position:u,thumbOffset:o*(s-c)/d,theme:e.scrollBarTheme,scrollTargetMaxOffset:d}),e.hScrollBar.on(vn.ScrollChange,function(v){var p=v.offset,g=v.updateThumbOffset,y=e.getValidScrollBarOffset(p,d);g&&e.hScrollBar.updateThumbOffset(e.getScrollBarOffset(y,e.hScrollBar),!1),e.setScrollOffset({scrollX:y}),e.dynamicRenderCell()}),e.foregroundGroup.add(e.hScrollBar)}},this.getScrollbarPosition=function(){var n=e.panelBBox,i=n.maxX,o=n.maxY,a=e.getCanvasHW(),l=a.width,s=a.height,u=e.spreadsheet.options.interaction.scrollbarPosition===na.CONTENT;return{maxX:(u?i:l)-e.scrollBarSize,maxY:u?o:s-e.scrollBarSize}},this.renderVScrollBar=function(n,i,o){if(n<i){var a=e.spreadsheet.theme.scrollBar,l=Math.max(n/i*n,a==null?void 0:a.thumbVerticalMinSize),s=i-n,u=e.getScrollbarPosition().maxX;e.vScrollBar=new Nl({isHorizontal:!1,trackLen:n,thumbLen:l,thumbOffset:o*(n-l)/s,position:{x:u,y:e.panelBBox.minY},theme:e.scrollBarTheme,scrollTargetMaxOffset:s}),e.vScrollBar.on(vn.ScrollChange,function(f){var h=f.offset,d=f.updateThumbOffset,c=e.getValidScrollBarOffset(h,s);d&&e.vScrollBar.updateThumbOffset(e.getScrollBarOffset(c,e.vScrollBar),!1),e.setScrollOffset({scrollY:c}),e.dynamicRenderCell()}),e.foregroundGroup.add(e.vScrollBar)}},this.getScrollBarOffset=function(n,i){var o=i.trackLen,a=i.thumbLen,l=i.scrollTargetMaxOffset;return n*(o-a)/l},this.isScrollOverThePanelArea=function(n){var i=n.offsetX,o=n.offsetY;return i>e.panelBBox.minX&&i<e.panelBBox.maxX&&o>e.panelBBox.minY&&o<e.panelBBox.maxY},this.isScrollOverTheCornerArea=function(n){var i=n.offsetX,o=n.offsetY;return i>e.cornerBBox.minX&&i<e.cornerBBox.maxX&&o>e.cornerBBox.minY&&o<e.cornerBBox.maxY+e.panelBBox.height},this.updateHorizontalRowScrollOffset=function(n){var i,o=n.offset,a=n.offsetX,l=n.offsetY;e.isScrollOverTheCornerArea({offsetX:a,offsetY:l})&&((i=e.hRowScrollBar)===null||i===void 0||i.emitScrollChange(o))},this.updateHorizontalScrollOffset=function(n){var i,o=n.offset,a=n.offsetX,l=n.offsetY;(!e.hRowScrollBar||e.isScrollOverThePanelArea({offsetX:a,offsetY:l}))&&((i=e.hScrollBar)===null||i===void 0||i.emitScrollChange(o))},this.isScrollToLeft=function(n){var i=n.deltaX,o=n.offsetX,a=n.offsetY;if(!e.hScrollBar&&!e.hRowScrollBar)return!0;var l=!e.hRowScrollBar||e.isScrollOverThePanelArea({offsetY:a,offsetX:o})||e.hRowScrollBar.thumbOffset<=0,s=!e.hScrollBar||e.hScrollBar.thumbOffset<=0;return i<=0&&s&&l},this.isScrollToRight=function(n){var i,o,a,l,s,u,f=n.deltaX,h=n.offsetX,d=n.offsetY;if(!e.hScrollBar&&!e.hRowScrollBar)return!0;var c=e.spreadsheet.isFrozenRowHeader()?(i=e.panelBBox)===null||i===void 0?void 0:i.width:(o=e.panelBBox)===null||o===void 0?void 0:o.maxX,v=!e.hRowScrollBar||e.isScrollOverThePanelArea({offsetY:d,offsetX:h})||((a=e.hRowScrollBar)===null||a===void 0?void 0:a.thumbOffset)+((l=e.hRowScrollBar)===null||l===void 0?void 0:l.thumbLen)>=e.cornerBBox.width,p=e.hRowScrollBar&&e.isScrollOverTheCornerArea({offsetX:h,offsetY:d})||((s=e.hScrollBar)===null||s===void 0?void 0:s.thumbOffset)+((u=e.hScrollBar)===null||u===void 0?void 0:u.thumbLen)>=c;return f>=0&&p&&v},this.isScrollToTop=function(n){var i;return e.vScrollBar?n<=0&&((i=e.vScrollBar)===null||i===void 0?void 0:i.thumbOffset)<=0:!0},this.isScrollToBottom=function(n){var i,o,a;return e.vScrollBar?n>=0&&((i=e.vScrollBar)===null||i===void 0?void 0:i.thumbOffset)+((o=e.vScrollBar)===null||o===void 0?void 0:o.thumbLen)>=((a=e.panelBBox)===null||a===void 0?void 0:a.height):!0},this.isVerticalScrollOverTheViewport=function(n){return!e.isScrollToTop(n)&&!e.isScrollToBottom(n)},this.isHorizontalScrollOverTheViewport=function(n){return!e.isScrollToLeft(n)&&!e.isScrollToRight(n)},this.isScrollOverTheViewport=function(n){var i=n.deltaY,o=n.deltaX,a=n.offsetY,l=a<=e.cornerBBox.maxY;return l?!1:i!==0?e.isVerticalScrollOverTheViewport(i):o!==0?e.isHorizontalScrollOverTheViewport(n):!1},this.cancelScrollFrame=function(){return We()&&e.scrollFrameId?!1:(cancelAnimationFrame(e.scrollFrameId),!0)},this.clearScrollFrameIdOnMobile=function(){We()&&(e.scrollFrameId=null)},this.stopScrollChainingIfNeeded=function(n){var i=e.spreadsheet.options.interaction;i.overscrollBehavior!=="auto"&&(e.cancelScrollFrame(),e.stopScrollChaining(n))},this.stopScrollChaining=function(n){var i,o;n!=null&&n.cancelable&&((i=n==null?void 0:n.preventDefault)===null||i===void 0||i.call(n));var a=n==null?void 0:n.originalEvent;a!=null&&a.cancelable&&((o=a==null?void 0:a.preventDefault)===null||o===void 0||o.call(a))},this.onWheel=function(n){var i=e.spreadsheet.options.interaction,o=n.deltaX,a=n.deltaY,l=n.offsetX,s=n.offsetY,u=n.shiftKey;u&&Xg()&&(l=l-o+a,o=a,s-=a,a=0);var f=A(x5(o,a,i.scrollSpeedRatio),2),h=f[0],d=f[1];if(e.spreadsheet.hideTooltip(),e.spreadsheet.interaction.clearHoverTimer(),!e.isScrollOverTheViewport({deltaX:h,deltaY:d,offsetX:l,offsetY:s})){e.stopScrollChainingIfNeeded(n);return}e.stopScrollChaining(n),e.spreadsheet.interaction.addIntercepts([Q.HOVER]),e.cancelScrollFrame()&&(e.scrollFrameId=requestAnimationFrame(function(){var c,v=e.getScrollOffset(),p=v.scrollX,g=v.scrollY,y=v.rowHeaderScrollX;h!==0&&(e.showHorizontalScrollBar(),e.updateHorizontalRowScrollOffset({offsetX:l,offsetY:s,offset:h+y}),e.updateHorizontalScrollOffset({offsetX:l,offsetY:s,offset:h+p})),d!==0&&(e.showVerticalScrollBar(),(c=e.vScrollBar)===null||c===void 0||c.emitScrollChange(d+g)),e.delayHideScrollbarOnMobile(),e.clearScrollFrameIdOnMobile()}))},this.addCell=function(n){var i=e.spreadsheet.panelScrollGroup;i==null||i.add(n)},this.realCellRender=function(n,i){var o=e.calculateXYIndexes(n,i);rr.getInstance().logger("renderIndex:",e.preCellIndexes,o);var a=M9(e.preCellIndexes,o),l=a.add,s=a.remove;rr.getInstance().debugCallback(Z4,function(){J(l,function(f){var h=A(f,2),d=h[0],c=h[1],v=e.layoutResult.getCellMeta(c,d);if(v){var p=e.cfg.dataCell(v);p.set("name","".concat(d,"-").concat(c)),e.addCell(p)}});var u=Ai(e.panelGroup.getChildren(),Qr);J(s,function(f){var h=A(f,2),d=h[0],c=h[1],v=Je(u,function(p){return p.get("name")==="".concat(d,"-").concat(c)});v==null||v.remove(!0)}),rr.getInstance().logger("Render Cell Panel: ".concat(u==null?void 0:u.length,", Add: ").concat(l==null?void 0:l.length,", Remove: ").concat(s==null?void 0:s.length))}),e.preCellIndexes=o,e.spreadsheet.emit(R.LAYOUT_AFTER_REAL_DATA_CELL_RENDER,{add:l,remove:s,spreadsheet:e.spreadsheet})},this.getGridInfo=function(){var n=A(e.preCellIndexes.center,4),i=n[0],o=n[1],a=n[2],l=n[3],s=rC(i,o,e.layoutResult.colLeafNodes),u=cl(a,l,e.viewCellHeights);return{cols:s,rows:u}},this.onAfterScroll=Gi(function(){var n=e.spreadsheet,i=n.interaction,o=n.container;if(!i.isSelectedState()&&(i.removeIntercepts([Q.HOVER]),i.getHoverAfterScroll())){var a=i.eventController.canvasMousemoveEvent;if(a){var l=a.x,s=a.y,u=o.getShape(l,s);u&&o.emit(rt.MOUSE_MOVE,S(S({},a),{shape:u,target:u,timestamp:performance.now()}))}}},300),this.cfg=r,this.spreadsheet=r.spreadsheet,this.init()}return Object.defineProperty(t.prototype,"scrollBarTheme",{get:function(){return this.spreadsheet.theme.scrollBar},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scrollBarSize",{get:function(){return this.scrollBarTheme.size},enumerable:!1,configurable:!0}),t.prototype.getCellCustomWidth=function(r,e){return Xe(e)?e==null?void 0:e(r):e},t.prototype.getCellDraggedWidth=function(r){var e=this.cfg.colCfg;return K(e==null?void 0:e.widthByFieldValue,"".concat(r.value))},t.prototype.render=function(){A5(this.spreadsheet.dataCfg.fields)||(this.adjustScrollOffset(),this.renderHeaders(),this.renderScrollBars(),this.renderBackground(),this.dynamicRenderCell(!0))},t.prototype.adjustScrollOffset=function(){var r=this.getAdjustedScrollOffset(this.getScrollOffset());this.setScrollOffset(r)},t.prototype.getSeriesNumberWidth=function(){var r=this.cfg.showSeriesNumber;return r?this.spreadsheet.theme.rowCell.seriesNumberWidth:0},t.prototype.getCanvasHW=function(){return{width:this.cfg.width,height:this.cfg.height}},t.prototype.updateScrollOffset=function(r){var e,n,i,o,a,l;if(((e=r.rowHeaderOffsetX)===null||e===void 0?void 0:e.value)!==void 0){!((n=r.rowHeaderOffsetX)===null||n===void 0)&&n.animate?this.scrollWithAnimation(r):this.scrollImmediately(r);return}if(((i=r.offsetX)===null||i===void 0?void 0:i.value)!==void 0){!((o=r.offsetX)===null||o===void 0)&&o.animate?this.scrollWithAnimation(r):this.scrollImmediately(r);return}((a=r.offsetY)===null||a===void 0?void 0:a.value)!==void 0&&(!((l=r.offsetY)===null||l===void 0)&&l.animate?this.scrollWithAnimation(r):this.scrollImmediately(r))},t.prototype.getPaginationScrollY=function(){var r=this.cfg.pagination;if(r){var e=r.current,n=e===void 0?Ms:e,i=r.pageSize,o=this.viewCellHeights,a=Math.max((n-1)*i,0);return o.getCellOffsetY(a)}return 0},t.prototype.destroy=function(){this.unbindEvents(),this.clearAllGroup(),this.preCellIndexes=null,cancelAnimationFrame(this.scrollFrameId)},t.prototype.calculateXYIndexes=function(r,e){var n=this.panelBBox,i=n.viewportHeight,o=n.viewportWidth,a=Sf(r,e,this.viewCellWidths,this.viewCellHeights,{width:o,height:i,x:0,y:0},this.getRealScrollX(this.cornerBBox.width));return{center:a}},t.prototype.calculateCornerBBox=function(){this.cornerBBox=new iC(this,!0)},t.prototype.getCellRange=function(){var r=this.cfg.pagination;return R5(this.viewCellHeights,r)},t.prototype.panelScrollGroupClip=function(r,e){var n,i=this.spreadsheet.isFrozenRowHeader();(n=this.spreadsheet.panelScrollGroup)===null||n===void 0||n.setClip({type:"rect",attrs:{x:i?r:0,y:e,width:this.panelBBox.width+(i?0:r),height:this.panelBBox.height}})},t.prototype.clip=function(r,e){this.panelScrollGroupClip(r,e)},t.prototype.translateRelatedGroups=function(r,e,n){var i,o,a,l,s,u;xr(this.spreadsheet.panelScrollGroup,this.cornerBBox.width-r,this.cornerBBox.height-e),(i=this.rowHeader)===null||i===void 0||i.onScrollXY(this.getRealScrollX(r,n),e,qn),(o=this.rowIndexHeader)===null||o===void 0||o.onScrollXY(this.getRealScrollX(r,n),e,Jh),(a=this.cornerHeader)===null||a===void 0||a.onCorScroll(this.getRealScrollX(r,n),os),(l=this.centerFrame)===null||l===void 0||l.onChangeShadowVisibility(r,this.getRealWidth()-this.panelBBox.width),(s=this.centerFrame)===null||s===void 0||s.onBorderScroll(this.getRealScrollX(r)),(u=this.columnHeader)===null||u===void 0||u.onColScroll(r,ip)},t.prototype.init=function(){var r=this;rr.getInstance().debugCallback(K4,function(){r.layoutResult=r.doLayout(),r.saveInitColumnLeafNodes(r.layoutResult.colLeafNodes),r.spreadsheet.emit(R.LAYOUT_AFTER_HEADER_LAYOUT,r.layoutResult)}),this.calculateCellWidthHeight(),this.calculateCornerBBox(),this.calculatePanelBBox(),this.clipPanelGroup(),this.bindEvents()},t.prototype.renderBackground=function(){var r=this.getCanvasHW(),e=r.width,n=r.height,i=this.spreadsheet.theme.background,o=i.color,a=i.opacity;this.backgroundGroup.addShape("rect",{attrs:{fill:o,opacity:a,x:0,y:0,width:e,height:n}})},t.prototype.renderScrollBars=function(){var r=this.getScrollOffset(),e=r.scrollX,n=r.scrollY,i=r.rowHeaderScrollX,o=this.panelBBox,a=o.width,l=o.height,s=this.layoutResult.colsHierarchy.width,u=this.getRealHeight();this.renderRowScrollBar(i),this.renderHScrollBar(a,s,e),this.renderVScrollBar(l,u,n)},t.prototype.renderHeaders=function(){var r=this.getSeriesNumberWidth();this.rowHeader=this.getRowHeader(),this.columnHeader=this.getColHeader(),r>0&&!this.rowIndexHeader&&(this.rowIndexHeader=this.getSeriesNumberHeader()),this.cornerHeader=this.getCornerHeader(),this.centerFrame=this.getCenterFrame(),this.rowIndexHeader&&this.foregroundGroup.add(this.rowIndexHeader),this.rowHeader&&this.foregroundGroup.add(this.rowHeader),this.foregroundGroup.add(this.columnHeader),this.foregroundGroup.add(this.cornerHeader),this.foregroundGroup.add(this.centerFrame)},t.prototype.getRowHeaderCfg=function(){var r,e,n,i=this.panelBBox,o=i.y,a=i.viewportHeight,l=i.viewportWidth,s=i.height,u=this.getSeriesNumberWidth();return{width:this.cornerBBox.width,height:s,viewportWidth:l,viewportHeight:a,position:{x:0,y:o},data:this.layoutResult.rowNodes,hierarchyType:this.cfg.hierarchyType,linkFields:(n=(e=(r=this.cfg.spreadsheet.options)===null||r===void 0?void 0:r.interaction)===null||e===void 0?void 0:e.linkFields)!==null&&n!==void 0?n:[],seriesNumberWidth:u,spreadsheet:this.spreadsheet}},t.prototype.getRowHeader=function(){return this.rowHeader?this.rowHeader:new Yf(this.getRowHeaderCfg())},t.prototype.getColHeader=function(){if(!this.columnHeader){var r=this.panelBBox,e=r.x,n=r.width,i=r.viewportHeight,o=r.viewportWidth;return new $f({width:n,cornerWidth:this.cornerBBox.width,height:this.cornerBBox.height,viewportWidth:o,viewportHeight:i,position:{x:e,y:0},data:this.layoutResult.colNodes,scrollContainsRowHeader:this.cfg.spreadsheet.isScrollContainsRowHeader(),sortParam:this.cfg.spreadsheet.store.get("sortParam"),spreadsheet:this.spreadsheet})}return this.columnHeader},t.prototype.getCornerHeader=function(){return this.cornerHeader?this.cornerHeader:O9.getCornerHeader(this.panelBBox,this.cornerBBox,this.getSeriesNumberWidth(),this.cfg,this.layoutResult,this.spreadsheet)},t.prototype.getSeriesNumberHeader=function(){return aC.getSeriesNumberHeader({viewportBBox:this.panelBBox,seriesNumberWidth:this.getSeriesNumberWidth(),leafNodes:this.layoutResult.rowsHierarchy.getNodes(0),spreadsheet:this.spreadsheet,cornerWidth:this.cornerBBox.width})},t.prototype.getCenterFrame=function(){var r;if(!this.centerFrame){var e=this.panelBBox,n=e.viewportWidth,i=e.viewportHeight,o=this.cornerBBox.width,a=this.cornerBBox.height,l=(r=this.cfg)===null||r===void 0?void 0:r.frame,s={position:{x:this.cornerBBox.x,y:this.cornerBBox.y},width:o,height:a,viewportWidth:n,viewportHeight:i,showViewportLeftShadow:!1,showViewportRightShadow:!1,scrollContainsRowHeader:this.cfg.spreadsheet.isScrollContainsRowHeader(),isPivotMode:this.cfg.spreadsheet.isPivotMode(),spreadsheet:this.cfg.spreadsheet};return l?l(s):new B9(s)}return this.centerFrame},t.prototype.updatePanelScrollGroup=function(){this.gridInfo=this.getGridInfo(),this.spreadsheet.panelScrollGroup.update(this.gridInfo)},t.prototype.dynamicRenderCell=function(r){var e=this.getScrollOffset(),n=e.scrollX,i=e.scrollY,o=e.rowHeaderScrollX,a=i+this.getPaginationScrollY(),l=Pl(a,this.viewCellHeights.getTotalHeight(),this.panelBBox.viewportHeight);this.spreadsheet.hideTooltip(),this.spreadsheet.interaction.clearHoverTimer(),this.realCellRender(n,l),this.updatePanelScrollGroup(),this.translateRelatedGroups(n,l,o),this.clip(n,l),r||this.emitScrollEvent({scrollX:n,scrollY:l,rowHeaderScrollX:o}),this.onAfterScroll()},t.prototype.emitScrollEvent=function(r){this.spreadsheet.emit(R.LAYOUT_CELL_SCROLL,r),this.spreadsheet.emit(R.GLOBAL_SCROLL,r)},t.prototype.saveInitColumnLeafNodes=function(r){r===void 0&&(r=[]);var e=this.spreadsheet,n=e.store,i=e.options,o=i.interaction.hiddenColumnFields,a=r.length+o.length,l=n.get("initColumnLeafNodes",[]);a!==l.length&&n.set("initColumnLeafNodes",r)},t.prototype.getHiddenColumnsInfo=function(r){var e=this.spreadsheet.store.get("hiddenColumnsDetail",[]);return D(e)?null:e.find(function(n){var i;return(i=n==null?void 0:n.hideColumnNodes)===null||i===void 0?void 0:i.some(function(o){return o.id===r.id})})},t.prototype.getCornerNodes=function(){var r;return((r=this.cornerHeader)===null||r===void 0?void 0:r.getNodes())||[]},t}(),lC=function(t){H(r,t);function r(e){var n,i=t.call(this,e)||this;return i.frozenGroupInfo=(n={},n[Lt.FROZEN_COL]={width:0},n[Lt.FROZEN_ROW]={height:0},n[Lt.FROZEN_TRAILING_ROW]={height:0},n[Lt.FROZEN_TRAILING_COL]={width:0},n),i.panelScrollGroupIndexes=[],i.initFrozenGroupPosition=function(){var o=i.getScrollOffset(),a=o.scrollY,l=o.scrollX,s=i.getPaginationScrollY();xr(i.spreadsheet.frozenRowGroup,i.cornerBBox.width-l,i.cornerBBox.height-s),xr(i.spreadsheet.frozenColGroup,i.cornerBBox.width,i.cornerBBox.height-a-s),xr(i.spreadsheet.frozenTrailingColGroup,i.cornerBBox.width,i.cornerBBox.height-a-s),xr(i.spreadsheet.frozenTopGroup,i.cornerBBox.width,i.cornerBBox.height-s)},i.addCell=function(o){var a=i.getBizRevisedFrozenOptions(),l=a.frozenRowCount,s=a.frozenColCount,u=a.frozenTrailingRowCount,f=a.frozenTrailingColCount,h=i.layoutResult.colsHierarchy.getLeaves().length,d=i.getCellRange(),c=i.getRealFrozenColumns(s,f),v=c.colCount,p=c.trailingColCount,g=S5(o.getMeta(),{frozenRowCount:l,frozenColCount:v,frozenTrailingRowCount:u,frozenTrailingColCount:p},h,d),y=fp[g];y&&i.spreadsheet[y]&&i.spreadsheet[y].add(o)},i.renderFrozenGroupSplitLine=function(o,a){var l,s,u,f=i.panelBBox,h=f.width,d=f.height,c=f.viewportWidth,v=f.viewportHeight,p=i.cornerBBox.height,g=i.layoutResult.colNodes.filter(function(Ee){return nr(Ee)}),y=i.getCellRange(),C=y.end-y.start,w=Hr(i.getBizRevisedFrozenOptions(),g.length,C),m=w.frozenRowCount,_=m===void 0?0:m,b=w.frozenColCount,T=b===void 0?0:b,E=w.frozenTrailingColCount,L=E===void 0?0:E,F=w.frozenTrailingRowCount,I=F===void 0?0:F,B=Math.floor(a-i.getPaginationScrollY()),k=Math.max(0,((l=ge(i.viewCellWidths))!==null&&l!==void 0?l:0)-c),U=Math.max(0,i.viewCellHeights.getCellOffsetY(y.end+1)-i.viewCellHeights.getCellOffsetY(y.start)-v);(s=i.foregroundGroup.findById(ta))===null||s===void 0||s.remove();var O=K(i.cfg,"spreadsheet.theme.splitLine"),z=i.foregroundGroup.addGroup({id:ta,zIndex:Pi}),ue={lineWidth:O==null?void 0:O.verticalBorderWidth,stroke:O==null?void 0:O.verticalBorderColor,opacity:O==null?void 0:O.verticalBorderColorOpacity,lineDash:O==null?void 0:O.borderDash},le={lineWidth:O==null?void 0:O.horizontalBorderWidth,stroke:O==null?void 0:O.horizontalBorderColor,opacity:O==null?void 0:O.horizontalBorderColorOpacity,lineDash:O==null?void 0:O.borderDash};if(T>0){var te=g.reduce(function(Ee,he,me){return me<T?Ee+he.width:Ee},0),Ce=I>0?d:v;$e(z,{x1:te,x2:te,y1:p,y2:p+Ce},S({},ue)),O.showShadow&&o>0&&z.addShape("rect",{attrs:{x:te,y:p,width:O.shadowWidth,height:Ce,fill:i.getShadowFill(0)}})}if(_>0){var fe=p+i.getTotalHeightForRange(y.start,y.start+_-1),we=L>0?h:c;$e(z,{x1:0,x2:we,y1:fe,y2:fe},S({},le)),O.showShadow&&B>0&&z.addShape("rect",{attrs:{x:0,y:fe,width:we,height:O.shadowWidth,fill:i.getShadowFill(90)}})}if(L>0){var te=g[g.length-L].x,Ce=I?d:v;$e(z,{x1:te,x2:te,y1:p,y2:p+Ce},S({},ue)),O.showShadow&&Math.floor(o)<Math.floor(k)&&z.addShape("rect",{attrs:{x:te-((u=O.shadowWidth)!==null&&u!==void 0?u:0),y:p,width:O.shadowWidth,height:Ce,fill:i.getShadowFill(180)}})}if(I>0){var fe=i.panelBBox.maxY-i.getTotalHeightForRange(y.end-I+1,y.end),we=L>0?h:c;$e(z,{x1:0,x2:we,y1:fe,y2:fe},S({},le)),O.showShadow&&B<Math.floor(U)&&z.addShape("rect",{attrs:{x:0,y:fe-O.shadowWidth,width:we,height:O.shadowWidth,fill:i.getShadowFill(270)}})}i.foregroundGroup.sort()},i.getRealFrozenColumns=function(o,a){var l,s=o,u=a;if(o||a){var f=i.layoutResult.colsHierarchy.getNodes();f=f.filter(function(h){return nr(h)}),l=ca(f,o,a),s=l.colCount,u=l.trailingColCount}return{colCount:s,trailingColCount:u}},i.getTotalHeightForRange=function(o,a){if(o<0||a<0)return 0;if(i.rowOffsets)return i.rowOffsets[a+1]-i.rowOffsets[o];for(var l=0,s=o;s<a+1;s++){var u=i.getDefaultCellHeight();l+=u}return l},i.getShadowFill=function(o){var a,l,s=K(i.cfg,"spreadsheet.theme.splitLine");return"l (".concat(o,") 0:").concat((a=s.shadowColors)===null||a===void 0?void 0:a.left," 1:").concat((l=s.shadowColors)===null||l===void 0?void 0:l.right)},i}return r.prototype.calculateFrozenGroupInfo=function(){var e=this.getFrozenOptionsDirectly(),n=e.frozenColCount,i=e.frozenRowCount,o=e.frozenTrailingColCount,a=e.frozenTrailingRowCount,l=this.layoutResult.colNodes.filter(function(p){return nr(p)}),s=this.viewCellHeights,u=this.getCellRange(),f=this.frozenGroupInfo,h=f.frozenCol,d=f.frozenTrailingCol,c=f.frozenRow,v=f.frozenTrailingRow;n>0&&(h.width=l[n-1].x+l[n-1].width-0,h.range=[0,n-1]),i>0&&(c.height=s.getCellOffsetY(u.start+i)-s.getCellOffsetY(u.start),c.range=[u.start,u.start+i-1]),o>0&&(d.width=l[l.length-1].x-l[l.length-o].x+l[l.length-1].width,d.range=[l.length-o,l.length-1]),a>0&&(v.height=s.getCellOffsetY(u.end+1)-s.getCellOffsetY(u.end+1-a),v.range=[u.end-a+1,u.end])},r.prototype.calculateXYIndexes=function(e,n){var i,o,a,l=this.layoutResult.colLeafNodes.length,s=this.getCellRange(),u=this.panelBBox,f=u.viewportHeight,h=u.viewportWidth,d=this.getFrozenOptionsDirectly(),c=d.frozenColCount,v=c===void 0?0:c,p=d.frozenRowCount,g=p===void 0?0:p,y=d.frozenTrailingColCount,C=y===void 0?0:y,w=d.frozenTrailingRowCount,m=w===void 0?0:w,_={width:h,height:f,x:0,y:0};if(C>0||v>0){var b=this.frozenGroupInfo,T=b.frozenTrailingCol,E=b.frozenCol;_.width-=T.width+E.width,_.x+=(i=E.width)!==null&&i!==void 0?i:0}if(m>0||g>0){var L=this.frozenGroupInfo,F=L.frozenRow,I=L.frozenTrailingRow;_.height<F.height+I.height?(_.height=0,_.y=0):(_.height-=F.height+I.height,_.y+=F.height)}var B=this.spreadsheet.isTableMode()&&(!((a=(o=this.spreadsheet.dataSet)===null||o===void 0?void 0:o.isEmpty)===null||a===void 0)&&a.call(o))?this.spreadsheet.dataSet.getEmptyViewIndexes():Sf(e,n,this.viewCellWidths,this.viewCellHeights,_,this.getRealScrollX(this.cornerBBox.width));this.panelScrollGroupIndexes=B;var k=this.getRealFrozenColumns(v,C),U=k.colCount,O=k.trailingColCount;return T5(B,{frozenColCount:U,frozenRowCount:g,frozenTrailingColCount:O,frozenTrailingRowCount:m},l,s)},r.prototype.updateFrozenGroupGrid=function(){var e=this;[Lt.FROZEN_COL,Lt.FROZEN_ROW,Lt.FROZEN_TRAILING_COL,Lt.FROZEN_TRAILING_ROW].forEach(function(n){if(e.frozenGroupInfo[n].range){var i=[],o=[];if(n.toLowerCase().includes("row")){var a=A(e.frozenGroupInfo[n].range,2),l=a[0],s=a[1];if(i=e.gridInfo.cols,o=cl(l,s,e.viewCellHeights),n===Lt.FROZEN_TRAILING_ROW){var u=e.spreadsheet.frozenTrailingRowGroup.getBBox().minY;o=L9(l,s,Math.ceil(u),e.viewCellHeights)}}else{var f=A(e.frozenGroupInfo[n].range,2),h=f[0],d=f[1],c=e.layoutResult.colNodes.filter(function(v){return nr(v)});i=rC(h,d,c),o=e.gridInfo.rows}e.spreadsheet["".concat(n,"Group")].updateGrid({cols:i,rows:o},"".concat(n,"Group"))}})},r.prototype.updatePanelScrollGroup=function(){t.prototype.updatePanelScrollGroup.call(this),this.updateFrozenGroupGrid()},r.prototype.translateRelatedGroups=function(e,n,i){var o=this,a=this.spreadsheet,l=a.frozenColGroup,s=a.frozenTrailingColGroup,u=a.frozenRowGroup,f=a.frozenTrailingRowGroup;[u,f].forEach(function(h){ol(h,o.cornerBBox.width-e)}),[l,s].forEach(function(h){_5(h,o.cornerBBox.height-n)}),t.prototype.translateRelatedGroups.call(this,e,n,i),this.updateRowResizeArea(),this.renderFrozenGroupSplitLine(e,n)},r.prototype.updateRowResizeArea=function(){},r.prototype.clip=function(e,n){var i,o,a,l=this.getPaginationScrollY(),s=this.spreadsheet,u=s.frozenRowGroup,f=s.frozenColGroup,h=s.frozenTrailingColGroup,d=s.frozenTrailingRowGroup,c=s.panelScrollGroup,v=0,p=0,g=0;f&&(v=f.getBBox().width),u&&(p=u.getBBox().height);var y;h&&(y=h.getBBox()),d&&(g=d.getBBox().height);var C=this.panelBBox.width-v-((i=y==null?void 0:y.width)!==null&&i!==void 0?i:0),w=this.panelBBox.height-p-g;c.setClip({type:"rect",attrs:{x:e+v,y:n+p,width:C,height:w}}),u.setClip({type:"rect",attrs:{x:e+v,y:l,width:C,height:p}}),d==null||d.setClip({type:"rect",attrs:{x:e+v,y:d.getBBox().minY,width:C,height:g}});var m={y:n+p,height:w};f==null||f.setClip({type:"rect",attrs:S(S({},m),{x:0,width:v})}),h==null||h.setClip({type:"rect",attrs:S(S({},m),{x:(o=y==null?void 0:y.minX)!==null&&o!==void 0?o:0,width:(a=y==null?void 0:y.width)!==null&&a!==void 0?a:0})})},r.prototype.init=function(){t.prototype.init.call(this)},r.prototype.render=function(){this.calculateFrozenGroupInfo(),t.prototype.render.call(this),this.initFrozenGroupPosition()},r.prototype.getFrozenOptionsDirectly=function(){var e=this.layoutResult.colLeafNodes.length,n=this.getCellRange();return Hr(this.getBizRevisedFrozenOptions(),e,n.end-n.start+1)},r.prototype.getBizRevisedFrozenOptions=function(){var e=this.cfg,n=e.frozenColCount,i=e.frozenRowCount,o=e.frozenTrailingColCount,a=e.frozenTrailingRowCount;return{frozenColCount:n,frozenRowCount:i,frozenTrailingColCount:o,frozenTrailingRowCount:a}},r.prototype.getDefaultCellHeight=function(){var e,n=this.cfg.cellCfg;return(e=n==null?void 0:n.height)!==null&&e!==void 0?e:0},r}(N9),sC=function(t){var r,e,n,i=t.facetCfg,o=t.customTreeItems,a=o===void 0?[]:o,l=t.level,s=t.parentNode,u=t.hierarchy,f=i.spreadsheet,h=i.collapsedRows,d=i.hierarchyCollapse;try{for(var c=Ot(a),v=c.next();!v.done;v=c.next()){var p=v.value,g=p.key,y=p.title,C=p.collapsed,w=p.children,m=Sa(p,["key","title","collapsed","children"]),_=(n={},n[re]=g,n),b=Xi(s.id,y),T=C??!1,E=K(h,b),L=E??(d||T),F=new Ge({id:b,key:g,label:y,value:y,level:l,parent:s,field:g,isTotals:!1,isCollapsed:L,hierarchy:u,query:_,spreadsheet:f,extra:m});l>u.maxLevel&&(u.maxLevel=l),D(w)&&(F.isLeaf=!0);var I=xf(i,s,F,u);!D(w)&&!L&&I&&sC({facetCfg:i,parentNode:F,level:l+1,hierarchy:u,customTreeItems:w})}}catch(B){r={error:B}}finally{try{v&&!v.done&&(e=c.return)&&e.call(c)}finally{if(r)throw r.error}}},P9=function(t,r,e){var n=t.getTotalsConfig(r);if(n.showGrandTotals){var i=n.reverseLayout?"unshift":"push";e[i](new Qn({label:n.label,isSubTotals:!1,isGrandTotals:!0}))}},uC=function(t){var r,e,n,i,o,a,l=t.parentNode,s=t.currentField,u=t.level,f=t.facetCfg,h=t.hierarchy,d=t.pivotMeta,c=f.spreadsheet,v=f.collapsedRows,p=f.hierarchyCollapse,g=f.rowExpandDepth,y=l.query,C=l.id,w=((i=c.dataCfg.fields.rows)===null||i===void 0?void 0:i.length)<=u,m=r6(Array.from(d.keys())),_=Zg(m,f,l,s),b=c.store.get("drillItemsNum");w&&b>0&&(_=_.slice(0,b)),u===0&&P9(c,s,_);try{for(var T=Ot(_),E=T.next();!E.done;E=T.next()){var L=E.value,F=L instanceof Qn,I=F?null:d.get(L),B=void 0,k=y,U=!1,O=!1;if(F){var z=L;U=z.isGrandTotals,O=z.isSubTotals,B=He(L.label),k=y}else B=L,k=S(S({},y),(n={},n[s]=B,n));var ue=Xi(C,B),le=v==null?void 0:v[ue],te=it(g)?u>g:null,Ce=(o=le??te)!==null&&o!==void 0?o:p,fe=new Ge({id:ue,key:s,label:B,value:B,level:u,parent:l,field:s,isTotals:F,isGrandTotals:U,isSubTotals:O,isCollapsed:Ce,hierarchy:h,query:k,spreadsheet:c});u>h.maxLevel&&(h.maxLevel=u);var we=P([],A(((a=I==null?void 0:I.children)===null||a===void 0?void 0:a.keys())||[]),!1).filter(function(me){return me!==lr}),Ee=D(we);(Ee||F)&&(fe.isLeaf=!0),Ee||(fe.isTotals=!0);var he=xf(f,l,fe,h);!Ee&&!Ce&&!F&&he&&uC({level:u+1,currentField:I.childField,pivotMeta:I.children,facetCfg:f,parentNode:fe,hierarchy:h})}}catch(me){r={error:me}}finally{try{E&&!E.done&&(e=T.return)&&e.call(T)}finally{if(r)throw r.error}}},fC=function(t){var r=t.isValueInCols,e=t.moreThanOneValue,n=t.rootNode,i=t.facetCfg,o=t.hierarchy,a=t.fields,l=t.isRowHeader,s,u;l?(s=!r&&e,u=!r&&!e):(s=r&&e,u=r&&!e),Jg({addTotalMeasureInTotal:s,addMeasureInTotalQuery:u,parentNode:n,currentField:a[0],fields:a,facetCfg:i,hierarchy:o})},F9=function(t){var r=t.facetCfg,e=t.rootNode,n=t.hierarchy,i=r.dataSet.fields.customTreeItems;sC({customTreeItems:i,facetCfg:r,level:0,parentNode:e,hierarchy:n})},H9=function(t){var r=t.facetCfg,e=t.rootNode,n=t.hierarchy,i=r.hierarchyType,o=r.rows,a=r.dataSet;i==="tree"?uC({level:0,currentField:o[0],pivotMeta:a.rowPivotMeta,facetCfg:r,parentNode:e,hierarchy:n}):F9(t)},z9=function(t){var r=t.spreadsheet;r.isHierarchyTreeType()?H9(t):fC(t)},W9=function(t){var r=t.isPivotMode,e=t.hierarchy,n=t.rootNode,i=t.facetCfg;r?fC(t):I5({parentNode:n,hierarchy:e,facetCfg:i})},js=function(t){var r=t.isRowHeader,e=t.facetCfg,n=e.spreadsheet,i=e.rows,o=i===void 0?[]:i,a=e.columns,l=a===void 0?[]:a,s=n.dataCfg.fields.valueInCols,u=n.isPivotMode(),f=e.dataSet.moreThanOneValue(),h=Ge.rootNode(),d=new Vg,c={isValueInCols:s,isPivotMode:u,moreThanOneValue:f,rootNode:h,hierarchy:d,spreadsheet:n,facetCfg:e,fields:r?o:l,isRowHeader:r};r?z9(c):W9(c);var v=function(){return r&&n.isHierarchyTreeType()?d.getNodes():d.getLeaves()};return{hierarchy:d,leafNodes:v()}},k9=function(t){H(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.renderFrozenGroupSplitLine=function(n,i){var o;if((o=e.foregroundGroup.findById(ta))===null||o===void 0||o.remove(),e.enableFrozenFirstRow()){var a=Math.floor(i-e.getPaginationScrollY()),l=e.foregroundGroup.addGroup({id:ta,zIndex:Pi}),s=K(e.cfg,"spreadsheet.theme.splitLine"),u={lineWidth:s==null?void 0:s.horizontalBorderWidth,stroke:s==null?void 0:s.horizontalBorderColor,opacity:s==null?void 0:s.horizontalBorderColorOpacity},f=e.cornerBBox.height,h=e.getCellRange(),d=f+e.getTotalHeightForRange(h.start,h.start),c=e.panelBBox.viewportWidth+e.layoutResult.rowsHierarchy.width+e.getSeriesNumberWidth();$e(l,{x1:0,x2:c,y1:d,y2:d},S({},u)),s.showShadow&&a>0&&l.addShape("rect",{attrs:{x:0,y:d,width:c,height:s.shadowWidth,fill:e.getShadowFill(90)}})}},e}return r.prototype.updateFrozenGroupGrid=function(){var e=this;[Lt.FROZEN_ROW].forEach(function(n){if(e.frozenGroupInfo[n].range){var i=[],o=[];if(n.toLowerCase().includes("row")){var a=A(e.frozenGroupInfo[n].range,2),l=a[0],s=a[1];i=e.gridInfo.cols,o=cl(l,s,e.viewCellHeights)}e.spreadsheet["".concat(n,"Group")].updateGrid({cols:i,rows:o},"".concat(n,"Group"))}})},r.prototype.getBizRevisedFrozenOptions=function(){return Jn(this.cfg,this.layoutResult.rowNodes)},r.prototype.clip=function(e,n){var i=this.spreadsheet,o=i.isFrozenRowHeader,a=i.frozenRowGroup;if(!o.call(this.spreadsheet)){if(this.panelScrollGroupClip(e,n),this.enableFrozenFirstRow()){var l=this.getPaginationScrollY();a.setClip({type:"rect",attrs:{x:0,y:l,width:this.panelBBox.width+e,height:a.getBBox().height}})}return}t.prototype.clip.call(this,e,n)},Object.defineProperty(r.prototype,"rowCellTheme",{get:function(){return this.spreadsheet.theme.rowCell.cell},enumerable:!1,configurable:!0}),r.prototype.getContentHeight=function(){var e=this.layoutResult,n=e.rowsHierarchy,i=e.colsHierarchy;return n.height+i.height},r.prototype.doLayout=function(){var e=this,n=js({isRowHeader:!0,facetCfg:this.cfg}),i=n.leafNodes,o=n.hierarchy,a=js({isRowHeader:!1,facetCfg:this.cfg}),l=a.leafNodes,s=a.hierarchy;this.calculateNodesCoordinate(i,o,l,s);var u=this.cfg,f=u.dataSet,h=u.spreadsheet,d=function(v,p){var g=v||0,y=p||0,C=i[g],w=l[y];if(!C||!w)return null;var m=C.query,_=w.query,b=C.isTotals||C.isTotalMeasure||w.isTotals||w.isTotalMeasure,T=e.getMeasureInfo(),E=fa({},m,_,T),L=Li(C,w),F=f.getCellData({query:E,rowNode:C,isTotals:b,totalStatus:L}),I=E[re],B=K(F,dt,null);return{spreadsheet:h,x:w.x,y:C.y,width:w.width,height:C.height,data:F,rowIndex:g,colIndex:y,isTotals:b,valueField:I,fieldValue:B,rowQuery:m,colQuery:_,rowId:C.id,colId:w.id,id:vo(C.id,w.id)}},c={colNodes:s.getNodes(),colsHierarchy:s,rowNodes:o.getNodes(),rowsHierarchy:o,rowLeafNodes:i,colLeafNodes:l,getCellMeta:d,spreadsheet:h};return w5(this.cfg,c)},r.prototype.getMeasureInfo=function(){var e,n,i,o=this.cfg,a=o.dataSet,l=o.spreadsheet,s=l.options.hierarchyType,u=(n=K(l,"facet.cfg.colCfg.hideMeasureColumn"))!==null&&n!==void 0?n:!1;return u&&s!=="customTree"?(e={},e[re]=(i=a.fields.values)===null||i===void 0?void 0:i[0],e):{}},r.prototype.calculateNodesCoordinate=function(e,n,i,o){this.calculateRowNodesCoordinate(e,n,i),this.calculateColNodesCoordinate(i,o,e,n.width)},r.prototype.calculateColNodesCoordinate=function(e,n,i,o){for(var a,l,s,u=Ge.blankNode(),f=n.getNodes(),h=n.sampleNodesForAllLevels,d=0;d<h.length;d++){var c=h[d];if(c.height=this.getColNodeHeight(c),n.height+=c.height,c.level===0)c.y=0;else{var v=h[d-1];c.y=(a=(v==null?void 0:v.y)+(v==null?void 0:v.height))!==null&&a!==void 0?a:0}}for(var p=0,g=function(w){var m=f[w];if(m.isLeaf&&(m.colIndex=p,p+=1,m.x=u.x+u.width,m.width=y.calculateColLeafNodesWidth(m,e,i,o),n.width+=m.width,u=m),m.level===0)m.y=0;else{var _=n.sampleNodesForAllLevels.find(function(b){return b.level===m.level-1});m.y=(l=(_==null?void 0:_.y)+(_==null?void 0:_.height))!==null&&l!==void 0?l:0}m.height=y.getColNodeHeight(m),Os(y.cfg,null,m)},y=this,C=0;C<f.length;C++)g(C);this.autoCalculateColNodeWidthAndX(e),D((s=this.spreadsheet.options.totals)===null||s===void 0?void 0:s.col)||(this.adjustTotalNodesCoordinate({hierarchy:n,isRowHeader:!1,isSubTotal:!0}),this.adjustTotalNodesCoordinate({hierarchy:n,isRowHeader:!1,isSubTotal:!1}))},r.prototype.autoCalculateColNodeWidthAndX=function(e){for(var n,i=null,o=0,a=e.slice(0);o<a.length;){var l=a[o++],s=l.parent;if(i!==s&&s){a.push(s);var u=(n=s.children)===null||n===void 0?void 0:n.find(function(d){return d.width}),f=u==null?void 0:u.x,h=Ig(s.children,"width");s.x=f,s.width=h,i=s}}},r.prototype.calculateColLeafNodesWidth=function(e,n,i,o){var a,l,s,u,f,h=this.cfg,d=h.colCfg,c=h.dataSet,v=h.filterDisplayDataItem,p=this.getCellDraggedWidth(e);if(it(p))return p;var g=this.getCellCustomWidth(e,d==null?void 0:d.width);if(it(g))return g;if(this.spreadsheet.getLayoutWidthType()===Cn.Compact){for(var y=this.spreadsheet.theme.colCell,C=y.bolderText,w=y.cell,m=y.icon,_=this.spreadsheet.theme.dataCell.text,b=this.spreadsheet.dataSet.getFieldFormatter(e.field),T=(a=b==null?void 0:b(e.value))!==null&&a!==void 0?a:e.label,E=this.getExpectedCellIconWidth(N.COL_CELL,this.spreadsheet.isValueInCols()&&this.spreadsheet.options.showDefaultHeaderActionIcon,m),L=this.spreadsheet.measureTextWidth(T,C)+E,F=this.getMeasureInfo(),I=void 0,B=0,k=0,U=0;U<bl;U++){var O=i[U];if(O){var z=c.getCellData({query:S(S({},e.query),O.query),rowNode:O,isTotals:e.isTotals||e.isTotalMeasure||O.isTotals||O.isTotalMeasure,totalStatus:Li(O,e)});if(z){var ue=yy(z,v),le=(s=(l=this.spreadsheet.dataSet.getFieldFormatter(z[re]))===null||l===void 0?void 0:l(ue))!==null&&s!==void 0?s:ue,te="".concat(le),Ce=fa({},O.query,e.query,F),fe=Ce[re],we=ny(this.spreadsheet.options.conditions,this.spreadsheet.theme.dataCell.icon,fe),Ee=we.size,he=we.margin,me=he.left,Ie=he.right,yr=Ee+me+Ie,en=this.spreadsheet.measureTextWidth(te,_)+yr;en>B&&(I=te,B=en,k=yr)}}}var tn=L>B,Co=tn?T:I,vl=tn?E:k;rr.getInstance().logger("Max Label In Col:",e.field,Co,B);var vC=this.spreadsheet.measureTextWidth(Co,S(S({},C),{fontSize:Math.max(_.fontSize,C.fontSize)}));return vC+((u=w.padding)===null||u===void 0?void 0:u.left)+((f=w.padding)===null||f===void 0?void 0:f.right)+vl}return this.spreadsheet.isHierarchyTreeType()?this.getAdaptTreeColWidth(e,n,i):this.getAdaptGridColWidth(n,o)},r.prototype.getColNodeHeight=function(e){var n=this.cfg.colCfg,i=K(n,["heightByField",e.key]);return i??(n==null?void 0:n.height)},r.prototype.getExpectedCellIconWidth=function(e,n,i){var o,a=0;if(n)a=1;else{var l=If(oe(this.spreadsheet.options.headerActionIcons,function(s){return S(S({},s),{displayCondition:function(){return!0}})}),null,e);a=(o=l==null?void 0:l.iconNames.length)!==null&&o!==void 0?o:0}return a?a*(i.size+i.margin.left)+i.margin.right:0},r.prototype.calculateRowNodesCoordinate=function(e,n,i){var o,a,l,s,u,f,h,d,c,v,p=this.cfg,g=p.cellCfg,y=p.spreadsheet,C=y.isHierarchyTreeType(),w=K(y,"options.style.rowCfg.heightByField",{}),m=(l=n.sampleNodesForAllLevels)!==null&&l!==void 0?l:[];if(C)n.width=this.getTreeRowHeaderWidth();else try{for(var _=Ot(n.sampleNodesForAllLevels),b=_.next();!b.done;b=_.next()){var T=b.value;T.width=this.calculateGridRowNodesWidth(T,i),n.width+=T.width;var E=(s=m[T.level-1])!==null&&s!==void 0?s:{x:0,width:0};T.x=(E==null?void 0:E.x)+(E==null?void 0:E.width)}}catch(O){o={error:O}}finally{try{b&&!b.done&&(a=_.return)&&a.call(_)}finally{if(o)throw o.error}}for(var L=Ge.blankNode(),F=n.getNodes(),I=0;I<F.length;I++){var B=F[I],k=C||!C&&B.isLeaf;if(k&&((u=B.rowIndex)!==null&&u!==void 0||(B.rowIndex=I),(f=B.colIndex)!==null&&f!==void 0||(B.colIndex=I),B.y=L.y+L.height,B.height=((h=w==null?void 0:w[B.id])!==null&&h!==void 0?h:g==null?void 0:g.height)+((d=this.rowCellTheme.padding)===null||d===void 0?void 0:d.top)+((c=this.rowCellTheme.padding)===null||c===void 0?void 0:c.bottom),L=B,n.height+=B.height),C||B.level===0)B.x=0;else{var E=m[B.level-1];B.x=(E==null?void 0:E.x)+(E==null?void 0:E.width)}if(C)B.width=this.getTreeRowHeaderWidth();else{var U=m[B.level];B.width=U==null?void 0:U.width}Os(this.cfg,B,null)}C||(this.autoCalculateRowNodeHeightAndY(e),D((v=y.options.totals)===null||v===void 0?void 0:v.row)||(this.adjustTotalNodesCoordinate({hierarchy:n,isRowHeader:!0,isSubTotal:!1}),this.adjustTotalNodesCoordinate({hierarchy:n,isRowHeader:!0,isSubTotal:!0})))},r.prototype.autoCalculateRowNodeHeightAndY=function(e){for(var n=null,i=0,o=e.slice(0);i<o.length;){var a=o[i++],l=a.parent;n!==l&&l&&(o.push(l),l.y=l.children[0].y,l.height=l.children.reduce(function(s,u){return s+u.height},0),n=l)}},r.prototype.getMultipleMap=function(e,n,i){for(var o=e.maxLevel,a=this.cfg,l=a.totals,s=a.dataSet,u=s.moreThanOneValue(),f=s.fields,h=f.rows,d=f.columns,c=n?h:d,v=n?l.row:l.col,p=i?v.subTotalsGroupDimensions||[]:v.totalsGroupDimensions||[],g=s.isEmpty()?[]:p,y=Array.from({length:o+1},function(){return 1}),C=o;C>0;C--){var w=c[C],m=w===re&&u;g.includes(w)||m||(y[C-1]+=y[C],y[C]=0)}return y},r.prototype.adjustTotalNodesCoordinate=function(e){var n=e.hierarchy,i=e.isRowHeader,o=e.isSubTotal,a=this.getMultipleMap(n,i,o),l=Mr(n.getNodes(),function(u){return o?u.isSubTotals:u.isGrandTotals}),s=i?"width":"height";J(l,function(u){var f,h=a[u.level];if(!h&&o)for(var d=1;h<1;)h=a[u.level-d]-d,d++;for(var c=0,v=function(g){c+=((f=n.sampleNodesForAllLevels.find(function(y){return y.level===u.level+g}))===null||f===void 0?void 0:f[s])||0},p=0;p<h;p++)v(p);u[s]=c})},r.prototype.calculateGridRowNodesWidth=function(e,n){var i=this.cfg,o=i.rowCfg,a=i.spreadsheet,l=K(o,["widthByField",e.key]);if(it(l))return l;var s=this.getCellCustomWidth(e,o==null?void 0:o.width);return it(s)?s:a.getLayoutWidthType()!==Cn.Adaptive?this.getCompactGridRowWidth(e):this.getAdaptGridColWidth(n)},r.prototype.getAdaptTreeColWidth=function(e,n,i){var o=this.getCanvasHW().width,a=o-this.getSeriesNumberWidth(),l=Math.min(a/2,this.getTreeRowHeaderWidth()),s=Math.max(1,n.length),u=this.cfg.cellCfg;return Math.max(Ml(u,this.getColLabelLength(e,i)),(a-l)/s)},r.prototype.getColLabelLength=function(e,n){var i,o=e6(e==null?void 0:e.value);if(X(o))return o.length;for(var a=1,l=0;l<bl;l++){var s=n[l];if(!s)return a;for(var u=this.cfg.dataSet.getCellData({query:S(S({},e.query),s.query),rowNode:s,isTotals:e.isTotals||e.isTotalMeasure||s.isTotals||s.isTotalMeasure,totalStatus:Li(s,e)}),f=Ae(u==null?void 0:u[cu]),h=0;h<f.length;h++){var d=u[f[h]],c=Pn((i=d==null?void 0:d.values)===null||i===void 0?void 0:i[0]);c>a&&(a=c)}}return a},r.prototype.getAdaptGridColWidth=function(e,n){var i=this.cfg,o=i.rows,a=i.cellCfg,l=o.length,s=e.length,u=this.getCanvasHW().width,f=u-this.getSeriesNumberWidth(),h=Math.max(1,l+s);return n?Math.max(Ml(a),(f-n)/s):Math.max(Ml(a),f/h)},r.prototype.getTreeRowHeaderWidth=function(){var e,n,i,o,a=this.cfg,l=a.rows,s=a.dataSet,u=a.rowCfg,f=a.treeRowsWidth,h=f??(u==null?void 0:u.treeRowsWidth);if(it(h))return h;var d=this.getCellCustomWidth(null,u==null?void 0:u.width);if(it(d))return d;var c=l.map(function(w){return s.getFieldName(w)}).join("/"),v=this.spreadsheet.theme.cornerCell,p=v.bolderText,g=v.icon,y=1+this.spreadsheet.measureTextWidth(c,p)+g.size*2+((e=g.margin)===null||e===void 0?void 0:e.left)+((n=g.margin)===null||n===void 0?void 0:n.right)+((i=this.rowCellTheme.padding)===null||i===void 0?void 0:i.left)+((o=this.rowCellTheme.padding)===null||o===void 0?void 0:o.right),C=Math.max(h??ad,y);return Number.isNaN(C)?ad:C},r.prototype.getCompactGridRowWidth=function(e){var n=this,i,o=this.cfg,a=o.dataSet,l=o.spreadsheet,s=l.theme.rowCell,u=s.bolderText,f=s.icon,h=s.cell,d=l.theme.cornerCell,c=d.bolderText,v=d.icon,p=d.cell,g=e.field,y=e.isLeaf,C=this.getExpectedCellIconWidth(N.ROW_CELL,!l.isValueInCols()&&y&&l.options.showDefaultHeaderActionIcon,f),w=(i=a.getDimensionValues(g))===null||i===void 0?void 0:i.slice(0,bl).map(function(L){var F,I;return(I=(F=n.spreadsheet.dataSet.getFieldFormatter(g))===null||F===void 0?void 0:F(L))!==null&&I!==void 0?I:L}),m=Ju(w,function(L){return"".concat(L).length}),_=l.measureTextWidth(m,u)+C+h.padding.left+h.padding.right,b=a.getFieldName(g),T=this.getExpectedCellIconWidth(N.CORNER_CELL,!1,v),E=l.measureTextWidth(b,c)+T+p.padding.left+p.padding.right;return rr.getInstance().logger("Max Label In Row:",g,_>E?m:b),Math.max(_,E)},r.prototype.getViewCellHeights=function(e){var n=e.rowLeafNodes,i=Qa(n,function(o,a){return o.push(ge(o)+a.height),o},[0]);return{getTotalHeight:function(){return ge(i)||0},getCellOffsetY:function(o){return i[o]||0},getTotalLength:function(){return i.length-1},getIndexRange:function(o,a){return tC(i,o,a)}}},r.prototype.getRowHeader=function(){if(!this.rowHeader){var e=this.getRowHeaderCfg(),n=e.viewportHeight,i=Sa(e,["viewportHeight"]),o=Jn(this.cfg,this.layoutResult.rowNodes).frozenRowHeight;return new D9(S(S({},i),{viewportHeight:n-o}))}},r.prototype.enableFrozenFirstRow=function(){return!!this.getBizRevisedFrozenOptions().frozenRowCount},r}(lC),G9=function(t){H(r,t);function r(e){var n=this,i,o,a;n=t.call(this,e)||this,n.getScrollGroupClipBBox=function(){var v,p=n.headerConfig,g=p.width,y=p.height,C=p.scrollX,w=p.spreadsheet,m=w.options;if(!m.frozenColCount&&!m.frozenTrailingColCount)return{x:C,y:0,width:g,height:y};for(var _=(v=w.facet)===null||v===void 0?void 0:v.layoutResult.colLeafNodes,b=Hr(w.options,_.length),T=b.frozenColCount,E=b.frozenTrailingColCount,L=0,F=0,I=0;I<T;I++)L+=_[I].width;for(var I=0;I<E;I++)F+=_[_.length-1-I].width;var B=g-L-F;return{x:C+L,y:0,width:B,height:y}};var l=(i=n.headerConfig.spreadsheet)===null||i===void 0?void 0:i.options,s=l.frozenColCount,u=l.frozenTrailingColCount,f=(a=(o=n.headerConfig.spreadsheet)===null||o===void 0?void 0:o.facet)===null||a===void 0?void 0:a.layoutResult.colNodes.filter(function(v){return nr(v)}),h=ca(f,s,u),d=h.colCount,c=h.trailingColCount;return n.finalColCount=d,n.finalTrailingColCount=c,d&&(n.frozenColGroup=n.addGroup({name:Ix,zIndex:Pi})),c&&(n.frozenTrailingColGroup=n.addGroup({name:Ox,zIndex:Pi})),n}return r.prototype.isFrozenCell=function(e){var n=this.headerConfig.spreadsheet,i=n==null?void 0:n.options,o=i.frozenColCount,a=i.frozenTrailingColCount,l=e.colIndex,s=n==null?void 0:n.facet.layoutResult.colLeafNodes;return dn(l,o)||cn(l,a,s.length)},r.prototype.clear=function(){var e,n,i=this.headerConfig.spreadsheet;t.prototype.clear.call(this),(e=this.frozenTrailingColGroup)===null||e===void 0||e.clear(),(n=this.frozenColGroup)===null||n===void 0||n.clear();var o=i==null?void 0:i.foregroundGroup.findById(op);o==null||o.clear()},r.prototype.getCellInstance=function(e,n,i){return e.field===yn?new TN(e,n,i):new Ry(e,n,i)},r.prototype.getCellGroup=function(e){var n,i=this.headerConfig.spreadsheet,o=Bs(e).colIndex;return dn(o,this.finalColCount)?this.frozenColGroup:cn(o,this.finalTrailingColCount,(n=i==null?void 0:i.facet)===null||n===void 0?void 0:n.layoutResult.colLeafNodes.length)?this.frozenTrailingColGroup:this.scrollGroup},r.prototype.isColCellInRect=function(e){var n,i=this.headerConfig.spreadsheet,o=(n=i==null?void 0:i.facet)===null||n===void 0?void 0:n.layoutResult.colLeafNodes.length,a=Bs(e).colIndex;return dn(a,this.finalColCount)||cn(a,this.finalTrailingColCount,o)?!0:t.prototype.isColCellInRect.call(this,e)},r.prototype.clip=function(){this.scrollGroup.setClip({type:"rect",attrs:this.getScrollGroupClipBBox()})},r}($f),$9=function(t){H(r,t);function r(e){var n=t.call(this,e)||this;n.onSortHandler=function(o){var a=n.spreadsheet,l=o;Array.isArray(o)||(l=[o]);var s=a.dataCfg.sortParams||[];l=l.map(function(f){var h,d,c=S(S({},f),{sortFieldId:(h=f.sortKey)!==null&&h!==void 0?h:f.sortFieldId}),v=(d=s.find(function(p){return p.sortFieldId===c.sortFieldId}))!==null&&d!==void 0?d:{};return S(S({},v),c)});var u=s.filter(function(f){var h=l.find(function(d){return d.sortFieldId===f.sortFieldId});return!h});$i(a.dataCfg,"sortParams",P(P([],A(u),!1),A(l),!1)),a.setDataCfg(a.dataCfg),a.render(!0),a.emit(R.RANGE_SORTED,a.dataSet.getDisplayDataSet())},n.onFilterHandler=function(o){var a=n.spreadsheet,l=!o.filteredValues||o.filteredValues.length===0,s=a.dataCfg.filterParams||[],u=s.findIndex(function(f){return f.filterKey===o.filterKey});u!==-1?l?s.splice(u,1):s[u]=o:s.push(o),$i(a.dataCfg,"filterParams",s),a.render(!0),a.emit(R.RANGE_FILTERED,a.dataSet.getDisplayDataSet())},n.renderFrozenPanelCornerGroup=function(){var o=n.layoutResult.colNodes.filter(function(g){return nr(g)}),a=n.getCellRange(),l=Hr(n.spreadsheet.options,o.length,a.end-a.start+1),s=l.frozenRowCount,u=l.frozenColCount,f=l.frozenTrailingRowCount,h=l.frozenTrailingColCount,d=ca(o,u,h),c=d.colCount,v=d.trailingColCount,p=b5({frozenRowCount:s,frozenColCount:c,frozenTrailingRowCount:f,frozenTrailingColCount:v},n.layoutResult.colLeafNodes.length,a);Object.keys(p).forEach(function(g){var y=p[g],C=n.spreadsheet[fp[g]];C&&y.forEach(function(w){n.addFrozenCell(w.x,w.y,C)})})},n.addFrozenCell=function(o,a,l){var s=n.layoutResult.getCellMeta(a,o);if(s.isFrozenCorner=!0,s){var u=n.cfg.dataCell(s);l.add(u)}};var i=n.spreadsheet;return i.on(R.RANGE_SORT,n.onSortHandler),i.on(R.RANGE_FILTER,n.onFilterHandler),n}return r.prototype.updateRowResizeArea=function(){var e=this.spreadsheet,n=e.foregroundGroup,i=e.options,o=K(i,"interaction.resize"),a=tr(o)?o:o==null?void 0:o.rowCellVertical;if(a){var l=n.findById(qn),s=n.findById(np);l&&l.set("children",[]),s&&s.set("children",[]);var u=Ai(this.panelGroup.getChildren(),sl).filter(function(f){return f.shouldDrawResizeArea()});u==null||u.forEach(function(f){f.drawResizeArea()})}},r.prototype.clip=function(e,n){t.prototype.clip.call(this,e,n),this.clipResizeAreaGroup()},r.prototype.clipResizeAreaGroup=function(){var e,n,i=this.spreadsheet.foregroundGroup.findById(qn);if(i){var o=this.layoutResult.colLeafNodes,a=this.spreadsheet,l=a.frozenRowGroup,s=a.frozenTrailingRowGroup,u=0,f=0;l&&(u=l.getBBox().height),s&&(f=s.getBBox().height);var h=this.panelBBox.height-u-f;i.setClip({type:"rect",attrs:{x:0,y:u+this.cornerBBox.height,width:(n=(e=o==null?void 0:o[0])===null||e===void 0?void 0:e.width)!==null&&n!==void 0?n:0,height:h}})}},r.prototype.getContentHeight=function(){var e=this.getViewCellHeights().getTotalHeight,n=this.layoutResult.colsHierarchy;return e()+n.height},Object.defineProperty(r.prototype,"dataCellTheme",{get:function(){return this.spreadsheet.theme.dataCell.cell},enumerable:!1,configurable:!0}),r.prototype.destroy=function(){var e=this.spreadsheet;e.off(R.RANGE_SORT,this.onSortHandler),e.off(R.RANGE_FILTER,this.onFilterHandler),t.prototype.destroy.call(this)},r.prototype.calculateCornerBBox=function(){var e=this.layoutResult.colsHierarchy,n=Math.floor(e.height);this.cornerBBox=new iC(this),this.cornerBBox.height=n,this.cornerBBox.maxY=n},r.prototype.doLayout=function(){var e=this,n=this.cfg,i=n.dataSet,o=n.spreadsheet,a=new Vg,l=js({isRowHeader:!1,facetCfg:this.cfg}),s=l.leafNodes,u=l.hierarchy;this.calculateColNodesCoordinate(s,u);var f=function(d,c){var v,p=e.cfg.showSeriesNumber,g=s[c],y=e.getCellHeight(d),C=e.getCellRange(),w=Hr(e.cfg,s.length,C.end-C.start+1).frozenTrailingRowCount,m,_=g.x,b=e.viewCellHeights.getCellOffsetY(d);return ho(d,C.end,w)&&(b=e.panelBBox.maxY-e.getTotalHeightForRange(d,C.end)),p&&g.field===yn?m="".concat(d+1):m=i.getCellData({query:{field:g.field,rowIndex:d}}),{spreadsheet:o,x:_,y:b,width:g.width,height:y,data:(v={},v[g.field]=m,v),rowIndex:d,colIndex:c,isTotals:!1,colId:g.id,rowId:String(d),valueField:g.field,fieldValue:m,id:vo(String(d),g.id)}},h={colNodes:u.getNodes(),colsHierarchy:u,rowNodes:a.getNodes(),rowsHierarchy:a,rowLeafNodes:a.getLeaves(),colLeafNodes:s,getCellMeta:f,spreadsheet:o};return h},r.prototype.getAdaptiveColWidth=function(e){var n=this.cfg.cellCfg,i=this.cfg.showSeriesNumber;if(this.spreadsheet.getLayoutWidthType()!==Cn.Compact){var o=this.getSeriesNumberWidth(),a=e.length-(i?1:0),l=this.getCanvasHW().width-o;return Math.max(n==null?void 0:n.width,l/Math.max(1,a))}return n==null?void 0:n.width},r.prototype.getColNodeHeight=function(e,n){var i=this.cfg.colCfg,o=Ir(i==null?void 0:i.heightByField)[0],a=o||(i==null?void 0:i.height);if(!n||e.children&&e.children.length)return a;for(;e.parent;)n-=nr(e)?0:a,e=e.parent;return n},r.prototype.calculateColNodesCoordinate=function(e,n){var i,o,a,l,s,u,f=Ge.blankNode(),h=n.getNodes();try{for(var d=Ot(n.sampleNodesForAllLevels),c=d.next();!c.done;c=d.next()){var v=c.value;v.height=this.getColNodeHeight(v),n.height+=v.height}}catch(E){i={error:E}}finally{try{c&&!c.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}for(var p=this.getAdaptiveColWidth(e),g=0,y=0;y<h.length;y++){var C=h[y];C.isLeaf&&(C.colIndex=g,g+=1,C.x=f.x+f.width,C.width=this.calculateColLeafNodesWidth(C,p),Os(this.cfg,null,C),n.width+=C.width,f=C),C.level===0?C.y=0:C.y=(s=((a=C.parent)===null||a===void 0?void 0:a.y)+((l=C.parent)===null||l===void 0?void 0:l.height))!==null&&s!==void 0?s:0,C.height=this.getColNodeHeight(C,n.height)}var w=h.filter(function(E){return nr(E)}),m=Hr((u=this.spreadsheet)===null||u===void 0?void 0:u.options,w.length).frozenTrailingColCount;f=Ge.blankNode();var _=this.getCanvasHW().width;if(m>0)for(var b=ca(w,0,m).trailingColCount,T=h.filter(function(E){return E.isLeaf}),y=1;y<=b;y++){var C=T[T.length-y];y===1?C.x=_-C.width:C.x=f.x-C.width,f=C}this.autoCalculateColNodeWidthAndX(e)},r.prototype.autoCalculateColNodeWidthAndX=function(e){for(var n=null,i=e.slice(0);i.length;){var o=i.shift(),a=o.parent;n!==a&&a&&(i.push(a),a.x=a.children[0].x,a.width=a.children.map(function(l){return l.width}).reduce(function(l,s){return l+s},0),n=a)}},r.prototype.calculateColLeafNodesWidth=function(e,n){var i=this.cfg,o=i.colCfg,a=i.dataSet,l=i.spreadsheet,s=this.spreadsheet.getLayoutWidthType(),u=this.getCellDraggedWidth(e);if(it(u))return u;var f=this.getCellCustomWidth(e,o==null?void 0:o.width);if(it(f))return f;var h;if(s===Cn.Compact){var d=a.getDisplayDataSet(),c=a.getFieldFormatter(e.field),v=Ju(d==null?void 0:d.slice(0,50).map(function(b){var T;return"".concat((T=c==null?void 0:c(b[e.field]))!==null&&T!==void 0?T:b[e.field])}),function(b){return l.measureTextWidthRoughly(b)});rr.getInstance().logger("Max Label In Col:",e.field,v);var p=l.theme.colCell.bolderText,g=l.theme.dataCell,y=g.text,C=g.cell,w=1,m=l.measureTextWidth(v,y)+C.padding.left+C.padding.right+w,_=l.measureTextWidth(e.label,p)+bN(this.spreadsheet,e,l.theme.colCell);h=Math.max(_,m)}else h=n;return e.field===yn&&(h=this.getSeriesNumberWidth()),h},r.prototype.initRowOffsets=function(){var e=this,n,i=this.cfg.dataSet,o=(((n=this.spreadsheet.options.style)===null||n===void 0?void 0:n.rowCfg)||{}).heightByField,a=o===void 0?{}:o;if(Object.keys(a).length){var l=i.getDisplayDataSet();this.rowOffsets=[0];var s=0;l.forEach(function(u,f){var h,d=(h=a==null?void 0:a[String(f)])!==null&&h!==void 0?h:e.getDefaultCellHeight(),c=s+d;e.rowOffsets.push(c),s=c})}},r.prototype.getCellHeight=function(e){var n;if(this.rowOffsets){var i=(((n=this.spreadsheet.options.style)===null||n===void 0?void 0:n.rowCfg)||{}).heightByField,o=i===void 0?{}:i,a=o==null?void 0:o[String(e)];if(it(a))return a}return this.getDefaultCellHeight()},r.prototype.getViewCellHeights=function(){var e=this,n=this.cfg.dataSet,i=this.getDefaultCellHeight();return{getTotalHeight:function(){return e.rowOffsets?ge(e.rowOffsets):i*n.getDisplayDataSet().length},getCellOffsetY:function(o){if(o<=0)return 0;if(e.rowOffsets)return e.rowOffsets[o];for(var a=0,l=0;l<o;l++)a+=i;return a},getTotalLength:function(){return n.getDisplayDataSet().length},getIndexRange:function(o,a){if(e.rowOffsets)return tC(e.rowOffsets,o,a);var l=Math.floor(o/i),s=a%i===0?a/i-1:Math.floor(a/i);return{start:Math.max(0,l),end:Math.max(0,s)}}}},r.prototype.init=function(){this.initRowOffsets(),t.prototype.init.call(this);var e=this.panelBBox,n=e.width,i=e.height;this.spreadsheet.panelGroup.setClip({type:"rect",attrs:{x:0,y:this.cornerBBox.height,width:n,height:i}})},r.prototype.getColHeader=function(){if(!this.columnHeader){var e=this.panelBBox,n=e.x,i=e.width,o=e.viewportHeight,a=e.viewportWidth;return new G9({width:i,height:this.cornerBBox.height,viewportWidth:a,viewportHeight:o,cornerWidth:this.cornerBBox.width,position:{x:n,y:0},data:this.layoutResult.colNodes,scrollContainsRowHeader:this.cfg.spreadsheet.isScrollContainsRowHeader(),sortParam:this.cfg.spreadsheet.store.get("sortParam"),spreadsheet:this.spreadsheet})}return this.columnHeader},r.prototype.render=function(){this.renderFrozenPanelCornerGroup(),t.prototype.render.call(this)},r.prototype.getRowHeader=function(){return null},r.prototype.getSeriesNumberHeader=function(){return null},r}(lC),hC=function(t){H(r,t);function r(e){var n=t.call(this,e)||this;return n.gridInfo={cols:[],rows:[]},n.updateGrid=function(i,o){o===void 0&&(o=ed);var a=n.getBBox(),l=n.s2,s=l.theme,u=l.isTableMode,f=s.dataCell.cell,h=u()&&(o===ed||o===rp);(!n.gridGroup||!n.findById(o))&&(n.gridGroup=n.addGroup({id:o})),n.gridGroup.clear(),n.gridInfo=i,h&&n.gridInfo.cols.unshift(0);var d=f.verticalBorderWidth,c=f.verticalBorderWidth/2;n.gridInfo.cols.forEach(function(g){$e(n.gridGroup,{x1:g,x2:g,y1:Math.ceil(a.minY+c),y2:Math.floor(a.maxY-c)},{stroke:f.verticalBorderColor,strokeOpacity:f.verticalBorderColorOpacity,lineWidth:d,lineCap:nd,lineDash:f.borderDash})});var v=f.horizontalBorderWidth,p=f.horizontalBorderWidth/2;n.gridInfo.rows.forEach(function(g){$e(n.gridGroup,{x1:Math.ceil(a.minX+p),x2:Math.floor(a.maxX-p),y1:g,y2:g},{stroke:f.horizontalBorderColor,strokeOpacity:f.horizontalBorderColorOpacity,lineWidth:v,lineCap:nd,lineDash:f.borderDash})}),n.gridGroup.toFront()},n.s2=e.s2,n}return r}(hr),dC=function(t){H(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r}(hC),Y9=function(t){H(r,t);function r(e){var n=t.call(this,e)||this;return n.initMergedCellsGroup(),n}return r.prototype.initMergedCellsGroup=function(){this.mergedCellsGroup&&this.findById(Qh)||(this.mergedCellsGroup=this.addGroup({id:Qh}))},r.prototype.updateMergedCells=function(){this.initMergedCellsGroup(),sN(this.s2,this.mergedCellsGroup),this.mergedCellsGroup.toFront()},r.prototype.addMergeCell=function(e){var n;(n=this.mergedCellsGroup)===null||n===void 0||n.add(e)},r.prototype.update=function(e){this.updateGrid(e),this.updateMergedCells()},r}(hC),Qt=function(){function t(r){var e=this;this.isLinkFieldText=function(n){var i=e.getCellAppendInfo(n);return i==null?void 0:i.isLinkFieldText},this.spreadsheet=r,this.bindEvents()}return t.prototype.getCellAppendInfo=function(r){var e,n;return((e=r==null?void 0:r.attr)===null||e===void 0?void 0:e.call(r,"appendInfo"))||((n=r==null?void 0:r.attrs)===null||n===void 0?void 0:n.appendInfo)||{}},t.prototype.reset=function(){},t}(),U9=function(t){H(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.bindEvents=function(){this.bindDataCellClick()},r.prototype.bindDataCellClick=function(){var e=this;this.spreadsheet.on(R.DATA_CELL_CLICK,function(n){var i;n.stopPropagation();var o=e.spreadsheet.interaction;if(o.clearHoverTimer(),!o.hasIntercepts([Q.CLICK])){if(e.isLinkFieldText(n.target)){e.emitLinkFieldClickEvent(n);return}var a=e.spreadsheet.getCell(n.target),l=a.getMeta();if(l){if(o.addIntercepts([Q.HOVER]),o.isSelectedCell(a)){((i=n.originalEvent)===null||i===void 0?void 0:i.detail)===1&&(o.reset(),e.spreadsheet.emit(R.GLOBAL_SELECTED,o.getActiveCells()));return}o.changeState({cells:[or(a)],stateName:G.SELECTED,onUpdateCells:Df}),e.spreadsheet.emit(R.GLOBAL_SELECTED,[a]),e.showTooltip(n,l);var s=l.rowId,u=l.colId,f=l.spreadsheet,h=o.getSelectedCellHighlight(),d=h.colHeader,c=h.rowHeader;if(d&&gy(u,o.getAllColHeaderCells(),G.SELECTED),c&&s){var v=$N(l,f);J(v,function(p){p.updateByState(G.SELECTED)})}}}})},r.prototype.getTooltipOperator=function(e,n){var i=this,o=k4(),a=this.spreadsheet.getCell(e.target),l=zf(this.spreadsheet,e).operation,s=l.trend&&S(S({},o),{onClick:function(){i.spreadsheet.emit(R.DATA_CELL_TREND_ICON_CLICK,S(S({},n),{record:i.spreadsheet.isTableMode()?i.spreadsheet.dataSet.getCellData({query:{rowIndex:n.rowIndex}}):void 0})),i.spreadsheet.hideTooltip()}});return Xy(l,{defaultMenus:[s],cell:a})},r.prototype.showTooltip=function(e,n){var i=n.data,o=n.isTotals,a=o===void 0?!1:o,l=n.value,s=n.fieldValue,u=n.field,f=n.valueField,h=i,d=this.spreadsheet.isTableMode(),c=d?S(S({},h),{value:l||s,valueField:u||f}):h,v=[c||S(S({},n.rowQuery),n.colQuery)],p=this.getTooltipOperator(e,n);this.spreadsheet.showTooltipWithInfo(e,v,{isTotals:a,operator:p,enterable:!0,hideSummary:!0,showSingleTips:d})},r.prototype.emitLinkFieldClickEvent=function(e){var n=this.getCellAppendInfo(e.target).cellData,i=n.valueField,o=n.data;this.spreadsheet.emit(R.GLOBAL_LINK_FIELD_JUMP,{key:i,cellData:n,record:Object.assign({rowIndex:n.rowIndex},o)})},r}(Qt),X9=function(t){H(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.bindEvents=function(){this.bindDataCellClick()},r.prototype.bindDataCellClick=function(){var e=this;this.spreadsheet.on(R.MERGED_CELLS_CLICK,function(n){n.stopPropagation();var i=e.spreadsheet.interaction;i.hasIntercepts([Q.CLICK])||i.addIntercepts([Q.HOVER])})},r}(Qt),V9=function(t){H(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.isMultiSelection=!1,e.handleRowColClick=function(n){if(n.stopPropagation(),!e.isLinkFieldText(n.target)){var i=e.spreadsheet,o=i.interaction,a=i.options,l=e.spreadsheet.getCell(n.target),s=a.interaction.multiSelection,u=!!(s&&e.isMultiSelection),f=o.selectHeaderCell({cell:l,isMultiSelection:u});f&&e.showTooltip(n)}},e.getHideColumnField=function(n){return e.spreadsheet.isTableMode()?n.field:n.id},e}return r.prototype.bindEvents=function(){this.bindKeyboardDown(),this.bindKeyboardUp(),this.bindColCellClick(),this.bindRowCellClick(),this.bindTableColExpand(),this.bindMouseMove()},r.prototype.reset=function(){this.isMultiSelection=!1,this.spreadsheet.interaction.removeIntercepts([Q.CLICK])},r.prototype.bindKeyboardDown=function(){var e=this;this.spreadsheet.on(R.GLOBAL_KEYBOARD_DOWN,function(n){Ca(n)&&(e.isMultiSelection=!0)})},r.prototype.bindKeyboardUp=function(){var e=this;this.spreadsheet.on(R.GLOBAL_KEYBOARD_UP,function(n){Ca(n)&&e.reset()})},r.prototype.bindMouseMove=function(){var e=this;this.spreadsheet.on(R.GLOBAL_MOUSE_MOVE,function(n){e.isMultiSelection&&!Iy(n)&&e.reset()})},r.prototype.bindRowCellClick=function(){var e=this;this.spreadsheet.on(R.ROW_CELL_CLICK,function(n){e.handleRowColClick(n)})},r.prototype.bindColCellClick=function(){var e=this;this.spreadsheet.on(R.COL_CELL_CLICK,function(n){e.handleRowColClick(n)})},r.prototype.showTooltip=function(e){var n=zf(this.spreadsheet,e),i=n.operation,o=n.showTooltip;if(o){var a=this.spreadsheet.interaction,l=a.isSelectedState()?e9(a.getActiveCells()):[],s=this.getTooltipOperator(e,i);this.spreadsheet.showTooltipWithInfo(e,l,{showSingleTips:!0,operator:s})}},r.prototype.getTooltipOperator=function(e,n){var i=this,o=this.spreadsheet.getCell(e.target),a=o.getMeta(),l=o.cellType===N.COL_CELL,s=this.spreadsheet.getColumnLeafNodes().length===1,u=W4(),f=l&&!s&&a.isLeaf&&n.hiddenColumns,h=f&&S(S({},u),{onClick:function(){i.hideSelectedColumns()}});return Xy(n,{defaultMenus:[h],cell:o})},r.prototype.bindTableColExpand=function(){var e=this;this.spreadsheet.on(R.LAYOUT_COLS_EXPANDED,function(n){e.handleExpandIconClick(n)})},r.prototype.hideSelectedColumns=function(){var e=this.spreadsheet.interaction,n=e.getActiveCells().map(function(o){return o.getMeta()}),i=n.map(this.getHideColumnField);Af(this.spreadsheet,i,!0)},r.prototype.handleExpandIconClick=function(e){var n=this.spreadsheet.store.get("hiddenColumnsDetail",[]),i=(Ua(n,function(f){var h=f.displaySiblingNode;return Fs(h,e.id)})||{}).hideColumnNodes,o=i===void 0?[]:i,a=this.spreadsheet.options.interaction.hiddenColumnFields,l=o.map(this.getHideColumnField),s=F0(a,l),u=n.filter(function(f){var h=f.displaySiblingNode;return!Fs(h,e.id)});this.spreadsheet.setOptions({interaction:{hiddenColumnFields:s}}),this.spreadsheet.store.set("hiddenColumnsDetail",u),this.spreadsheet.interaction.reset(),this.spreadsheet.render(!1)},r}(Qt),q9=function(t){H(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.getRowData=function(n){var i,o=n.getHeadLeafChild(),a=e.spreadsheet.dataSet.getMultiData(o==null?void 0:o.query)[0];return S(S({},a),{rowIndex:(i=n.rowIndex)!==null&&i!==void 0?i:o.rowIndex})},e}return r.prototype.bindEvents=function(){this.bindRowCellClick()},r.prototype.bindRowCellClick=function(){var e=this;this.spreadsheet.on(R.ROW_CELL_CLICK,function(n){if(!e.spreadsheet.interaction.hasIntercepts([Q.CLICK])&&e.isLinkFieldText(n.target)){var i=e.getCellAppendInfo(n.target).cellData,o=i.key,a=e.getRowData(i);e.spreadsheet.emit(R.GLOBAL_LINK_FIELD_JUMP,{key:o,cellData:i,record:a})}})},r}(Qt),K9=function(t){H(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.bindEvents=function(){this.bindCornerCellClick()},r.prototype.bindCornerCellClick=function(){var e=this;this.spreadsheet.on(R.CORNER_CELL_CLICK,function(n){var i,o=e.spreadsheet.interaction,a=e.spreadsheet.getCell(n.target);if(a){var l=a.getMeta(),s=e.getRowNodesByField(l==null?void 0:l.field),u=(i=s[0])===null||i===void 0?void 0:i.belongsCell,f=e.getRowCells(s);if(u&&o.isSelectedCell(u)){o.reset(),e.spreadsheet.emit(R.GLOBAL_SELECTED,o.getActiveCells());return}D(s)||D(f)||(o.addIntercepts([Q.HOVER]),o.changeState({cells:f,stateName:G.SELECTED}),o.highlightNodes(s),e.showTooltip(n),e.spreadsheet.emit(R.GLOBAL_SELECTED,o.getActiveCells()))}})},r.prototype.getRowNodesByField=function(e){return this.spreadsheet.getRowNodes().filter(function(n){return n.field===e})},r.prototype.getRowCells=function(e){return e.map(function(n){return{id:n.id,colIndex:-1,rowIndex:-1,type:N.ROW_CELL}})},r.prototype.showTooltip=function(e){var n=this.spreadsheet.interaction.getActiveCells();this.spreadsheet.showTooltipWithInfo(e,[],{data:{summaries:[{selectedData:n,name:"",value:null}]}})},r}(Qt),Z9=function(t){H(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.bindEvents=function(){this.bindCornerCellHover(),this.bindDataCellHover(),this.bindRowCellHover(),this.bindColCellHover()},r.prototype.updateRowColCells=function(e){var n=e.rowId,i=e.colId,o=this.spreadsheet.interaction,a=o.getHoverHighlight(),l=a.rowHeader,s=a.colHeader;if(s&&gy(i,o.getAllColHeaderCells(),G.HOVER),l&&n){var u=Ef(n,o.getAllRowHeaderCells(),this.spreadsheet.isHierarchyTreeType());J(u,function(f){f.updateByState(G.HOVER)})}},r.prototype.changeStateToHoverFocus=function(e,n,i){var o=this,a,l=this.spreadsheet.interaction,s=this.spreadsheet.options.interaction,u=s.hoverFocus;l.clearHoverTimer();var f=function(){if(!l.hasIntercepts([Q.HOVER])){l.changeState({cells:[or(e)],stateName:G.HOVER_FOCUS});var c=o.spreadsheet.isTableMode(),v={isTotals:i.isTotals,enterable:!0,hideSummary:!0,showSingleTips:c},p=l.getHoverHighlight(),g=p.rowHeader,y=p.colHeader;(g||y)&&o.updateRowColCells(i);var C=o.getCellData(i,c);o.spreadsheet.showTooltipWithInfo(n,C,v)}},h=ss;if(tr(u)||(h=(a=u==null?void 0:u.duration)!==null&&a!==void 0?a:ss),h===0)f();else{var d=window.setTimeout(function(){return f()},h);l.setHoverTimer(d)}},r.prototype.handleHeaderHover=function(e){var n=this.spreadsheet.getCell(e.target);if(!D(n)){var i=this.spreadsheet.interaction;i.clearHoverTimer(),!i.isActiveCell(n)&&(i.changeState({cells:[or(n)],stateName:G.HOVER}),n.update(),this.showEllipsisTooltip(e,n))}},r.prototype.showEllipsisTooltip=function(e,n){if(!n||!n.isTextOverflowing()){this.spreadsheet.hideTooltip();return}var i=n.getMeta(),o=!0,a={isTotals:i.isTotals,enterable:!0,hideSummary:!0,showSingleTips:o,enableFormat:!0},l=this.getCellData(i,o);this.spreadsheet.showTooltipWithInfo(e,l,a)},r.prototype.getCellData=function(e,n){e===void 0&&(e={});var i=e.data,o=e.query,a=e.value,l=e.field,s=e.fieldValue,u=e.valueField,f=e.rowQuery,h=e.colQuery,d=i,c=n?[S(S({},o),{value:a||s,valueField:l||u})]:[d||S(S({},f),h)];return c},r.prototype.bindDataCellHover=function(){var e=this;this.spreadsheet.on(R.DATA_CELL_HOVER,function(n){var i=e.spreadsheet.getCell(n.target);if(!D(i)){var o=e.spreadsheet,a=o.interaction,l=o.options,s=l.interaction,u=i==null?void 0:i.getMeta();if(!a.isActiveCell(i)){a.changeState({cells:[or(i)],stateName:G.HOVER});var f=a.getHoverHighlight(),h=f.rowHeader,d=f.colHeader;(h||d)&&e.updateRowColCells(u),s.hoverFocus&&e.changeStateToHoverFocus(i,n,u)}}})},r.prototype.bindRowCellHover=function(){var e=this;this.spreadsheet.on(R.ROW_CELL_HOVER,function(n){e.handleHeaderHover(n)})},r.prototype.bindColCellHover=function(){var e=this;this.spreadsheet.on(R.COL_CELL_HOVER,function(n){e.handleHeaderHover(n)})},r.prototype.bindCornerCellHover=function(){var e=this;this.spreadsheet.on(R.CORNER_CELL_HOVER,function(n){e.handleHeaderHover(n)})},r}(Qt),Uf=function(t){H(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.displayedCells=[],e.brushRangeCells=[],e.brushSelectionStage=qe.UN_DRAGGED,e.brushSelectionMinimumMoveDistance=5,e.scrollAnimationComplete=!0,e.mouseMoveDistanceFromCanvas=0,e.setMoveDistanceFromCanvas=function(n,i,o){var a=0;if(i&&(a=n.x),o){var l=n.y;i?a=Math.max(l,a):a=l}e.mouseMoveDistanceFromCanvas=Math.abs(a)},e.formatBrushPointForScroll=function(n,i){var o,a,l,s;i===void 0&&(i=!1);var u=n.x,f=n.y,h=e.spreadsheet.facet,d=i?h.cornerBBox:h.panelBBox,c=d.minX,v=d.maxX,p=h.panelBBox,g=p.minY,y=p.maxY,C=((o=e.endBrushPoint)===null||o===void 0?void 0:o.x)+u,w=((a=e.endBrushPoint)===null||a===void 0?void 0:a.y)+f,m=!0,_=!0,b=(s=(l=h.vScrollBar)===null||l===void 0?void 0:l.getBBox())===null||s===void 0?void 0:s.width,T=2;return C>v?C=v-b-T:C<c?C=c+T:m=!1,w>y?w=y-T:w<=g?w=g+T:_=!1,{x:{value:C,needScroll:m},y:{value:w,needScroll:_}}},e.rectanglesIntersect=function(n,i){return n.maxX>i.minX&&n.minX<i.maxX&&n.minY<i.maxY&&n.maxY>i.minY},e.autoScrollIntervalId=null,e.autoScrollConfig=ys(od),e.validateYIndex=function(n){var i,o,a=e.spreadsheet.facet,l=a.frozenGroupInfo,s=0,u=(i=l==null?void 0:l.frozenRow)===null||i===void 0?void 0:i.range;if(u&&(s=u[1]+1),n<s)return null;var f=a.getCellRange().end,h=(o=l==null?void 0:l.frozenTrailingRow)===null||o===void 0?void 0:o.range;return h&&(f=h[0]-1),n>f?null:n},e.validateXIndex=function(n){var i,o,a=e.spreadsheet.facet,l=a.frozenGroupInfo,s=0,u=(i=l==null?void 0:l.frozenCol)===null||i===void 0?void 0:i.range;if(u&&(s=u[1]+1),n<s)return null;var f=a.layoutResult.colLeafNodes.length-1,h=(o=l==null?void 0:l.frozenTrailingCol)===null||o===void 0?void 0:o.range;return h&&(f=h[0]-1),n>f?null:n},e.adjustNextColIndexWithFrozen=function(n,i){var o=e.spreadsheet,a=o.facet,l=o.dataSet,s=o.options,u=l.getDisplayDataSet().length,f=a.layoutResult.colLeafNodes.length,h=Hr(s,f,u),d=h.frozenTrailingColCount,c=h.frozenColCount,v=a.panelScrollGroupIndexes;return d>0&&i===ze.SCROLL_DOWN&&cn(n,d,f)?v[1]:c>0&&i===ze.SCROLL_UP&&dn(n,c)?v[0]:n},e.adjustNextRowIndexWithFrozen=function(n,i){var o=e.spreadsheet,a=o.facet,l=o.dataSet,s=o.options,u=l.getDisplayDataSet().length,f=a.layoutResult.colLeafNodes.length,h=a.getCellRange(),d=Hr(s,f,u),c=d.frozenTrailingRowCount,v=d.frozenRowCount,p=a.panelScrollGroupIndexes;return c>0&&i===ze.SCROLL_DOWN&&ho(n,h.end,c)?p[3]:v>0&&i===ze.SCROLL_UP&&il(n,h.start,v)?p[2]:n},e.getWillScrollRowIndexDiff=function(n){return n===ze.SCROLL_DOWN?ia.SCROLL_DOWN:ia.SCROLL_UP},e.getDefaultWillScrollToRowIndex=function(n){var i=e.adjustNextRowIndexWithFrozen(e.endBrushPoint.rowIndex,n),o=i+e.getWillScrollRowIndexDiff(n);return e.validateYIndex(o)},e.getWillScrollToRowIndex=function(n){return e.getDefaultWillScrollToRowIndex(n)},e.getNextScrollDelta=function(n){var i=e.spreadsheet.facet.getScrollOffset(),o=i.scrollX,a=i.scrollY,l=0,s=0;if(n.y.scroll){var u=n.y.value>0?ze.SCROLL_DOWN:ze.SCROLL_UP,f=e.getWillScrollToRowIndex(u),h=XN(f,u,e.spreadsheet)-a,d=Fe(f)||Fe(h)||Number.isNaN(h);s=d?0:h}if(n.x.scroll){var u=n.x.value>0?ze.SCROLL_DOWN:ze.SCROLL_UP,c=e.adjustNextColIndexWithFrozen(e.endBrushPoint.colIndex,u),v=e.validateXIndex(c+(n.x.value>0?1:-1));l=Fe(v)?0:UN(v,u,e.spreadsheet)-o}return{x:l,y:s}},e.onScrollAnimationComplete=function(){e.scrollAnimationComplete=!0,e.brushSelectionStage!==qe.UN_DRAGGED&&e.renderPrepareSelected(e.endBrushPoint)},e.autoScroll=function(n){if(n===void 0&&(n=!1),!(e.brushSelectionStage===qe.UN_DRAGGED||!e.scrollAnimationComplete)){var i=e.autoScrollConfig,o=e.spreadsheet.facet.getScrollOffset(),a=n?"rowHeaderOffsetX":"offsetX",l={rowHeaderOffsetX:{value:o.rowHeaderScrollX,animate:!0},offsetX:{value:o.scrollX,animate:!0},offsetY:{value:o.scrollY,animate:!0}},s=e.getNextScrollDelta(i),u=s.x,f=s.y;if(f===0&&u===0){e.clearAutoScroll();return}if(i.y.scroll&&(l.offsetY.value+=f),i.x.scroll){var h=l[a];h.value+=u,h.value<0&&(h.value=0)}e.scrollAnimationComplete=!1;var d=i.x.scroll?1:3,c=Math.max(16,300-e.mouseMoveDistanceFromCanvas*d);e.spreadsheet.facet.scrollWithAnimation(l,c,e.onScrollAnimationComplete)}},e.handleScroll=vf(function(n,i,o){if(o===void 0&&(o=!1),e.brushSelectionStage!==qe.UN_DRAGGED){var a=e.formatBrushPointForScroll({x:n,y:i},o),l=a.x,s=l.value,u=l.needScroll,f=a.y,h=f.value,d=f.needScroll,c=e.autoScrollConfig;d&&(c.y.value=i,c.y.scroll=!0),u&&(c.x.value=n,c.x.scroll=!0),e.setMoveDistanceFromCanvas({x:n,y:i},u,d),e.renderPrepareSelected({x:s,y:h}),(d||u)&&(e.clearAutoScroll(),e.autoScroll(o),e.autoScrollIntervalId=setInterval(function(){e.autoScroll(o)},16))}},30),e.clearAutoScroll=function(){e.autoScrollIntervalId&&(clearInterval(e.autoScrollIntervalId),e.autoScrollIntervalId=null,e.resetScrollDelta())},e.onUpdateCells=function(n,i){return i()},e.showPrepareSelectedCells=function(){e.brushRangeCells=e.getBrushRangeCells(),e.spreadsheet.interaction.changeState({cells:oe(e.brushRangeCells,function(n){return or(n)}),stateName:G.PREPARE_SELECT,force:!0,onUpdateCells:e.onUpdateCells})},e.renderPrepareSelected=function(n){var i=n.x,o=n.y,a=e.spreadsheet.container.getShape(i,o),l=e.spreadsheet.getCell(a),s=l instanceof Qr||l instanceof go||l instanceof ll;if(!(!l||!s)){var u=l.getMeta(),f=u.rowIndex,h=u.colIndex;e.endBrushPoint={x:i,y:o,rowIndex:f,colIndex:h};var d=e.spreadsheet.interaction;d.addIntercepts([Q.HOVER]),d.clearStyleIndependent(),e.isValidBrushSelection()&&(e.showPrepareSelectedCells(),e.updatePrepareSelectMask())}},e}return r.prototype.bindEvents=function(){this.bindMouseDown(),this.bindMouseMove(),this.bindMouseUp()},r.prototype.getPrepareSelectMaskTheme=function(){var e;return(e=this.spreadsheet.theme)===null||e===void 0?void 0:e.prepareSelectMask},r.prototype.initPrepareSelectMaskShape=function(){var e=this.spreadsheet.foregroundGroup;if(e){e.removeChild(this.prepareSelectMaskShape);var n=this.getPrepareSelectMaskTheme();this.prepareSelectMaskShape=e.addShape("rect",{visible:!1,attrs:{width:0,height:0,x:0,y:0,fill:n==null?void 0:n.backgroundColor,fillOpacity:n==null?void 0:n.backgroundOpacity,zIndex:wx},capture:!1})}},r.prototype.setBrushSelectionStage=function(e){this.brushSelectionStage=e},r.prototype.isPointInCanvas=function(e){var n=this.spreadsheet.facet.getCanvasHW(),i=n.height,o=n.width,a=this.spreadsheet.facet.panelBBox,l=a.minX,s=a.minY;return e.x>l&&e.x<o&&e.y>s&&e.y<i},r.prototype.resetDrag=function(){this.hidePrepareSelectMaskShape(),this.setBrushSelectionStage(qe.UN_DRAGGED)},r.prototype.isValidBrushSelection=function(){var e=this.getBrushRange(),n=e.start,i=e.end,o=i.x-n.x>this.brushSelectionMinimumMoveDistance||i.y-n.y>this.brushSelectionMinimumMoveDistance;return o},r.prototype.setDisplayedCells=function(){this.displayedCells=this.spreadsheet.interaction.getPanelGroupAllDataCells()},r.prototype.updatePrepareSelectMask=function(){var e=this.getBrushRange(),n=this.getPrepareSelectMaskPosition(e),i=n.x,o=n.y;this.prepareSelectMaskShape.attr({x:i,y:o,width:e.width,height:e.height}),this.prepareSelectMaskShape.show()},r.prototype.hidePrepareSelectMaskShape=function(){var e;(e=this.prepareSelectMaskShape)===null||e===void 0||e.hide()},r.prototype.resetScrollDelta=function(){this.autoScrollConfig=ys(od)},r.prototype.getBrushPoint=function(e){var n=this.spreadsheet.facet.getScrollOffset(),i=n.scrollY,o=n.scrollX,a={x:e==null?void 0:e.x,y:e==null?void 0:e.y},l=this.spreadsheet.getCell(e.target),s=l.getMeta(),u=s.colIndex,f=s.rowIndex;return S(S({},a),{rowIndex:f,colIndex:u,scrollY:i,scrollX:o})},r.prototype.getBrushRange=function(){var e,n,i,o,a,l,s,u,f=this.spreadsheet.facet.getScrollOffset(),h=f.scrollX,d=f.scrollY,c=Math.min(this.startBrushPoint.rowIndex,(e=this.endBrushPoint)===null||e===void 0?void 0:e.rowIndex),v=Math.max(this.startBrushPoint.rowIndex,(n=this.endBrushPoint)===null||n===void 0?void 0:n.rowIndex),p=Math.min(this.startBrushPoint.colIndex,(i=this.endBrushPoint)===null||i===void 0?void 0:i.colIndex),g=Math.max(this.startBrushPoint.colIndex,(o=this.endBrushPoint)===null||o===void 0?void 0:o.colIndex),y=this.startBrushPoint.x+this.startBrushPoint.scrollX-h,C=this.startBrushPoint.y+this.startBrushPoint.scrollY-d,w=Math.min(y,(a=this.endBrushPoint)===null||a===void 0?void 0:a.x),m=Math.max(y,(l=this.endBrushPoint)===null||l===void 0?void 0:l.x),_=Math.min(C,(s=this.endBrushPoint)===null||s===void 0?void 0:s.y),b=Math.max(C,(u=this.endBrushPoint)===null||u===void 0?void 0:u.y);return{start:{rowIndex:c,colIndex:p,x:w,y:_},end:{rowIndex:v,colIndex:g,x:m,y:b},width:m-w,height:b-_}},r.prototype.getBrushRangeCells=function(){var e=this;return this.setDisplayedCells(),this.displayedCells.filter(function(n){var i=n.getMeta();return e.isInBrushRange(i)})},r.prototype.mouseDown=function(e){var n;(n=e==null?void 0:e.preventDefault)===null||n===void 0||n.call(e),!this.spreadsheet.interaction.hasIntercepts([Q.CLICK])&&(this.setBrushSelectionStage(qe.CLICK),this.initPrepareSelectMaskShape(),this.setDisplayedCells(),this.startBrushPoint=this.getBrushPoint(e))},r.prototype.addBrushIntercepts=function(){this.spreadsheet.interaction.addIntercepts([Q.BRUSH_SELECTION])},r.prototype.bindMouseUp=function(e){var n=this;e===void 0&&(e=!1),this.spreadsheet.on(R.GLOBAL_MOUSE_UP,function(i){if(n.brushSelectionStage!==qe.DRAGGED){n.resetDrag();return}if(e&&n.clearAutoScroll(),n.isValidBrushSelection()){n.addBrushIntercepts(),n.updateSelectedCells();var o=Hf(n.spreadsheet);n.spreadsheet.showTooltipWithInfo(i,o)}n.spreadsheet.interaction.getCurrentStateName()===G.PREPARE_SELECT&&n.spreadsheet.interaction.reset(),n.resetDrag()}),this.spreadsheet.on(R.GLOBAL_CONTEXT_MENU,function(){n.brushSelectionStage!==qe.UN_DRAGGED&&(n.spreadsheet.interaction.removeIntercepts([Q.HOVER]),n.resetDrag())})},r.prototype.autoBrushScroll=function(e,n){var i,o;if(n===void 0&&(n=!1),this.clearAutoScroll(),!this.isPointInCanvas(e)){var a=(e==null?void 0:e.x)-((i=this.endBrushPoint)===null||i===void 0?void 0:i.x),l=(e==null?void 0:e.y)-((o=this.endBrushPoint)===null||o===void 0?void 0:o.y);return this.handleScroll(a,l,n),!0}return!1},r.prototype.emitBrushSelectionEvent=function(e,n){this.spreadsheet.emit(e,n),this.spreadsheet.emit(R.GLOBAL_SELECTED,n),D(n)&&this.spreadsheet.interaction.removeIntercepts([Q.HOVER])},r.prototype.getVisibleBrushRangeCells=function(e){return this.brushRangeCells.find(function(n){var i=n.getMeta();return(i==null?void 0:i.id)===e})},r.prototype.isInBrushRange=function(e){return!1},r.prototype.bindMouseDown=function(){},r.prototype.bindMouseMove=function(){},r.prototype.updateSelectedCells=function(){},r.prototype.getPrepareSelectMaskPosition=function(e){return{x:e.start.x,y:e.start.y}},r}(Qt),j9=function(t){H(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.displayedCells=[],e.brushRangeCells=[],e.onUpdateCells=function(n){return n.updateCells(n.getAllColHeaderCells())},e}return r.prototype.bindEvents=function(){this.bindMouseDown(),this.bindMouseMove(),this.bindMouseUp()},r.prototype.bindMouseDown=function(){var e=this;this.spreadsheet.on(R.COL_CELL_MOUSE_DOWN,function(n){e.spreadsheet.interaction.getBrushSelection().col&&t.prototype.mouseDown.call(e,n)})},r.prototype.isPointInCanvas=function(e){var n=this.spreadsheet.facet.getCanvasHW().width,i=this.spreadsheet.facet.cornerBBox,o=i.width,a=i.minY,l=i.maxY;return e.x>=o&&e.x<=n&&e.y>=a&&e.y<=l},r.prototype.bindMouseMove=function(){var e=this;this.spreadsheet.on(R.COL_CELL_MOUSE_MOVE,function(n){if(e.brushSelectionStage!==qe.UN_DRAGGED){e.setBrushSelectionStage(qe.DRAGGED);var i=e.spreadsheet.container.getPointByEvent(n.originalEvent);e.isPointInCanvas(i)&&e.renderPrepareSelected(i)}})},r.prototype.setDisplayedCells=function(){this.displayedCells=this.spreadsheet.interaction.getAllColHeaderCells()},r.prototype.isInBrushRange=function(e){var n=this.getBrushRange(),i=n.start,o=n.end,a=this.spreadsheet.facet.getScrollOffset().scrollX,l=this.spreadsheet.facet.cornerBBox,s=e.x,u=s===void 0?0:s,f=e.y,h=f===void 0?0:f,d=e.width,c=d===void 0?0:d,v=e.height,p=v===void 0?0:v;return this.rectanglesIntersect({minX:i.x-l.width+a,minY:i.y,maxX:o.x-l.width+a,maxY:o.y},{minX:u,maxX:u+c,minY:h,maxY:h+p})},r.prototype.updateSelectedCells=function(){var e=this.spreadsheet.interaction;e.changeState({cells:oe(this.brushRangeCells,or),stateName:G.BRUSH_SELECTED,onUpdateCells:this.onUpdateCells}),this.spreadsheet.emit(R.COL_CELL_BRUSH_SELECTION,this.brushRangeCells),this.spreadsheet.emit(R.GLOBAL_SELECTED,this.brushRangeCells),D(this.brushRangeCells)&&e.removeIntercepts([Q.HOVER])},r.prototype.addBrushIntercepts=function(){this.spreadsheet.interaction.addIntercepts([Q.COL_BRUSH_SELECTION])},r}(Uf),Q9=function(t){H(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.displayedCells=[],e.brushRangeCells=[],e.getSelectedCellMetas=function(n){var i=[],o=e.spreadsheet.facet.layoutResult,a=o.rowLeafNodes,l=a===void 0?[]:a,s=o.colLeafNodes,u=s===void 0?[]:s,f=$n(n.start.rowIndex,n.end.rowIndex+1),h=$n(n.start.colIndex,n.end.colIndex+1);return f.forEach(function(d){h.forEach(function(c){var v=String(u[c].id),p=D(l)?String(d):String(l[d].id);i.push({colIndex:c,rowIndex:d,id:vo(p,v),type:N.DATA_CELL,rowId:p,colId:v,spreadsheet:e.spreadsheet})})}),i},e}return r.prototype.bindMouseDown=function(){var e=this;this.spreadsheet.on(R.DATA_CELL_MOUSE_DOWN,function(n){e.spreadsheet.interaction.getBrushSelection().data&&(t.prototype.mouseDown.call(e,n),e.resetScrollDelta())})},r.prototype.bindMouseMove=function(){var e=this;this.spreadsheet.on(R.GLOBAL_MOUSE_MOVE,function(n){if(e.brushSelectionStage!==qe.UN_DRAGGED){e.setBrushSelectionStage(qe.DRAGGED);var i=e.spreadsheet.container.getPointByEvent(n);e.autoBrushScroll(i)||e.renderPrepareSelected(i)}})},r.prototype.isInBrushRange=function(e){var n=this.getBrushRange(),i=n.start,o=n.end,a=e.rowIndex,l=e.colIndex;return a>=i.rowIndex&&a<=o.rowIndex&&l>=i.colIndex&&l<=o.colIndex},r.prototype.updateSelectedCells=function(){var e=this.getBrushRange(),n=this.getSelectedCellMetas(e);this.spreadsheet.interaction.changeState({cells:n,stateName:G.SELECTED,onUpdateCells:Df});var i=this.getScrollBrushRangeCells(n);this.emitBrushSelectionEvent(R.DATA_CELL_BRUSH_SELECTION,i)},r.prototype.getScrollBrushRangeCells=function(e){var n=this;return e.map(function(i){var o=n.getVisibleBrushRangeCells(i.id);if(o)return o;var a=n.spreadsheet.facet.layoutResult.getCellMeta(i.rowIndex,i.colIndex),l=n.spreadsheet.isTableMode()?sl:Qr;return new l(a,n.spreadsheet)})},r.prototype.bindMouseUp=function(){t.prototype.bindMouseUp.call(this,!0)},r.prototype.getPrepareSelectMaskPosition=function(e){var n=this.spreadsheet.facet.panelBBox,i=n.minX,o=n.minY,a=Math.max(e.start.x,i),l=Math.max(e.start.y,o);return{x:a,y:l}},r}(Uf),J9=function(t){H(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.isInBrushRange=function(n){var i=e.getBrushRange(),o=i.start,a=i.end,l=e.spreadsheet.facet.getScrollOffset(),s=l.scrollY,u=l.rowHeaderScrollX,f=e.spreadsheet.facet.cornerBBox,h=n.x,d=h===void 0?0:h,c=n.y,v=c===void 0?0:c,p=n.width,g=p===void 0?0:p,y=n.height,C=y===void 0?0:y;return e.rectanglesIntersect({minX:o.x+u,minY:o.y-f.height+s,maxX:a.x+u,maxY:a.y-f.height+s},{minX:d,maxX:d+g,minY:v,maxY:v+C})},e.onUpdateCells=function(n){return n.updateCells(n.getAllRowHeaderCells())},e.getSelectedRowNodes=function(){return e.spreadsheet.getRowNodes().filter(e.isInBrushRange)},e.getVisibleRowLeafCellByScrollDirection=function(n){var i=e.spreadsheet.interaction.getAllRowHeaderCells();return n===ze.SCROLL_DOWN?ge(i):i.find(function(o){var a=o.getMeta();return a.isLeaf})},e.getWillScrollToRowIndex=function(n){var i,o;if(!Fe(e.endBrushPoint.rowIndex))return e.getDefaultWillScrollToRowIndex(n);var a=e.getVisibleRowLeafCellByScrollDirection(n),l=(o=(i=a==null?void 0:a.getMeta())===null||i===void 0?void 0:i.rowIndex)!==null&&o!==void 0?o:0,s=l+e.getWillScrollRowIndexDiff(n);return e.validateYIndex(s)},e}return r.prototype.bindMouseDown=function(){var e=this;this.spreadsheet.on(R.ROW_CELL_MOUSE_DOWN,function(n){e.spreadsheet.interaction.getBrushSelection().row&&t.prototype.mouseDown.call(e,n)})},r.prototype.isPointInCanvas=function(e){var n=this.spreadsheet.facet.getCanvasHW().height,i=this.spreadsheet.facet.cornerBBox,o=i.minX,a=i.height,l=i.maxX;return e.x>=o&&e.x<=l&&e.y>=a&&e.y<=n},r.prototype.bindMouseMove=function(){var e=this;this.spreadsheet.on(R.GLOBAL_MOUSE_MOVE,function(n){if(e.brushSelectionStage!==qe.UN_DRAGGED){e.setBrushSelectionStage(qe.DRAGGED);var i=e.spreadsheet.container.getPointByEvent(n);e.autoBrushScroll(i,!0)||e.renderPrepareSelected(i)}})},r.prototype.setDisplayedCells=function(){this.displayedCells=this.spreadsheet.interaction.getAllRowHeaderCells()},r.prototype.updateSelectedCells=function(){var e=this.getSelectedRowNodes(),n=this.getScrollBrushRangeCells(e),i=oe(n,or);this.spreadsheet.interaction.changeState({cells:i,stateName:G.BRUSH_SELECTED,onUpdateCells:this.onUpdateCells}),this.emitBrushSelectionEvent(R.ROW_CELL_BRUSH_SELECTION,n)},r.prototype.addBrushIntercepts=function(){this.spreadsheet.interaction.addIntercepts([Q.ROW_BRUSH_SELECTION])},r.prototype.getScrollBrushRangeCells=function(e){var n=this;return e.map(function(i){var o=n.getVisibleBrushRangeCells(i.id);return o||n.spreadsheet.facet.rowHeader.createCellInstance(i)})},r.prototype.getPrepareSelectMaskPosition=function(e){var n=this.spreadsheet.facet.panelBBox.minY,i=e.start.x,o=Math.max(e.start.y,n);return{x:i,y:o}},r}(Uf),eF=function(t){H(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.isMultiSelection=!1,e}return r.prototype.bindEvents=function(){this.bindKeyboardDown(),this.bindDataCellClick(),this.bindKeyboardUp(),this.bindMouseMove()},r.prototype.reset=function(){this.isMultiSelection=!1,this.spreadsheet.interaction.removeIntercepts([Q.CLICK])},r.prototype.bindKeyboardDown=function(){var e=this;this.spreadsheet.on(R.GLOBAL_KEYBOARD_DOWN,function(n){Ca(n)&&(e.isMultiSelection=!0,e.spreadsheet.interaction.addIntercepts([Q.CLICK]))})},r.prototype.bindKeyboardUp=function(){var e=this;this.spreadsheet.on(R.GLOBAL_KEYBOARD_UP,function(n){Ca(n)&&e.reset()})},r.prototype.bindMouseMove=function(){var e=this;this.spreadsheet.on(R.GLOBAL_MOUSE_MOVE,function(n){e.isMultiSelection&&!Iy(n)&&e.reset()})},r.prototype.getSelectedCells=function(e){var n=e.getMeta().id,i=this.spreadsheet.interaction,o=i.getCells([N.DATA_CELL]),a=[];return i.getCurrentStateName()!==G.SELECTED&&(o=[]),o.find(function(l){return l.id===n})?a=o.filter(function(l){return l.id!==n}):a=P(P([],A(o),!1),[or(e)],!1),a},r.prototype.bindDataCellClick=function(){var e=this;this.spreadsheet.on(R.DATA_CELL_CLICK,function(n){n.stopPropagation();var i=e.spreadsheet.getCell(n.target),o=i.getMeta(),a=e.spreadsheet.interaction;if(e.isMultiSelection&&o){var l=e.getSelectedCells(i);if(D(l)){a.clearState(),e.spreadsheet.hideTooltip(),e.spreadsheet.emit(R.GLOBAL_SELECTED,a.getActiveCells());return}a.addIntercepts([Q.CLICK,Q.HOVER]),e.spreadsheet.hideTooltip(),a.changeState({cells:l,stateName:G.SELECTED,onUpdateCells:Df}),e.spreadsheet.emit(R.GLOBAL_SELECTED,a.getActiveCells()),e.spreadsheet.showTooltipWithInfo(n,Hf(e.spreadsheet))}})},r}(Qt),tF=function(){function t(r){var e=this;this.canvasEventHandlers=[],this.s2EventHandlers=[],this.domEventListeners=[],this.isCanvasEffect=!1,this.isGuiIconShape=function(n){return n instanceof hu&&n.attrs.type===Ui.type},this.onCanvasMousedown=function(n){if(e.target=n.target,e.spreadsheet.interaction.clearHoverTimer(),e.isResizeArea(n)){e.spreadsheet.emit(R.LAYOUT_RESIZE_MOUSE_DOWN,n);var i=function(a){if(!e.spreadsheet.getCanvasElement())return!1;e.spreadsheet.getCanvasElement()!==a.target&&(n.clientX=a.clientX,n.clientY=a.clientY,n.originalEvent=a,e.spreadsheet.emit(R.LAYOUT_RESIZE_MOUSE_MOVE,n))};window.addEventListener("mousemove",i),window.addEventListener("mouseup",function(){window.removeEventListener("mousemove",i)},{once:!0});return}var o=e.spreadsheet.getCellType(n.target);switch(o){case N.DATA_CELL:e.spreadsheet.emit(R.DATA_CELL_MOUSE_DOWN,n);break;case N.ROW_CELL:e.spreadsheet.emit(R.ROW_CELL_MOUSE_DOWN,n);break;case N.COL_CELL:e.spreadsheet.emit(R.COL_CELL_MOUSE_DOWN,n);break;case N.CORNER_CELL:e.spreadsheet.emit(R.CORNER_CELL_MOUSE_DOWN,n);break;case N.MERGED_CELL:e.spreadsheet.emit(R.MERGED_CELLS_MOUSE_DOWN,n);break}},this.onCanvasMousemove=function(n){if(e.canvasMousemoveEvent=n,e.isResizeArea(n)){e.activeResizeArea(n),e.spreadsheet.emit(R.LAYOUT_RESIZE_MOUSE_MOVE,n);return}e.resetResizeArea();var i=e.spreadsheet.getCell(n.target);if(i){var o=i.cellType;switch(o){case N.DATA_CELL:e.spreadsheet.emit(R.DATA_CELL_MOUSE_MOVE,n);break;case N.ROW_CELL:e.spreadsheet.emit(R.ROW_CELL_MOUSE_MOVE,n);break;case N.COL_CELL:e.spreadsheet.emit(R.COL_CELL_MOUSE_MOVE,n);break;case N.CORNER_CELL:e.spreadsheet.emit(R.CORNER_CELL_MOUSE_MOVE,n);break;case N.MERGED_CELL:e.spreadsheet.emit(R.MERGED_CELLS_MOUSE_MOVE,n);break}if(!e.hasBrushSelectionIntercepts())switch(e.spreadsheet.emit(R.GLOBAL_HOVER,n),o){case N.DATA_CELL:e.spreadsheet.emit(R.DATA_CELL_HOVER,n);break;case N.ROW_CELL:e.spreadsheet.emit(R.ROW_CELL_HOVER,n);break;case N.COL_CELL:e.spreadsheet.emit(R.COL_CELL_HOVER,n);break;case N.CORNER_CELL:e.spreadsheet.emit(R.CORNER_CELL_HOVER,n);break;case N.MERGED_CELL:e.spreadsheet.emit(R.MERGED_CELLS_HOVER,n);break}}},this.onCanvasMouseup=function(n){if(e.isResizeArea(n)){e.spreadsheet.emit(R.LAYOUT_RESIZE_MOUSE_UP,n);return}var i=e.spreadsheet.getCell(n.target);if(i){var o=i.cellType;if(e.target===n.target){var a=e.isGuiIconShape(n.target);switch(o){case N.DATA_CELL:e.spreadsheet.emit(R.DATA_CELL_CLICK,n);break;case N.ROW_CELL:if(a)break;e.spreadsheet.emit(R.ROW_CELL_CLICK,n);break;case N.COL_CELL:if(a)break;e.spreadsheet.emit(R.COL_CELL_CLICK,n);break;case N.CORNER_CELL:if(a)break;e.spreadsheet.emit(R.CORNER_CELL_CLICK,n);break;case N.MERGED_CELL:e.spreadsheet.emit(R.MERGED_CELLS_CLICK,n);break}}switch(o){case N.DATA_CELL:e.spreadsheet.emit(R.DATA_CELL_MOUSE_UP,n);break;case N.ROW_CELL:e.spreadsheet.emit(R.ROW_CELL_MOUSE_UP,n);break;case N.COL_CELL:e.spreadsheet.emit(R.COL_CELL_MOUSE_UP,n);break;case N.CORNER_CELL:e.spreadsheet.emit(R.CORNER_CELL_MOUSE_UP,n);break;case N.MERGED_CELL:e.spreadsheet.emit(R.MERGED_CELLS_MOUSE_UP,n);break}}},this.onCanvasClick=function(n){e.spreadsheet.emit(R.GLOBAL_CLICK,n)},this.onCanvasDoubleClick=function(n){var i=e.spreadsheet;if(e.isResizeArea(n)){i.emit(R.LAYOUT_RESIZE_MOUSE_UP,n);return}i.emit(R.GLOBAL_DOUBLE_CLICK,n);var o=i.getCell(n.target);if(o){var a=o.cellType;if(e.target===n.target)switch(a){case N.DATA_CELL:i.emit(R.DATA_CELL_DOUBLE_CLICK,n);break;case N.ROW_CELL:i.emit(R.ROW_CELL_DOUBLE_CLICK,n);break;case N.COL_CELL:i.emit(R.COL_CELL_DOUBLE_CLICK,n);break;case N.CORNER_CELL:i.emit(R.CORNER_CELL_DOUBLE_CLICK,n);break;case N.MERGED_CELL:i.emit(R.MERGED_CELLS_DOUBLE_CLICK,n);break}}},this.onCanvasMouseout=function(n){if(!(!e.isAutoResetSheetStyle||n!=null&&n.shape)){var i=e.spreadsheet.interaction;!i.isSelectedState()&&!(i.intercepts.size>0)&&i.reset()}},this.onCanvasContextMenu=function(n){var i=e.spreadsheet;if(e.isResizeArea(n)){i.emit(R.LAYOUT_RESIZE_MOUSE_UP,n);return}i.emit(R.GLOBAL_CONTEXT_MENU,n);var o=e.spreadsheet.getCellType(n.target);switch(o){case N.DATA_CELL:e.spreadsheet.emit(R.DATA_CELL_CONTEXT_MENU,n);break;case N.ROW_CELL:e.spreadsheet.emit(R.ROW_CELL_CONTEXT_MENU,n);break;case N.COL_CELL:e.spreadsheet.emit(R.COL_CELL_CONTEXT_MENU,n);break;case N.CORNER_CELL:e.spreadsheet.emit(R.CORNER_CELL_CONTEXT_MENU,n);break;case N.MERGED_CELL:e.spreadsheet.emit(R.MERGED_CELLS_CONTEXT_MENU,n);break}},this.spreadsheet=r,this.bindEvents()}return Object.defineProperty(t.prototype,"canvasContainer",{get:function(){return this.spreadsheet.container},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isAutoResetSheetStyle",{get:function(){return this.spreadsheet.options.interaction.autoResetSheetStyle},enumerable:!1,configurable:!0}),t.prototype.bindEvents=function(){var r=this;this.clearAllEvents(),this.addCanvasEvent(rt.CLICK,this.onCanvasClick),this.addCanvasEvent(rt.MOUSE_DOWN,this.onCanvasMousedown),this.addCanvasEvent(rt.MOUSE_MOVE,this.onCanvasMousemove),this.addCanvasEvent(rt.MOUSE_OUT,this.onCanvasMouseout),this.addCanvasEvent(rt.MOUSE_UP,this.onCanvasMouseup),this.addCanvasEvent(rt.DOUBLE_CLICK,this.onCanvasDoubleClick),this.addCanvasEvent(rt.CONTEXT_MENU,this.onCanvasContextMenu),this.addS2Event(R.GLOBAL_ACTION_ICON_CLICK,function(){r.spreadsheet.interaction.addIntercepts([Q.HOVER]),r.spreadsheet.interaction.clearState()}),this.addDomEventListener(window,rt.CLICK,function(e){r.resetSheetStyle(e),r.isCanvasEffect=r.isMouseOnTheCanvasContainer(e)}),this.addDomEventListener(window,rt.KEY_DOWN,function(e){r.onKeyboardCopy(e),r.onKeyboardEsc(e),r.spreadsheet.emit(R.GLOBAL_KEYBOARD_DOWN,e)}),this.addDomEventListener(window,rt.KEY_UP,function(e){r.spreadsheet.emit(R.GLOBAL_KEYBOARD_UP,e)}),this.addDomEventListener(window,rt.MOUSE_UP,function(e){r.spreadsheet.emit(R.GLOBAL_MOUSE_UP,e)}),this.addDomEventListener(window,rt.MOUSE_MOVE,function(e){r.spreadsheet.emit(R.GLOBAL_MOUSE_MOVE,e)})},t.prototype.onKeyboardCopy=function(r){if(this.isCanvasEffect&&this.spreadsheet.options.interaction.enableCopy&&Sc(r.key,Ze.COPY)&&(r.metaKey||r.ctrlKey)){var e=W6(this.spreadsheet);Fe(e)||this.spreadsheet.emit(R.GLOBAL_COPIED,e)}},t.prototype.onKeyboardEsc=function(r){this.isCanvasEffect&&Sc(r.key,Ze.ESC)&&this.resetSheetStyle(r)},t.prototype.resetSheetStyle=function(r){if(!(!this.isAutoResetSheetStyle||!this.spreadsheet)){var e=this.spreadsheet.interaction;if(e.hasIntercepts([Q.BRUSH_SELECTION,Q.COL_BRUSH_SELECTION,Q.ROW_BRUSH_SELECTION])){e.removeIntercepts([Q.BRUSH_SELECTION,Q.ROW_BRUSH_SELECTION,Q.COL_BRUSH_SELECTION]);return}this.isMouseOnTheTooltip(r)||this.isMouseOnTheCanvasContainer(r)||(e.reset(),this.spreadsheet.emit(R.GLOBAL_RESET,r),this.spreadsheet.emit(R.GLOBAL_SELECTED,e.getActiveCells()))}},t.prototype.isMouseEvent=function(r){return _n(r,"clientX")&&_n(r,"clientY")},t.prototype.isMouseOnTheCanvasContainer=function(r){if(this.isMouseEvent(r)){var e=this.spreadsheet.getCanvasElement();if(!e)return!1;if(this.spreadsheet.options.supportCSSTransform)return e.contains(r.target);var n=e.getBoundingClientRect()||{},i=n.x,o=n.y,a=this.getContainerRect(),l=a.width,s=a.height;return e.contains(r.target)&&r.clientX<=i+l&&r.clientY<=o+s}return!1},t.prototype.getContainerRect=function(){var r,e=this.spreadsheet,n=e.facet,i=e.options,o=(n==null?void 0:n.hRowScrollBar)||(n==null?void 0:n.hScrollBar),a=(n==null?void 0:n.panelBBox)||{},l=a.maxX,s=a.maxY,u=i.width,f=i.height,h=((r=o==null?void 0:o.theme)===null||r===void 0?void 0:r.size)||0;return{width:Math.min(u,l),height:Math.min(f,s+h)}},t.prototype.isMouseOnTheTooltip=function(r){var e,n,i,o,a=this.spreadsheet.tooltip;if(!(a!=null&&a.visible))return!1;var l=((i=(n=(e=this.spreadsheet.tooltip)===null||e===void 0?void 0:e.container)===null||n===void 0?void 0:n.getBoundingClientRect)===null||i===void 0?void 0:i.call(n))||{},s=l.x,u=l.y,f=l.width,h=l.height;return r.target instanceof Node?r9((o=this.spreadsheet.tooltip)===null||o===void 0?void 0:o.container,r.target):this.isMouseEvent(r)?r.clientX>=s&&r.clientX<=s+f&&r.clientY>=u&&r.clientY<=u+h:!1},t.prototype.isResizeArea=function(r){var e=K(r.target,"attrs.appendInfo");return e==null?void 0:e.isResizeArea},t.prototype.activeResizeArea=function(r){this.resetResizeArea();var e=r.target;this.spreadsheet.store.set("activeResizeArea",e),e.attr(wt.backgroundOpacity,this.spreadsheet.theme.resizeArea.interactionState.hover.backgroundOpacity)},t.prototype.resetResizeArea=function(){var r=this.spreadsheet.store.get("activeResizeArea");D(r)||r.attr(wt.backgroundOpacity,this.spreadsheet.theme.resizeArea.backgroundOpacity),this.spreadsheet.store.set("activeResizeArea",r)},t.prototype.hasBrushSelectionIntercepts=function(){return this.spreadsheet.interaction.hasIntercepts([Q.HOVER,Q.BRUSH_SELECTION,Q.ROW_BRUSH_SELECTION,Q.COL_BRUSH_SELECTION])},t.prototype.clear=function(){this.unbindEvents()},t.prototype.unbindEvents=function(){this.clearAllEvents()},t.prototype.addCanvasEvent=function(r,e){var n;(n=this.canvasContainer)===null||n===void 0||n.on(r,e),this.canvasEventHandlers.push({type:r,handler:e})},t.prototype.addS2Event=function(r,e){this.spreadsheet.on(r,e),this.s2EventHandlers.push({type:r,handler:e})},t.prototype.addDomEventListener=function(r,e,n){if(r.addEventListener){var i=this.spreadsheet.options.interaction.eventListenerOptions;r.addEventListener(e,n,i),this.domEventListeners.push({target:r,type:e,handler:n,options:i})}else console.error("Please make sure ".concat(r," has addEventListener function"))},t.prototype.clearAllEvents=function(){var r=this;J(this.canvasEventHandlers,function(e){var n,i=e.type,o=e.handler;(n=r.canvasContainer)===null||n===void 0||n.off(i,o)}),J(this.s2EventHandlers,function(e){var n=e.type,i=e.handler;r.spreadsheet.off(n,i)}),J(this.domEventListeners,function(e){e.target.removeEventListener(e.type,e.handler,e.options)}),this.canvasEventHandlers=[],this.s2EventHandlers=[],this.domEventListeners=[]},t}(),rF=function(t){H(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.isRangeSelection=!1,e.handleColClick=function(n){n.stopPropagation();var i=e.spreadsheet.interaction,o=e.spreadsheet.getCell(n.target),a=o==null?void 0:o.getMeta();if(!Fe(a==null?void 0:a.x)){i.addIntercepts([Q.HOVER]);var l=[or(o)],s=e.spreadsheet.store.get("lastClickedCell");if(e.isRangeSelection&&s&&s.cellType===o.cellType&&s.getMeta().level===o.getMeta().level){var u=A([e.spreadsheet.facet.layoutResult.rowsHierarchy.maxLevel,e.spreadsheet.facet.layoutResult.colsHierarchy.maxLevel],2),f=u[0],h=u[1],d=Hs(s.getMeta(),o.getMeta()),c=d.start,v=d.end;o instanceof Qr?l=e.handleSeriesNumberRowSelected(c.rowIndex,v.rowIndex,o):o.cellType===N.ROW_CELL&&o.getMeta().level===f?l=e.handleRowSelected(c.rowIndex,v.rowIndex,o):o.cellType===N.COL_CELL&&o.getMeta().level===h&&(l=e.handleColSelected(c.colIndex,v.colIndex,o)),i.changeState({cells:l,stateName:G.SELECTED})}else D(i.getCells())&&i.removeIntercepts([Q.HOVER]),e.spreadsheet.store.set("lastClickedCell",o);var p=l.map(function(g){var y=g.id;return y});i.updateCells(i.getRowColActiveCells(p)),e.spreadsheet.emit(R.GLOBAL_SELECTED,i.getActiveCells())}},e}return r.prototype.bindEvents=function(){this.bindKeyboardDown(),this.bindDataCellClick(),this.bindColCellClick(),this.bindKeyboardUp(),this.bindMouseMove()},r.prototype.reset=function(){this.isRangeSelection=!1,this.spreadsheet.interaction.removeIntercepts([Q.CLICK])},r.prototype.bindKeyboardDown=function(){var e=this;this.spreadsheet.on(R.GLOBAL_KEYBOARD_DOWN,function(n){n.key===Ze.SHIFT&&(e.isRangeSelection=!0,e.spreadsheet.interaction.addIntercepts([Q.CLICK]))})},r.prototype.bindKeyboardUp=function(){var e=this;this.spreadsheet.on(R.GLOBAL_KEYBOARD_UP,function(n){n.key===Ze.SHIFT&&e.reset()})},r.prototype.bindMouseMove=function(){var e=this;this.spreadsheet.on(R.GLOBAL_MOUSE_MOVE,function(n){e.isRangeSelection&&!n.shiftKey&&e.reset()})},r.prototype.bindColCellClick=function(){var e=this;this.spreadsheet.isTableMode()&&this.spreadsheet.on(R.ROW_CELL_CLICK,function(n){e.handleColClick(n)}),this.spreadsheet.on(R.COL_CELL_CLICK,function(n){e.handleColClick(n)})},r.prototype.bindDataCellClick=function(){var e=this;this.spreadsheet.on(R.DATA_CELL_CLICK,function(n){n.stopPropagation();var i=e.spreadsheet.getCell(n.target),o=i.getMeta(),a=e.spreadsheet.interaction;if(o){var l=e.spreadsheet.store.get("lastClickedCell"),s=e.isRangeSelection&&(l==null?void 0:l.cellType)===i.cellType;if(!s){e.spreadsheet.store.set("lastClickedCell",i);return}var u=Hs(l.getMeta(),i.getMeta()),f=u.start,h=u.end,d=$n(f.colIndex,h.colIndex+1).flatMap(function(c){var v=e.spreadsheet.facet.layoutResult.colLeafNodes[c].id;return $n(f.rowIndex,h.rowIndex+1).map(function(p){var g=e.spreadsheet.facet.getSeriesNumberWidth()||e.spreadsheet.isTableMode()?String(p):e.spreadsheet.facet.layoutResult.rowLeafNodes[p].id;return{id:g+"-"+v,colIndex:c,rowIndex:p,type:i.cellType}})});a.addIntercepts([Q.CLICK,Q.HOVER]),a.changeState({cells:d,stateName:G.SELECTED}),e.spreadsheet.showTooltipWithInfo(n,Hf(e.spreadsheet)),e.spreadsheet.emit(R.GLOBAL_SELECTED,a.getActiveCells())}})},r.prototype.handleSeriesNumberRowSelected=function(e,n,i){var o=this.spreadsheet.facet.layoutResult.colLeafNodes[0].id;return $n(e,n+1).map(function(a){var l=String(a);return{id:l+"-"+o,colIndex:0,rowIndex:a,type:i.cellType}})},r.prototype.handleRowSelected=function(e,n,i){return this.spreadsheet.facet.layoutResult.rowNodes.filter(function(o){var a=o.rowIndex;return xs(a,e,n+1)}).map(function(o){return{id:o.id,colIndex:o.colIndex,rowIndex:o.rowIndex,type:i.cellType}})},r.prototype.handleColSelected=function(e,n,i){return this.spreadsheet.facet.layoutResult.colLeafNodes.filter(function(o){var a=o.colIndex;return xs(a,e,n+1)}).map(function(o){return{id:o.id,colIndex:o.colIndex,rowIndex:o.rowIndex,type:i.cellType}})},r}(Qt),nF=function(t){H(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.resizeStartPosition={},e.resizeMouseMove=function(n){var i,o;if(!((i=e.resizeReferenceGroup)===null||i===void 0)&&i.get("visible")){(o=n==null?void 0:n.preventDefault)===null||o===void 0||o.call(n);var a=n.originalEvent,l=e.getResizeInfo(),s=e.resizeReferenceGroup.getChildren()||[];if(!D(s)){var u=A(s,2),f=u[1],h=A(oo(f.attr("path")),2),d=h[0],c=h[1];l.type===Mt.Horizontal?e.updateHorizontalResizingEndGuideLinePosition(a,l,d,c):e.updateVerticalResizingEndGuideLinePosition(a,l,d,c),e.updateResizeGuideLineTheme(f),f.attr("path",[d,c])}}},e}return r.prototype.bindEvents=function(){this.bindMouseDown(),this.bindMouseMove(),this.bindMouseUp()},r.prototype.initResizeGroup=function(){if(!this.resizeReferenceGroup){this.resizeReferenceGroup=this.spreadsheet.foregroundGroup.addGroup();var e=this.spreadsheet.options,n=e.width,i=e.height,o=this.getResizeAreaTheme(),a=o.guideLineColor,l=o.guideLineDash,s=o.size,u={path:"",lineDash:l,stroke:a,lineWidth:s};this.resizeReferenceGroup.addShape("path",{id:Wx,attrs:u}),this.resizeReferenceGroup.addShape("path",{id:kx,attrs:u}),this.resizeReferenceGroup.addShape("rect",{id:Gx,attrs:{appendInfo:{isResizeArea:!0},x:0,y:0,width:n,height:i,fill:"transparent"}})}},r.prototype.getResizeAreaTheme=function(){return this.spreadsheet.theme.resizeArea},r.prototype.setResizeTarget=function(e){this.resizeTarget=e},r.prototype.getGuideLineWidthAndHeight=function(){var e=this.spreadsheet.options,n=e.width,i=e.height,o=this.spreadsheet.facet.panelBBox,a=o.maxY,l=o.maxX,s=Math.min(l,n),u=Math.min(a,i);return{width:s,height:u}},r.prototype.getResizeShapes=function(){var e;return((e=this.resizeReferenceGroup)===null||e===void 0?void 0:e.get("children"))||[]},r.prototype.setResizeMaskCursor=function(e){var n=A(this.getResizeShapes(),3),i=n[2];i==null||i.attr("cursor",e)},r.prototype.updateResizeGuideLinePosition=function(e,n){var i=this.getResizeShapes();if(!D(i)){var o=A(i,2),a=o[0],l=o[1],s=n.type,u=n.offsetX,f=n.offsetY,h=n.width,d=n.height,c=this.getGuideLineWidthAndHeight(),v=c.width,p=c.height;if(this.setResizeMaskCursor("".concat(s,"-resize")),s===Mt.Horizontal){a.attr("path",[["M",u,f],["L",u,p]]),l.attr("path",[["M",u+h,f],["L",u+h,p]]),this.resizeStartPosition.offsetX=e.offsetX,this.resizeStartPosition.clientX=e.clientX;return}a.attr("path",[["M",u,f],["L",v,f]]),l.attr("path",[["M",u,f+d],["L",v,f+d]]),this.resizeStartPosition.offsetY=e.offsetY,this.resizeStartPosition.clientY=e.clientY}},r.prototype.bindMouseDown=function(){var e=this;this.spreadsheet.on(R.LAYOUT_RESIZE_MOUSE_DOWN,function(n){var i;(i=n==null?void 0:n.preventDefault)===null||i===void 0||i.call(n);var o=n.target,a=n.originalEvent,l=e.getCellAppendInfo(n.target);e.spreadsheet.store.set("resized",!1),l!=null&&l.isResizeArea&&(e.spreadsheet.interaction.reset(),e.spreadsheet.interaction.addIntercepts([Q.RESIZE]),e.setResizeTarget(o),e.showResizeGroup(),e.updateResizeGuideLinePosition(a,l))})},r.prototype.bindMouseMove=function(){var e=this;this.spreadsheet.on(R.LAYOUT_RESIZE_MOUSE_MOVE,function(n){vf(e.resizeMouseMove,33)(n)})},r.prototype.getResizeGuideLinePosition=function(){var e=A(this.resizeReferenceGroup.getChildren()||[],2),n=e[0],i=e[1],o=(n==null?void 0:n.attr("path"))||[],a=(i==null?void 0:i.attr("path"))||[],l=A(o[0]||[],3),s=l[1],u=s===void 0?0:s,f=l[2],h=f===void 0?0:f,d=A(a[0]||[],3),c=d[1],v=c===void 0?0:c,p=d[2],g=p===void 0?0:p;return{start:{x:u,y:h},end:{x:v,y:g}}},r.prototype.getDisAllowResizeInfo=function(){var e,n=this.getResizeInfo(),i=this.spreadsheet.options.interaction.resize,o=n.width,a=n.height,l=n.resizedWidth,s=n.resizedHeight,u=(e=i==null?void 0:i.disable)===null||e===void 0?void 0:e.call(i,n),f=u?o:l,h=u?a:s;return{displayWidth:f,displayHeight:h,isDisabled:u}},r.prototype.getResizeWidthDetail=function(){var e,n,i=this.getResizeInfo(),o=this.getDisAllowResizeInfo().displayWidth;switch(i.effect){case nt.Field:return{eventType:R.LAYOUT_RESIZE_ROW_WIDTH,style:{rowCfg:{widthByField:(e={},e[i.id]=o,e)}}};case nt.Tree:return{eventType:R.LAYOUT_RESIZE_TREE_WIDTH,style:{treeRowsWidth:o,rowCfg:{treeRowsWidth:o}}};case nt.Cell:return{eventType:R.LAYOUT_RESIZE_COL_WIDTH,style:{colCfg:{widthByFieldValue:(n={},n[i.id]=o,n)}}};case nt.Series:return{eventType:R.LAYOUT_RESIZE_SERIES_WIDTH,seriesNumberWidth:o};default:return null}},r.prototype.getResizeHeightDetail=function(){var e,n,i=this.spreadsheet.options,o=i.interaction.resize,a=i.style.rowCfg.heightByField,l=this.spreadsheet.theme.rowCell.cell.padding,s=this.getResizeInfo(),u=this.getDisAllowResizeInfo().displayHeight,f=this.spreadsheet.isPivotMode()?u-l.top-l.bottom:u,h;switch(s.effect){case nt.Field:return{eventType:R.LAYOUT_RESIZE_COL_HEIGHT,style:{colCfg:{heightByField:(e={},e[s.id]=u,e)}}};case nt.Cell:return a!=null&&a[String(s.id)]||(o==null?void 0:o.rowResizeType)===oa.CURRENT?h={rowCfg:{heightByField:(n={},n[s.id]=f,n)}}:h={cellCfg:{height:f}},{eventType:R.LAYOUT_RESIZE_ROW_HEIGHT,style:h};default:return null}},r.prototype.getResizeDetail=function(){var e=this.getResizeInfo();return e.type===Mt.Horizontal?this.getResizeWidthDetail():this.getResizeHeightDetail()},r.prototype.showResizeGroup=function(){this.initResizeGroup(),this.resizeReferenceGroup.set("visible",!0)},r.prototype.hideResizeGroup=function(){this.resizeReferenceGroup.set("visible",!1)},r.prototype.bindMouseUp=function(){var e=this;this.spreadsheet.on(R.GLOBAL_MOUSE_UP,function(){var n;e.setResizeMaskCursor("default"),!(!e.resizeReferenceGroup||D((n=e.resizeReferenceGroup)===null||n===void 0?void 0:n.getChildren()))&&(e.hideResizeGroup(),e.renderResizedResult())})},r.prototype.updateResizeGuideLineTheme=function(e){var n=this.getResizeAreaTheme(),i=n.guideLineColor,o=n.guideLineDisableColor,a=this.getDisAllowResizeInfo().isDisabled;e.attr("stroke",a?o:i),this.setResizeMaskCursor(a?"no-drop":"default")},r.prototype.updateHorizontalResizingEndGuideLinePosition=function(e,n,i,o){var a=e.clientX-this.resizeStartPosition.clientX;n.width+a<td&&(a=-(n.width-td));var l=n.offsetX+n.width+a;i[1]=l,o[1]=l,this.resizeTarget.attr({x:l-n.size/2})},r.prototype.updateVerticalResizingEndGuideLinePosition=function(e,n,i,o){var a=e.clientY-this.resizeStartPosition.clientY;n.height+a<rd&&(a=-(n.height-rd));var l=n.offsetY+n.height+a;i[2]=l,o[2]=l,this.resizeTarget.attr({y:l-n.size/2})},r.prototype.renderResizedResult=function(){var e=this.getResizeInfo(),n=this.getResizeDetail()||{},i=n.style,o=n.seriesNumberWidth,a=n.eventType,l={info:e,style:i};this.spreadsheet.emit(R.LAYOUT_RESIZE,l),this.spreadsheet.emit(a,l),i&&this.spreadsheet.setOptions({style:i}),o&&this.spreadsheet.setTheme({rowCell:{seriesNumberWidth:o}}),this.spreadsheet.store.set("resized",!0),this.render()},r.prototype.getResizeInfo=function(){var e=this.getCellAppendInfo(this.resizeTarget),n=this.getResizeGuideLinePosition(),i=n.start,o=n.end,a=Math.floor(o.x-i.x),l=Math.floor(o.y-i.y);return S(S({},e),{resizedWidth:a,resizedHeight:l})},r.prototype.render=function(){this.resizeStartPosition={},this.resizeTarget=null,this.resizeReferenceGroup=null,this.spreadsheet.render(!1)},r}(Qt),iF=[Ze.ARROW_LEFT,Ze.ARROW_RIGHT,Ze.ARROW_UP,Ze.ARROW_DOWN],oF=function(t){H(r,t);function r(e){return t.call(this,e)||this}return r.prototype.isCanvasEffect=function(){return this.spreadsheet.interaction.eventController.isCanvasEffect},r.prototype.bindEvents=function(){var e=this;this.spreadsheet.on(R.GLOBAL_KEYBOARD_DOWN,function(n){if(e.isCanvasEffect()){var i=n.shiftKey,o=n.metaKey,a=iF.includes(n.key),l=!1,s=!1,u=!1;a&&(o&&i?(l=!1,s=!0,u=!1):o?(l=!0,s=!0,u=!0):i?(l=!1,s=!1,u=!1):(l=!0,s=!1,u=!0),e.handleMove({event:n,changeStartCell:l,isJumpMode:s,isSingleSelection:u}))}}),this.spreadsheet.on(R.DATA_CELL_CLICK,function(n){var i=e.spreadsheet.getCell(n.target).getMeta();i&&(e.startCell=e.getCellMetaFromViewMeta(i),e.endCell=e.startCell)})},r.prototype.getCellMetaFromViewMeta=function(e){return{rowIndex:e.rowIndex,colIndex:e.colIndex,id:e.id,type:N.DATA_CELL}},r.prototype.handleMove=function(e){var n=e.event,i=e.changeStartCell,o=e.isJumpMode,a=e.isSingleSelection,l=this,s=l.spreadsheet,u=l.startCell,f=l.endCell,h=i?u:f,d=this.getMoveInfo(n.key,h,o);if(d){var c=A([d.row,d.col],2),v=c[0],p=c[1];this.scrollToActiveCell(s,v,p);var g=this.generateCellMeta(s,v,p),y=a?[g]:this.getRangeCells(s,u,g);GN(s,y),i&&(this.startCell=g),this.endCell=g,this.spreadsheet.emit(R.DATA_CELL_SELECT_MOVE,y)}},r.prototype.generateCellMeta=function(e,n,i){var o=e.isTableMode,a=e.facet.layoutResult,l=a.colLeafNodes,s=a.rowLeafNodes,u=o()?String(n):s[n].id,f=l[i].id;return{rowIndex:n,colIndex:i,id:vo(u,f),type:N.DATA_CELL}},r.prototype.getRangeCells=function(e,n,i){for(var o=Hs(n,i),a=o.start,l=a.rowIndex,s=a.colIndex,u=o.end,f=u.rowIndex,h=u.colIndex,d=[],c=l;c<=f;c++)for(var v=s;v<=h;v++)d.push(this.generateCellMeta(e,c,v));return d},r.prototype.getMoveInfo=function(e,n,i){var o=this.spreadsheet,a=o.options,l=a.frozenColCount,s=l===void 0?0:l,u=a.frozenRowCount,f=u===void 0?0:u,h=a.frozenTrailingColCount,d=h===void 0?0:h,c=a.frozenTrailingRowCount,v=c===void 0?0:c,p=o.facet.layoutResult,g=p.rowLeafNodes,y=p.colLeafNodes,C=A([0+s,y.length-d-1],2),w=C[0],m=C[1],_=A([0+f,(o.isTableMode()?o.dataSet.getDisplayDataSet().length:g.length)-v-1],2),b=_[0],T=_[1];if(n)switch(e){case Ze.ARROW_RIGHT:return n.colIndex+1>m?void 0:{row:n.rowIndex,col:i?m:n.colIndex+1};case Ze.ARROW_LEFT:return n.colIndex-1<w?void 0:{row:n.rowIndex,col:i?w:n.colIndex-1};case Ze.ARROW_UP:return n.rowIndex-1<b?void 0:{row:i?b:n.rowIndex-1,col:n.colIndex};case Ze.ARROW_DOWN:return n.rowIndex+1>T?void 0:{row:i?T:n.rowIndex+1,col:n.colIndex}}},r.prototype.calculateOffset=function(e,n,i){var o=e.options,a=o.frozenRowCount,l=a===void 0?0:a,s=o.frozenTrailingRowCount,u=s===void 0?0:s,f=e.facet,h=e.frozenColGroup,d=e.frozenTrailingColGroup,c=e.frozenRowGroup,v=e.frozenTrailingRowGroup,p=f.layoutResult.colLeafNodes,g=f.getScrollOffset(),y=g.scrollX,C=g.scrollY,w=f.panelBBox,m=w.viewportHeight,_=w.viewportWidth,b=K(e,"theme.splitLine"),T=h?Math.floor(h.getBBox().width-b.verticalBorderWidth/2):0,E=d?Math.floor(d.getBBox().width):0,L=c?Math.floor(c.getBBox().height-b.horizontalBorderWidth/2):0,F=v?Math.floor(v.getBBox().height):0,I=Sf(y,C,f.viewCellWidths,f.viewCellHeights,{width:_-T-E,height:m-L-F,x:T,y:L},f.getRealScrollX(f.cornerBBox.width)),B=-1,k=-1,U=p.find(function(z){return z.colIndex===i});if(i<=I[0]?B=U.x-T:i>=I[1]&&i<p.length-u&&(B=U.x+U.width-_+E),n<=I[2])k=f.viewCellHeights.getCellOffsetY(n-l);else if(n>=I[3]){var O=f.viewCellHeights.getCellOffsetY(n+1);k=O+F-m}return{offsetX:B,offsetY:k}},r.prototype.scrollToActiveCell=function(e,n,i){var o=this.calculateOffset(e,n,i),a=o.offsetX,l=o.offsetY,s=e.facet,u=e.facet.getScrollOffset(),f=u.scrollX,h=u.scrollY;s.scrollWithAnimation({offsetX:{value:a>-1?a:f},offsetY:{value:l>-1?l:h}})},r}(Qt),aF=function(){function t(r){var e=this;this.interactions=new Map,this.intercepts=new Set,this.hoverTimer=null,this.defaultState={cells:[],force:!1},this.onTriggerInteractionsResetEffect=function(){e.interactions.forEach(function(n){n.reset()})},this.selectAll=function(){e.changeState({stateName:G.ALL_SELECTED})},this.getCellChildrenNodes=function(n){var i,o=(i=n==null?void 0:n.getMeta)===null||i===void 0?void 0:i.call(n),a=(n==null?void 0:n.cellType)===N.ROW_CELL,l=e.spreadsheet.isHierarchyTreeType();return l&&a?Ge.getAllLeaveNodes(o).filter(function(s){return s.rowIndex===o.rowIndex}):Ge.getAllChildrenNodes(o)},this.selectHeaderCell=function(n){var i;n===void 0&&(n={});var o=n.cell;if(!D(o)){var a=(i=o==null?void 0:o.getMeta)===null||i===void 0?void 0:i.call(o);if(!(!a||Fe(a==null?void 0:a.x))){e.addIntercepts([Q.HOVER]);var l=e.spreadsheet.isHierarchyTreeType(),s=(o==null?void 0:o.cellType)===N.COL_CELL,u=e.getState(),f=e.isSelectedCell(o),h=(n==null?void 0:n.isMultiSelection)&&e.isSelectedState(),d=f?[]:e.getCellChildrenNodes(o),c=f?[]:[or(o)];if(h&&(c=Nn(u==null?void 0:u.cells,c),d=Nn(u==null?void 0:u.nodes,d),f&&(c=c.filter(function(p){var g=p.id;return g!==a.id}),d=d.filter(function(p){return!(p!=null&&p.id.includes(a.id))}))),D(c)){e.reset(),e.spreadsheet.emit(R.GLOBAL_SELECTED,e.getActiveCells());return}e.changeState({cells:c,nodes:d,stateName:G.SELECTED});var v=c.map(function(p){var g=p.id;return g});return e.updateCells(e.getRowColActiveCells(v)),(!l||s)&&e.highlightNodes(d),e.spreadsheet.emit(R.GLOBAL_SELECTED,e.getActiveCells()),!0}}},this.highlightNodes=function(n){n===void 0&&(n=[]),n.forEach(function(i){var o;(o=i==null?void 0:i.belongsCell)===null||o===void 0||o.updateByState(G.SELECTED,i.belongsCell)})},this.mergeCells=function(n,i){iN(e.spreadsheet,n,i)},this.unmergeCell=function(n){aN(e.spreadsheet,n)},this.spreadsheet=r,this.registerEventController(),this.registerInteractions(),window.addEventListener("visibilitychange",this.onTriggerInteractionsResetEffect)}return t.prototype.destroy=function(){this.interactions.clear(),this.intercepts.clear(),this.eventController.clear(),this.clearHoverTimer(),this.resetState(),window.removeEventListener("visibilitychange",this.onTriggerInteractionsResetEffect)},t.prototype.reset=function(){this.clearState(),this.clearHoverTimer(),this.intercepts.clear(),this.spreadsheet.hideTooltip()},t.prototype.setState=function(r){YN(this.spreadsheet,r)},t.prototype.getState=function(){return this.spreadsheet.store.get(us)||this.defaultState},t.prototype.setInteractedCells=function(r){var e=this.getInteractedCells().concat([r]),n=this.getState();n.interactedCells=e,this.setState(n)},t.prototype.getInteractedCells=function(){var r=this.getState();return(r==null?void 0:r.interactedCells)||[]},t.prototype.resetState=function(){this.spreadsheet.store.set(us,this.defaultState)},t.prototype.getCurrentStateName=function(){return this.getState().stateName},t.prototype.isEqualStateName=function(r){return this.getCurrentStateName()===r},t.prototype.isStateOf=function(r){var e=this.getState();return(e==null?void 0:e.stateName)===r},t.prototype.isSelectedState=function(){return this.isStateOf(G.SELECTED)||this.isStateOf(G.BRUSH_SELECTED)},t.prototype.isAllSelectedState=function(){return this.isStateOf(G.ALL_SELECTED)},t.prototype.isHoverFocusState=function(){return this.isStateOf(G.HOVER_FOCUS)},t.prototype.isHoverState=function(){return this.isStateOf(G.HOVER)},t.prototype.isActiveCell=function(r){return!!this.getCells().find(function(e){return r.getMeta().id===e.id})},t.prototype.isSelectedCell=function(r){return this.isSelectedState()&&this.isActiveCell(r)},t.prototype.getCells=function(r){var e=this.getState(),n=(e==null?void 0:e.cells)||[];return Fe(r)?n:n.filter(function(i){return r.includes(i.type)})},t.prototype.getActiveCells=function(){var r=this.getCells().map(function(n){return n.id}),e=this.getAllCells();return oe(r,function(n){return Je(e,function(i){var o;return((o=i==null?void 0:i.getMeta())===null||o===void 0?void 0:o.id)===n})}).filter(function(n){return n})},t.prototype.clearStyleIndependent=function(){!this.isSelectedState()&&!this.isHoverState()&&!this.isAllSelectedState()||this.getPanelGroupAllDataCells().forEach(function(r){r.hideInteractionShape()})},t.prototype.getPanelGroupAllUnSelectedDataCells=function(){var r=this;return this.getPanelGroupAllDataCells().filter(function(e){return!r.isActiveCell(e)})},t.prototype.getPanelGroupAllDataCells=function(){var r;return Ai((r=this.spreadsheet.panelGroup)===null||r===void 0?void 0:r.getChildren(),Qr)},t.prototype.getAllRowHeaderCells=function(){var r,e,n=((r=this.spreadsheet.foregroundGroup)===null||r===void 0?void 0:r.getChildren())||[],i=n.find(function(a){return a instanceof Yf&&!(a instanceof aC)}),o=((e=i==null?void 0:i.cfg)===null||e===void 0?void 0:e.children)||[];return Ai(o,go).filter(function(a){return a.cellType===N.ROW_CELL})},t.prototype.getAllColHeaderCells=function(){var r,e,n=((r=this.spreadsheet.foregroundGroup)===null||r===void 0?void 0:r.getChildren())||[],i=n.find(function(a){return a instanceof $f}),o=((e=i==null?void 0:i.cfg)===null||e===void 0?void 0:e.children)||[];return Ai(o,ll).filter(function(a){return a.cellType===N.COL_CELL})},t.prototype.getRowColActiveCells=function(r){return Nn(this.getAllRowHeaderCells(),this.getAllColHeaderCells()).filter(function(e){return r.includes(e.getMeta().id)})},t.prototype.getAllCells=function(){return Nn(this.getPanelGroupAllDataCells(),this.getAllRowHeaderCells(),this.getAllColHeaderCells())},t.prototype.hideColumns=function(r,e){r===void 0&&(r=[]),e===void 0&&(e=!0),Af(this.spreadsheet,r,e)},t.prototype.getBrushSelectionInfo=function(r){var e,n,i;return tr(r)?{dataBrushSelection:r,rowBrushSelection:r,colBrushSelection:r}:{dataBrushSelection:(e=r==null?void 0:r.data)!==null&&e!==void 0?e:!1,rowBrushSelection:(n=r==null?void 0:r.row)!==null&&n!==void 0?n:!1,colBrushSelection:(i=r==null?void 0:r.col)!==null&&i!==void 0?i:!1}},t.prototype.getDefaultInteractions=function(){var r=this.spreadsheet.options.interaction,e=r.resize,n=r.brushSelection,i=r.multiSelection,o=r.rangeSelection,a=r.selectedCellMove,l=this.getBrushSelectionInfo(n),s=l.dataBrushSelection,u=l.rowBrushSelection,f=l.colBrushSelection;return[{key:tt.CORNER_CELL_CLICK,interaction:K9},{key:tt.DATA_CELL_CLICK,interaction:U9},{key:tt.ROW_COLUMN_CLICK,interaction:V9},{key:tt.ROW_TEXT_CLICK,interaction:q9},{key:tt.MERGED_CELLS_CLICK,interaction:X9},{key:tt.HOVER,interaction:Z9,enable:!We()},{key:tt.BRUSH_SELECTION,interaction:Q9,enable:!We()&&s},{key:tt.ROW_BRUSH_SELECTION,interaction:J9,enable:!We()&&u},{key:tt.COL_BRUSH_SELECTION,interaction:j9,enable:!We()&&f},{key:tt.COL_ROW_RESIZE,interaction:nF,enable:!We()&&e},{key:tt.DATA_CELL_MULTI_SELECTION,interaction:eF,enable:!We()&&i},{key:tt.RANGE_SELECTION,interaction:rF,enable:!We()&&o},{key:tt.SELECTED_CELL_MOVE,interaction:oF,enable:!We()&&a}]},t.prototype.registerInteractions=function(){var r=this,e=this.spreadsheet.options.interaction.customInteractions;this.interactions.clear();var n=this.getDefaultInteractions();n.forEach(function(i){var o=i.key,a=i.interaction,l=i.enable;l!==!1&&r.interactions.set(o,new a(r.spreadsheet))}),D(e)||J(e,function(i){var o=i.interaction;r.interactions.set(i.key,new o(r.spreadsheet))})},t.prototype.registerEventController=function(){this.eventController=new tF(this.spreadsheet)},t.prototype.draw=function(){this.spreadsheet.container.draw()},t.prototype.clearState=function(){Oy(this.spreadsheet)&&this.draw()},t.prototype.changeState=function(r){var e=this,n=this.spreadsheet.interaction,i=r.cells,o=i===void 0?[]:i,a=r.force,l=r.stateName,s=r.onUpdateCells;if(D(o)&&l===G.SELECTED){a&&n.changeState({cells:[],stateName:G.UNSELECTED});return}this.getCurrentStateName()===G.ALL_SELECTED&&this.clearStyleIndependent(),this.clearState(),this.setState(r);var u=function(){e.updatePanelGroupAllDataCells()};s?s(this,u):u(),this.draw()},t.prototype.updatePanelGroupAllDataCells=function(){this.updateCells(this.getPanelGroupAllDataCells())},t.prototype.updateCells=function(r){r===void 0&&(r=[]),r.forEach(function(e){e.update()})},t.prototype.addIntercepts=function(r){var e=this;r===void 0&&(r=[]),r.forEach(function(n){e.intercepts.add(n)})},t.prototype.hasIntercepts=function(r){var e=this;return r===void 0&&(r=[]),r.some(function(n){return e.intercepts.has(n)})},t.prototype.removeIntercepts=function(r){var e=this;r===void 0&&(r=[]),r.forEach(function(n){e.intercepts.delete(n)})},t.prototype.clearHoverTimer=function(){clearTimeout(this.hoverTimer)},t.prototype.setHoverTimer=function(r){this.hoverTimer=r},t.prototype.getHoverTimer=function(){return this.hoverTimer},t.prototype.getSelectedCellHighlight=function(){var r=this.spreadsheet.options.interaction.selectedCellHighlight;if(tr(r))return{rowHeader:r,colHeader:r,currentRow:!1,currentCol:!1};var e=r??{},n=e.rowHeader,i=n===void 0?!1:n,o=e.colHeader,a=o===void 0?!1:o,l=e.currentRow,s=l===void 0?!1:l,u=e.currentCol,f=u===void 0?!1:u;return{rowHeader:i,colHeader:a,currentRow:s,currentCol:f}},t.prototype.getHoverAfterScroll=function(){return this.spreadsheet.options.interaction.hoverAfterScroll},t.prototype.getHoverHighlight=function(){var r=this.spreadsheet.options.interaction.hoverHighlight;if(tr(r))return{rowHeader:r,colHeader:r,currentRow:r,currentCol:r};var e=r??{},n=e.rowHeader,i=n===void 0?!1:n,o=e.colHeader,a=o===void 0?!1:o,l=e.currentRow,s=l===void 0?!1:l,u=e.currentCol,f=u===void 0?!1:u;return{rowHeader:i,colHeader:a,currentRow:s,currentCol:f}},t.prototype.getBrushSelection=function(){var r=this.spreadsheet.options.interaction.brushSelection;if(tr(r))return{data:r,row:r,col:r};var e=r??{},n=e.data,i=n===void 0?!1:n,o=e.row,a=o===void 0?!1:o,l=e.col,s=l===void 0?!1:l;return{data:i,row:a,col:s}},t}(),lF=function(){function t(r){var e=this;this.viewport=window,this.isDevicePixelRatioChange=!1,this.init=function(){e.initDevicePixelRatioListener(),e.initDeviceZoomListener()},this.destroy=function(){e.removeDevicePixelRatioListener(),e.removeDeviceZoomListener()},this.removeDevicePixelRatioListener=function(){var n;!((n=e.devicePixelRatioMedia)===null||n===void 0)&&n.removeEventListener?e.devicePixelRatioMedia.removeEventListener("change",e.renderByDevicePixelRatioChanged):e.devicePixelRatioMedia.removeListener(e.renderByDevicePixelRatioChanged)},this.initDeviceZoomListener=function(){var n,i;We()||(i=(n=e.viewport)===null||n===void 0?void 0:n.visualViewport)===null||i===void 0||i.addEventListener("resize",e.renderByZoomScaleWithoutResizeEffect)},this.removeDeviceZoomListener=function(){var n,i;We()||(i=(n=e.viewport)===null||n===void 0?void 0:n.visualViewport)===null||i===void 0||i.removeEventListener("resize",e.renderByZoomScaleWithoutResizeEffect)},this.renderByZoomScaleWithoutResizeEffect=function(n){e.isDevicePixelRatioChange=!1,e.renderByZoomScale(n)},this.renderByDevicePixelRatioChanged=function(){e.isDevicePixelRatioChange=!0,e.renderByDevicePixelRatio()},this.renderByDevicePixelRatio=function(n){n===void 0&&(n=window.devicePixelRatio);var i=e.spreadsheet,o=i.container,a=i.options,l=a.width,s=a.height,u=a.devicePixelRatio,f=e.spreadsheet.getCanvasElement(),h=o.get("pixelRatio");if(!(h===n||!f)){var d=Math.max(n,u,hp);o.set("pixelRatio",d),o.changeSize(l,s),e.spreadsheet.render(!1)}},this.renderByZoomScale=Gi(function(n){var i=Math.ceil(n.target.scale);i>=1&&!e.isDevicePixelRatioChange&&e.renderByDevicePixelRatio(i)},350),this.spreadsheet=r}return t.prototype.initDevicePixelRatioListener=function(){var r;this.devicePixelRatioMedia=window.matchMedia("(resolution: ".concat(window.devicePixelRatio,"dppx)")),!((r=this.devicePixelRatioMedia)===null||r===void 0)&&r.addEventListener?this.devicePixelRatioMedia.addEventListener("change",this.renderByDevicePixelRatioChanged):this.devicePixelRatioMedia.addListener(this.renderByDevicePixelRatioChanged)},t}(),jc=function(){function t(r){this.visible=!1,this.position={x:0,y:0},this.spreadsheet=r}return t.prototype.show=function(r){var e,n,i,o=r.position,a=r.options,l=r.content,s=r.event,u=YP(a).enterable,f=this.spreadsheet.options.tooltip||{},h=f.autoAdjustBoundary,d=f.adjustPosition;this.visible=!0,this.options=r;var c=this.getContainer();this.renderContent(l);var v=$P({spreadsheet:this.spreadsheet,position:o,tooltipContainer:c,autoAdjustBoundary:h}),p=v.x,g=v.y;this.position=(e=d==null?void 0:d({position:{x:p,y:g},event:s}))!==null&&e!==void 0?e:{x:p,y:g},Po(c,{style:{left:"".concat((n=this.position)===null||n===void 0?void 0:n.x,"px"),top:"".concat((i=this.position)===null||i===void 0?void 0:i.y,"px"),pointerEvents:u?"all":"none"},visible:!0})},t.prototype.hide=function(){this.visible=!1,this.container&&(Po(this.container,{style:{pointerEvents:"none"},visible:!1}),this.resetPosition())},t.prototype.destroy=function(){var r,e;this.visible=!1,this.container&&(this.resetPosition(),(e=(r=this.container).remove)===null||e===void 0||e.call(r),this.container=null)},t.prototype.renderContent=function(r){if(this.container){this.clearContent();var e=(this.spreadsheet.options.tooltip||{}).content,n=r??e;if(!Fe(n)){if(typeof n=="string"){this.container.innerHTML=n;return}n instanceof Element&&this.container.appendChild(n)}}},t.prototype.clearContent=function(){this.container&&(this.container.innerHTML="")},t.prototype.disablePointerEvent=function(){this.container&&this.container.style.pointerEvents!=="none"&&Po(this.container,{style:{pointerEvents:"none"}})},t.prototype.resetPosition=function(){this.position={x:0,y:0}},t.prototype.getContainer=function(){var r;if(!this.container){var e=this.spreadsheet.options.tooltip,n=((r=e.getContainer)===null||r===void 0?void 0:r.call(e))||document.body,i=document.createElement("div");return Po(i,{style:e.style,className:[mf].concat(e.className)}),n.appendChild(i),this.container=i,this.container}return this.container},t}(),cC=function(t){H(r,t);function r(e,n,i){var o=t.call(this)||this;return o.store=new C5,o.untypedOn=o.on,o.untypedEmit=o.emit,o.on=function(a,l){return o.untypedOn(a,l)},o.emit=function(a){for(var l=[],s=1;s<arguments.length;s++)l[s-1]=arguments[s];return o.untypedEmit.apply(o,P([a],A(l),!1))},o.initHiddenColumnsDetail=function(){var a=o.options.interaction.hiddenColumnFields,l=o.store.get("hiddenColumnsDetail");D(a)&&D(l)||Af(o,a,!0)},o.measureText=Ln(function(a,l){var s;if(a===void 0&&(a=""),!l)return null;var u=(s=o.getCanvasElement())===null||s===void 0?void 0:s.getContext("2d"),f=l,h=f.fontSize,d=f.fontFamily,c=f.fontWeight,v=f.fontStyle,p=f.fontVariant;return u.font=[v,p,c,"".concat(h,"px"),d].join(" ").trim(),u.measureText(String(a))},function(a,l){return P([a],A(Ir(l)),!1).join("")}),o.measureTextWidth=function(a,l){a===void 0&&(a="");var s=o.measureText(a,l);return(s==null?void 0:s.width)||0},o.measureTextHeight=function(a,l){a===void 0&&(a="");var s=o.measureText(a,l);return s?s.actualBoundingBoxAscent+s.actualBoundingBoxDescent:0},o.measureTextWidthRoughly=function(a,l){var s,u;l===void 0&&(l={});var f=o.measureTextWidth("a",l),h=o.measureTextWidth("蚂",l),d=0;if(!a)return d;try{for(var c=Ot(a),v=c.next();!v.done;v=c.next()){var p=v.value,g=p.charCodeAt(0);d+=g>=0&&g<=255?f:h}}catch(y){s={error:y}}finally{try{v&&!v.done&&(u=c.return)&&u.call(c)}finally{if(s)throw s.error}}return d},o.dataCfg=Il(n),o.options=Tc(i),o.dataSet=o.getDataSet(o.options),o.setDebug(),o.initTooltip(),o.initGroups(e),o.bindEvents(),o.initInteraction(),o.initTheme(),o.initHdAdapter(),o.registerIcons(),o.setOverscrollBehavior(),o.mountSheetInstance(),o}return r.prototype.setOverscrollBehavior=function(){var e=this.options.interaction.overscrollBehavior,n=window.getComputedStyle(document.body).getPropertyValue("overscroll-behavior"),i=n&&n!=="auto";i?this.store.set("initOverscrollBehavior",n):e&&(document.body.style.overscrollBehavior=e)},r.prototype.restoreOverscrollBehavior=function(){document.body.style.overscrollBehavior=this.store.get("initOverscrollBehavior")||""},r.prototype.setDebug=function(){rr.getInstance().setDebug(this.options.debug)},r.prototype.initTheme=function(){this.setThemeCfg({name:"default"})},r.prototype.getMountContainer=function(e){var n=hi(e)?document.querySelector(e):e;if(!n)throw new Error("Target mount container is not a DOM element");return n},r.prototype.initHdAdapter=function(){this.options.hdAdapter&&(this.hdAdapter=new lF(this),this.hdAdapter.init())},r.prototype.initInteraction=function(){var e,n;(n=(e=this.interaction)===null||e===void 0?void 0:e.destroy)===null||n===void 0||n.call(e),this.interaction=new aF(this)},r.prototype.initTooltip=function(){var e,n,i,o;(n=(e=this.tooltip)===null||e===void 0?void 0:e.destroy)===null||n===void 0||n.call(e),this.tooltip=this.renderTooltip(),this.tooltip instanceof jc||console.warn("[Custom Tooltip]: ".concat((o=(i=this.tooltip)===null||i===void 0?void 0:i.constructor)===null||o===void 0?void 0:o.toString()," should be extends from BaseTooltip"))},r.prototype.renderTooltip=function(){var e,n;return((n=(e=this.options.tooltip)===null||e===void 0?void 0:e.renderTooltip)===null||n===void 0?void 0:n.call(e,this))||new jc(this)},r.prototype.showTooltip=function(e){var n,i,o=e.content,a=e.event,l=this.getCell(a==null?void 0:a.target),s=Xe(o)?o(l,e):o;(i=(n=this.tooltip).show)===null||i===void 0||i.call(n,S(S({},e),{content:s}))},r.prototype.showTooltipWithInfo=function(e,n,i){var o,a=zf(this,e),l=a.showTooltip,s=a.content;if(l){var u=this.getCell(e==null?void 0:e.target),f=(o=i==null?void 0:i.data)!==null&&o!==void 0?o:JP({spreadsheet:this,cellInfos:n,targetCell:u,options:S({enableFormat:!0},i)});this.showTooltip({data:f,position:{x:e.clientX,y:e.clientY},options:S({enterable:!0},i),event:e,content:s})}},r.prototype.hideTooltip=function(){var e,n;(n=(e=this.tooltip).hide)===null||n===void 0||n.call(e)},r.prototype.destroyTooltip=function(){var e,n;(n=(e=this.tooltip).destroy)===null||n===void 0||n.call(e)},r.prototype.registerIcons=function(){var e=this.options.customSVGIcons;D(e)||J(e,function(n){Kg(n.name,n.svg)})},r.prototype.setDataCfg=function(e,n){this.store.set("originalDataCfg",e),n?this.dataCfg=Il(e):this.dataCfg=Il(this.dataCfg,e),n9(this)},r.prototype.setOptions=function(e,n){var i;this.hideTooltip(),n?this.options=Tc(e):this.options=Jt(this.options,e),(n||!((i=e.tooltip)===null||i===void 0)&&i.renderTooltip)&&this.initTooltip(),this.resetHiddenColumnsDetailInfoIfNeeded(),this.registerIcons()},r.prototype.resetHiddenColumnsDetailInfoIfNeeded=function(){var e;D((e=this.options.interaction)===null||e===void 0?void 0:e.hiddenColumnFields)||this.store.set("hiddenColumnsDetail",[])},r.prototype.render=function(e,n){if(e===void 0&&(e=!0),n===void 0&&(n={}),!!this.getCanvasElement()){var i=n.reBuildDataSet,o=i===void 0?!1:i,a=n.reBuildHiddenColumnsDetail,l=a===void 0?!0:a;this.emit(R.LAYOUT_BEFORE_RENDER),o&&(this.dataSet=this.getDataSet(this.options)),e&&(this.clearDrillDownData("",!0),this.dataSet.setDataCfg(this.dataCfg)),this.buildFacet(),l&&this.initHiddenColumnsDetail(),this.emit(R.LAYOUT_AFTER_RENDER)}},r.prototype.mountSheetInstance=function(){var e=this.getCanvasElement();e&&(e.__s2_instance__=this)},r.prototype.unmountSheetInstance=function(){var e=this.getCanvasElement();e&&delete e.__s2_instance__},r.prototype.destroy=function(){var e,n,i,o,a;this.restoreOverscrollBehavior(),this.emit(R.LAYOUT_DESTROY),(e=this.facet)===null||e===void 0||e.destroy(),(n=this.hdAdapter)===null||n===void 0||n.destroy(),(i=this.interaction)===null||i===void 0||i.destroy(),(o=this.store)===null||o===void 0||o.clear(),this.destroyTooltip(),this.clearCanvasEvent(),this.unmountSheetInstance(),(a=this.container)===null||a===void 0||a.destroy(),F5()},r.prototype.setThemeCfg=function(e){e===void 0&&(e={});var n=(e==null?void 0:e.theme)||{},i=X4(S(S({},e),{spreadsheet:this}));this.theme=Jt(i,n)},r.prototype.setTheme=function(e){this.theme=Jt(this.theme,e)},r.prototype.updatePagination=function(e){this.options=Jt(this.options,{pagination:e}),this.store.set("scrollX",0),this.store.set("scrollY",0)},r.prototype.getContentHeight=function(){return this.facet.getContentHeight()},r.prototype.changeSize=function(e,n){e===void 0&&(e=this.options.width),n===void 0&&(n=this.options.height),this.changeSheetSize(e,n)},r.prototype.changeSheetSize=function(e,n){e===void 0&&(e=this.options.width),n===void 0&&(n=this.options.height);var i=this.getCanvasElement(),o=this.container.get("width"),a=this.container.get("height"),l=e!==o||n!==a;!l||!i||(this.options=Jt(this.options,{width:e,height:n}),this.container.changeSize(e,n))},r.prototype.getCanvasElement=function(){return this.container.get("el")},r.prototype.getLayoutWidthType=function(){return this.options.style.layoutWidthType},r.prototype.getRowNodes=function(e){return e===void 0&&(e=-1),e===-1?this.facet.layoutResult.rowNodes:this.facet.layoutResult.rowNodes.filter(function(n){return n.level===e})},r.prototype.getRowLeafNodes=function(){var e;return((e=this.facet)===null||e===void 0?void 0:e.layoutResult.rowLeafNodes)||[]},r.prototype.getColumnNodes=function(e){var n;e===void 0&&(e=-1);var i=((n=this.facet)===null||n===void 0?void 0:n.layoutResult.colNodes)||[];return e===-1?i:i.filter(function(o){return o.level===e})},r.prototype.getColumnLeafNodes=function(){var e;return((e=this.facet)===null||e===void 0?void 0:e.layoutResult.colLeafNodes)||[]},r.prototype.updateScrollOffset=function(e){var n={offsetX:{value:void 0,animate:!1},offsetY:{value:void 0,animate:!1},rowHeaderOffsetX:{value:void 0,animate:!1}};this.facet.updateScrollOffset(Jt(n,e))},r.prototype.getTooltipDataItemMappingCallback=function(){var e;return(e=this.options)===null||e===void 0?void 0:e.mappingDisplayDataItem},r.prototype.isCellType=function(e){return e instanceof al},r.prototype.getCell=function(e){for(var n,i=e;i&&!(i instanceof Zh);){if(this.isCellType(i))return i;i=(n=i.get)===null||n===void 0?void 0:n.call(i,"parent")}return null},r.prototype.getCellType=function(e){var n=this.getCell(e);return n==null?void 0:n.cellType},r.prototype.getTotalsConfig=function(e){var n=this.options.totals,i=this.dataSet.fields.rows,o=K(n,ot(i,e)?"row":"col",{}),a=o.showSubTotals&&ot(o.subTotalsDimensions,e)?o.showSubTotals:!1;return S(S({label:He("总计"),subLabel:He("小计"),totalsGroupDimensions:[],subTotalsGroupDimensions:[]},o),{showSubTotals:a})},r.prototype.initGroups=function(e){var n=this.options,i=n.width,o=n.height,a=n.supportCSSTransform,l=n.devicePixelRatio;this.container=new Zh({container:this.getMountContainer(e),width:i,height:o,localRefresh:!1,supportCSSTransform:a,pixelRatio:Math.max(l,hp)}),this.backgroundGroup=this.container.addGroup({name:_x,zIndex:gx}),this.panelGroup=this.container.addGroup({name:bx,zIndex:mx}),this.foregroundGroup=this.container.addGroup({name:Sx,zIndex:yx}),this.initPanelGroupChildren(),this.updateContainerStyle()},r.prototype.updateContainerStyle=function(){var e=this.getCanvasElement();e&&(e.style.display="block")},r.prototype.initPanelGroupChildren=function(){this.panelScrollGroup=new Y9({name:Tx,zIndex:xx,s2:this}),this.panelGroup.add(this.panelScrollGroup)},r.prototype.getInitColumnLeafNodes=function(){return this.store.get("initColumnLeafNodes",[])},r.prototype.clearColumnLeafNodes=function(){this.clearInitColumnLeafNodes()},r.prototype.clearInitColumnLeafNodes=function(){this.store.set("initColumnLeafNodes",void 0)},r.prototype.clearCanvasEvent=function(){var e=this,n=this.getEvents();J0(n,function(i,o){e.off(o)})},r.prototype.updateSortMethodMap=function(e,n,i){var o;i===void 0&&(i=!1);var a=i?null:this.store.get("sortMethodMap");this.store.set("sortMethodMap",S(S({},a),(o={},o[e]=n,o)))},r.prototype.getMenuDefaultSelectedKeys=function(e){var n=this.store.get("sortMethodMap"),i=K(n,e);return i?[i]:[]},r}(Ta),sF=function(t){H(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.getDataSet=function(e){var n=e.dataSet,i=e.hierarchyType;if(n)return n(this);var o=i==="customTree"?new a9(this):new Vs(this);return o},r.prototype.getContentHeight=function(){return this.facet.getContentHeight()},r.prototype.isPivotMode=function(){return!0},r.prototype.isTableMode=function(){return!1},r.prototype.isHierarchyTreeType=function(){var e=this.options.hierarchyType;return e==="tree"||e==="customTree"},r.prototype.isScrollContainsRowHeader=function(){return!this.isFrozenRowHeader()},r.prototype.isFrozenRowHeader=function(){var e;return(e=this.options)===null||e===void 0?void 0:e.frozenRowHeader},r.prototype.isValueInCols=function(){var e,n;return(n=(e=this.dataSet)===null||e===void 0?void 0:e.fields)===null||n===void 0?void 0:n.valueInCols},r.prototype.clearDrillDownData=function(e,n){if(this.dataSet instanceof Vs){var i=this.dataSet.clearDrillDownData(e);i&&!n&&(this.interaction.reset(),this.render(!1))}},r.prototype.getFacetCfgFromDataSetAndOptions=function(){var e=this,n=this.dataSet,i=n.fields,o=n.meta,a=this.options,l=a.style,s=a.dataCell,u=function(f){return new Qr(f,e)};return S(S(S(S({},this.options),i),l),{meta:o,spreadsheet:this,dataSet:this.dataSet,dataCell:s??u})},r.prototype.buildFacet=function(){var e,n=this.getFacetCfgFromDataSetAndOptions();(e=this.facet)===null||e===void 0||e.destroy(),this.facet=new k9(n),this.facet.render()},r.prototype.bindEvents=function(){this.off(R.ROW_CELL_COLLAPSE_TREE_ROWS),this.off(R.LAYOUT_TREE_ROWS_COLLAPSE_ALL),this.on(R.ROW_CELL_COLLAPSE_TREE_ROWS,this.handleRowCellCollapseTreeRows),this.on(R.LAYOUT_TREE_ROWS_COLLAPSE_ALL,this.handleTreeRowsCollapseAll)},r.prototype.handleRowCellCollapseTreeRows=function(e){var n,i=e.id,o=e.isCollapsed,a={style:{collapsedRows:(n={},n[i]=o,n)}};this.emit(R.LAYOUT_COLLAPSE_ROWS,{collapsedRows:a.style.collapsedRows,meta:e==null?void 0:e.node}),this.setOptions(a),this.render(!1),this.emit(R.LAYOUT_AFTER_COLLAPSE_ROWS,{collapsedRows:a.style.collapsedRows,meta:e==null?void 0:e.node})},r.prototype.handleTreeRowsCollapseAll=function(e){var n={style:{hierarchyCollapse:!e,collapsedRows:null,rowExpandDepth:null}};this.setOptions(n),this.render(!1)},r.prototype.groupSortByMethod=function(e,n){var i=this.dataCfg.fields,o=i.rows,a=i.columns,l=this.options.style.colCfg.hideMeasureColumn,s=this.isValueInCols()?ge(o):ge(a),u=n.query,f=n.value,h=oo(u),d=f;l&&this.isValueInCols()&&(d=this.dataSet.fields.values[0],h[re]=d);var c={sortFieldId:s,sortMethod:e,sortByMeasure:d,query:h},v=this.dataCfg.sortParams.filter(function(g){return(g==null?void 0:g.sortFieldId)!==s});this.updateSortMethodMap(n.id,e,!0);var p=P(P([],A(v),!1),[c],!1);this.emit(R.RANGE_SORT,p),this.setDataCfg(S(S({},this.dataCfg),{sortParams:p})),this.render()},r.prototype.handleGroupSort=function(e,n){var i=this;e.stopPropagation(),this.interaction.addIntercepts([Q.HOVER]);var o=this.getMenuDefaultSelectedKeys(n==null?void 0:n.id),a={onClick:function(l){var s=l.key,u=s;i.groupSortByMethod(u,n),i.emit(R.RANGE_SORTED,e)},menus:G4(),defaultSelectedKeys:o};this.showTooltipWithInfo(e,[],{operator:a,onlyMenu:!0,forceRender:!0})},r.prototype.initPanelGroupChildren=function(){t.prototype.initPanelGroupChildren.call(this);var e={zIndex:ep,s2:this};this.frozenRowGroup=new dC(S({KEY_GROUP_PANEL_FROZEN_ROW:tp},e)),this.panelGroup.add(this.frozenRowGroup)},r.prototype.isCellType=function(e){return e instanceof al&&!(e instanceof My)},r}(cC);(function(t){H(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.onSortTooltipClick=function(n,i){var o=n.key,a=i.field,l={sortFieldId:a,sortMethod:o};e.updateSortMethodMap(i.id,o),e.emit(R.RANGE_SORT,[l])},e}return r.prototype.getDataSet=function(e){var n=e.dataSet;return n?n(this):new l9(this)},r.prototype.isPivotMode=function(){return!1},r.prototype.isTableMode=function(){return!0},r.prototype.isHierarchyTreeType=function(){return!1},r.prototype.isScrollContainsRowHeader=function(){return!1},r.prototype.isFrozenRowHeader=function(){return!1},r.prototype.clearDrillDownData=function(){},r.prototype.isValueInCols=function(){return!1},r.prototype.bindEvents=function(){},r.prototype.initPanelGroupChildren=function(){var e,n=this;t.prototype.initPanelGroupChildren.call(this);var i={zIndex:ep,s2:this};e=A([tp,rp,Rx,Ex,Lx,Ax].map(function(o){var a=new dC(S({name:o},i));return n.panelGroup.add(a),a}),6),this.frozenRowGroup=e[0],this.frozenColGroup=e[1],this.frozenTrailingRowGroup=e[2],this.frozenTrailingColGroup=e[3],this.frozenTopGroup=e[4],this.frozenBottomGroup=e[5]},r.prototype.getFacetCfgFromDataSetAndOptions=function(){var e=this,n=this.dataSet,i=n.fields,o=n.meta,a=this.options,l=a.style,s=a.dataCell,u=function(f){return e.options.showSeriesNumber&&f.colIndex===0?new Ey(f,e):new sl(f,e)};return S(S(S(S({},this.options),i),l),{meta:o,spreadsheet:this,dataSet:this.dataSet,dataCell:s??u})},r.prototype.buildFacet=function(){var e,n=this.getFacetCfgFromDataSetAndOptions();(e=this.facet)===null||e===void 0||e.destroy(),this.facet=new $9(n),this.facet.render()},r.prototype.clearFrozenGroups=function(){this.frozenRowGroup.set("children",[]),this.frozenColGroup.set("children",[]),this.frozenTrailingRowGroup.set("children",[]),this.frozenTrailingColGroup.set("children",[]),this.frozenTopGroup.set("children",[]),this.frozenBottomGroup.set("children",[])},r.prototype.destroy=function(){t.prototype.destroy.call(this),this.clearFrozenGroups(),this.off(R.RANGE_SORT),this.off(R.RANGE_FILTER)},r.prototype.handleGroupSort=function(e,n){var i=this;e.stopPropagation(),this.interaction.addIntercepts([Q.HOVER]);var o=this.getMenuDefaultSelectedKeys(n==null?void 0:n.id),a={onClick:function(l){var s=l.key,u=s;i.onSortTooltipClick({key:u},n)},menus:$4(),defaultSelectedKeys:o};this.showTooltipWithInfo(e,[],{operator:a,onlyMenu:!0,forceRender:!0})},r})(cC);const uF={fields:{rows:["province","city"],columns:["type"],values:["price"]},data:[{province:"浙江",city:"杭州",type:"笔",price:"1"},{province:"浙江",city:"杭州",type:"纸张",price:"2"},{province:"浙江",city:"舟山",type:"笔",price:"17"},{province:"浙江",city:"舟山",type:"纸张",price:"6"},{province:"吉林",city:"长春",type:"笔",price:"8"},{province:"吉林",city:"白山",type:"笔",price:"12"},{province:"吉林",city:"长春",type:"纸张",price:"3"},{province:"吉林",city:"白山",type:"纸张",price:"25"},{province:"浙江",city:"杭州",type:"笔",cost:"0.5"},{province:"浙江",city:"杭州",type:"纸张",cost:"20"},{province:"浙江",city:"舟山",type:"笔",cost:"1.7"},{province:"浙江",city:"舟山",type:"纸张",cost:"0.12"},{province:"吉林",city:"长春",type:"笔",cost:"10"},{province:"吉林",city:"白山",type:"笔",cost:"9"},{province:"吉林",city:"长春",type:"纸张",cost:"3"},{province:"吉林",city:"白山",type:"纸张",cost:"1"}]},fF={style:{width:"100%",overflow:"hidden"}},hF={__name:"AntVS2",setup(t){yC(()=>{r()});function r(){const e=document.getElementById("sheet"),n={width:e.clientWidth,height:e.clientHeight},i=new sF(e,uF,n);i.render();const o=pC.debounce((a,l)=>{i.changeSheetSize(a,l),i.render(!1)},200);new window.ResizeObserver(([a]=[])=>{console.log(a);const[l]=a.borderBoxSize||[];o(l.inlineSize,l.blockSize)}).observe(e)}return(e,n)=>{const i=Xf("el-col"),o=Xf("el-row");return wC(),CC("div",fF,[pl(o,{gutter:20},{default:gl(()=>[pl(i,{span:12},{default:gl(()=>n[0]||(n[0]=[Vf("div",{id:"sheet",class:"tableHeight"},null,-1)])),_:1}),pl(i,{span:12},{default:gl(()=>n[1]||(n[1]=[Vf("div",{id:"container",class:"tableHeight"},null,-1)])),_:1})]),_:1})])}}},vF=gC(hF,[["__scopeId","data-v-11be4dd2"]]);export{vF as default};
