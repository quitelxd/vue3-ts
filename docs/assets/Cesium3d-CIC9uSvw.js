import{E as I,b as h,F as x,c as y,P as l,J as d,d as a,e as A,f as B,a as g,T as J,M as j,Q as H,I as q,g as z,V as R,h as G,S as N,i as F,j as W,k as U,l as w,m as Z,C as m,n as Q}from"./widgets-DqWABeen.js";import{_ as Y,l as $,x as K,c as X,o as tt}from"./index-D72yaUCH.js";window.CESIUM_BASE_URL="/vue3-ts/cesium/";const et=h.WHITE,ot=.25,it=1;function f(t){t=t??x.EMPTY_OBJECT,this._definitionChanged=new I,this._color=void 0,this._colorSubscription=void 0,this._glowPower=void 0,this._glowPowerSubscription=void 0,this._taperPower=void 0,this._taperPowerSubscription=void 0,this.color=t.color,this.glowPower=t.glowPower,this.taperPower=t.taperPower}Object.defineProperties(f.prototype,{isConstant:{get:function(){return l.isConstant(this._color)&&l.isConstant(this._glow)}},definitionChanged:{get:function(){return this._definitionChanged}},color:y("color"),glowPower:y("glowPower"),taperPower:y("taperPower")});f.prototype.getType=function(t){return"PolylineGlow"};const nt=new d;f.prototype.getValue=function(t,e){return a(t)||(t=d.now(nt)),a(e)||(e={}),e.color=l.getValueOrClonedDefault(this._color,t,et,e.color),e.glowPower=l.getValueOrDefault(this._glowPower,t,ot,e.glowPower),e.taperPower=l.getValueOrDefault(this._taperPower,t,it,e.taperPower),e};f.prototype.equals=function(t){return this===t||t instanceof f&&l.equals(this._color,t._color)&&l.equals(this._glowPower,t._glowPower)&&l.equals(this._taperPower,t._taperPower)};function P(t,e){this._velocityVectorProperty=new A(t,!0),this._subscription=void 0,this._ellipsoid=void 0,this._definitionChanged=new I,this.ellipsoid=e??B.default;const p=this;this._velocityVectorProperty.definitionChanged.addEventListener(function(){p._definitionChanged.raiseEvent(p)})}Object.defineProperties(P.prototype,{isConstant:{get:function(){return l.isConstant(this._velocityVectorProperty)}},definitionChanged:{get:function(){return this._definitionChanged}},position:{get:function(){return this._velocityVectorProperty.position},set:function(t){this._velocityVectorProperty.position=t}},ellipsoid:{get:function(){return this._ellipsoid},set:function(t){this._ellipsoid!==t&&(this._ellipsoid=t,this._definitionChanged.raiseEvent(this))}}});const C=new g,rt=new g,E=new j,st=new d;P.prototype.getValue=function(t,e){a(t)||(t=d.now(st));const p=this._velocityVectorProperty._getValue(t,rt,C);if(a(p))return J.rotationMatrixFromPositionVelocity(C,p,this._ellipsoid,E),H.fromRotationMatrix(E,e)};P.prototype.equals=function(t){return this===t||t instanceof P&&l.equals(this._velocityVectorProperty,t._velocityVectorProperty)&&(this._ellipsoid===t._ellipsoid||this._ellipsoid.equals(t._ellipsoid))};const ct={id:"cesiumContainer"},at={__name:"Cesium3d",setup(t){let e=null;async function p(){return await z({requestWaterMask:!0,requestVertexNormals:!0})}function T(o){return new R("cesiumContainer",{terrainProvider:o,animation:!0,baseLayerPicker:!1,fullscreenButton:!1,sceneModePicker:!1,timeline:!0,navigationHelpButton:!1})}function k(o=116.39,c=39.9,n=100,r=.01){const i=[];for(let s=0;s<=360;s+=90){const u=g.fromDegrees(o+Math.cos(s*Math.PI/180)*r,c+Math.sin(s*Math.PI/180)*r,n);i.push(u)}return i.push(i[0]),i}function V(o=360,c=10){const n=d.fromDate(new Date),r=d.addSeconds(n,o,new d);return e.clock.startTime=n.clone(),e.clock.stopTime=r.clone(),e.clock.currentTime=n.clone(),e.clock.clockRange=G.LOOP_STOP,e.clock.multiplier=c,{start:n,stop:r}}function S(o,c,n=90){const r=new N;return o.forEach((i,s)=>{const u=d.addSeconds(c,s*n,new d);r.addSample(u,i)}),r}function M(o){const c=h.WHITE;let n=null;o.screenSpaceEventHandler.setInputAction(r=>{const i=o.scene.pick(r.endPosition);n&&(n.model.color=c,n=null),a(i)&&a(i.id)&&(n=i.id,n.model.color=h.YELLOW.withAlpha(.8))},w.MOUSE_MOVE),o.screenSpaceEventHandler.setInputAction(r=>{const i=o.scene.pick(r.position);if(console.log(i),a(i)&&a(i.id)){const s=i.id;if(console.log(s.properties.id._value),s.name){const u=o.scene.pickPosition(r.position);if(a(u)){const _=Z.fromCartesian(u),b=m.toDegrees(_.longitude),v=m.toDegrees(_.latitude),L=_.height,D=`
                        <table class="cesium-infoBox-defaultTable">
                            <tr><th>名称</th><td>${s.name}</td></tr>
                            <tr><th>经度</th><td>${b.toFixed(6)}°</td></tr>
                            <tr><th>纬度</th><td>${v.toFixed(6)}°</td></tr>
                            <tr><th>高度</th><td>${L.toFixed(2)}米</td></tr>
                        </table>
                    `;s.description=D,o.selectedEntity=s}}}else o.selectedEntity=void 0},w.LEFT_CLICK),o.screenSpaceEventHandler.setInputAction(r=>{const i=o.scene.pick(r.position);a(i)&&a(i.id)&&(o.clock.shouldAnimate?o.clock.shouldAnimate=!1:o.clock.shouldAnimate=!0)},w.RIGHT_CLICK)}function O(o,c,n){return e.entities.add({name:"动画模型",availability:new W([new U({start:n.start,stop:n.stop})]),position:c,orientation:new P(c),properties:{id:"自定义id",type:"column"},model:{uri:o,minimumPixelSize:128,maximumScale:2e4,color:h.WHITE,colorBlendMode:F.HIGHLIGHT},path:{resolution:1,material:new f({glowPower:.1,color:h.YELLOW}),width:10}})}return $(async()=>{Q.defaultAccessToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJkMDc2Zjk4Mi0zNzE2LTQ1N2ItYmJiZi03MDBjNzE0OTRlN2UiLCJpZCI6MjI2NTIzLCJpYXQiOjE3NDQwODEyNzh9.ZB7sD_ip91ZAppy29yef0-8JFjpSPmtT3chRIZ44Gak";try{const o=await p();e=T(o);const c=await q.fromAssetId(2648381),n=k(),r=V(),i=S(n,r.start),s=O(c,i,r);M(e),e.zoomTo(s),e.scene.globe.enableLighting=!0,e.scene.globe.depthTestAgainstTerrain=!0}catch(o){console.error("Error initializing scene:",o)}}),K(()=>{e&&(e.destroy(),e=null)}),(o,c)=>(tt(),X("div",ct))}},pt=Y(at,[["__scopeId","data-v-c3269b23"]]);export{pt as default};
