{"version":3,"sources":["webpack:///./src/views/flow/AntVX6.vue?03cf","webpack:///./node_modules/@antv/x6-common/es/polyfill/index.js","webpack:///./node_modules/@antv/x6-common/es/common/disposable.js","webpack:///./node_modules/lodash-es/now.js","webpack:///./node_modules/lodash-es/_trimmedEndIndex.js","webpack:///./node_modules/lodash-es/_baseTrim.js","webpack:///./node_modules/lodash-es/isSymbol.js","webpack:///./node_modules/lodash-es/toNumber.js","webpack:///./node_modules/lodash-es/debounce.js","webpack:///./node_modules/lodash-es/throttle.js","webpack:///./node_modules/@antv/x6-common/es/function/function.js","webpack:///./node_modules/@antv/x6-common/es/function/async.js","webpack:///./node_modules/@antv/x6-common/es/event/util.js","webpack:///./node_modules/@antv/x6-common/es/event/events.js","webpack:///./node_modules/lodash-es/_baseHas.js","webpack:///./node_modules/lodash-es/_isKey.js","webpack:///./node_modules/lodash-es/memoize.js","webpack:///./node_modules/lodash-es/_memoizeCapped.js","webpack:///./node_modules/lodash-es/_stringToPath.js","webpack:///./node_modules/lodash-es/_arrayMap.js","webpack:///./node_modules/lodash-es/_baseToString.js","webpack:///./node_modules/lodash-es/toString.js","webpack:///./node_modules/lodash-es/_castPath.js","webpack:///./node_modules/lodash-es/_toKey.js","webpack:///./node_modules/lodash-es/_hasPath.js","webpack:///./node_modules/lodash-es/has.js","webpack:///./node_modules/lodash-es/_baseGet.js","webpack:///./node_modules/lodash-es/_defineProperty.js","webpack:///./node_modules/lodash-es/_baseAssignValue.js","webpack:///./node_modules/lodash-es/_assignValue.js","webpack:///./node_modules/lodash-es/_baseSet.js","webpack:///./node_modules/lodash-es/_basePickBy.js","webpack:///./node_modules/lodash-es/_baseHasIn.js","webpack:///./node_modules/lodash-es/hasIn.js","webpack:///./node_modules/lodash-es/_basePick.js","webpack:///./node_modules/lodash-es/_isFlattenable.js","webpack:///./node_modules/lodash-es/_baseFlatten.js","webpack:///./node_modules/lodash-es/flatten.js","webpack:///./node_modules/lodash-es/_apply.js","webpack:///./node_modules/lodash-es/_overRest.js","webpack:///./node_modules/lodash-es/constant.js","webpack:///./node_modules/lodash-es/_baseSetToString.js","webpack:///./node_modules/lodash-es/_shortOut.js","webpack:///./node_modules/lodash-es/_setToString.js","webpack:///./node_modules/lodash-es/_flatRest.js","webpack:///./node_modules/lodash-es/pick.js","webpack:///./node_modules/lodash-es/_assignMergeValue.js","webpack:///./node_modules/lodash-es/_cloneArrayBuffer.js","webpack:///./node_modules/lodash-es/_cloneTypedArray.js","webpack:///./node_modules/lodash-es/_copyArray.js","webpack:///./node_modules/lodash-es/_baseCreate.js","webpack:///./node_modules/lodash-es/_getPrototype.js","webpack:///./node_modules/lodash-es/_initCloneObject.js","webpack:///./node_modules/lodash-es/isArrayLikeObject.js","webpack:///./node_modules/lodash-es/isPlainObject.js","webpack:///./node_modules/lodash-es/_safeGet.js","webpack:///./node_modules/lodash-es/_copyObject.js","webpack:///./node_modules/lodash-es/_nativeKeysIn.js","webpack:///./node_modules/lodash-es/_baseKeysIn.js","webpack:///./node_modules/lodash-es/keysIn.js","webpack:///./node_modules/lodash-es/toPlainObject.js","webpack:///./node_modules/lodash-es/_baseMergeDeep.js","webpack:///./node_modules/lodash-es/_baseMerge.js","webpack:///./node_modules/lodash-es/_baseRest.js","webpack:///./node_modules/lodash-es/_isIterateeCall.js","webpack:///./node_modules/lodash-es/_createAssigner.js","webpack:///./node_modules/lodash-es/merge.js","webpack:///./node_modules/lodash-es/isEmpty.js","webpack:///./node_modules/lodash-es/_baseAssign.js","webpack:///./node_modules/lodash-es/_baseAssignIn.js","webpack:///./node_modules/lodash-es/_copySymbols.js","webpack:///./node_modules/lodash-es/_getSymbolsIn.js","webpack:///./node_modules/lodash-es/_copySymbolsIn.js","webpack:///./node_modules/lodash-es/_getAllKeysIn.js","webpack:///./node_modules/lodash-es/_initCloneArray.js","webpack:///./node_modules/lodash-es/_cloneDataView.js","webpack:///./node_modules/lodash-es/_cloneRegExp.js","webpack:///./node_modules/lodash-es/_cloneSymbol.js","webpack:///./node_modules/lodash-es/_initCloneByTag.js","webpack:///./node_modules/lodash-es/_baseIsMap.js","webpack:///./node_modules/lodash-es/isMap.js","webpack:///./node_modules/lodash-es/_baseIsSet.js","webpack:///./node_modules/lodash-es/isSet.js","webpack:///./node_modules/lodash-es/_baseClone.js","webpack:///./node_modules/lodash-es/clone.js","webpack:///./node_modules/lodash-es/cloneDeep.js","webpack:///./node_modules/lodash-es/defaults.js","webpack:///./node_modules/lodash-es/_customDefaultsMerge.js","webpack:///./node_modules/lodash-es/mergeWith.js","webpack:///./node_modules/lodash-es/defaultsDeep.js","webpack:///./node_modules/@antv/x6-common/es/object/mixins.js","webpack:///./node_modules/@antv/x6-common/es/object/inherit.js","webpack:///./node_modules/@antv/x6-common/es/object/object.js","webpack:///./node_modules/@antv/x6-common/es/common/basecoat.js","webpack:///./node_modules/lodash-es/_baseFindIndex.js","webpack:///./node_modules/lodash-es/_baseIsNaN.js","webpack:///./node_modules/lodash-es/_strictIndexOf.js","webpack:///./node_modules/lodash-es/_baseIndexOf.js","webpack:///./node_modules/lodash-es/_arrayIncludes.js","webpack:///./node_modules/lodash-es/_arrayIncludesWith.js","webpack:///./node_modules/lodash-es/noop.js","webpack:///./node_modules/lodash-es/_createSet.js","webpack:///./node_modules/lodash-es/_baseUniq.js","webpack:///./node_modules/lodash-es/uniq.js","webpack:///./node_modules/lodash-es/union.js","webpack:///./node_modules/lodash-es/_baseSortedIndexBy.js","webpack:///./node_modules/lodash-es/_baseSortedIndex.js","webpack:///./node_modules/lodash-es/sortedIndex.js","webpack:///./node_modules/lodash-es/_baseIsMatch.js","webpack:///./node_modules/lodash-es/_isStrictComparable.js","webpack:///./node_modules/lodash-es/_getMatchData.js","webpack:///./node_modules/lodash-es/_matchesStrictComparable.js","webpack:///./node_modules/lodash-es/_baseMatches.js","webpack:///./node_modules/lodash-es/get.js","webpack:///./node_modules/lodash-es/_baseMatchesProperty.js","webpack:///./node_modules/lodash-es/_baseProperty.js","webpack:///./node_modules/lodash-es/_basePropertyDeep.js","webpack:///./node_modules/lodash-es/property.js","webpack:///./node_modules/lodash-es/_baseIteratee.js","webpack:///./node_modules/lodash-es/sortedIndexBy.js","webpack:///./node_modules/lodash-es/_baseMap.js","webpack:///./node_modules/lodash-es/_baseSortBy.js","webpack:///./node_modules/lodash-es/_compareAscending.js","webpack:///./node_modules/lodash-es/_compareMultiple.js","webpack:///./node_modules/lodash-es/_baseOrderBy.js","webpack:///./node_modules/lodash-es/sortBy.js","webpack:///./node_modules/lodash-es/_arrayAggregator.js","webpack:///./node_modules/lodash-es/_baseAggregator.js","webpack:///./node_modules/lodash-es/_createAggregator.js","webpack:///./node_modules/lodash-es/groupBy.js","webpack:///./node_modules/lodash-es/_baseDifference.js","webpack:///./node_modules/lodash-es/difference.js","webpack:///./node_modules/lodash-es/_baseExtremum.js","webpack:///./node_modules/lodash-es/_baseGt.js","webpack:///./node_modules/lodash-es/max.js","webpack:///./node_modules/lodash-es/uniqueId.js","webpack:///./node_modules/lodash-es/_arrayReduce.js","webpack:///./node_modules/lodash-es/_basePropertyOf.js","webpack:///./node_modules/lodash-es/_deburrLetter.js","webpack:///./node_modules/lodash-es/deburr.js","webpack:///./node_modules/lodash-es/_asciiWords.js","webpack:///./node_modules/lodash-es/_hasUnicodeWord.js","webpack:///./node_modules/lodash-es/_unicodeWords.js","webpack:///./node_modules/lodash-es/words.js","webpack:///./node_modules/lodash-es/_createCompounder.js","webpack:///./node_modules/lodash-es/_baseSlice.js","webpack:///./node_modules/lodash-es/_castSlice.js","webpack:///./node_modules/lodash-es/_hasUnicode.js","webpack:///./node_modules/lodash-es/_asciiToArray.js","webpack:///./node_modules/lodash-es/_unicodeToArray.js","webpack:///./node_modules/lodash-es/_stringToArray.js","webpack:///./node_modules/lodash-es/_createCaseFirst.js","webpack:///./node_modules/lodash-es/upperFirst.js","webpack:///./node_modules/lodash-es/startCase.js","webpack:///./node_modules/lodash-es/capitalize.js","webpack:///./node_modules/lodash-es/camelCase.js","webpack:///./node_modules/lodash-es/upperCase.js","webpack:///./node_modules/lodash-es/lowerCase.js","webpack:///./node_modules/lodash-es/lowerFirst.js","webpack:///./node_modules/@antv/x6-common/es/string/format.js","webpack:///./node_modules/@antv/x6-common/es/string/hashcode.js","webpack:///./node_modules/@antv/x6-common/es/string/uuid.js","webpack:///./node_modules/@antv/x6-common/es/string/suggestion.js","webpack:///./node_modules/lodash-es/isNumber.js","webpack:///./node_modules/lodash-es/_baseClamp.js","webpack:///./node_modules/lodash-es/clamp.js","webpack:///./node_modules/@antv/x6-common/es/number/number.js","webpack:///./node_modules/@antv/x6-common/es/platform/index.js","webpack:///./node_modules/@antv/x6-common/es/dom/class.js","webpack:///./node_modules/@antv/x6-common/es/dom/elem.js","webpack:///./node_modules/@antv/x6-common/es/dom/attr.js","webpack:///./node_modules/@antv/x6-common/es/text/annotate.js","webpack:///./node_modules/@antv/x6-common/es/text/sanitize.js","webpack:///./node_modules/@antv/x6-common/es/datauri/index.js","webpack:///./node_modules/@antv/x6-common/es/unit/index.js","webpack:///./node_modules/@antv/x6-common/es/dom/prefix.js","webpack:///./node_modules/@antv/x6-common/es/dom/style.js","webpack:///./node_modules/@antv/x6-common/es/dom/selection.js","webpack:///./node_modules/@antv/x6-common/es/dom/css.js","webpack:///./node_modules/@antv/x6-common/es/dom/data.js","webpack:///./node_modules/@antv/x6-common/es/dom/prop.js","webpack:///./node_modules/@antv/x6-common/es/vector/index.js","webpack:///./node_modules/@antv/x6-common/es/dom/text.js","webpack:///./node_modules/@antv/x6-common/es/dom/path.js","webpack:///./node_modules/@antv/x6-common/es/dom/matrix.js","webpack:///./node_modules/@antv/x6-common/es/dom/transform.js","webpack:///./node_modules/@antv/x6-common/es/dom/event/hook.js","webpack:///./node_modules/@antv/x6-common/es/dom/event/store.js","webpack:///./node_modules/@antv/x6-common/es/dom/event/util.js","webpack:///./node_modules/@antv/x6-common/es/dom/event/special.js","webpack:///./node_modules/@antv/x6-common/es/dom/event/object.js","webpack:///./node_modules/@antv/x6-common/es/dom/event/core.js","webpack:///./node_modules/@antv/x6-common/es/dom/event/main.js","webpack:///./node_modules/@antv/x6-common/es/dom/mousewheel.js","webpack:///./node_modules/@antv/x6-common/es/dom/position.js","webpack:///./node_modules/@antv/x6-common/es/size-sensor/sensors/util.js","webpack:///./node_modules/@antv/x6-common/es/size-sensor/sensors/object.js","webpack:///./node_modules/@antv/x6-common/es/size-sensor/sensors/observer.js","webpack:///./node_modules/@antv/x6-common/es/size-sensor/sensors/index.js","webpack:///./node_modules/@antv/x6-common/es/size-sensor/index.js","webpack:///./node_modules/@antv/x6-common/es/algorithm/dijkstra.js","webpack:///./node_modules/@antv/x6-common/es/modifier/index.js","webpack:///./node_modules/@antv/x6-common/es/animation/timing.js","webpack:///./node_modules/@antv/x6-common/es/animation/interp.js","webpack:///./node_modules/@antv/x6-common/es/algorithm/priorityqueue.js","webpack:///./node_modules/@antv/x6-common/es/color/index.js","webpack:///./node_modules/@antv/x6-common/es/dictionary/dictionary.js","webpack:///./node_modules/@antv/x6-common/es/css-loader/loader.js","webpack:///./node_modules/@antv/x6-geometry/es/angle.js","webpack:///./node_modules/@antv/x6-geometry/es/util.js","webpack:///./node_modules/@antv/x6-geometry/es/geometry.js","webpack:///./node_modules/@antv/x6-geometry/es/point.js","webpack:///./node_modules/@antv/x6-geometry/es/rectangle.js","webpack:///./node_modules/@antv/x6-geometry/es/line.js","webpack:///./node_modules/@antv/x6-geometry/es/ellipse.js","webpack:///./node_modules/@antv/x6-geometry/es/path/util.js","webpack:///./node_modules/@antv/x6-geometry/es/polyline.js","webpack:///./node_modules/@antv/x6-geometry/es/curve.js","webpack:///./node_modules/@antv/x6-geometry/es/path/segment.js","webpack:///./node_modules/@antv/x6-geometry/es/path/lineto.js","webpack:///./node_modules/@antv/x6-geometry/es/path/close.js","webpack:///./node_modules/@antv/x6-geometry/es/path/moveto.js","webpack:///./node_modules/@antv/x6-geometry/es/path/curveto.js","webpack:///./node_modules/@antv/x6-geometry/es/path/normalize.js","webpack:///./node_modules/@antv/x6-geometry/es/path/path.js","webpack:///./node_modules/@antv/x6/es/registry/registry.js","webpack:///./node_modules/@antv/x6/es/registry/grid/dot.js","webpack:///./node_modules/@antv/x6/es/registry/grid/fixed-dot.js","webpack:///./node_modules/@antv/x6/es/registry/grid/mesh.js","webpack:///./node_modules/@antv/x6/es/registry/grid/double-mesh.js","webpack:///./node_modules/@antv/x6/es/registry/grid/index.js","webpack:///./node_modules/@antv/x6/es/registry/background/flip-x.js","webpack:///./node_modules/@antv/x6/es/registry/background/flip-y.js","webpack:///./node_modules/@antv/x6/es/registry/background/flip-xy.js","webpack:///./node_modules/@antv/x6/es/registry/background/watermark.js","webpack:///./node_modules/@antv/x6/es/registry/background/index.js","webpack:///./node_modules/@antv/x6/es/registry/filter/index.js","webpack:///./node_modules/@antv/x6/es/registry/filter/util.js","webpack:///./node_modules/@antv/x6/es/registry/filter/outline.js","webpack:///./node_modules/@antv/x6/es/registry/filter/highlight.js","webpack:///./node_modules/@antv/x6/es/registry/filter/blur.js","webpack:///./node_modules/@antv/x6/es/registry/filter/drop-shadow.js","webpack:///./node_modules/@antv/x6/es/registry/filter/gray-scale.js","webpack:///./node_modules/@antv/x6/es/registry/filter/sepia.js","webpack:///./node_modules/@antv/x6/es/registry/filter/saturate.js","webpack:///./node_modules/@antv/x6/es/registry/filter/hue-rotate.js","webpack:///./node_modules/@antv/x6/es/registry/filter/invert.js","webpack:///./node_modules/@antv/x6/es/registry/filter/brightness.js","webpack:///./node_modules/@antv/x6/es/registry/filter/contrast.js","webpack:///./node_modules/@antv/x6/es/registry/attr/raw.js","webpack:///./node_modules/@antv/x6/es/registry/attr/ref.js","webpack:///./node_modules/@antv/x6/es/registry/attr/fill.js","webpack:///./node_modules/@antv/x6/es/registry/attr/stroke.js","webpack:///./node_modules/@antv/x6/es/registry/attr/text.js","webpack:///./node_modules/@antv/x6/es/registry/attr/title.js","webpack:///./node_modules/@antv/x6/es/registry/attr/align.js","webpack:///./node_modules/@antv/x6/es/registry/attr/style.js","webpack:///./node_modules/@antv/x6/es/registry/attr/html.js","webpack:///./node_modules/@antv/x6/es/registry/attr/filter.js","webpack:///./node_modules/@antv/x6/es/registry/attr/port.js","webpack:///./node_modules/@antv/x6/es/registry/marker/util.js","webpack:///./node_modules/@antv/x6/es/registry/marker/classic.js","webpack:///./node_modules/@antv/x6/es/registry/marker/diamond.js","webpack:///./node_modules/@antv/x6/es/registry/marker/path.js","webpack:///./node_modules/@antv/x6/es/registry/marker/cross.js","webpack:///./node_modules/@antv/x6/es/registry/marker/async.js","webpack:///./node_modules/@antv/x6/es/registry/marker/circle.js","webpack:///./node_modules/@antv/x6/es/registry/marker/ellipse.js","webpack:///./node_modules/@antv/x6/es/registry/marker/index.js","webpack:///./node_modules/@antv/x6/es/registry/attr/marker.js","webpack:///./node_modules/@antv/x6/es/registry/attr/connection.js","webpack:///./node_modules/@antv/x6/es/registry/attr/index.js","webpack:///./node_modules/@antv/x6/es/config/index.js","webpack:///./node_modules/@antv/x6/es/registry/highlighter/class.js","webpack:///./node_modules/@antv/x6/es/registry/highlighter/opacity.js","webpack:///./node_modules/@antv/x6/es/util/index.js","webpack:///./node_modules/@antv/x6/es/registry/highlighter/stroke.js","webpack:///./node_modules/@antv/x6/es/registry/highlighter/index.js","webpack:///./node_modules/@antv/x6/es/registry/port-layout/util.js","webpack:///./node_modules/@antv/x6/es/registry/port-layout/absolute.js","webpack:///./node_modules/@antv/x6/es/registry/port-layout/ellipse.js","webpack:///./node_modules/@antv/x6/es/registry/port-layout/line.js","webpack:///./node_modules/@antv/x6/es/registry/port-layout/index.js","webpack:///./node_modules/@antv/x6/es/registry/port-label-layout/util.js","webpack:///./node_modules/@antv/x6/es/registry/port-label-layout/side.js","webpack:///./node_modules/@antv/x6/es/registry/port-label-layout/inout.js","webpack:///./node_modules/@antv/x6/es/registry/port-label-layout/radial.js","webpack:///./node_modules/@antv/x6/es/registry/port-label-layout/index.js","webpack:///./node_modules/@antv/x6/es/view/view.js","webpack:///./node_modules/@antv/x6/es/view/markup.js","webpack:///./node_modules/@antv/x6/es/view/cache.js","webpack:///./node_modules/@antv/x6/es/view/attr.js","webpack:///./node_modules/@antv/x6/es/view/flag.js","webpack:///./node_modules/@antv/x6/es/view/cell.js","webpack:///./node_modules/@antv/x6/es/view/tool.js","webpack:///./node_modules/@antv/x6/es/registry/connection-strategy/noop.js","webpack:///./node_modules/@antv/x6/es/registry/connection-strategy/pin.js","webpack:///./node_modules/@antv/x6/es/registry/connection-strategy/index.js","webpack:///./node_modules/@antv/x6/es/registry/tool/util.js","webpack:///./node_modules/@antv/x6/es/registry/tool/button.js","webpack:///./node_modules/@antv/x6/es/registry/tool/boundary.js","webpack:///./node_modules/@antv/x6/es/registry/tool/vertices.js","webpack:///./node_modules/@antv/x6/es/registry/tool/segments.js","webpack:///./node_modules/@antv/x6/es/registry/tool/anchor.js","webpack:///./node_modules/@antv/x6/es/registry/tool/arrowhead.js","webpack:///./node_modules/@antv/x6/es/registry/tool/editor.js","webpack:///./node_modules/@antv/x6/es/registry/tool/index.js","webpack:///./node_modules/@antv/x6/es/registry/node-anchor/bbox.js","webpack:///./node_modules/@antv/x6/es/registry/node-anchor/util.js","webpack:///./node_modules/@antv/x6/es/registry/node-anchor/orth.js","webpack:///./node_modules/@antv/x6/es/registry/node-anchor/node-center.js","webpack:///./node_modules/@antv/x6/es/registry/node-anchor/middle-side.js","webpack:///./node_modules/@antv/x6/es/registry/node-anchor/index.js","webpack:///./node_modules/@antv/x6/es/registry/edge-anchor/ratio.js","webpack:///./node_modules/@antv/x6/es/registry/edge-anchor/length.js","webpack:///./node_modules/@antv/x6/es/registry/edge-anchor/closest.js","webpack:///./node_modules/@antv/x6/es/registry/edge-anchor/orth.js","webpack:///./node_modules/@antv/x6/es/registry/edge-anchor/index.js","webpack:///./node_modules/@antv/x6/es/registry/connection-point/util.js","webpack:///./node_modules/@antv/x6/es/registry/connection-point/bbox.js","webpack:///./node_modules/@antv/x6/es/registry/connection-point/rect.js","webpack:///./node_modules/@antv/x6/es/registry/connection-point/boundary.js","webpack:///./node_modules/@antv/x6/es/registry/connection-point/anchor.js","webpack:///./node_modules/@antv/x6/es/registry/connection-point/index.js","webpack:///./node_modules/@antv/x6/es/registry/router/normal.js","webpack:///./node_modules/@antv/x6/es/registry/router/oneside.js","webpack:///./node_modules/@antv/x6/es/registry/router/util.js","webpack:///./node_modules/@antv/x6/es/registry/router/orth.js","webpack:///./node_modules/@antv/x6/es/registry/router/manhattan/options.js","webpack:///./node_modules/@antv/x6/es/registry/router/manhattan/sorted-set.js","webpack:///./node_modules/@antv/x6/es/registry/router/manhattan/obstacle-map.js","webpack:///./node_modules/@antv/x6/es/registry/router/manhattan/util.js","webpack:///./node_modules/@antv/x6/es/registry/router/manhattan/router.js","webpack:///./node_modules/@antv/x6/es/registry/router/manhattan/index.js","webpack:///./node_modules/@antv/x6/es/registry/router/metro.js","webpack:///./node_modules/@antv/x6/es/registry/router/er.js","webpack:///./node_modules/@antv/x6/es/registry/router/loop.js","webpack:///./node_modules/@antv/x6/es/registry/router/index.js","webpack:///./node_modules/@antv/x6/es/registry/connector/normal.js","webpack:///./node_modules/@antv/x6/es/registry/connector/loop.js","webpack:///./node_modules/@antv/x6/es/registry/connector/rounded.js","webpack:///./node_modules/@antv/x6/es/registry/connector/smooth.js","webpack:///./node_modules/@antv/x6/es/registry/connector/jumpover.js","webpack:///./node_modules/@antv/x6/es/registry/connector/index.js","webpack:///./node_modules/@antv/x6/es/model/store.js","webpack:///./node_modules/@antv/x6/es/model/animation.js","webpack:///./node_modules/@antv/x6/es/model/cell.js","webpack:///./node_modules/@antv/x6/es/model/registry.js","webpack:///./node_modules/@antv/x6/es/model/port.js","webpack:///./node_modules/@antv/x6/es/model/node.js","webpack:///./node_modules/@antv/x6/es/model/edge.js","webpack:///./node_modules/@antv/x6/es/model/collection.js","webpack:///./node_modules/@antv/x6/es/model/model.js","webpack:///./node_modules/@antv/x6/es/shape/base.js","webpack:///./node_modules/@antv/x6/es/shape/util.js","webpack:///./node_modules/@antv/x6/es/shape/rect.js","webpack:///./node_modules/@antv/x6/es/shape/edge.js","webpack:///./node_modules/@antv/x6/es/shape/ellipse.js","webpack:///./node_modules/@antv/x6/es/shape/poly.js","webpack:///./node_modules/@antv/x6/es/shape/polygon.js","webpack:///./node_modules/@antv/x6/es/shape/polyline.js","webpack:///./node_modules/@antv/x6/es/shape/path.js","webpack:///./node_modules/@antv/x6/es/shape/text-block.js","webpack:///./node_modules/@antv/x6/es/shape/image.js","webpack:///./node_modules/@antv/x6/es/shape/circle.js","webpack:///./node_modules/@antv/x6/es/view/node.js","webpack:///./node_modules/@antv/x6/es/view/edge.js","webpack:///./node_modules/@antv/x6/es/graph/view.js","webpack:///./node_modules/@antv/x6/es/style/raw.js","webpack:///./node_modules/@antv/x6/es/graph/base.js","webpack:///./node_modules/@antv/x6/es/graph/css.js","webpack:///./node_modules/@antv/x6/es/graph/options.js","webpack:///./node_modules/@antv/x6/es/graph/grid.js","webpack:///./node_modules/@antv/x6/es/graph/transform.js","webpack:///./node_modules/@antv/x6/es/graph/background.js","webpack:///./node_modules/@antv/x6/es/graph/panning.js","webpack:///./node_modules/@antv/x6/es/graph/mousewheel.js","webpack:///./node_modules/@antv/x6/es/graph/virtual-render.js","webpack:///./node_modules/@antv/x6/es/renderer/queueJob.js","webpack:///./node_modules/@antv/x6/es/renderer/scheduler.js","webpack:///./node_modules/@antv/x6/es/renderer/renderer.js","webpack:///./node_modules/@antv/x6/es/graph/defs.js","webpack:///./node_modules/@antv/x6/es/graph/coord.js","webpack:///./node_modules/@antv/x6/es/graph/highlight.js","webpack:///./node_modules/@antv/x6/es/graph/size.js","webpack:///./node_modules/@antv/x6/es/graph/graph.js","webpack:///./node_modules/@antv/x6/es/shape/html.js","webpack:///./node_modules/@antv/x6-plugin-dnd/es/style/raw.js","webpack:///./node_modules/@antv/x6-plugin-dnd/es/index.js","webpack:///./node_modules/@antv/x6-plugin-stencil/es/grid.js","webpack:///./node_modules/@antv/x6-plugin-stencil/es/style/raw.js","webpack:///./node_modules/@antv/x6-plugin-stencil/es/index.js","webpack:///./src/views/flow/hook/UseAntVFlow.js","webpack:///./node_modules/@antv/x6-plugin-export/es/api.js","webpack:///./node_modules/@antv/x6-plugin-export/es/index.js","webpack:///./src/views/flow/AntVX6.vue","webpack:///./src/views/flow/AntVX6.vue?0044","webpack:///./node_modules/core-js/modules/es.iterator.map.js","webpack:///./node_modules/core-js/internals/iterator-map.js","webpack:///./node_modules/lodash-es/_cloneBuffer.js"],"names":["window","NodeList","prototype","forEach","Array","arr","item","Object","hasOwnProperty","call","defineProperty","configurable","enumerable","writable","args","docFrag","document","createDocumentFragment","arg","isNode","Node","appendChild","createTextNode","String","this","Element","Document","DocumentFragment","Disposable","_disposed","dispose","target","methodName","descriptor","raw","value","proto","__proto__","disposed","DisposableSet","isDisposed","items","Set","clear","has","add","delete","from","set","now","Date","reWhitespace","trimmedEndIndex","string","index","length","test","charAt","reTrimStart","baseTrim","slice","replace","symbolTag","isSymbol","isObjectLike","NAN","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","parseInt","toNumber","isObject","other","valueOf","isBinary","FUNC_ERROR_TEXT","nativeMax","Math","max","nativeMin","min","debounce","func","wait","options","lastArgs","lastThis","maxWait","result","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","TypeError","invokeFunc","time","thisArg","undefined","apply","leadingEdge","setTimeout","timerExpired","remainingWait","timeSinceLastCall","timeSinceLastInvoke","timeWaiting","shouldInvoke","trailingEdge","cancel","clearTimeout","flush","debounced","isInvoking","arguments","throttle","fn","ctx","isAsyncLike","obj","then","isAsync","Promise","toAsyncBoolean","inputs","results","isArray","push","hasAsync","some","res","deferres","map","resolve","all","reduce","memo","every","toDeferredBoolean","ret","list","i","handler","context","params","listeners","name","cache","cb","off","on","names","keys","n","splice","returned","trigger","objectProto","baseHas","object","key","reIsDeepProp","reIsPlainProp","isKey","type","memoize","resolver","memoized","get","Cache","MAX_MEMOIZE_SIZE","memoizeCapped","size","rePropName","reEscapeChar","stringToPath","charCodeAt","match","number","quote","subString","arrayMap","array","iteratee","INFINITY","symbolProto","symbolToString","toString","baseToString","castPath","toKey","hasPath","path","hasFunc","isLength","isArguments","baseGet","e","baseAssignValue","assignValue","objValue","eq","baseSet","customizer","lastIndex","nested","newValue","basePickBy","paths","predicate","baseHasIn","hasIn","basePick","spreadableSymbol","isConcatSpreadable","isFlattenable","baseFlatten","depth","isStrict","flatten","overRest","start","transform","otherArgs","constant","baseSetToString","identity","HOT_COUNT","HOT_SPAN","nativeNow","shortOut","count","lastCalled","stamp","remaining","setToString","flatRest","pick","assignMergeValue","cloneArrayBuffer","arrayBuffer","constructor","byteLength","cloneTypedArray","typedArray","isDeep","buffer","byteOffset","copyArray","source","objectCreate","create","baseCreate","getPrototype","getPrototypeOf","initCloneObject","isArrayLikeObject","isArrayLike","objectTag","funcProto","Function","funcToString","objectCtorString","isPlainObject","Ctor","safeGet","copyObject","props","isNew","nativeKeysIn","baseKeysIn","isProto","keysIn","toPlainObject","baseMergeDeep","srcIndex","mergeFunc","stack","srcValue","stacked","isCommon","isArr","isBuff","isBuffer","isTyped","isTypedArray","isFunction","baseMerge","baseRest","isIterateeCall","createAssigner","assigner","sources","guard","mapTag","setTag","isEmpty","tag","baseAssign","baseAssignIn","copySymbols","nativeGetSymbols","getOwnPropertySymbols","getSymbolsIn","stubArray","copySymbolsIn","getAllKeysIn","initCloneArray","input","cloneDataView","dataView","reFlags","cloneRegExp","regexp","exec","symbolValueOf","cloneSymbol","symbol","boolTag","dateTag","numberTag","regexpTag","stringTag","arrayBufferTag","dataViewTag","float32Tag","float64Tag","int8Tag","int16Tag","int32Tag","uint8Tag","uint8ClampedTag","uint16Tag","uint32Tag","initCloneByTag","baseIsMap","nodeIsMap","isMap","baseIsSet","nodeIsSet","isSet","CLONE_DEEP_FLAG","CLONE_FLAT_FLAG","CLONE_SYMBOLS_FLAG","argsTag","arrayTag","errorTag","funcTag","genTag","weakMapTag","cloneableTags","baseClone","bitmask","isFlat","isFull","isFunc","subValue","keysFunc","cloneDeep","propsIndex","propsLength","customDefaultsMerge","mergeWith","defaultsDeep","applyMixins","derivedCtor","baseCtors","baseCtor","getOwnPropertyNames","getOwnPropertyDescriptor","extendStatics","setPrototypeOf","d","b","p","cls","base","tmp","A","isNativeClass","createClass","className","ensure","defaultValue","getValue","getNumber","Number","isNaN","isFinite","getBoolean","isMaliciousProp","prop","getByPath","delimiter","split","shift","setByPath","lastKey","pop","diver","unsetByPath","propertyToRemove","parent","delim","stop","val","deep","flatObject","flatKey","__decorate","decorators","desc","c","r","Reflect","decorate","Basecoat","baseFindIndex","fromIndex","fromRight","baseIsNaN","strictIndexOf","baseIndexOf","arrayIncludes","arrayIncludesWith","comparator","noop","createSet","values","LARGE_ARRAY_SIZE","baseUniq","includes","seen","outer","computed","seenIndex","uniq","union","arrays","MAX_ARRAY_LENGTH","MAX_ARRAY_INDEX","nativeFloor","floor","baseSortedIndexBy","retHighest","low","high","valIsNaN","valIsNull","valIsSymbol","valIsUndefined","mid","othIsDefined","othIsNull","othIsReflexive","othIsSymbol","setLow","HALF_MAX_ARRAY_LENGTH","baseSortedIndex","sortedIndex","COMPARE_PARTIAL_FLAG","COMPARE_UNORDERED_FLAG","baseIsMatch","matchData","noCustomizer","data","isStrictComparable","getMatchData","matchesStrictComparable","baseMatches","baseMatchesProperty","baseProperty","basePropertyDeep","baseIteratee","sortedIndexBy","baseMap","collection","baseSortBy","comparer","sort","compareAscending","valIsDefined","valIsReflexive","compareMultiple","orders","objCriteria","criteria","othCriteria","ordersLength","order","baseOrderBy","iteratees","sortBy","arrayAggregator","setter","accumulator","baseAggregator","createAggregator","initializer","groupBy","baseDifference","valuesLength","valuesIndex","difference","baseExtremum","current","baseGt","idCounter","uniqueId","prefix","id","arrayReduce","initAccum","basePropertyOf","deburredLetters","deburrLetter","reLatin","rsComboMarksRange","reComboHalfMarksRange","rsComboSymbolsRange","rsComboRange","rsCombo","reComboMark","RegExp","deburr","reAsciiWord","asciiWords","reHasUnicodeWord","hasUnicodeWord","rsAstralRange","rsDingbatRange","rsLowerRange","rsMathOpRange","rsNonCharRange","rsPunctuationRange","rsSpaceRange","rsUpperRange","rsVarRange","rsBreakRange","rsApos","rsBreak","rsDigits","rsDingbat","rsLower","rsMisc","rsFitz","rsModifier","rsNonAstral","rsRegional","rsSurrPair","rsUpper","rsZWJ","rsMiscLower","rsMiscUpper","rsOptContrLower","rsOptContrUpper","reOptMod","rsOptVar","rsOptJoin","join","rsOrdLower","rsOrdUpper","rsSeq","rsEmoji","reUnicodeWord","unicodeWords","words","pattern","reApos","createCompounder","callback","baseSlice","end","castSlice","reHasUnicode","hasUnicode","asciiToArray","rsAstral","rsSymbol","reUnicode","unicodeToArray","stringToArray","createCaseFirst","strSymbols","chr","upperFirst","startCase","word","capitalize","toLowerCase","camelCase","upperCase","toUpperCase","lowerCase","lowerFirst","cacheStringFunction","str","hit","kebabCase","s","pascalCase","constantCase","dotCase","pathCase","sentenceCase","titleCase","hashcode","hash","isUnicoded","ii","characterCode","unescape","encodeURIComponent","uuid","template","len","random","v","getSpellingSuggestion","candidates","getName","maximumLengthDifference","bestCandidate","bestDistance","justCheckExactMatches","nameLowerCase","candidate","candidateName","abs","candidateNameLowerCase","distance","levenshteinWithMax","s1","s2","previous","big","c1","minJ","maxJ","colMin","j","dist","temp","isNumber","baseClamp","lower","upper","clamp","mod","m","normalizePercentage","num","ref","parseFloat","parseCssNumeric","units","getUnit","matches","unit","normalizeSides","box","left","top","right","bottom","vertical","horizontal","_IS_MAC","_IS_IOS","_IS_WINDOWS","_IS_IE","_IS_IE11","_IS_EDGE","_IS_NETSCAPE","_IS_CHROME_APP","_IS_CHROME","_IS_OPERA","_IS_FIREFOX","_IS_SAFARI","_SUPPORT_TOUCH","_SUPPORT_POINTER","_SUPPORT_PASSIVE","_NO_FOREIGNOBJECT","navigator","ua","userAgent","indexOf","createElementNS","chrome","app","runtime","PointerEvent","documentElement","div","createElement","addEventListener","err","Platform","IS_MAC","IS_IOS","IS_WINDOWS","IS_IE","IS_IE11","IS_EDGE","IS_NETSCAPE","IS_CHROME_APP","IS_CHROME","IS_OPERA","IS_FIREFOX","IS_SAFARI","SUPPORT_TOUCH","SUPPORT_POINTER","SUPPORT_PASSIVE","NO_FOREIGNOBJECT","SUPPORT_FOREIGNOBJECT","getHMRStatus","module","hot","status","isApplyingHMR","TAGNAMES","select","change","submit","reset","error","load","abort","isEventSupported","event","elem","eventName","isSupported","setAttribute","rclass","rnotwhite","fillSpaces","getClass","getAttribute","hasClass","selector","classNames","nodeType","addClass","classes","oldValue","trim","removeClass","toggleClass","stateVal","metches","ensureId","isSVGGraphicsElement","getScreenCTM","SVGElement","svg","xmlns","xml","xlink","xhtml","svgVersion","tagName","doc","namespaceURI","createSvgElement","createSvgDocument","content","parseXML","async","setAttributeNS","parser","DOMParser","instance","parseFromString","mimeType","getElementsByTagName","Error","node","lowercase","nodeName","previousSibling","querySelectorAll","findOne","querySelector","findParentByClass","terminator","ownerSVGElement","parentNode","contains","child","bup","compareDocumentPosition","elems","removeChild","empty","firstChild","append","prepend","before","insertBefore","after","nextSibling","appendTo","isElement","x","isHTMLElement","HTMLElement","style","ownerDocument","matched","CASE_SENSITIVE_ATTR","removeAttribute","qualified","qualifyAttr","ns","hasAttributeNS","local","removeAttributeNS","hasAttribute","setAttributes","attrs","attributes","combinedKey","kebablizeAttrs","styleToObject","styleString","styles","section","pair","mergeAttrs","attr","to","so","tt","ss","annotate","t","annotations","opt","offset","compacted","curr","prev","batch","jj","annotation","includeAnnotationIndices","JSON","stringify","findAnnotationsAtIndex","filter","a","findAnnotationsBetweenIndexes","shiftAnnotations","text","DataUri","millimeterSize","isDataUrl","url","substr","imageToDataUri","onError","onLoad","FileReader","xhr","reader","onload","evt","dataUri","onerror","readAsDataURL","response","u8a","CHUNK_SZ","fromCharCode","subarray","suffix","meta","bytes","Uint8Array","base64","btoa","XMLHttpRequest","responseType","open","send","dataUriToBlob","dataUrl","uri","decodeURIComponent","dataType","mime","decodedString","atob","ia","Blob","downloadBlob","blob","fileName","msSaveBlob","URL","createObjectURL","link","href","download","body","click","revokeObjectURL","downloadDataUri","parseViewBox","svgToDataUrl","viewBox","getNumberFromViewBox","getNumberFromMatches","reg","w","width","h","height","decoded","header","supportedUnits","Unit","measure","cssWidth","cssHeight","display","position","rect","getBoundingClientRect","toPx","convert","hyphenPattern","camelize","_","char","prefixes","testStyle","getWithPrefix","prefixedName","getVendorPrefixedName","property","capitalizedName","setPrefixedStyle","vendor","defaultView","opener","getComputedStyle","getPropertyValue","hasScrollbars","container","overflow","clearSelection","selection","getSelection","removeAllRanges","numericProps","animationIterationCount","columnCount","flexGrow","flexShrink","fontWeight","gridArea","gridColumn","gridColumnEnd","gridColumnStart","gridRow","gridRowEnd","gridRowStart","lineHeight","opacity","orphans","widows","zIndex","isCSSVariable","computeStyle","isVariable","computeStyleInt","getSuffixedValue","css","setProperty","dataset","WeakMap","getData","setData","datas","propMap","class","contenteditable","for","readonly","maxlength","tabindex","colspan","rowspan","usemap","Symbol","toStringTag","children","isVector","importNode","matrix","tx","ty","angle","cx","cy","sx","sy","toNode","SVGSVGElement","defsNode","cloneNode","toNodes","replaceChild","lastChild","childNodes","vels","nodes","found","matcher","matchesSelector","msMatchesSelector","mozMatchesSelector","webkitMatchesSelector","oMatchesSelector","vel","currentChild","l","eachChild","y","interval","SVGPathElement","createTextPathNode","textPath","defs","annotateTextLine","lineNode","lineAnnotations","eol","baseSize","tspanNode","maxFontSize","fontMetrics","lastJ","fontSize","annotationAttrs","vTSpan","textContent","annotationClass","Vector","vector","sample","toPath","createVectors","markup","svgDoc","childNode","emRegex","emToPx","em","numerical","calculateDY","alignment","linesMetrics","baseSizePx","lineMetrics","flMaxFont","rLineHeights","lineHeightPx","iLineHeight","llMaxFont","dy","sanitize","verticalAnchor","textVerticalAnchor","namedVerticalAnchor","iai","defaultLineHeight","autoLineHeight","needEmpty","displayEmpty","strFontSize","containerNode","annotatedY","lines","lastI","lineClassName","line","lineNodeStyle","fillOpacity","strokeOpacity","baseVal","rh","firstLine","measureText","canvasContext","getContext","font","splitTextByLength","splitWidth","totalWidth","caches","round","frontText","frontWidth","behindText","behindWidth","breakText","ceil","maxLines","splitText","part","assign","MAX_SAFE_INTEGER","textWidth","remainText","remainWidth","ellipsis","ellipsisWidth","isLast","front","behind","KAPPA","getNumbericAttribute","NaN","getTotalLength","samples","getPointAtLength","lineToPathData","polygonToPathData","polygon","points","getPointsFromSvgElement","svgPointsToPath","polylineToPathData","polyline","nodePoints","numberOfItems","getItem","circleToPathData","circle","cd","ellipseToPathData","ellipse","rx","ry","cdx","cdy","rectangleToPathData","rectToPathData","topRx","bottomRx","topRy","bottomRy","toPathData","createSlicePathData","innerRadius","outerRadius","startAngle","endAngle","svgArcMax","PI","r0","r1","a0","a1","da","df","c0","cos","s0","sin","transformRegex","transformSeparatorRegex","transformationListRegex","createSVGPoint","svgDocument","createSVGMatrix","mat","createSVGTransform","DOMMatrix","createSVGTransformFromMatrix","transformStringToMatrix","transformationString","transformationMatch","ctm","scaleNonUniform","translate","rotate","skewX","skewY","f","multiply","matrixToTransformString","parseTransformString","translation","rotation","scale","separator","decomposedMatrix","decomposeMatrix","translateX","translateY","scaleX","scaleY","transformations","translateMatch","rotateMatch","scaleMatch","deltaTransformPoint","point","dx","px","py","atan2","sqrt","matrixToScale","matrixToRotation","deg","matrixToTranslation","absolute","transformList","svgTransform","appendItem","transformAttr","newTx","newTy","newTranslate","newAngle","newOrigin","newRotate","newScale","getTransformToElement","targetCTM","nodeCTM","inverse","getTransformToParentElement","matrixList","nodeMatrix","reverse","toLocalPoint","globalPoint","matrixTransform","globalToLocalMatrix","EventHook","register","hook","unregister","Store","events","remove","Util","stopPropagationCallback","stopPropagation","removeEventListener","returnTrue","returnFalse","rNotHTMLWhite","rNamespace","splitType","types","normalizeType","parts","originType","namespaces","isValidTarget","isValidSelector","seed","ensureHandlerId","getHandlerId","removeHandlerId","setHandlerId","getHandlerQueue","queue","store","bag","handlers","delegateCount","button","disabled","matchedHandlers","matchedSelectors","handleObj","isWindow","adown","isDefaultPrevented","isPropagationStopped","isImmediatePropagationStopped","isSimulated","preventDefault","originalEvent","stopImmediatePropagation","defaultPrevented","currentTarget","relatedTarget","timeStamp","EventObject","addProperty","commonProps","bubbles","cancelable","eventPhase","detail","view","buttons","clientX","clientY","offsetX","offsetY","pageX","pageY","screenX","screenY","toElement","pointerId","pointerType","code","charCode","keyCode","touches","changedTouches","targetTouches","which","altKey","ctrlKey","metaKey","shiftKey","Special","noBubble","returnValue","delegateType","bindType","related","__rest","propertyIsEnumerable","Core","triggered","handlerData","others","mainHandler","dispatch","guid","namespace","setup","mappedTypes","rns","originHandlerCount","teardown","delegateTarget","preDispatch","handlerQueue","k","rnamespace","hookHandle","handle","postDispatch","eventArgs","onlyHandlers","eventObj","ontype","bubbleType","eventPath","last","win","parentWindow","lastElement","currElement","Event","once","Private","originHandler","onWheelCallback","onWheelGuard","animationFrameId","deltaX","deltaY","onWheel","bind","didWheel","passive","changed","requestAnimationFrame","pageYOffset","pageXOffset","isFixed","offsetValue","offsetParent","parentOffset","delay","timer","createSensor","element","sensor","contentDocument","pointerEvents","listener","destroy","unbind","idx","ResizeObserver","observe","disconnect","ModifierKey","Timing","Interp","SizeSensor","PriorityQueue","defaultComparator","heapify","priority","bubbleUp","oldPriority","comp","bubbleDown","peek","minIndex","Dijkstra","run","adjacencyList","weight","u","scanned","Infinity","insert","neighbours","alt","updatePriority","color","g","fromString","amount","rgba","lighten","toArray","arg0","arg1","arg2","arg3","hex","rgba2hsla","ignoreAlpha","rgb","makeGrey","toCSS","Color","fromArray","fromHex","hex2rgb","fromRGBA","hue2rgb","m1","m2","h6","fromHSLA","hsla2rgba","startsWith","preset","named","toFixed","randomHex","letters","randomRGBA","invert","bw","pound","rgb2hex","bits","mask","bgr","pad","amt","lum","darken","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","burntsienna","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","Dictionary","iterator","parse","modifiers","or","and","equals","modifiers1","modifiers2","or1","or2","and1","and2","equal","a2","isMatch","strict","linear","quad","cubic","inout","t2","t3","exponential","pow","bounce","q","easeInSine","easeOutSine","easeInOutSine","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","t1","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInExpo","easeOutExpo","easeInOutExpo","scaledTime","scaledTime1","easeInCirc","easeOutCirc","easeInOutCirc","easeInBack","magnitude","easeOutBack","easeInOutBack","scaledTime2","easeInElastic","asin","easeOutElastic","easeInOutElastic","easeOutBounce","easeInBounce","easeInOutBounce","ma","mb","pb","aa","bb","precision","ca","ra","rd","ga","gd","ba","bd","cssModules","cssModule","find","loadTimes","styleElement","head","clean","findIndex","Angle","GeometryUtil","toDeg","rad","normalize","toRad","over360","isInteger","mmin","mmax","snapToGrid","gridSize","containsPoint","squaredLength","p1","p2","Geometry","toJSON","super","degree","center","origin","squaredDistance","theta","zero","angleBetween","update","toPolar","clone","lat1","lat2","lon1","lon2","dLon","brng","bearings","move","gx","gy","Point","isPoint","isPointLike","isPointData","fromPolar","org","o","equalPoints","x1","x2","y1","y2","rotateEx","topLeft","topRight","bottomRight","bottomLeft","topCenter","bottomCenter","corner","rightMiddle","leftMiddle","topLine","rightLine","bottomLine","leftLine","st","ct","minX","minY","maxX","maxY","pos","getCenter","getOrigin","getTopRight","p3","getBottomRight","p4","getBottomLeft","limit","ox","oy","sx1","sx2","sx3","sx4","sy1","sy2","sy3","sy4","getMaxScaleToFit","w1","h1","w2","h2","rectLines","dedupeArr","intersectsWithLine","sides","connector","intersection","isIntersectWithRect","myOrigin","myCorner","rOrigin","rCorner","xx","yy","newx","newy","newwidth","newheight","originX","originY","cornerX","cornerY","distLeft","distRight","distTop","distBottom","closest","side","getNearestSideToPoint","adhereToRect","Rectangle","isRectangle","isRectangleLike","fromEllipse","fromSize","fromPositionAndSize","total","isDifferentiable","eRef","sRef","bearing","pointAt","closestPointNormalizedLength","tangentAt","product","dot","normalized","ratio","lerp","fromStart","rate","dividerPoint","pointAtLength","cross","shape","pt1Dir","pt2Dir","det","deltaPt","alpha","beta","determinant","closestPoint","tangentStart","tangentLine","dx1","dy1","dx2","dy2","ccw","serialize","Line","isLine","normalizedDistance","intersections","dir","diff","mDir","mDiff","root","ta","tb","bbox","getNearestPointToPoint","mSquared","aSquared","bSquared","x0","y0","refPointDelta","q1","q3","fromRect","Ellipse","isEllipse","regexSupportedData","draw","initialMove","close","exclude","rounded","arcSize","p0","wp","pt","nx1","ny1","next","nx2","ny2","drawPoints","pts","arcToCurves","r2","largeArcFlag","sweepFlag","cty","cpsi","spsi","rxd","ryd","rxdd","rydd","r1x","r2y","lamda","sds","seif","txd","tyd","dr","sse","seg","segr","cpsir1","cpsir2","spsir1","spsir2","mc","ms","x3","y3","drawArc","startX","startY","xAxisRotation","stopX","stopY","cpLength","closestPointLength","minSqrDistance","lineLength","cpNormalizedLength","cp","sqrDistance","tangentAtLength","startIndex","intersectionCount","endIndex","segment","xDifference","rayEnd","ray","int","lastPoint","lastValidLine","threshold","currentIndex","firstIndex","middleIndex","firstPoint","middlePoint","chord","closestPointDistance","startPoint","sortedRecords","record1","record2","unshift","insidePoints","hullRecords","getKey","record","currentRecord","currentPoint","correctTurnFound","lastHullRecord","lastHullPoint","secondLastHullRecord","secondLastHullPoint","crossProduct","THRESHOLD","lowestHullIndex","indexOfLowestHullIndexRecord","currentHullIndex","hullPointRecordsReordered","newFirstChunk","newSecondChunk","concat","hullPoints","Polyline","isPolyline","svgString","coords","controlPoint1","controlPoint2","PRECISION","tvalues","bounds","b2ac","sqrtb2ac","mt","jlen","X","Y","pointAtT","closestPointT","opts","getOptions","lengthAtT","getPrecision","subdivisions","getDivisions","precisionRatio","investigatedSubdivision","investigatedSubdivisionStartT","investigatedSubdivisionEndT","distFromStart","distFromEnd","chordLength","minSumDist","piece","division","startDist","endDist","sumDist","endpointDistance","startPrecisionRatio","endPrecisionRatio","hasRequiredPrecision","hasMiniStartDistance","hasMiniEndDistance","hasMiniDistance","divided","divide","startDist1","endDist1","sumDist1","startDist2","endDist2","sumDist2","tangentAtT","toPolyline","divideAtT","tAt","tAtLength","dividerPoints","getSkeletonPoints","startControl1","startControlPoint1","startControl2","startControlPoint2","divider","dividerControl1","dividerControlPoint1","dividerControl2","dividerControlPoint2","control1","control2","midpoint1","midpoint2","midpoint3","subControl1","subControl2","divideLine","previousLength","iteration","divisions","subCurve","skeletonPoints","getSubdivisions","baselinePointDistFromStart","baselinePointDistFromEnd","newBaselinePointDistFromStart","newBaselinePointDistFromEnd","baseline1Length","baseline2Length","toPoints","Curve","isCurve","getFirstControlPoints","rhs","getCurveControlPoints","knots","firstControlPoints","secondControlPoints","throughPoints","controlPoints","curves","isVisible","isSegment","isSubpathStart","endPoint","previousSegment","divideAt","closestPointTangent","divideAtLength","LineTo","segments","subpathStartSegment","Close","MoveTo","arg4","arg5","curve","c2","q2c","ax","ay","v13","v23","a2c","recursive","v120","xy","f1","f2","rx2","ry2","f2old","x2old","y2old","hx","hy","m3","m4","newres","pathData","spaces","segmentReg","commandParamReg","paramsCount","z","segmetns","cmd","command","pathString","pathArray","mx","my","bx","by","qx","qy","processPath","pcom","nx","ny","T","Q","fixArc","pp","pi","commands","prevCommand","seglen","normalizePathData","CurveTo","previousObj","appendSegment","createSegment","endX","endY","curveTo","sub","segmentBBox","lastSegment","currentSegment","nextSegment","prepareSegment","fixIndex","removedSegment","updateSubpathStartSegment","replacedSegment","updateSubpathStart","segmentIndexAt","getSegment","segmentIndexAtLength","segmentSubdivisions","lastVisibleIndex","minSquaredDistance","segmentClosestPointT","segmentClosestPoint","segmentIndex","polylines","toPolylines","numIntersections","pathLength","lastVisibleSegment","numSegments","tValue","dividedSegmentIndex","lastValidSegment","lastValidSegmentIndex","pathCopy","replaceSegment","divisionStartIndex","divisionMidIndex","divisionEndIndex","removeSegment","movetoEnd","insertSegment","secondPathSegmentIndexConversion","originalSegment","convertedSegment","firstPath","secondPath","intersect","isValid","getSegmentSubdivisions","partialPoints","otherSegments","Path","isPath","commandRe","argRe","force","entries","exist","onDuplicated","process","entity","onConflict","suggestion","getSpellingSuggestionForName","prefixed","Registry","thickness","fill","fixedDot","mesh","stroke","doubleMesh","factor","patterns","Grid","presets","registry","flipX","img","canvas","drawImage","flipY","flipXY","setTransform","watermark","radians","stepX","stepY","getString","outline","margin","highlight","blur","stdDeviation","dropShadow","grayScale","sepia","saturate","hueRotate","amount2","brightness","contrast","Background","Filter","xlinkHref","xlinkShow","xlinkRole","xlinkType","xlinkArcrole","xlinkTitle","xlinkActuate","xmlSpace","xmlBase","xmlLang","preserveAspectRatio","requiredExtension","requiredFeatures","systemLanguage","externalResourcesRequired","positionWrapper","refDx","refDy","refWidth","setWrapper","refHeight","refRx","refRy","refRInscribed","attrName","widthFn","heightFn","refBBox","refRCircumscribed","percentage","isPercentage","diagonalLength","rValue","refCx","refCy","refDResetOffset","dWrapper","resetOffset","refDKeepOffset","refPointsResetOffset","pointsWrapper","refPointsKeepOffset","refR","refD","refPoints","refX2","refY2","refWidth2","refHeight2","axis","dimension","delta","refOrigin","attrValue","shapeWrapper","shapeConstructor","cacheName","cachedShape","shapeBBox","shapeOrigin","fitScale","pathConstructor","qualify","graph","defineGradient","cell","isEdge","edgeView","sourcePoint","targetPoint","gradientUnits","textWrap","json","textHash","pathNode","info","wrappedText","txt","fontFamily","isTextInUse","title","titleElem","titleNode","xAlign","offsetWrapper","yAlign","html","innerHTML","defineFilter","port","offset1","offset2","block","_a","createClassicMarker","classic","full","localAttrs","moveTo","lineTo","diamond","flip","opened","fliped","radius","circlePlus","radiusX","radiusy","Marker","sourceMarker","marker","createMarker","targetMarker","vertexMarker","manual","def","onNotFound","normalizeAttr","defineMarker","strokeWidth","refX","isEdgeView","connection","_b","_c","_d","stubs","getConnectionLength","getConnection","sourceParts","targetParts","getConnectionPathData","atConnectionLengthKeepGradient","atConnectionWrapper","atConnectionLengthIgnoreGradient","atConnectionRatioKeepGradient","atConnectionRatioIgnoreGradient","atConnectionLength","atConnectionRatio","method","zeroVector","tangent","vectorAngle","Attr","isValidDefinition","Config","prefixCls","autoInsertCSS","useCSSSelector","defaultClassName","cellView","magnet","magnetEl","transformPoint","transformLine","transformPolyline","transformRectangle","corner1","corner2","corner3","corner4","withoutTransformations","getBBox","clientLeft","clientTop","clientWidth","clientHeight","outputBBox","getBoundingOffsetRect","childBBox","offsetLeft","offsetTop","offsetWidth","offsetHeight","toGeometryShape","translateAndAutoOrient","reference","translateToOrigin","setTranslate","rotateAroundOrigin","setRotate","translateFromOrigin","finalPosition","setMatrix","findShapeNode","nextElementSibling","firstElementChild","getBBoxV2","normalizeMarker","defaultOptions","padding","getHighlighterId","hasCache","magnetVel","magnetBBox","isEdgeElement","highlightMatrix","paddingMatrix","removeHandler","removeHighlighter","model","setCache","normalizePoint","toResult","rawArgs","Highlighter","check","highlighter","unhighlight","portsPositionArgs","elemBBox","groupPositionArgs","stepAngle","step","ellipseLayout","ellipseSpread","stepFn","getTopCenter","compensateRotate","tangentTheta","getCorner","lineLayout","getTopLeft","PortLayout","portPosition","outside","outsideLayout","outsideOriented","inside","insideLayout","insideOriented","autoOrient","bboxAngles","getBBoxAngles","textAnchor","orientAngle","tl","bl","br","tr","radial","radialLayout","radialOriented","portCenterOffset","PortLabelLayout","cid","views","flag","removeEventListeners","onRemove","disposeContainer","unmount","classList","rootElem","selectors","prevSelector","nth","getSelector","undelegateEvents","splitter","getEventHandler","delegateEvent","getEventNamespace","addEventListeners","fromPoint","elementFromPoint","setEventData","propagationStopped","getEventData","eventData","currentData","normalizeEvent","View","isSvgElement","validSelector","isCSSSelector","normalizedEvent","touchEvt","getView","counter","elemCache","pathCache","boundingRect","Markup","isJSONMarkup","isStringMarkup","parseJSONMarkup","fragment","groups","defines","define","groupSelector","nodeGroups","groupName","createContainer","renderMarkup","parseLabelStringMarkup","getPortContainerMarkup","getPortMarkup","getPortLabelMarkup","getEdgeMarkup","cursor","strokeLinecap","getForeignObjectMarkup","bare","background","getAttrDefinition","normal","specials","definition","getDefinition","normalName","setDefine","offsetDefine","positionDefine","allProcessedAttrs","roProcessedAttrs","cellAttrs","rootNode","selectorCache","merge","unique","selectedLength","sortIndex","reduceRight","processedAttrs","rawAttrs","nodeAttrs","setAttrs","positionAttrs","offsetAttrs","nodeTransform","nodePosition","positioned","ts","offseted","nodeBoundingRect","getBoundingRectOfElement","nodeBBox","nodesAttrs","findAttrs","nodesAllAttrs","specialItems","each","processed","processAttrs","nodeAllAttrs","refSelector","refNode","processedAttributes","bboxCache","rotatableMatrix","unrotatedRefBBox","isRefNodeRotatable","rotatableNode","rootBBox","mergeProcessedAttrs","updateRelativeAttrs","FlagManager","actions","bootstrap","flags","labels","label","getFlag","hasChanged","defaults","mergeActions","arr1","arr2","getDefaults","documentEvents","ensureOptions","setContainer","ensureContainer","init","removeTools","rootSelector","getConstructor","prefixClassName","getContainerTagName","delegateEvents","getContainerAttrs","getContainerStyle","setStyle","getContainerClassName","getBootstrapFlag","hasAction","removeAction","action","additionalRemovedActions","removedFlags","onCellChanged","onAttrsChange","getChangedFlag","updated","dirty","toolId","renderer","requestViewUpdate","feature","interacting","getMatrix","getShape","getBoundingRect","getMatrixOfElement","rm","getRootRotatedMatrix","tm","getRootTranslatedMatrix","useCellGeometry","getAngle","getBBoxOfElement","coord","localToGraphRect","getPosition","findByAttr","partial","prepareHighlight","notify","edge","isNodeView","portId","findAttr","terminal","hasPort","findPortElem","tools","config","can","isToolsView","mount","hide","show","getTools","addTools","getEventArgs","cachedModelForMouseEvent","startBatch","stopBatch","getEventTarget","findViewByElem","onMouseLeave","onMouseEnter","CellView","Flag","isCellView","confirmUpdate","ctor","svgContainer","htmlContainer","normalizedTools","ToolItem","isToolItem","tool","render","isSVGElement","focusedTool","blurredTool","focus","hasSVG","hasHTML","decorator","ToolsView","visible","toolsView","onRender","focusOpacity","getClassName","toPercentage","pin","relative","strategy","pinEdgeTerminal","pinNodeTerminal","getUnrotatedBBoxOfElement","anchor","totalLength","pinRelative","pinAbsolute","getAnchor","terminalView","terminalMagnet","getViewBBox","quick","ConnectionStrategy","updatePosition","getEdgeMatrix","getNodeMatrix","getTangentAtRatio","getTangentAtLength","onClick","btn","Button","mousedown","touchstart","Remove","ui","moveAndExpand","Boundary","handles","getVertices","addable","updatePath","resetHandles","renderHandles","vertices","updateHandles","stopHandleListening","vertex","createHandle","processHandle","startHandleListening","onHandleChange","onHandleChanging","onHandleChanged","onHandleRemove","sourceAnchor","targetAnchor","getMouseEventArgs","notifyMouseDown","snapVertex","setVertexAt","notifyMouseMove","vertexAdded","removeRedundancies","verticesRemoved","removeRedundantLinearVertices","notifyMouseUp","checkMouseleave","onChanged","snapRadius","neighbors","getNeighborPoints","removable","removeVertexAt","matchModifiers","allowAddVertex","getVertexIndex","insertVertex","onMouseDown","Vertices","Handle","dblclick","delegateDocumentEvents","mousemove","touchmove","mouseup","touchend","touchcancel","emit","undelegateDocumentEvents","pathClassName","nextVertex","renderHandle","updateHandle","removeProp","anchorFn","snapHandle","sourceView","sourceBBox","changeSourceAnchor","deleteSourceAnchor","shiftHandleIndexes","sourceAnchorPosition","sourceMagnet","resetAnchor","sourceAnchorDef","targetView","targetBBox","changeTargetAnchor","deleteTargetAnchor","targetAnchorPosition","targetMagnet","targetAnchorDef","setVertices","segmentLine","Segments","getClosestPoint","toggleArea","getTerminalView","updateAnchor","updateArea","anchorNode","getTerminalAnchor","customAnchor","anchorAttrs","customAnchorAttrs","defaultAnchorAttrs","areaNode","area","terminalCell","getTerminalMagnet","areaPadding","inflate","restrictArea","rewrite","terminalType","clientToLocalPoint","snapFn","snap","pointAtConnection","rotatedCoords","Anchor","toolView","isSource","refIndex","getVertexAt","SourceAnchor","TargetAnchor","getPointAtRatio","prepareArrowheadDragging","onMouseMove","onMouseUp","Arrowhead","SourceArrowhead","TargetArrowhead","labelIndex","dblClick","onCellDblClick","editor","contentEditable","updateNodeEditorTransform","updateEdgeEditorTransform","backgroundColor","getCellText","innerText","setCellText","minWidth","localToGraph","parentElement","isEdgeLabel","labelAddable","clientToLocal","removeElement","updateEditor","autoFocus","selectText","range","createRange","selectNodeContents","addRange","getText","setText","newLabel","appendLabel","removeLabelAt","CellEditor","NodeEditor","EdgeEditor","NodeTool","boundary","inherit","EdgeTool","createBBoxAnchor","refView","refPoint","fixedAt","getPointAtEdge","orthogonal","orth","nodeCenter","endType","getConnectionPoint","middleSide","getLeftMiddle","getRightMiddle","getBottomCenter","direction","midSide","NodeAnchor","OFFSET","getConnectionSubdivisions","vLine","hLine","vIntersections","hIntersections","fallbackAt","parallel","getStrokeWidth","EdgeAnchor","stroked","bboxRaw","lineRaw","setLength","localShape","getShapeOfElement","magnetMatrix","translateMatrix","rotateMatrix","targetMatrix","localMatrix","localLine","localRef","getDataOfElement","insideout","localBBox","pathOptions","extrapolate","sticky","intersectsWithLineFromCenterToPoint","cpOffset","alignLine","coordinate","alignOffset","align","ConnectionPoint","oneSide","dim","getPointBBox","getPaddingBox","getSourceBBox","getTargetBBox","getSourceAnchor","getTargetAnchor","route","isOrthogonal","getBearing","intersectsWithRect","insideNode","nodeToNode","nodeToVertex","isOrthogonalLoop","vertexToNode","vertexToVertex","opposites","N","S","E","W","freeJoin","getBBoxSize","d1","d2","opposite","fromBBox","toBBox","freePoints","freeBearingPoints","fromBorder","toBorder","startRoute","endRoute","reversed","maxLoopCount","maxDirectionChange","perpendicular","excludeTerminals","excludeNodes","excludeShapes","startDirections","endDirections","directionMap","cost","0","45","90","fallbackRouter","draggingRouter","resolveOptions","paddingBox","directions","point1","point2","OPEN","CLOSE","mapGridSize","excludedTerminals","getCell","excludedAncestors","getSourceCellId","getAncestors","getTargetCellId","getNodes","excludedTerminal","excludedShape","excludedNode","excludedAncestor","excluded","rects","getSourceEndpoint","getTargetEndpoint","getDirectionAngle","directionCount","grid","quadrant","angleTheta","fixAngleEnd","normalizedAngle","diffX","diffY","gridStepsX","gridStepsY","distanceX","distanceY","getDirectionChange","angle1","angle2","getGridOffsets","gridOffsetX","gridOffsetY","getGrid","getGridDimension","roundedDiff","remainder","correction","snapGrid","getCost","anchors","manhattanDistance","getRectPoints","directionList","centerVector","rectPoints","ending","intersectionLine","farthestIntersectionDistance","farthestIntersection","reconstructRoute","parents","tailPoint","prevDiff","currentKey","leadPoint","fromDiff","findRoute","sourceEndpoint","targetEndpoint","startPoints","endPoints","isAccessible","openSet","costs","previousRouteDirectionAngle","previousDirectionAngle","isPathBeginning","directionChange","numDirections","endPointsKeys","sameStartEndPoints","loopsRemaining","currentParent","currentCost","isStartPoint","isRouteBeginning","skipEndCheck","directionAngle","neighborPoint","neighborKey","isClose","isEndPoint","endDirectionAngle","endDirectionChange","neighborCost","neighborPenalty","penalties","costFromStart","isOpen","fallbackRoute","first","second","optionsRaw","build","oldVertices","newVertices","partialRoute","isEndingAtPoint","dragFrom","dragTo","console","warn","getGridSize","manhattan","diagonalCost","l1","l2","intersectionPoint","directionFrom","metro","linkView","er","offsetRaw","sourceX","targetX","sourceDelta","targetDelta","sourceY","targetY","rollup","center1","center2","loop","halfHeight","validate","angles","line1","line2","intersects1","intersects2","intersects","Router","routePoints","fix","middle","f13","f23","prevDistance","nextDistance","startMove","endMove","roundedStart","roundedEnd","smooth","controlPointX","controlPointY","CLOSE_PROXIMITY_PADDING","F13","F23","setupUpdating","updateList","_jumpOverUpdateList","createLines","findLineIntersections","crossCheckLines","crossCheckLine","getDistence","createJumps","jumpSize","skippedPoints","lastLine","jumpStart","jumpEnd","nextPoint","endDistance","startDistance","jumpLine","jumppedLines","buildPath","jumpType","xAxisRotate","centerLine","halfLine","xOffset","yOffset","nextLine","buildRoundedSegment","jumpover","ignoreConnectors","allLinks","getEdges","thisIndex","defaultConnector","connecting","edges","getConnector","linkViews","findViewByCell","thisLines","linkLines","jumpingLines","lineIntersections","Connector","pending","changing","mutate","unset","silent","changes","isEqual","pendingOptions","subset","pathArrayLength","propertyPath","propertyValue","propertyPathArray","nextKey","isArrayIndex","merged","old","ids","targetValue","startValue","getPropByPath","localOptions","timing","getTiming","interpolate","getInterp","interp","startTime","iterate","getTime","elaspe","progress","duration","currentValue","setPropByPath","getArgs","complete","finish","cancelAnimationFrame","commonArgs","jumpedToEnd","stopArgs","Animation","ShareRegistry","propHooks","attrHooks","metadata","preprocess","animation","postprocess","_model","ignoreIdCheck","applyPropHooks","getProp","removeByPath","_children","_parent","removePropByPath","setProp","getPrevious","getZIndex","removeZIndex","setZIndex","cells","getMaxZIndex","getDescendants","breadthFirst","batchUpdate","getMinZIndex","getMarkup","removeMarkup","setMarkup","getAttrs","removeAttrs","overwrite","hooks","getAttrHooks","prefixAttrPath","getAttrByPath","removeAttrByPath","setAttrByPath","setVisible","removeData","getParent","getChildren","parentId","getParentId","childrenIds","ancestors","ancestor","isChildOf","descendant","isDescendantOf","isAncestorOf","getCommonAncestor","getChildIndex","setParent","setChildren","addTo","isCell","addChild","addCell","insertChild","oldParent","getChildCount","incomings","getIncomingEdges","outgoings","getOutgoingEdges","updateParent","removeChildAt","getChildAt","unembed","removeCell","toolItems","setTools","normalizeTools","nameOrIndex","cellType","defaultAttrs","finalAttrs","defaultAttr","subName","finalProps","keepId","deepClone","execute","removeFromParent","Cell","getCellsBBox","cloneCells","cloneMap","sourceId","targetId","setSource","getSource","setTarget","getTarget","embeds","edgeRegistry","nodeRegistry","setEdgeRegistry","setNodeRegistry","ports","group","getPortsByGroup","getGroup","groupPosition","groupPositionName","layoutFn","portsArgs","groupArgs","layouts","portLayout","portSize","portAttrs","labelSize","labelLayout","getPortLabelLayout","parseGroup","parsePort","getLabel","getPortPosition","createPosition","setDefault","setDefaults","getPortLabelPosition","initPorts","getSize","setSize","resize","currentSize","fixedPoint","imageFixedPoint","atan","setPosition","scaledBBox","currentPosition","parentPosition","translateBy","restrict","translatedPosition","transition","currentAngle","getTerminal","getPort","getPortsPosition","portCenter","fit","setPortContainerMarkup","getDefaultPortContainerMarkup","setPortMarkup","getDefaultPortMarkup","setPortLabelMarkup","getDefaultPortLabelMarkup","getPorts","getPortIndex","getPortsLayoutByGroup","layout","prefixPortPath","getPortProp","removePortProp","setPortProp","removePortAt","portsForRemoval","currentPorts","remainingPorts","updatePortData","processRemovedPort","currentItemsMap","removed","getConnectedEdges","incoming","getTargetPortId","outgoing","getSourcePortId","errors","generatePortId","validatePorts","added","prevPort","curPort","constructorName","sourceCell","sourcePort","targetCell","targetPort","isValidId","onLabelsChanged","onVertexsChanged","setTerminal","getTerminalPoint","getTerminalCell","cellId","getTerminalNode","visited","getRouter","removeRouter","setRouter","removeConnector","setConnector","defaultLabel","getLabels","setLabels","parseLabel","insertLabel","parseStringLabel","label1","label2","vertice","getDefaultMarkup","applyToPoints","worker","getPolyline","getSourcePoint","getTargetPoint","newParent","getSourceCell","getTargetCell","prevParent","embed","getSourceNode","getTargetNode","getFragmentAncestor","Edge","equalTerminals","b1","refY","formated","localIndex","entities","sortable","sortAttr","existing","isSameStore","dryrun","removeCells","unreference","at","notifyCellEvent","batches","addings","sortOnChangeZ","onCellAdded","onCellRemoved","onReset","onEdgeTerminalChanged","disconnectEdges","disconnectConnectedEdges","removeConnectedEdges","terminalId","prepareCell","getCells","v1","v2","createNode","updateCell","createEdge","addCells","maxPosition","newId","newCell","sourceCellId","targetCellId","getCellsFromCache","cellIds","indirect","collect","isOutgoing","descendants","embedsCache","collectSub","enclosed","isOrigin","nodeId","isBoundary","getBoundaryNodes","hasLoop","cell1","cell2","successors","search","matchDistance","predecessors","subgraph","getSubGraph","containsRect","getNodesInArea","getNodesFromPoint","breadthFirstSearch","depthFirstSearch","getNeighbors","neighbor","directed","hasParent","resizeCells","fromJSON","parseJSON","resetCells","Model","isModel","addNode","addEdge","setLabel","removeLabel","Base","bodyAttr","labelAttr","getImageUrlHook","imageUrl","imageWidth","imageHeight","image","createShape","Rect","strokeLinejoin","wrap","getPoints","setPoints","removePoints","pointsToString","Poly","Polygon","bg","TextBlock","textAlign","boxSizing","alignItems","justifyContent","foreignObject","wrapValue","wrapAttrs","Circle","portsCache","removePorts","cleanPortsCache","handleAction","renderPorts","renderTools","updateTools","partialAttrs","cleanCache","updateAttrs","renderJSONMarkup","updateTransform","getTranslationString","rot","getRotationString","portRoot","portContentElement","portSelectors","portContentSelectors","cached","portElement","references","parsedPorts","getParsedPorts","portsGropsByZ","autoZIndexKey","getPortElement","appendPorts","updatePorts","refs","createPortElement","renderResult","portClass","portLabelElement","portLabelSelectors","existLabel","existPortLabel","onPortRendered","labelContainer","labelSelectors","contentContainer","contentSelectors","getParsedGroups","groupList","updatePortGroup","metrics","metric","applyPortTransform","initialAngle","portMarkup","portLabelMarkup","getPortEventArgs","notifyPortEvent","onDblClick","onContextMenu","startNodeDragging","dragMagnet","dragNode","stopMagnetDragging","stopNodeDragging","onMagnetClick","onMouseOver","onMouseOut","updateClassName","onMouseWheel","getMouseMovedCount","clickThreshold","startMagnetDragging","onCustomEvent","localPoint","embedding","findParent","getNodesUnderNode","frontOnly","zIndexMap","maxZIndex","newCandidateView","prevCandidateView","candidateEmbedView","validateEmbeding","findView","childView","parentView","clearEmbedding","candidateParent","candidateView","previousParent","validateMagnet","magnetThreshold","startConnectting","delegateDragEvents","createEdgeFromMagnet","isNewEdge","fallbackAction","getDefaultEdge","getEdgeTerminal","autoScrollGraph","getPlugin","isSelectionMovable","selectedCells","getSelectedCells","translating","getGraphArea","getDelegatedView","notifyUnhandledMouseDown","moving","getRestrictArea","notifyNodeMove","posX","posY","enabled","prepareEmbedding","processEmbedding","finalizeEmbedding","scroller","autoScroll","NodeView","POINT_ROUNDING","labelDestroyFn","sourceDef","targetDef","updateTerminalProperties","onLabelsChange","renderLabels","labelCache","onEdgeLabelRendered","normalizeLabelMarkup","parseLabelMarkup","labelNode","getDefaultLabel","updateLabels","customizeLabels","destroyCustomizeLabels","shouldRerenderLabels","updateLabelPositions","previousLabels","labelMarkup","hasChildNodes","canLabelMove","updateConnection","rawCount","simplify","simplifiedPoints","simplifiedCount","isFragmentDescendantOf","translateConnectionPoints","findAnchors","findRoutePoints","connectionPoints","findConnectionPoints","markerPoints","findMarkerPoints","findPath","firstVertex","lastVertex","findAnchorsOrdered","firstType","secondType","secondPoint","firstAnchor","secondAnchor","firstTerminal","secondTerminal","firstView","secondView","firstMagnet","secondMagnet","firstRef","secondRef","sourceEdgeAnchor","targetEdgeAnchor","edgeAnchor","defaultRouter","router","sourceTerminal","targetTerminal","firstRoutePoint","lastRoutePoint","sourcePointRef","sourceLine","connectionPointDef","connectionPoint","sourceConnectionPoint","targetConnectionPointDef","targetConnectionPoint","targetPointRef","targetLine","getLineWidth","sourceMarkerPoint","targetMarkerPoint","sourceStrokeWidth","targetStrokeWidth","defaultPosition","normalizeLabelPosition","labelPosition","getLabelTransformationMatrix","viewKey","updateTerminalMagnet","getCellById","endView","propName","getMagnetFromEdgeTerminal","getLabelAt","labelPositionArgs","defaultLabelPositionArgs","isOffsetAbsolute","absoluteOffset","isDistanceRelative","absoluteDistance","isDistanceAbsoluteReverse","reverseDistance","labelPoint","labelOffset","labelDistance","pointOffset","labelOffsetDiff","labelAngle","offsetCoord","isKeepGradient","keepGradient","isEnsureLegibility","ensureLegibility","pathOpt","vertexLength","getClosestPointLength","currentVertex","currentLength","startEdgeDragging","dragLabel","dragArrowhead","dragEdge","stopLabelDragging","stopArrowheadDragging","stopEdgeDragging","startLabelDragging","initialMagnet","initialTerminal","getValidateConnectionArgs","createValidateConnectionArgs","beforeArrowheadDragging","toFront","highlightAvailableMagnets","unhighlightAvailableMagnets","candidateTerminal","allowLoop","allowNode","allowEdge","allowPort","allowMulti","validateConnection","valid","doValidate","connectedEdges","allowBlank","allowConnectToBlank","validateEdge","currentMagnet","currentView","findMagnet","findViewsInArea","nodeOnly","edgeViews","findEdgeViewsFromPoint","prevView","closestView","prevMagnet","closestMagnet","minDistance","currentTerminal","previousCell","previousPort","previousView","previousPoint","currentCell","currentPort","previousMagnet","marked","magnets","availableMagnets","snapArrowhead","arrowheadDragging","snapArrowheadEnd","arrowheadDragged","finishEmbedding","notifyConnectionEvent","fallbackConnection","afterArrowheadDragging","positionAngle","getLabelPositionAngle","getLabelPositionArgs","getDefaultLabelPositionArgs","positionArgs","mergeLabelPositionArgs","originLabel","getLabelPosition","setLabelAt","EdgeView","viewport","primer","stage","overlay","restore","snapshoot","guarded","preventDefaultDblClick","preventDefaultContextMenu","isPreventDefaultContextMenu","mouseMovedCount","startPosition","preventDefaultMouseDown","preventDefaultBlankAction","moveThreshold","ev","relatedView","wheelDelta","magnetElem","magnetValue","handleMagnetEvent","onMagnetMouseDown","onMagnetDblClick","onMagnetContextMenu","onLabelMouseDown","GraphView","cloned","contextmenu","mouseover","mouseout","mouseenter","mouseleave","mousewheel","DOMMouseScroll","Options","panning","defaultGrid","booleas","scaling","eventTypes","zoomAtMousePosition","highlighting","default","nodeAvailable","magnetAvailable","edgeLabelMovable","virtual","startListening","backgroundImage","resolveGrid","getInstance","settings","patternUnits","patternElem","XMLSerializer","serializeToString","stopListening","viewportTransformString","viewportMatrix","getCTM","getComputedSize","clampScale","getTranslation","getScale","clientSize","scaleGrid","maxScale","minScale","gridWidth","gridHeight","paddings","border","contentArea","getContentArea","allowNewOrigin","minHeight","maxWidth","maxHeight","sizeChanged","originChanged","scaleContentToFitImpl","contentBBox","contentLocalOrigin","getContentBBox","graphToLocal","minScaleX","maxScaleX","minScaleY","maxScaleY","fittingBox","viewportArea","computedSize","currentTranslate","currentScale","newSX","newSY","newOX","newOY","getAllCellsBBox","centerPoint","zoomToRect","positionCell","positionPoint","positionRect","backgroundSize","backgroundPosition","HTMLImageElement","optionsCache","backgroundRepeat","repeat","quality","HTMLCanvasElement","toDataURL","src","updateBackgroundImage","updateBackgroundOptions","updateBackgroundColor","drawBackgroundImage","widgetOptions","onRightMouseDown","onSpaceKeyDown","onSpaceKeyUp","keydown","keyup","mousewheelHandle","MouseWheelHandle","allowMouseWheel","enable","disable","spaceKey","isSpaceKeyPressed","pannable","pan","stopPanning","allowBlankMouseDown","allowRubberband","allowPanning","startPanning","graphArea","cumulatedFactor","global","startPos","targetScale","MIN_SAFE_INTEGER","hasScroller","clientToGraph","zoom","JOB_PRIORITY","resetRenderArea","setRenderArea","renderArea","JobQueue","isFlushing","isFlushPending","scheduleId","frameInterval","initialTime","job","PRIOR","findInsertionIndex","scheduleJob","flushJobsSync","cancelScheduleJob","getCurrentTime","queueFlush","log","ins","requestIdleCallback","flushJobs","timeout","cancelIdleCallback","hasPerformanceNow","performance","willRemoveViews","renderViews","onModelReseted","onCellZIndexChanged","onCellVisibleChanged","clearJobs","removeZPivots","resetViews","removeViews","viewItem","FLAG_INSERT","Update","toggleVisible","priorAction","queueJob","renderViewInArea","effectedEdges","getEffectedEdges","flushWaitingViews","state","ViewState","MOUNTED","createCellView","CREATED","getRenderPriority","isUpdatable","updateView","WAITING","RenderEdge","removeView","queueFlushSync","FLAG_REMOVE","insertView","pivot","addZPivot","zPivots","pivots","createComment","neighborZ","currentZ","layer","neighborPivot","createViewHook","isViewMounted","flagLabels","RenderNode","Scheduler","FLAG_RENDER","schedule","getElementById","filterId","isDefined","filterUnits","stops","markerUnits","markerOrient","markerId","pathMarker","orient","getClientOffset","scrollX","scrollY","getClientMatrix","localToGraphPoint","getPageOffset","localRect","graphPoint","clientPoint","pagePoint","graphToLocalPoint","graphRect","clientRect","pageOffset","graphToLocalRect","highlights","onCellHighlight","onCellUnhighlight","resolved","resolveHighlighter","graphOptions","highlighterDef","getScroller","autoResize","getContainer","getSensorTarget","installedPlugins","virtualRender","getRoots","getLeafs","isRoot","isLeaf","isNeighbor","getSuccessors","isSuccessor","getPredecessors","isPredecessor","cloneSubGraph","getShortestPath","updateCellId","findViewsFromPoint","getZoom","zoomToFit","getRotation","fitToContent","scaleContentToFit","centerContent","centerCell","positionContent","pageToLocalRect","pageToLocalPoint","localToPageRect","localToPagePoint","clientToLocalRect","localToClientRect","localToClientPoint","clientToGraphRect","clientToGraphPoint","gradient","setGridSize","onGraph","drawBackground","clearBackground","enableVirtualRender","disableVirtualRender","isMouseWheelEnabled","disableMouseWheel","enableMouseWheel","isPannable","enablePanning","disablePanning","plugin","pluginName","plugins","postPlugins","aboutToChangePlugins","getPlugins","pluginIns","isEnabled","Graph","Renderer","MouseWheel","DefsManager","GridManager","CoordManager","TransformManager","HighlightManager","BackgroundManager","PanningManager","isGraph","registerNode","registerEdge","registerView","registerAttr","registerGrid","registerFilter","registerNodeTool","registerEdgeTool","registerBackground","registerHighlighter","registerPortLayout","registerPortLabelLayout","registerMarker","registerRouter","registerConnector","registerAnchor","registerEdgeAnchor","registerConnectionPoint","unregisterNode","unregisterEdge","unregisterView","unregisterAttr","unregisterGrid","unregisterFilter","unregisterNodeTool","unregisterEdgeTool","unregisterBackground","unregisterHighlighter","unregisterPortLayout","unregisterPortLabelLayout","unregisterMarker","unregisterRouter","unregisterConnector","unregisterAnchor","unregisterEdgeAnchor","unregisterConnectionPoint","HTML","onCellChangeAny","shapeMaps","effect","renderHTMLComponent","foContent","fo","GridLayout","targetGraph","snapline","draggingGraph","delegateGraphOptions","targetModel","draggingContainer","sourceNode","prepareDragging","updateNodePosition","isSnaplineEnabled","captureCursorOffset","draggingView","draggingNode","draggingModel","getDragNode","tolerance","scaled","clearDragging","delegateView","geometryBBox","draggingBBox","originOffset","updateGraphPosition","scrollTop","scrollLeft","snapped","snapOffset","embeddingMode","isValidArea","isInsideValidArea","snapOnMoving","drop","onDropped","onDropInvalid","targetRect","dndRect","targetScroller","dndContainer","getDropArea","isInsideDndRect","outter","droppingNode","getDropNode","validateNode","stencil","columns","rows","centre","resizeToFit","marginX","marginY","columnWidths","columnWidth","getNodesInColumn","getMaxDim","columnLefts","accumulate","rowHeights","rowHeight","getNodesInRow","rowTops","rowIndex","columnIndex","calcHeight","calcWidth","Dnd","ClassNames","graphs","dnd","onSearch","initContainer","initSearch","initContent","initGroups","setTitle","loadGroup","isGroupCollapsed","expandGroup","collapseGroup","isGroupCollapsable","initGroup","groupNames","unregisterGraphEvents","notFoundText","renderSearch","globalGraphOptions","stencilGraphOptions","groupElem","collapsable","collapsed","groupTitle","groupContent","graphOptionsInGroup","graphWidth","stencilGraphWidth","graphHeight","stencilGraphHeight","registerGraphEvents","clearGroups","setCollapsableState","defaultGroupName","placeholder","searchText","onDragStart","getModel","getGraph","graphPadding","stencilGraphPadding","getGroupByNode","nodeMovable","keyword","isCellMatched","filters","ignoreCase","collapseGroups","expandGroups","toggleGroup","allCollapsed","Stencil","layoutOptions","showPorts","visibility","createBlock","toSVG","toPNG","toJPEG","exportPNG","exportJPEG","exportSVG","rawSVG","vSVG","clonedSVG","vStage","preserveDimensions","copyStyles","raws","clones","styleSheetCount","styleSheets","styleSheetsCopy","defaultComputedStyles","computedStyle","defaultComputedStyle","copy","customStyles","customStyle","stylesheet","cDATASection","implementation","createDocument","createCDATASection","format","beforeSerialize","serializeImages","deferrals","vImage","expanding","rawSize","imgDataCanvas","context2D","fillStyle","fillRect","getImageData","Image","Shape","magnetAdsorbed","r3","r4","r5","r6","imageShapes","imageNodes","use","Export","onMounted","exportPng","exportSvg","ElMessage","warning","success","blocks","blocksSort","uniqBy","__exports__","$","IS_PURE","real","forced","aCallable","anObject","getIteratorDirect","createIteratorProxy","callWithSafeIterationClosing","IteratorProxy","done","mapper","exports","freeExports","freeModule","moduleExports","Buffer","allocUnsafe","cloneBuffer"],"mappings":"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","file":"js/chunk-ddd88654.e7a11d44.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!./AntVX6.vue?vue&type=style&index=0&id=d0a1cb70&scoped=true&lang=css\"","// compatible with NodeList.prototype.forEach() before chrome 51\n// https://developer.mozilla.org/en-US/docs/Web/API/NodeList/forEach\nif (typeof window === 'object' &&\n    window.NodeList &&\n    !NodeList.prototype.forEach) {\n    NodeList.prototype.forEach = Array.prototype.forEach;\n}\n// compatible with ParentNode.append() before chrome 54\n// https://github.com/jserz/js_piece/blob/master/DOM/ParentNode/append()/append().md\nif (typeof window !== 'undefined') {\n    ;\n    (function (arr) {\n        arr.forEach((item) => {\n            if (Object.prototype.hasOwnProperty.call(item, 'append')) {\n                return;\n            }\n            Object.defineProperty(item, 'append', {\n                configurable: true,\n                enumerable: true,\n                writable: true,\n                value(...args) {\n                    const docFrag = document.createDocumentFragment();\n                    args.forEach((arg) => {\n                        const isNode = arg instanceof Node;\n                        docFrag.appendChild(isNode ? arg : document.createTextNode(String(arg)));\n                    });\n                    this.appendChild(docFrag);\n                },\n            });\n        });\n    })([Element.prototype, Document.prototype, DocumentFragment.prototype]);\n}\n//# sourceMappingURL=index.js.map","/* eslint-disable no-underscore-dangle */\nexport class Disposable {\n    get disposed() {\n        return this._disposed === true;\n    }\n    dispose() {\n        this._disposed = true;\n    }\n}\n(function (Disposable) {\n    function dispose() {\n        return (target, methodName, descriptor) => {\n            const raw = descriptor.value;\n            const proto = target.__proto__; // eslint-disable-line\n            descriptor.value = function (...args) {\n                if (this.disposed) {\n                    return;\n                }\n                raw.call(this, ...args);\n                proto.dispose.call(this);\n            };\n        };\n    }\n    Disposable.dispose = dispose;\n})(Disposable || (Disposable = {}));\n/**\n * A disposable object which delegates to a callback function.\n */\nexport class DisposableDelegate {\n    /**\n     * Construct a new disposable delegate.\n     *\n     * @param callback - The callback function to invoke on dispose.\n     */\n    constructor(callback) {\n        this.callback = callback;\n    }\n    /**\n     * Test whether the delegate has been disposed.\n     */\n    get disposed() {\n        return !this.callback;\n    }\n    /**\n     * Dispose of the delegate and invoke the callback function.\n     */\n    dispose() {\n        if (!this.callback) {\n            return;\n        }\n        const callback = this.callback;\n        this.callback = null;\n        callback();\n    }\n}\n/**\n * An object which manages a collection of disposable items.\n */\nexport class DisposableSet {\n    constructor() {\n        this.isDisposed = false; // eslint-disable-line:variable-name\n        this.items = new Set();\n    }\n    /**\n     * Test whether the set has been disposed.\n     */\n    get disposed() {\n        return this.isDisposed;\n    }\n    /**\n     * Dispose of the set and the items it contains.\n     *\n     * #### Notes\n     * Items are disposed in the order they are added to the set.\n     */\n    dispose() {\n        if (this.isDisposed) {\n            return;\n        }\n        this.isDisposed = true;\n        this.items.forEach((item) => {\n            item.dispose();\n        });\n        this.items.clear();\n    }\n    /**\n     * Test whether the set contains a specific item.\n     *\n     * @param item - The item of interest.\n     *\n     * @returns `true` if the set contains the item, `false` otherwise.\n     */\n    contains(item) {\n        return this.items.has(item);\n    }\n    /**\n     * Add a disposable item to the set.\n     *\n     * @param item - The item to add to the set.\n     *\n     * #### Notes\n     * If the item is already contained in the set, this is a no-op.\n     */\n    add(item) {\n        this.items.add(item);\n    }\n    /**\n     * Remove a disposable item from the set.\n     *\n     * @param item - The item to remove from the set.\n     *\n     * #### Notes\n     * If the item is not contained in the set, this is a no-op.\n     */\n    remove(item) {\n        this.items.delete(item);\n    }\n    /**\n     * Remove all items from the set.\n     */\n    clear() {\n        this.items.clear();\n    }\n}\n(function (DisposableSet) {\n    /**\n     * Create a disposable set from an iterable of items.\n     *\n     * @param items - The iterable or array-like object of interest.\n     *\n     * @returns A new disposable initialized with the given items.\n     */\n    function from(items) {\n        const set = new DisposableSet();\n        items.forEach((item) => {\n            set.add(item);\n        });\n        return set;\n    }\n    DisposableSet.from = from;\n})(DisposableSet || (DisposableSet = {}));\n//# sourceMappingURL=disposable.js.map","import root from './_root.js';\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nexport default now;\n","/** Used to match a single whitespace character. */\nvar reWhitespace = /\\s/;\n\n/**\n * Used by `_.trim` and `_.trimEnd` to get the index of the last non-whitespace\n * character of `string`.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {number} Returns the index of the last non-whitespace character.\n */\nfunction trimmedEndIndex(string) {\n  var index = string.length;\n\n  while (index-- && reWhitespace.test(string.charAt(index))) {}\n  return index;\n}\n\nexport default trimmedEndIndex;\n","import trimmedEndIndex from './_trimmedEndIndex.js';\n\n/** Used to match leading whitespace. */\nvar reTrimStart = /^\\s+/;\n\n/**\n * The base implementation of `_.trim`.\n *\n * @private\n * @param {string} string The string to trim.\n * @returns {string} Returns the trimmed string.\n */\nfunction baseTrim(string) {\n  return string\n    ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '')\n    : string;\n}\n\nexport default baseTrim;\n","import baseGetTag from './_baseGetTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nexport default isSymbol;\n","import baseTrim from './_baseTrim.js';\nimport isObject from './isObject.js';\nimport isSymbol from './isSymbol.js';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = baseTrim(value);\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nexport default toNumber;\n","import isObject from './isObject.js';\nimport now from './now.js';\nimport toNumber from './toNumber.js';\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nexport default debounce;\n","import debounce from './debounce.js';\nimport isObject from './isObject.js';\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  if (isObject(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n  return debounce(func, wait, {\n    'leading': leading,\n    'maxWait': wait,\n    'trailing': trailing\n  });\n}\n\nexport default throttle;\n","export { debounce, throttle } from 'lodash-es';\nexport function apply(fn, ctx, args) {\n    if (args) {\n        switch (args.length) {\n            case 0:\n                return fn.call(ctx);\n            case 1:\n                return fn.call(ctx, args[0]);\n            case 2:\n                return fn.call(ctx, args[0], args[1]);\n            case 3:\n                return fn.call(ctx, args[0], args[1], args[2]);\n            case 4:\n                return fn.call(ctx, args[0], args[1], args[2], args[3]);\n            case 5:\n                return fn.call(ctx, args[0], args[1], args[2], args[3], args[4]);\n            case 6:\n                return fn.call(ctx, args[0], args[1], args[2], args[3], args[4], args[5]);\n            default:\n                return fn.apply(ctx, args);\n        }\n    }\n    return fn.call(ctx);\n}\nexport function call(fn, ctx, ...args) {\n    return apply(fn, ctx, args);\n}\n//# sourceMappingURL=function.js.map","export function isAsyncLike(obj) {\n    return typeof obj === 'object' && obj.then && typeof obj.then === 'function';\n}\nexport function isAsync(obj) {\n    return obj != null && (obj instanceof Promise || isAsyncLike(obj));\n}\nexport function toAsyncBoolean(...inputs) {\n    const results = [];\n    inputs.forEach((arg) => {\n        if (Array.isArray(arg)) {\n            results.push(...arg);\n        }\n        else {\n            results.push(arg);\n        }\n    });\n    const hasAsync = results.some((res) => isAsync(res));\n    if (hasAsync) {\n        const deferres = results.map((res) => isAsync(res) ? res : Promise.resolve(res !== false));\n        return Promise.all(deferres).then((arr) => arr.reduce((memo, item) => item !== false && memo, true));\n    }\n    return results.every((res) => res !== false);\n}\nexport function toDeferredBoolean(...inputs) {\n    const ret = toAsyncBoolean(inputs);\n    return typeof ret === 'boolean' ? Promise.resolve(ret) : ret;\n}\n//# sourceMappingURL=async.js.map","import { FunctionExt } from '../function';\nexport function call(list, args) {\n    const results = [];\n    for (let i = 0; i < list.length; i += 2) {\n        const handler = list[i];\n        const context = list[i + 1];\n        const params = Array.isArray(args) ? args : [args];\n        const ret = FunctionExt.apply(handler, context, params);\n        results.push(ret);\n    }\n    return FunctionExt.toAsyncBoolean(results);\n}\n//# sourceMappingURL=util.js.map","import { call } from './util';\nimport { FunctionExt } from '../function';\nexport class Events {\n    constructor() {\n        this.listeners = {};\n    }\n    on(name, handler, context) {\n        if (handler == null) {\n            return this;\n        }\n        if (!this.listeners[name]) {\n            this.listeners[name] = [];\n        }\n        const cache = this.listeners[name];\n        cache.push(handler, context);\n        return this;\n    }\n    once(name, handler, context) {\n        const cb = (...args) => {\n            this.off(name, cb);\n            return call([handler, context], args);\n        };\n        return this.on(name, cb, this);\n    }\n    off(name, handler, context) {\n        // remove all events.\n        if (!(name || handler || context)) {\n            this.listeners = {};\n            return this;\n        }\n        const listeners = this.listeners;\n        const names = name ? [name] : Object.keys(listeners);\n        names.forEach((n) => {\n            const cache = listeners[n];\n            if (!cache) {\n                return;\n            }\n            // remove all events with specified name.\n            if (!(handler || context)) {\n                delete listeners[n];\n                return;\n            }\n            for (let i = cache.length - 2; i >= 0; i -= 2) {\n                if (!((handler && cache[i] !== handler) ||\n                    (context && cache[i + 1] !== context))) {\n                    cache.splice(i, 2);\n                }\n            }\n        });\n        return this;\n    }\n    trigger(name, ...args) {\n        let returned = true;\n        if (name !== '*') {\n            const list = this.listeners[name];\n            if (list != null) {\n                returned = call([...list], args);\n            }\n        }\n        const list = this.listeners['*'];\n        if (list != null) {\n            return FunctionExt.toAsyncBoolean([\n                returned,\n                call([...list], [name, ...args]),\n            ]);\n        }\n        return returned;\n    }\n    emit(name, ...args) {\n        return this.trigger(name, ...args);\n    }\n}\n//# sourceMappingURL=events.js.map","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.has` without support for deep paths.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {Array|string} key The key to check.\n * @returns {boolean} Returns `true` if `key` exists, else `false`.\n */\nfunction baseHas(object, key) {\n  return object != null && hasOwnProperty.call(object, key);\n}\n\nexport default baseHas;\n","import isArray from './isArray.js';\nimport isSymbol from './isSymbol.js';\n\n/** Used to match property names within property paths. */\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n    reIsPlainProp = /^\\w*$/;\n\n/**\n * Checks if `value` is a property name and not a property path.\n *\n * @private\n * @param {*} value The value to check.\n * @param {Object} [object] The object to query keys on.\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n */\nfunction isKey(value, object) {\n  if (isArray(value)) {\n    return false;\n  }\n  var type = typeof value;\n  if (type == 'number' || type == 'symbol' || type == 'boolean' ||\n      value == null || isSymbol(value)) {\n    return true;\n  }\n  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n    (object != null && value in Object(object));\n}\n\nexport default isKey;\n","import MapCache from './_MapCache.js';\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a function that memoizes the result of `func`. If `resolver` is\n * provided, it determines the cache key for storing the result based on the\n * arguments provided to the memoized function. By default, the first argument\n * provided to the memoized function is used as the map cache key. The `func`\n * is invoked with the `this` binding of the memoized function.\n *\n * **Note:** The cache is exposed as the `cache` property on the memoized\n * function. Its creation may be customized by replacing the `_.memoize.Cache`\n * constructor with one whose instances implement the\n * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n * method interface of `clear`, `delete`, `get`, `has`, and `set`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to have its output memoized.\n * @param {Function} [resolver] The function to resolve the cache key.\n * @returns {Function} Returns the new memoized function.\n * @example\n *\n * var object = { 'a': 1, 'b': 2 };\n * var other = { 'c': 3, 'd': 4 };\n *\n * var values = _.memoize(_.values);\n * values(object);\n * // => [1, 2]\n *\n * values(other);\n * // => [3, 4]\n *\n * object.a = 2;\n * values(object);\n * // => [1, 2]\n *\n * // Modify the result cache.\n * values.cache.set(object, ['a', 'b']);\n * values(object);\n * // => ['a', 'b']\n *\n * // Replace `_.memoize.Cache`.\n * _.memoize.Cache = WeakMap;\n */\nfunction memoize(func, resolver) {\n  if (typeof func != 'function' || (resolver != null && typeof resolver != 'function')) {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var memoized = function() {\n    var args = arguments,\n        key = resolver ? resolver.apply(this, args) : args[0],\n        cache = memoized.cache;\n\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    memoized.cache = cache.set(key, result) || cache;\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || MapCache);\n  return memoized;\n}\n\n// Expose `MapCache`.\nmemoize.Cache = MapCache;\n\nexport default memoize;\n","import memoize from './memoize.js';\n\n/** Used as the maximum memoize cache size. */\nvar MAX_MEMOIZE_SIZE = 500;\n\n/**\n * A specialized version of `_.memoize` which clears the memoized function's\n * cache when it exceeds `MAX_MEMOIZE_SIZE`.\n *\n * @private\n * @param {Function} func The function to have its output memoized.\n * @returns {Function} Returns the new memoized function.\n */\nfunction memoizeCapped(func) {\n  var result = memoize(func, function(key) {\n    if (cache.size === MAX_MEMOIZE_SIZE) {\n      cache.clear();\n    }\n    return key;\n  });\n\n  var cache = result.cache;\n  return result;\n}\n\nexport default memoizeCapped;\n","import memoizeCapped from './_memoizeCapped.js';\n\n/** Used to match property names within property paths. */\nvar rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n/** Used to match backslashes in property paths. */\nvar reEscapeChar = /\\\\(\\\\)?/g;\n\n/**\n * Converts `string` to a property path array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the property path array.\n */\nvar stringToPath = memoizeCapped(function(string) {\n  var result = [];\n  if (string.charCodeAt(0) === 46 /* . */) {\n    result.push('');\n  }\n  string.replace(rePropName, function(match, number, quote, subString) {\n    result.push(quote ? subString.replace(reEscapeChar, '$1') : (number || match));\n  });\n  return result;\n});\n\nexport default stringToPath;\n","/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nexport default arrayMap;\n","import Symbol from './_Symbol.js';\nimport arrayMap from './_arrayMap.js';\nimport isArray from './isArray.js';\nimport isSymbol from './isSymbol.js';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isArray(value)) {\n    // Recursively convert values (susceptible to call stack limits).\n    return arrayMap(value, baseToString) + '';\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nexport default baseToString;\n","import baseToString from './_baseToString.js';\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\nexport default toString;\n","import isArray from './isArray.js';\nimport isKey from './_isKey.js';\nimport stringToPath from './_stringToPath.js';\nimport toString from './toString.js';\n\n/**\n * Casts `value` to a path array if it's not one.\n *\n * @private\n * @param {*} value The value to inspect.\n * @param {Object} [object] The object to query keys on.\n * @returns {Array} Returns the cast property path array.\n */\nfunction castPath(value, object) {\n  if (isArray(value)) {\n    return value;\n  }\n  return isKey(value, object) ? [value] : stringToPath(toString(value));\n}\n\nexport default castPath;\n","import isSymbol from './isSymbol.js';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nexport default toKey;\n","import castPath from './_castPath.js';\nimport isArguments from './isArguments.js';\nimport isArray from './isArray.js';\nimport isIndex from './_isIndex.js';\nimport isLength from './isLength.js';\nimport toKey from './_toKey.js';\n\n/**\n * Checks if `path` exists on `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @param {Function} hasFunc The function to check properties.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n */\nfunction hasPath(object, path, hasFunc) {\n  path = castPath(path, object);\n\n  var index = -1,\n      length = path.length,\n      result = false;\n\n  while (++index < length) {\n    var key = toKey(path[index]);\n    if (!(result = object != null && hasFunc(object, key))) {\n      break;\n    }\n    object = object[key];\n  }\n  if (result || ++index != length) {\n    return result;\n  }\n  length = object == null ? 0 : object.length;\n  return !!length && isLength(length) && isIndex(key, length) &&\n    (isArray(object) || isArguments(object));\n}\n\nexport default hasPath;\n","import baseHas from './_baseHas.js';\nimport hasPath from './_hasPath.js';\n\n/**\n * Checks if `path` is a direct property of `object`.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n * @example\n *\n * var object = { 'a': { 'b': 2 } };\n * var other = _.create({ 'a': _.create({ 'b': 2 }) });\n *\n * _.has(object, 'a');\n * // => true\n *\n * _.has(object, 'a.b');\n * // => true\n *\n * _.has(object, ['a', 'b']);\n * // => true\n *\n * _.has(other, 'a');\n * // => false\n */\nfunction has(object, path) {\n  return object != null && hasPath(object, path, baseHas);\n}\n\nexport default has;\n","import castPath from './_castPath.js';\nimport toKey from './_toKey.js';\n\n/**\n * The base implementation of `_.get` without support for default values.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @returns {*} Returns the resolved value.\n */\nfunction baseGet(object, path) {\n  path = castPath(path, object);\n\n  var index = 0,\n      length = path.length;\n\n  while (object != null && index < length) {\n    object = object[toKey(path[index++])];\n  }\n  return (index && index == length) ? object : undefined;\n}\n\nexport default baseGet;\n","import getNative from './_getNative.js';\n\nvar defineProperty = (function() {\n  try {\n    var func = getNative(Object, 'defineProperty');\n    func({}, '', {});\n    return func;\n  } catch (e) {}\n}());\n\nexport default defineProperty;\n","import defineProperty from './_defineProperty.js';\n\n/**\n * The base implementation of `assignValue` and `assignMergeValue` without\n * value checks.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction baseAssignValue(object, key, value) {\n  if (key == '__proto__' && defineProperty) {\n    defineProperty(object, key, {\n      'configurable': true,\n      'enumerable': true,\n      'value': value,\n      'writable': true\n    });\n  } else {\n    object[key] = value;\n  }\n}\n\nexport default baseAssignValue;\n","import baseAssignValue from './_baseAssignValue.js';\nimport eq from './eq.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nexport default assignValue;\n","import assignValue from './_assignValue.js';\nimport castPath from './_castPath.js';\nimport isIndex from './_isIndex.js';\nimport isObject from './isObject.js';\nimport toKey from './_toKey.js';\n\n/**\n * The base implementation of `_.set`.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {Array|string} path The path of the property to set.\n * @param {*} value The value to set.\n * @param {Function} [customizer] The function to customize path creation.\n * @returns {Object} Returns `object`.\n */\nfunction baseSet(object, path, value, customizer) {\n  if (!isObject(object)) {\n    return object;\n  }\n  path = castPath(path, object);\n\n  var index = -1,\n      length = path.length,\n      lastIndex = length - 1,\n      nested = object;\n\n  while (nested != null && ++index < length) {\n    var key = toKey(path[index]),\n        newValue = value;\n\n    if (key === '__proto__' || key === 'constructor' || key === 'prototype') {\n      return object;\n    }\n\n    if (index != lastIndex) {\n      var objValue = nested[key];\n      newValue = customizer ? customizer(objValue, key, nested) : undefined;\n      if (newValue === undefined) {\n        newValue = isObject(objValue)\n          ? objValue\n          : (isIndex(path[index + 1]) ? [] : {});\n      }\n    }\n    assignValue(nested, key, newValue);\n    nested = nested[key];\n  }\n  return object;\n}\n\nexport default baseSet;\n","import baseGet from './_baseGet.js';\nimport baseSet from './_baseSet.js';\nimport castPath from './_castPath.js';\n\n/**\n * The base implementation of  `_.pickBy` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The source object.\n * @param {string[]} paths The property paths to pick.\n * @param {Function} predicate The function invoked per property.\n * @returns {Object} Returns the new object.\n */\nfunction basePickBy(object, paths, predicate) {\n  var index = -1,\n      length = paths.length,\n      result = {};\n\n  while (++index < length) {\n    var path = paths[index],\n        value = baseGet(object, path);\n\n    if (predicate(value, path)) {\n      baseSet(result, castPath(path, object), value);\n    }\n  }\n  return result;\n}\n\nexport default basePickBy;\n","/**\n * The base implementation of `_.hasIn` without support for deep paths.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {Array|string} key The key to check.\n * @returns {boolean} Returns `true` if `key` exists, else `false`.\n */\nfunction baseHasIn(object, key) {\n  return object != null && key in Object(object);\n}\n\nexport default baseHasIn;\n","import baseHasIn from './_baseHasIn.js';\nimport hasPath from './_hasPath.js';\n\n/**\n * Checks if `path` is a direct or inherited property of `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n * @example\n *\n * var object = _.create({ 'a': _.create({ 'b': 2 }) });\n *\n * _.hasIn(object, 'a');\n * // => true\n *\n * _.hasIn(object, 'a.b');\n * // => true\n *\n * _.hasIn(object, ['a', 'b']);\n * // => true\n *\n * _.hasIn(object, 'b');\n * // => false\n */\nfunction hasIn(object, path) {\n  return object != null && hasPath(object, path, baseHasIn);\n}\n\nexport default hasIn;\n","import basePickBy from './_basePickBy.js';\nimport hasIn from './hasIn.js';\n\n/**\n * The base implementation of `_.pick` without support for individual\n * property identifiers.\n *\n * @private\n * @param {Object} object The source object.\n * @param {string[]} paths The property paths to pick.\n * @returns {Object} Returns the new object.\n */\nfunction basePick(object, paths) {\n  return basePickBy(object, paths, function(value, path) {\n    return hasIn(object, path);\n  });\n}\n\nexport default basePick;\n","import Symbol from './_Symbol.js';\nimport isArguments from './isArguments.js';\nimport isArray from './isArray.js';\n\n/** Built-in value references. */\nvar spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined;\n\n/**\n * Checks if `value` is a flattenable `arguments` object or array.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.\n */\nfunction isFlattenable(value) {\n  return isArray(value) || isArguments(value) ||\n    !!(spreadableSymbol && value && value[spreadableSymbol]);\n}\n\nexport default isFlattenable;\n","import arrayPush from './_arrayPush.js';\nimport isFlattenable from './_isFlattenable.js';\n\n/**\n * The base implementation of `_.flatten` with support for restricting flattening.\n *\n * @private\n * @param {Array} array The array to flatten.\n * @param {number} depth The maximum recursion depth.\n * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.\n * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.\n * @param {Array} [result=[]] The initial result value.\n * @returns {Array} Returns the new flattened array.\n */\nfunction baseFlatten(array, depth, predicate, isStrict, result) {\n  var index = -1,\n      length = array.length;\n\n  predicate || (predicate = isFlattenable);\n  result || (result = []);\n\n  while (++index < length) {\n    var value = array[index];\n    if (depth > 0 && predicate(value)) {\n      if (depth > 1) {\n        // Recursively flatten arrays (susceptible to call stack limits).\n        baseFlatten(value, depth - 1, predicate, isStrict, result);\n      } else {\n        arrayPush(result, value);\n      }\n    } else if (!isStrict) {\n      result[result.length] = value;\n    }\n  }\n  return result;\n}\n\nexport default baseFlatten;\n","import baseFlatten from './_baseFlatten.js';\n\n/**\n * Flattens `array` a single level deep.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to flatten.\n * @returns {Array} Returns the new flattened array.\n * @example\n *\n * _.flatten([1, [2, [3, [4]], 5]]);\n * // => [1, 2, [3, [4]], 5]\n */\nfunction flatten(array) {\n  var length = array == null ? 0 : array.length;\n  return length ? baseFlatten(array, 1) : [];\n}\n\nexport default flatten;\n","/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\nexport default apply;\n","import apply from './_apply.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * A specialized version of `baseRest` which transforms the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @param {Function} transform The rest array transform.\n * @returns {Function} Returns the new function.\n */\nfunction overRest(func, start, transform) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = transform(array);\n    return apply(func, this, otherArgs);\n  };\n}\n\nexport default overRest;\n","/**\n * Creates a function that returns `value`.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {*} value The value to return from the new function.\n * @returns {Function} Returns the new constant function.\n * @example\n *\n * var objects = _.times(2, _.constant({ 'a': 1 }));\n *\n * console.log(objects);\n * // => [{ 'a': 1 }, { 'a': 1 }]\n *\n * console.log(objects[0] === objects[1]);\n * // => true\n */\nfunction constant(value) {\n  return function() {\n    return value;\n  };\n}\n\nexport default constant;\n","import constant from './constant.js';\nimport defineProperty from './_defineProperty.js';\nimport identity from './identity.js';\n\n/**\n * The base implementation of `setToString` without support for hot loop shorting.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar baseSetToString = !defineProperty ? identity : function(func, string) {\n  return defineProperty(func, 'toString', {\n    'configurable': true,\n    'enumerable': false,\n    'value': constant(string),\n    'writable': true\n  });\n};\n\nexport default baseSetToString;\n","/** Used to detect hot functions by number of calls within a span of milliseconds. */\nvar HOT_COUNT = 800,\n    HOT_SPAN = 16;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeNow = Date.now;\n\n/**\n * Creates a function that'll short out and invoke `identity` instead\n * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`\n * milliseconds.\n *\n * @private\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new shortable function.\n */\nfunction shortOut(func) {\n  var count = 0,\n      lastCalled = 0;\n\n  return function() {\n    var stamp = nativeNow(),\n        remaining = HOT_SPAN - (stamp - lastCalled);\n\n    lastCalled = stamp;\n    if (remaining > 0) {\n      if (++count >= HOT_COUNT) {\n        return arguments[0];\n      }\n    } else {\n      count = 0;\n    }\n    return func.apply(undefined, arguments);\n  };\n}\n\nexport default shortOut;\n","import baseSetToString from './_baseSetToString.js';\nimport shortOut from './_shortOut.js';\n\n/**\n * Sets the `toString` method of `func` to return `string`.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar setToString = shortOut(baseSetToString);\n\nexport default setToString;\n","import flatten from './flatten.js';\nimport overRest from './_overRest.js';\nimport setToString from './_setToString.js';\n\n/**\n * A specialized version of `baseRest` which flattens the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @returns {Function} Returns the new function.\n */\nfunction flatRest(func) {\n  return setToString(overRest(func, undefined, flatten), func + '');\n}\n\nexport default flatRest;\n","import basePick from './_basePick.js';\nimport flatRest from './_flatRest.js';\n\n/**\n * Creates an object composed of the picked `object` properties.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The source object.\n * @param {...(string|string[])} [paths] The property paths to pick.\n * @returns {Object} Returns the new object.\n * @example\n *\n * var object = { 'a': 1, 'b': '2', 'c': 3 };\n *\n * _.pick(object, ['a', 'c']);\n * // => { 'a': 1, 'c': 3 }\n */\nvar pick = flatRest(function(object, paths) {\n  return object == null ? {} : basePick(object, paths);\n});\n\nexport default pick;\n","import baseAssignValue from './_baseAssignValue.js';\nimport eq from './eq.js';\n\n/**\n * This function is like `assignValue` except that it doesn't assign\n * `undefined` values.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignMergeValue(object, key, value) {\n  if ((value !== undefined && !eq(object[key], value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nexport default assignMergeValue;\n","import Uint8Array from './_Uint8Array.js';\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\nexport default cloneArrayBuffer;\n","import cloneArrayBuffer from './_cloneArrayBuffer.js';\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\nexport default cloneTypedArray;\n","/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\nexport default copyArray;\n","import isObject from './isObject.js';\n\n/** Built-in value references. */\nvar objectCreate = Object.create;\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} proto The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nvar baseCreate = (function() {\n  function object() {}\n  return function(proto) {\n    if (!isObject(proto)) {\n      return {};\n    }\n    if (objectCreate) {\n      return objectCreate(proto);\n    }\n    object.prototype = proto;\n    var result = new object;\n    object.prototype = undefined;\n    return result;\n  };\n}());\n\nexport default baseCreate;\n","import overArg from './_overArg.js';\n\n/** Built-in value references. */\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\n\nexport default getPrototype;\n","import baseCreate from './_baseCreate.js';\nimport getPrototype from './_getPrototype.js';\nimport isPrototype from './_isPrototype.js';\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototype(object))\n    : {};\n}\n\nexport default initCloneObject;\n","import isArrayLike from './isArrayLike.js';\nimport isObjectLike from './isObjectLike.js';\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\nexport default isArrayLikeObject;\n","import baseGetTag from './_baseGetTag.js';\nimport getPrototype from './_getPrototype.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to infer the `Object` constructor. */\nvar objectCtorString = funcToString.call(Object);\n\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * @static\n * @memberOf _\n * @since 0.8.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) || baseGetTag(value) != objectTag) {\n    return false;\n  }\n  var proto = getPrototype(value);\n  if (proto === null) {\n    return true;\n  }\n  var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n  return typeof Ctor == 'function' && Ctor instanceof Ctor &&\n    funcToString.call(Ctor) == objectCtorString;\n}\n\nexport default isPlainObject;\n","/**\n * Gets the value at `key`, unless `key` is \"__proto__\" or \"constructor\".\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction safeGet(object, key) {\n  if (key === 'constructor' && typeof object[key] === 'function') {\n    return;\n  }\n\n  if (key == '__proto__') {\n    return;\n  }\n\n  return object[key];\n}\n\nexport default safeGet;\n","import assignValue from './_assignValue.js';\nimport baseAssignValue from './_baseAssignValue.js';\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  var isNew = !object;\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    if (newValue === undefined) {\n      newValue = source[key];\n    }\n    if (isNew) {\n      baseAssignValue(object, key, newValue);\n    } else {\n      assignValue(object, key, newValue);\n    }\n  }\n  return object;\n}\n\nexport default copyObject;\n","/**\n * This function is like\n * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * except that it includes inherited enumerable properties.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction nativeKeysIn(object) {\n  var result = [];\n  if (object != null) {\n    for (var key in Object(object)) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default nativeKeysIn;\n","import isObject from './isObject.js';\nimport isPrototype from './_isPrototype.js';\nimport nativeKeysIn from './_nativeKeysIn.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeysIn(object) {\n  if (!isObject(object)) {\n    return nativeKeysIn(object);\n  }\n  var isProto = isPrototype(object),\n      result = [];\n\n  for (var key in object) {\n    if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default baseKeysIn;\n","import arrayLikeKeys from './_arrayLikeKeys.js';\nimport baseKeysIn from './_baseKeysIn.js';\nimport isArrayLike from './isArrayLike.js';\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n}\n\nexport default keysIn;\n","import copyObject from './_copyObject.js';\nimport keysIn from './keysIn.js';\n\n/**\n * Converts `value` to a plain object flattening inherited enumerable string\n * keyed properties of `value` to own properties of the plain object.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {Object} Returns the converted plain object.\n * @example\n *\n * function Foo() {\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.assign({ 'a': 1 }, new Foo);\n * // => { 'a': 1, 'b': 2 }\n *\n * _.assign({ 'a': 1 }, _.toPlainObject(new Foo));\n * // => { 'a': 1, 'b': 2, 'c': 3 }\n */\nfunction toPlainObject(value) {\n  return copyObject(value, keysIn(value));\n}\n\nexport default toPlainObject;\n","import assignMergeValue from './_assignMergeValue.js';\nimport cloneBuffer from './_cloneBuffer.js';\nimport cloneTypedArray from './_cloneTypedArray.js';\nimport copyArray from './_copyArray.js';\nimport initCloneObject from './_initCloneObject.js';\nimport isArguments from './isArguments.js';\nimport isArray from './isArray.js';\nimport isArrayLikeObject from './isArrayLikeObject.js';\nimport isBuffer from './isBuffer.js';\nimport isFunction from './isFunction.js';\nimport isObject from './isObject.js';\nimport isPlainObject from './isPlainObject.js';\nimport isTypedArray from './isTypedArray.js';\nimport safeGet from './_safeGet.js';\nimport toPlainObject from './toPlainObject.js';\n\n/**\n * A specialized version of `baseMerge` for arrays and objects which performs\n * deep merges and tracks traversed objects enabling objects with circular\n * references to be merged.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {string} key The key of the value to merge.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} mergeFunc The function to merge values.\n * @param {Function} [customizer] The function to customize assigned values.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n */\nfunction baseMergeDeep(object, source, key, srcIndex, mergeFunc, customizer, stack) {\n  var objValue = safeGet(object, key),\n      srcValue = safeGet(source, key),\n      stacked = stack.get(srcValue);\n\n  if (stacked) {\n    assignMergeValue(object, key, stacked);\n    return;\n  }\n  var newValue = customizer\n    ? customizer(objValue, srcValue, (key + ''), object, source, stack)\n    : undefined;\n\n  var isCommon = newValue === undefined;\n\n  if (isCommon) {\n    var isArr = isArray(srcValue),\n        isBuff = !isArr && isBuffer(srcValue),\n        isTyped = !isArr && !isBuff && isTypedArray(srcValue);\n\n    newValue = srcValue;\n    if (isArr || isBuff || isTyped) {\n      if (isArray(objValue)) {\n        newValue = objValue;\n      }\n      else if (isArrayLikeObject(objValue)) {\n        newValue = copyArray(objValue);\n      }\n      else if (isBuff) {\n        isCommon = false;\n        newValue = cloneBuffer(srcValue, true);\n      }\n      else if (isTyped) {\n        isCommon = false;\n        newValue = cloneTypedArray(srcValue, true);\n      }\n      else {\n        newValue = [];\n      }\n    }\n    else if (isPlainObject(srcValue) || isArguments(srcValue)) {\n      newValue = objValue;\n      if (isArguments(objValue)) {\n        newValue = toPlainObject(objValue);\n      }\n      else if (!isObject(objValue) || isFunction(objValue)) {\n        newValue = initCloneObject(srcValue);\n      }\n    }\n    else {\n      isCommon = false;\n    }\n  }\n  if (isCommon) {\n    // Recursively merge objects and arrays (susceptible to call stack limits).\n    stack.set(srcValue, newValue);\n    mergeFunc(newValue, srcValue, srcIndex, customizer, stack);\n    stack['delete'](srcValue);\n  }\n  assignMergeValue(object, key, newValue);\n}\n\nexport default baseMergeDeep;\n","import Stack from './_Stack.js';\nimport assignMergeValue from './_assignMergeValue.js';\nimport baseFor from './_baseFor.js';\nimport baseMergeDeep from './_baseMergeDeep.js';\nimport isObject from './isObject.js';\nimport keysIn from './keysIn.js';\nimport safeGet from './_safeGet.js';\n\n/**\n * The base implementation of `_.merge` without support for multiple sources.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} [customizer] The function to customize merged values.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n */\nfunction baseMerge(object, source, srcIndex, customizer, stack) {\n  if (object === source) {\n    return;\n  }\n  baseFor(source, function(srcValue, key) {\n    stack || (stack = new Stack);\n    if (isObject(srcValue)) {\n      baseMergeDeep(object, source, key, srcIndex, baseMerge, customizer, stack);\n    }\n    else {\n      var newValue = customizer\n        ? customizer(safeGet(object, key), srcValue, (key + ''), object, source, stack)\n        : undefined;\n\n      if (newValue === undefined) {\n        newValue = srcValue;\n      }\n      assignMergeValue(object, key, newValue);\n    }\n  }, keysIn);\n}\n\nexport default baseMerge;\n","import identity from './identity.js';\nimport overRest from './_overRest.js';\nimport setToString from './_setToString.js';\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  return setToString(overRest(func, start, identity), func + '');\n}\n\nexport default baseRest;\n","import eq from './eq.js';\nimport isArrayLike from './isArrayLike.js';\nimport isIndex from './_isIndex.js';\nimport isObject from './isObject.js';\n\n/**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n *  else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n        ? (isArrayLike(object) && isIndex(index, object.length))\n        : (type == 'string' && index in object)\n      ) {\n    return eq(object[index], value);\n  }\n  return false;\n}\n\nexport default isIterateeCall;\n","import baseRest from './_baseRest.js';\nimport isIterateeCall from './_isIterateeCall.js';\n\n/**\n * Creates a function like `_.assign`.\n *\n * @private\n * @param {Function} assigner The function to assign values.\n * @returns {Function} Returns the new assigner function.\n */\nfunction createAssigner(assigner) {\n  return baseRest(function(object, sources) {\n    var index = -1,\n        length = sources.length,\n        customizer = length > 1 ? sources[length - 1] : undefined,\n        guard = length > 2 ? sources[2] : undefined;\n\n    customizer = (assigner.length > 3 && typeof customizer == 'function')\n      ? (length--, customizer)\n      : undefined;\n\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n      customizer = length < 3 ? undefined : customizer;\n      length = 1;\n    }\n    object = Object(object);\n    while (++index < length) {\n      var source = sources[index];\n      if (source) {\n        assigner(object, source, index, customizer);\n      }\n    }\n    return object;\n  });\n}\n\nexport default createAssigner;\n","import baseMerge from './_baseMerge.js';\nimport createAssigner from './_createAssigner.js';\n\n/**\n * This method is like `_.assign` except that it recursively merges own and\n * inherited enumerable string keyed properties of source objects into the\n * destination object. Source properties that resolve to `undefined` are\n * skipped if a destination value exists. Array and plain object properties\n * are merged recursively. Other objects and value types are overridden by\n * assignment. Source objects are applied from left to right. Subsequent\n * sources overwrite property assignments of previous sources.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 0.5.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @example\n *\n * var object = {\n *   'a': [{ 'b': 2 }, { 'd': 4 }]\n * };\n *\n * var other = {\n *   'a': [{ 'c': 3 }, { 'e': 5 }]\n * };\n *\n * _.merge(object, other);\n * // => { 'a': [{ 'b': 2, 'c': 3 }, { 'd': 4, 'e': 5 }] }\n */\nvar merge = createAssigner(function(object, source, srcIndex) {\n  baseMerge(object, source, srcIndex);\n});\n\nexport default merge;\n","import baseKeys from './_baseKeys.js';\nimport getTag from './_getTag.js';\nimport isArguments from './isArguments.js';\nimport isArray from './isArray.js';\nimport isArrayLike from './isArrayLike.js';\nimport isBuffer from './isBuffer.js';\nimport isPrototype from './_isPrototype.js';\nimport isTypedArray from './isTypedArray.js';\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    setTag = '[object Set]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if `value` is an empty object, collection, map, or set.\n *\n * Objects are considered empty if they have no own enumerable string keyed\n * properties.\n *\n * Array-like values such as `arguments` objects, arrays, buffers, strings, or\n * jQuery-like collections are considered empty if they have a `length` of `0`.\n * Similarly, maps and sets are considered empty if they have a `size` of `0`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is empty, else `false`.\n * @example\n *\n * _.isEmpty(null);\n * // => true\n *\n * _.isEmpty(true);\n * // => true\n *\n * _.isEmpty(1);\n * // => true\n *\n * _.isEmpty([1, 2, 3]);\n * // => false\n *\n * _.isEmpty({ 'a': 1 });\n * // => false\n */\nfunction isEmpty(value) {\n  if (value == null) {\n    return true;\n  }\n  if (isArrayLike(value) &&\n      (isArray(value) || typeof value == 'string' || typeof value.splice == 'function' ||\n        isBuffer(value) || isTypedArray(value) || isArguments(value))) {\n    return !value.length;\n  }\n  var tag = getTag(value);\n  if (tag == mapTag || tag == setTag) {\n    return !value.size;\n  }\n  if (isPrototype(value)) {\n    return !baseKeys(value).length;\n  }\n  for (var key in value) {\n    if (hasOwnProperty.call(value, key)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexport default isEmpty;\n","import copyObject from './_copyObject.js';\nimport keys from './keys.js';\n\n/**\n * The base implementation of `_.assign` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return object && copyObject(source, keys(source), object);\n}\n\nexport default baseAssign;\n","import copyObject from './_copyObject.js';\nimport keysIn from './keysIn.js';\n\n/**\n * The base implementation of `_.assignIn` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssignIn(object, source) {\n  return object && copyObject(source, keysIn(source), object);\n}\n\nexport default baseAssignIn;\n","import copyObject from './_copyObject.js';\nimport getSymbols from './_getSymbols.js';\n\n/**\n * Copies own symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbols(source, object) {\n  return copyObject(source, getSymbols(source), object);\n}\n\nexport default copySymbols;\n","import arrayPush from './_arrayPush.js';\nimport getPrototype from './_getPrototype.js';\nimport getSymbols from './_getSymbols.js';\nimport stubArray from './stubArray.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own and inherited enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbolsIn = !nativeGetSymbols ? stubArray : function(object) {\n  var result = [];\n  while (object) {\n    arrayPush(result, getSymbols(object));\n    object = getPrototype(object);\n  }\n  return result;\n};\n\nexport default getSymbolsIn;\n","import copyObject from './_copyObject.js';\nimport getSymbolsIn from './_getSymbolsIn.js';\n\n/**\n * Copies own and inherited symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbolsIn(source, object) {\n  return copyObject(source, getSymbolsIn(source), object);\n}\n\nexport default copySymbolsIn;\n","import baseGetAllKeys from './_baseGetAllKeys.js';\nimport getSymbolsIn from './_getSymbolsIn.js';\nimport keysIn from './keysIn.js';\n\n/**\n * Creates an array of own and inherited enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeysIn(object) {\n  return baseGetAllKeys(object, keysIn, getSymbolsIn);\n}\n\nexport default getAllKeysIn;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = new array.constructor(length);\n\n  // Add properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\nexport default initCloneArray;\n","import cloneArrayBuffer from './_cloneArrayBuffer.js';\n\n/**\n * Creates a clone of `dataView`.\n *\n * @private\n * @param {Object} dataView The data view to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned data view.\n */\nfunction cloneDataView(dataView, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n}\n\nexport default cloneDataView;\n","/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/**\n * Creates a clone of `regexp`.\n *\n * @private\n * @param {Object} regexp The regexp to clone.\n * @returns {Object} Returns the cloned regexp.\n */\nfunction cloneRegExp(regexp) {\n  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n  result.lastIndex = regexp.lastIndex;\n  return result;\n}\n\nexport default cloneRegExp;\n","import Symbol from './_Symbol.js';\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a clone of the `symbol` object.\n *\n * @private\n * @param {Object} symbol The symbol object to clone.\n * @returns {Object} Returns the cloned symbol object.\n */\nfunction cloneSymbol(symbol) {\n  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n}\n\nexport default cloneSymbol;\n","import cloneArrayBuffer from './_cloneArrayBuffer.js';\nimport cloneDataView from './_cloneDataView.js';\nimport cloneRegExp from './_cloneRegExp.js';\nimport cloneSymbol from './_cloneSymbol.js';\nimport cloneTypedArray from './_cloneTypedArray.js';\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Initializes an object clone based on its `toStringTag`.\n *\n * **Note:** This function only supports cloning values with tags of\n * `Boolean`, `Date`, `Error`, `Map`, `Number`, `RegExp`, `Set`, or `String`.\n *\n * @private\n * @param {Object} object The object to clone.\n * @param {string} tag The `toStringTag` of the object to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneByTag(object, tag, isDeep) {\n  var Ctor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag:\n      return cloneArrayBuffer(object);\n\n    case boolTag:\n    case dateTag:\n      return new Ctor(+object);\n\n    case dataViewTag:\n      return cloneDataView(object, isDeep);\n\n    case float32Tag: case float64Tag:\n    case int8Tag: case int16Tag: case int32Tag:\n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n      return cloneTypedArray(object, isDeep);\n\n    case mapTag:\n      return new Ctor;\n\n    case numberTag:\n    case stringTag:\n      return new Ctor(object);\n\n    case regexpTag:\n      return cloneRegExp(object);\n\n    case setTag:\n      return new Ctor;\n\n    case symbolTag:\n      return cloneSymbol(object);\n  }\n}\n\nexport default initCloneByTag;\n","import getTag from './_getTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]';\n\n/**\n * The base implementation of `_.isMap` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n */\nfunction baseIsMap(value) {\n  return isObjectLike(value) && getTag(value) == mapTag;\n}\n\nexport default baseIsMap;\n","import baseIsMap from './_baseIsMap.js';\nimport baseUnary from './_baseUnary.js';\nimport nodeUtil from './_nodeUtil.js';\n\n/* Node.js helper references. */\nvar nodeIsMap = nodeUtil && nodeUtil.isMap;\n\n/**\n * Checks if `value` is classified as a `Map` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n * @example\n *\n * _.isMap(new Map);\n * // => true\n *\n * _.isMap(new WeakMap);\n * // => false\n */\nvar isMap = nodeIsMap ? baseUnary(nodeIsMap) : baseIsMap;\n\nexport default isMap;\n","import getTag from './_getTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar setTag = '[object Set]';\n\n/**\n * The base implementation of `_.isSet` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n */\nfunction baseIsSet(value) {\n  return isObjectLike(value) && getTag(value) == setTag;\n}\n\nexport default baseIsSet;\n","import baseIsSet from './_baseIsSet.js';\nimport baseUnary from './_baseUnary.js';\nimport nodeUtil from './_nodeUtil.js';\n\n/* Node.js helper references. */\nvar nodeIsSet = nodeUtil && nodeUtil.isSet;\n\n/**\n * Checks if `value` is classified as a `Set` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n * @example\n *\n * _.isSet(new Set);\n * // => true\n *\n * _.isSet(new WeakSet);\n * // => false\n */\nvar isSet = nodeIsSet ? baseUnary(nodeIsSet) : baseIsSet;\n\nexport default isSet;\n","import Stack from './_Stack.js';\nimport arrayEach from './_arrayEach.js';\nimport assignValue from './_assignValue.js';\nimport baseAssign from './_baseAssign.js';\nimport baseAssignIn from './_baseAssignIn.js';\nimport cloneBuffer from './_cloneBuffer.js';\nimport copyArray from './_copyArray.js';\nimport copySymbols from './_copySymbols.js';\nimport copySymbolsIn from './_copySymbolsIn.js';\nimport getAllKeys from './_getAllKeys.js';\nimport getAllKeysIn from './_getAllKeysIn.js';\nimport getTag from './_getTag.js';\nimport initCloneArray from './_initCloneArray.js';\nimport initCloneByTag from './_initCloneByTag.js';\nimport initCloneObject from './_initCloneObject.js';\nimport isArray from './isArray.js';\nimport isBuffer from './isBuffer.js';\nimport isMap from './isMap.js';\nimport isObject from './isObject.js';\nimport isSet from './isSet.js';\nimport keys from './keys.js';\nimport keysIn from './keysIn.js';\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_FLAT_FLAG = 2,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\ncloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\ncloneableTags[boolTag] = cloneableTags[dateTag] =\ncloneableTags[float32Tag] = cloneableTags[float64Tag] =\ncloneableTags[int8Tag] = cloneableTags[int16Tag] =\ncloneableTags[int32Tag] = cloneableTags[mapTag] =\ncloneableTags[numberTag] = cloneableTags[objectTag] =\ncloneableTags[regexpTag] = cloneableTags[setTag] =\ncloneableTags[stringTag] = cloneableTags[symbolTag] =\ncloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\ncloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\ncloneableTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n * traversed objects.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Deep clone\n *  2 - Flatten inherited properties\n *  4 - Clone symbols\n * @param {Function} [customizer] The function to customize cloning.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The parent object of `value`.\n * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, bitmask, customizer, key, object, stack) {\n  var result,\n      isDeep = bitmask & CLONE_DEEP_FLAG,\n      isFlat = bitmask & CLONE_FLAT_FLAG,\n      isFull = bitmask & CLONE_SYMBOLS_FLAG;\n\n  if (customizer) {\n    result = object ? customizer(value, key, object, stack) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return copyArray(value, result);\n    }\n  } else {\n    var tag = getTag(value),\n        isFunc = tag == funcTag || tag == genTag;\n\n    if (isBuffer(value)) {\n      return cloneBuffer(value, isDeep);\n    }\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n      result = (isFlat || isFunc) ? {} : initCloneObject(value);\n      if (!isDeep) {\n        return isFlat\n          ? copySymbolsIn(value, baseAssignIn(result, value))\n          : copySymbols(value, baseAssign(result, value));\n      }\n    } else {\n      if (!cloneableTags[tag]) {\n        return object ? value : {};\n      }\n      result = initCloneByTag(value, tag, isDeep);\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stack || (stack = new Stack);\n  var stacked = stack.get(value);\n  if (stacked) {\n    return stacked;\n  }\n  stack.set(value, result);\n\n  if (isSet(value)) {\n    value.forEach(function(subValue) {\n      result.add(baseClone(subValue, bitmask, customizer, subValue, value, stack));\n    });\n  } else if (isMap(value)) {\n    value.forEach(function(subValue, key) {\n      result.set(key, baseClone(subValue, bitmask, customizer, key, value, stack));\n    });\n  }\n\n  var keysFunc = isFull\n    ? (isFlat ? getAllKeysIn : getAllKeys)\n    : (isFlat ? keysIn : keys);\n\n  var props = isArr ? undefined : keysFunc(value);\n  arrayEach(props || value, function(subValue, key) {\n    if (props) {\n      key = subValue;\n      subValue = value[key];\n    }\n    // Recursively populate clone (susceptible to call stack limits).\n    assignValue(result, key, baseClone(subValue, bitmask, customizer, key, value, stack));\n  });\n  return result;\n}\n\nexport default baseClone;\n","import baseClone from './_baseClone.js';\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_SYMBOLS_FLAG = 4;\n\n/**\n * Creates a shallow clone of `value`.\n *\n * **Note:** This method is loosely based on the\n * [structured clone algorithm](https://mdn.io/Structured_clone_algorithm)\n * and supports cloning arrays, array buffers, booleans, date objects, maps,\n * numbers, `Object` objects, regexes, sets, strings, symbols, and typed\n * arrays. The own enumerable properties of `arguments` objects are cloned\n * as plain objects. An empty object is returned for uncloneable values such\n * as error objects, functions, DOM nodes, and WeakMaps.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to clone.\n * @returns {*} Returns the cloned value.\n * @see _.cloneDeep\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var shallow = _.clone(objects);\n * console.log(shallow[0] === objects[0]);\n * // => true\n */\nfunction clone(value) {\n  return baseClone(value, CLONE_SYMBOLS_FLAG);\n}\n\nexport default clone;\n","import baseClone from './_baseClone.js';\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/**\n * This method is like `_.clone` except that it recursively clones `value`.\n *\n * @static\n * @memberOf _\n * @since 1.0.0\n * @category Lang\n * @param {*} value The value to recursively clone.\n * @returns {*} Returns the deep cloned value.\n * @see _.clone\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var deep = _.cloneDeep(objects);\n * console.log(deep[0] === objects[0]);\n * // => false\n */\nfunction cloneDeep(value) {\n  return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG);\n}\n\nexport default cloneDeep;\n","import baseRest from './_baseRest.js';\nimport eq from './eq.js';\nimport isIterateeCall from './_isIterateeCall.js';\nimport keysIn from './keysIn.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns own and inherited enumerable string keyed properties of source\n * objects to the destination object for all destination properties that\n * resolve to `undefined`. Source objects are applied from left to right.\n * Once a property is set, additional values of the same property are ignored.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @see _.defaultsDeep\n * @example\n *\n * _.defaults({ 'a': 1 }, { 'b': 2 }, { 'a': 3 });\n * // => { 'a': 1, 'b': 2 }\n */\nvar defaults = baseRest(function(object, sources) {\n  object = Object(object);\n\n  var index = -1;\n  var length = sources.length;\n  var guard = length > 2 ? sources[2] : undefined;\n\n  if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n    length = 1;\n  }\n\n  while (++index < length) {\n    var source = sources[index];\n    var props = keysIn(source);\n    var propsIndex = -1;\n    var propsLength = props.length;\n\n    while (++propsIndex < propsLength) {\n      var key = props[propsIndex];\n      var value = object[key];\n\n      if (value === undefined ||\n          (eq(value, objectProto[key]) && !hasOwnProperty.call(object, key))) {\n        object[key] = source[key];\n      }\n    }\n  }\n\n  return object;\n});\n\nexport default defaults;\n","import baseMerge from './_baseMerge.js';\nimport isObject from './isObject.js';\n\n/**\n * Used by `_.defaultsDeep` to customize its `_.merge` use to merge source\n * objects into destination objects that are passed thru.\n *\n * @private\n * @param {*} objValue The destination value.\n * @param {*} srcValue The source value.\n * @param {string} key The key of the property to merge.\n * @param {Object} object The parent object of `objValue`.\n * @param {Object} source The parent object of `srcValue`.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n * @returns {*} Returns the value to assign.\n */\nfunction customDefaultsMerge(objValue, srcValue, key, object, source, stack) {\n  if (isObject(objValue) && isObject(srcValue)) {\n    // Recursively merge objects and arrays (susceptible to call stack limits).\n    stack.set(srcValue, objValue);\n    baseMerge(objValue, srcValue, undefined, customDefaultsMerge, stack);\n    stack['delete'](srcValue);\n  }\n  return objValue;\n}\n\nexport default customDefaultsMerge;\n","import baseMerge from './_baseMerge.js';\nimport createAssigner from './_createAssigner.js';\n\n/**\n * This method is like `_.merge` except that it accepts `customizer` which\n * is invoked to produce the merged values of the destination and source\n * properties. If `customizer` returns `undefined`, merging is handled by the\n * method instead. The `customizer` is invoked with six arguments:\n * (objValue, srcValue, key, object, source, stack).\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} sources The source objects.\n * @param {Function} customizer The function to customize assigned values.\n * @returns {Object} Returns `object`.\n * @example\n *\n * function customizer(objValue, srcValue) {\n *   if (_.isArray(objValue)) {\n *     return objValue.concat(srcValue);\n *   }\n * }\n *\n * var object = { 'a': [1], 'b': [2] };\n * var other = { 'a': [3], 'b': [4] };\n *\n * _.mergeWith(object, other, customizer);\n * // => { 'a': [1, 3], 'b': [2, 4] }\n */\nvar mergeWith = createAssigner(function(object, source, srcIndex, customizer) {\n  baseMerge(object, source, srcIndex, customizer);\n});\n\nexport default mergeWith;\n","import apply from './_apply.js';\nimport baseRest from './_baseRest.js';\nimport customDefaultsMerge from './_customDefaultsMerge.js';\nimport mergeWith from './mergeWith.js';\n\n/**\n * This method is like `_.defaults` except that it recursively assigns\n * default properties.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 3.10.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @see _.defaults\n * @example\n *\n * _.defaultsDeep({ 'a': { 'b': 2 } }, { 'a': { 'b': 1, 'c': 3 } });\n * // => { 'a': { 'b': 2, 'c': 3 } }\n */\nvar defaultsDeep = baseRest(function(args) {\n  args.push(undefined, customDefaultsMerge);\n  return apply(mergeWith, undefined, args);\n});\n\nexport default defaultsDeep;\n","/**\n * @see https://www.typescriptlang.org/docs/handbook/mixins.html\n */\nexport function applyMixins(derivedCtor, ...baseCtors) {\n    baseCtors.forEach((baseCtor) => {\n        Object.getOwnPropertyNames(baseCtor.prototype).forEach((name) => {\n            if (name !== 'constructor') {\n                Object.defineProperty(derivedCtor.prototype, name, Object.getOwnPropertyDescriptor(baseCtor.prototype, name));\n            }\n        });\n    });\n}\n//# sourceMappingURL=mixins.js.map","const extendStatics = Object.setPrototypeOf ||\n    ({ __proto__: [] } instanceof Array &&\n        function (d, b) {\n            d.__proto__ = b; // eslint-disable-line no-proto\n        }) ||\n    function (d, b) {\n        // eslint-disable-next-line no-restricted-syntax\n        for (const p in b) {\n            if (Object.prototype.hasOwnProperty.call(b, p)) {\n                d[p] = b[p];\n            }\n        }\n    };\n/**\n * @see https://github.com/microsoft/TypeScript/blob/5c85febb0ce9d6088cbe9b09cb42f73f9ee8ea05/src/compiler/transformers/es2015.ts#L4309\n */\n// eslint-disable-next-line\nexport function inherit(cls, base) {\n    extendStatics(cls, base);\n    function tmp() {\n        this.constructor = cls;\n    }\n    cls.prototype =\n        base === null\n            ? Object.create(base)\n            : ((tmp.prototype = base.prototype), new tmp());\n}\nclass A {\n}\nconst isNativeClass = /^\\s*class\\s+/.test(`${A}`) || /^\\s*class\\s*\\{/.test(`${class {\n}}`);\n/**\n * Extends class with specified class name.\n */\nexport function createClass(className, base) {\n    let cls;\n    if (isNativeClass) {\n        cls = class extends base {\n        };\n    }\n    else {\n        cls = function () {\n            return base.apply(this, arguments); // eslint-disable-line\n        };\n        inherit(cls, base);\n    }\n    Object.defineProperty(cls, 'name', { value: className });\n    return cls;\n}\n//# sourceMappingURL=inherit.js.map","export { has, pick, merge, isEqual, isEmpty, isObject, isPlainObject, clone, cloneDeep, defaults, defaultsDeep, } from 'lodash-es';\nexport * from './mixins';\nexport * from './inherit';\nexport function ensure(value, defaultValue) {\n    return value != null ? value : defaultValue;\n}\nexport function getValue(obj, key, defaultValue) {\n    const value = obj != null ? obj[key] : null;\n    return defaultValue !== undefined ? ensure(value, defaultValue) : value;\n}\nexport function getNumber(obj, key, defaultValue) {\n    let value = obj != null ? obj[key] : null;\n    if (value == null) {\n        return defaultValue;\n    }\n    value = +value;\n    if (Number.isNaN(value) || !Number.isFinite(value)) {\n        return defaultValue;\n    }\n    return value;\n}\nexport function getBoolean(obj, key, defaultValue) {\n    const value = obj != null ? obj[key] : null;\n    if (value == null) {\n        return defaultValue;\n    }\n    return !!value;\n}\nexport function isMaliciousProp(prop) {\n    return prop === '__proto__';\n}\nexport function getByPath(obj, path, delimiter = '/') {\n    let ret;\n    const keys = Array.isArray(path) ? path : path.split(delimiter);\n    if (keys.length) {\n        ret = obj;\n        while (keys.length) {\n            const key = keys.shift();\n            if (Object(ret) === ret && key && key in ret) {\n                ret = ret[key];\n            }\n            else {\n                return undefined;\n            }\n        }\n    }\n    return ret;\n}\nexport function setByPath(obj, path, value, delimiter = '/') {\n    const keys = Array.isArray(path) ? path : path.split(delimiter);\n    const lastKey = keys.pop();\n    if (lastKey && !isMaliciousProp(lastKey)) {\n        let diver = obj;\n        keys.forEach((key) => {\n            if (!isMaliciousProp(key)) {\n                if (diver[key] == null) {\n                    diver[key] = {};\n                }\n                diver = diver[key];\n            }\n        });\n        diver[lastKey] = value;\n    }\n    return obj;\n}\nexport function unsetByPath(obj, path, delimiter = '/') {\n    const keys = Array.isArray(path) ? path.slice() : path.split(delimiter);\n    const propertyToRemove = keys.pop();\n    if (propertyToRemove) {\n        if (keys.length > 0) {\n            const parent = getByPath(obj, keys);\n            if (parent) {\n                delete parent[propertyToRemove];\n            }\n        }\n        else {\n            delete obj[propertyToRemove];\n        }\n    }\n    return obj;\n}\n// eslint-disable-next-line default-param-last\nexport function flatten(obj, delim = '/', stop) {\n    const ret = {};\n    Object.keys(obj).forEach((key) => {\n        const val = obj[key];\n        let deep = typeof val === 'object' || Array.isArray(val);\n        if (deep && stop && stop(val)) {\n            deep = false;\n        }\n        if (deep) {\n            const flatObject = flatten(val, delim, stop);\n            Object.keys(flatObject).forEach((flatKey) => {\n                ret[key + delim + flatKey] = flatObject[flatKey];\n            });\n        }\n        else {\n            ret[key] = val;\n        }\n    });\n    // eslint-disable-next-line no-restricted-syntax\n    for (const key in obj) {\n        if (!Object.prototype.hasOwnProperty.call(obj, key)) {\n            continue;\n        }\n    }\n    return ret;\n}\n//# sourceMappingURL=object.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Events } from '../event';\nimport { ObjectExt } from '../object';\nimport { Disposable } from './disposable';\nexport class Basecoat extends Events {\n    dispose() {\n        this.off();\n    }\n}\n__decorate([\n    Disposable.dispose()\n], Basecoat.prototype, \"dispose\", null);\n(function (Basecoat) {\n    Basecoat.dispose = Disposable.dispose;\n})(Basecoat || (Basecoat = {}));\nObjectExt.applyMixins(Basecoat, Disposable);\n//# sourceMappingURL=basecoat.js.map","/**\n * The base implementation of `_.findIndex` and `_.findLastIndex` without\n * support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} predicate The function invoked per iteration.\n * @param {number} fromIndex The index to search from.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseFindIndex(array, predicate, fromIndex, fromRight) {\n  var length = array.length,\n      index = fromIndex + (fromRight ? 1 : -1);\n\n  while ((fromRight ? index-- : ++index < length)) {\n    if (predicate(array[index], index, array)) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nexport default baseFindIndex;\n","/**\n * The base implementation of `_.isNaN` without support for number objects.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.\n */\nfunction baseIsNaN(value) {\n  return value !== value;\n}\n\nexport default baseIsNaN;\n","/**\n * A specialized version of `_.indexOf` which performs strict equality\n * comparisons of values, i.e. `===`.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction strictIndexOf(array, value, fromIndex) {\n  var index = fromIndex - 1,\n      length = array.length;\n\n  while (++index < length) {\n    if (array[index] === value) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nexport default strictIndexOf;\n","import baseFindIndex from './_baseFindIndex.js';\nimport baseIsNaN from './_baseIsNaN.js';\nimport strictIndexOf from './_strictIndexOf.js';\n\n/**\n * The base implementation of `_.indexOf` without `fromIndex` bounds checks.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseIndexOf(array, value, fromIndex) {\n  return value === value\n    ? strictIndexOf(array, value, fromIndex)\n    : baseFindIndex(array, baseIsNaN, fromIndex);\n}\n\nexport default baseIndexOf;\n","import baseIndexOf from './_baseIndexOf.js';\n\n/**\n * A specialized version of `_.includes` for arrays without support for\n * specifying an index to search from.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludes(array, value) {\n  var length = array == null ? 0 : array.length;\n  return !!length && baseIndexOf(array, value, 0) > -1;\n}\n\nexport default arrayIncludes;\n","/**\n * This function is like `arrayIncludes` except that it accepts a comparator.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @param {Function} comparator The comparator invoked per element.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludesWith(array, value, comparator) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (comparator(value, array[index])) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport default arrayIncludesWith;\n","/**\n * This method returns `undefined`.\n *\n * @static\n * @memberOf _\n * @since 2.3.0\n * @category Util\n * @example\n *\n * _.times(2, _.noop);\n * // => [undefined, undefined]\n */\nfunction noop() {\n  // No operation performed.\n}\n\nexport default noop;\n","import Set from './_Set.js';\nimport noop from './noop.js';\nimport setToArray from './_setToArray.js';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Creates a set object of `values`.\n *\n * @private\n * @param {Array} values The values to add to the set.\n * @returns {Object} Returns the new set.\n */\nvar createSet = !(Set && (1 / setToArray(new Set([,-0]))[1]) == INFINITY) ? noop : function(values) {\n  return new Set(values);\n};\n\nexport default createSet;\n","import SetCache from './_SetCache.js';\nimport arrayIncludes from './_arrayIncludes.js';\nimport arrayIncludesWith from './_arrayIncludesWith.js';\nimport cacheHas from './_cacheHas.js';\nimport createSet from './_createSet.js';\nimport setToArray from './_setToArray.js';\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * The base implementation of `_.uniqBy` without support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new duplicate free array.\n */\nfunction baseUniq(array, iteratee, comparator) {\n  var index = -1,\n      includes = arrayIncludes,\n      length = array.length,\n      isCommon = true,\n      result = [],\n      seen = result;\n\n  if (comparator) {\n    isCommon = false;\n    includes = arrayIncludesWith;\n  }\n  else if (length >= LARGE_ARRAY_SIZE) {\n    var set = iteratee ? null : createSet(array);\n    if (set) {\n      return setToArray(set);\n    }\n    isCommon = false;\n    includes = cacheHas;\n    seen = new SetCache;\n  }\n  else {\n    seen = iteratee ? [] : result;\n  }\n  outer:\n  while (++index < length) {\n    var value = array[index],\n        computed = iteratee ? iteratee(value) : value;\n\n    value = (comparator || value !== 0) ? value : 0;\n    if (isCommon && computed === computed) {\n      var seenIndex = seen.length;\n      while (seenIndex--) {\n        if (seen[seenIndex] === computed) {\n          continue outer;\n        }\n      }\n      if (iteratee) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n    else if (!includes(seen, computed, comparator)) {\n      if (seen !== result) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n  }\n  return result;\n}\n\nexport default baseUniq;\n","import baseUniq from './_baseUniq.js';\n\n/**\n * Creates a duplicate-free version of an array, using\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons, in which only the first occurrence of each element\n * is kept. The order of result values is determined by the order they occur\n * in the array.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @returns {Array} Returns the new duplicate free array.\n * @example\n *\n * _.uniq([2, 1, 2]);\n * // => [2, 1]\n */\nfunction uniq(array) {\n  return (array && array.length) ? baseUniq(array) : [];\n}\n\nexport default uniq;\n","import baseFlatten from './_baseFlatten.js';\nimport baseRest from './_baseRest.js';\nimport baseUniq from './_baseUniq.js';\nimport isArrayLikeObject from './isArrayLikeObject.js';\n\n/**\n * Creates an array of unique values, in order, from all given arrays using\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {...Array} [arrays] The arrays to inspect.\n * @returns {Array} Returns the new array of combined values.\n * @example\n *\n * _.union([2], [1, 2]);\n * // => [2, 1]\n */\nvar union = baseRest(function(arrays) {\n  return baseUniq(baseFlatten(arrays, 1, isArrayLikeObject, true));\n});\n\nexport default union;\n","import isSymbol from './isSymbol.js';\n\n/** Used as references for the maximum length and index of an array. */\nvar MAX_ARRAY_LENGTH = 4294967295,\n    MAX_ARRAY_INDEX = MAX_ARRAY_LENGTH - 1;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeFloor = Math.floor,\n    nativeMin = Math.min;\n\n/**\n * The base implementation of `_.sortedIndexBy` and `_.sortedLastIndexBy`\n * which invokes `iteratee` for `value` and each element of `array` to compute\n * their sort ranking. The iteratee is invoked with one argument; (value).\n *\n * @private\n * @param {Array} array The sorted array to inspect.\n * @param {*} value The value to evaluate.\n * @param {Function} iteratee The iteratee invoked per element.\n * @param {boolean} [retHighest] Specify returning the highest qualified index.\n * @returns {number} Returns the index at which `value` should be inserted\n *  into `array`.\n */\nfunction baseSortedIndexBy(array, value, iteratee, retHighest) {\n  var low = 0,\n      high = array == null ? 0 : array.length;\n  if (high === 0) {\n    return 0;\n  }\n\n  value = iteratee(value);\n  var valIsNaN = value !== value,\n      valIsNull = value === null,\n      valIsSymbol = isSymbol(value),\n      valIsUndefined = value === undefined;\n\n  while (low < high) {\n    var mid = nativeFloor((low + high) / 2),\n        computed = iteratee(array[mid]),\n        othIsDefined = computed !== undefined,\n        othIsNull = computed === null,\n        othIsReflexive = computed === computed,\n        othIsSymbol = isSymbol(computed);\n\n    if (valIsNaN) {\n      var setLow = retHighest || othIsReflexive;\n    } else if (valIsUndefined) {\n      setLow = othIsReflexive && (retHighest || othIsDefined);\n    } else if (valIsNull) {\n      setLow = othIsReflexive && othIsDefined && (retHighest || !othIsNull);\n    } else if (valIsSymbol) {\n      setLow = othIsReflexive && othIsDefined && !othIsNull && (retHighest || !othIsSymbol);\n    } else if (othIsNull || othIsSymbol) {\n      setLow = false;\n    } else {\n      setLow = retHighest ? (computed <= value) : (computed < value);\n    }\n    if (setLow) {\n      low = mid + 1;\n    } else {\n      high = mid;\n    }\n  }\n  return nativeMin(high, MAX_ARRAY_INDEX);\n}\n\nexport default baseSortedIndexBy;\n","import baseSortedIndexBy from './_baseSortedIndexBy.js';\nimport identity from './identity.js';\nimport isSymbol from './isSymbol.js';\n\n/** Used as references for the maximum length and index of an array. */\nvar MAX_ARRAY_LENGTH = 4294967295,\n    HALF_MAX_ARRAY_LENGTH = MAX_ARRAY_LENGTH >>> 1;\n\n/**\n * The base implementation of `_.sortedIndex` and `_.sortedLastIndex` which\n * performs a binary search of `array` to determine the index at which `value`\n * should be inserted into `array` in order to maintain its sort order.\n *\n * @private\n * @param {Array} array The sorted array to inspect.\n * @param {*} value The value to evaluate.\n * @param {boolean} [retHighest] Specify returning the highest qualified index.\n * @returns {number} Returns the index at which `value` should be inserted\n *  into `array`.\n */\nfunction baseSortedIndex(array, value, retHighest) {\n  var low = 0,\n      high = array == null ? low : array.length;\n\n  if (typeof value == 'number' && value === value && high <= HALF_MAX_ARRAY_LENGTH) {\n    while (low < high) {\n      var mid = (low + high) >>> 1,\n          computed = array[mid];\n\n      if (computed !== null && !isSymbol(computed) &&\n          (retHighest ? (computed <= value) : (computed < value))) {\n        low = mid + 1;\n      } else {\n        high = mid;\n      }\n    }\n    return high;\n  }\n  return baseSortedIndexBy(array, value, identity, retHighest);\n}\n\nexport default baseSortedIndex;\n","import baseSortedIndex from './_baseSortedIndex.js';\n\n/**\n * Uses a binary search to determine the lowest index at which `value`\n * should be inserted into `array` in order to maintain its sort order.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The sorted array to inspect.\n * @param {*} value The value to evaluate.\n * @returns {number} Returns the index at which `value` should be inserted\n *  into `array`.\n * @example\n *\n * _.sortedIndex([30, 50], 40);\n * // => 1\n */\nfunction sortedIndex(array, value) {\n  return baseSortedIndex(array, value);\n}\n\nexport default sortedIndex;\n","import Stack from './_Stack.js';\nimport baseIsEqual from './_baseIsEqual.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * The base implementation of `_.isMatch` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to inspect.\n * @param {Object} source The object of property values to match.\n * @param {Array} matchData The property names, values, and compare flags to match.\n * @param {Function} [customizer] The function to customize comparisons.\n * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n */\nfunction baseIsMatch(object, source, matchData, customizer) {\n  var index = matchData.length,\n      length = index,\n      noCustomizer = !customizer;\n\n  if (object == null) {\n    return !length;\n  }\n  object = Object(object);\n  while (index--) {\n    var data = matchData[index];\n    if ((noCustomizer && data[2])\n          ? data[1] !== object[data[0]]\n          : !(data[0] in object)\n        ) {\n      return false;\n    }\n  }\n  while (++index < length) {\n    data = matchData[index];\n    var key = data[0],\n        objValue = object[key],\n        srcValue = data[1];\n\n    if (noCustomizer && data[2]) {\n      if (objValue === undefined && !(key in object)) {\n        return false;\n      }\n    } else {\n      var stack = new Stack;\n      if (customizer) {\n        var result = customizer(objValue, srcValue, key, object, source, stack);\n      }\n      if (!(result === undefined\n            ? baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG, customizer, stack)\n            : result\n          )) {\n        return false;\n      }\n    }\n  }\n  return true;\n}\n\nexport default baseIsMatch;\n","import isObject from './isObject.js';\n\n/**\n * Checks if `value` is suitable for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` if suitable for strict\n *  equality comparisons, else `false`.\n */\nfunction isStrictComparable(value) {\n  return value === value && !isObject(value);\n}\n\nexport default isStrictComparable;\n","import isStrictComparable from './_isStrictComparable.js';\nimport keys from './keys.js';\n\n/**\n * Gets the property names, values, and compare flags of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the match data of `object`.\n */\nfunction getMatchData(object) {\n  var result = keys(object),\n      length = result.length;\n\n  while (length--) {\n    var key = result[length],\n        value = object[key];\n\n    result[length] = [key, value, isStrictComparable(value)];\n  }\n  return result;\n}\n\nexport default getMatchData;\n","/**\n * A specialized version of `matchesProperty` for source values suitable\n * for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction matchesStrictComparable(key, srcValue) {\n  return function(object) {\n    if (object == null) {\n      return false;\n    }\n    return object[key] === srcValue &&\n      (srcValue !== undefined || (key in Object(object)));\n  };\n}\n\nexport default matchesStrictComparable;\n","import baseIsMatch from './_baseIsMatch.js';\nimport getMatchData from './_getMatchData.js';\nimport matchesStrictComparable from './_matchesStrictComparable.js';\n\n/**\n * The base implementation of `_.matches` which doesn't clone `source`.\n *\n * @private\n * @param {Object} source The object of property values to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatches(source) {\n  var matchData = getMatchData(source);\n  if (matchData.length == 1 && matchData[0][2]) {\n    return matchesStrictComparable(matchData[0][0], matchData[0][1]);\n  }\n  return function(object) {\n    return object === source || baseIsMatch(object, source, matchData);\n  };\n}\n\nexport default baseMatches;\n","import baseGet from './_baseGet.js';\n\n/**\n * Gets the value at `path` of `object`. If the resolved value is\n * `undefined`, the `defaultValue` is returned in its place.\n *\n * @static\n * @memberOf _\n * @since 3.7.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n * @returns {*} Returns the resolved value.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.get(object, 'a[0].b.c');\n * // => 3\n *\n * _.get(object, ['a', '0', 'b', 'c']);\n * // => 3\n *\n * _.get(object, 'a.b.c', 'default');\n * // => 'default'\n */\nfunction get(object, path, defaultValue) {\n  var result = object == null ? undefined : baseGet(object, path);\n  return result === undefined ? defaultValue : result;\n}\n\nexport default get;\n","import baseIsEqual from './_baseIsEqual.js';\nimport get from './get.js';\nimport hasIn from './hasIn.js';\nimport isKey from './_isKey.js';\nimport isStrictComparable from './_isStrictComparable.js';\nimport matchesStrictComparable from './_matchesStrictComparable.js';\nimport toKey from './_toKey.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * The base implementation of `_.matchesProperty` which doesn't clone `srcValue`.\n *\n * @private\n * @param {string} path The path of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatchesProperty(path, srcValue) {\n  if (isKey(path) && isStrictComparable(srcValue)) {\n    return matchesStrictComparable(toKey(path), srcValue);\n  }\n  return function(object) {\n    var objValue = get(object, path);\n    return (objValue === undefined && objValue === srcValue)\n      ? hasIn(object, path)\n      : baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG);\n  };\n}\n\nexport default baseMatchesProperty;\n","/**\n * The base implementation of `_.property` without support for deep paths.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction baseProperty(key) {\n  return function(object) {\n    return object == null ? undefined : object[key];\n  };\n}\n\nexport default baseProperty;\n","import baseGet from './_baseGet.js';\n\n/**\n * A specialized version of `baseProperty` which supports deep paths.\n *\n * @private\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction basePropertyDeep(path) {\n  return function(object) {\n    return baseGet(object, path);\n  };\n}\n\nexport default basePropertyDeep;\n","import baseProperty from './_baseProperty.js';\nimport basePropertyDeep from './_basePropertyDeep.js';\nimport isKey from './_isKey.js';\nimport toKey from './_toKey.js';\n\n/**\n * Creates a function that returns the value at `path` of a given object.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n * @example\n *\n * var objects = [\n *   { 'a': { 'b': 2 } },\n *   { 'a': { 'b': 1 } }\n * ];\n *\n * _.map(objects, _.property('a.b'));\n * // => [2, 1]\n *\n * _.map(_.sortBy(objects, _.property(['a', 'b'])), 'a.b');\n * // => [1, 2]\n */\nfunction property(path) {\n  return isKey(path) ? baseProperty(toKey(path)) : basePropertyDeep(path);\n}\n\nexport default property;\n","import baseMatches from './_baseMatches.js';\nimport baseMatchesProperty from './_baseMatchesProperty.js';\nimport identity from './identity.js';\nimport isArray from './isArray.js';\nimport property from './property.js';\n\n/**\n * The base implementation of `_.iteratee`.\n *\n * @private\n * @param {*} [value=_.identity] The value to convert to an iteratee.\n * @returns {Function} Returns the iteratee.\n */\nfunction baseIteratee(value) {\n  // Don't store the `typeof` result in a variable to avoid a JIT bug in Safari 9.\n  // See https://bugs.webkit.org/show_bug.cgi?id=156034 for more details.\n  if (typeof value == 'function') {\n    return value;\n  }\n  if (value == null) {\n    return identity;\n  }\n  if (typeof value == 'object') {\n    return isArray(value)\n      ? baseMatchesProperty(value[0], value[1])\n      : baseMatches(value);\n  }\n  return property(value);\n}\n\nexport default baseIteratee;\n","import baseIteratee from './_baseIteratee.js';\nimport baseSortedIndexBy from './_baseSortedIndexBy.js';\n\n/**\n * This method is like `_.sortedIndex` except that it accepts `iteratee`\n * which is invoked for `value` and each element of `array` to compute their\n * sort ranking. The iteratee is invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Array\n * @param {Array} array The sorted array to inspect.\n * @param {*} value The value to evaluate.\n * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n * @returns {number} Returns the index at which `value` should be inserted\n *  into `array`.\n * @example\n *\n * var objects = [{ 'x': 4 }, { 'x': 5 }];\n *\n * _.sortedIndexBy(objects, { 'x': 4 }, function(o) { return o.x; });\n * // => 0\n *\n * // The `_.property` iteratee shorthand.\n * _.sortedIndexBy(objects, { 'x': 4 }, 'x');\n * // => 0\n */\nfunction sortedIndexBy(array, value, iteratee) {\n  return baseSortedIndexBy(array, value, baseIteratee(iteratee, 2));\n}\n\nexport default sortedIndexBy;\n","import baseEach from './_baseEach.js';\nimport isArrayLike from './isArrayLike.js';\n\n/**\n * The base implementation of `_.map` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction baseMap(collection, iteratee) {\n  var index = -1,\n      result = isArrayLike(collection) ? Array(collection.length) : [];\n\n  baseEach(collection, function(value, key, collection) {\n    result[++index] = iteratee(value, key, collection);\n  });\n  return result;\n}\n\nexport default baseMap;\n","/**\n * The base implementation of `_.sortBy` which uses `comparer` to define the\n * sort order of `array` and replaces criteria objects with their corresponding\n * values.\n *\n * @private\n * @param {Array} array The array to sort.\n * @param {Function} comparer The function to define sort order.\n * @returns {Array} Returns `array`.\n */\nfunction baseSortBy(array, comparer) {\n  var length = array.length;\n\n  array.sort(comparer);\n  while (length--) {\n    array[length] = array[length].value;\n  }\n  return array;\n}\n\nexport default baseSortBy;\n","import isSymbol from './isSymbol.js';\n\n/**\n * Compares values to sort them in ascending order.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {number} Returns the sort order indicator for `value`.\n */\nfunction compareAscending(value, other) {\n  if (value !== other) {\n    var valIsDefined = value !== undefined,\n        valIsNull = value === null,\n        valIsReflexive = value === value,\n        valIsSymbol = isSymbol(value);\n\n    var othIsDefined = other !== undefined,\n        othIsNull = other === null,\n        othIsReflexive = other === other,\n        othIsSymbol = isSymbol(other);\n\n    if ((!othIsNull && !othIsSymbol && !valIsSymbol && value > other) ||\n        (valIsSymbol && othIsDefined && othIsReflexive && !othIsNull && !othIsSymbol) ||\n        (valIsNull && othIsDefined && othIsReflexive) ||\n        (!valIsDefined && othIsReflexive) ||\n        !valIsReflexive) {\n      return 1;\n    }\n    if ((!valIsNull && !valIsSymbol && !othIsSymbol && value < other) ||\n        (othIsSymbol && valIsDefined && valIsReflexive && !valIsNull && !valIsSymbol) ||\n        (othIsNull && valIsDefined && valIsReflexive) ||\n        (!othIsDefined && valIsReflexive) ||\n        !othIsReflexive) {\n      return -1;\n    }\n  }\n  return 0;\n}\n\nexport default compareAscending;\n","import compareAscending from './_compareAscending.js';\n\n/**\n * Used by `_.orderBy` to compare multiple properties of a value to another\n * and stable sort them.\n *\n * If `orders` is unspecified, all values are sorted in ascending order. Otherwise,\n * specify an order of \"desc\" for descending or \"asc\" for ascending sort order\n * of corresponding values.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {boolean[]|string[]} orders The order to sort by for each property.\n * @returns {number} Returns the sort order indicator for `object`.\n */\nfunction compareMultiple(object, other, orders) {\n  var index = -1,\n      objCriteria = object.criteria,\n      othCriteria = other.criteria,\n      length = objCriteria.length,\n      ordersLength = orders.length;\n\n  while (++index < length) {\n    var result = compareAscending(objCriteria[index], othCriteria[index]);\n    if (result) {\n      if (index >= ordersLength) {\n        return result;\n      }\n      var order = orders[index];\n      return result * (order == 'desc' ? -1 : 1);\n    }\n  }\n  // Fixes an `Array#sort` bug in the JS engine embedded in Adobe applications\n  // that causes it, under certain circumstances, to provide the same value for\n  // `object` and `other`. See https://github.com/jashkenas/underscore/pull/1247\n  // for more details.\n  //\n  // This also ensures a stable sort in V8 and other engines.\n  // See https://bugs.chromium.org/p/v8/issues/detail?id=90 for more details.\n  return object.index - other.index;\n}\n\nexport default compareMultiple;\n","import arrayMap from './_arrayMap.js';\nimport baseGet from './_baseGet.js';\nimport baseIteratee from './_baseIteratee.js';\nimport baseMap from './_baseMap.js';\nimport baseSortBy from './_baseSortBy.js';\nimport baseUnary from './_baseUnary.js';\nimport compareMultiple from './_compareMultiple.js';\nimport identity from './identity.js';\nimport isArray from './isArray.js';\n\n/**\n * The base implementation of `_.orderBy` without param guards.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function[]|Object[]|string[]} iteratees The iteratees to sort by.\n * @param {string[]} orders The sort orders of `iteratees`.\n * @returns {Array} Returns the new sorted array.\n */\nfunction baseOrderBy(collection, iteratees, orders) {\n  if (iteratees.length) {\n    iteratees = arrayMap(iteratees, function(iteratee) {\n      if (isArray(iteratee)) {\n        return function(value) {\n          return baseGet(value, iteratee.length === 1 ? iteratee[0] : iteratee);\n        }\n      }\n      return iteratee;\n    });\n  } else {\n    iteratees = [identity];\n  }\n\n  var index = -1;\n  iteratees = arrayMap(iteratees, baseUnary(baseIteratee));\n\n  var result = baseMap(collection, function(value, key, collection) {\n    var criteria = arrayMap(iteratees, function(iteratee) {\n      return iteratee(value);\n    });\n    return { 'criteria': criteria, 'index': ++index, 'value': value };\n  });\n\n  return baseSortBy(result, function(object, other) {\n    return compareMultiple(object, other, orders);\n  });\n}\n\nexport default baseOrderBy;\n","import baseFlatten from './_baseFlatten.js';\nimport baseOrderBy from './_baseOrderBy.js';\nimport baseRest from './_baseRest.js';\nimport isIterateeCall from './_isIterateeCall.js';\n\n/**\n * Creates an array of elements, sorted in ascending order by the results of\n * running each element in a collection thru each iteratee. This method\n * performs a stable sort, that is, it preserves the original sort order of\n * equal elements. The iteratees are invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {...(Function|Function[])} [iteratees=[_.identity]]\n *  The iteratees to sort by.\n * @returns {Array} Returns the new sorted array.\n * @example\n *\n * var users = [\n *   { 'user': 'fred',   'age': 48 },\n *   { 'user': 'barney', 'age': 36 },\n *   { 'user': 'fred',   'age': 30 },\n *   { 'user': 'barney', 'age': 34 }\n * ];\n *\n * _.sortBy(users, [function(o) { return o.user; }]);\n * // => objects for [['barney', 36], ['barney', 34], ['fred', 48], ['fred', 30]]\n *\n * _.sortBy(users, ['user', 'age']);\n * // => objects for [['barney', 34], ['barney', 36], ['fred', 30], ['fred', 48]]\n */\nvar sortBy = baseRest(function(collection, iteratees) {\n  if (collection == null) {\n    return [];\n  }\n  var length = iteratees.length;\n  if (length > 1 && isIterateeCall(collection, iteratees[0], iteratees[1])) {\n    iteratees = [];\n  } else if (length > 2 && isIterateeCall(iteratees[0], iteratees[1], iteratees[2])) {\n    iteratees = [iteratees[0]];\n  }\n  return baseOrderBy(collection, baseFlatten(iteratees, 1), []);\n});\n\nexport default sortBy;\n","/**\n * A specialized version of `baseAggregator` for arrays.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} setter The function to set `accumulator` values.\n * @param {Function} iteratee The iteratee to transform keys.\n * @param {Object} accumulator The initial aggregated object.\n * @returns {Function} Returns `accumulator`.\n */\nfunction arrayAggregator(array, setter, iteratee, accumulator) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    var value = array[index];\n    setter(accumulator, value, iteratee(value), array);\n  }\n  return accumulator;\n}\n\nexport default arrayAggregator;\n","import baseEach from './_baseEach.js';\n\n/**\n * Aggregates elements of `collection` on `accumulator` with keys transformed\n * by `iteratee` and values set by `setter`.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} setter The function to set `accumulator` values.\n * @param {Function} iteratee The iteratee to transform keys.\n * @param {Object} accumulator The initial aggregated object.\n * @returns {Function} Returns `accumulator`.\n */\nfunction baseAggregator(collection, setter, iteratee, accumulator) {\n  baseEach(collection, function(value, key, collection) {\n    setter(accumulator, value, iteratee(value), collection);\n  });\n  return accumulator;\n}\n\nexport default baseAggregator;\n","import arrayAggregator from './_arrayAggregator.js';\nimport baseAggregator from './_baseAggregator.js';\nimport baseIteratee from './_baseIteratee.js';\nimport isArray from './isArray.js';\n\n/**\n * Creates a function like `_.groupBy`.\n *\n * @private\n * @param {Function} setter The function to set accumulator values.\n * @param {Function} [initializer] The accumulator object initializer.\n * @returns {Function} Returns the new aggregator function.\n */\nfunction createAggregator(setter, initializer) {\n  return function(collection, iteratee) {\n    var func = isArray(collection) ? arrayAggregator : baseAggregator,\n        accumulator = initializer ? initializer() : {};\n\n    return func(collection, setter, baseIteratee(iteratee, 2), accumulator);\n  };\n}\n\nexport default createAggregator;\n","import baseAssignValue from './_baseAssignValue.js';\nimport createAggregator from './_createAggregator.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an object composed of keys generated from the results of running\n * each element of `collection` thru `iteratee`. The order of grouped values\n * is determined by the order they occur in `collection`. The corresponding\n * value of each key is an array of elements responsible for generating the\n * key. The iteratee is invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The iteratee to transform keys.\n * @returns {Object} Returns the composed aggregate object.\n * @example\n *\n * _.groupBy([6.1, 4.2, 6.3], Math.floor);\n * // => { '4': [4.2], '6': [6.1, 6.3] }\n *\n * // The `_.property` iteratee shorthand.\n * _.groupBy(['one', 'two', 'three'], 'length');\n * // => { '3': ['one', 'two'], '5': ['three'] }\n */\nvar groupBy = createAggregator(function(result, value, key) {\n  if (hasOwnProperty.call(result, key)) {\n    result[key].push(value);\n  } else {\n    baseAssignValue(result, key, [value]);\n  }\n});\n\nexport default groupBy;\n","import SetCache from './_SetCache.js';\nimport arrayIncludes from './_arrayIncludes.js';\nimport arrayIncludesWith from './_arrayIncludesWith.js';\nimport arrayMap from './_arrayMap.js';\nimport baseUnary from './_baseUnary.js';\nimport cacheHas from './_cacheHas.js';\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * The base implementation of methods like `_.difference` without support\n * for excluding multiple arrays or iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Array} values The values to exclude.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new array of filtered values.\n */\nfunction baseDifference(array, values, iteratee, comparator) {\n  var index = -1,\n      includes = arrayIncludes,\n      isCommon = true,\n      length = array.length,\n      result = [],\n      valuesLength = values.length;\n\n  if (!length) {\n    return result;\n  }\n  if (iteratee) {\n    values = arrayMap(values, baseUnary(iteratee));\n  }\n  if (comparator) {\n    includes = arrayIncludesWith;\n    isCommon = false;\n  }\n  else if (values.length >= LARGE_ARRAY_SIZE) {\n    includes = cacheHas;\n    isCommon = false;\n    values = new SetCache(values);\n  }\n  outer:\n  while (++index < length) {\n    var value = array[index],\n        computed = iteratee == null ? value : iteratee(value);\n\n    value = (comparator || value !== 0) ? value : 0;\n    if (isCommon && computed === computed) {\n      var valuesIndex = valuesLength;\n      while (valuesIndex--) {\n        if (values[valuesIndex] === computed) {\n          continue outer;\n        }\n      }\n      result.push(value);\n    }\n    else if (!includes(values, computed, comparator)) {\n      result.push(value);\n    }\n  }\n  return result;\n}\n\nexport default baseDifference;\n","import baseDifference from './_baseDifference.js';\nimport baseFlatten from './_baseFlatten.js';\nimport baseRest from './_baseRest.js';\nimport isArrayLikeObject from './isArrayLikeObject.js';\n\n/**\n * Creates an array of `array` values not included in the other given arrays\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons. The order and references of result values are\n * determined by the first array.\n *\n * **Note:** Unlike `_.pullAll`, this method returns a new array.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @param {...Array} [values] The values to exclude.\n * @returns {Array} Returns the new array of filtered values.\n * @see _.without, _.xor\n * @example\n *\n * _.difference([2, 1], [2, 3]);\n * // => [1]\n */\nvar difference = baseRest(function(array, values) {\n  return isArrayLikeObject(array)\n    ? baseDifference(array, baseFlatten(values, 1, isArrayLikeObject, true))\n    : [];\n});\n\nexport default difference;\n","import isSymbol from './isSymbol.js';\n\n/**\n * The base implementation of methods like `_.max` and `_.min` which accepts a\n * `comparator` to determine the extremum value.\n *\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} iteratee The iteratee invoked per iteration.\n * @param {Function} comparator The comparator used to compare values.\n * @returns {*} Returns the extremum value.\n */\nfunction baseExtremum(array, iteratee, comparator) {\n  var index = -1,\n      length = array.length;\n\n  while (++index < length) {\n    var value = array[index],\n        current = iteratee(value);\n\n    if (current != null && (computed === undefined\n          ? (current === current && !isSymbol(current))\n          : comparator(current, computed)\n        )) {\n      var computed = current,\n          result = value;\n    }\n  }\n  return result;\n}\n\nexport default baseExtremum;\n","/**\n * The base implementation of `_.gt` which doesn't coerce arguments.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if `value` is greater than `other`,\n *  else `false`.\n */\nfunction baseGt(value, other) {\n  return value > other;\n}\n\nexport default baseGt;\n","import baseExtremum from './_baseExtremum.js';\nimport baseGt from './_baseGt.js';\nimport identity from './identity.js';\n\n/**\n * Computes the maximum value of `array`. If `array` is empty or falsey,\n * `undefined` is returned.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Math\n * @param {Array} array The array to iterate over.\n * @returns {*} Returns the maximum value.\n * @example\n *\n * _.max([4, 2, 8, 6]);\n * // => 8\n *\n * _.max([]);\n * // => undefined\n */\nfunction max(array) {\n  return (array && array.length)\n    ? baseExtremum(array, identity, baseGt)\n    : undefined;\n}\n\nexport default max;\n","import toString from './toString.js';\n\n/** Used to generate unique IDs. */\nvar idCounter = 0;\n\n/**\n * Generates a unique ID. If `prefix` is given, the ID is appended to it.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {string} [prefix=''] The value to prefix the ID with.\n * @returns {string} Returns the unique ID.\n * @example\n *\n * _.uniqueId('contact_');\n * // => 'contact_104'\n *\n * _.uniqueId();\n * // => '105'\n */\nfunction uniqueId(prefix) {\n  var id = ++idCounter;\n  return toString(prefix) + id;\n}\n\nexport default uniqueId;\n","/**\n * A specialized version of `_.reduce` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {*} [accumulator] The initial value.\n * @param {boolean} [initAccum] Specify using the first element of `array` as\n *  the initial value.\n * @returns {*} Returns the accumulated value.\n */\nfunction arrayReduce(array, iteratee, accumulator, initAccum) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  if (initAccum && length) {\n    accumulator = array[++index];\n  }\n  while (++index < length) {\n    accumulator = iteratee(accumulator, array[index], index, array);\n  }\n  return accumulator;\n}\n\nexport default arrayReduce;\n","/**\n * The base implementation of `_.propertyOf` without support for deep paths.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Function} Returns the new accessor function.\n */\nfunction basePropertyOf(object) {\n  return function(key) {\n    return object == null ? undefined : object[key];\n  };\n}\n\nexport default basePropertyOf;\n","import basePropertyOf from './_basePropertyOf.js';\n\n/** Used to map Latin Unicode letters to basic Latin letters. */\nvar deburredLetters = {\n  // Latin-1 Supplement block.\n  '\\xc0': 'A',  '\\xc1': 'A', '\\xc2': 'A', '\\xc3': 'A', '\\xc4': 'A', '\\xc5': 'A',\n  '\\xe0': 'a',  '\\xe1': 'a', '\\xe2': 'a', '\\xe3': 'a', '\\xe4': 'a', '\\xe5': 'a',\n  '\\xc7': 'C',  '\\xe7': 'c',\n  '\\xd0': 'D',  '\\xf0': 'd',\n  '\\xc8': 'E',  '\\xc9': 'E', '\\xca': 'E', '\\xcb': 'E',\n  '\\xe8': 'e',  '\\xe9': 'e', '\\xea': 'e', '\\xeb': 'e',\n  '\\xcc': 'I',  '\\xcd': 'I', '\\xce': 'I', '\\xcf': 'I',\n  '\\xec': 'i',  '\\xed': 'i', '\\xee': 'i', '\\xef': 'i',\n  '\\xd1': 'N',  '\\xf1': 'n',\n  '\\xd2': 'O',  '\\xd3': 'O', '\\xd4': 'O', '\\xd5': 'O', '\\xd6': 'O', '\\xd8': 'O',\n  '\\xf2': 'o',  '\\xf3': 'o', '\\xf4': 'o', '\\xf5': 'o', '\\xf6': 'o', '\\xf8': 'o',\n  '\\xd9': 'U',  '\\xda': 'U', '\\xdb': 'U', '\\xdc': 'U',\n  '\\xf9': 'u',  '\\xfa': 'u', '\\xfb': 'u', '\\xfc': 'u',\n  '\\xdd': 'Y',  '\\xfd': 'y', '\\xff': 'y',\n  '\\xc6': 'Ae', '\\xe6': 'ae',\n  '\\xde': 'Th', '\\xfe': 'th',\n  '\\xdf': 'ss',\n  // Latin Extended-A block.\n  '\\u0100': 'A',  '\\u0102': 'A', '\\u0104': 'A',\n  '\\u0101': 'a',  '\\u0103': 'a', '\\u0105': 'a',\n  '\\u0106': 'C',  '\\u0108': 'C', '\\u010a': 'C', '\\u010c': 'C',\n  '\\u0107': 'c',  '\\u0109': 'c', '\\u010b': 'c', '\\u010d': 'c',\n  '\\u010e': 'D',  '\\u0110': 'D', '\\u010f': 'd', '\\u0111': 'd',\n  '\\u0112': 'E',  '\\u0114': 'E', '\\u0116': 'E', '\\u0118': 'E', '\\u011a': 'E',\n  '\\u0113': 'e',  '\\u0115': 'e', '\\u0117': 'e', '\\u0119': 'e', '\\u011b': 'e',\n  '\\u011c': 'G',  '\\u011e': 'G', '\\u0120': 'G', '\\u0122': 'G',\n  '\\u011d': 'g',  '\\u011f': 'g', '\\u0121': 'g', '\\u0123': 'g',\n  '\\u0124': 'H',  '\\u0126': 'H', '\\u0125': 'h', '\\u0127': 'h',\n  '\\u0128': 'I',  '\\u012a': 'I', '\\u012c': 'I', '\\u012e': 'I', '\\u0130': 'I',\n  '\\u0129': 'i',  '\\u012b': 'i', '\\u012d': 'i', '\\u012f': 'i', '\\u0131': 'i',\n  '\\u0134': 'J',  '\\u0135': 'j',\n  '\\u0136': 'K',  '\\u0137': 'k', '\\u0138': 'k',\n  '\\u0139': 'L',  '\\u013b': 'L', '\\u013d': 'L', '\\u013f': 'L', '\\u0141': 'L',\n  '\\u013a': 'l',  '\\u013c': 'l', '\\u013e': 'l', '\\u0140': 'l', '\\u0142': 'l',\n  '\\u0143': 'N',  '\\u0145': 'N', '\\u0147': 'N', '\\u014a': 'N',\n  '\\u0144': 'n',  '\\u0146': 'n', '\\u0148': 'n', '\\u014b': 'n',\n  '\\u014c': 'O',  '\\u014e': 'O', '\\u0150': 'O',\n  '\\u014d': 'o',  '\\u014f': 'o', '\\u0151': 'o',\n  '\\u0154': 'R',  '\\u0156': 'R', '\\u0158': 'R',\n  '\\u0155': 'r',  '\\u0157': 'r', '\\u0159': 'r',\n  '\\u015a': 'S',  '\\u015c': 'S', '\\u015e': 'S', '\\u0160': 'S',\n  '\\u015b': 's',  '\\u015d': 's', '\\u015f': 's', '\\u0161': 's',\n  '\\u0162': 'T',  '\\u0164': 'T', '\\u0166': 'T',\n  '\\u0163': 't',  '\\u0165': 't', '\\u0167': 't',\n  '\\u0168': 'U',  '\\u016a': 'U', '\\u016c': 'U', '\\u016e': 'U', '\\u0170': 'U', '\\u0172': 'U',\n  '\\u0169': 'u',  '\\u016b': 'u', '\\u016d': 'u', '\\u016f': 'u', '\\u0171': 'u', '\\u0173': 'u',\n  '\\u0174': 'W',  '\\u0175': 'w',\n  '\\u0176': 'Y',  '\\u0177': 'y', '\\u0178': 'Y',\n  '\\u0179': 'Z',  '\\u017b': 'Z', '\\u017d': 'Z',\n  '\\u017a': 'z',  '\\u017c': 'z', '\\u017e': 'z',\n  '\\u0132': 'IJ', '\\u0133': 'ij',\n  '\\u0152': 'Oe', '\\u0153': 'oe',\n  '\\u0149': \"'n\", '\\u017f': 's'\n};\n\n/**\n * Used by `_.deburr` to convert Latin-1 Supplement and Latin Extended-A\n * letters to basic Latin letters.\n *\n * @private\n * @param {string} letter The matched letter to deburr.\n * @returns {string} Returns the deburred letter.\n */\nvar deburrLetter = basePropertyOf(deburredLetters);\n\nexport default deburrLetter;\n","import deburrLetter from './_deburrLetter.js';\nimport toString from './toString.js';\n\n/** Used to match Latin Unicode letters (excluding mathematical operators). */\nvar reLatin = /[\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\xff\\u0100-\\u017f]/g;\n\n/** Used to compose unicode character classes. */\nvar rsComboMarksRange = '\\\\u0300-\\\\u036f',\n    reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n    rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n    rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange;\n\n/** Used to compose unicode capture groups. */\nvar rsCombo = '[' + rsComboRange + ']';\n\n/**\n * Used to match [combining diacritical marks](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks) and\n * [combining diacritical marks for symbols](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks_for_Symbols).\n */\nvar reComboMark = RegExp(rsCombo, 'g');\n\n/**\n * Deburrs `string` by converting\n * [Latin-1 Supplement](https://en.wikipedia.org/wiki/Latin-1_Supplement_(Unicode_block)#Character_table)\n * and [Latin Extended-A](https://en.wikipedia.org/wiki/Latin_Extended-A)\n * letters to basic Latin letters and removing\n * [combining diacritical marks](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks).\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category String\n * @param {string} [string=''] The string to deburr.\n * @returns {string} Returns the deburred string.\n * @example\n *\n * _.deburr('dj vu');\n * // => 'deja vu'\n */\nfunction deburr(string) {\n  string = toString(string);\n  return string && string.replace(reLatin, deburrLetter).replace(reComboMark, '');\n}\n\nexport default deburr;\n","/** Used to match words composed of alphanumeric characters. */\nvar reAsciiWord = /[^\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\x7f]+/g;\n\n/**\n * Splits an ASCII `string` into an array of its words.\n *\n * @private\n * @param {string} The string to inspect.\n * @returns {Array} Returns the words of `string`.\n */\nfunction asciiWords(string) {\n  return string.match(reAsciiWord) || [];\n}\n\nexport default asciiWords;\n","/** Used to detect strings that need a more robust regexp to match words. */\nvar reHasUnicodeWord = /[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;\n\n/**\n * Checks if `string` contains a word composed of Unicode symbols.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {boolean} Returns `true` if a word is found, else `false`.\n */\nfunction hasUnicodeWord(string) {\n  return reHasUnicodeWord.test(string);\n}\n\nexport default hasUnicodeWord;\n","/** Used to compose unicode character classes. */\nvar rsAstralRange = '\\\\ud800-\\\\udfff',\n    rsComboMarksRange = '\\\\u0300-\\\\u036f',\n    reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n    rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n    rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,\n    rsDingbatRange = '\\\\u2700-\\\\u27bf',\n    rsLowerRange = 'a-z\\\\xdf-\\\\xf6\\\\xf8-\\\\xff',\n    rsMathOpRange = '\\\\xac\\\\xb1\\\\xd7\\\\xf7',\n    rsNonCharRange = '\\\\x00-\\\\x2f\\\\x3a-\\\\x40\\\\x5b-\\\\x60\\\\x7b-\\\\xbf',\n    rsPunctuationRange = '\\\\u2000-\\\\u206f',\n    rsSpaceRange = ' \\\\t\\\\x0b\\\\f\\\\xa0\\\\ufeff\\\\n\\\\r\\\\u2028\\\\u2029\\\\u1680\\\\u180e\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200a\\\\u202f\\\\u205f\\\\u3000',\n    rsUpperRange = 'A-Z\\\\xc0-\\\\xd6\\\\xd8-\\\\xde',\n    rsVarRange = '\\\\ufe0e\\\\ufe0f',\n    rsBreakRange = rsMathOpRange + rsNonCharRange + rsPunctuationRange + rsSpaceRange;\n\n/** Used to compose unicode capture groups. */\nvar rsApos = \"['\\u2019]\",\n    rsBreak = '[' + rsBreakRange + ']',\n    rsCombo = '[' + rsComboRange + ']',\n    rsDigits = '\\\\d+',\n    rsDingbat = '[' + rsDingbatRange + ']',\n    rsLower = '[' + rsLowerRange + ']',\n    rsMisc = '[^' + rsAstralRange + rsBreakRange + rsDigits + rsDingbatRange + rsLowerRange + rsUpperRange + ']',\n    rsFitz = '\\\\ud83c[\\\\udffb-\\\\udfff]',\n    rsModifier = '(?:' + rsCombo + '|' + rsFitz + ')',\n    rsNonAstral = '[^' + rsAstralRange + ']',\n    rsRegional = '(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}',\n    rsSurrPair = '[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]',\n    rsUpper = '[' + rsUpperRange + ']',\n    rsZWJ = '\\\\u200d';\n\n/** Used to compose unicode regexes. */\nvar rsMiscLower = '(?:' + rsLower + '|' + rsMisc + ')',\n    rsMiscUpper = '(?:' + rsUpper + '|' + rsMisc + ')',\n    rsOptContrLower = '(?:' + rsApos + '(?:d|ll|m|re|s|t|ve))?',\n    rsOptContrUpper = '(?:' + rsApos + '(?:D|LL|M|RE|S|T|VE))?',\n    reOptMod = rsModifier + '?',\n    rsOptVar = '[' + rsVarRange + ']?',\n    rsOptJoin = '(?:' + rsZWJ + '(?:' + [rsNonAstral, rsRegional, rsSurrPair].join('|') + ')' + rsOptVar + reOptMod + ')*',\n    rsOrdLower = '\\\\d*(?:1st|2nd|3rd|(?![123])\\\\dth)(?=\\\\b|[A-Z_])',\n    rsOrdUpper = '\\\\d*(?:1ST|2ND|3RD|(?![123])\\\\dTH)(?=\\\\b|[a-z_])',\n    rsSeq = rsOptVar + reOptMod + rsOptJoin,\n    rsEmoji = '(?:' + [rsDingbat, rsRegional, rsSurrPair].join('|') + ')' + rsSeq;\n\n/** Used to match complex or compound words. */\nvar reUnicodeWord = RegExp([\n  rsUpper + '?' + rsLower + '+' + rsOptContrLower + '(?=' + [rsBreak, rsUpper, '$'].join('|') + ')',\n  rsMiscUpper + '+' + rsOptContrUpper + '(?=' + [rsBreak, rsUpper + rsMiscLower, '$'].join('|') + ')',\n  rsUpper + '?' + rsMiscLower + '+' + rsOptContrLower,\n  rsUpper + '+' + rsOptContrUpper,\n  rsOrdUpper,\n  rsOrdLower,\n  rsDigits,\n  rsEmoji\n].join('|'), 'g');\n\n/**\n * Splits a Unicode `string` into an array of its words.\n *\n * @private\n * @param {string} The string to inspect.\n * @returns {Array} Returns the words of `string`.\n */\nfunction unicodeWords(string) {\n  return string.match(reUnicodeWord) || [];\n}\n\nexport default unicodeWords;\n","import asciiWords from './_asciiWords.js';\nimport hasUnicodeWord from './_hasUnicodeWord.js';\nimport toString from './toString.js';\nimport unicodeWords from './_unicodeWords.js';\n\n/**\n * Splits `string` into an array of its words.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category String\n * @param {string} [string=''] The string to inspect.\n * @param {RegExp|string} [pattern] The pattern to match words.\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n * @returns {Array} Returns the words of `string`.\n * @example\n *\n * _.words('fred, barney, & pebbles');\n * // => ['fred', 'barney', 'pebbles']\n *\n * _.words('fred, barney, & pebbles', /[^, ]+/g);\n * // => ['fred', 'barney', '&', 'pebbles']\n */\nfunction words(string, pattern, guard) {\n  string = toString(string);\n  pattern = guard ? undefined : pattern;\n\n  if (pattern === undefined) {\n    return hasUnicodeWord(string) ? unicodeWords(string) : asciiWords(string);\n  }\n  return string.match(pattern) || [];\n}\n\nexport default words;\n","import arrayReduce from './_arrayReduce.js';\nimport deburr from './deburr.js';\nimport words from './words.js';\n\n/** Used to compose unicode capture groups. */\nvar rsApos = \"['\\u2019]\";\n\n/** Used to match apostrophes. */\nvar reApos = RegExp(rsApos, 'g');\n\n/**\n * Creates a function like `_.camelCase`.\n *\n * @private\n * @param {Function} callback The function to combine each word.\n * @returns {Function} Returns the new compounder function.\n */\nfunction createCompounder(callback) {\n  return function(string) {\n    return arrayReduce(words(deburr(string).replace(reApos, '')), callback, '');\n  };\n}\n\nexport default createCompounder;\n","/**\n * The base implementation of `_.slice` without an iteratee call guard.\n *\n * @private\n * @param {Array} array The array to slice.\n * @param {number} [start=0] The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the slice of `array`.\n */\nfunction baseSlice(array, start, end) {\n  var index = -1,\n      length = array.length;\n\n  if (start < 0) {\n    start = -start > length ? 0 : (length + start);\n  }\n  end = end > length ? length : end;\n  if (end < 0) {\n    end += length;\n  }\n  length = start > end ? 0 : ((end - start) >>> 0);\n  start >>>= 0;\n\n  var result = Array(length);\n  while (++index < length) {\n    result[index] = array[index + start];\n  }\n  return result;\n}\n\nexport default baseSlice;\n","import baseSlice from './_baseSlice.js';\n\n/**\n * Casts `array` to a slice if it's needed.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {number} start The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the cast slice.\n */\nfunction castSlice(array, start, end) {\n  var length = array.length;\n  end = end === undefined ? length : end;\n  return (!start && end >= length) ? array : baseSlice(array, start, end);\n}\n\nexport default castSlice;\n","/** Used to compose unicode character classes. */\nvar rsAstralRange = '\\\\ud800-\\\\udfff',\n    rsComboMarksRange = '\\\\u0300-\\\\u036f',\n    reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n    rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n    rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,\n    rsVarRange = '\\\\ufe0e\\\\ufe0f';\n\n/** Used to compose unicode capture groups. */\nvar rsZWJ = '\\\\u200d';\n\n/** Used to detect strings with [zero-width joiners or code points from the astral planes](http://eev.ee/blog/2015/09/12/dark-corners-of-unicode/). */\nvar reHasUnicode = RegExp('[' + rsZWJ + rsAstralRange  + rsComboRange + rsVarRange + ']');\n\n/**\n * Checks if `string` contains Unicode symbols.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {boolean} Returns `true` if a symbol is found, else `false`.\n */\nfunction hasUnicode(string) {\n  return reHasUnicode.test(string);\n}\n\nexport default hasUnicode;\n","/**\n * Converts an ASCII `string` to an array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction asciiToArray(string) {\n  return string.split('');\n}\n\nexport default asciiToArray;\n","/** Used to compose unicode character classes. */\nvar rsAstralRange = '\\\\ud800-\\\\udfff',\n    rsComboMarksRange = '\\\\u0300-\\\\u036f',\n    reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n    rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n    rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,\n    rsVarRange = '\\\\ufe0e\\\\ufe0f';\n\n/** Used to compose unicode capture groups. */\nvar rsAstral = '[' + rsAstralRange + ']',\n    rsCombo = '[' + rsComboRange + ']',\n    rsFitz = '\\\\ud83c[\\\\udffb-\\\\udfff]',\n    rsModifier = '(?:' + rsCombo + '|' + rsFitz + ')',\n    rsNonAstral = '[^' + rsAstralRange + ']',\n    rsRegional = '(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}',\n    rsSurrPair = '[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]',\n    rsZWJ = '\\\\u200d';\n\n/** Used to compose unicode regexes. */\nvar reOptMod = rsModifier + '?',\n    rsOptVar = '[' + rsVarRange + ']?',\n    rsOptJoin = '(?:' + rsZWJ + '(?:' + [rsNonAstral, rsRegional, rsSurrPair].join('|') + ')' + rsOptVar + reOptMod + ')*',\n    rsSeq = rsOptVar + reOptMod + rsOptJoin,\n    rsSymbol = '(?:' + [rsNonAstral + rsCombo + '?', rsCombo, rsRegional, rsSurrPair, rsAstral].join('|') + ')';\n\n/** Used to match [string symbols](https://mathiasbynens.be/notes/javascript-unicode). */\nvar reUnicode = RegExp(rsFitz + '(?=' + rsFitz + ')|' + rsSymbol + rsSeq, 'g');\n\n/**\n * Converts a Unicode `string` to an array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction unicodeToArray(string) {\n  return string.match(reUnicode) || [];\n}\n\nexport default unicodeToArray;\n","import asciiToArray from './_asciiToArray.js';\nimport hasUnicode from './_hasUnicode.js';\nimport unicodeToArray from './_unicodeToArray.js';\n\n/**\n * Converts `string` to an array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction stringToArray(string) {\n  return hasUnicode(string)\n    ? unicodeToArray(string)\n    : asciiToArray(string);\n}\n\nexport default stringToArray;\n","import castSlice from './_castSlice.js';\nimport hasUnicode from './_hasUnicode.js';\nimport stringToArray from './_stringToArray.js';\nimport toString from './toString.js';\n\n/**\n * Creates a function like `_.lowerFirst`.\n *\n * @private\n * @param {string} methodName The name of the `String` case method to use.\n * @returns {Function} Returns the new case function.\n */\nfunction createCaseFirst(methodName) {\n  return function(string) {\n    string = toString(string);\n\n    var strSymbols = hasUnicode(string)\n      ? stringToArray(string)\n      : undefined;\n\n    var chr = strSymbols\n      ? strSymbols[0]\n      : string.charAt(0);\n\n    var trailing = strSymbols\n      ? castSlice(strSymbols, 1).join('')\n      : string.slice(1);\n\n    return chr[methodName]() + trailing;\n  };\n}\n\nexport default createCaseFirst;\n","import createCaseFirst from './_createCaseFirst.js';\n\n/**\n * Converts the first character of `string` to upper case.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category String\n * @param {string} [string=''] The string to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.upperFirst('fred');\n * // => 'Fred'\n *\n * _.upperFirst('FRED');\n * // => 'FRED'\n */\nvar upperFirst = createCaseFirst('toUpperCase');\n\nexport default upperFirst;\n","import createCompounder from './_createCompounder.js';\nimport upperFirst from './upperFirst.js';\n\n/**\n * Converts `string` to\n * [start case](https://en.wikipedia.org/wiki/Letter_case#Stylistic_or_specialised_usage).\n *\n * @static\n * @memberOf _\n * @since 3.1.0\n * @category String\n * @param {string} [string=''] The string to convert.\n * @returns {string} Returns the start cased string.\n * @example\n *\n * _.startCase('--foo-bar--');\n * // => 'Foo Bar'\n *\n * _.startCase('fooBar');\n * // => 'Foo Bar'\n *\n * _.startCase('__FOO_BAR__');\n * // => 'FOO BAR'\n */\nvar startCase = createCompounder(function(result, word, index) {\n  return result + (index ? ' ' : '') + upperFirst(word);\n});\n\nexport default startCase;\n","import toString from './toString.js';\nimport upperFirst from './upperFirst.js';\n\n/**\n * Converts the first character of `string` to upper case and the remaining\n * to lower case.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category String\n * @param {string} [string=''] The string to capitalize.\n * @returns {string} Returns the capitalized string.\n * @example\n *\n * _.capitalize('FRED');\n * // => 'Fred'\n */\nfunction capitalize(string) {\n  return upperFirst(toString(string).toLowerCase());\n}\n\nexport default capitalize;\n","import capitalize from './capitalize.js';\nimport createCompounder from './_createCompounder.js';\n\n/**\n * Converts `string` to [camel case](https://en.wikipedia.org/wiki/CamelCase).\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category String\n * @param {string} [string=''] The string to convert.\n * @returns {string} Returns the camel cased string.\n * @example\n *\n * _.camelCase('Foo Bar');\n * // => 'fooBar'\n *\n * _.camelCase('--foo-bar--');\n * // => 'fooBar'\n *\n * _.camelCase('__FOO_BAR__');\n * // => 'fooBar'\n */\nvar camelCase = createCompounder(function(result, word, index) {\n  word = word.toLowerCase();\n  return result + (index ? capitalize(word) : word);\n});\n\nexport default camelCase;\n","import createCompounder from './_createCompounder.js';\n\n/**\n * Converts `string`, as space separated words, to upper case.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category String\n * @param {string} [string=''] The string to convert.\n * @returns {string} Returns the upper cased string.\n * @example\n *\n * _.upperCase('--foo-bar');\n * // => 'FOO BAR'\n *\n * _.upperCase('fooBar');\n * // => 'FOO BAR'\n *\n * _.upperCase('__foo_bar__');\n * // => 'FOO BAR'\n */\nvar upperCase = createCompounder(function(result, word, index) {\n  return result + (index ? ' ' : '') + word.toUpperCase();\n});\n\nexport default upperCase;\n","import createCompounder from './_createCompounder.js';\n\n/**\n * Converts `string`, as space separated words, to lower case.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category String\n * @param {string} [string=''] The string to convert.\n * @returns {string} Returns the lower cased string.\n * @example\n *\n * _.lowerCase('--Foo-Bar--');\n * // => 'foo bar'\n *\n * _.lowerCase('fooBar');\n * // => 'foo bar'\n *\n * _.lowerCase('__FOO_BAR__');\n * // => 'foo bar'\n */\nvar lowerCase = createCompounder(function(result, word, index) {\n  return result + (index ? ' ' : '') + word.toLowerCase();\n});\n\nexport default lowerCase;\n","import createCaseFirst from './_createCaseFirst.js';\n\n/**\n * Converts the first character of `string` to lower case.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category String\n * @param {string} [string=''] The string to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.lowerFirst('Fred');\n * // => 'fred'\n *\n * _.lowerFirst('FRED');\n * // => 'fRED'\n */\nvar lowerFirst = createCaseFirst('toLowerCase');\n\nexport default lowerFirst;\n","import { camelCase, startCase, upperCase, lowerCase, upperFirst, } from 'lodash-es';\nexport { lowerFirst, upperFirst, camelCase } from 'lodash-es';\n// @see: https://medium.com/@robertsavian/javascript-case-converters-using-lodash-4f2f964091cc\nconst cacheStringFunction = (fn) => {\n    const cache = Object.create(null);\n    return ((str) => {\n        const hit = cache[str];\n        return hit || (cache[str] = fn(str));\n    });\n};\nexport const kebabCase = cacheStringFunction((s) => s.replace(/\\B([A-Z])/g, '-$1').toLowerCase());\nexport const pascalCase = cacheStringFunction((s) => startCase(camelCase(s)).replace(/ /g, ''));\nexport const constantCase = cacheStringFunction((s) => upperCase(s).replace(/ /g, '_'));\nexport const dotCase = cacheStringFunction((s) => lowerCase(s).replace(/ /g, '.'));\nexport const pathCase = cacheStringFunction((s) => lowerCase(s).replace(/ /g, '/'));\nexport const sentenceCase = cacheStringFunction((s) => upperFirst(lowerCase(s)));\nexport const titleCase = cacheStringFunction((s) => startCase(camelCase(s)));\n//# sourceMappingURL=format.js.map","/* eslint-disable no-bitwise */\n/**\n * Return a simple hash code from a string.\n * Source from: https://github.com/sindresorhus/fnv1a/blob/master/index.js#L25\n */\nexport function hashcode(str) {\n    let hash = 2166136261;\n    let isUnicoded = false;\n    let string = str;\n    for (let i = 0, ii = string.length; i < ii; i += 1) {\n        let characterCode = string.charCodeAt(i);\n        // Non-ASCII characters trigger the Unicode escape logic\n        if (characterCode > 0x7f && !isUnicoded) {\n            string = unescape(encodeURIComponent(string));\n            characterCode = string.charCodeAt(i);\n            isUnicoded = true;\n        }\n        hash ^= characterCode;\n        hash += (hash << 1) + (hash << 4) + (hash << 7) + (hash << 8) + (hash << 24);\n    }\n    return hash >>> 0;\n}\n//# sourceMappingURL=hashcode.js.map","/* eslint-disable no-bitwise */\nexport function uuid() {\n    // credit: http://stackoverflow.com/posts/2117523/revisions\n    // return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c) => {\n    //   const r = (Math.random() * 16) | 0\n    //   const v = c === 'x' ? r : (r & 0x3) | 0x8\n    //   return v.toString(16)\n    // })\n    let res = '';\n    const template = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx';\n    for (let i = 0, len = template.length; i < len; i += 1) {\n        const s = template[i];\n        const r = (Math.random() * 16) | 0;\n        const v = s === 'x' ? r : s === 'y' ? (r & 0x3) | 0x8 : s;\n        res += v.toString(16);\n    }\n    return res;\n}\n//# sourceMappingURL=uuid.js.map","// @see: https://github.com/microsoft/TypeScript/blob/master/src/compiler/checker.ts\n/**\n * Given a name and a list of names that are not equal to the name, return a\n * spelling suggestion if there is one that is close enough. Names less than\n * length 3 only check for case-insensitive equality, not Levenshtein distance.\n *\n * - If there is a candidate that's the same except for case, return that.\n * - If there is a candidate that's within one edit of the name, return that.\n * - Otherwise, return the candidate with the smallest Levenshtein distance,\n *     except for candidates:\n *       * With no name\n *       * Whose length differs from the target name by more than 0.34 of the\n *         length of the name.\n *       * Whose levenshtein distance is more than 0.4 of the length of the\n *         name (0.4 allows 1 substitution/transposition for every 5 characters,\n *         and 1 insertion/deletion at 3 characters)\n */\nexport function getSpellingSuggestion(name, candidates, getName) {\n    const maximumLengthDifference = Math.min(2, Math.floor(name.length * 0.34));\n    // If the best result isn't better than this, don't bother.\n    let bestDistance = Math.floor(name.length * 0.4) + 1;\n    let bestCandidate;\n    let justCheckExactMatches = false;\n    const nameLowerCase = name.toLowerCase();\n    // eslint-disable-next-line\n    for (const candidate of candidates) {\n        const candidateName = getName(candidate);\n        if (candidateName !== undefined &&\n            Math.abs(candidateName.length - nameLowerCase.length) <=\n                maximumLengthDifference) {\n            const candidateNameLowerCase = candidateName.toLowerCase();\n            if (candidateNameLowerCase === nameLowerCase) {\n                if (candidateName === name) {\n                    continue;\n                }\n                return candidate;\n            }\n            if (justCheckExactMatches) {\n                continue;\n            }\n            if (candidateName.length < 3) {\n                // Don't bother, user would have noticed a\n                // 2-character name having an extra character.\n                continue;\n            }\n            // Only care about a result better than the best so far.\n            const distance = levenshteinWithMax(nameLowerCase, candidateNameLowerCase, bestDistance - 1);\n            if (distance === undefined) {\n                continue;\n            }\n            if (distance < 3) {\n                justCheckExactMatches = true;\n                bestCandidate = candidate;\n            }\n            else {\n                // Debug.assert(distance < bestDistance)\n                bestDistance = distance;\n                bestCandidate = candidate;\n            }\n        }\n    }\n    return bestCandidate;\n}\nfunction levenshteinWithMax(s1, s2, max) {\n    let previous = new Array(s2.length + 1); // eslint-disable-line\n    let current = new Array(s2.length + 1); // eslint-disable-line\n    /** Represents any value > max. We don't care about the particular value. */\n    const big = max + 1;\n    for (let i = 0; i <= s2.length; i += 1) {\n        previous[i] = i;\n    }\n    for (let i = 1; i <= s1.length; i += 1) {\n        const c1 = s1.charCodeAt(i - 1);\n        const minJ = i > max ? i - max : 1;\n        const maxJ = s2.length > max + i ? max + i : s2.length;\n        current[0] = i;\n        /** Smallest value of the matrix in the ith column. */\n        let colMin = i;\n        for (let j = 1; j < minJ; j += 1) {\n            current[j] = big;\n        }\n        for (let j = minJ; j <= maxJ; j += 1) {\n            const dist = c1 === s2.charCodeAt(j - 1)\n                ? previous[j - 1]\n                : Math.min(\n                /* delete */ previous[j] + 1, \n                /* insert */ current[j - 1] + 1, \n                /* substitute */ previous[j - 1] + 2);\n            current[j] = dist;\n            colMin = Math.min(colMin, dist);\n        }\n        for (let j = maxJ + 1; j <= s2.length; j += 1) {\n            current[j] = big;\n        }\n        if (colMin > max) {\n            // Give up -- everything in this column is > max\n            // and it can't get better in future columns.\n            return undefined;\n        }\n        const temp = previous;\n        previous = current;\n        current = temp;\n    }\n    const res = previous[s2.length];\n    return res > max ? undefined : res;\n}\n//# sourceMappingURL=suggestion.js.map","import baseGetTag from './_baseGetTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar numberTag = '[object Number]';\n\n/**\n * Checks if `value` is classified as a `Number` primitive or object.\n *\n * **Note:** To exclude `Infinity`, `-Infinity`, and `NaN`, which are\n * classified as numbers, use the `_.isFinite` method.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a number, else `false`.\n * @example\n *\n * _.isNumber(3);\n * // => true\n *\n * _.isNumber(Number.MIN_VALUE);\n * // => true\n *\n * _.isNumber(Infinity);\n * // => true\n *\n * _.isNumber('3');\n * // => false\n */\nfunction isNumber(value) {\n  return typeof value == 'number' ||\n    (isObjectLike(value) && baseGetTag(value) == numberTag);\n}\n\nexport default isNumber;\n","/**\n * The base implementation of `_.clamp` which doesn't coerce arguments.\n *\n * @private\n * @param {number} number The number to clamp.\n * @param {number} [lower] The lower bound.\n * @param {number} upper The upper bound.\n * @returns {number} Returns the clamped number.\n */\nfunction baseClamp(number, lower, upper) {\n  if (number === number) {\n    if (upper !== undefined) {\n      number = number <= upper ? number : upper;\n    }\n    if (lower !== undefined) {\n      number = number >= lower ? number : lower;\n    }\n  }\n  return number;\n}\n\nexport default baseClamp;\n","import baseClamp from './_baseClamp.js';\nimport toNumber from './toNumber.js';\n\n/**\n * Clamps `number` within the inclusive `lower` and `upper` bounds.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Number\n * @param {number} number The number to clamp.\n * @param {number} [lower] The lower bound.\n * @param {number} upper The upper bound.\n * @returns {number} Returns the clamped number.\n * @example\n *\n * _.clamp(-10, -5, 5);\n * // => -5\n *\n * _.clamp(10, -5, 5);\n * // => 5\n */\nfunction clamp(number, lower, upper) {\n  if (upper === undefined) {\n    upper = lower;\n    lower = undefined;\n  }\n  if (upper !== undefined) {\n    upper = toNumber(upper);\n    upper = upper === upper ? upper : 0;\n  }\n  if (lower !== undefined) {\n    lower = toNumber(lower);\n    lower = lower === lower ? lower : 0;\n  }\n  return baseClamp(toNumber(number), lower, upper);\n}\n\nexport default clamp;\n","export { isNumber, clamp } from 'lodash-es';\n/**\n * Returns the remainder of division of `n` by `m`. You should use this\n * instead of the built-in operation as the built-in operation does not\n * properly handle negative numbers.\n */\nexport function mod(n, m) {\n    return ((n % m) + m) % m;\n}\nexport function random(lower, upper) {\n    if (upper == null) {\n        upper = lower == null ? 1 : lower; // eslint-disable-line\n        lower = 0; // eslint-disable-line\n    }\n    else if (upper < lower) {\n        const tmp = lower;\n        lower = upper; // eslint-disable-line\n        upper = tmp; // eslint-disable-line\n    }\n    return Math.floor(Math.random() * (upper - lower + 1) + lower);\n}\nexport function isPercentage(val) {\n    return typeof val === 'string' && val.slice(-1) === '%';\n}\nexport function normalizePercentage(num, ref) {\n    if (num == null) {\n        return 0;\n    }\n    let raw;\n    if (typeof num === 'string') {\n        raw = parseFloat(num);\n        if (isPercentage(num)) {\n            raw /= 100;\n            if (Number.isFinite(raw)) {\n                return raw * ref;\n            }\n        }\n    }\n    else {\n        raw = num;\n    }\n    if (!Number.isFinite(raw)) {\n        return 0;\n    }\n    if (raw > 0 && raw < 1) {\n        return raw * ref;\n    }\n    return raw;\n}\nexport function parseCssNumeric(val, units) {\n    function getUnit(regexp) {\n        const matches = new RegExp(`(?:\\\\d+(?:\\\\.\\\\d+)*)(${regexp})$`).exec(val);\n        if (!matches) {\n            return null;\n        }\n        return matches[1];\n    }\n    const number = parseFloat(val);\n    if (Number.isNaN(number)) {\n        return null;\n    }\n    // determine the unit\n    let regexp;\n    if (units == null) {\n        // accept any unit, as well as no unit\n        regexp = '[A-Za-z]*';\n    }\n    else if (Array.isArray(units)) {\n        if (units.length === 0) {\n            return null;\n        }\n        regexp = units.join('|');\n    }\n    else if (typeof units === 'string') {\n        regexp = units;\n    }\n    const unit = getUnit(regexp);\n    if (unit === null) {\n        return null;\n    }\n    return {\n        unit,\n        value: number,\n    };\n}\nexport function normalizeSides(box) {\n    if (typeof box === 'object') {\n        let left = 0;\n        let top = 0;\n        let right = 0;\n        let bottom = 0;\n        if (box.vertical != null && Number.isFinite(box.vertical)) {\n            top = bottom = box.vertical;\n        }\n        if (box.horizontal != null && Number.isFinite(box.horizontal)) {\n            right = left = box.horizontal;\n        }\n        if (box.left != null && Number.isFinite(box.left))\n            left = box.left;\n        if (box.top != null && Number.isFinite(box.top))\n            top = box.top;\n        if (box.right != null && Number.isFinite(box.right))\n            right = box.right;\n        if (box.bottom != null && Number.isFinite(box.bottom))\n            bottom = box.bottom;\n        return { top, right, bottom, left };\n    }\n    let val = 0;\n    if (box != null && Number.isFinite(box)) {\n        val = box;\n    }\n    return { top: val, right: val, bottom: val, left: val };\n}\n//# sourceMappingURL=number.js.map","/* eslint-disable no-underscore-dangle */\nlet _IS_MAC = false;\nlet _IS_IOS = false;\nlet _IS_WINDOWS = false;\nlet _IS_IE = false;\nlet _IS_IE11 = false;\nlet _IS_EDGE = false;\nlet _IS_NETSCAPE = false;\nlet _IS_CHROME_APP = false;\nlet _IS_CHROME = false;\nlet _IS_OPERA = false;\nlet _IS_FIREFOX = false;\nlet _IS_SAFARI = false;\nlet _SUPPORT_TOUCH = false;\nlet _SUPPORT_POINTER = false;\nlet _SUPPORT_PASSIVE = false;\nlet _NO_FOREIGNOBJECT = false;\nif (typeof navigator === 'object') {\n    const ua = navigator.userAgent;\n    _IS_MAC = ua.indexOf('Macintosh') >= 0;\n    _IS_IOS = !!ua.match(/(iPad|iPhone|iPod)/g);\n    _IS_WINDOWS = ua.indexOf('Windows') >= 0;\n    _IS_IE = ua.indexOf('MSIE') >= 0;\n    _IS_IE11 = !!ua.match(/Trident\\/7\\./);\n    _IS_EDGE = !!ua.match(/Edge\\//);\n    _IS_NETSCAPE =\n        ua.indexOf('Mozilla/') >= 0 &&\n            ua.indexOf('MSIE') < 0 &&\n            ua.indexOf('Edge/') < 0;\n    _IS_CHROME = ua.indexOf('Chrome/') >= 0 && ua.indexOf('Edge/') < 0;\n    _IS_OPERA = ua.indexOf('Opera/') >= 0 || ua.indexOf('OPR/') >= 0;\n    _IS_FIREFOX = ua.indexOf('Firefox/') >= 0;\n    _IS_SAFARI =\n        ua.indexOf('AppleWebKit/') >= 0 &&\n            ua.indexOf('Chrome/') < 0 &&\n            ua.indexOf('Edge/') < 0;\n    if (typeof document === 'object') {\n        _NO_FOREIGNOBJECT =\n            !document.createElementNS ||\n                `${document.createElementNS('http://www.w3.org/2000/svg', 'foreignObject')}` !== '[object SVGForeignObjectElement]' ||\n                ua.indexOf('Opera/') >= 0;\n    }\n}\nif (typeof window === 'object') {\n    _IS_CHROME_APP =\n        window.chrome != null &&\n            window.chrome.app != null &&\n            window.chrome.app.runtime != null;\n    _SUPPORT_POINTER = window.PointerEvent != null && !_IS_MAC;\n}\nif (typeof document === 'object') {\n    _SUPPORT_TOUCH = 'ontouchstart' in document.documentElement;\n    try {\n        const options = Object.defineProperty({}, 'passive', {\n            get() {\n                _SUPPORT_PASSIVE = true;\n            },\n        });\n        const div = document.createElement('div');\n        if (div.addEventListener) {\n            div.addEventListener('click', () => { }, options);\n        }\n    }\n    catch (err) {\n        // pass\n    }\n}\nexport var Platform;\n(function (Platform) {\n    Platform.IS_MAC = _IS_MAC;\n    Platform.IS_IOS = _IS_IOS;\n    Platform.IS_WINDOWS = _IS_WINDOWS;\n    Platform.IS_IE = _IS_IE;\n    Platform.IS_IE11 = _IS_IE11;\n    Platform.IS_EDGE = _IS_EDGE;\n    /**\n     * A flag indicating whether the browser is Netscape (including Firefox).\n     */\n    Platform.IS_NETSCAPE = _IS_NETSCAPE;\n    /**\n     * A flag indicating whether the the this is running inside a Chrome App.\n     */\n    Platform.IS_CHROME_APP = _IS_CHROME_APP;\n    Platform.IS_CHROME = _IS_CHROME;\n    Platform.IS_OPERA = _IS_OPERA;\n    Platform.IS_FIREFOX = _IS_FIREFOX;\n    Platform.IS_SAFARI = _IS_SAFARI;\n    /**\n     * A flag indicating whether this device supports touchstart/-move/-end\n     * events (Apple iOS, Android, Chromebook and Chrome Browser on touch-enabled\n     * devices).\n     */\n    Platform.SUPPORT_TOUCH = _SUPPORT_TOUCH;\n    /**\n     * A flag indicating whether this device supports Microsoft pointer events.\n     */\n    Platform.SUPPORT_POINTER = _SUPPORT_POINTER;\n    Platform.SUPPORT_PASSIVE = _SUPPORT_PASSIVE;\n    /**\n     * A flag indicating whether foreignObject support is not available. This\n     * is the case for Opera, older SVG-based browsers and all versions of IE.\n     */\n    Platform.NO_FOREIGNOBJECT = _NO_FOREIGNOBJECT;\n    Platform.SUPPORT_FOREIGNOBJECT = !Platform.NO_FOREIGNOBJECT;\n})(Platform || (Platform = {}));\n(function (Platform) {\n    function getHMRStatus() {\n        const mod = window.module;\n        if (mod != null && mod.hot != null && mod.hot.status != null) {\n            return mod.hot.status();\n        }\n        return 'unkonwn';\n    }\n    Platform.getHMRStatus = getHMRStatus;\n    function isApplyingHMR() {\n        return getHMRStatus() === 'apply';\n    }\n    Platform.isApplyingHMR = isApplyingHMR;\n    // This function checks if the specified event is supported by the browser.\n    // Source: http://perfectionkills.com/detecting-event-support-without-browser-sniffing/\n    const TAGNAMES = {\n        select: 'input',\n        change: 'input',\n        submit: 'form',\n        reset: 'form',\n        error: 'img',\n        load: 'img',\n        abort: 'img',\n    };\n    function isEventSupported(event) {\n        const elem = document.createElement(TAGNAMES[event] || 'div');\n        const eventName = `on${event}`;\n        let isSupported = eventName in elem;\n        if (!isSupported) {\n            elem.setAttribute(eventName, 'return;');\n            isSupported = typeof elem[eventName] === 'function';\n        }\n        return isSupported;\n    }\n    Platform.isEventSupported = isEventSupported;\n})(Platform || (Platform = {}));\n//# sourceMappingURL=index.js.map","const rclass = /[\\t\\r\\n\\f]/g;\nconst rnotwhite = /\\S+/g;\nconst fillSpaces = (str) => ` ${str} `;\nexport function getClass(elem) {\n    return (elem && elem.getAttribute && elem.getAttribute('class')) || '';\n}\nexport function hasClass(elem, selector) {\n    if (elem == null || selector == null) {\n        return false;\n    }\n    const classNames = fillSpaces(getClass(elem));\n    const className = fillSpaces(selector);\n    return elem.nodeType === 1\n        ? classNames.replace(rclass, ' ').includes(className)\n        : false;\n}\nexport function addClass(elem, selector) {\n    if (elem == null || selector == null) {\n        return;\n    }\n    if (typeof selector === 'function') {\n        return addClass(elem, selector(getClass(elem)));\n    }\n    if (typeof selector === 'string' && elem.nodeType === 1) {\n        const classes = selector.match(rnotwhite) || [];\n        const oldValue = fillSpaces(getClass(elem)).replace(rclass, ' ');\n        let newValue = classes.reduce((memo, cls) => {\n            if (memo.indexOf(fillSpaces(cls)) < 0) {\n                return `${memo}${cls} `;\n            }\n            return memo;\n        }, oldValue);\n        newValue = newValue.trim();\n        if (oldValue !== newValue) {\n            elem.setAttribute('class', newValue);\n        }\n    }\n}\nexport function removeClass(elem, selector) {\n    if (elem == null) {\n        return;\n    }\n    if (typeof selector === 'function') {\n        return removeClass(elem, selector(getClass(elem)));\n    }\n    if ((!selector || typeof selector === 'string') && elem.nodeType === 1) {\n        const classes = (selector || '').match(rnotwhite) || [];\n        const oldValue = fillSpaces(getClass(elem)).replace(rclass, ' ');\n        let newValue = classes.reduce((memo, cls) => {\n            const className = fillSpaces(cls);\n            if (memo.indexOf(className) > -1) {\n                return memo.replace(className, ' ');\n            }\n            return memo;\n        }, oldValue);\n        newValue = selector ? newValue.trim() : '';\n        if (oldValue !== newValue) {\n            elem.setAttribute('class', newValue);\n        }\n    }\n}\nexport function toggleClass(elem, selector, stateVal) {\n    if (elem == null || selector == null) {\n        return;\n    }\n    if (stateVal != null && typeof selector === 'string') {\n        stateVal ? addClass(elem, selector) : removeClass(elem, selector);\n        return;\n    }\n    if (typeof selector === 'function') {\n        return toggleClass(elem, selector(getClass(elem), stateVal), stateVal);\n    }\n    if (typeof selector === 'string') {\n        const metches = selector.match(rnotwhite) || [];\n        metches.forEach((cls) => {\n            hasClass(elem, cls) ? removeClass(elem, cls) : addClass(elem, cls);\n        });\n    }\n}\n//# sourceMappingURL=class.js.map","import { hasClass } from './class';\nlet idCounter = 0;\nexport function uniqueId() {\n    idCounter += 1;\n    return `v${idCounter}`;\n}\nexport function ensureId(elem) {\n    if (elem.id == null || elem.id === '') {\n        elem.id = uniqueId();\n    }\n    return elem.id;\n}\n/**\n * Returns true if object is an instance of SVGGraphicsElement.\n * @see https://developer.mozilla.org/en-US/docs/Web/API/SVGGraphicsElement\n */\nexport function isSVGGraphicsElement(elem) {\n    if (elem == null) {\n        return false;\n    }\n    return typeof elem.getScreenCTM === 'function' && elem instanceof SVGElement;\n}\nexport const ns = {\n    svg: 'http://www.w3.org/2000/svg',\n    xmlns: 'http://www.w3.org/2000/xmlns/',\n    xml: 'http://www.w3.org/XML/1998/namespace',\n    xlink: 'http://www.w3.org/1999/xlink',\n    xhtml: 'http://www.w3.org/1999/xhtml',\n};\nexport const svgVersion = '1.1';\nexport function createElement(tagName, doc = document) {\n    return doc.createElement(tagName);\n}\nexport function createElementNS(tagName, namespaceURI = ns.xhtml, doc = document) {\n    return doc.createElementNS(namespaceURI, tagName);\n}\nexport function createSvgElement(tagName, doc = document) {\n    return createElementNS(tagName, ns.svg, doc);\n}\nexport function createSvgDocument(content) {\n    if (content) {\n        const xml = `<svg xmlns=\"${ns.svg}\" xmlns:xlink=\"${ns.xlink}\" version=\"${svgVersion}\">${content}</svg>`; // lgtm[js/html-constructed-from-input]\n        const { documentElement } = parseXML(xml, { async: false });\n        return documentElement;\n    }\n    const svg = document.createElementNS(ns.svg, 'svg');\n    svg.setAttributeNS(ns.xmlns, 'xmlns:xlink', ns.xlink);\n    svg.setAttribute('version', svgVersion);\n    return svg;\n}\nexport function parseXML(data, options = {}) {\n    let xml;\n    try {\n        const parser = new DOMParser();\n        if (options.async != null) {\n            const instance = parser;\n            instance.async = options.async;\n        }\n        xml = parser.parseFromString(data, options.mimeType || 'text/xml');\n    }\n    catch (error) {\n        xml = undefined;\n    }\n    if (!xml || xml.getElementsByTagName('parsererror').length) {\n        throw new Error(`Invalid XML: ${data}`);\n    }\n    return xml;\n}\nexport function tagName(node, lowercase = true) {\n    const nodeName = node.nodeName;\n    return lowercase ? nodeName.toLowerCase() : nodeName.toUpperCase();\n}\nexport function index(elem) {\n    let index = 0;\n    let node = elem.previousSibling;\n    while (node) {\n        if (node.nodeType === 1) {\n            index += 1;\n        }\n        node = node.previousSibling;\n    }\n    return index;\n}\nexport function find(elem, selector) {\n    return elem.querySelectorAll(selector);\n}\nexport function findOne(elem, selector) {\n    return elem.querySelector(selector);\n}\nexport function findParentByClass(elem, className, terminator) {\n    const ownerSVGElement = elem.ownerSVGElement;\n    let node = elem.parentNode;\n    while (node && node !== terminator && node !== ownerSVGElement) {\n        if (hasClass(node, className)) {\n            return node;\n        }\n        node = node.parentNode;\n    }\n    return null;\n}\nexport function contains(parent, child) {\n    const bup = child && child.parentNode;\n    return (parent === bup ||\n        !!(bup && bup.nodeType === 1 && parent.compareDocumentPosition(bup) & 16) // eslint-disable-line no-bitwise\n    );\n}\nexport function remove(elem) {\n    if (elem) {\n        const elems = Array.isArray(elem) ? elem : [elem];\n        elems.forEach((item) => {\n            if (item.parentNode) {\n                item.parentNode.removeChild(item);\n            }\n        });\n    }\n}\nexport function empty(elem) {\n    while (elem.firstChild) {\n        elem.removeChild(elem.firstChild);\n    }\n}\nexport function append(elem, elems) {\n    const arr = Array.isArray(elems) ? elems : [elems];\n    arr.forEach((child) => {\n        if (child != null) {\n            elem.appendChild(child);\n        }\n    });\n}\nexport function prepend(elem, elems) {\n    const child = elem.firstChild;\n    return child ? before(child, elems) : append(elem, elems);\n}\nexport function before(elem, elems) {\n    const parent = elem.parentNode;\n    if (parent) {\n        const arr = Array.isArray(elems) ? elems : [elems];\n        arr.forEach((child) => {\n            if (child != null) {\n                parent.insertBefore(child, elem);\n            }\n        });\n    }\n}\nexport function after(elem, elems) {\n    const parent = elem.parentNode;\n    if (parent) {\n        const arr = Array.isArray(elems) ? elems : [elems];\n        arr.forEach((child) => {\n            if (child != null) {\n                parent.insertBefore(child, elem.nextSibling);\n            }\n        });\n    }\n}\nexport function appendTo(elem, target) {\n    if (target != null) {\n        target.appendChild(elem);\n    }\n}\nexport function isElement(x) {\n    return !!x && x.nodeType === 1;\n}\n// Determines whether a node is an HTML node\nexport function isHTMLElement(elem) {\n    try {\n        // Using W3 DOM2 (works for FF, Opera and Chrome)\n        return elem instanceof HTMLElement;\n    }\n    catch (e) {\n        // Browsers not supporting W3 DOM2 don't have HTMLElement and\n        // an exception is thrown and we end up here. Testing some\n        // properties that all elements have (works on IE7)\n        return (typeof elem === 'object' &&\n            elem.nodeType === 1 &&\n            typeof elem.style === 'object' &&\n            typeof elem.ownerDocument === 'object');\n    }\n}\nexport function children(parent, className) {\n    const matched = [];\n    let elem = parent.firstChild;\n    for (; elem; elem = elem.nextSibling) {\n        if (elem.nodeType === 1) {\n            if (!className || hasClass(elem, className)) {\n                matched.push(elem);\n            }\n        }\n    }\n    return matched;\n}\n//# sourceMappingURL=elem.js.map","import { ns } from './elem';\nimport { kebabCase } from '../string/format';\nexport const CASE_SENSITIVE_ATTR = [\n    'viewBox',\n    'attributeName',\n    'attributeType',\n    'repeatCount',\n    'textLength',\n    'lengthAdjust',\n    'gradientUnits',\n];\nexport function getAttribute(elem, name) {\n    return elem.getAttribute(name);\n}\nexport function removeAttribute(elem, name) {\n    const qualified = qualifyAttr(name);\n    if (qualified.ns) {\n        if (elem.hasAttributeNS(qualified.ns, qualified.local)) {\n            elem.removeAttributeNS(qualified.ns, qualified.local);\n        }\n    }\n    else if (elem.hasAttribute(name)) {\n        elem.removeAttribute(name);\n    }\n}\nexport function setAttribute(elem, name, value) {\n    if (value == null) {\n        return removeAttribute(elem, name);\n    }\n    const qualified = qualifyAttr(name);\n    if (qualified.ns && typeof value === 'string') {\n        elem.setAttributeNS(qualified.ns, name, value);\n    }\n    else if (name === 'id') {\n        elem.id = `${value}`;\n    }\n    else {\n        elem.setAttribute(name, `${value}`);\n    }\n}\nexport function setAttributes(elem, attrs) {\n    Object.keys(attrs).forEach((name) => {\n        setAttribute(elem, name, attrs[name]);\n    });\n}\nexport function attr(elem, name, value) {\n    if (name == null) {\n        const attrs = elem.attributes;\n        const ret = {};\n        for (let i = 0; i < attrs.length; i += 1) {\n            ret[attrs[i].name] = attrs[i].value;\n        }\n        return ret;\n    }\n    if (typeof name === 'string' && value === undefined) {\n        return elem.getAttribute(name);\n    }\n    if (typeof name === 'object') {\n        setAttributes(elem, name);\n    }\n    else {\n        setAttribute(elem, name, value);\n    }\n}\nexport function qualifyAttr(name) {\n    if (name.indexOf(':') !== -1) {\n        const combinedKey = name.split(':');\n        return {\n            ns: ns[combinedKey[0]],\n            local: combinedKey[1],\n        };\n    }\n    return {\n        ns: null,\n        local: name,\n    };\n}\nexport function kebablizeAttrs(attrs) {\n    const result = {};\n    Object.keys(attrs).forEach((key) => {\n        const name = CASE_SENSITIVE_ATTR.includes(key) ? key : kebabCase(key);\n        result[name] = attrs[key];\n    });\n    return result;\n}\nexport function styleToObject(styleString) {\n    const ret = {};\n    const styles = styleString.split(';');\n    styles.forEach((item) => {\n        const section = item.trim();\n        if (section) {\n            const pair = section.split('=');\n            if (pair.length) {\n                ret[pair[0].trim()] = pair[1] ? pair[1].trim() : '';\n            }\n        }\n    });\n    return ret;\n}\nexport function mergeAttrs(target, source) {\n    Object.keys(source).forEach((attr) => {\n        if (attr === 'class') {\n            target[attr] = target[attr]\n                ? `${target[attr]} ${source[attr]}`\n                : source[attr];\n        }\n        else if (attr === 'style') {\n            const to = typeof target[attr] === 'object';\n            const so = typeof source[attr] === 'object';\n            let tt;\n            let ss;\n            if (to && so) {\n                tt = target[attr];\n                ss = source[attr];\n            }\n            else if (to) {\n                tt = target[attr];\n                ss = styleToObject(source[attr]);\n            }\n            else if (so) {\n                tt = styleToObject(target[attr]);\n                ss = source[attr];\n            }\n            else {\n                tt = styleToObject(target[attr]);\n                ss = styleToObject(source[attr]);\n            }\n            target[attr] = mergeAttrs(tt, ss);\n        }\n        else {\n            target[attr] = source[attr];\n        }\n    });\n    return target;\n}\n//# sourceMappingURL=attr.js.map","import { ObjectExt } from '../object';\nimport { mergeAttrs } from '../dom/attr';\nexport function annotate(t, annotations, opt = {}) {\n    const offset = opt.offset || 0;\n    const compacted = [];\n    const ret = [];\n    let curr;\n    let prev;\n    let batch = null;\n    for (let i = 0; i < t.length; i += 1) {\n        curr = ret[i] = t[i];\n        for (let j = 0, jj = annotations.length; j < jj; j += 1) {\n            const annotation = annotations[j];\n            const start = annotation.start + offset;\n            const end = annotation.end + offset;\n            if (i >= start && i < end) {\n                if (typeof curr === 'string') {\n                    curr = ret[i] = {\n                        t: t[i],\n                        attrs: annotation.attrs,\n                    };\n                }\n                else {\n                    curr.attrs = mergeAttrs(mergeAttrs({}, curr.attrs), annotation.attrs);\n                }\n                if (opt.includeAnnotationIndices) {\n                    if (curr.annotations == null) {\n                        curr.annotations = [];\n                    }\n                    curr.annotations.push(j);\n                }\n            }\n        }\n        prev = ret[i - 1];\n        if (!prev) {\n            batch = curr;\n        }\n        else if (ObjectExt.isObject(curr) && ObjectExt.isObject(prev)) {\n            batch = batch;\n            // Both previous item and the current one are annotations.\n            // If the attributes didn't change, merge the text.\n            if (JSON.stringify(curr.attrs) === JSON.stringify(prev.attrs)) {\n                batch.t += curr.t;\n            }\n            else {\n                compacted.push(batch);\n                batch = curr;\n            }\n        }\n        else if (ObjectExt.isObject(curr)) {\n            // Previous item was a string, current item is an annotation.\n            batch = batch;\n            compacted.push(batch);\n            batch = curr;\n        }\n        else if (ObjectExt.isObject(prev)) {\n            // Previous item was an annotation, current item is a string.\n            batch = batch;\n            compacted.push(batch);\n            batch = curr;\n        }\n        else {\n            // Both previous and current item are strings.\n            batch = (batch || '') + curr;\n        }\n    }\n    if (batch != null) {\n        compacted.push(batch);\n    }\n    return compacted;\n}\nexport function findAnnotationsAtIndex(annotations, index) {\n    return annotations\n        ? annotations.filter((a) => a.start < index && index <= a.end)\n        : [];\n}\nexport function findAnnotationsBetweenIndexes(annotations, start, end) {\n    return annotations\n        ? annotations.filter((a) => (start >= a.start && start < a.end) ||\n            (end > a.start && end <= a.end) ||\n            (a.start >= start && a.end < end))\n        : [];\n}\nexport function shiftAnnotations(annotations, index, offset) {\n    if (annotations) {\n        annotations.forEach((a) => {\n            if (a.start < index && a.end >= index) {\n                a.end += offset;\n            }\n            else if (a.start >= index) {\n                a.start += offset;\n                a.end += offset;\n            }\n        });\n    }\n    return annotations;\n}\n//# sourceMappingURL=annotate.js.map","/**\n * Replaces all spaces with the Unicode No-break space.\n * ref: http://www.fileformat.info/info/unicode/char/a0/index.htm\n *\n * IE would otherwise collapse all spaces into one. This is useful\n * e.g. in tests when you want to compare the actual DOM text content\n * without having to add the unicode character in the place of all spaces.\n */\nexport function sanitize(text) {\n    return text.replace(/ /g, '\\u00A0');\n}\n//# sourceMappingURL=sanitize.js.map","export var DataUri;\n(function (DataUri) {\n    function isDataUrl(url) {\n        const prefix = 'data:';\n        return url.substr(0, prefix.length) === prefix;\n    }\n    DataUri.isDataUrl = isDataUrl;\n    /**\n     * Converts an image at `url` to base64-encoded data uri.\n     * The mime type of the image is inferred from the `url` file extension.\n     */\n    function imageToDataUri(url, callback) {\n        // No need to convert to data uri if it is already in data uri.\n        if (!url || isDataUrl(url)) {\n            // Keep the async nature of the function.\n            setTimeout(() => callback(null, url));\n            return;\n        }\n        const onError = () => {\n            callback(new Error(`Failed to load image: ${url}`));\n        };\n        const onLoad = window.FileReader\n            ? // chrome, IE10+\n                (xhr) => {\n                    if (xhr.status === 200) {\n                        const reader = new FileReader();\n                        reader.onload = (evt) => {\n                            const dataUri = evt.target.result;\n                            callback(null, dataUri);\n                        };\n                        reader.onerror = onError;\n                        reader.readAsDataURL(xhr.response);\n                    }\n                    else {\n                        onError();\n                    }\n                }\n            : (xhr) => {\n                const toString = (u8a) => {\n                    const CHUNK_SZ = 0x8000;\n                    const c = [];\n                    for (let i = 0; i < u8a.length; i += CHUNK_SZ) {\n                        c.push(String.fromCharCode.apply(null, u8a.subarray(i, i + CHUNK_SZ)));\n                    }\n                    return c.join('');\n                };\n                if (xhr.status === 200) {\n                    let suffix = url.split('.').pop() || 'png';\n                    if (suffix === 'svg') {\n                        suffix = 'svg+xml';\n                    }\n                    const meta = `data:image/${suffix};base64,`;\n                    const bytes = new Uint8Array(xhr.response);\n                    const base64 = meta + btoa(toString(bytes));\n                    callback(null, base64);\n                }\n                else {\n                    onError();\n                }\n            };\n        const xhr = new XMLHttpRequest();\n        xhr.responseType = window.FileReader ? 'blob' : 'arraybuffer';\n        xhr.open('GET', url, true);\n        xhr.addEventListener('error', onError);\n        xhr.addEventListener('load', () => onLoad(xhr));\n        xhr.send();\n    }\n    DataUri.imageToDataUri = imageToDataUri;\n    function dataUriToBlob(dataUrl) {\n        let uri = dataUrl.replace(/\\s/g, '');\n        uri = decodeURIComponent(uri);\n        const index = uri.indexOf(',');\n        const dataType = uri.slice(0, index); // e.g. 'data:image/jpeg;base64'\n        const mime = dataType.split(':')[1].split(';')[0]; // e.g. 'image/jpeg'\n        const data = uri.slice(index + 1);\n        let decodedString;\n        if (dataType.indexOf('base64') >= 0) {\n            // data may be encoded in base64\n            decodedString = atob(data);\n        }\n        else {\n            // convert the decoded string to UTF-8\n            decodedString = unescape(encodeURIComponent(data));\n        }\n        // write the bytes of the string to a typed array\n        const ia = new Uint8Array(decodedString.length);\n        for (let i = 0; i < decodedString.length; i += 1) {\n            ia[i] = decodedString.charCodeAt(i);\n        }\n        return new Blob([ia], { type: mime });\n    }\n    DataUri.dataUriToBlob = dataUriToBlob;\n    function downloadBlob(blob, fileName) {\n        const msSaveBlob = window.navigator.msSaveBlob;\n        if (msSaveBlob) {\n            // requires IE 10+\n            // pulls up a save dialog\n            msSaveBlob(blob, fileName);\n        }\n        else {\n            // other browsers\n            // downloads directly in Chrome and Safari\n            // presents a save/open dialog in Firefox\n            // Firefox bug: `from` field in save dialog always shows `from:blob:`\n            // https://bugzilla.mozilla.org/show_bug.cgi?id=1053327\n            const url = window.URL.createObjectURL(blob);\n            const link = document.createElement('a');\n            link.href = url;\n            link.download = fileName;\n            document.body.appendChild(link);\n            link.click();\n            document.body.removeChild(link);\n            // mark the url for garbage collection\n            window.URL.revokeObjectURL(url);\n        }\n    }\n    DataUri.downloadBlob = downloadBlob;\n    function downloadDataUri(dataUrl, fileName) {\n        const blob = dataUriToBlob(dataUrl);\n        downloadBlob(blob, fileName);\n    }\n    DataUri.downloadDataUri = downloadDataUri;\n    function parseViewBox(svg) {\n        const matches = svg.match(/<svg[^>]*viewBox\\s*=\\s*([\"']?)(.+?)\\1[^>]*>/i);\n        if (matches && matches[2]) {\n            return matches[2].replace(/\\s+/, ' ').split(' ');\n        }\n        return null;\n    }\n    function getNumber(str) {\n        const ret = parseFloat(str);\n        return Number.isNaN(ret) ? null : ret;\n    }\n    function svgToDataUrl(svg, options = {}) {\n        let viewBox = null;\n        const getNumberFromViewBox = (index) => {\n            if (viewBox == null) {\n                viewBox = parseViewBox(svg);\n            }\n            if (viewBox != null) {\n                return getNumber(viewBox[index]);\n            }\n            return null;\n        };\n        const getNumberFromMatches = (reg) => {\n            const matches = svg.match(reg);\n            if (matches && matches[2]) {\n                return getNumber(matches[2]);\n            }\n            return null;\n        };\n        let w = options.width;\n        if (w == null) {\n            w = getNumberFromMatches(/<svg[^>]*width\\s*=\\s*([\"']?)(.+?)\\1[^>]*>/i);\n        }\n        if (w == null) {\n            w = getNumberFromViewBox(2);\n        }\n        if (w == null) {\n            throw new Error('Can not parse width from svg string');\n        }\n        let h = options.height;\n        if (h == null) {\n            h = getNumberFromMatches(/<svg[^>]*height\\s*=\\s*([\"']?)(.+?)\\1[^>]*>/i);\n        }\n        if (h == null) {\n            h = getNumberFromViewBox(3);\n        }\n        if (h == null) {\n            throw new Error('Can not parse height from svg string');\n        }\n        const decoded = encodeURIComponent(svg)\n            .replace(/'/g, '%27')\n            .replace(/\"/g, '%22');\n        const header = 'data:image/svg+xml';\n        const dataUrl = `${header},${decoded}`;\n        return dataUrl;\n    }\n    DataUri.svgToDataUrl = svgToDataUrl;\n})(DataUri || (DataUri = {}));\n//# sourceMappingURL=index.js.map","let millimeterSize;\nconst supportedUnits = {\n    px(val) {\n        return val;\n    },\n    mm(val) {\n        return millimeterSize * val;\n    },\n    cm(val) {\n        return millimeterSize * val * 10;\n    },\n    in(val) {\n        return millimeterSize * val * 25.4;\n    },\n    pt(val) {\n        return millimeterSize * ((25.4 * val) / 72);\n    },\n    pc(val) {\n        return millimeterSize * ((25.4 * val) / 6);\n    },\n};\n// eslint-disable-next-line\nexport var Unit;\n(function (Unit) {\n    function measure(cssWidth, cssHeight, unit) {\n        const div = document.createElement('div');\n        const style = div.style;\n        style.display = 'inline-block';\n        style.position = 'absolute';\n        style.left = '-15000px';\n        style.top = '-15000px';\n        style.width = cssWidth + (unit || 'px');\n        style.height = cssHeight + (unit || 'px');\n        document.body.appendChild(div);\n        const rect = div.getBoundingClientRect();\n        const size = {\n            width: rect.width || 0,\n            height: rect.height || 0,\n        };\n        document.body.removeChild(div);\n        return size;\n    }\n    Unit.measure = measure;\n    function toPx(val, unit) {\n        if (millimeterSize == null) {\n            millimeterSize = measure('1', '1', 'mm').width;\n        }\n        const convert = unit ? supportedUnits[unit] : null;\n        if (convert) {\n            return convert(val);\n        }\n        return val;\n    }\n    Unit.toPx = toPx;\n})(Unit || (Unit = {}));\n//# sourceMappingURL=index.js.map","const hyphenPattern = /-(.)/g;\nfunction camelize(str) {\n    return str.replace(hyphenPattern, (_, char) => char.toUpperCase());\n}\nconst memoized = {};\nconst prefixes = ['webkit', 'ms', 'moz', 'o'];\nconst testStyle = typeof document !== 'undefined' ? document.createElement('div').style : {};\nfunction getWithPrefix(name) {\n    for (let i = 0; i < prefixes.length; i += 1) {\n        const prefixedName = prefixes[i] + name;\n        if (prefixedName in testStyle) {\n            return prefixedName;\n        }\n    }\n    return null;\n}\nexport function getVendorPrefixedName(property) {\n    const name = camelize(property);\n    if (memoized[name] == null) {\n        const capitalizedName = name.charAt(0).toUpperCase() + name.slice(1);\n        memoized[name] = name in testStyle ? name : getWithPrefix(capitalizedName);\n    }\n    return memoized[name];\n}\n//# sourceMappingURL=prefix.js.map","import { getVendorPrefixedName } from './prefix';\nexport function setPrefixedStyle(style, name, value) {\n    const vendor = getVendorPrefixedName(name);\n    if (vendor != null) {\n        style[vendor] = value;\n    }\n    style[name] = value;\n}\nexport function getComputedStyle(elem, name) {\n    // IE9+\n    const computed = elem.ownerDocument &&\n        elem.ownerDocument.defaultView &&\n        elem.ownerDocument.defaultView.opener\n        ? elem.ownerDocument.defaultView.getComputedStyle(elem, null)\n        : window.getComputedStyle(elem, null);\n    if (computed && name) {\n        return computed.getPropertyValue(name) || computed[name];\n    }\n    return computed;\n}\nexport function hasScrollbars(container) {\n    const style = getComputedStyle(container);\n    return (style != null && (style.overflow === 'scroll' || style.overflow === 'auto'));\n}\n//# sourceMappingURL=style.js.map","export const clearSelection = (function () {\n    if (typeof document == 'undefined')\n        return function () { };\n    const doc = document;\n    if (doc.selection) {\n        return function () {\n            doc.selection.empty();\n        };\n    }\n    if (window.getSelection) {\n        return function () {\n            const selection = window.getSelection();\n            if (selection) {\n                if (selection.empty) {\n                    selection.empty();\n                }\n                else if (selection.removeAllRanges) {\n                    selection.removeAllRanges();\n                }\n            }\n        };\n    }\n    return function () { };\n})();\n//# sourceMappingURL=selection.js.map","import { getVendorPrefixedName } from './prefix';\nconst numericProps = {\n    animationIterationCount: true,\n    columnCount: true,\n    flexGrow: true,\n    flexShrink: true,\n    fontWeight: true,\n    gridArea: true,\n    gridColumn: true,\n    gridColumnEnd: true,\n    gridColumnStart: true,\n    gridRow: true,\n    gridRowEnd: true,\n    gridRowStart: true,\n    lineHeight: true,\n    opacity: true,\n    order: true,\n    orphans: true,\n    widows: true,\n    zIndex: true,\n};\nexport function isCSSVariable(prop) {\n    return /^--/.test(prop);\n}\nexport function computeStyle(elem, prop, isVariable) {\n    const style = window.getComputedStyle(elem, null);\n    return isVariable\n        ? style.getPropertyValue(prop) || undefined\n        : style[prop] || elem.style[prop];\n}\nexport function computeStyleInt(elem, prop) {\n    return parseInt(computeStyle(elem, prop), 10) || 0;\n}\nfunction getSuffixedValue(prop, value) {\n    return !numericProps[prop] && typeof value === 'number' ? `${value}px` : value;\n}\nexport function css(elem, prop, value) {\n    if (typeof prop === 'string') {\n        const isVariable = isCSSVariable(prop);\n        if (!isVariable) {\n            prop = getVendorPrefixedName(prop); // eslint-disable-line\n        }\n        if (value === undefined) {\n            return computeStyle(elem, prop, isVariable);\n        }\n        if (!isVariable) {\n            value = getSuffixedValue(prop, value); // eslint-disable-line\n        }\n        const style = elem.style;\n        if (isVariable) {\n            style.setProperty(prop, value);\n        }\n        else {\n            style[prop] = value;\n        }\n        return;\n    }\n    // eslint-disable-next-line\n    for (const key in prop) {\n        css(elem, key, prop[key]);\n    }\n}\n//# sourceMappingURL=css.js.map","import { StringExt } from '../string';\nconst dataset = new WeakMap();\nexport function getData(elem, name) {\n    const key = StringExt.camelCase(name);\n    const cache = dataset.get(elem);\n    if (cache) {\n        return cache[key];\n    }\n}\nexport function setData(elem, name, value) {\n    const key = StringExt.camelCase(name);\n    const cache = dataset.get(elem);\n    if (cache) {\n        cache[key] = value;\n    }\n    else {\n        dataset.set(elem, {\n            [key]: value,\n        });\n    }\n}\nexport function data(elem, name, value) {\n    if (!name) {\n        const datas = {};\n        Object.keys(dataset).forEach((key) => {\n            datas[key] = getData(elem, key);\n        });\n        return datas;\n    }\n    if (typeof name === 'string') {\n        if (value === undefined) {\n            return getData(elem, name);\n        }\n        setData(elem, name, value);\n        return;\n    }\n    // eslint-disable-next-line\n    for (const key in name) {\n        data(elem, key, name[key]);\n    }\n}\n//# sourceMappingURL=data.js.map","const propMap = {\n    /* GENERAL */\n    class: 'className',\n    contenteditable: 'contentEditable',\n    /* LABEL */\n    for: 'htmlFor',\n    /* INPUT */\n    readonly: 'readOnly',\n    maxlength: 'maxLength',\n    tabindex: 'tabIndex',\n    /* TABLE */\n    colspan: 'colSpan',\n    rowspan: 'rowSpan',\n    /* IMAGE */\n    usemap: 'useMap',\n};\nexport function prop(elem, props, value) {\n    if (!props) {\n        return;\n    }\n    if (typeof props === 'string') {\n        props = propMap[props] || props; // eslint-disable-line\n        if (arguments.length < 3) {\n            return elem[props];\n        }\n        ;\n        elem[props] = value;\n        return;\n    }\n    // eslint-disable-next-line\n    for (const key in props) {\n        prop(elem, key, props[key]);\n    }\n}\n//# sourceMappingURL=prop.js.map","import * as Dom from '../dom/main';\nexport class Vector {\n    get [Symbol.toStringTag]() {\n        return Vector.toStringTag;\n    }\n    get type() {\n        return this.node.nodeName;\n    }\n    get id() {\n        return this.node.id;\n    }\n    set id(id) {\n        this.node.id = id;\n    }\n    constructor(elem, attrs, children) {\n        if (!elem) {\n            throw new TypeError('Invalid element to create vector');\n        }\n        let node;\n        if (Vector.isVector(elem)) {\n            node = elem.node;\n        }\n        else if (typeof elem === 'string') {\n            if (elem.toLowerCase() === 'svg') {\n                node = Dom.createSvgDocument();\n            }\n            else if (elem[0] === '<') {\n                const doc = Dom.createSvgDocument(elem);\n                // only import the first child\n                node = document.importNode(doc.firstChild, true);\n            }\n            else {\n                node = document.createElementNS(Dom.ns.svg, elem);\n            }\n        }\n        else {\n            node = elem;\n        }\n        this.node = node;\n        if (attrs) {\n            this.setAttributes(attrs);\n        }\n        if (children) {\n            this.append(children);\n        }\n    }\n    transform(matrix, options) {\n        if (matrix == null) {\n            return Dom.transform(this.node);\n        }\n        Dom.transform(this.node, matrix, options);\n        return this;\n    }\n    translate(tx, ty = 0, options = {}) {\n        if (tx == null) {\n            return Dom.translate(this.node);\n        }\n        Dom.translate(this.node, tx, ty, options);\n        return this;\n    }\n    rotate(angle, cx, cy, options = {}) {\n        if (angle == null) {\n            return Dom.rotate(this.node);\n        }\n        Dom.rotate(this.node, angle, cx, cy, options);\n        return this;\n    }\n    scale(sx, sy) {\n        if (sx == null) {\n            return Dom.scale(this.node);\n        }\n        Dom.scale(this.node, sx, sy);\n        return this;\n    }\n    /**\n     * Returns an SVGMatrix that specifies the transformation necessary\n     * to convert this coordinate system into `target` coordinate system.\n     */\n    getTransformToElement(target) {\n        const ref = Vector.toNode(target);\n        return Dom.getTransformToElement(this.node, ref);\n    }\n    removeAttribute(name) {\n        Dom.removeAttribute(this.node, name);\n        return this;\n    }\n    getAttribute(name) {\n        return Dom.getAttribute(this.node, name);\n    }\n    setAttribute(name, value) {\n        Dom.setAttribute(this.node, name, value);\n        return this;\n    }\n    setAttributes(attrs) {\n        Dom.setAttributes(this.node, attrs);\n        return this;\n    }\n    attr(name, value) {\n        if (name == null) {\n            return Dom.attr(this.node);\n        }\n        if (typeof name === 'string' && value === undefined) {\n            return Dom.attr(this.node, name);\n        }\n        if (typeof name === 'object') {\n            Dom.attr(this.node, name);\n        }\n        else {\n            Dom.attr(this.node, name, value);\n        }\n        return this;\n    }\n    svg() {\n        return this.node instanceof SVGSVGElement\n            ? this\n            : Vector.create(this.node.ownerSVGElement);\n    }\n    defs() {\n        const context = this.svg() || this;\n        const defsNode = context.node.getElementsByTagName('defs')[0];\n        if (defsNode) {\n            return Vector.create(defsNode);\n        }\n        return Vector.create('defs').appendTo(context);\n    }\n    text(content, options = {}) {\n        Dom.text(this.node, content, options);\n        return this;\n    }\n    tagName() {\n        return Dom.tagName(this.node);\n    }\n    clone() {\n        return Vector.create(this.node.cloneNode(true));\n    }\n    remove() {\n        Dom.remove(this.node);\n        return this;\n    }\n    empty() {\n        Dom.empty(this.node);\n        return this;\n    }\n    append(elems) {\n        Dom.append(this.node, Vector.toNodes(elems));\n        return this;\n    }\n    appendTo(target) {\n        Dom.appendTo(this.node, Vector.isVector(target) ? target.node : target);\n        return this;\n    }\n    prepend(elems) {\n        Dom.prepend(this.node, Vector.toNodes(elems));\n        return this;\n    }\n    before(elems) {\n        Dom.before(this.node, Vector.toNodes(elems));\n        return this;\n    }\n    replace(elem) {\n        if (this.node.parentNode) {\n            this.node.parentNode.replaceChild(Vector.toNode(elem), this.node);\n        }\n        return Vector.create(elem);\n    }\n    first() {\n        return this.node.firstChild\n            ? Vector.create(this.node.firstChild)\n            : null;\n    }\n    last() {\n        return this.node.lastChild\n            ? Vector.create(this.node.lastChild)\n            : null;\n    }\n    get(index) {\n        const child = this.node.childNodes[index];\n        return child ? Vector.create(child) : null;\n    }\n    indexOf(elem) {\n        const children = Array.prototype.slice.call(this.node.childNodes);\n        return children.indexOf(Vector.toNode(elem));\n    }\n    find(selector) {\n        const vels = [];\n        const nodes = Dom.find(this.node, selector);\n        if (nodes) {\n            for (let i = 0, ii = nodes.length; i < ii; i += 1) {\n                vels.push(Vector.create(nodes[i]));\n            }\n        }\n        return vels;\n    }\n    findOne(selector) {\n        const found = Dom.findOne(this.node, selector);\n        return found ? Vector.create(found) : null;\n    }\n    findParentByClass(className, terminator) {\n        const node = Dom.findParentByClass(this.node, className, terminator);\n        return node ? Vector.create(node) : null;\n    }\n    matches(selector) {\n        const node = this.node;\n        const matches = this.node.matches;\n        const matcher = node.matches ||\n            node.matchesSelector ||\n            node.msMatchesSelector ||\n            node.mozMatchesSelector ||\n            node.webkitMatchesSelector ||\n            node.oMatchesSelector ||\n            null;\n        return matcher && matcher.call(node, selector);\n    }\n    contains(child) {\n        return Dom.contains(this.node, Vector.isVector(child) ? child.node : child);\n    }\n    wrap(node) {\n        const vel = Vector.create(node);\n        const parentNode = this.node.parentNode;\n        if (parentNode != null) {\n            parentNode.insertBefore(vel.node, this.node);\n        }\n        return vel.append(this);\n    }\n    parent(type) {\n        let parent = this; // eslint-disable-line @typescript-eslint/no-this-alias\n        // check for parent\n        if (parent.node.parentNode == null) {\n            return null;\n        }\n        // get parent element\n        parent = Vector.create(parent.node.parentNode);\n        if (type == null) {\n            return parent;\n        }\n        // loop trough ancestors if type is given\n        do {\n            if (typeof type === 'string' ? parent.matches(type) : parent instanceof type) {\n                return parent;\n            }\n        } while ((parent = Vector.create(parent.node.parentNode)));\n        return parent;\n    }\n    children() {\n        const children = this.node.childNodes;\n        const vels = [];\n        for (let i = 0; i < children.length; i += 1) {\n            const currentChild = children[i];\n            if (currentChild.nodeType === 1) {\n                vels.push(Vector.create(children[i]));\n            }\n        }\n        return vels;\n    }\n    eachChild(fn, deep) {\n        const children = this.children();\n        for (let i = 0, l = children.length; i < l; i += 1) {\n            fn.call(children[i], children[i], i, children);\n            if (deep) {\n                children[i].eachChild(fn, deep);\n            }\n        }\n        return this;\n    }\n    index() {\n        return Dom.index(this.node);\n    }\n    hasClass(className) {\n        return Dom.hasClass(this.node, className);\n    }\n    addClass(className) {\n        Dom.addClass(this.node, className);\n        return this;\n    }\n    removeClass(className) {\n        Dom.removeClass(this.node, className);\n        return this;\n    }\n    toggleClass(className, stateVal) {\n        Dom.toggleClass(this.node, className, stateVal);\n        return this;\n    }\n    toLocalPoint(x, y) {\n        return Dom.toLocalPoint(this.node, x, y);\n    }\n    /**\n     * Samples the underlying SVG element (it currently works only on\n     * paths - where it is most useful anyway). Returns an array of objects\n     * of the form `{ x: Number, y: Number, distance: Number }`. Each of these\n     * objects represent a point on the path. This basically creates a discrete\n     * representation of the path (which is possible a curve). The sampling\n     * interval defines the accuracy of the sampling. In other words, we travel\n     * from the beginning of the path to the end by interval distance (on the\n     * path, not between the resulting points) and collect the discrete points\n     * on the path. This is very useful in many situations. For example, SVG\n     * does not provide a built-in mechanism to find intersections between two\n     * paths. Using sampling, we can just generate bunch of points for each of\n     * the path and find the closest ones from each set.\n     */\n    sample(interval = 1) {\n        if (this.node instanceof SVGPathElement) {\n            return Dom.sample(this.node, interval);\n        }\n        return [];\n    }\n    toPath() {\n        return Vector.create(Dom.toPath(this.node));\n    }\n    toPathData() {\n        return Dom.toPathData(this.node);\n    }\n}\n(function (Vector) {\n    Vector.toStringTag = `X6.${Vector.name}`;\n    function isVector(instance) {\n        if (instance == null) {\n            return false;\n        }\n        if (instance instanceof Vector) {\n            return true;\n        }\n        const tag = instance[Symbol.toStringTag];\n        const vector = instance;\n        if ((tag == null || tag === Vector.toStringTag) &&\n            vector.node instanceof SVGElement &&\n            typeof vector.sample === 'function' &&\n            typeof vector.toPath === 'function') {\n            return true;\n        }\n        return false;\n    }\n    Vector.isVector = isVector;\n    function create(elem, attrs, children) {\n        return new Vector(elem, attrs, children);\n    }\n    Vector.create = create;\n    function createVectors(markup) {\n        if (markup[0] === '<') {\n            const svgDoc = Dom.createSvgDocument(markup);\n            const vels = [];\n            for (let i = 0, ii = svgDoc.childNodes.length; i < ii; i += 1) {\n                const childNode = svgDoc.childNodes[i];\n                vels.push(create(document.importNode(childNode, true)));\n            }\n            return vels;\n        }\n        return [create(markup)];\n    }\n    Vector.createVectors = createVectors;\n    function toNode(elem) {\n        if (isVector(elem)) {\n            return elem.node;\n        }\n        return elem;\n    }\n    Vector.toNode = toNode;\n    function toNodes(elems) {\n        if (Array.isArray(elems)) {\n            return elems.map((elem) => toNode(elem));\n        }\n        return [toNode(elems)];\n    }\n    Vector.toNodes = toNodes;\n})(Vector || (Vector = {}));\n//# sourceMappingURL=index.js.map","/* eslint-disable no-control-regex */\nimport { StringExt } from '../string';\nimport { Text } from '../text';\nimport { attr } from './attr';\nimport { Vector } from '../vector';\nimport { createSvgElement, empty } from './elem';\nfunction createTextPathNode(attrs, elem) {\n    const vel = Vector.create(elem);\n    const textPath = Vector.create('textPath');\n    const d = attrs.d;\n    if (d && attrs['xlink:href'] === undefined) {\n        const path = Vector.create('path').attr('d', d).appendTo(vel.defs());\n        textPath.attr('xlink:href', `#${path.id}`);\n    }\n    if (typeof attrs === 'object') {\n        textPath.attr(attrs);\n    }\n    return textPath.node;\n}\nfunction annotateTextLine(lineNode, lineAnnotations, options) {\n    const eol = options.eol;\n    const baseSize = options.baseSize;\n    const lineHeight = options.lineHeight;\n    let maxFontSize = 0;\n    let tspanNode;\n    const fontMetrics = {};\n    const lastJ = lineAnnotations.length - 1;\n    for (let j = 0; j <= lastJ; j += 1) {\n        let annotation = lineAnnotations[j];\n        let fontSize = null;\n        if (typeof annotation === 'object') {\n            const annotationAttrs = annotation.attrs;\n            const vTSpan = Vector.create('tspan', annotationAttrs);\n            tspanNode = vTSpan.node;\n            let t = annotation.t;\n            if (eol && j === lastJ) {\n                t += eol;\n            }\n            tspanNode.textContent = t;\n            // Per annotation className\n            const annotationClass = annotationAttrs.class;\n            if (annotationClass) {\n                vTSpan.addClass(annotationClass);\n            }\n            // set the list of indices of all the applied annotations\n            // in the `annotations` attribute. This list is a comma\n            // separated list of indices.\n            if (options.includeAnnotationIndices) {\n                vTSpan.attr('annotations', annotation.annotations.join(','));\n            }\n            // Check for max font size\n            fontSize = parseFloat(annotationAttrs['font-size']);\n            if (fontSize === undefined)\n                fontSize = baseSize;\n            if (fontSize && fontSize > maxFontSize)\n                maxFontSize = fontSize;\n        }\n        else {\n            if (eol && j === lastJ) {\n                annotation += eol;\n            }\n            tspanNode = document.createTextNode(annotation || ' ');\n            if (baseSize && baseSize > maxFontSize) {\n                maxFontSize = baseSize;\n            }\n        }\n        lineNode.appendChild(tspanNode);\n    }\n    if (maxFontSize) {\n        fontMetrics.maxFontSize = maxFontSize;\n    }\n    if (lineHeight) {\n        fontMetrics.lineHeight = lineHeight;\n    }\n    else if (maxFontSize) {\n        fontMetrics.lineHeight = maxFontSize * 1.2;\n    }\n    return fontMetrics;\n}\nconst emRegex = /em$/;\nfunction emToPx(em, fontSize) {\n    const numerical = parseFloat(em);\n    if (emRegex.test(em)) {\n        return numerical * fontSize;\n    }\n    return numerical;\n}\nfunction calculateDY(alignment, linesMetrics, baseSizePx, lineHeight) {\n    if (!Array.isArray(linesMetrics)) {\n        return 0;\n    }\n    const n = linesMetrics.length;\n    if (!n)\n        return 0;\n    let lineMetrics = linesMetrics[0];\n    const flMaxFont = emToPx(lineMetrics.maxFontSize, baseSizePx) || baseSizePx;\n    let rLineHeights = 0;\n    const lineHeightPx = emToPx(lineHeight, baseSizePx);\n    for (let i = 1; i < n; i += 1) {\n        lineMetrics = linesMetrics[i];\n        const iLineHeight = emToPx(lineMetrics.lineHeight, baseSizePx) || lineHeightPx;\n        rLineHeights += iLineHeight;\n    }\n    const llMaxFont = emToPx(lineMetrics.maxFontSize, baseSizePx) || baseSizePx;\n    let dy;\n    switch (alignment) {\n        case 'middle':\n            dy = flMaxFont / 2 - 0.15 * llMaxFont - rLineHeights / 2;\n            break;\n        case 'bottom':\n            dy = -(0.25 * llMaxFont) - rLineHeights;\n            break;\n        case 'top':\n        default:\n            dy = 0.8 * flMaxFont;\n            break;\n    }\n    return dy;\n}\nexport function text(elem, content, options = {}) {\n    content = Text.sanitize(content); // eslint-disable-line\n    const eol = options.eol;\n    let textPath = options.textPath;\n    const verticalAnchor = options.textVerticalAnchor;\n    const namedVerticalAnchor = verticalAnchor === 'middle' ||\n        verticalAnchor === 'bottom' ||\n        verticalAnchor === 'top';\n    // Horizontal shift applied to all the lines but the first.\n    let x = options.x;\n    if (x === undefined) {\n        x = elem.getAttribute('x') || 0;\n    }\n    // Annotations\n    const iai = options.includeAnnotationIndices;\n    let annotations = options.annotations;\n    if (annotations && !Array.isArray(annotations)) {\n        annotations = [annotations];\n    }\n    // Shift all the <tspan> but first by one line (`1em`)\n    const defaultLineHeight = options.lineHeight;\n    const autoLineHeight = defaultLineHeight === 'auto';\n    const lineHeight = autoLineHeight ? '1.5em' : defaultLineHeight || '1em';\n    let needEmpty = true;\n    const childNodes = elem.childNodes;\n    if (childNodes.length === 1) {\n        const node = childNodes[0];\n        if (node && node.tagName.toUpperCase() === 'TITLE') {\n            needEmpty = false;\n        }\n    }\n    if (needEmpty) {\n        empty(elem);\n    }\n    attr(elem, {\n        // Preserve spaces, do not consecutive spaces to get collapsed to one.\n        'xml:space': 'preserve',\n        // An empty text gets rendered into the DOM in webkit-based browsers.\n        // In order to unify this behaviour across all browsers\n        // we rather hide the text element when it's empty.\n        display: content || options.displayEmpty ? null : 'none',\n    });\n    // Set default font-size if none\n    const strFontSize = attr(elem, 'font-size');\n    let fontSize = parseFloat(strFontSize);\n    if (!fontSize) {\n        fontSize = 16;\n        if ((namedVerticalAnchor || annotations) && !strFontSize) {\n            attr(elem, 'font-size', `${fontSize}`);\n        }\n    }\n    let containerNode;\n    if (textPath) {\n        // Now all the `<tspan>`s will be inside the `<textPath>`.\n        if (typeof textPath === 'string') {\n            textPath = { d: textPath };\n        }\n        containerNode = createTextPathNode(textPath, elem);\n    }\n    else {\n        containerNode = document.createDocumentFragment();\n    }\n    let dy;\n    let offset = 0;\n    let annotatedY;\n    const lines = content.split('\\n');\n    const linesMetrics = [];\n    const lastI = lines.length - 1;\n    for (let i = 0; i <= lastI; i += 1) {\n        dy = lineHeight;\n        let lineClassName = 'v-line';\n        const lineNode = createSvgElement('tspan');\n        let lineMetrics;\n        let line = lines[i];\n        if (line) {\n            if (annotations) {\n                // Find the *compacted* annotations for this line.\n                const lineAnnotations = Text.annotate(line, annotations, {\n                    offset: -offset,\n                    includeAnnotationIndices: iai,\n                });\n                lineMetrics = annotateTextLine(lineNode, lineAnnotations, {\n                    eol: i !== lastI && eol,\n                    baseSize: fontSize,\n                    lineHeight: autoLineHeight ? null : lineHeight,\n                    includeAnnotationIndices: iai,\n                });\n                // Get the line height based on the biggest font size\n                // in the annotations for this line.\n                const iLineHeight = lineMetrics.lineHeight;\n                if (iLineHeight && autoLineHeight && i !== 0) {\n                    dy = iLineHeight;\n                }\n                if (i === 0) {\n                    annotatedY = lineMetrics.maxFontSize * 0.8;\n                }\n            }\n            else {\n                if (eol && i !== lastI) {\n                    line += eol;\n                }\n                lineNode.textContent = line;\n            }\n        }\n        else {\n            // Make sure the textContent is never empty. If it is, add a dummy\n            // character and make it invisible, making the following lines correctly\n            // relatively positioned. `dy=1em` won't work with empty lines otherwise.\n            lineNode.textContent = '-';\n            lineClassName += ' v-empty-line';\n            const lineNodeStyle = lineNode.style;\n            lineNodeStyle.fillOpacity = 0;\n            lineNodeStyle.strokeOpacity = 0;\n            if (annotations) {\n                lineMetrics = {};\n            }\n        }\n        if (lineMetrics) {\n            linesMetrics.push(lineMetrics);\n        }\n        if (i > 0) {\n            lineNode.setAttribute('dy', dy);\n        }\n        // Firefox requires 'x' to be set on the first line\n        if (i > 0 || textPath) {\n            lineNode.setAttribute('x', x);\n        }\n        lineNode.className.baseVal = lineClassName;\n        containerNode.appendChild(lineNode);\n        offset += line.length + 1; // + 1 = newline character.\n    }\n    // Y Alignment calculation\n    if (namedVerticalAnchor) {\n        if (annotations) {\n            dy = calculateDY(verticalAnchor, linesMetrics, fontSize, lineHeight);\n        }\n        else if (verticalAnchor === 'top') {\n            // A shortcut for top alignment. It does not depend on font-size nor line-height\n            dy = '0.8em';\n        }\n        else {\n            let rh; // remaining height\n            if (lastI > 0) {\n                rh = parseFloat(lineHeight) || 1;\n                rh *= lastI;\n                if (!emRegex.test(lineHeight))\n                    rh /= fontSize;\n            }\n            else {\n                // Single-line text\n                rh = 0;\n            }\n            switch (verticalAnchor) {\n                case 'middle':\n                    dy = `${0.3 - rh / 2}em`;\n                    break;\n                case 'bottom':\n                    dy = `${-rh - 0.3}em`;\n                    break;\n                default:\n                    break;\n            }\n        }\n    }\n    else if (verticalAnchor === 0) {\n        dy = '0em';\n    }\n    else if (verticalAnchor) {\n        dy = verticalAnchor;\n    }\n    else {\n        // No vertical anchor is defined\n        dy = 0;\n        // Backwards compatibility - we change the `y` attribute instead of `dy`.\n        if (elem.getAttribute('y') == null) {\n            elem.setAttribute('y', `${annotatedY || '0.8em'}`);\n        }\n    }\n    const firstLine = containerNode.firstChild;\n    firstLine.setAttribute('dy', dy);\n    elem.appendChild(containerNode);\n}\nexport function measureText(text, styles = {}) {\n    const canvasContext = document.createElement('canvas').getContext('2d');\n    if (!text) {\n        return { width: 0 };\n    }\n    const font = [];\n    const fontSize = styles['font-size']\n        ? `${parseFloat(styles['font-size'])}px`\n        : '14px';\n    font.push(styles['font-style'] || 'normal');\n    font.push(styles['font-variant'] || 'normal');\n    font.push(styles['font-weight'] || 400);\n    font.push(fontSize);\n    font.push(styles['font-family'] || 'sans-serif');\n    canvasContext.font = font.join(' ');\n    return canvasContext.measureText(text);\n}\nexport function splitTextByLength(text, splitWidth, totalWidth, style = {}) {\n    if (splitWidth >= totalWidth) {\n        return [text, ''];\n    }\n    const length = text.length;\n    const caches = {};\n    let index = Math.round((splitWidth / totalWidth) * length - 1);\n    if (index < 0) {\n        index = 0;\n    }\n    // eslint-disable-next-line\n    while (index >= 0 && index < length) {\n        const frontText = text.slice(0, index);\n        const frontWidth = caches[frontText] || measureText(frontText, style).width;\n        const behindText = text.slice(0, index + 1);\n        const behindWidth = caches[behindText] || measureText(behindText, style).width;\n        caches[frontText] = frontWidth;\n        caches[behindText] = behindWidth;\n        if (frontWidth > splitWidth) {\n            index -= 1;\n        }\n        else if (behindWidth <= splitWidth) {\n            index += 1;\n        }\n        else {\n            break;\n        }\n    }\n    return [text.slice(0, index), text.slice(index)];\n}\nexport function breakText(text, size, styles = {}, options = {}) {\n    const width = size.width;\n    const height = size.height;\n    const eol = options.eol || '\\n';\n    const fontSize = styles.fontSize || 14;\n    const lineHeight = styles.lineHeight\n        ? parseFloat(styles.lineHeight)\n        : Math.ceil(fontSize * 1.4);\n    const maxLines = Math.floor(height / lineHeight);\n    if (text.indexOf(eol) > -1) {\n        const delimiter = StringExt.uuid();\n        const splitText = [];\n        text.split(eol).map((line) => {\n            const part = breakText(line, Object.assign(Object.assign({}, size), { height: Number.MAX_SAFE_INTEGER }), styles, Object.assign(Object.assign({}, options), { eol: delimiter }));\n            if (part) {\n                splitText.push(...part.split(delimiter));\n            }\n        });\n        return splitText.slice(0, maxLines).join(eol);\n    }\n    const { width: textWidth } = measureText(text, styles);\n    if (textWidth < width) {\n        return text;\n    }\n    const lines = [];\n    let remainText = text;\n    let remainWidth = textWidth;\n    let ellipsis = options.ellipsis;\n    let ellipsisWidth = 0;\n    if (ellipsis) {\n        if (typeof ellipsis !== 'string') {\n            ellipsis = '\\u2026';\n        }\n        ellipsisWidth = measureText(ellipsis, styles).width;\n    }\n    for (let i = 0; i < maxLines; i += 1) {\n        if (remainWidth > width) {\n            const isLast = i === maxLines - 1;\n            if (isLast) {\n                const [front] = splitTextByLength(remainText, width - ellipsisWidth, remainWidth, styles);\n                lines.push(ellipsis ? `${front}${ellipsis}` : front);\n            }\n            else {\n                const [front, behind] = splitTextByLength(remainText, width, remainWidth, styles);\n                lines.push(front);\n                remainText = behind;\n                remainWidth = measureText(remainText, styles).width;\n            }\n        }\n        else {\n            lines.push(remainText);\n            break;\n        }\n    }\n    return lines.join(eol);\n}\n//# sourceMappingURL=text.js.map","import { attr } from './attr';\nimport { createSvgElement } from './elem';\nexport const KAPPA = 0.551784;\nfunction getNumbericAttribute(elem, attr, defaultValue = NaN) {\n    const v = elem.getAttribute(attr);\n    if (v == null) {\n        return defaultValue;\n    }\n    const n = parseFloat(v);\n    return Number.isNaN(n) ? defaultValue : n;\n}\nexport function sample(elem, interval = 1) {\n    const length = elem.getTotalLength();\n    const samples = [];\n    let distance = 0;\n    let sample;\n    while (distance < length) {\n        sample = elem.getPointAtLength(distance);\n        samples.push({ distance, x: sample.x, y: sample.y });\n        distance += interval;\n    }\n    return samples;\n}\nexport function lineToPathData(line) {\n    return [\n        'M',\n        getNumbericAttribute(line, 'x1'),\n        getNumbericAttribute(line, 'y1'),\n        'L',\n        getNumbericAttribute(line, 'x2'),\n        getNumbericAttribute(line, 'y2'),\n    ].join(' ');\n}\nexport function polygonToPathData(polygon) {\n    const points = getPointsFromSvgElement(polygon);\n    if (points.length === 0) {\n        return null;\n    }\n    return `${svgPointsToPath(points)} Z`;\n}\nexport function polylineToPathData(polyline) {\n    const points = getPointsFromSvgElement(polyline);\n    if (points.length === 0) {\n        return null;\n    }\n    return svgPointsToPath(points);\n}\nfunction svgPointsToPath(points) {\n    const arr = points.map((p) => `${p.x} ${p.y}`);\n    return `M ${arr.join(' L')}`;\n}\nexport function getPointsFromSvgElement(elem) {\n    const points = [];\n    const nodePoints = elem.points;\n    if (nodePoints) {\n        for (let i = 0, ii = nodePoints.numberOfItems; i < ii; i += 1) {\n            points.push(nodePoints.getItem(i));\n        }\n    }\n    return points;\n}\nexport function circleToPathData(circle) {\n    const cx = getNumbericAttribute(circle, 'cx', 0);\n    const cy = getNumbericAttribute(circle, 'cy', 0);\n    const r = getNumbericAttribute(circle, 'r');\n    const cd = r * KAPPA; // Control distance.\n    return [\n        'M',\n        cx,\n        cy - r,\n        'C',\n        cx + cd,\n        cy - r,\n        cx + r,\n        cy - cd,\n        cx + r,\n        cy,\n        'C',\n        cx + r,\n        cy + cd,\n        cx + cd,\n        cy + r,\n        cx,\n        cy + r,\n        'C',\n        cx - cd,\n        cy + r,\n        cx - r,\n        cy + cd,\n        cx - r,\n        cy,\n        'C',\n        cx - r,\n        cy - cd,\n        cx - cd,\n        cy - r,\n        cx,\n        cy - r,\n        'Z',\n    ].join(' ');\n}\nexport function ellipseToPathData(ellipse) {\n    const cx = getNumbericAttribute(ellipse, 'cx', 0);\n    const cy = getNumbericAttribute(ellipse, 'cy', 0);\n    const rx = getNumbericAttribute(ellipse, 'rx');\n    const ry = getNumbericAttribute(ellipse, 'ry') || rx;\n    const cdx = rx * KAPPA; // Control distance x.\n    const cdy = ry * KAPPA; // Control distance y.\n    const d = [\n        'M',\n        cx,\n        cy - ry,\n        'C',\n        cx + cdx,\n        cy - ry,\n        cx + rx,\n        cy - cdy,\n        cx + rx,\n        cy,\n        'C',\n        cx + rx,\n        cy + cdy,\n        cx + cdx,\n        cy + ry,\n        cx,\n        cy + ry,\n        'C',\n        cx - cdx,\n        cy + ry,\n        cx - rx,\n        cy + cdy,\n        cx - rx,\n        cy,\n        'C',\n        cx - rx,\n        cy - cdy,\n        cx - cdx,\n        cy - ry,\n        cx,\n        cy - ry,\n        'Z',\n    ].join(' ');\n    return d;\n}\nexport function rectangleToPathData(rect) {\n    return rectToPathData({\n        x: getNumbericAttribute(rect, 'x', 0),\n        y: getNumbericAttribute(rect, 'y', 0),\n        width: getNumbericAttribute(rect, 'width', 0),\n        height: getNumbericAttribute(rect, 'height', 0),\n        rx: getNumbericAttribute(rect, 'rx', 0),\n        ry: getNumbericAttribute(rect, 'ry', 0),\n    });\n}\nexport function rectToPathData(r) {\n    let d;\n    const x = r.x;\n    const y = r.y;\n    const width = r.width;\n    const height = r.height;\n    const topRx = Math.min(r.rx || r['top-rx'] || 0, width / 2);\n    const bottomRx = Math.min(r.rx || r['bottom-rx'] || 0, width / 2);\n    const topRy = Math.min(r.ry || r['top-ry'] || 0, height / 2);\n    const bottomRy = Math.min(r.ry || r['bottom-ry'] || 0, height / 2);\n    if (topRx || bottomRx || topRy || bottomRy) {\n        d = [\n            'M',\n            x,\n            y + topRy,\n            'v',\n            height - topRy - bottomRy,\n            'a',\n            bottomRx,\n            bottomRy,\n            0,\n            0,\n            0,\n            bottomRx,\n            bottomRy,\n            'h',\n            width - 2 * bottomRx,\n            'a',\n            bottomRx,\n            bottomRy,\n            0,\n            0,\n            0,\n            bottomRx,\n            -bottomRy,\n            'v',\n            -(height - bottomRy - topRy),\n            'a',\n            topRx,\n            topRy,\n            0,\n            0,\n            0,\n            -topRx,\n            -topRy,\n            'h',\n            -(width - 2 * topRx),\n            'a',\n            topRx,\n            topRy,\n            0,\n            0,\n            0,\n            -topRx,\n            topRy,\n            'Z',\n        ];\n    }\n    else {\n        d = ['M', x, y, 'H', x + width, 'V', y + height, 'H', x, 'V', y, 'Z'];\n    }\n    return d.join(' ');\n}\nexport function toPath(elem) {\n    const path = createSvgElement('path');\n    attr(path, attr(elem));\n    const d = toPathData(elem);\n    if (d) {\n        path.setAttribute('d', d);\n    }\n    return path;\n}\nexport function toPathData(elem) {\n    const tagName = elem.tagName.toLowerCase();\n    switch (tagName) {\n        case 'path':\n            return elem.getAttribute('d');\n        case 'line':\n            return lineToPathData(elem);\n        case 'polygon':\n            return polygonToPathData(elem);\n        case 'polyline':\n            return polylineToPathData(elem);\n        case 'ellipse':\n            return ellipseToPathData(elem);\n        case 'circle':\n            return circleToPathData(elem);\n        case 'rect':\n            return rectangleToPathData(elem);\n        default:\n            break;\n    }\n    throw new Error(`\"${tagName}\" cannot be converted to svg path element.`);\n}\n// Inspired by d3.js https://github.com/mbostock/d3/blob/master/src/svg/arc.js\nexport function createSlicePathData(innerRadius, outerRadius, startAngle, endAngle) {\n    const svgArcMax = 2 * Math.PI - 1e-6;\n    const r0 = innerRadius;\n    const r1 = outerRadius;\n    let a0 = startAngle;\n    let a1 = endAngle;\n    if (a1 < a0) {\n        const tmp = a0;\n        a0 = a1;\n        a1 = tmp;\n    }\n    const da = a1 - a0;\n    const df = da < Math.PI ? '0' : '1';\n    const c0 = Math.cos(a0);\n    const s0 = Math.sin(a0);\n    const c1 = Math.cos(a1);\n    const s1 = Math.sin(a1);\n    return da >= svgArcMax\n        ? r0\n            ? // eslint-disable-next-line\n                `M0,${r1}A${r1},${r1} 0 1,1 0,${-r1}A${r1},${r1} 0 1,1 0,${r1}M0,${r0}A${r0},${r0} 0 1,0 0,${-r0}A${r0},${r0} 0 1,0 0,${r0}Z`\n            : // eslint-disable-next-line\n                `M0,${r1}A${r1},${r1} 0 1,1 0,${-r1}A${r1},${r1} 0 1,1 0,${r1}Z`\n        : r0\n            ? // eslint-disable-next-line\n                `M${r1 * c0},${r1 * s0}A${r1},${r1} 0 ${df},1 ${r1 * c1},${r1 * s1}L${r0 * c1},${r0 * s1}A${r0},${r0} 0 ${df},0 ${r0 * c0},${r0 * s0}Z`\n            : // eslint-disable-next-line\n                `M${r1 * c0},${r1 * s0}A${r1},${r1} 0 ${df},1 ${r1 * c1},${r1 * s1}L0,0` +\n                    `Z`;\n}\n//# sourceMappingURL=path.js.map","import { createSvgElement } from './elem';\nconst transformRegex = /(\\w+)\\(([^,)]+),?([^)]+)?\\)/gi;\nconst transformSeparatorRegex = /[ ,]+/;\nconst transformationListRegex = /^(\\w+)\\((.*)\\)/;\n/**\n * Returns a SVG point object initialized with the `x` and `y` coordinates.\n * @see https://developer.mozilla.org/en/docs/Web/API/SVGPoint\n */\nexport function createSVGPoint(x, y) {\n    const svgDocument = createSvgElement('svg');\n    const p = svgDocument.createSVGPoint();\n    p.x = x;\n    p.y = y;\n    return p;\n}\n/**\n * Returns the SVG transformation matrix initialized with the given matrix.\n *\n * The given matrix is an object of the form:\n * {\n *   a: number\n *   b: number\n *   c: number\n *   d: number\n *   e: number\n *   f: number\n * }\n *\n * @see https://developer.mozilla.org/en/docs/Web/API/SVGMatrix\n */\nexport function createSVGMatrix(matrix) {\n    const svgDocument = createSvgElement('svg');\n    const mat = svgDocument.createSVGMatrix();\n    if (matrix != null) {\n        const source = matrix;\n        const target = mat;\n        // eslint-disable-next-line\n        for (const key in source) {\n            target[key] = source[key];\n        }\n    }\n    return mat;\n}\n/**\n * Returns a SVG transform object.\n * @see https://developer.mozilla.org/en/docs/Web/API/SVGTransform\n */\nexport function createSVGTransform(matrix) {\n    const svgDocument = createSvgElement('svg');\n    if (matrix != null) {\n        if (!(matrix instanceof DOMMatrix)) {\n            matrix = createSVGMatrix(matrix); // eslint-disable-line\n        }\n        return svgDocument.createSVGTransformFromMatrix(matrix);\n    }\n    return svgDocument.createSVGTransform();\n}\n/**\n * Returns the SVG transformation matrix built from the `transformString`.\n *\n * E.g. 'translate(10,10) scale(2,2)' will result in matrix:\n * `{ a: 2, b: 0, c: 0, d: 2, e: 10, f: 10}`\n */\nexport function transformStringToMatrix(transform) {\n    let mat = createSVGMatrix();\n    const matches = transform != null && transform.match(transformRegex);\n    if (!matches) {\n        return mat;\n    }\n    for (let i = 0, n = matches.length; i < n; i += 1) {\n        const transformationString = matches[i];\n        const transformationMatch = transformationString.match(transformationListRegex);\n        if (transformationMatch) {\n            let sx;\n            let sy;\n            let tx;\n            let ty;\n            let angle;\n            let ctm = createSVGMatrix();\n            const args = transformationMatch[2].split(transformSeparatorRegex);\n            switch (transformationMatch[1].toLowerCase()) {\n                case 'scale':\n                    sx = parseFloat(args[0]);\n                    sy = args[1] === undefined ? sx : parseFloat(args[1]);\n                    ctm = ctm.scaleNonUniform(sx, sy);\n                    break;\n                case 'translate':\n                    tx = parseFloat(args[0]);\n                    ty = parseFloat(args[1]);\n                    ctm = ctm.translate(tx, ty);\n                    break;\n                case 'rotate':\n                    angle = parseFloat(args[0]);\n                    tx = parseFloat(args[1]) || 0;\n                    ty = parseFloat(args[2]) || 0;\n                    if (tx !== 0 || ty !== 0) {\n                        ctm = ctm.translate(tx, ty).rotate(angle).translate(-tx, -ty);\n                    }\n                    else {\n                        ctm = ctm.rotate(angle);\n                    }\n                    break;\n                case 'skewx':\n                    angle = parseFloat(args[0]);\n                    ctm = ctm.skewX(angle);\n                    break;\n                case 'skewy':\n                    angle = parseFloat(args[0]);\n                    ctm = ctm.skewY(angle);\n                    break;\n                case 'matrix':\n                    ctm.a = parseFloat(args[0]);\n                    ctm.b = parseFloat(args[1]);\n                    ctm.c = parseFloat(args[2]);\n                    ctm.d = parseFloat(args[3]);\n                    ctm.e = parseFloat(args[4]);\n                    ctm.f = parseFloat(args[5]);\n                    break;\n                default:\n                    continue;\n            }\n            mat = mat.multiply(ctm);\n        }\n    }\n    return mat;\n}\nexport function matrixToTransformString(matrix) {\n    const m = matrix || {};\n    const a = m.a != null ? m.a : 1;\n    const b = m.b != null ? m.b : 0;\n    const c = m.c != null ? m.c : 0;\n    const d = m.d != null ? m.d : 1;\n    const e = m.e != null ? m.e : 0;\n    const f = m.f != null ? m.f : 0;\n    return `matrix(${a},${b},${c},${d},${e},${f})`;\n}\nexport function parseTransformString(transform) {\n    let translation;\n    let rotation;\n    let scale;\n    if (transform) {\n        const separator = transformSeparatorRegex;\n        // Allow reading transform string with a single matrix\n        if (transform.trim().indexOf('matrix') >= 0) {\n            const matrix = transformStringToMatrix(transform);\n            const decomposedMatrix = decomposeMatrix(matrix);\n            translation = [decomposedMatrix.translateX, decomposedMatrix.translateY];\n            rotation = [decomposedMatrix.rotation];\n            scale = [decomposedMatrix.scaleX, decomposedMatrix.scaleY];\n            const transformations = [];\n            if (translation[0] !== 0 || translation[1] !== 0) {\n                transformations.push(`translate(${translation.join(',')})`);\n            }\n            if (scale[0] !== 1 || scale[1] !== 1) {\n                transformations.push(`scale(${scale.join(',')})`);\n            }\n            if (rotation[0] !== 0) {\n                transformations.push(`rotate(${rotation[0]})`);\n            }\n            transform = transformations.join(' '); // eslint-disable-line\n        }\n        else {\n            const translateMatch = transform.match(/translate\\((.*?)\\)/);\n            if (translateMatch) {\n                translation = translateMatch[1].split(separator);\n            }\n            const rotateMatch = transform.match(/rotate\\((.*?)\\)/);\n            if (rotateMatch) {\n                rotation = rotateMatch[1].split(separator);\n            }\n            const scaleMatch = transform.match(/scale\\((.*?)\\)/);\n            if (scaleMatch) {\n                scale = scaleMatch[1].split(separator);\n            }\n        }\n    }\n    const sx = scale && scale[0] ? parseFloat(scale[0]) : 1;\n    return {\n        raw: transform || '',\n        translation: {\n            tx: translation && translation[0]\n                ? parseInt(translation[0], 10)\n                : 0,\n            ty: translation && translation[1]\n                ? parseInt(translation[1], 10)\n                : 0,\n        },\n        rotation: {\n            angle: rotation && rotation[0] ? parseInt(rotation[0], 10) : 0,\n            cx: rotation && rotation[1]\n                ? parseInt(rotation[1], 10)\n                : undefined,\n            cy: rotation && rotation[2]\n                ? parseInt(rotation[2], 10)\n                : undefined,\n        },\n        scale: {\n            sx,\n            sy: scale && scale[1] ? parseFloat(scale[1]) : sx,\n        },\n    };\n}\nfunction deltaTransformPoint(matrix, point) {\n    const dx = point.x * matrix.a + point.y * matrix.c + 0;\n    const dy = point.x * matrix.b + point.y * matrix.d + 0;\n    return { x: dx, y: dy };\n}\n/**\n * Decomposes the SVG transformation matrix into separate transformations.\n *\n * Returns an object of the form:\n * {\n *   translateX: number\n *   translateY: number\n *   scaleX: number\n *   scaleY: number\n *   skewX: number\n *   skewY: number\n *   rotation: number\n * }\n *\n * @see https://developer.mozilla.org/en/docs/Web/API/SVGMatrix\n */\nexport function decomposeMatrix(matrix) {\n    // @see https://gist.github.com/2052247\n    const px = deltaTransformPoint(matrix, { x: 0, y: 1 });\n    const py = deltaTransformPoint(matrix, { x: 1, y: 0 });\n    const skewX = (180 / Math.PI) * Math.atan2(px.y, px.x) - 90;\n    const skewY = (180 / Math.PI) * Math.atan2(py.y, py.x);\n    return {\n        skewX,\n        skewY,\n        translateX: matrix.e,\n        translateY: matrix.f,\n        scaleX: Math.sqrt(matrix.a * matrix.a + matrix.b * matrix.b),\n        scaleY: Math.sqrt(matrix.c * matrix.c + matrix.d * matrix.d),\n        rotation: skewX,\n    };\n}\nexport function matrixToScale(matrix) {\n    let a;\n    let b;\n    let c;\n    let d;\n    if (matrix) {\n        a = matrix.a == null ? 1 : matrix.a;\n        d = matrix.d == null ? 1 : matrix.d;\n        b = matrix.b;\n        c = matrix.c;\n    }\n    else {\n        a = d = 1;\n    }\n    return {\n        sx: b ? Math.sqrt(a * a + b * b) : a,\n        sy: c ? Math.sqrt(c * c + d * d) : d,\n    };\n}\nexport function matrixToRotation(matrix) {\n    let p = { x: 0, y: 1 };\n    if (matrix) {\n        p = deltaTransformPoint(matrix, p);\n    }\n    const deg = (((180 * Math.atan2(p.y, p.x)) / Math.PI) % 360) - 90;\n    const angle = (deg % 360) + (deg < 0 ? 360 : 0);\n    return {\n        angle,\n    };\n}\nexport function matrixToTranslation(matrix) {\n    return {\n        tx: (matrix && matrix.e) || 0,\n        ty: (matrix && matrix.f) || 0,\n    };\n}\n//# sourceMappingURL=matrix.js.map","import { attr } from './attr';\nimport { isSVGGraphicsElement } from './elem';\nimport { createSVGTransform, parseTransformString, transformStringToMatrix, matrixToTransformString, createSVGMatrix, } from './matrix';\nexport function transform(elem, matrix, options = {}) {\n    if (matrix == null) {\n        return transformStringToMatrix(attr(elem, 'transform'));\n    }\n    if (options.absolute) {\n        elem.setAttribute('transform', matrixToTransformString(matrix));\n        return;\n    }\n    const transformList = elem.transform;\n    const svgTransform = createSVGTransform(matrix);\n    transformList.baseVal.appendItem(svgTransform);\n}\nexport function translate(elem, tx, ty = 0, options = {}) {\n    let transformAttr = attr(elem, 'transform');\n    const transform = parseTransformString(transformAttr);\n    if (tx == null) {\n        return transform.translation;\n    }\n    transformAttr = transform.raw;\n    transformAttr = transformAttr.replace(/translate\\([^)]*\\)/g, '').trim();\n    const newTx = options.absolute ? tx : transform.translation.tx + tx;\n    const newTy = options.absolute ? ty : transform.translation.ty + ty;\n    const newTranslate = `translate(${newTx},${newTy})`;\n    // Note that `translate()` is always the first transformation. This is\n    // usually the desired case.\n    elem.setAttribute('transform', `${newTranslate} ${transformAttr}`.trim());\n}\nexport function rotate(elem, angle, cx, cy, options = {}) {\n    let transformAttr = attr(elem, 'transform');\n    const transform = parseTransformString(transformAttr);\n    if (angle == null) {\n        return transform.rotation;\n    }\n    transformAttr = transform.raw;\n    transformAttr = transformAttr.replace(/rotate\\([^)]*\\)/g, '').trim();\n    angle %= 360; // eslint-disable-line\n    const newAngle = options.absolute ? angle : transform.rotation.angle + angle;\n    const newOrigin = cx != null && cy != null ? `,${cx},${cy}` : '';\n    const newRotate = `rotate(${newAngle}${newOrigin})`;\n    elem.setAttribute('transform', `${transformAttr} ${newRotate}`.trim());\n}\nexport function scale(elem, sx, sy) {\n    let transformAttr = attr(elem, 'transform');\n    const transform = parseTransformString(transformAttr);\n    if (sx == null) {\n        return transform.scale;\n    }\n    sy = sy == null ? sx : sy; // eslint-disable-line\n    transformAttr = transform.raw;\n    transformAttr = transformAttr.replace(/scale\\([^)]*\\)/g, '').trim();\n    const newScale = `scale(${sx},${sy})`;\n    elem.setAttribute('transform', `${transformAttr} ${newScale}`.trim());\n}\n/**\n * Returns an DOMMatrix that specifies the transformation necessary\n * to convert `elem` coordinate system into `target` coordinate system.\n */\nexport function getTransformToElement(elem, target) {\n    if (isSVGGraphicsElement(target) && isSVGGraphicsElement(elem)) {\n        const targetCTM = target.getScreenCTM();\n        const nodeCTM = elem.getScreenCTM();\n        if (targetCTM && nodeCTM) {\n            return targetCTM.inverse().multiply(nodeCTM);\n        }\n    }\n    // Could not get actual transformation matrix\n    return createSVGMatrix();\n}\n/**\n * Returns an DOMMatrix that specifies the transformation necessary\n * to convert `elem` coordinate system into `target` coordinate system.\n * Unlike getTransformToElement, elem is child of target,Because of the reduction in DOM API calls,\n * there is a significant performance improvement.\n */\nexport function getTransformToParentElement(elem, target) {\n    let matrix = createSVGMatrix();\n    if (isSVGGraphicsElement(target) && isSVGGraphicsElement(elem)) {\n        let node = elem;\n        const matrixList = [];\n        while (node && node !== target) {\n            const transform = node.getAttribute('transform') || null;\n            const nodeMatrix = transformStringToMatrix(transform);\n            matrixList.push(nodeMatrix);\n            node = node.parentNode;\n        }\n        matrixList.reverse().forEach((m) => {\n            matrix = matrix.multiply(m);\n        });\n    }\n    return matrix;\n}\n/**\n * Converts a global point with coordinates `x` and `y` into the\n * coordinate space of the element.\n */\nexport function toLocalPoint(elem, x, y) {\n    const svg = elem instanceof SVGSVGElement\n        ? elem\n        : elem.ownerSVGElement;\n    const p = svg.createSVGPoint();\n    p.x = x;\n    p.y = y;\n    try {\n        const ctm = svg.getScreenCTM();\n        const globalPoint = p.matrixTransform(ctm.inverse());\n        const globalToLocalMatrix = getTransformToElement(elem, svg).inverse();\n        return globalPoint.matrixTransform(globalToLocalMatrix);\n    }\n    catch (e) {\n        return p;\n    }\n}\n//# sourceMappingURL=transform.js.map","export var EventHook;\n(function (EventHook) {\n    const cache = {};\n    function get(type) {\n        return cache[type] || {};\n    }\n    EventHook.get = get;\n    function register(type, hook) {\n        cache[type] = hook;\n    }\n    EventHook.register = register;\n    function unregister(type) {\n        delete cache[type];\n    }\n    EventHook.unregister = unregister;\n})(EventHook || (EventHook = {}));\n//# sourceMappingURL=hook.js.map","export var Store;\n(function (Store) {\n    const cache = new WeakMap();\n    function ensure(target) {\n        if (!cache.has(target)) {\n            cache.set(target, { events: Object.create(null) });\n        }\n        return cache.get(target);\n    }\n    Store.ensure = ensure;\n    function get(target) {\n        return cache.get(target);\n    }\n    Store.get = get;\n    function remove(target) {\n        return cache.delete(target);\n    }\n    Store.remove = remove;\n})(Store || (Store = {}));\n//# sourceMappingURL=store.js.map","import { Store } from './store';\nexport var Util;\n(function (Util) {\n    Util.returnTrue = () => true;\n    Util.returnFalse = () => false;\n    function stopPropagationCallback(e) {\n        e.stopPropagation();\n    }\n    Util.stopPropagationCallback = stopPropagationCallback;\n    function addEventListener(elem, type, handler) {\n        if (elem.addEventListener != null) {\n            elem.addEventListener(type, handler);\n        }\n    }\n    Util.addEventListener = addEventListener;\n    function removeEventListener(elem, type, handler) {\n        if (elem.removeEventListener != null) {\n            elem.removeEventListener(type, handler);\n        }\n    }\n    Util.removeEventListener = removeEventListener;\n})(Util || (Util = {}));\n(function (Util) {\n    const rNotHTMLWhite = /[^\\x20\\t\\r\\n\\f]+/g;\n    const rNamespace = /^([^.]*)(?:\\.(.+)|)/;\n    function splitType(types) {\n        return (types || '').match(rNotHTMLWhite) || [''];\n    }\n    Util.splitType = splitType;\n    function normalizeType(type) {\n        const parts = rNamespace.exec(type) || [];\n        return {\n            originType: parts[1] ? parts[1].trim() : parts[1],\n            namespaces: parts[2]\n                ? parts[2]\n                    .split('.')\n                    .map((ns) => ns.trim())\n                    .sort()\n                : [],\n        };\n    }\n    Util.normalizeType = normalizeType;\n    function isValidTarget(target) {\n        // Accepts only:\n        //  - Node\n        //    - Node.ELEMENT_NODE\n        //    - Node.DOCUMENT_NODE\n        //  - Object\n        //    - Any\n        return target.nodeType === 1 || target.nodeType === 9 || !+target.nodeType;\n    }\n    Util.isValidTarget = isValidTarget;\n    function isValidSelector(elem, selector) {\n        if (selector) {\n            const node = elem;\n            return node.querySelector != null && node.querySelector(selector) != null;\n        }\n        return true;\n    }\n    Util.isValidSelector = isValidSelector;\n})(Util || (Util = {}));\n(function (Util) {\n    let seed = 0;\n    const cache = new WeakMap();\n    function ensureHandlerId(handler) {\n        if (!cache.has(handler)) {\n            cache.set(handler, seed);\n            seed += 1;\n        }\n        return cache.get(handler);\n    }\n    Util.ensureHandlerId = ensureHandlerId;\n    function getHandlerId(handler) {\n        return cache.get(handler);\n    }\n    Util.getHandlerId = getHandlerId;\n    function removeHandlerId(handler) {\n        return cache.delete(handler);\n    }\n    Util.removeHandlerId = removeHandlerId;\n    function setHandlerId(handler, id) {\n        return cache.set(handler, id);\n    }\n    Util.setHandlerId = setHandlerId;\n})(Util || (Util = {}));\n(function (Util) {\n    function getHandlerQueue(elem, event) {\n        const queue = [];\n        const store = Store.get(elem);\n        const bag = store && store.events && store.events[event.type];\n        const handlers = (bag && bag.handlers) || [];\n        const delegateCount = bag ? bag.delegateCount : 0;\n        if (delegateCount > 0 &&\n            // Support: Firefox <=42 - 66+\n            // Suppress spec-violating clicks indicating a non-primary pointer button (trac-3861)\n            // https://www.w3.org/TR/DOM-Level-3-Events/#event-type-click\n            // Support: IE 11+\n            // ...but not arrow key \"clicks\" of radio inputs, which can have `button` -1 (gh-2343)\n            !(event.type === 'click' &&\n                typeof event.button === 'number' &&\n                event.button >= 1)) {\n            for (let curr = event.target; curr !== elem; curr = curr.parentNode || elem) {\n                // Don't check non-elements\n                // Don't process clicks on disabled elements\n                if (curr.nodeType === 1 &&\n                    !(event.type === 'click' && curr.disabled === true)) {\n                    const matchedHandlers = [];\n                    const matchedSelectors = {};\n                    for (let i = 0; i < delegateCount; i += 1) {\n                        const handleObj = handlers[i];\n                        const selector = handleObj.selector;\n                        if (selector != null && matchedSelectors[selector] == null) {\n                            const node = elem;\n                            const nodes = [];\n                            node.querySelectorAll(selector).forEach((child) => {\n                                nodes.push(child);\n                            });\n                            matchedSelectors[selector] = nodes.includes(curr);\n                        }\n                        if (matchedSelectors[selector]) {\n                            matchedHandlers.push(handleObj);\n                        }\n                    }\n                    if (matchedHandlers.length) {\n                        queue.push({ elem: curr, handlers: matchedHandlers });\n                    }\n                }\n            }\n        }\n        // Add the remaining (directly-bound) handlers\n        if (delegateCount < handlers.length) {\n            queue.push({ elem, handlers: handlers.slice(delegateCount) });\n        }\n        return queue;\n    }\n    Util.getHandlerQueue = getHandlerQueue;\n})(Util || (Util = {}));\n(function (Util) {\n    function isWindow(obj) {\n        return obj != null && obj === obj.window;\n    }\n    Util.isWindow = isWindow;\n})(Util || (Util = {}));\n(function (Util) {\n    function contains(a, b) {\n        const adown = a.nodeType === 9 ? a.documentElement : a;\n        const bup = b && b.parentNode;\n        return (a === bup ||\n            !!(bup &&\n                bup.nodeType === 1 &&\n                // Support: IE 9 - 11+\n                // IE doesn't have `contains` on SVG.\n                (adown.contains\n                    ? adown.contains(bup)\n                    : a.compareDocumentPosition && a.compareDocumentPosition(bup) & 16)));\n    }\n    Util.contains = contains;\n})(Util || (Util = {}));\n//# sourceMappingURL=util.js.map","import { EventHook } from './hook';\nimport { Util } from './util';\n// Prevent triggered image.load events from bubbling to window.load\nexport var Special;\n(function (Special) {\n    EventHook.register('load', {\n        noBubble: true,\n    });\n})(Special || (Special = {}));\n// Support: Chrome <=73+\n// Chrome doesn't alert on `event.preventDefault()`\n// as the standard mandates.\n(function (Special) {\n    EventHook.register('beforeunload', {\n        postDispatch(elem, event) {\n            if (event.result !== undefined && event.originalEvent) {\n                event.originalEvent.returnValue = event.result;\n            }\n        },\n    });\n})(Special || (Special = {}));\n// For mouseenter/leave call the handler if related is outside the target.\n// NB: No relatedTarget if the mouse left/entered the browser window\n(function (Special) {\n    EventHook.register('mouseenter', {\n        delegateType: 'mouseover',\n        bindType: 'mouseover',\n        handle(target, event) {\n            let ret;\n            const related = event.relatedTarget;\n            const handleObj = event.handleObj;\n            if (!related || (related !== target && !Util.contains(target, related))) {\n                event.type = handleObj.originType;\n                ret = handleObj.handler.call(target, event);\n                event.type = 'mouseover';\n            }\n            return ret;\n        },\n    });\n    EventHook.register('mouseleave', {\n        delegateType: 'mouseout',\n        bindType: 'mouseout',\n        handle(target, event) {\n            let ret;\n            const related = event.relatedTarget;\n            const handleObj = event.handleObj;\n            if (!related || (related !== target && !Util.contains(target, related))) {\n                event.type = handleObj.originType;\n                ret = handleObj.handler.call(target, event);\n                event.type = 'mouseout';\n            }\n            return ret;\n        },\n    });\n})(Special || (Special = {}));\n//# sourceMappingURL=special.js.map","import { Util } from './util';\nexport class EventObject {\n    constructor(e, props) {\n        this.isDefaultPrevented = Util.returnFalse;\n        this.isPropagationStopped = Util.returnFalse;\n        this.isImmediatePropagationStopped = Util.returnFalse;\n        this.isSimulated = false;\n        this.preventDefault = () => {\n            const e = this.originalEvent;\n            this.isDefaultPrevented = Util.returnTrue;\n            if (e && !this.isSimulated) {\n                e.preventDefault();\n            }\n        };\n        this.stopPropagation = () => {\n            const e = this.originalEvent;\n            this.isPropagationStopped = Util.returnTrue;\n            if (e && !this.isSimulated) {\n                e.stopPropagation();\n            }\n        };\n        this.stopImmediatePropagation = () => {\n            const e = this.originalEvent;\n            this.isImmediatePropagationStopped = Util.returnTrue;\n            if (e && !this.isSimulated) {\n                e.stopImmediatePropagation();\n            }\n            this.stopPropagation();\n        };\n        if (typeof e === 'string') {\n            this.type = e;\n        }\n        else if (e.type) {\n            this.originalEvent = e;\n            this.type = e.type;\n            // Events bubbling up the document may have been marked as prevented\n            // by a handler lower down the tree; reflect the correct value.\n            this.isDefaultPrevented = e.defaultPrevented\n                ? Util.returnTrue\n                : Util.returnFalse;\n            // Create target properties\n            this.target = e.target;\n            this.currentTarget = e.currentTarget;\n            this.relatedTarget = e.relatedTarget;\n            this.timeStamp = e.timeStamp;\n        }\n        // Put explicitly provided properties onto the event object\n        if (props) {\n            Object.assign(this, props);\n        }\n        // Create a timestamp if incoming event doesn't have one\n        if (!this.timeStamp) {\n            this.timeStamp = Date.now();\n        }\n    }\n}\n(function (EventObject) {\n    function create(originalEvent) {\n        return originalEvent instanceof EventObject\n            ? originalEvent\n            : new EventObject(originalEvent);\n    }\n    EventObject.create = create;\n})(EventObject || (EventObject = {}));\n(function (EventObject) {\n    function addProperty(name, hook) {\n        Object.defineProperty(EventObject.prototype, name, {\n            enumerable: true,\n            configurable: true,\n            get: typeof hook === 'function'\n                ? // eslint-disable-next-line\n                    function () {\n                        if (this.originalEvent) {\n                            return hook(this.originalEvent);\n                        }\n                    }\n                : // eslint-disable-next-line\n                    function () {\n                        if (this.originalEvent) {\n                            return this.originalEvent[name];\n                        }\n                    },\n            set(value) {\n                Object.defineProperty(this, name, {\n                    enumerable: true,\n                    configurable: true,\n                    writable: true,\n                    value,\n                });\n            },\n        });\n    }\n    EventObject.addProperty = addProperty;\n})(EventObject || (EventObject = {}));\n(function (EventObject) {\n    // Common event props including KeyEvent and MouseEvent specific props.\n    const commonProps = {\n        bubbles: true,\n        cancelable: true,\n        eventPhase: true,\n        detail: true,\n        view: true,\n        button: true,\n        buttons: true,\n        clientX: true,\n        clientY: true,\n        offsetX: true,\n        offsetY: true,\n        pageX: true,\n        pageY: true,\n        screenX: true,\n        screenY: true,\n        toElement: true,\n        pointerId: true,\n        pointerType: true,\n        char: true,\n        code: true,\n        charCode: true,\n        key: true,\n        keyCode: true,\n        touches: true,\n        changedTouches: true,\n        targetTouches: true,\n        which: true,\n        altKey: true,\n        ctrlKey: true,\n        metaKey: true,\n        shiftKey: true,\n    };\n    Object.keys(commonProps).forEach((name) => EventObject.addProperty(name, commonProps[name]));\n})(EventObject || (EventObject = {}));\n//# sourceMappingURL=object.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Util } from './util';\nimport { EventHook } from './hook';\nimport { Store } from './store';\nimport { EventObject } from './object';\nimport './special';\nexport var Core;\n(function (Core) {\n    let triggered;\n    function on(elem, types, handler, data, selector) {\n        if (!Util.isValidTarget(elem)) {\n            return;\n        }\n        // Caller can pass in an object of custom data in lieu of the handler\n        let handlerData;\n        if (typeof handler !== 'function') {\n            const { handler: h, selector: s } = handler, others = __rest(handler, [\"handler\", \"selector\"]);\n            handler = h; // eslint-disable-line\n            selector = s; // eslint-disable-line\n            handlerData = others;\n        }\n        // Ensure that invalid selectors throw exceptions at attach time\n        // if (!Util.isValidSelector(elem, selector)) {\n        //   throw new Error('Delegate event with invalid selector.')\n        // }\n        const store = Store.ensure(elem);\n        // Ensure the main handle\n        let mainHandler = store.handler;\n        if (mainHandler == null) {\n            mainHandler = store.handler = function (e, ...args) {\n                return triggered !== e.type ? dispatch(elem, e, ...args) : undefined;\n            };\n        }\n        // Make sure that the handler has a unique ID, used to find/remove it later\n        const guid = Util.ensureHandlerId(handler);\n        // Handle multiple events separated by a space\n        Util.splitType(types).forEach((item) => {\n            const { originType, namespaces } = Util.normalizeType(item);\n            // There *must* be a type, no attaching namespace-only handlers\n            if (!originType) {\n                return;\n            }\n            let type = originType;\n            let hook = EventHook.get(type);\n            // If selector defined, determine special event type, otherwise given type\n            type = (selector ? hook.delegateType : hook.bindType) || type;\n            // Update hook based on newly reset type\n            hook = EventHook.get(type);\n            // handleObj is passed to all event handlers\n            const handleObj = Object.assign({ type,\n                originType,\n                data,\n                selector,\n                guid, handler: handler, namespace: namespaces.join('.') }, handlerData);\n            // Init the event handler queue if we're the first\n            const events = store.events;\n            let bag = events[type];\n            if (!bag) {\n                bag = events[type] = { handlers: [], delegateCount: 0 };\n                // Only use addEventListener if the `hook.steup` returns false\n                if (!hook.setup ||\n                    hook.setup(elem, data, namespaces, mainHandler) === false) {\n                    Util.addEventListener(elem, type, mainHandler);\n                }\n            }\n            if (hook.add) {\n                Util.removeHandlerId(handleObj.handler);\n                hook.add(elem, handleObj);\n                Util.setHandlerId(handleObj.handler, guid);\n            }\n            // Add to the element's handler list, delegates in front\n            if (selector) {\n                bag.handlers.splice(bag.delegateCount, 0, handleObj);\n                bag.delegateCount += 1;\n            }\n            else {\n                bag.handlers.push(handleObj);\n            }\n        });\n    }\n    Core.on = on;\n    function off(elem, types, handler, selector, mappedTypes) {\n        const store = Store.get(elem);\n        if (!store) {\n            return;\n        }\n        const events = store.events;\n        if (!events) {\n            return;\n        }\n        // Once for each type.namespace in types; type may be omitted\n        Util.splitType(types).forEach((item) => {\n            const { originType, namespaces } = Util.normalizeType(item);\n            // Unbind all events (on this namespace, if provided) for the element\n            if (!originType) {\n                Object.keys(events).forEach((key) => {\n                    off(elem, key + item, handler, selector, true);\n                });\n                return;\n            }\n            let type = originType;\n            const hook = EventHook.get(type);\n            type = (selector ? hook.delegateType : hook.bindType) || type;\n            const bag = events[type];\n            if (!bag) {\n                return;\n            }\n            const rns = namespaces.length > 0\n                ? new RegExp(`(^|\\\\.)${namespaces.join('\\\\.(?:.*\\\\.|)')}(\\\\.|$)`)\n                : null;\n            // Remove matching events\n            const originHandlerCount = bag.handlers.length;\n            for (let i = bag.handlers.length - 1; i >= 0; i -= 1) {\n                const handleObj = bag.handlers[i];\n                if ((mappedTypes || originType === handleObj.originType) &&\n                    (!handler || Util.getHandlerId(handler) === handleObj.guid) &&\n                    (rns == null ||\n                        (handleObj.namespace && rns.test(handleObj.namespace))) &&\n                    (selector == null ||\n                        selector === handleObj.selector ||\n                        (selector === '**' && handleObj.selector))) {\n                    bag.handlers.splice(i, 1);\n                    if (handleObj.selector) {\n                        bag.delegateCount -= 1;\n                    }\n                    if (hook.remove) {\n                        hook.remove(elem, handleObj);\n                    }\n                }\n            }\n            if (originHandlerCount && bag.handlers.length === 0) {\n                if (!hook.teardown ||\n                    hook.teardown(elem, namespaces, store.handler) === false) {\n                    Util.removeEventListener(elem, type, store.handler);\n                }\n                delete events[type];\n            }\n        });\n        // Remove data and the expando if it's no longer used\n        if (Object.keys(events).length === 0) {\n            Store.remove(elem);\n        }\n    }\n    Core.off = off;\n    function dispatch(elem, evt, ...args) {\n        const event = EventObject.create(evt);\n        event.delegateTarget = elem;\n        const hook = EventHook.get(event.type);\n        if (hook.preDispatch && hook.preDispatch(elem, event) === false) {\n            return;\n        }\n        const handlerQueue = Util.getHandlerQueue(elem, event);\n        // Run delegates first; they may want to stop propagation beneath us\n        for (let i = 0, l = handlerQueue.length; i < l && !event.isPropagationStopped(); i += 1) {\n            const matched = handlerQueue[i];\n            event.currentTarget = matched.elem;\n            for (let j = 0, k = matched.handlers.length; j < k && !event.isImmediatePropagationStopped(); j += 1) {\n                const handleObj = matched.handlers[j];\n                // If event is namespaced, then each handler is only invoked if it is\n                // specially universal or its namespaces are a superset of the event's.\n                if (event.rnamespace == null ||\n                    (handleObj.namespace && event.rnamespace.test(handleObj.namespace))) {\n                    event.handleObj = handleObj;\n                    event.data = handleObj.data;\n                    const hookHandle = EventHook.get(handleObj.originType).handle;\n                    const result = hookHandle\n                        ? hookHandle(matched.elem, event, ...args)\n                        : handleObj.handler.call(matched.elem, event, ...args);\n                    if (result !== undefined) {\n                        event.result = result;\n                        if (result === false) {\n                            event.preventDefault();\n                            event.stopPropagation();\n                        }\n                    }\n                }\n            }\n        }\n        // Call the postDispatch hook for the mapped type\n        if (hook.postDispatch) {\n            hook.postDispatch(elem, event);\n        }\n        return event.result;\n    }\n    Core.dispatch = dispatch;\n    function trigger(event, eventArgs, elem, onlyHandlers) {\n        let eventObj = event;\n        let type = typeof event === 'string' ? event : event.type;\n        let namespaces = typeof event === 'string' || eventObj.namespace == null\n            ? []\n            : eventObj.namespace.split('.');\n        const node = elem;\n        // Don't do events on text and comment nodes\n        if (node.nodeType === 3 || node.nodeType === 8) {\n            return;\n        }\n        if (type.indexOf('.') > -1) {\n            // Namespaced trigger; create a regexp to match event type in handle()\n            namespaces = type.split('.');\n            type = namespaces.shift();\n            namespaces.sort();\n        }\n        const ontype = type.indexOf(':') < 0 && `on${type}`;\n        // Caller can pass in a EventObject, Object, or just an event type string\n        eventObj =\n            event instanceof EventObject\n                ? event\n                : new EventObject(type, typeof event === 'object' ? event : null);\n        eventObj.namespace = namespaces.join('.');\n        eventObj.rnamespace = eventObj.namespace\n            ? new RegExp(`(^|\\\\.)${namespaces.join('\\\\.(?:.*\\\\.|)')}(\\\\.|$)`)\n            : null;\n        // Clean up the event in case it is being reused\n        eventObj.result = undefined;\n        if (!eventObj.target) {\n            eventObj.target = node;\n        }\n        const args = [eventObj];\n        if (Array.isArray(eventArgs)) {\n            args.push(...eventArgs);\n        }\n        else {\n            args.push(eventArgs);\n        }\n        const hook = EventHook.get(type);\n        if (!onlyHandlers &&\n            hook.trigger &&\n            hook.trigger(node, eventObj, eventArgs) === false) {\n            return;\n        }\n        let bubbleType;\n        // Determine event propagation path in advance, per W3C events spec.\n        // Bubble up to document, then to window; watch for a global ownerDocument\n        const eventPath = [node];\n        if (!onlyHandlers && !hook.noBubble && !Util.isWindow(node)) {\n            bubbleType = hook.delegateType || type;\n            let last = node;\n            let curr = node.parentNode;\n            while (curr != null) {\n                eventPath.push(curr);\n                last = curr;\n                curr = curr.parentNode;\n            }\n            // Only add window if we got to document\n            const doc = node.ownerDocument || document;\n            if (last === doc) {\n                const win = last.defaultView || last.parentWindow || window;\n                eventPath.push(win);\n            }\n        }\n        let lastElement = node;\n        // Fire handlers on the event path\n        for (let i = 0, l = eventPath.length; i < l && !eventObj.isPropagationStopped(); i += 1) {\n            const currElement = eventPath[i];\n            lastElement = currElement;\n            eventObj.type = i > 1 ? bubbleType : hook.bindType || type;\n            // Custom handler\n            const store = Store.get(currElement);\n            if (store) {\n                if (store.events[eventObj.type] && store.handler) {\n                    store.handler.call(currElement, ...args);\n                }\n            }\n            // Native handler\n            const handle = (ontype && currElement[ontype]) || null;\n            if (handle && Util.isValidTarget(currElement)) {\n                eventObj.result = handle.call(currElement, ...args);\n                if (eventObj.result === false) {\n                    eventObj.preventDefault();\n                }\n            }\n        }\n        eventObj.type = type;\n        // If nobody prevented the default action, do it now\n        if (!onlyHandlers && !eventObj.isDefaultPrevented()) {\n            const preventDefault = hook.preventDefault;\n            if ((preventDefault == null ||\n                preventDefault(eventPath.pop(), eventObj, eventArgs) === false) &&\n                Util.isValidTarget(node)) {\n                // Call a native DOM method on the target with the same name as the\n                // event. Don't do default actions on window.\n                if (ontype &&\n                    typeof node[type] === 'function' &&\n                    !Util.isWindow(node)) {\n                    // Don't re-trigger an onFOO event when we call its FOO() method\n                    const tmp = node[ontype];\n                    if (tmp) {\n                        node[ontype] = null;\n                    }\n                    // Prevent re-triggering of the same event, since we already bubbled it above\n                    triggered = type;\n                    if (eventObj.isPropagationStopped()) {\n                        lastElement.addEventListener(type, Util.stopPropagationCallback);\n                    }\n                    node[type]();\n                    if (eventObj.isPropagationStopped()) {\n                        lastElement.removeEventListener(type, Util.stopPropagationCallback);\n                    }\n                    triggered = undefined;\n                    if (tmp) {\n                        node[ontype] = tmp;\n                    }\n                }\n            }\n        }\n        return eventObj.result;\n    }\n    Core.trigger = trigger;\n})(Core || (Core = {}));\n//# sourceMappingURL=core.js.map","/* eslint-disable no-param-reassign */\nimport { Core } from './core';\nimport { Util } from './util';\nexport var Event;\n(function (Event) {\n    function on(elem, events, selector, data, handler) {\n        Private.on(elem, events, selector, data, handler);\n        return elem;\n    }\n    Event.on = on;\n    function once(elem, events, selector, data, handler) {\n        Private.on(elem, events, selector, data, handler, true);\n        return elem;\n    }\n    Event.once = once;\n    function off(elem, events, selector, handler) {\n        Private.off(elem, events, selector, handler);\n        return elem;\n    }\n    Event.off = off;\n    function trigger(elem, event, args, \n    /**\n     * When onlyHandlers is `true`\n     * - Will not call `.event()` on the element it is triggered on. This means\n     *   `.trigger('submit', [], true)` on a form will not call `.submit()` on\n     *   the form.\n     * - Events will not bubble up the DOM hierarchy; if they are not handled\n     *   by the target element directly, they do nothing.\n     */\n    onlyHandlers) {\n        Core.trigger(event, args, elem, onlyHandlers);\n        return elem;\n    }\n    Event.trigger = trigger;\n})(Event || (Event = {}));\nvar Private;\n(function (Private) {\n    function on(elem, types, selector, data, fn, once) {\n        // Types can be a map of types/handlers\n        if (typeof types === 'object') {\n            // ( types-Object, selector, data )\n            if (typeof selector !== 'string') {\n                // ( types-Object, data )\n                data = data || selector;\n                selector = undefined;\n            }\n            Object.keys(types).forEach((type) => on(elem, type, selector, data, types[type], once));\n            return;\n        }\n        if (data == null && fn == null) {\n            // ( types, fn )\n            fn = selector;\n            data = selector = undefined;\n        }\n        else if (fn == null) {\n            if (typeof selector === 'string') {\n                // ( types, selector, fn )\n                fn = data;\n                data = undefined;\n            }\n            else {\n                // ( types, data, fn )\n                fn = data;\n                data = selector;\n                selector = undefined;\n            }\n        }\n        if (fn === false) {\n            fn = Util.returnFalse;\n        }\n        else if (!fn) {\n            return;\n        }\n        if (once) {\n            const originHandler = fn;\n            fn = function (event, ...args) {\n                // Can use an empty set, since event contains the info\n                Private.off(elem, event);\n                return originHandler.call(this, event, ...args);\n            };\n            // Use same guid so caller can remove using origFn\n            Util.setHandlerId(fn, Util.ensureHandlerId(originHandler));\n        }\n        Core.on(elem, types, fn, data, selector);\n    }\n    Private.on = on;\n    function off(elem, events, selector, fn) {\n        const evt = events;\n        if (evt && evt.preventDefault != null && evt.handleObj != null) {\n            const obj = evt.handleObj;\n            off(evt.delegateTarget, obj.namespace ? `${obj.originType}.${obj.namespace}` : obj.originType, obj.selector, obj.handler);\n            return;\n        }\n        if (typeof events === 'object') {\n            // ( types-object [, selector] )\n            const types = events;\n            Object.keys(types).forEach((type) => off(elem, type, selector, types[type]));\n            return;\n        }\n        if (selector === false || typeof selector === 'function') {\n            // ( types [, fn] )\n            fn = selector;\n            selector = undefined;\n        }\n        if (fn === false) {\n            fn = Util.returnFalse;\n        }\n        Core.off(elem, events, fn, selector);\n    }\n    Private.off = off;\n})(Private || (Private = {}));\n//# sourceMappingURL=main.js.map","import { Platform } from '../platform';\nexport class MouseWheelHandle {\n    constructor(target, onWheelCallback, onWheelGuard) {\n        this.animationFrameId = 0;\n        this.deltaX = 0;\n        this.deltaY = 0;\n        this.eventName = Platform.isEventSupported('wheel')\n            ? 'wheel'\n            : 'mousewheel';\n        this.target = target;\n        this.onWheelCallback = onWheelCallback;\n        this.onWheelGuard = onWheelGuard;\n        this.onWheel = this.onWheel.bind(this);\n        this.didWheel = this.didWheel.bind(this);\n    }\n    enable() {\n        this.target.addEventListener(this.eventName, this.onWheel, {\n            passive: false,\n        });\n    }\n    disable() {\n        this.target.removeEventListener(this.eventName, this.onWheel);\n    }\n    onWheel(e) {\n        if (this.onWheelGuard != null && !this.onWheelGuard(e)) {\n            return;\n        }\n        this.deltaX += e.deltaX;\n        this.deltaY += e.deltaY;\n        e.preventDefault();\n        let changed;\n        if (this.deltaX !== 0 || this.deltaY !== 0) {\n            e.stopPropagation();\n            changed = true;\n        }\n        if (changed === true && this.animationFrameId === 0) {\n            this.animationFrameId = requestAnimationFrame(() => {\n                this.didWheel(e);\n            });\n        }\n    }\n    didWheel(e) {\n        this.animationFrameId = 0;\n        this.onWheelCallback(e, this.deltaX, this.deltaY);\n        this.deltaX = 0;\n        this.deltaY = 0;\n    }\n}\n//# sourceMappingURL=mousewheel.js.map","import { computeStyle, computeStyleInt } from './css';\nimport { isElement } from './elem';\nexport function offset(elem) {\n    const rect = elem.getBoundingClientRect();\n    const win = elem.ownerDocument.defaultView;\n    return {\n        top: rect.top + win.pageYOffset,\n        left: rect.left + win.pageXOffset,\n    };\n}\nexport function width(elem) {\n    const rect = elem.getBoundingClientRect();\n    return rect.width;\n}\nexport function height(elem) {\n    const rect = elem.getBoundingClientRect();\n    return rect.height;\n}\nexport function position(elem) {\n    const isFixed = computeStyle(elem, 'position') === 'fixed';\n    let offsetValue;\n    if (isFixed) {\n        const rect = elem.getBoundingClientRect();\n        offsetValue = { left: rect.left, top: rect.top };\n    }\n    else {\n        offsetValue = offset(elem);\n    }\n    if (!isFixed) {\n        const doc = elem.ownerDocument;\n        let offsetParent = elem.offsetParent || doc.documentElement;\n        while ((offsetParent === doc.body || offsetParent === doc.documentElement) &&\n            computeStyle(offsetParent, 'position') === 'static') {\n            offsetParent = offsetParent.parentNode;\n        }\n        if (offsetParent !== elem && isElement(offsetParent)) {\n            const parentOffset = offset(offsetParent);\n            offsetValue.top -=\n                parentOffset.top + computeStyleInt(offsetParent, 'borderTopWidth');\n            offsetValue.left -=\n                parentOffset.left + computeStyleInt(offsetParent, 'borderLeftWidth');\n        }\n    }\n    return {\n        top: offsetValue.top - computeStyleInt(elem, 'marginTop'),\n        left: offsetValue.left - computeStyleInt(elem, 'marginLeft'),\n    };\n}\n//# sourceMappingURL=position.js.map","export function debounce(fn, delay = 60) {\n    let timer = null;\n    return (...args) => {\n        if (timer) {\n            clearTimeout(timer);\n        }\n        timer = window.setTimeout(() => {\n            fn.apply(this, args);\n        }, delay);\n    };\n}\n//# sourceMappingURL=util.js.map","import { debounce } from './util';\nexport function createSensor(element) {\n    let sensor = null;\n    let listeners = [];\n    const create = () => {\n        if (getComputedStyle(element).position === 'static') {\n            const style = element.style;\n            style.position = 'relative';\n        }\n        const obj = document.createElement('object');\n        obj.onload = () => {\n            obj.contentDocument.defaultView.addEventListener('resize', trigger);\n            trigger();\n        };\n        obj.style.display = 'block';\n        obj.style.position = 'absolute';\n        obj.style.top = '0';\n        obj.style.left = '0';\n        obj.style.height = '100%';\n        obj.style.width = '100%';\n        obj.style.overflow = 'hidden';\n        obj.style.pointerEvents = 'none';\n        obj.style.zIndex = '-1';\n        obj.style.opacity = '0';\n        obj.setAttribute('tabindex', '-1');\n        obj.type = 'text/html';\n        element.appendChild(obj);\n        // for ie, should set data attribute delay, or will be white screen\n        obj.data = 'about:blank';\n        return obj;\n    };\n    const trigger = debounce(() => {\n        listeners.forEach((listener) => listener(element));\n    });\n    const bind = (listener) => {\n        if (!sensor) {\n            sensor = create();\n        }\n        if (listeners.indexOf(listener) === -1) {\n            listeners.push(listener);\n        }\n    };\n    const destroy = () => {\n        if (sensor && sensor.parentNode) {\n            if (sensor.contentDocument) {\n                sensor.contentDocument.defaultView.removeEventListener('resize', trigger);\n            }\n            sensor.parentNode.removeChild(sensor);\n            sensor = null;\n            listeners = [];\n        }\n    };\n    const unbind = (listener) => {\n        const idx = listeners.indexOf(listener);\n        if (idx !== -1) {\n            listeners.splice(idx, 1);\n        }\n        // no listener, and sensor is exist then destroy the sensor\n        if (listeners.length === 0 && sensor) {\n            destroy();\n        }\n    };\n    return {\n        element,\n        bind,\n        destroy,\n        unbind,\n    };\n}\n//# sourceMappingURL=object.js.map","import { debounce } from './util';\nexport function createSensor(element) {\n    let sensor = null;\n    let listeners = [];\n    const trigger = debounce(() => {\n        listeners.forEach((listener) => {\n            listener(element);\n        });\n    });\n    const create = () => {\n        const s = new ResizeObserver(trigger);\n        s.observe(element);\n        trigger();\n        return s;\n    };\n    const bind = (listener) => {\n        if (!sensor) {\n            sensor = create();\n        }\n        if (listeners.indexOf(listener) === -1) {\n            listeners.push(listener);\n        }\n    };\n    const destroy = () => {\n        if (sensor) {\n            sensor.disconnect();\n            listeners = [];\n            sensor = null;\n        }\n    };\n    const unbind = (listener) => {\n        const idx = listeners.indexOf(listener);\n        if (idx !== -1) {\n            listeners.splice(idx, 1);\n        }\n        // no listener, and sensor is exist then destroy the sensor\n        if (listeners.length === 0 && sensor) {\n            destroy();\n        }\n    };\n    return {\n        element,\n        bind,\n        destroy,\n        unbind,\n    };\n}\n//# sourceMappingURL=observer.js.map","import { createSensor as createObjectSensor } from './object';\nimport { createSensor as createResizeObserverSensor } from './observer';\nexport const createSensor = typeof ResizeObserver !== 'undefined'\n    ? createResizeObserverSensor\n    : createObjectSensor;\n//# sourceMappingURL=index.js.map","import { createSensor } from './sensors';\nexport var SizeSensor;\n(function (SizeSensor) {\n    const cache = new WeakMap();\n    function get(element) {\n        let sensor = cache.get(element);\n        if (sensor) {\n            return sensor;\n        }\n        sensor = createSensor(element);\n        cache.set(element, sensor);\n        return sensor;\n    }\n    function remove(sensor) {\n        sensor.destroy();\n        cache.delete(sensor.element);\n    }\n    SizeSensor.bind = (element, cb) => {\n        const sensor = get(element);\n        sensor.bind(cb);\n        return () => sensor.unbind(cb);\n    };\n    SizeSensor.clear = (element) => {\n        const sensor = get(element);\n        remove(sensor);\n    };\n})(SizeSensor || (SizeSensor = {}));\n//# sourceMappingURL=index.js.map","import { PriorityQueue } from './priorityqueue';\nexport var Dijkstra;\n(function (Dijkstra) {\n    function run(adjacencyList, source, weight = (u, v) => 1) {\n        const dist = {};\n        const previous = {};\n        const scanned = {};\n        const queue = new PriorityQueue();\n        dist[source] = 0;\n        Object.keys(adjacencyList).forEach((v) => {\n            if (v !== source) {\n                dist[v] = Infinity;\n            }\n            queue.insert(dist[v], v, v);\n        });\n        while (!queue.isEmpty()) {\n            const u = queue.remove();\n            scanned[u] = true;\n            const neighbours = adjacencyList[u] || [];\n            for (let i = 0; i < neighbours.length; i += 1) {\n                const v = neighbours[i];\n                if (!scanned[v]) {\n                    const alt = dist[u] + weight(u, v);\n                    if (alt < dist[v]) {\n                        dist[v] = alt;\n                        previous[v] = u;\n                        queue.updatePriority(v, alt);\n                    }\n                }\n            }\n        }\n        return previous;\n    }\n    Dijkstra.run = run;\n})(Dijkstra || (Dijkstra = {}));\n//# sourceMappingURL=dijkstra.js.map","// eslint-disable-next-line\nexport var ModifierKey;\n(function (ModifierKey) {\n    function parse(modifiers) {\n        const or = [];\n        const and = [];\n        if (Array.isArray(modifiers)) {\n            or.push(...modifiers);\n        }\n        else {\n            modifiers.split('|').forEach((item) => {\n                if (item.indexOf('&') === -1) {\n                    or.push(item);\n                }\n                else {\n                    and.push(...item.split('&'));\n                }\n            });\n        }\n        return { or, and };\n    }\n    ModifierKey.parse = parse;\n    function equals(modifiers1, modifiers2) {\n        if (modifiers1 != null && modifiers2 != null) {\n            const m1 = parse(modifiers1);\n            const m2 = parse(modifiers2);\n            const or1 = m1.or.sort();\n            const or2 = m2.or.sort();\n            const and1 = m1.and.sort();\n            const and2 = m2.and.sort();\n            const equal = (a1, a2) => {\n                return (a1.length === a2.length &&\n                    (a1.length === 0 || a1.every((a, i) => a === a2[i])));\n            };\n            return equal(or1, or2) && equal(and1, and2);\n        }\n        if (modifiers1 == null && modifiers2 == null) {\n            return true;\n        }\n        return false;\n    }\n    ModifierKey.equals = equals;\n    function isMatch(e, modifiers, strict) {\n        if (modifiers == null ||\n            (Array.isArray(modifiers) && modifiers.length === 0)) {\n            return strict\n                ? e.altKey !== true &&\n                    e.ctrlKey !== true &&\n                    e.metaKey !== true &&\n                    e.shiftKey !== true\n                : true;\n        }\n        const { or, and } = parse(modifiers);\n        const match = (key) => {\n            const name = `${key.toLowerCase()}Key`;\n            return e[name] === true;\n        };\n        return or.some((key) => match(key)) && and.every((key) => match(key));\n    }\n    ModifierKey.isMatch = isMatch;\n})(ModifierKey || (ModifierKey = {}));\n//# sourceMappingURL=index.js.map","export var Timing;\n(function (Timing) {\n    Timing.linear = (t) => t;\n    Timing.quad = (t) => t * t;\n    Timing.cubic = (t) => t * t * t;\n    Timing.inout = (t) => {\n        if (t <= 0) {\n            return 0;\n        }\n        if (t >= 1) {\n            return 1;\n        }\n        const t2 = t * t;\n        const t3 = t2 * t;\n        return 4 * (t < 0.5 ? t3 : 3 * (t - t2) + t3 - 0.75);\n    };\n    Timing.exponential = (t) => {\n        return Math.pow(2, 10 * (t - 1)); // eslint-disable-line\n    };\n    Timing.bounce = ((t) => {\n        // eslint-disable-next-line\n        for (let a = 0, b = 1; 1; a += b, b /= 2) {\n            if (t >= (7 - 4 * a) / 11) {\n                const q = (11 - 6 * a - 11 * t) / 4;\n                return -q * q + b * b;\n            }\n        }\n    });\n})(Timing || (Timing = {}));\n(function (Timing) {\n    Timing.decorators = {\n        reverse(f) {\n            return (t) => 1 - f(1 - t);\n        },\n        reflect(f) {\n            return (t) => 0.5 * (t < 0.5 ? f(2 * t) : 2 - f(2 - 2 * t));\n        },\n        clamp(f, n = 0, x = 1) {\n            return (t) => {\n                const r = f(t);\n                return r < n ? n : r > x ? x : r;\n            };\n        },\n        back(s = 1.70158) {\n            return (t) => t * t * ((s + 1) * t - s);\n        },\n        elastic(x = 1.5) {\n            return (t) => Math.pow(2, 10 * (t - 1)) * Math.cos(((20 * Math.PI * x) / 3) * t); // eslint-disable-line\n        },\n    };\n})(Timing || (Timing = {}));\n(function (Timing) {\n    // Slight acceleration from zero to full speed\n    function easeInSine(t) {\n        return -1 * Math.cos(t * (Math.PI / 2)) + 1;\n    }\n    Timing.easeInSine = easeInSine;\n    // Slight deceleration at the end\n    function easeOutSine(t) {\n        return Math.sin(t * (Math.PI / 2));\n    }\n    Timing.easeOutSine = easeOutSine;\n    // Slight acceleration at beginning and slight deceleration at end\n    function easeInOutSine(t) {\n        return -0.5 * (Math.cos(Math.PI * t) - 1);\n    }\n    Timing.easeInOutSine = easeInOutSine;\n    // Accelerating from zero velocity\n    function easeInQuad(t) {\n        return t * t;\n    }\n    Timing.easeInQuad = easeInQuad;\n    // Decelerating to zero velocity\n    function easeOutQuad(t) {\n        return t * (2 - t);\n    }\n    Timing.easeOutQuad = easeOutQuad;\n    // Acceleration until halfway, then deceleration\n    function easeInOutQuad(t) {\n        return t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\n    }\n    Timing.easeInOutQuad = easeInOutQuad;\n    // Accelerating from zero velocity\n    function easeInCubic(t) {\n        return t * t * t;\n    }\n    Timing.easeInCubic = easeInCubic;\n    // Decelerating to zero velocity\n    function easeOutCubic(t) {\n        const t1 = t - 1;\n        return t1 * t1 * t1 + 1;\n    }\n    Timing.easeOutCubic = easeOutCubic;\n    // Acceleration until halfway, then deceleration\n    function easeInOutCubic(t) {\n        return t < 0.5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;\n    }\n    Timing.easeInOutCubic = easeInOutCubic;\n    // Accelerating from zero velocity\n    function easeInQuart(t) {\n        return t * t * t * t;\n    }\n    Timing.easeInQuart = easeInQuart;\n    // Decelerating to zero velocity\n    function easeOutQuart(t) {\n        const t1 = t - 1;\n        return 1 - t1 * t1 * t1 * t1;\n    }\n    Timing.easeOutQuart = easeOutQuart;\n    // Acceleration until halfway, then deceleration\n    function easeInOutQuart(t) {\n        const t1 = t - 1;\n        return t < 0.5 ? 8 * t * t * t * t : 1 - 8 * t1 * t1 * t1 * t1;\n    }\n    Timing.easeInOutQuart = easeInOutQuart;\n    // Accelerating from zero velocity\n    function easeInQuint(t) {\n        return t * t * t * t * t;\n    }\n    Timing.easeInQuint = easeInQuint;\n    // Decelerating to zero velocity\n    function easeOutQuint(t) {\n        const t1 = t - 1;\n        return 1 + t1 * t1 * t1 * t1 * t1;\n    }\n    Timing.easeOutQuint = easeOutQuint;\n    // Acceleration until halfway, then deceleration\n    function easeInOutQuint(t) {\n        const t1 = t - 1;\n        return t < 0.5 ? 16 * t * t * t * t * t : 1 + 16 * t1 * t1 * t1 * t1 * t1;\n    }\n    Timing.easeInOutQuint = easeInOutQuint;\n    // Accelerate exponentially until finish\n    function easeInExpo(t) {\n        if (t === 0) {\n            return 0;\n        }\n        return Math.pow(2, 10 * (t - 1)); // eslint-disable-line\n    }\n    Timing.easeInExpo = easeInExpo;\n    // Initial exponential acceleration slowing to stop\n    function easeOutExpo(t) {\n        if (t === 1) {\n            return 1;\n        }\n        return -Math.pow(2, -10 * t) + 1; // eslint-disable-line\n    }\n    Timing.easeOutExpo = easeOutExpo;\n    // Exponential acceleration and deceleration\n    function easeInOutExpo(t) {\n        if (t === 0 || t === 1) {\n            return t;\n        }\n        const scaledTime = t * 2;\n        const scaledTime1 = scaledTime - 1;\n        if (scaledTime < 1) {\n            return 0.5 * Math.pow(2, 10 * scaledTime1); // eslint-disable-line\n        }\n        return 0.5 * (-Math.pow(2, -10 * scaledTime1) + 2); // eslint-disable-line\n    }\n    Timing.easeInOutExpo = easeInOutExpo;\n    // Increasing velocity until stop\n    function easeInCirc(t) {\n        const scaledTime = t / 1;\n        return -1 * (Math.sqrt(1 - scaledTime * t) - 1);\n    }\n    Timing.easeInCirc = easeInCirc;\n    // Start fast, decreasing velocity until stop\n    function easeOutCirc(t) {\n        const t1 = t - 1;\n        return Math.sqrt(1 - t1 * t1);\n    }\n    Timing.easeOutCirc = easeOutCirc;\n    // Fast increase in velocity, fast decrease in velocity\n    function easeInOutCirc(t) {\n        const scaledTime = t * 2;\n        const scaledTime1 = scaledTime - 2;\n        if (scaledTime < 1) {\n            return -0.5 * (Math.sqrt(1 - scaledTime * scaledTime) - 1);\n        }\n        return 0.5 * (Math.sqrt(1 - scaledTime1 * scaledTime1) + 1);\n    }\n    Timing.easeInOutCirc = easeInOutCirc;\n    // Slow movement backwards then fast snap to finish\n    function easeInBack(t, magnitude = 1.70158) {\n        return t * t * ((magnitude + 1) * t - magnitude);\n    }\n    Timing.easeInBack = easeInBack;\n    // Fast snap to backwards point then slow resolve to finish\n    function easeOutBack(t, magnitude = 1.70158) {\n        const scaledTime = t / 1 - 1;\n        return (scaledTime * scaledTime * ((magnitude + 1) * scaledTime + magnitude) + 1);\n    }\n    Timing.easeOutBack = easeOutBack;\n    // Slow movement backwards, fast snap to past finish, slow resolve to finish\n    function easeInOutBack(t, magnitude = 1.70158) {\n        const scaledTime = t * 2;\n        const scaledTime2 = scaledTime - 2;\n        const s = magnitude * 1.525;\n        if (scaledTime < 1) {\n            return 0.5 * scaledTime * scaledTime * ((s + 1) * scaledTime - s);\n        }\n        return 0.5 * (scaledTime2 * scaledTime2 * ((s + 1) * scaledTime2 + s) + 2);\n    }\n    Timing.easeInOutBack = easeInOutBack;\n    // Bounces slowly then quickly to finish\n    function easeInElastic(t, magnitude = 0.7) {\n        if (t === 0 || t === 1) {\n            return t;\n        }\n        const scaledTime = t / 1;\n        const scaledTime1 = scaledTime - 1;\n        const p = 1 - magnitude;\n        const s = (p / (2 * Math.PI)) * Math.asin(1);\n        return -(Math.pow(2, 10 * scaledTime1) * // eslint-disable-line\n            Math.sin(((scaledTime1 - s) * (2 * Math.PI)) / p));\n    }\n    Timing.easeInElastic = easeInElastic;\n    // Fast acceleration, bounces to zero\n    function easeOutElastic(t, magnitude = 0.7) {\n        const p = 1 - magnitude;\n        const scaledTime = t * 2;\n        if (t === 0 || t === 1) {\n            return t;\n        }\n        const s = (p / (2 * Math.PI)) * Math.asin(1);\n        return (Math.pow(2, -10 * scaledTime) * // eslint-disable-line\n            Math.sin(((scaledTime - s) * (2 * Math.PI)) / p) +\n            1);\n    }\n    Timing.easeOutElastic = easeOutElastic;\n    // Slow start and end, two bounces sandwich a fast motion\n    function easeInOutElastic(t, magnitude = 0.65) {\n        const p = 1 - magnitude;\n        if (t === 0 || t === 1) {\n            return t;\n        }\n        const scaledTime = t * 2;\n        const scaledTime1 = scaledTime - 1;\n        const s = (p / (2 * Math.PI)) * Math.asin(1);\n        if (scaledTime < 1) {\n            return (-0.5 *\n                (Math.pow(2, 10 * scaledTime1) * // eslint-disable-line\n                    Math.sin(((scaledTime1 - s) * (2 * Math.PI)) / p)));\n        }\n        return (Math.pow(2, -10 * scaledTime1) * // eslint-disable-line\n            Math.sin(((scaledTime1 - s) * (2 * Math.PI)) / p) *\n            0.5 +\n            1);\n    }\n    Timing.easeInOutElastic = easeInOutElastic;\n    // Bounce to completion\n    function easeOutBounce(t) {\n        const scaledTime = t / 1;\n        if (scaledTime < 1 / 2.75) {\n            return 7.5625 * scaledTime * scaledTime;\n        }\n        if (scaledTime < 2 / 2.75) {\n            const scaledTime2 = scaledTime - 1.5 / 2.75;\n            return 7.5625 * scaledTime2 * scaledTime2 + 0.75;\n        }\n        if (scaledTime < 2.5 / 2.75) {\n            const scaledTime2 = scaledTime - 2.25 / 2.75;\n            return 7.5625 * scaledTime2 * scaledTime2 + 0.9375;\n        }\n        {\n            const scaledTime2 = scaledTime - 2.625 / 2.75;\n            return 7.5625 * scaledTime2 * scaledTime2 + 0.984375;\n        }\n    }\n    Timing.easeOutBounce = easeOutBounce;\n    // Bounce increasing in velocity until completion\n    function easeInBounce(t) {\n        return 1 - easeOutBounce(1 - t);\n    }\n    Timing.easeInBounce = easeInBounce;\n    // Bounce in and bounce out\n    function easeInOutBounce(t) {\n        if (t < 0.5) {\n            return easeInBounce(t * 2) * 0.5;\n        }\n        return easeOutBounce(t * 2 - 1) * 0.5 + 0.5;\n    }\n    Timing.easeInOutBounce = easeInOutBounce;\n})(Timing || (Timing = {}));\n//# sourceMappingURL=timing.js.map","export var Interp;\n(function (Interp) {\n    Interp.number = (a, b) => {\n        const d = b - a;\n        return (t) => {\n            return a + d * t;\n        };\n    };\n    Interp.object = (a, b) => {\n        const keys = Object.keys(a);\n        return (t) => {\n            const ret = {};\n            for (let i = keys.length - 1; i !== -1; i -= 1) {\n                const key = keys[i];\n                ret[key] = a[key] + (b[key] - a[key]) * t;\n            }\n            return ret;\n        };\n    };\n    Interp.unit = (a, b) => {\n        const reg = /(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/;\n        const ma = reg.exec(a);\n        const mb = reg.exec(b);\n        const pb = mb ? mb[1] : '';\n        const aa = ma ? +ma[1] : 0;\n        const bb = mb ? +mb[1] : 0;\n        const index = pb.indexOf('.');\n        const precision = index > 0 ? pb[1].length - index - 1 : 0;\n        const d = bb - aa;\n        const u = ma ? ma[2] : '';\n        return (t) => {\n            return (aa + d * t).toFixed(precision) + u;\n        };\n    };\n    Interp.color = (a, b) => {\n        const ca = parseInt(a.slice(1), 16);\n        const cb = parseInt(b.slice(1), 16);\n        const ra = ca & 0x0000ff;\n        const rd = (cb & 0x0000ff) - ra;\n        const ga = ca & 0x00ff00;\n        const gd = (cb & 0x00ff00) - ga;\n        const ba = ca & 0xff0000;\n        const bd = (cb & 0xff0000) - ba;\n        return (t) => {\n            const r = (ra + rd * t) & 0x000000ff;\n            const g = (ga + gd * t) & 0x0000ff00;\n            const b = (ba + bd * t) & 0x00ff0000;\n            return `#${((1 << 24) | r | g | b).toString(16).slice(1)}`;\n        };\n    };\n})(Interp || (Interp = {}));\n//# sourceMappingURL=interp.js.map","/**\n * An implementation of the Priority Queue abstract data type.\n *\n * @see: http://en.wikipedia.org/wiki/Priority_queue\n *\n * It is like a normal stack or queue, but where each item has assigned a\n * priority (a number). Items with higher priority are served before items\n * with lower priority. This implementation uses binary heap as an internal\n * representation of the queue. The time complexity of all the methods is as\n * follows:\n *\n * - create: `O(n)`\n * - insert: `O(log n)`\n * - remove: `O(log n)`\n * - peek: `O(1)`\n * - isEmpty: `O(1)`\n * - peekPriority: `O(1)`\n */\nexport class PriorityQueue {\n    constructor(options = {}) {\n        this.comparator = options.comparator || PriorityQueue.defaultComparator;\n        this.index = {};\n        this.data = options.data || [];\n        this.heapify();\n    }\n    /**\n     * Returns `true` if the priority queue is empty, `false` otherwise.\n     */\n    isEmpty() {\n        return this.data.length === 0;\n    }\n    /**\n     * Inserts a value with priority to the queue. Optionally pass a unique\n     * id of this item. Passing unique IDs for each item you insert allows\n     * you to use the `updatePriority()` operation.\n     * @param priority\n     * @param value\n     * @param id\n     */\n    insert(priority, value, id) {\n        const item = { priority, value };\n        const index = this.data.length;\n        if (id) {\n            item.id = id;\n            this.index[id] = index;\n        }\n        this.data.push(item);\n        this.bubbleUp(index);\n        return this;\n    }\n    /**\n     * Returns the value of an item with the highest priority.\n     */\n    peek() {\n        return this.data[0] ? this.data[0].value : null;\n    }\n    /**\n     * Returns the highest priority in the queue.\n     */\n    peekPriority() {\n        return this.data[0] ? this.data[0].priority : null;\n    }\n    updatePriority(id, priority) {\n        const index = this.index[id];\n        if (typeof index === 'undefined') {\n            throw new Error(`Node with id '${id}' was not found in the heap.`);\n        }\n        const data = this.data;\n        const oldPriority = data[index].priority;\n        const comp = this.comparator(priority, oldPriority);\n        if (comp < 0) {\n            data[index].priority = priority;\n            this.bubbleUp(index);\n        }\n        else if (comp > 0) {\n            data[index].priority = priority;\n            this.bubbleDown(index);\n        }\n    }\n    /**\n     * Removes the item with the highest priority from the queue\n     *\n     * @returns The value of the removed item.\n     */\n    remove() {\n        const data = this.data;\n        const peek = data[0];\n        const last = data.pop();\n        if (peek.id) {\n            delete this.index[peek.id];\n        }\n        if (data.length > 0) {\n            data[0] = last;\n            if (last.id) {\n                this.index[last.id] = 0;\n            }\n            this.bubbleDown(0);\n        }\n        return peek ? peek.value : null;\n    }\n    heapify() {\n        for (let i = 0; i < this.data.length; i += 1) {\n            this.bubbleUp(i);\n        }\n    }\n    bubbleUp(index) {\n        const data = this.data;\n        let tmp;\n        let parent;\n        let current = index;\n        while (current > 0) {\n            parent = (current - 1) >>> 1;\n            if (this.comparator(data[current].priority, data[parent].priority) < 0) {\n                tmp = data[parent];\n                data[parent] = data[current];\n                let id = data[current].id;\n                if (id != null) {\n                    this.index[id] = parent;\n                }\n                data[current] = tmp;\n                id = data[current].id;\n                if (id != null) {\n                    this.index[id] = current;\n                }\n                current = parent;\n            }\n            else {\n                break;\n            }\n        }\n    }\n    bubbleDown(index) {\n        const data = this.data;\n        const last = data.length - 1;\n        let current = index;\n        // eslint-disable-next-line\n        while (true) {\n            const left = (current << 1) + 1;\n            const right = left + 1;\n            let minIndex = current;\n            if (left <= last &&\n                this.comparator(data[left].priority, data[minIndex].priority) < 0) {\n                minIndex = left;\n            }\n            if (right <= last &&\n                this.comparator(data[right].priority, data[minIndex].priority) < 0) {\n                minIndex = right;\n            }\n            if (minIndex !== current) {\n                const tmp = data[minIndex];\n                data[minIndex] = data[current];\n                let id = data[current].id;\n                if (id != null) {\n                    this.index[id] = minIndex;\n                }\n                data[current] = tmp;\n                id = data[current].id;\n                if (id != null) {\n                    this.index[id] = current;\n                }\n                current = minIndex;\n            }\n            else {\n                break;\n            }\n        }\n    }\n}\n(function (PriorityQueue) {\n    PriorityQueue.defaultComparator = (a, b) => a - b;\n})(PriorityQueue || (PriorityQueue = {}));\n//# sourceMappingURL=priorityqueue.js.map","/* eslint-disable no-constructor-return */\nimport { NumberExt } from '../number';\nexport class Color {\n    constructor(color, g, b, a) {\n        if (color == null) {\n            return this.set(255, 255, 255, 1);\n        }\n        if (typeof color === 'number') {\n            return this.set(color, g, b, a);\n        }\n        if (typeof color === 'string') {\n            return Color.fromString(color) || this;\n        }\n        if (Array.isArray(color)) {\n            return this.set(color);\n        }\n        this.set(color.r, color.g, color.b, color.a == null ? 1 : color.a);\n    }\n    blend(start, end, weight) {\n        this.set(start.r + (end.r - start.r) * weight, start.g + (end.g - start.g) * weight, start.b + (end.b - start.b) * weight, start.a + (end.a - start.a) * weight);\n    }\n    lighten(amount) {\n        const rgba = Color.lighten(this.toArray(), amount);\n        this.r = rgba[0];\n        this.g = rgba[1];\n        this.b = rgba[2];\n        this.a = rgba[3];\n    }\n    darken(amount) {\n        this.lighten(-amount);\n    }\n    set(arg0, arg1, arg2, arg3) {\n        const r = Array.isArray(arg0) ? arg0[0] : arg0;\n        const g = Array.isArray(arg0) ? arg0[1] : arg1;\n        const b = Array.isArray(arg0) ? arg0[2] : arg2;\n        const a = Array.isArray(arg0) ? arg0[3] : arg3;\n        this.r = Math.round(NumberExt.clamp(r, 0, 255));\n        this.g = Math.round(NumberExt.clamp(g, 0, 255));\n        this.b = Math.round(NumberExt.clamp(b, 0, 255));\n        this.a = a == null ? 1 : NumberExt.clamp(a, 0, 1);\n        return this;\n    }\n    toHex() {\n        const hex = ['r', 'g', 'b'].map((key) => {\n            const str = this[key].toString(16);\n            return str.length < 2 ? `0${str}` : str;\n        });\n        return `#${hex.join('')}`;\n    }\n    toRGBA() {\n        return this.toArray();\n    }\n    toHSLA() {\n        return Color.rgba2hsla(this.r, this.g, this.b, this.a);\n    }\n    toCSS(ignoreAlpha) {\n        const rgb = `${this.r},${this.g},${this.b},`;\n        return ignoreAlpha ? `rgb(${rgb})` : `rgba(${rgb},${this.a})`;\n    }\n    toGrey() {\n        return Color.makeGrey(Math.round((this.r + this.g + this.b) / 3), this.a);\n    }\n    toArray() {\n        return [this.r, this.g, this.b, this.a];\n    }\n    toString() {\n        return this.toCSS();\n    }\n}\n(function (Color) {\n    function fromArray(arr) {\n        return new Color(arr);\n    }\n    Color.fromArray = fromArray;\n    function fromHex(color) {\n        return new Color([...hex2rgb(color), 1]);\n    }\n    Color.fromHex = fromHex;\n    function fromRGBA(color) {\n        const matches = color.toLowerCase().match(/^rgba?\\(([\\s.,0-9]+)\\)/);\n        if (matches) {\n            const arr = matches[1].split(/\\s*,\\s*/).map((v) => parseInt(v, 10));\n            return new Color(arr);\n        }\n        return null;\n    }\n    Color.fromRGBA = fromRGBA;\n    function hue2rgb(m1, m2, h) {\n        if (h < 0) {\n            ++h; // eslint-disable-line\n        }\n        if (h > 1) {\n            --h; // eslint-disable-line\n        }\n        const h6 = 6 * h;\n        if (h6 < 1) {\n            return m1 + (m2 - m1) * h6;\n        }\n        if (2 * h < 1) {\n            return m2;\n        }\n        if (3 * h < 2) {\n            return m1 + (m2 - m1) * (2 / 3 - h) * 6;\n        }\n        return m1;\n    }\n    function fromHSLA(color) {\n        const matches = color.toLowerCase().match(/^hsla?\\(([\\s.,0-9]+)\\)/);\n        if (matches) {\n            const arr = matches[2].split(/\\s*,\\s*/);\n            const h = (((parseFloat(arr[0]) % 360) + 360) % 360) / 360;\n            const s = parseFloat(arr[1]) / 100;\n            const l = parseFloat(arr[2]) / 100;\n            const a = arr[3] == null ? 1 : parseInt(arr[3], 10);\n            return new Color(hsla2rgba(h, s, l, a));\n        }\n        return null;\n    }\n    Color.fromHSLA = fromHSLA;\n    function fromString(color) {\n        if (color.startsWith('#')) {\n            return fromHex(color);\n        }\n        if (color.startsWith('rgb')) {\n            return fromRGBA(color);\n        }\n        const preset = Color.named[color];\n        if (preset) {\n            return fromHex(preset);\n        }\n        return fromHSLA(color);\n    }\n    Color.fromString = fromString;\n    function makeGrey(g, a) {\n        return Color.fromArray([g, g, g, a]);\n    }\n    Color.makeGrey = makeGrey;\n    function rgba2hsla(arg0, arg1, arg2, arg3) {\n        const r = Array.isArray(arg0) ? arg0[0] : arg0;\n        const g = Array.isArray(arg0) ? arg0[1] : arg1;\n        const b = Array.isArray(arg0) ? arg0[2] : arg2;\n        const a = Array.isArray(arg0) ? arg0[3] : arg3;\n        const max = Math.max(r, g, b);\n        const min = Math.min(r, g, b);\n        const l = (max + min) / 2;\n        let h = 0;\n        let s = 0;\n        if (min !== max) {\n            const d = max - min;\n            s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n            switch (max) {\n                case r:\n                    h = (g - b) / d + (g < b ? 6 : 0);\n                    break;\n                case g:\n                    h = (b - r) / d + 2;\n                    break;\n                case b:\n                    h = (r - g) / d + 4;\n                    break;\n                default:\n                    break;\n            }\n            h /= 6;\n        }\n        return [h, s, l, a == null ? 1 : a];\n    }\n    Color.rgba2hsla = rgba2hsla;\n    function hsla2rgba(arg0, arg1, arg2, arg3) {\n        const h = Array.isArray(arg0) ? arg0[0] : arg0;\n        const s = Array.isArray(arg0) ? arg0[1] : arg1;\n        const l = Array.isArray(arg0) ? arg0[2] : arg2;\n        const a = Array.isArray(arg0) ? arg0[3] : arg3;\n        const m2 = l <= 0.5 ? l * (s + 1) : l + s - l * s;\n        const m1 = 2 * l - m2;\n        return [\n            hue2rgb(m1, m2, h + 1 / 3) * 256,\n            hue2rgb(m1, m2, h) * 256,\n            hue2rgb(m1, m2, h - 1 / 3) * 256,\n            a == null ? 1 : a,\n        ];\n    }\n    Color.hsla2rgba = hsla2rgba;\n    function random(ignoreAlpha) {\n        return new Color(Math.round(Math.random() * 256), Math.round(Math.random() * 256), Math.round(Math.random() * 256), ignoreAlpha ? undefined : parseFloat(Math.random().toFixed(2)));\n    }\n    Color.random = random;\n    function randomHex() {\n        const letters = '0123456789ABCDEF';\n        let color = '#';\n        for (let i = 0; i < 6; i += 1) {\n            color += letters[Math.floor(Math.random() * 16)];\n        }\n        return color;\n    }\n    Color.randomHex = randomHex;\n    function randomRGBA(ignoreAlpha) {\n        return random(ignoreAlpha).toString();\n    }\n    Color.randomRGBA = randomRGBA;\n    function invert(color, bw) {\n        if (typeof color === 'string') {\n            const pound = color[0] === '#';\n            const [r, g, b] = hex2rgb(color);\n            if (bw) {\n                // http://stackoverflow.com/a/3943023/112731\n                return r * 0.299 + g * 0.587 + b * 0.114 > 186 ? '#000000' : '#ffffff';\n            }\n            return `${pound ? '#' : ''}${rgb2hex(255 - r, 255 - g, 255 - b)}`;\n        }\n        const r = color[0];\n        const g = color[1];\n        const b = color[2];\n        const a = color[3];\n        if (bw) {\n            return r * 0.299 + g * 0.587 + b * 0.114 > 186\n                ? [0, 0, 0, a]\n                : [255, 255, 255, a];\n        }\n        return [255 - r, 255 - g, 255 - b, a];\n    }\n    Color.invert = invert;\n    function hex2rgb(hex) {\n        const color = hex.indexOf('#') === 0 ? hex : `#${hex}`;\n        let val = Number(`0x${color.substr(1)}`);\n        if (!(color.length === 4 || color.length === 7) || Number.isNaN(val)) {\n            throw new Error('Invalid hex color.');\n        }\n        const bits = color.length === 4 ? 4 : 8;\n        const mask = (1 << bits) - 1;\n        const bgr = ['b', 'g', 'r'].map(() => {\n            const c = val & mask;\n            val >>= bits;\n            return bits === 4 ? 17 * c : c;\n        });\n        return [bgr[2], bgr[1], bgr[0]];\n    }\n    function rgb2hex(r, g, b) {\n        const pad = (hex) => (hex.length < 2 ? `0${hex}` : hex);\n        return `${pad(r.toString(16))}${pad(g.toString(16))}${pad(b.toString(16))}`;\n    }\n    function lighten(color, amt) {\n        return lum(color, amt);\n    }\n    Color.lighten = lighten;\n    function darken(color, amt) {\n        return lum(color, -amt);\n    }\n    Color.darken = darken;\n    function lum(color, amt) {\n        if (typeof color === 'string') {\n            const pound = color[0] === '#';\n            const num = parseInt(pound ? color.substr(1) : color, 16);\n            const r = NumberExt.clamp((num >> 16) + amt, 0, 255);\n            const g = NumberExt.clamp(((num >> 8) & 0x00ff) + amt, 0, 255);\n            const b = NumberExt.clamp((num & 0x0000ff) + amt, 0, 255);\n            return `${pound ? '#' : ''}${(b | (g << 8) | (r << 16)).toString(16)}`;\n        }\n        const hex = rgb2hex(color[0], color[1], color[2]);\n        const arr = hex2rgb(lum(hex, amt));\n        return [arr[0], arr[1], arr[2], color[3]];\n    }\n})(Color || (Color = {}));\n(function (Color) {\n    Color.named = {\n        aliceblue: '#f0f8ff',\n        antiquewhite: '#faebd7',\n        aqua: '#00ffff',\n        aquamarine: '#7fffd4',\n        azure: '#f0ffff',\n        beige: '#f5f5dc',\n        bisque: '#ffe4c4',\n        black: '#000000',\n        blanchedalmond: '#ffebcd',\n        blue: '#0000ff',\n        blueviolet: '#8a2be2',\n        brown: '#a52a2a',\n        burlywood: '#deb887',\n        burntsienna: '#ea7e5d',\n        cadetblue: '#5f9ea0',\n        chartreuse: '#7fff00',\n        chocolate: '#d2691e',\n        coral: '#ff7f50',\n        cornflowerblue: '#6495ed',\n        cornsilk: '#fff8dc',\n        crimson: '#dc143c',\n        cyan: '#00ffff',\n        darkblue: '#00008b',\n        darkcyan: '#008b8b',\n        darkgoldenrod: '#b8860b',\n        darkgray: '#a9a9a9',\n        darkgreen: '#006400',\n        darkgrey: '#a9a9a9',\n        darkkhaki: '#bdb76b',\n        darkmagenta: '#8b008b',\n        darkolivegreen: '#556b2f',\n        darkorange: '#ff8c00',\n        darkorchid: '#9932cc',\n        darkred: '#8b0000',\n        darksalmon: '#e9967a',\n        darkseagreen: '#8fbc8f',\n        darkslateblue: '#483d8b',\n        darkslategray: '#2f4f4f',\n        darkslategrey: '#2f4f4f',\n        darkturquoise: '#00ced1',\n        darkviolet: '#9400d3',\n        deeppink: '#ff1493',\n        deepskyblue: '#00bfff',\n        dimgray: '#696969',\n        dimgrey: '#696969',\n        dodgerblue: '#1e90ff',\n        firebrick: '#b22222',\n        floralwhite: '#fffaf0',\n        forestgreen: '#228b22',\n        fuchsia: '#ff00ff',\n        gainsboro: '#dcdcdc',\n        ghostwhite: '#f8f8ff',\n        gold: '#ffd700',\n        goldenrod: '#daa520',\n        gray: '#808080',\n        green: '#008000',\n        greenyellow: '#adff2f',\n        grey: '#808080',\n        honeydew: '#f0fff0',\n        hotpink: '#ff69b4',\n        indianred: '#cd5c5c',\n        indigo: '#4b0082',\n        ivory: '#fffff0',\n        khaki: '#f0e68c',\n        lavender: '#e6e6fa',\n        lavenderblush: '#fff0f5',\n        lawngreen: '#7cfc00',\n        lemonchiffon: '#fffacd',\n        lightblue: '#add8e6',\n        lightcoral: '#f08080',\n        lightcyan: '#e0ffff',\n        lightgoldenrodyellow: '#fafad2',\n        lightgray: '#d3d3d3',\n        lightgreen: '#90ee90',\n        lightgrey: '#d3d3d3',\n        lightpink: '#ffb6c1',\n        lightsalmon: '#ffa07a',\n        lightseagreen: '#20b2aa',\n        lightskyblue: '#87cefa',\n        lightslategray: '#778899',\n        lightslategrey: '#778899',\n        lightsteelblue: '#b0c4de',\n        lightyellow: '#ffffe0',\n        lime: '#00ff00',\n        limegreen: '#32cd32',\n        linen: '#faf0e6',\n        magenta: '#ff00ff',\n        maroon: '#800000',\n        mediumaquamarine: '#66cdaa',\n        mediumblue: '#0000cd',\n        mediumorchid: '#ba55d3',\n        mediumpurple: '#9370db',\n        mediumseagreen: '#3cb371',\n        mediumslateblue: '#7b68ee',\n        mediumspringgreen: '#00fa9a',\n        mediumturquoise: '#48d1cc',\n        mediumvioletred: '#c71585',\n        midnightblue: '#191970',\n        mintcream: '#f5fffa',\n        mistyrose: '#ffe4e1',\n        moccasin: '#ffe4b5',\n        navajowhite: '#ffdead',\n        navy: '#000080',\n        oldlace: '#fdf5e6',\n        olive: '#808000',\n        olivedrab: '#6b8e23',\n        orange: '#ffa500',\n        orangered: '#ff4500',\n        orchid: '#da70d6',\n        palegoldenrod: '#eee8aa',\n        palegreen: '#98fb98',\n        paleturquoise: '#afeeee',\n        palevioletred: '#db7093',\n        papayawhip: '#ffefd5',\n        peachpuff: '#ffdab9',\n        peru: '#cd853f',\n        pink: '#ffc0cb',\n        plum: '#dda0dd',\n        powderblue: '#b0e0e6',\n        purple: '#800080',\n        rebeccapurple: '#663399',\n        red: '#ff0000',\n        rosybrown: '#bc8f8f',\n        royalblue: '#4169e1',\n        saddlebrown: '#8b4513',\n        salmon: '#fa8072',\n        sandybrown: '#f4a460',\n        seagreen: '#2e8b57',\n        seashell: '#fff5ee',\n        sienna: '#a0522d',\n        silver: '#c0c0c0',\n        skyblue: '#87ceeb',\n        slateblue: '#6a5acd',\n        slategray: '#708090',\n        slategrey: '#708090',\n        snow: '#fffafa',\n        springgreen: '#00ff7f',\n        steelblue: '#4682b4',\n        tan: '#d2b48c',\n        teal: '#008080',\n        thistle: '#d8bfd8',\n        tomato: '#ff6347',\n        turquoise: '#40e0d0',\n        violet: '#ee82ee',\n        wheat: '#f5deb3',\n        white: '#ffffff',\n        whitesmoke: '#f5f5f5',\n        yellow: '#ffff00',\n        yellowgreen: '#9acd32',\n    };\n})(Color || (Color = {}));\n//# sourceMappingURL=index.js.map","export class Dictionary {\n    constructor() {\n        this.clear();\n    }\n    clear() {\n        this.map = new WeakMap();\n        this.arr = [];\n    }\n    has(key) {\n        return this.map.has(key);\n    }\n    get(key) {\n        return this.map.get(key);\n    }\n    set(key, value) {\n        this.map.set(key, value);\n        this.arr.push(key);\n    }\n    delete(key) {\n        const index = this.arr.indexOf(key);\n        if (index >= 0) {\n            this.arr.splice(index, 1);\n        }\n        const ret = this.map.get(key);\n        this.map.delete(key);\n        return ret;\n    }\n    each(iterator) {\n        this.arr.forEach((key) => {\n            const value = this.map.get(key);\n            iterator(value, key);\n        });\n    }\n    dispose() {\n        this.clear();\n    }\n}\n//# sourceMappingURL=dictionary.js.map","import { Platform } from '../platform';\nconst cssModules = [];\nexport function ensure(name, content) {\n    const cssModule = cssModules.find((m) => m.name === name);\n    if (cssModule) {\n        cssModule.loadTimes += 1;\n        if (cssModule.loadTimes > 1) {\n            return;\n        }\n    }\n    if (!Platform.isApplyingHMR()) {\n        const styleElement = document.createElement('style');\n        styleElement.setAttribute('type', 'text/css');\n        styleElement.textContent = content;\n        const head = document.querySelector('head');\n        if (head) {\n            head.insertBefore(styleElement, head.firstChild);\n        }\n        cssModules.push({\n            name,\n            loadTimes: 1,\n            styleElement,\n        });\n    }\n}\nexport function clean(name) {\n    const index = cssModules.findIndex((m) => m.name === name);\n    if (index > -1) {\n        const cssModule = cssModules[index];\n        cssModule.loadTimes -= 1;\n        if (cssModule.loadTimes > 0) {\n            return;\n        }\n        let styleElement = cssModule.styleElement;\n        if (styleElement && styleElement.parentNode) {\n            styleElement.parentNode.removeChild(styleElement);\n        }\n        styleElement = null;\n        cssModules.splice(index, 1);\n    }\n}\n//# sourceMappingURL=loader.js.map","export var Angle;\n(function (Angle) {\n    /**\n     * Converts radian angle to degree angle.\n     * @param rad The radians to convert.\n     */\n    function toDeg(rad) {\n        return ((180 * rad) / Math.PI) % 360;\n    }\n    Angle.toDeg = toDeg;\n    /**\n     * Converts degree angle to radian angle.\n     * @param deg The degree angle to convert.\n     * @param over360\n     */\n    Angle.toRad = function (deg, over360 = false) {\n        const d = over360 ? deg : deg % 360;\n        return (d * Math.PI) / 180;\n    };\n    /**\n     * Returns the angle in degrees and clamps its value between `0` and `360`.\n     */\n    function normalize(angle) {\n        return (angle % 360) + (angle < 0 ? 360 : 0);\n    }\n    Angle.normalize = normalize;\n})(Angle || (Angle = {}));\n//# sourceMappingURL=angle.js.map","export var GeometryUtil;\n(function (GeometryUtil) {\n    function round(num, precision = 0) {\n        return Number.isInteger(num) ? num : +num.toFixed(precision);\n    }\n    GeometryUtil.round = round;\n    function random(min, max) {\n        let mmin;\n        let mmax;\n        if (max == null) {\n            mmax = min == null ? 1 : min;\n            mmin = 0;\n        }\n        else {\n            mmax = max;\n            mmin = min == null ? 0 : min;\n        }\n        if (mmax < mmin) {\n            const temp = mmin;\n            mmin = mmax;\n            mmax = temp;\n        }\n        return Math.floor(Math.random() * (mmax - mmin + 1) + mmin);\n    }\n    GeometryUtil.random = random;\n    function clamp(value, min, max) {\n        if (Number.isNaN(value)) {\n            return NaN;\n        }\n        if (Number.isNaN(min) || Number.isNaN(max)) {\n            return 0;\n        }\n        return min < max\n            ? value < min\n                ? min\n                : value > max\n                    ? max\n                    : value\n            : value < max\n                ? max\n                : value > min\n                    ? min\n                    : value;\n    }\n    GeometryUtil.clamp = clamp;\n    function snapToGrid(value, gridSize) {\n        return gridSize * Math.round(value / gridSize);\n    }\n    GeometryUtil.snapToGrid = snapToGrid;\n    function containsPoint(rect, point) {\n        return (point != null &&\n            rect != null &&\n            point.x >= rect.x &&\n            point.x <= rect.x + rect.width &&\n            point.y >= rect.y &&\n            point.y <= rect.y + rect.height);\n    }\n    GeometryUtil.containsPoint = containsPoint;\n    function squaredLength(p1, p2) {\n        const dx = p1.x - p2.x;\n        const dy = p1.y - p2.y;\n        return dx * dx + dy * dy;\n    }\n    GeometryUtil.squaredLength = squaredLength;\n})(GeometryUtil || (GeometryUtil = {}));\n//# sourceMappingURL=util.js.map","export class Geometry {\n    valueOf() {\n        return this.toJSON();\n    }\n    toString() {\n        return JSON.stringify(this.toJSON());\n    }\n}\n//# sourceMappingURL=geometry.js.map","import { GeometryUtil } from './util';\nimport { Angle } from './angle';\nimport { Geometry } from './geometry';\nexport class Point extends Geometry {\n    constructor(x, y) {\n        super();\n        this.x = x == null ? 0 : x;\n        this.y = y == null ? 0 : y;\n    }\n    /**\n     * Rounds the point to the given precision.\n     */\n    round(precision = 0) {\n        this.x = GeometryUtil.round(this.x, precision);\n        this.y = GeometryUtil.round(this.y, precision);\n        return this;\n    }\n    add(x, y) {\n        const p = Point.create(x, y);\n        this.x += p.x;\n        this.y += p.y;\n        return this;\n    }\n    update(x, y) {\n        const p = Point.create(x, y);\n        this.x = p.x;\n        this.y = p.y;\n        return this;\n    }\n    translate(dx, dy) {\n        const t = Point.create(dx, dy);\n        this.x += t.x;\n        this.y += t.y;\n        return this;\n    }\n    /**\n     * Rotate the point by `degree` around `center`.\n     */\n    rotate(degree, center) {\n        const p = Point.rotate(this, degree, center);\n        this.x = p.x;\n        this.y = p.y;\n        return this;\n    }\n    /**\n     * Scale point by `sx` and `sy` around the given `origin`. If origin is\n     * not specified, the point is scaled around `0, 0`.\n     */\n    scale(sx, sy, origin = new Point()) {\n        const ref = Point.create(origin);\n        this.x = ref.x + sx * (this.x - ref.x);\n        this.y = ref.y + sy * (this.y - ref.y);\n        return this;\n    }\n    /**\n     * Chooses the point closest to this point from among `points`. If `points`\n     * is an empty array, `null` is returned.\n     */\n    closest(points) {\n        if (points.length === 1) {\n            return Point.create(points[0]);\n        }\n        let ret = null;\n        let min = Infinity;\n        points.forEach((p) => {\n            const dist = this.squaredDistance(p);\n            if (dist < min) {\n                ret = p;\n                min = dist;\n            }\n        });\n        return ret ? Point.create(ret) : null;\n    }\n    /**\n     * Returns the distance between the point and another point `p`.\n     */\n    distance(p) {\n        return Math.sqrt(this.squaredDistance(p));\n    }\n    /**\n     * Returns the squared distance between the point and another point `p`.\n     *\n     * Useful for distance comparisons in which real distance is not necessary\n     * (saves one `Math.sqrt()` operation).\n     */\n    squaredDistance(p) {\n        const ref = Point.create(p);\n        const dx = this.x - ref.x;\n        const dy = this.y - ref.y;\n        return dx * dx + dy * dy;\n    }\n    manhattanDistance(p) {\n        const ref = Point.create(p);\n        return Math.abs(ref.x - this.x) + Math.abs(ref.y - this.y);\n    }\n    /**\n     * Returns the magnitude of the point vector.\n     *\n     * @see http://en.wikipedia.org/wiki/Magnitude_(mathematics)\n     */\n    magnitude() {\n        return Math.sqrt(this.x * this.x + this.y * this.y) || 0.01;\n    }\n    /**\n     * Returns the angle(in degrees) between vector from this point to `p` and\n     * the x-axis.\n     */\n    theta(p = new Point()) {\n        const ref = Point.create(p);\n        const y = -(ref.y - this.y); // invert the y-axis.\n        const x = ref.x - this.x;\n        let rad = Math.atan2(y, x);\n        // Correction for III. and IV. quadrant.\n        if (rad < 0) {\n            rad = 2 * Math.PI + rad;\n        }\n        return (180 * rad) / Math.PI;\n    }\n    /**\n     * Returns the angle(in degrees) between vector from this point to `p1` and\n     * the vector from this point to `p2`.\n     *\n     * The ordering of points `p1` and `p2` is important.\n     *\n     * The function returns a value between `0` and `180` when the angle (in the\n     * direction from `p1` to `p2`) is clockwise, and a value between `180` and\n     * `360` when the angle is counterclockwise.\n     *\n     * Returns `NaN` if either of the points `p1` and `p2` is equal with this point.\n     */\n    angleBetween(p1, p2) {\n        if (this.equals(p1) || this.equals(p2)) {\n            return NaN;\n        }\n        let angle = this.theta(p2) - this.theta(p1);\n        if (angle < 0) {\n            angle += 360;\n        }\n        return angle;\n    }\n    /**\n     * Returns the angle(in degrees) between the line from `(0,0)` and this point\n     * and the line from `(0,0)` to `p`.\n     *\n     * The function returns a value between `0` and `180` when the angle (in the\n     * direction from this point to `p`) is clockwise, and a value between `180`\n     * and `360` when the angle is counterclockwise. Returns `NaN` if called from\n     * point `(0,0)` or if `p` is `(0,0)`.\n     */\n    vectorAngle(p) {\n        const zero = new Point(0, 0);\n        return zero.angleBetween(this, p);\n    }\n    /**\n     * Converts rectangular to polar coordinates.\n     */\n    toPolar(origin) {\n        this.update(Point.toPolar(this, origin));\n        return this;\n    }\n    /**\n     * Returns the change in angle(in degrees) that is the result of moving the\n     * point from its previous position to its current position.\n     *\n     * More specifically, this function computes the angle between the line from\n     * the ref point to the previous position of this point(i.e. current position\n     * `-dx`, `-dy`) and the line from the `ref` point to the current position of\n     * this point.\n     *\n     * The function returns a positive value between `0` and `180` when the angle\n     * (in the direction from previous position of this point to its current\n     * position) is clockwise, and a negative value between `0` and `-180` when\n     * the angle is counterclockwise.\n     *\n     * The function returns `0` if the previous and current positions of this\n     * point are the same (i.e. both `dx` and `dy` are `0`).\n     */\n    changeInAngle(dx, dy, ref = new Point()) {\n        // Revert the translation and measure the change in angle around x-axis.\n        return this.clone().translate(-dx, -dy).theta(ref) - this.theta(ref);\n    }\n    /**\n     * If the point lies outside the rectangle `rect`, adjust the point so that\n     * it becomes the nearest point on the boundary of `rect`.\n     */\n    adhereToRect(rect) {\n        if (!GeometryUtil.containsPoint(rect, this)) {\n            this.x = Math.min(Math.max(this.x, rect.x), rect.x + rect.width);\n            this.y = Math.min(Math.max(this.y, rect.y), rect.y + rect.height);\n        }\n        return this;\n    }\n    /**\n     * Returns the bearing(cardinal direction) between me and the given point.\n     *\n     * @see https://en.wikipedia.org/wiki/Cardinal_direction\n     */\n    bearing(p) {\n        const ref = Point.create(p);\n        const lat1 = Angle.toRad(this.y);\n        const lat2 = Angle.toRad(ref.y);\n        const lon1 = this.x;\n        const lon2 = ref.x;\n        const dLon = Angle.toRad(lon2 - lon1);\n        const y = Math.sin(dLon) * Math.cos(lat2);\n        const x = Math.cos(lat1) * Math.sin(lat2) -\n            Math.sin(lat1) * Math.cos(lat2) * Math.cos(dLon);\n        const brng = Angle.toDeg(Math.atan2(y, x));\n        const bearings = ['NE', 'E', 'SE', 'S', 'SW', 'W', 'NW', 'N'];\n        let index = brng - 22.5;\n        if (index < 0) {\n            index += 360;\n        }\n        index = parseInt((index / 45), 10);\n        return bearings[index];\n    }\n    /**\n     * Returns the cross product of the vector from me to `p1` and the vector\n     * from me to `p2`.\n     *\n     * The left-hand rule is used because the coordinate system is left-handed.\n     */\n    cross(p1, p2) {\n        if (p1 != null && p2 != null) {\n            const a = Point.create(p1);\n            const b = Point.create(p2);\n            return (b.x - this.x) * (a.y - this.y) - (b.y - this.y) * (a.x - this.x);\n        }\n        return NaN;\n    }\n    /**\n     * Returns the dot product of this point with given other point.\n     */\n    dot(p) {\n        const ref = Point.create(p);\n        return this.x * ref.x + this.y * ref.y;\n    }\n    diff(dx, dy) {\n        if (typeof dx === 'number') {\n            return new Point(this.x - dx, this.y - dy);\n        }\n        const p = Point.create(dx);\n        return new Point(this.x - p.x, this.y - p.y);\n    }\n    /**\n     * Returns an interpolation between me and point `p` for a parametert in\n     * the closed interval `[0, 1]`.\n     */\n    lerp(p, t) {\n        const ref = Point.create(p);\n        return new Point((1 - t) * this.x + t * ref.x, (1 - t) * this.y + t * ref.y);\n    }\n    /**\n     * Normalize the point vector, scale the line segment between `(0, 0)`\n     * and the point in order for it to have the given length. If length is\n     * not specified, it is considered to be `1`; in that case, a unit vector\n     * is computed.\n     */\n    normalize(length = 1) {\n        const scale = length / this.magnitude();\n        return this.scale(scale, scale);\n    }\n    /**\n     * Moves this point along the line starting from `ref` to this point by a\n     * certain `distance`.\n     */\n    move(ref, distance) {\n        const p = Point.create(ref);\n        const rad = Angle.toRad(p.theta(this));\n        return this.translate(Math.cos(rad) * distance, -Math.sin(rad) * distance);\n    }\n    /**\n     * Returns a point that is the reflection of me with the center of inversion\n     * in `ref` point.\n     */\n    reflection(ref) {\n        return Point.create(ref).move(this, this.distance(ref));\n    }\n    snapToGrid(gx, gy) {\n        this.x = GeometryUtil.snapToGrid(this.x, gx);\n        this.y = GeometryUtil.snapToGrid(this.y, gy == null ? gx : gy);\n        return this;\n    }\n    equals(p) {\n        const ref = Point.create(p);\n        return ref != null && ref.x === this.x && ref.y === this.y;\n    }\n    clone() {\n        return Point.clone(this);\n    }\n    /**\n     * Returns the point as a simple JSON object. For example: `{ x: 0, y: 0 }`.\n     */\n    toJSON() {\n        return Point.toJSON(this);\n    }\n    serialize() {\n        return `${this.x} ${this.y}`;\n    }\n}\n(function (Point) {\n    function isPoint(instance) {\n        return instance != null && instance instanceof Point;\n    }\n    Point.isPoint = isPoint;\n})(Point || (Point = {}));\n(function (Point) {\n    function isPointLike(p) {\n        return (p != null &&\n            typeof p === 'object' &&\n            typeof p.x === 'number' &&\n            typeof p.y === 'number');\n    }\n    Point.isPointLike = isPointLike;\n    function isPointData(p) {\n        return (p != null &&\n            Array.isArray(p) &&\n            p.length === 2 &&\n            typeof p[0] === 'number' &&\n            typeof p[1] === 'number');\n    }\n    Point.isPointData = isPointData;\n})(Point || (Point = {}));\n(function (Point) {\n    function create(x, y) {\n        if (x == null || typeof x === 'number') {\n            return new Point(x, y);\n        }\n        return clone(x);\n    }\n    Point.create = create;\n    function clone(p) {\n        if (Point.isPoint(p)) {\n            return new Point(p.x, p.y);\n        }\n        if (Array.isArray(p)) {\n            return new Point(p[0], p[1]);\n        }\n        return new Point(p.x, p.y);\n    }\n    Point.clone = clone;\n    function toJSON(p) {\n        if (Point.isPoint(p)) {\n            return { x: p.x, y: p.y };\n        }\n        if (Array.isArray(p)) {\n            return { x: p[0], y: p[1] };\n        }\n        return { x: p.x, y: p.y };\n    }\n    Point.toJSON = toJSON;\n    /**\n     * Returns a new Point object from the given polar coordinates.\n     * @see http://en.wikipedia.org/wiki/Polar_coordinate_system\n     */\n    function fromPolar(r, rad, origin = new Point()) {\n        let x = Math.abs(r * Math.cos(rad));\n        let y = Math.abs(r * Math.sin(rad));\n        const org = clone(origin);\n        const deg = Angle.normalize(Angle.toDeg(rad));\n        if (deg < 90) {\n            y = -y;\n        }\n        else if (deg < 180) {\n            x = -x;\n            y = -y;\n        }\n        else if (deg < 270) {\n            x = -x;\n        }\n        return new Point(org.x + x, org.y + y);\n    }\n    Point.fromPolar = fromPolar;\n    /**\n     * Converts rectangular to polar coordinates.\n     */\n    function toPolar(point, origin = new Point()) {\n        const p = clone(point);\n        const o = clone(origin);\n        const dx = p.x - o.x;\n        const dy = p.y - o.y;\n        return new Point(Math.sqrt(dx * dx + dy * dy), // r\n        Angle.toRad(o.theta(p)));\n    }\n    Point.toPolar = toPolar;\n    function equals(p1, p2) {\n        if (p1 === p2) {\n            return true;\n        }\n        if (p1 != null && p2 != null) {\n            return p1.x === p2.x && p1.y === p2.y;\n        }\n        return false;\n    }\n    Point.equals = equals;\n    function equalPoints(p1, p2) {\n        if ((p1 == null && p2 != null) ||\n            (p1 != null && p2 == null) ||\n            (p1 != null && p2 != null && p1.length !== p2.length)) {\n            return false;\n        }\n        if (p1 != null && p2 != null) {\n            for (let i = 0, ii = p1.length; i < ii; i += 1) {\n                if (!equals(p1[i], p2[i])) {\n                    return false;\n                }\n            }\n        }\n        return true;\n    }\n    Point.equalPoints = equalPoints;\n    /**\n     * Returns a point with random coordinates that fall within the range\n     * `[x1, x2]` and `[y1, y2]`.\n     */\n    function random(x1, x2, y1, y2) {\n        return new Point(GeometryUtil.random(x1, x2), GeometryUtil.random(y1, y2));\n    }\n    Point.random = random;\n    function rotate(point, angle, center) {\n        const rad = Angle.toRad(Angle.normalize(-angle));\n        const sin = Math.sin(rad);\n        const cos = Math.cos(rad);\n        return rotateEx(point, cos, sin, center);\n    }\n    Point.rotate = rotate;\n    function rotateEx(point, cos, sin, center = new Point()) {\n        const source = clone(point);\n        const origin = clone(center);\n        const dx = source.x - origin.x;\n        const dy = source.y - origin.y;\n        const x1 = dx * cos - dy * sin;\n        const y1 = dy * cos + dx * sin;\n        return new Point(x1 + origin.x, y1 + origin.y);\n    }\n    Point.rotateEx = rotateEx;\n})(Point || (Point = {}));\n//# sourceMappingURL=point.js.map","import { GeometryUtil } from './util';\nimport { Angle } from './angle';\nimport { Line } from './line';\nimport { Point } from './point';\nimport { Geometry } from './geometry';\nexport class Rectangle extends Geometry {\n    get left() {\n        return this.x;\n    }\n    get top() {\n        return this.y;\n    }\n    get right() {\n        return this.x + this.width;\n    }\n    get bottom() {\n        return this.y + this.height;\n    }\n    get origin() {\n        return new Point(this.x, this.y);\n    }\n    get topLeft() {\n        return new Point(this.x, this.y);\n    }\n    get topCenter() {\n        return new Point(this.x + this.width / 2, this.y);\n    }\n    get topRight() {\n        return new Point(this.x + this.width, this.y);\n    }\n    get center() {\n        return new Point(this.x + this.width / 2, this.y + this.height / 2);\n    }\n    get bottomLeft() {\n        return new Point(this.x, this.y + this.height);\n    }\n    get bottomCenter() {\n        return new Point(this.x + this.width / 2, this.y + this.height);\n    }\n    get bottomRight() {\n        return new Point(this.x + this.width, this.y + this.height);\n    }\n    get corner() {\n        return new Point(this.x + this.width, this.y + this.height);\n    }\n    get rightMiddle() {\n        return new Point(this.x + this.width, this.y + this.height / 2);\n    }\n    get leftMiddle() {\n        return new Point(this.x, this.y + this.height / 2);\n    }\n    get topLine() {\n        return new Line(this.topLeft, this.topRight);\n    }\n    get rightLine() {\n        return new Line(this.topRight, this.bottomRight);\n    }\n    get bottomLine() {\n        return new Line(this.bottomLeft, this.bottomRight);\n    }\n    get leftLine() {\n        return new Line(this.topLeft, this.bottomLeft);\n    }\n    constructor(x, y, width, height) {\n        super();\n        this.x = x == null ? 0 : x;\n        this.y = y == null ? 0 : y;\n        this.width = width == null ? 0 : width;\n        this.height = height == null ? 0 : height;\n    }\n    getOrigin() {\n        return this.origin;\n    }\n    getTopLeft() {\n        return this.topLeft;\n    }\n    getTopCenter() {\n        return this.topCenter;\n    }\n    getTopRight() {\n        return this.topRight;\n    }\n    getCenter() {\n        return this.center;\n    }\n    getCenterX() {\n        return this.x + this.width / 2;\n    }\n    getCenterY() {\n        return this.y + this.height / 2;\n    }\n    getBottomLeft() {\n        return this.bottomLeft;\n    }\n    getBottomCenter() {\n        return this.bottomCenter;\n    }\n    getBottomRight() {\n        return this.bottomRight;\n    }\n    getCorner() {\n        return this.corner;\n    }\n    getRightMiddle() {\n        return this.rightMiddle;\n    }\n    getLeftMiddle() {\n        return this.leftMiddle;\n    }\n    getTopLine() {\n        return this.topLine;\n    }\n    getRightLine() {\n        return this.rightLine;\n    }\n    getBottomLine() {\n        return this.bottomLine;\n    }\n    getLeftLine() {\n        return this.leftLine;\n    }\n    /**\n     * Returns a rectangle that is the bounding box of the rectangle.\n     *\n     * If `angle` is specified, the bounding box calculation will take into\n     * account the rotation of the rectangle by angle degrees around its center.\n     */\n    bbox(angle) {\n        if (!angle) {\n            return this.clone();\n        }\n        const rad = Angle.toRad(angle);\n        const st = Math.abs(Math.sin(rad));\n        const ct = Math.abs(Math.cos(rad));\n        const w = this.width * ct + this.height * st;\n        const h = this.width * st + this.height * ct;\n        return new Rectangle(this.x + (this.width - w) / 2, this.y + (this.height - h) / 2, w, h);\n    }\n    round(precision = 0) {\n        this.x = GeometryUtil.round(this.x, precision);\n        this.y = GeometryUtil.round(this.y, precision);\n        this.width = GeometryUtil.round(this.width, precision);\n        this.height = GeometryUtil.round(this.height, precision);\n        return this;\n    }\n    add(x, y, width, height) {\n        const rect = Rectangle.create(x, y, width, height);\n        const minX = Math.min(this.x, rect.x);\n        const minY = Math.min(this.y, rect.y);\n        const maxX = Math.max(this.x + this.width, rect.x + rect.width);\n        const maxY = Math.max(this.y + this.height, rect.y + rect.height);\n        this.x = minX;\n        this.y = minY;\n        this.width = maxX - minX;\n        this.height = maxY - minY;\n        return this;\n    }\n    update(x, y, width, height) {\n        const rect = Rectangle.create(x, y, width, height);\n        this.x = rect.x;\n        this.y = rect.y;\n        this.width = rect.width;\n        this.height = rect.height;\n        return this;\n    }\n    inflate(dx, dy) {\n        const w = dx;\n        const h = dy != null ? dy : dx;\n        this.x -= w;\n        this.y -= h;\n        this.width += 2 * w;\n        this.height += 2 * h;\n        return this;\n    }\n    snapToGrid(gx, gy) {\n        const origin = this.origin.snapToGrid(gx, gy);\n        const corner = this.corner.snapToGrid(gx, gy);\n        this.x = origin.x;\n        this.y = origin.y;\n        this.width = corner.x - origin.x;\n        this.height = corner.y - origin.y;\n        return this;\n    }\n    translate(tx, ty) {\n        const p = Point.create(tx, ty);\n        this.x += p.x;\n        this.y += p.y;\n        return this;\n    }\n    scale(sx, sy, origin = new Point()) {\n        const pos = this.origin.scale(sx, sy, origin);\n        this.x = pos.x;\n        this.y = pos.y;\n        this.width *= sx;\n        this.height *= sy;\n        return this;\n    }\n    rotate(degree, center = this.getCenter()) {\n        if (degree !== 0) {\n            const rad = Angle.toRad(degree);\n            const cos = Math.cos(rad);\n            const sin = Math.sin(rad);\n            let p1 = this.getOrigin();\n            let p2 = this.getTopRight();\n            let p3 = this.getBottomRight();\n            let p4 = this.getBottomLeft();\n            p1 = Point.rotateEx(p1, cos, sin, center);\n            p2 = Point.rotateEx(p2, cos, sin, center);\n            p3 = Point.rotateEx(p3, cos, sin, center);\n            p4 = Point.rotateEx(p4, cos, sin, center);\n            const rect = new Rectangle(p1.x, p1.y, 0, 0);\n            rect.add(p2.x, p2.y, 0, 0);\n            rect.add(p3.x, p3.y, 0, 0);\n            rect.add(p4.x, p4.y, 0, 0);\n            this.update(rect);\n        }\n        return this;\n    }\n    rotate90() {\n        const t = (this.width - this.height) / 2;\n        this.x += t;\n        this.y -= t;\n        const tmp = this.width;\n        this.width = this.height;\n        this.height = tmp;\n        return this;\n    }\n    /**\n     * Translates the rectangle by `rect.x` and `rect.y` and expand it by\n     * `rect.width` and `rect.height`.\n     */\n    moveAndExpand(rect) {\n        const ref = Rectangle.clone(rect);\n        this.x += ref.x || 0;\n        this.y += ref.y || 0;\n        this.width += ref.width || 0;\n        this.height += ref.height || 0;\n        return this;\n    }\n    /**\n     * Returns an object where `sx` and `sy` give the maximum scaling that can be\n     * applied to the rectangle so that it would still fit into `limit`. If\n     * `origin` is specified, the rectangle is scaled around it; otherwise, it is\n     * scaled around its center.\n     */\n    getMaxScaleToFit(limit, origin = this.center) {\n        const rect = Rectangle.clone(limit);\n        const ox = origin.x;\n        const oy = origin.y;\n        // Find the maximal possible scale for all corners, so when the scale\n        // is applied the point is still inside the rectangle.\n        let sx1 = Infinity;\n        let sx2 = Infinity;\n        let sx3 = Infinity;\n        let sx4 = Infinity;\n        let sy1 = Infinity;\n        let sy2 = Infinity;\n        let sy3 = Infinity;\n        let sy4 = Infinity;\n        // Top Left\n        const p1 = rect.topLeft;\n        if (p1.x < ox) {\n            sx1 = (this.x - ox) / (p1.x - ox);\n        }\n        if (p1.y < oy) {\n            sy1 = (this.y - oy) / (p1.y - oy);\n        }\n        // Bottom Right\n        const p2 = rect.bottomRight;\n        if (p2.x > ox) {\n            sx2 = (this.x + this.width - ox) / (p2.x - ox);\n        }\n        if (p2.y > oy) {\n            sy2 = (this.y + this.height - oy) / (p2.y - oy);\n        }\n        // Top Right\n        const p3 = rect.topRight;\n        if (p3.x > ox) {\n            sx3 = (this.x + this.width - ox) / (p3.x - ox);\n        }\n        if (p3.y < oy) {\n            sy3 = (this.y - oy) / (p3.y - oy);\n        }\n        // Bottom Left\n        const p4 = rect.bottomLeft;\n        if (p4.x < ox) {\n            sx4 = (this.x - ox) / (p4.x - ox);\n        }\n        if (p4.y > oy) {\n            sy4 = (this.y + this.height - oy) / (p4.y - oy);\n        }\n        return {\n            sx: Math.min(sx1, sx2, sx3, sx4),\n            sy: Math.min(sy1, sy2, sy3, sy4),\n        };\n    }\n    /**\n     * Returns a number that specifies the maximum scaling that can be applied to\n     * the rectangle along both axes so that it would still fit into `limit`. If\n     * `origin` is specified, the rectangle is scaled around it; otherwise, it is\n     * scaled around its center.\n     */\n    getMaxUniformScaleToFit(limit, origin = this.center) {\n        const scale = this.getMaxScaleToFit(limit, origin);\n        return Math.min(scale.sx, scale.sy);\n    }\n    containsPoint(x, y) {\n        return GeometryUtil.containsPoint(this, Point.create(x, y));\n    }\n    containsRect(x, y, width, height) {\n        const b = Rectangle.create(x, y, width, height);\n        const x1 = this.x;\n        const y1 = this.y;\n        const w1 = this.width;\n        const h1 = this.height;\n        const x2 = b.x;\n        const y2 = b.y;\n        const w2 = b.width;\n        const h2 = b.height;\n        // one of the dimensions is 0\n        if (w1 === 0 || h1 === 0 || w2 === 0 || h2 === 0) {\n            return false;\n        }\n        return x2 >= x1 && y2 >= y1 && x2 + w2 <= x1 + w1 && y2 + h2 <= y1 + h1;\n    }\n    /**\n     * Returns an array of the intersection points of the rectangle and the line.\n     * Return `null` if no intersection exists.\n     */\n    intersectsWithLine(line) {\n        const rectLines = [\n            this.topLine,\n            this.rightLine,\n            this.bottomLine,\n            this.leftLine,\n        ];\n        const points = [];\n        const dedupeArr = [];\n        rectLines.forEach((l) => {\n            const p = line.intersectsWithLine(l);\n            if (p !== null && dedupeArr.indexOf(p.toString()) < 0) {\n                points.push(p);\n                dedupeArr.push(p.toString());\n            }\n        });\n        return points.length > 0 ? points : null;\n    }\n    /**\n     * Returns the point on the boundary of the rectangle that is the intersection\n     * of the rectangle with a line starting in the center the rectangle ending in\n     * the point `p`.\n     *\n     * If `angle` is specified, the intersection will take into account the\n     * rotation of the rectangle by `angle` degrees around its center.\n     */\n    intersectsWithLineFromCenterToPoint(p, angle) {\n        const ref = Point.clone(p);\n        const center = this.center;\n        let result = null;\n        if (angle != null && angle !== 0) {\n            ref.rotate(angle, center);\n        }\n        const sides = [this.topLine, this.rightLine, this.bottomLine, this.leftLine];\n        const connector = new Line(center, ref);\n        for (let i = sides.length - 1; i >= 0; i -= 1) {\n            const intersection = sides[i].intersectsWithLine(connector);\n            if (intersection !== null) {\n                result = intersection;\n                break;\n            }\n        }\n        if (result && angle != null && angle !== 0) {\n            result.rotate(-angle, center);\n        }\n        return result;\n    }\n    intersectsWithRect(x, y, width, height) {\n        const ref = Rectangle.create(x, y, width, height);\n        // no intersection\n        if (!this.isIntersectWithRect(ref)) {\n            return null;\n        }\n        const myOrigin = this.origin;\n        const myCorner = this.corner;\n        const rOrigin = ref.origin;\n        const rCorner = ref.corner;\n        const xx = Math.max(myOrigin.x, rOrigin.x);\n        const yy = Math.max(myOrigin.y, rOrigin.y);\n        return new Rectangle(xx, yy, Math.min(myCorner.x, rCorner.x) - xx, Math.min(myCorner.y, rCorner.y) - yy);\n    }\n    isIntersectWithRect(x, y, width, height) {\n        const ref = Rectangle.create(x, y, width, height);\n        const myOrigin = this.origin;\n        const myCorner = this.corner;\n        const rOrigin = ref.origin;\n        const rCorner = ref.corner;\n        if (rCorner.x <= myOrigin.x ||\n            rCorner.y <= myOrigin.y ||\n            rOrigin.x >= myCorner.x ||\n            rOrigin.y >= myCorner.y) {\n            return false;\n        }\n        return true;\n    }\n    /**\n     * Normalize the rectangle, i.e. make it so that it has non-negative\n     * width and height. If width is less than `0`, the function swaps left and\n     * right corners and if height is less than `0`, the top and bottom corners\n     * are swapped.\n     */\n    normalize() {\n        let newx = this.x;\n        let newy = this.y;\n        let newwidth = this.width;\n        let newheight = this.height;\n        if (this.width < 0) {\n            newx = this.x + this.width;\n            newwidth = -this.width;\n        }\n        if (this.height < 0) {\n            newy = this.y + this.height;\n            newheight = -this.height;\n        }\n        this.x = newx;\n        this.y = newy;\n        this.width = newwidth;\n        this.height = newheight;\n        return this;\n    }\n    /**\n     * Returns a rectangle that is a union of this rectangle and rectangle `rect`.\n     */\n    union(rect) {\n        const ref = Rectangle.clone(rect);\n        const myOrigin = this.origin;\n        const myCorner = this.corner;\n        const rOrigin = ref.origin;\n        const rCorner = ref.corner;\n        const originX = Math.min(myOrigin.x, rOrigin.x);\n        const originY = Math.min(myOrigin.y, rOrigin.y);\n        const cornerX = Math.max(myCorner.x, rCorner.x);\n        const cornerY = Math.max(myCorner.y, rCorner.y);\n        return new Rectangle(originX, originY, cornerX - originX, cornerY - originY);\n    }\n    /**\n     * Returns a string (\"top\", \"left\", \"right\" or \"bottom\") denoting the side of\n     * the rectangle which is nearest to the point `p`.\n     */\n    getNearestSideToPoint(p) {\n        const ref = Point.clone(p);\n        const distLeft = ref.x - this.x;\n        const distRight = this.x + this.width - ref.x;\n        const distTop = ref.y - this.y;\n        const distBottom = this.y + this.height - ref.y;\n        let closest = distLeft;\n        let side = 'left';\n        if (distRight < closest) {\n            closest = distRight;\n            side = 'right';\n        }\n        if (distTop < closest) {\n            closest = distTop;\n            side = 'top';\n        }\n        if (distBottom < closest) {\n            side = 'bottom';\n        }\n        return side;\n    }\n    /**\n     * Returns a point on the boundary of the rectangle nearest to the point `p`.\n     */\n    getNearestPointToPoint(p) {\n        const ref = Point.clone(p);\n        if (this.containsPoint(ref)) {\n            const side = this.getNearestSideToPoint(ref);\n            if (side === 'left') {\n                return new Point(this.x, ref.y);\n            }\n            if (side === 'top') {\n                return new Point(ref.x, this.y);\n            }\n            if (side === 'right') {\n                return new Point(this.x + this.width, ref.y);\n            }\n            if (side === 'bottom') {\n                return new Point(ref.x, this.y + this.height);\n            }\n        }\n        return ref.adhereToRect(this);\n    }\n    equals(rect) {\n        return (rect != null &&\n            rect.x === this.x &&\n            rect.y === this.y &&\n            rect.width === this.width &&\n            rect.height === this.height);\n    }\n    clone() {\n        return new Rectangle(this.x, this.y, this.width, this.height);\n    }\n    toJSON() {\n        return { x: this.x, y: this.y, width: this.width, height: this.height };\n    }\n    serialize() {\n        return `${this.x} ${this.y} ${this.width} ${this.height}`;\n    }\n}\n(function (Rectangle) {\n    function isRectangle(instance) {\n        return instance != null && instance instanceof Rectangle;\n    }\n    Rectangle.isRectangle = isRectangle;\n})(Rectangle || (Rectangle = {}));\n(function (Rectangle) {\n    function isRectangleLike(o) {\n        return (o != null &&\n            typeof o === 'object' &&\n            typeof o.x === 'number' &&\n            typeof o.y === 'number' &&\n            typeof o.width === 'number' &&\n            typeof o.height === 'number');\n    }\n    Rectangle.isRectangleLike = isRectangleLike;\n})(Rectangle || (Rectangle = {}));\n(function (Rectangle) {\n    function create(x, y, width, height) {\n        if (x == null || typeof x === 'number') {\n            return new Rectangle(x, y, width, height);\n        }\n        return clone(x);\n    }\n    Rectangle.create = create;\n    function clone(rect) {\n        if (Rectangle.isRectangle(rect)) {\n            return rect.clone();\n        }\n        if (Array.isArray(rect)) {\n            return new Rectangle(rect[0], rect[1], rect[2], rect[3]);\n        }\n        return new Rectangle(rect.x, rect.y, rect.width, rect.height);\n    }\n    Rectangle.clone = clone;\n    /**\n     * Returns a new rectangle from the given ellipse.\n     */\n    function fromEllipse(ellipse) {\n        return new Rectangle(ellipse.x - ellipse.a, ellipse.y - ellipse.b, 2 * ellipse.a, 2 * ellipse.b);\n    }\n    Rectangle.fromEllipse = fromEllipse;\n    function fromSize(size) {\n        return new Rectangle(0, 0, size.width, size.height);\n    }\n    Rectangle.fromSize = fromSize;\n    function fromPositionAndSize(pos, size) {\n        return new Rectangle(pos.x, pos.y, size.width, size.height);\n    }\n    Rectangle.fromPositionAndSize = fromPositionAndSize;\n})(Rectangle || (Rectangle = {}));\n//# sourceMappingURL=rectangle.js.map","import { Point } from './point';\nimport { Geometry } from './geometry';\nimport { Rectangle } from './rectangle';\nexport class Line extends Geometry {\n    get center() {\n        return new Point((this.start.x + this.end.x) / 2, (this.start.y + this.end.y) / 2);\n    }\n    constructor(x1, y1, x2, y2) {\n        super();\n        if (typeof x1 === 'number' && typeof y1 === 'number') {\n            this.start = new Point(x1, y1);\n            this.end = new Point(x2, y2);\n        }\n        else {\n            this.start = Point.create(x1);\n            this.end = Point.create(y1);\n        }\n    }\n    getCenter() {\n        return this.center;\n    }\n    /**\n     * Rounds the line to the given `precision`.\n     */\n    round(precision = 0) {\n        this.start.round(precision);\n        this.end.round(precision);\n        return this;\n    }\n    translate(tx, ty) {\n        if (typeof tx === 'number') {\n            this.start.translate(tx, ty);\n            this.end.translate(tx, ty);\n        }\n        else {\n            this.start.translate(tx);\n            this.end.translate(tx);\n        }\n        return this;\n    }\n    /**\n     * Rotate the line by `angle` around `origin`.\n     */\n    rotate(angle, origin) {\n        this.start.rotate(angle, origin);\n        this.end.rotate(angle, origin);\n        return this;\n    }\n    /**\n     * Scale the line by `sx` and `sy` about the given `origin`. If origin is not\n     * specified, the line is scaled around `0,0`.\n     */\n    scale(sx, sy, origin) {\n        this.start.scale(sx, sy, origin);\n        this.end.scale(sx, sy, origin);\n        return this;\n    }\n    /**\n     * Returns the length of the line.\n     */\n    length() {\n        return Math.sqrt(this.squaredLength());\n    }\n    /**\n     * Useful for distance comparisons in which real length is not necessary\n     * (saves one `Math.sqrt()` operation).\n     */\n    squaredLength() {\n        const dx = this.start.x - this.end.x;\n        const dy = this.start.y - this.end.y;\n        return dx * dx + dy * dy;\n    }\n    /**\n     * Scale the line so that it has the requested length. The start point of\n     * the line is preserved.\n     */\n    setLength(length) {\n        const total = this.length();\n        if (!total) {\n            return this;\n        }\n        const scale = length / total;\n        return this.scale(scale, scale, this.start);\n    }\n    parallel(distance) {\n        const line = this.clone();\n        if (!line.isDifferentiable()) {\n            return line;\n        }\n        const { start, end } = line;\n        const eRef = start.clone().rotate(270, end);\n        const sRef = end.clone().rotate(90, start);\n        start.move(sRef, distance);\n        end.move(eRef, distance);\n        return line;\n    }\n    /**\n     * Returns the vector of the line with length equal to length of the line.\n     */\n    vector() {\n        return new Point(this.end.x - this.start.x, this.end.y - this.start.y);\n    }\n    /**\n     * Returns the angle of incline of the line.\n     *\n     * The function returns `NaN` if the start and end endpoints of the line\n     * both lie at the same coordinates(it is impossible to determine the angle\n     * of incline of a line that appears to be a point). The\n     * `line.isDifferentiable()` function may be used in advance to determine\n     * whether the angle of incline can be computed for a given line.\n     */\n    angle() {\n        const ref = new Point(this.start.x + 1, this.start.y);\n        return this.start.angleBetween(this.end, ref);\n    }\n    /**\n     * Returns a rectangle that is the bounding box of the line.\n     */\n    bbox() {\n        const left = Math.min(this.start.x, this.end.x);\n        const top = Math.min(this.start.y, this.end.y);\n        const right = Math.max(this.start.x, this.end.x);\n        const bottom = Math.max(this.start.y, this.end.y);\n        return new Rectangle(left, top, right - left, bottom - top);\n    }\n    /**\n     * Returns the bearing (cardinal direction) of the line.\n     *\n     * The return value is one of the following strings:\n     * 'NE', 'E', 'SE', 'S', 'SW', 'W', 'NW' and 'N'.\n     *\n     * The function returns 'N' if the two endpoints of the line are coincident.\n     */\n    bearing() {\n        return this.start.bearing(this.end);\n    }\n    /**\n     * Returns the point on the line that lies closest to point `p`.\n     */\n    closestPoint(p) {\n        return this.pointAt(this.closestPointNormalizedLength(p));\n    }\n    /**\n     * Returns the length of the line up to the point that lies closest to point `p`.\n     */\n    closestPointLength(p) {\n        return this.closestPointNormalizedLength(p) * this.length();\n    }\n    /**\n     * Returns a line that is tangent to the line at the point that lies closest\n     * to point `p`.\n     */\n    closestPointTangent(p) {\n        return this.tangentAt(this.closestPointNormalizedLength(p));\n    }\n    /**\n     * Returns the normalized length (distance from the start of the line / total\n     * line length) of the line up to the point that lies closest to point.\n     */\n    closestPointNormalizedLength(p) {\n        const product = this.vector().dot(new Line(this.start, p).vector());\n        const normalized = Math.min(1, Math.max(0, product / this.squaredLength()));\n        // normalized returns `NaN` if this line has zero length\n        if (Number.isNaN(normalized)) {\n            return 0;\n        }\n        return normalized;\n    }\n    /**\n     * Returns a point on the line that lies `rate` (normalized length) away from\n     * the beginning of the line.\n     */\n    pointAt(ratio) {\n        const start = this.start;\n        const end = this.end;\n        if (ratio <= 0) {\n            return start.clone();\n        }\n        if (ratio >= 1) {\n            return end.clone();\n        }\n        return start.lerp(end, ratio);\n    }\n    /**\n     * Returns a point on the line that lies length away from the beginning of\n     * the line.\n     */\n    pointAtLength(length) {\n        const start = this.start;\n        const end = this.end;\n        let fromStart = true;\n        if (length < 0) {\n            fromStart = false; // start calculation from end point\n            length = -length; // eslint-disable-line\n        }\n        const total = this.length();\n        if (length >= total) {\n            return fromStart ? end.clone() : start.clone();\n        }\n        const rate = (fromStart ? length : total - length) / total;\n        return this.pointAt(rate);\n    }\n    /**\n     * Divides the line into two lines at the point that lies `rate` (normalized\n     * length) away from the beginning of the line.\n     */\n    divideAt(ratio) {\n        const dividerPoint = this.pointAt(ratio);\n        return [\n            new Line(this.start, dividerPoint),\n            new Line(dividerPoint, this.end),\n        ];\n    }\n    /**\n     * Divides the line into two lines at the point that lies length away from\n     * the beginning of the line.\n     */\n    divideAtLength(length) {\n        const dividerPoint = this.pointAtLength(length);\n        return [\n            new Line(this.start, dividerPoint),\n            new Line(dividerPoint, this.end),\n        ];\n    }\n    /**\n     * Returns `true` if the point `p` lies on the line. Return `false` otherwise.\n     */\n    containsPoint(p) {\n        const start = this.start;\n        const end = this.end;\n        // cross product of 0 indicates that this line and\n        // the vector to `p` are collinear.\n        if (start.cross(p, end) !== 0) {\n            return false;\n        }\n        const length = this.length();\n        if (new Line(start, p).length() > length) {\n            return false;\n        }\n        if (new Line(p, end).length() > length) {\n            return false;\n        }\n        return true;\n    }\n    intersect(shape, options) {\n        const ret = shape.intersectsWithLine(this, options);\n        if (ret) {\n            return Array.isArray(ret) ? ret : [ret];\n        }\n        return null;\n    }\n    /**\n     * Returns the intersection point of the line with another line. Returns\n     * `null` if no intersection exists.\n     */\n    intersectsWithLine(line) {\n        const pt1Dir = new Point(this.end.x - this.start.x, this.end.y - this.start.y);\n        const pt2Dir = new Point(line.end.x - line.start.x, line.end.y - line.start.y);\n        const det = pt1Dir.x * pt2Dir.y - pt1Dir.y * pt2Dir.x;\n        const deltaPt = new Point(line.start.x - this.start.x, line.start.y - this.start.y);\n        const alpha = deltaPt.x * pt2Dir.y - deltaPt.y * pt2Dir.x;\n        const beta = deltaPt.x * pt1Dir.y - deltaPt.y * pt1Dir.x;\n        if (det === 0 || alpha * det < 0 || beta * det < 0) {\n            return null;\n        }\n        if (det > 0) {\n            if (alpha > det || beta > det) {\n                return null;\n            }\n        }\n        else if (alpha < det || beta < det) {\n            return null;\n        }\n        return new Point(this.start.x + (alpha * pt1Dir.x) / det, this.start.y + (alpha * pt1Dir.y) / det);\n    }\n    /**\n     * Returns `true` if a tangent line can be found for the line.\n     *\n     * Tangents cannot be found if both of the line endpoints are coincident\n     * (the line appears to be a point).\n     */\n    isDifferentiable() {\n        return !this.start.equals(this.end);\n    }\n    /**\n     * Returns the perpendicular distance between the line and point. The\n     * distance is positive if the point lies to the right of the line, negative\n     * if the point lies to the left of the line, and `0` if the point lies on\n     * the line.\n     */\n    pointOffset(p) {\n        const ref = Point.clone(p);\n        const start = this.start;\n        const end = this.end;\n        const determinant = (end.x - start.x) * (ref.y - start.y) -\n            (end.y - start.y) * (ref.x - start.x);\n        return determinant / this.length();\n    }\n    pointSquaredDistance(x, y) {\n        const p = Point.create(x, y);\n        return this.closestPoint(p).squaredDistance(p);\n    }\n    pointDistance(x, y) {\n        const p = Point.create(x, y);\n        return this.closestPoint(p).distance(p);\n    }\n    /**\n     * Returns a line tangent to the line at point that lies `rate` (normalized\n     * length) away from the beginning of the line.\n     */\n    tangentAt(ratio) {\n        if (!this.isDifferentiable()) {\n            return null;\n        }\n        const start = this.start;\n        const end = this.end;\n        const tangentStart = this.pointAt(ratio);\n        const tangentLine = new Line(start, end);\n        tangentLine.translate(tangentStart.x - start.x, tangentStart.y - start.y);\n        return tangentLine;\n    }\n    /**\n     * Returns a line tangent to the line at point that lies `length` away from\n     * the beginning of the line.\n     */\n    tangentAtLength(length) {\n        if (!this.isDifferentiable()) {\n            return null;\n        }\n        const start = this.start;\n        const end = this.end;\n        const tangentStart = this.pointAtLength(length);\n        const tangentLine = new Line(start, end);\n        tangentLine.translate(tangentStart.x - start.x, tangentStart.y - start.y);\n        return tangentLine;\n    }\n    relativeCcw(x, y) {\n        const ref = Point.create(x, y);\n        let dx1 = ref.x - this.start.x;\n        let dy1 = ref.y - this.start.y;\n        const dx2 = this.end.x - this.start.x;\n        const dy2 = this.end.y - this.start.y;\n        let ccw = dx1 * dy2 - dy1 * dx2;\n        if (ccw === 0) {\n            ccw = dx1 * dx2 + dy1 * dy2;\n            if (ccw > 0.0) {\n                dx1 -= dx2;\n                dy1 -= dy2;\n                ccw = dx1 * dx2 + dy1 * dy2;\n                if (ccw < 0.0) {\n                    ccw = 0.0;\n                }\n            }\n        }\n        return ccw < 0.0 ? -1 : ccw > 0.0 ? 1 : 0;\n    }\n    /**\n     * Return `true` if the line equals the other line.\n     */\n    equals(l) {\n        return (l != null &&\n            this.start.x === l.start.x &&\n            this.start.y === l.start.y &&\n            this.end.x === l.end.x &&\n            this.end.y === l.end.y);\n    }\n    /**\n     * Returns another line which is a clone of the line.\n     */\n    clone() {\n        return new Line(this.start, this.end);\n    }\n    toJSON() {\n        return { start: this.start.toJSON(), end: this.end.toJSON() };\n    }\n    serialize() {\n        return [this.start.serialize(), this.end.serialize()].join(' ');\n    }\n}\n(function (Line) {\n    function isLine(instance) {\n        return instance != null && instance instanceof Line;\n    }\n    Line.isLine = isLine;\n})(Line || (Line = {}));\n//# sourceMappingURL=line.js.map","import { Point } from './point';\nimport { Rectangle } from './rectangle';\nimport { Geometry } from './geometry';\nexport class Ellipse extends Geometry {\n    get center() {\n        return new Point(this.x, this.y);\n    }\n    constructor(x, y, a, b) {\n        super();\n        this.x = x == null ? 0 : x;\n        this.y = y == null ? 0 : y;\n        this.a = a == null ? 0 : a;\n        this.b = b == null ? 0 : b;\n    }\n    /**\n     * Returns a rectangle that is the bounding box of the ellipse.\n     */\n    bbox() {\n        return Rectangle.fromEllipse(this);\n    }\n    /**\n     * Returns a point that is the center of the ellipse.\n     */\n    getCenter() {\n        return this.center;\n    }\n    inflate(dx, dy) {\n        const w = dx;\n        const h = dy != null ? dy : dx;\n        this.a += 2 * w;\n        this.b += 2 * h;\n        return this;\n    }\n    normalizedDistance(x, y) {\n        const ref = Point.create(x, y);\n        const dx = ref.x - this.x;\n        const dy = ref.y - this.y;\n        const a = this.a;\n        const b = this.b;\n        return (dx * dx) / (a * a) + (dy * dy) / (b * b);\n    }\n    containsPoint(x, y) {\n        return this.normalizedDistance(x, y) <= 1;\n    }\n    /**\n     * Returns an array of the intersection points of the ellipse and the line.\n     * Returns `null` if no intersection exists.\n     */\n    intersectsWithLine(line) {\n        const intersections = [];\n        const rx = this.a;\n        const ry = this.b;\n        const a1 = line.start;\n        const a2 = line.end;\n        const dir = line.vector();\n        const diff = a1.diff(new Point(this.x, this.y));\n        const mDir = new Point(dir.x / (rx * rx), dir.y / (ry * ry));\n        const mDiff = new Point(diff.x / (rx * rx), diff.y / (ry * ry));\n        const a = dir.dot(mDir);\n        const b = dir.dot(mDiff);\n        const c = diff.dot(mDiff) - 1.0;\n        const d = b * b - a * c;\n        if (d < 0) {\n            return null;\n        }\n        if (d > 0) {\n            const root = Math.sqrt(d);\n            const ta = (-b - root) / a;\n            const tb = (-b + root) / a;\n            if ((ta < 0 || ta > 1) && (tb < 0 || tb > 1)) {\n                // outside\n                return null;\n            }\n            if (ta >= 0 && ta <= 1) {\n                intersections.push(a1.lerp(a2, ta));\n            }\n            if (tb >= 0 && tb <= 1) {\n                intersections.push(a1.lerp(a2, tb));\n            }\n        }\n        else {\n            const t = -b / a;\n            if (t >= 0 && t <= 1) {\n                intersections.push(a1.lerp(a2, t));\n            }\n            else {\n                // outside\n                return null;\n            }\n        }\n        return intersections;\n    }\n    /**\n     * Returns the point on the boundary of the ellipse that is the\n     * intersection of the ellipse with a line starting in the center\n     * of the ellipse ending in the point `p`.\n     *\n     * If angle is specified, the intersection will take into account\n     * the rotation of the ellipse by angle degrees around its center.\n     */\n    intersectsWithLineFromCenterToPoint(p, angle = 0) {\n        const ref = Point.clone(p);\n        if (angle) {\n            ref.rotate(angle, this.getCenter());\n        }\n        const dx = ref.x - this.x;\n        const dy = ref.y - this.y;\n        let result;\n        if (dx === 0) {\n            result = this.bbox().getNearestPointToPoint(ref);\n            if (angle) {\n                return result.rotate(-angle, this.getCenter());\n            }\n            return result;\n        }\n        const m = dy / dx;\n        const mSquared = m * m;\n        const aSquared = this.a * this.a;\n        const bSquared = this.b * this.b;\n        let x = Math.sqrt(1 / (1 / aSquared + mSquared / bSquared));\n        x = dx < 0 ? -x : x;\n        const y = m * x;\n        result = new Point(this.x + x, this.y + y);\n        if (angle) {\n            return result.rotate(-angle, this.getCenter());\n        }\n        return result;\n    }\n    /**\n     * Returns the angle between the x-axis and the tangent from a point. It is\n     * valid for points lying on the ellipse boundary only.\n     */\n    tangentTheta(p) {\n        const ref = Point.clone(p);\n        const x0 = ref.x;\n        const y0 = ref.y;\n        const a = this.a;\n        const b = this.b;\n        const center = this.bbox().center;\n        const cx = center.x;\n        const cy = center.y;\n        const refPointDelta = 30;\n        const q1 = x0 > center.x + a / 2;\n        const q3 = x0 < center.x - a / 2;\n        let x;\n        let y;\n        if (q1 || q3) {\n            y = x0 > center.x ? y0 - refPointDelta : y0 + refPointDelta;\n            x =\n                (a * a) / (x0 - cx) -\n                    (a * a * (y0 - cy) * (y - cy)) / (b * b * (x0 - cx)) +\n                    cx;\n        }\n        else {\n            x = y0 > center.y ? x0 + refPointDelta : x0 - refPointDelta;\n            y =\n                (b * b) / (y0 - cy) -\n                    (b * b * (x0 - cx) * (x - cx)) / (a * a * (y0 - cy)) +\n                    cy;\n        }\n        return new Point(x, y).theta(ref);\n    }\n    scale(sx, sy) {\n        this.a *= sx;\n        this.b *= sy;\n        return this;\n    }\n    rotate(angle, origin) {\n        const rect = Rectangle.fromEllipse(this);\n        rect.rotate(angle, origin);\n        const ellipse = Ellipse.fromRect(rect);\n        this.a = ellipse.a;\n        this.b = ellipse.b;\n        this.x = ellipse.x;\n        this.y = ellipse.y;\n        return this;\n    }\n    translate(dx, dy) {\n        const p = Point.create(dx, dy);\n        this.x += p.x;\n        this.y += p.y;\n        return this;\n    }\n    equals(ellipse) {\n        return (ellipse != null &&\n            ellipse.x === this.x &&\n            ellipse.y === this.y &&\n            ellipse.a === this.a &&\n            ellipse.b === this.b);\n    }\n    clone() {\n        return new Ellipse(this.x, this.y, this.a, this.b);\n    }\n    toJSON() {\n        return { x: this.x, y: this.y, a: this.a, b: this.b };\n    }\n    serialize() {\n        return `${this.x} ${this.y} ${this.a} ${this.b}`;\n    }\n}\n(function (Ellipse) {\n    function isEllipse(instance) {\n        return instance != null && instance instanceof Ellipse;\n    }\n    Ellipse.isEllipse = isEllipse;\n})(Ellipse || (Ellipse = {}));\n(function (Ellipse) {\n    function create(x, y, a, b) {\n        if (x == null || typeof x === 'number') {\n            return new Ellipse(x, y, a, b);\n        }\n        return parse(x);\n    }\n    Ellipse.create = create;\n    function parse(e) {\n        if (Ellipse.isEllipse(e)) {\n            return e.clone();\n        }\n        if (Array.isArray(e)) {\n            return new Ellipse(e[0], e[1], e[2], e[3]);\n        }\n        return new Ellipse(e.x, e.y, e.a, e.b);\n    }\n    Ellipse.parse = parse;\n    function fromRect(rect) {\n        const center = rect.center;\n        return new Ellipse(center.x, center.y, rect.width / 2, rect.height / 2);\n    }\n    Ellipse.fromRect = fromRect;\n})(Ellipse || (Ellipse = {}));\n//# sourceMappingURL=ellipse.js.map","/* eslint-disable default-param-last */\nimport { Point } from '../point';\nconst regexSupportedData = new RegExp(`^[\\\\s\\\\dLMCZz,.]*$`); // eslint-disable-line prefer-regex-literals\nexport function isValid(data) {\n    if (typeof data !== 'string') {\n        return false;\n    }\n    return regexSupportedData.test(data);\n}\n/**\n * Returns the remainder of division of `n` by `m`. You should use this\n * instead of the built-in operation as the built-in operation does not\n * properly handle negative numbers.\n */\nfunction mod(n, m) {\n    return ((n % m) + m) % m;\n}\nfunction draw(points, round, initialMove, close, exclude) {\n    const data = [];\n    const end = points[points.length - 1];\n    const rounded = round != null && round > 0;\n    const arcSize = round || 0;\n    // Adds virtual waypoint in the center between start and end point\n    if (close && rounded) {\n        points = points.slice(); // eslint-disable-line\n        const p0 = points[0];\n        const wp = new Point(end.x + (p0.x - end.x) / 2, end.y + (p0.y - end.y) / 2);\n        points.splice(0, 0, wp);\n    }\n    let pt = points[0];\n    let i = 1;\n    // Draws the line segments\n    if (initialMove) {\n        data.push('M', pt.x, pt.y);\n    }\n    else {\n        data.push('L', pt.x, pt.y);\n    }\n    while (i < (close ? points.length : points.length - 1)) {\n        let tmp = points[mod(i, points.length)];\n        let dx = pt.x - tmp.x;\n        let dy = pt.y - tmp.y;\n        if (rounded &&\n            (dx !== 0 || dy !== 0) &&\n            (exclude == null || exclude.indexOf(i - 1) < 0)) {\n            // Draws a line from the last point to the current\n            // point with a spacing of size off the current point\n            // into direction of the last point\n            let dist = Math.sqrt(dx * dx + dy * dy);\n            const nx1 = (dx * Math.min(arcSize, dist / 2)) / dist;\n            const ny1 = (dy * Math.min(arcSize, dist / 2)) / dist;\n            const x1 = tmp.x + nx1;\n            const y1 = tmp.y + ny1;\n            data.push('L', x1, y1);\n            // Draws a curve from the last point to the current\n            // point with a spacing of size off the current point\n            // into direction of the next point\n            let next = points[mod(i + 1, points.length)];\n            // Uses next non-overlapping point\n            while (i < points.length - 2 &&\n                Math.round(next.x - tmp.x) === 0 &&\n                Math.round(next.y - tmp.y) === 0) {\n                next = points[mod(i + 2, points.length)];\n                i += 1;\n            }\n            dx = next.x - tmp.x;\n            dy = next.y - tmp.y;\n            dist = Math.max(1, Math.sqrt(dx * dx + dy * dy));\n            const nx2 = (dx * Math.min(arcSize, dist / 2)) / dist;\n            const ny2 = (dy * Math.min(arcSize, dist / 2)) / dist;\n            const x2 = tmp.x + nx2;\n            const y2 = tmp.y + ny2;\n            data.push('Q', tmp.x, tmp.y, x2, y2);\n            tmp = new Point(x2, y2);\n        }\n        else {\n            data.push('L', tmp.x, tmp.y);\n        }\n        pt = tmp;\n        i += 1;\n    }\n    if (close) {\n        data.push('Z');\n    }\n    else {\n        data.push('L', end.x, end.y);\n    }\n    return data.map((v) => (typeof v === 'string' ? v : +v.toFixed(3))).join(' ');\n}\nexport function drawPoints(points, options = {}) {\n    const pts = [];\n    if (points && points.length) {\n        points.forEach((p) => {\n            if (Array.isArray(p)) {\n                pts.push({ x: p[0], y: p[1] });\n            }\n            else {\n                pts.push({ x: p.x, y: p.y });\n            }\n        });\n    }\n    return draw(pts, options.round, options.initialMove == null || options.initialMove, options.close, options.exclude);\n}\n/**\n * Converts the given arc to a series of curves.\n */\nexport function arcToCurves(x0, y0, r1, r2, angle = 0, largeArcFlag = 0, sweepFlag = 0, x, y) {\n    if (r1 === 0 || r2 === 0) {\n        return [];\n    }\n    x -= x0; // eslint-disable-line\n    y -= y0; // eslint-disable-line\n    r1 = Math.abs(r1); // eslint-disable-line\n    r2 = Math.abs(r2); // eslint-disable-line\n    const ctx = -x / 2;\n    const cty = -y / 2;\n    const cpsi = Math.cos((angle * Math.PI) / 180);\n    const spsi = Math.sin((angle * Math.PI) / 180);\n    const rxd = cpsi * ctx + spsi * cty;\n    const ryd = -1 * spsi * ctx + cpsi * cty;\n    const rxdd = rxd * rxd;\n    const rydd = ryd * ryd;\n    const r1x = r1 * r1;\n    const r2y = r2 * r2;\n    const lamda = rxdd / r1x + rydd / r2y;\n    let sds;\n    if (lamda > 1) {\n        r1 = Math.sqrt(lamda) * r1; // eslint-disable-line\n        r2 = Math.sqrt(lamda) * r2; // eslint-disable-line\n        sds = 0;\n    }\n    else {\n        let seif = 1;\n        if (largeArcFlag === sweepFlag) {\n            seif = -1;\n        }\n        sds =\n            seif *\n                Math.sqrt((r1x * r2y - r1x * rydd - r2y * rxdd) / (r1x * rydd + r2y * rxdd));\n    }\n    const txd = (sds * r1 * ryd) / r2;\n    const tyd = (-1 * sds * r2 * rxd) / r1;\n    const tx = cpsi * txd - spsi * tyd + x / 2;\n    const ty = spsi * txd + cpsi * tyd + y / 2;\n    let rad = Math.atan2((ryd - tyd) / r2, (rxd - txd) / r1) - Math.atan2(0, 1);\n    let s1 = rad >= 0 ? rad : 2 * Math.PI + rad;\n    rad =\n        Math.atan2((-ryd - tyd) / r2, (-rxd - txd) / r1) -\n            Math.atan2((ryd - tyd) / r2, (rxd - txd) / r1);\n    let dr = rad >= 0 ? rad : 2 * Math.PI + rad;\n    if (sweepFlag === 0 && dr > 0) {\n        dr -= 2 * Math.PI;\n    }\n    else if (sweepFlag !== 0 && dr < 0) {\n        dr += 2 * Math.PI;\n    }\n    const sse = (dr * 2) / Math.PI;\n    const seg = Math.ceil(sse < 0 ? -1 * sse : sse);\n    const segr = dr / seg;\n    const t = ((8 / 3) * Math.sin(segr / 4) * Math.sin(segr / 4)) / Math.sin(segr / 2);\n    const cpsir1 = cpsi * r1;\n    const cpsir2 = cpsi * r2;\n    const spsir1 = spsi * r1;\n    const spsir2 = spsi * r2;\n    let mc = Math.cos(s1);\n    let ms = Math.sin(s1);\n    let x2 = -t * (cpsir1 * ms + spsir2 * mc);\n    let y2 = -t * (spsir1 * ms - cpsir2 * mc);\n    let x3 = 0;\n    let y3 = 0;\n    const result = [];\n    for (let n = 0; n < seg; n += 1) {\n        s1 += segr;\n        mc = Math.cos(s1);\n        ms = Math.sin(s1);\n        x3 = cpsir1 * mc - spsir2 * ms + tx;\n        y3 = spsir1 * mc + cpsir2 * ms + ty;\n        const dx = -t * (cpsir1 * ms + spsir2 * mc);\n        const dy = -t * (spsir1 * ms - cpsir2 * mc);\n        // CurveTo updates x0, y0 so need to restore it\n        const index = n * 6;\n        result[index] = Number(x2 + x0);\n        result[index + 1] = Number(y2 + y0);\n        result[index + 2] = Number(x3 - dx + x0);\n        result[index + 3] = Number(y3 - dy + y0);\n        result[index + 4] = Number(x3 + x0);\n        result[index + 5] = Number(y3 + y0);\n        x2 = x3 + dx;\n        y2 = y3 + dy;\n    }\n    return result.map((num) => +num.toFixed(2));\n}\nexport function drawArc(startX, startY, rx, ry, xAxisRotation = 0, largeArcFlag = 0, sweepFlag = 0, stopX, stopY) {\n    const data = [];\n    const points = arcToCurves(startX, startY, rx, ry, xAxisRotation, largeArcFlag, sweepFlag, stopX, stopY);\n    if (points != null) {\n        for (let i = 0, ii = points.length; i < ii; i += 6) {\n            data.push('C', points[i], points[i + 1], points[i + 2], points[i + 3], points[i + 4], points[i + 5]);\n        }\n    }\n    return data.join(' ');\n}\n//# sourceMappingURL=util.js.map","/* eslint-disable no-constructor-return */\nimport { Line } from './line';\nimport { Point } from './point';\nimport { Rectangle } from './rectangle';\nimport { Geometry } from './geometry';\nexport class Polyline extends Geometry {\n    get start() {\n        return this.points[0] || null;\n    }\n    get end() {\n        return this.points[this.points.length - 1] || null;\n    }\n    constructor(points) {\n        super();\n        if (points != null) {\n            if (typeof points === 'string') {\n                return Polyline.parse(points);\n            }\n            this.points = points.map((p) => Point.create(p));\n        }\n        else {\n            this.points = [];\n        }\n    }\n    scale(sx, sy, origin = new Point()) {\n        this.points.forEach((p) => p.scale(sx, sy, origin));\n        return this;\n    }\n    rotate(angle, origin) {\n        this.points.forEach((p) => p.rotate(angle, origin));\n        return this;\n    }\n    translate(dx, dy) {\n        const t = Point.create(dx, dy);\n        this.points.forEach((p) => p.translate(t.x, t.y));\n        return this;\n    }\n    round(precision = 0) {\n        this.points.forEach((p) => p.round(precision));\n        return this;\n    }\n    bbox() {\n        if (this.points.length === 0) {\n            return new Rectangle();\n        }\n        let x1 = Infinity;\n        let x2 = -Infinity;\n        let y1 = Infinity;\n        let y2 = -Infinity;\n        const points = this.points;\n        for (let i = 0, ii = points.length; i < ii; i += 1) {\n            const point = points[i];\n            const x = point.x;\n            const y = point.y;\n            if (x < x1)\n                x1 = x;\n            if (x > x2)\n                x2 = x;\n            if (y < y1)\n                y1 = y;\n            if (y > y2)\n                y2 = y;\n        }\n        return new Rectangle(x1, y1, x2 - x1, y2 - y1);\n    }\n    closestPoint(p) {\n        const cpLength = this.closestPointLength(p);\n        return this.pointAtLength(cpLength);\n    }\n    closestPointLength(p) {\n        const points = this.points;\n        const count = points.length;\n        if (count === 0 || count === 1) {\n            return 0;\n        }\n        let length = 0;\n        let cpLength = 0;\n        let minSqrDistance = Infinity;\n        for (let i = 0, ii = count - 1; i < ii; i += 1) {\n            const line = new Line(points[i], points[i + 1]);\n            const lineLength = line.length();\n            const cpNormalizedLength = line.closestPointNormalizedLength(p);\n            const cp = line.pointAt(cpNormalizedLength);\n            const sqrDistance = cp.squaredDistance(p);\n            if (sqrDistance < minSqrDistance) {\n                minSqrDistance = sqrDistance;\n                cpLength = length + cpNormalizedLength * lineLength;\n            }\n            length += lineLength;\n        }\n        return cpLength;\n    }\n    closestPointNormalizedLength(p) {\n        const length = this.length();\n        if (length === 0) {\n            return 0;\n        }\n        const cpLength = this.closestPointLength(p);\n        return cpLength / length;\n    }\n    closestPointTangent(p) {\n        const cpLength = this.closestPointLength(p);\n        return this.tangentAtLength(cpLength);\n    }\n    containsPoint(p) {\n        if (this.points.length === 0) {\n            return false;\n        }\n        const ref = Point.clone(p);\n        const x = ref.x;\n        const y = ref.y;\n        const points = this.points;\n        const count = points.length;\n        let startIndex = count - 1;\n        let intersectionCount = 0;\n        for (let endIndex = 0; endIndex < count; endIndex += 1) {\n            const start = points[startIndex];\n            const end = points[endIndex];\n            if (ref.equals(start)) {\n                return true;\n            }\n            const segment = new Line(start, end);\n            if (segment.containsPoint(p)) {\n                return true;\n            }\n            // do we have an intersection?\n            if ((y <= start.y && y > end.y) || (y > start.y && y <= end.y)) {\n                // this conditional branch IS NOT entered when `segment` is collinear/coincident with `ray`\n                // (when `y === start.y === end.y`)\n                // this conditional branch IS entered when `segment` touches `ray` at only one point\n                // (e.g. when `y === start.y !== end.y`)\n                // since this branch is entered again for the following segment, the two touches cancel out\n                const xDifference = start.x - x > end.x - x ? start.x - x : end.x - x;\n                if (xDifference >= 0) {\n                    // segment lies at least partially to the right of `p`\n                    const rayEnd = new Point(x + xDifference, y); // right\n                    const ray = new Line(p, rayEnd);\n                    if (segment.intersectsWithLine(ray)) {\n                        // an intersection was detected to the right of `p`\n                        intersectionCount += 1;\n                    }\n                } // else: `segment` lies completely to the left of `p` (i.e. no intersection to the right)\n            }\n            // move to check the next polyline segment\n            startIndex = endIndex;\n        }\n        // returns `true` for odd numbers of intersections (even-odd algorithm)\n        return intersectionCount % 2 === 1;\n    }\n    intersectsWithLine(line) {\n        const intersections = [];\n        for (let i = 0, n = this.points.length - 1; i < n; i += 1) {\n            const a = this.points[i];\n            const b = this.points[i + 1];\n            const int = line.intersectsWithLine(new Line(a, b));\n            if (int) {\n                intersections.push(int);\n            }\n        }\n        return intersections.length > 0 ? intersections : null;\n    }\n    isDifferentiable() {\n        for (let i = 0, ii = this.points.length - 1; i < ii; i += 1) {\n            const a = this.points[i];\n            const b = this.points[i + 1];\n            const line = new Line(a, b);\n            if (line.isDifferentiable()) {\n                return true;\n            }\n        }\n        return false;\n    }\n    length() {\n        let len = 0;\n        for (let i = 0, ii = this.points.length - 1; i < ii; i += 1) {\n            const a = this.points[i];\n            const b = this.points[i + 1];\n            len += a.distance(b);\n        }\n        return len;\n    }\n    pointAt(ratio) {\n        const points = this.points;\n        const count = points.length;\n        if (count === 0) {\n            return null;\n        }\n        if (count === 1) {\n            return points[0].clone();\n        }\n        if (ratio <= 0) {\n            return points[0].clone();\n        }\n        if (ratio >= 1) {\n            return points[count - 1].clone();\n        }\n        const total = this.length();\n        const length = total * ratio;\n        return this.pointAtLength(length);\n    }\n    pointAtLength(length) {\n        const points = this.points;\n        const count = points.length;\n        if (count === 0) {\n            return null;\n        }\n        if (count === 1) {\n            return points[0].clone();\n        }\n        let fromStart = true;\n        if (length < 0) {\n            fromStart = false;\n            length = -length; // eslint-disable-line\n        }\n        let tmp = 0;\n        for (let i = 0, ii = count - 1; i < ii; i += 1) {\n            const index = fromStart ? i : ii - 1 - i;\n            const a = points[index];\n            const b = points[index + 1];\n            const l = new Line(a, b);\n            const d = a.distance(b);\n            if (length <= tmp + d) {\n                return l.pointAtLength((fromStart ? 1 : -1) * (length - tmp));\n            }\n            tmp += d;\n        }\n        const lastPoint = fromStart ? points[count - 1] : points[0];\n        return lastPoint.clone();\n    }\n    tangentAt(ratio) {\n        const points = this.points;\n        const count = points.length;\n        if (count === 0 || count === 1) {\n            return null;\n        }\n        if (ratio < 0) {\n            ratio = 0; // eslint-disable-line\n        }\n        if (ratio > 1) {\n            ratio = 1; // eslint-disable-line\n        }\n        const total = this.length();\n        const length = total * ratio;\n        return this.tangentAtLength(length);\n    }\n    tangentAtLength(length) {\n        const points = this.points;\n        const count = points.length;\n        if (count === 0 || count === 1) {\n            return null;\n        }\n        let fromStart = true;\n        if (length < 0) {\n            fromStart = false;\n            length = -length; // eslint-disable-line\n        }\n        let lastValidLine;\n        let tmp = 0;\n        for (let i = 0, ii = count - 1; i < ii; i += 1) {\n            const index = fromStart ? i : ii - 1 - i;\n            const a = points[index];\n            const b = points[index + 1];\n            const l = new Line(a, b);\n            const d = a.distance(b);\n            if (l.isDifferentiable()) {\n                // has a tangent line (line length is not 0)\n                if (length <= tmp + d) {\n                    return l.tangentAtLength((fromStart ? 1 : -1) * (length - tmp));\n                }\n                lastValidLine = l;\n            }\n            tmp += d;\n        }\n        if (lastValidLine) {\n            const ratio = fromStart ? 1 : 0;\n            return lastValidLine.tangentAt(ratio);\n        }\n        return null;\n    }\n    simplify(\n    // TODO: Accept startIndex and endIndex to specify where to start and end simplification\n    options = {}) {\n        const points = this.points;\n        // we need at least 3 points\n        if (points.length < 3) {\n            return this;\n        }\n        const threshold = options.threshold || 0;\n        // start at the beginning of the polyline and go forward\n        let currentIndex = 0;\n        // we need at least one intermediate point (3 points) in every iteration\n        // as soon as that stops being true, we know we reached the end of the polyline\n        while (points[currentIndex + 2]) {\n            const firstIndex = currentIndex;\n            const middleIndex = currentIndex + 1;\n            const lastIndex = currentIndex + 2;\n            const firstPoint = points[firstIndex];\n            const middlePoint = points[middleIndex];\n            const lastPoint = points[lastIndex];\n            const chord = new Line(firstPoint, lastPoint); // = connection between first and last point\n            const closestPoint = chord.closestPoint(middlePoint); // = closest point on chord from middle point\n            const closestPointDistance = closestPoint.distance(middlePoint);\n            if (closestPointDistance <= threshold) {\n                // middle point is close enough to the chord = simplify\n                // 1) remove middle point:\n                points.splice(middleIndex, 1);\n                // 2) in next iteration, investigate the newly-created triplet of points\n                //    - do not change `currentIndex`\n                //    = (first point stays, point after removed point becomes middle point)\n            }\n            else {\n                // middle point is far from the chord\n                // 1) preserve middle point\n                // 2) in next iteration, move `currentIndex` by one step:\n                currentIndex += 1;\n                //    = (point after first point becomes first point)\n            }\n        }\n        // `points` array was modified in-place\n        return this;\n    }\n    toHull() {\n        const points = this.points;\n        const count = points.length;\n        if (count === 0) {\n            return new Polyline();\n        }\n        // Step 1: find the starting point -- point with\n        // the lowest y (if equality, highest x).\n        let startPoint = points[0];\n        for (let i = 1; i < count; i += 1) {\n            if (points[i].y < startPoint.y) {\n                startPoint = points[i];\n            }\n            else if (points[i].y === startPoint.y && points[i].x > startPoint.x) {\n                startPoint = points[i];\n            }\n        }\n        // Step 2: sort the list of points by angle between line\n        // from start point to current point and the x-axis (theta).\n        // Step 2a: create the point records = [point, originalIndex, angle]\n        const sortedRecords = [];\n        for (let i = 0; i < count; i += 1) {\n            let angle = startPoint.theta(points[i]);\n            if (angle === 0) {\n                // Give highest angle to start point.\n                // The start point will end up at end of sorted list.\n                // The start point will end up at beginning of hull points list.\n                angle = 360;\n            }\n            sortedRecords.push([points[i], i, angle]);\n        }\n        // Step 2b: sort the list in place\n        sortedRecords.sort((record1, record2) => {\n            let ret = record1[2] - record2[2];\n            if (ret === 0) {\n                ret = record2[1] - record1[1];\n            }\n            return ret;\n        });\n        // Step 2c: duplicate start record from the top of\n        // the stack to the bottom of the stack.\n        if (sortedRecords.length > 2) {\n            const startPoint = sortedRecords[sortedRecords.length - 1];\n            sortedRecords.unshift(startPoint);\n        }\n        // Step 3\n        // ------\n        // Step 3a: go through sorted points in order and find those with\n        // right turns, and we want to get our results in clockwise order.\n        // Dictionary of points with left turns - cannot be on the hull.\n        const insidePoints = {};\n        // Stack of records with right turns - hull point candidates.\n        const hullRecords = [];\n        const getKey = (record) => `${record[0].toString()}@${record[1]}`;\n        while (sortedRecords.length !== 0) {\n            const currentRecord = sortedRecords.pop();\n            const currentPoint = currentRecord[0];\n            // Check if point has already been discarded.\n            if (insidePoints[getKey(currentRecord)]) {\n                continue;\n            }\n            let correctTurnFound = false;\n            while (!correctTurnFound) {\n                if (hullRecords.length < 2) {\n                    // Not enough points for comparison, just add current point.\n                    hullRecords.push(currentRecord);\n                    correctTurnFound = true;\n                }\n                else {\n                    const lastHullRecord = hullRecords.pop();\n                    const lastHullPoint = lastHullRecord[0];\n                    const secondLastHullRecord = hullRecords.pop();\n                    const secondLastHullPoint = secondLastHullRecord[0];\n                    const crossProduct = secondLastHullPoint.cross(lastHullPoint, currentPoint);\n                    if (crossProduct < 0) {\n                        // Found a right turn.\n                        hullRecords.push(secondLastHullRecord);\n                        hullRecords.push(lastHullRecord);\n                        hullRecords.push(currentRecord);\n                        correctTurnFound = true;\n                    }\n                    else if (crossProduct === 0) {\n                        // the three points are collinear\n                        // three options:\n                        // there may be a 180 or 0 degree angle at lastHullPoint\n                        // or two of the three points are coincident\n                        // we have to take rounding errors into account\n                        const THRESHOLD = 1e-10;\n                        const angleBetween = lastHullPoint.angleBetween(secondLastHullPoint, currentPoint);\n                        if (Math.abs(angleBetween - 180) < THRESHOLD) {\n                            // rouding around 180 to 180\n                            // if the cross product is 0 because the angle is 180 degrees\n                            // discard last hull point (add to insidePoints)\n                            // insidePoints.unshift(lastHullPoint);\n                            insidePoints[getKey(lastHullRecord)] = lastHullPoint;\n                            // reenter second-to-last hull point (will be last at next iter)\n                            hullRecords.push(secondLastHullRecord);\n                            // do not do anything with current point\n                            // correct turn not found\n                        }\n                        else if (lastHullPoint.equals(currentPoint) ||\n                            secondLastHullPoint.equals(lastHullPoint)) {\n                            // if the cross product is 0 because two points are the same\n                            // discard last hull point (add to insidePoints)\n                            // insidePoints.unshift(lastHullPoint);\n                            insidePoints[getKey(lastHullRecord)] = lastHullPoint;\n                            // reenter second-to-last hull point (will be last at next iter)\n                            hullRecords.push(secondLastHullRecord);\n                            // do not do anything with current point\n                            // correct turn not found\n                        }\n                        else if (Math.abs(((angleBetween + 1) % 360) - 1) < THRESHOLD) {\n                            // rounding around 0 and 360 to 0\n                            // if the cross product is 0 because the angle is 0 degrees\n                            // remove last hull point from hull BUT do not discard it\n                            // reenter second-to-last hull point (will be last at next iter)\n                            hullRecords.push(secondLastHullRecord);\n                            // put last hull point back into the sorted point records list\n                            sortedRecords.push(lastHullRecord);\n                            // we are switching the order of the 0deg and 180deg points\n                            // correct turn not found\n                        }\n                    }\n                    else {\n                        // found a left turn\n                        // discard last hull point (add to insidePoints)\n                        // insidePoints.unshift(lastHullPoint);\n                        insidePoints[getKey(lastHullRecord)] = lastHullPoint;\n                        // reenter second-to-last hull point (will be last at next iter of loop)\n                        hullRecords.push(secondLastHullRecord);\n                        // do not do anything with current point\n                        // correct turn not found\n                    }\n                }\n            }\n        }\n        // At this point, hullPointRecords contains the output points in clockwise order\n        // the points start with lowest-y,highest-x startPoint, and end at the same point\n        // Step 3b: remove duplicated startPointRecord from the end of the array\n        if (hullRecords.length > 2) {\n            hullRecords.pop();\n        }\n        // Step 4: find the lowest originalIndex record and put it at the beginning of hull\n        let lowestHullIndex; // the lowest originalIndex on the hull\n        let indexOfLowestHullIndexRecord = -1; // the index of the record with lowestHullIndex\n        for (let i = 0, n = hullRecords.length; i < n; i += 1) {\n            const currentHullIndex = hullRecords[i][1];\n            if (lowestHullIndex === undefined || currentHullIndex < lowestHullIndex) {\n                lowestHullIndex = currentHullIndex;\n                indexOfLowestHullIndexRecord = i;\n            }\n        }\n        let hullPointRecordsReordered = [];\n        if (indexOfLowestHullIndexRecord > 0) {\n            const newFirstChunk = hullRecords.slice(indexOfLowestHullIndexRecord);\n            const newSecondChunk = hullRecords.slice(0, indexOfLowestHullIndexRecord);\n            hullPointRecordsReordered = newFirstChunk.concat(newSecondChunk);\n        }\n        else {\n            hullPointRecordsReordered = hullRecords;\n        }\n        const hullPoints = [];\n        for (let i = 0, n = hullPointRecordsReordered.length; i < n; i += 1) {\n            hullPoints.push(hullPointRecordsReordered[i][0]);\n        }\n        return new Polyline(hullPoints);\n    }\n    equals(p) {\n        if (p == null) {\n            return false;\n        }\n        if (p.points.length !== this.points.length) {\n            return false;\n        }\n        return p.points.every((a, i) => a.equals(this.points[i]));\n    }\n    clone() {\n        return new Polyline(this.points.map((p) => p.clone()));\n    }\n    toJSON() {\n        return this.points.map((p) => p.toJSON());\n    }\n    serialize() {\n        return this.points.map((p) => `${p.serialize()}`).join(' ');\n    }\n}\n(function (Polyline) {\n    function isPolyline(instance) {\n        return instance != null && instance instanceof Polyline;\n    }\n    Polyline.isPolyline = isPolyline;\n})(Polyline || (Polyline = {}));\n(function (Polyline) {\n    function parse(svgString) {\n        const str = svgString.trim();\n        if (str === '') {\n            return new Polyline();\n        }\n        const points = [];\n        const coords = str.split(/\\s*,\\s*|\\s+/);\n        for (let i = 0, ii = coords.length; i < ii; i += 2) {\n            points.push({ x: +coords[i], y: +coords[i + 1] });\n        }\n        return new Polyline(points);\n    }\n    Polyline.parse = parse;\n})(Polyline || (Polyline = {}));\n//# sourceMappingURL=polyline.js.map","import { Line } from './line';\nimport { Point } from './point';\nimport { Polyline } from './polyline';\nimport { Rectangle } from './rectangle';\nimport { Geometry } from './geometry';\nexport class Curve extends Geometry {\n    constructor(start, controlPoint1, controlPoint2, end) {\n        super();\n        this.PRECISION = 3;\n        this.start = Point.create(start);\n        this.controlPoint1 = Point.create(controlPoint1);\n        this.controlPoint2 = Point.create(controlPoint2);\n        this.end = Point.create(end);\n    }\n    bbox() {\n        const start = this.start;\n        const controlPoint1 = this.controlPoint1;\n        const controlPoint2 = this.controlPoint2;\n        const end = this.end;\n        const x0 = start.x;\n        const y0 = start.y;\n        const x1 = controlPoint1.x;\n        const y1 = controlPoint1.y;\n        const x2 = controlPoint2.x;\n        const y2 = controlPoint2.y;\n        const x3 = end.x;\n        const y3 = end.y;\n        const points = []; // local extremes\n        const tvalues = []; // t values of local extremes\n        const bounds = [[], []];\n        let a;\n        let b;\n        let c;\n        let t;\n        let t1;\n        let t2;\n        let b2ac;\n        let sqrtb2ac;\n        for (let i = 0; i < 2; i += 1) {\n            if (i === 0) {\n                b = 6 * x0 - 12 * x1 + 6 * x2;\n                a = -3 * x0 + 9 * x1 - 9 * x2 + 3 * x3;\n                c = 3 * x1 - 3 * x0;\n            }\n            else {\n                b = 6 * y0 - 12 * y1 + 6 * y2;\n                a = -3 * y0 + 9 * y1 - 9 * y2 + 3 * y3;\n                c = 3 * y1 - 3 * y0;\n            }\n            if (Math.abs(a) < 1e-12) {\n                if (Math.abs(b) < 1e-12) {\n                    continue;\n                }\n                t = -c / b;\n                if (t > 0 && t < 1)\n                    tvalues.push(t);\n                continue;\n            }\n            b2ac = b * b - 4 * c * a;\n            sqrtb2ac = Math.sqrt(b2ac);\n            if (b2ac < 0)\n                continue;\n            t1 = (-b + sqrtb2ac) / (2 * a);\n            if (t1 > 0 && t1 < 1)\n                tvalues.push(t1);\n            t2 = (-b - sqrtb2ac) / (2 * a);\n            if (t2 > 0 && t2 < 1)\n                tvalues.push(t2);\n        }\n        let x;\n        let y;\n        let mt;\n        let j = tvalues.length;\n        const jlen = j;\n        while (j) {\n            j -= 1;\n            t = tvalues[j];\n            mt = 1 - t;\n            x =\n                mt * mt * mt * x0 +\n                    3 * mt * mt * t * x1 +\n                    3 * mt * t * t * x2 +\n                    t * t * t * x3;\n            bounds[0][j] = x;\n            y =\n                mt * mt * mt * y0 +\n                    3 * mt * mt * t * y1 +\n                    3 * mt * t * t * y2 +\n                    t * t * t * y3;\n            bounds[1][j] = y;\n            points[j] = { X: x, Y: y };\n        }\n        tvalues[jlen] = 0;\n        tvalues[jlen + 1] = 1;\n        points[jlen] = { X: x0, Y: y0 };\n        points[jlen + 1] = { X: x3, Y: y3 };\n        bounds[0][jlen] = x0;\n        bounds[1][jlen] = y0;\n        bounds[0][jlen + 1] = x3;\n        bounds[1][jlen + 1] = y3;\n        tvalues.length = jlen + 2;\n        bounds[0].length = jlen + 2;\n        bounds[1].length = jlen + 2;\n        points.length = jlen + 2;\n        const left = Math.min.apply(null, bounds[0]);\n        const top = Math.min.apply(null, bounds[1]);\n        const right = Math.max.apply(null, bounds[0]);\n        const bottom = Math.max.apply(null, bounds[1]);\n        return new Rectangle(left, top, right - left, bottom - top);\n    }\n    closestPoint(p, options = {}) {\n        return this.pointAtT(this.closestPointT(p, options));\n    }\n    closestPointLength(p, options = {}) {\n        const opts = this.getOptions(options);\n        return this.lengthAtT(this.closestPointT(p, opts), opts);\n    }\n    closestPointNormalizedLength(p, options = {}) {\n        const opts = this.getOptions(options);\n        const cpLength = this.closestPointLength(p, opts);\n        if (!cpLength) {\n            return 0;\n        }\n        const length = this.length(opts);\n        if (length === 0) {\n            return 0;\n        }\n        return cpLength / length;\n    }\n    closestPointT(p, options = {}) {\n        const precision = this.getPrecision(options);\n        const subdivisions = this.getDivisions(options);\n        const precisionRatio = Math.pow(10, -precision); // eslint-disable-line\n        let investigatedSubdivision = null;\n        let investigatedSubdivisionStartT = 0;\n        let investigatedSubdivisionEndT = 0;\n        let distFromStart = 0;\n        let distFromEnd = 0;\n        let chordLength = 0;\n        let minSumDist = null;\n        const count = subdivisions.length;\n        let piece = count > 0 ? 1 / count : 0;\n        subdivisions.forEach((division, i) => {\n            const startDist = division.start.distance(p);\n            const endDist = division.end.distance(p);\n            const sumDist = startDist + endDist;\n            if (minSumDist == null || sumDist < minSumDist) {\n                investigatedSubdivision = division;\n                investigatedSubdivisionStartT = i * piece;\n                investigatedSubdivisionEndT = (i + 1) * piece;\n                distFromStart = startDist;\n                distFromEnd = endDist;\n                minSumDist = sumDist;\n                chordLength = division.endpointDistance();\n            }\n        });\n        // Recursively divide investigated subdivision, until distance between\n        // baselinePoint and closest path endpoint is within `10^(-precision)`,\n        // then return the closest endpoint of that final subdivision.\n        // eslint-disable-next-line\n        while (true) {\n            // check if we have reached at least one required observed precision\n            // - calculated as: the difference in distances from point to start and end divided by the distance\n            // - note that this function is not monotonic = it doesn't converge stably but has \"teeth\"\n            // - the function decreases while one of the endpoints is fixed but \"jumps\" whenever we switch\n            // - this criterion works well for points lying far away from the curve\n            const startPrecisionRatio = distFromStart\n                ? Math.abs(distFromStart - distFromEnd) / distFromStart\n                : 0;\n            const endPrecisionRatio = distFromEnd != null\n                ? Math.abs(distFromStart - distFromEnd) / distFromEnd\n                : 0;\n            const hasRequiredPrecision = startPrecisionRatio < precisionRatio ||\n                endPrecisionRatio < precisionRatio;\n            // check if we have reached at least one required minimal distance\n            // - calculated as: the subdivision chord length multiplied by precisionRatio\n            // - calculation is relative so it will work for arbitrarily large/small curves and their subdivisions\n            // - this is a backup criterion that works well for points lying \"almost at\" the curve\n            const hasMiniStartDistance = distFromStart\n                ? distFromStart < chordLength * precisionRatio\n                : true;\n            const hasMiniEndDistance = distFromEnd\n                ? distFromEnd < chordLength * precisionRatio\n                : true;\n            const hasMiniDistance = hasMiniStartDistance || hasMiniEndDistance;\n            if (hasRequiredPrecision || hasMiniDistance) {\n                return distFromStart <= distFromEnd\n                    ? investigatedSubdivisionStartT\n                    : investigatedSubdivisionEndT;\n            }\n            // otherwise, set up for next iteration\n            const divided = investigatedSubdivision.divide(0.5);\n            piece /= 2;\n            const startDist1 = divided[0].start.distance(p);\n            const endDist1 = divided[0].end.distance(p);\n            const sumDist1 = startDist1 + endDist1;\n            const startDist2 = divided[1].start.distance(p);\n            const endDist2 = divided[1].end.distance(p);\n            const sumDist2 = startDist2 + endDist2;\n            if (sumDist1 <= sumDist2) {\n                investigatedSubdivision = divided[0];\n                investigatedSubdivisionEndT -= piece;\n                distFromStart = startDist1;\n                distFromEnd = endDist1;\n            }\n            else {\n                investigatedSubdivision = divided[1];\n                investigatedSubdivisionStartT += piece;\n                distFromStart = startDist2;\n                distFromEnd = endDist2;\n            }\n        }\n    }\n    closestPointTangent(p, options = {}) {\n        return this.tangentAtT(this.closestPointT(p, options));\n    }\n    containsPoint(p, options = {}) {\n        const polyline = this.toPolyline(options);\n        return polyline.containsPoint(p);\n    }\n    divideAt(ratio, options = {}) {\n        if (ratio <= 0) {\n            return this.divideAtT(0);\n        }\n        if (ratio >= 1) {\n            return this.divideAtT(1);\n        }\n        const t = this.tAt(ratio, options);\n        return this.divideAtT(t);\n    }\n    divideAtLength(length, options = {}) {\n        const t = this.tAtLength(length, options);\n        return this.divideAtT(t);\n    }\n    divide(t) {\n        return this.divideAtT(t);\n    }\n    divideAtT(t) {\n        const start = this.start;\n        const controlPoint1 = this.controlPoint1;\n        const controlPoint2 = this.controlPoint2;\n        const end = this.end;\n        if (t <= 0) {\n            return [\n                new Curve(start, start, start, start),\n                new Curve(start, controlPoint1, controlPoint2, end),\n            ];\n        }\n        if (t >= 1) {\n            return [\n                new Curve(start, controlPoint1, controlPoint2, end),\n                new Curve(end, end, end, end),\n            ];\n        }\n        const dividerPoints = this.getSkeletonPoints(t);\n        const startControl1 = dividerPoints.startControlPoint1;\n        const startControl2 = dividerPoints.startControlPoint2;\n        const divider = dividerPoints.divider;\n        const dividerControl1 = dividerPoints.dividerControlPoint1;\n        const dividerControl2 = dividerPoints.dividerControlPoint2;\n        return [\n            new Curve(start, startControl1, startControl2, divider),\n            new Curve(divider, dividerControl1, dividerControl2, end),\n        ];\n    }\n    endpointDistance() {\n        return this.start.distance(this.end);\n    }\n    getSkeletonPoints(t) {\n        const start = this.start;\n        const control1 = this.controlPoint1;\n        const control2 = this.controlPoint2;\n        const end = this.end;\n        // shortcuts for `t` values that are out of range\n        if (t <= 0) {\n            return {\n                startControlPoint1: start.clone(),\n                startControlPoint2: start.clone(),\n                divider: start.clone(),\n                dividerControlPoint1: control1.clone(),\n                dividerControlPoint2: control2.clone(),\n            };\n        }\n        if (t >= 1) {\n            return {\n                startControlPoint1: control1.clone(),\n                startControlPoint2: control2.clone(),\n                divider: end.clone(),\n                dividerControlPoint1: end.clone(),\n                dividerControlPoint2: end.clone(),\n            };\n        }\n        const midpoint1 = new Line(start, control1).pointAt(t);\n        const midpoint2 = new Line(control1, control2).pointAt(t);\n        const midpoint3 = new Line(control2, end).pointAt(t);\n        const subControl1 = new Line(midpoint1, midpoint2).pointAt(t);\n        const subControl2 = new Line(midpoint2, midpoint3).pointAt(t);\n        const divideLine = new Line(subControl1, subControl2).pointAt(t);\n        return {\n            startControlPoint1: midpoint1,\n            startControlPoint2: subControl1,\n            divider: divideLine,\n            dividerControlPoint1: subControl2,\n            dividerControlPoint2: midpoint3,\n        };\n    }\n    getSubdivisions(options = {}) {\n        const precision = this.getPrecision(options);\n        let subdivisions = [\n            new Curve(this.start, this.controlPoint1, this.controlPoint2, this.end),\n        ];\n        if (precision === 0) {\n            return subdivisions;\n        }\n        let previousLength = this.endpointDistance();\n        const precisionRatio = Math.pow(10, -precision); // eslint-disable-line\n        // Recursively divide curve at `t = 0.5`, until the difference between\n        // observed length at subsequent iterations is lower than precision.\n        let iteration = 0;\n        // eslint-disable-next-line\n        while (true) {\n            iteration += 1;\n            const divisions = [];\n            subdivisions.forEach((c) => {\n                // dividing at t = 0.5 (not at middle length!)\n                const divided = c.divide(0.5);\n                divisions.push(divided[0], divided[1]);\n            });\n            // measure new length\n            const length = divisions.reduce((memo, c) => memo + c.endpointDistance(), 0);\n            // check if we have reached required observed precision\n            // sine-like curves may have the same observed length in iteration 0 and 1 - skip iteration 1\n            // not a problem for further iterations because cubic curves cannot have more than two local extrema\n            // (i.e. cubic curves cannot intersect the baseline more than once)\n            // therefore two subsequent iterations cannot produce sampling with equal length\n            const ratio = length !== 0 ? (length - previousLength) / length : 0;\n            if (iteration > 1 && ratio < precisionRatio) {\n                return divisions;\n            }\n            subdivisions = divisions;\n            previousLength = length;\n        }\n    }\n    length(options = {}) {\n        const divisions = this.getDivisions(options);\n        return divisions.reduce((memo, c) => {\n            return memo + c.endpointDistance();\n        }, 0);\n    }\n    lengthAtT(t, options = {}) {\n        if (t <= 0) {\n            return 0;\n        }\n        const precision = options.precision === undefined ? this.PRECISION : options.precision;\n        const subCurve = this.divide(t)[0];\n        return subCurve.length({ precision });\n    }\n    pointAt(ratio, options = {}) {\n        if (ratio <= 0) {\n            return this.start.clone();\n        }\n        if (ratio >= 1) {\n            return this.end.clone();\n        }\n        const t = this.tAt(ratio, options);\n        return this.pointAtT(t);\n    }\n    pointAtLength(length, options = {}) {\n        const t = this.tAtLength(length, options);\n        return this.pointAtT(t);\n    }\n    pointAtT(t) {\n        if (t <= 0) {\n            return this.start.clone();\n        }\n        if (t >= 1) {\n            return this.end.clone();\n        }\n        return this.getSkeletonPoints(t).divider;\n    }\n    isDifferentiable() {\n        const start = this.start;\n        const control1 = this.controlPoint1;\n        const control2 = this.controlPoint2;\n        const end = this.end;\n        return !(start.equals(control1) &&\n            control1.equals(control2) &&\n            control2.equals(end));\n    }\n    tangentAt(ratio, options = {}) {\n        if (!this.isDifferentiable())\n            return null;\n        if (ratio < 0) {\n            ratio = 0; // eslint-disable-line\n        }\n        else if (ratio > 1) {\n            ratio = 1; // eslint-disable-line\n        }\n        const t = this.tAt(ratio, options);\n        return this.tangentAtT(t);\n    }\n    tangentAtLength(length, options = {}) {\n        if (!this.isDifferentiable()) {\n            return null;\n        }\n        const t = this.tAtLength(length, options);\n        return this.tangentAtT(t);\n    }\n    tangentAtT(t) {\n        if (!this.isDifferentiable()) {\n            return null;\n        }\n        if (t < 0) {\n            t = 0; // eslint-disable-line\n        }\n        if (t > 1) {\n            t = 1; // eslint-disable-line\n        }\n        const skeletonPoints = this.getSkeletonPoints(t);\n        const p1 = skeletonPoints.startControlPoint2;\n        const p2 = skeletonPoints.dividerControlPoint1;\n        const tangentStart = skeletonPoints.divider;\n        const tangentLine = new Line(p1, p2);\n        // move so that tangent line starts at the point requested\n        tangentLine.translate(tangentStart.x - p1.x, tangentStart.y - p1.y);\n        return tangentLine;\n    }\n    getPrecision(options = {}) {\n        return options.precision == null ? this.PRECISION : options.precision;\n    }\n    getDivisions(options = {}) {\n        if (options.subdivisions != null) {\n            return options.subdivisions;\n        }\n        const precision = this.getPrecision(options);\n        return this.getSubdivisions({ precision });\n    }\n    getOptions(options = {}) {\n        const precision = this.getPrecision(options);\n        const subdivisions = this.getDivisions(options);\n        return { precision, subdivisions };\n    }\n    tAt(ratio, options = {}) {\n        if (ratio <= 0) {\n            return 0;\n        }\n        if (ratio >= 1) {\n            return 1;\n        }\n        const opts = this.getOptions(options);\n        const total = this.length(opts);\n        const length = total * ratio;\n        return this.tAtLength(length, opts);\n    }\n    tAtLength(length, options = {}) {\n        let fromStart = true;\n        if (length < 0) {\n            fromStart = false;\n            length = -length; // eslint-disable-line\n        }\n        const precision = this.getPrecision(options);\n        const subdivisions = this.getDivisions(options);\n        const opts = { precision, subdivisions };\n        let investigatedSubdivision = null;\n        let investigatedSubdivisionStartT;\n        let investigatedSubdivisionEndT;\n        let baselinePointDistFromStart = 0;\n        let baselinePointDistFromEnd = 0;\n        let memo = 0;\n        const count = subdivisions.length;\n        let piece = count > 0 ? 1 / count : 0;\n        for (let i = 0; i < count; i += 1) {\n            const index = fromStart ? i : count - 1 - i;\n            const division = subdivisions[i];\n            const dist = division.endpointDistance();\n            if (length <= memo + dist) {\n                investigatedSubdivision = division;\n                investigatedSubdivisionStartT = index * piece;\n                investigatedSubdivisionEndT = (index + 1) * piece;\n                baselinePointDistFromStart = fromStart\n                    ? length - memo\n                    : dist + memo - length;\n                baselinePointDistFromEnd = fromStart\n                    ? dist + memo - length\n                    : length - memo;\n                break;\n            }\n            memo += dist;\n        }\n        if (investigatedSubdivision == null) {\n            return fromStart ? 1 : 0;\n        }\n        // note that precision affects what length is recorded\n        // (imprecise measurements underestimate length by up to 10^(-precision) of the precise length)\n        // e.g. at precision 1, the length may be underestimated by up to 10% and cause this function to return 1\n        const total = this.length(opts);\n        const precisionRatio = Math.pow(10, -precision); // eslint-disable-line\n        // recursively divide investigated subdivision:\n        // until distance between baselinePoint and closest path endpoint is within 10^(-precision)\n        // then return the closest endpoint of that final subdivision\n        // eslint-disable-next-line\n        while (true) {\n            let ratio;\n            ratio = total !== 0 ? baselinePointDistFromStart / total : 0;\n            if (ratio < precisionRatio) {\n                return investigatedSubdivisionStartT;\n            }\n            ratio = total !== 0 ? baselinePointDistFromEnd / total : 0;\n            if (ratio < precisionRatio) {\n                return investigatedSubdivisionEndT;\n            }\n            // otherwise, set up for next iteration\n            let newBaselinePointDistFromStart;\n            let newBaselinePointDistFromEnd;\n            const divided = investigatedSubdivision.divide(0.5);\n            piece /= 2;\n            const baseline1Length = divided[0].endpointDistance();\n            const baseline2Length = divided[1].endpointDistance();\n            if (baselinePointDistFromStart <= baseline1Length) {\n                investigatedSubdivision = divided[0];\n                investigatedSubdivisionEndT -= piece;\n                newBaselinePointDistFromStart = baselinePointDistFromStart;\n                newBaselinePointDistFromEnd =\n                    baseline1Length - newBaselinePointDistFromStart;\n            }\n            else {\n                investigatedSubdivision = divided[1];\n                investigatedSubdivisionStartT += piece;\n                newBaselinePointDistFromStart =\n                    baselinePointDistFromStart - baseline1Length;\n                newBaselinePointDistFromEnd =\n                    baseline2Length - newBaselinePointDistFromStart;\n            }\n            baselinePointDistFromStart = newBaselinePointDistFromStart;\n            baselinePointDistFromEnd = newBaselinePointDistFromEnd;\n        }\n    }\n    toPoints(options = {}) {\n        const subdivisions = this.getDivisions(options);\n        const points = [subdivisions[0].start.clone()];\n        subdivisions.forEach((c) => points.push(c.end.clone()));\n        return points;\n    }\n    toPolyline(options = {}) {\n        return new Polyline(this.toPoints(options));\n    }\n    scale(sx, sy, origin) {\n        this.start.scale(sx, sy, origin);\n        this.controlPoint1.scale(sx, sy, origin);\n        this.controlPoint2.scale(sx, sy, origin);\n        this.end.scale(sx, sy, origin);\n        return this;\n    }\n    rotate(angle, origin) {\n        this.start.rotate(angle, origin);\n        this.controlPoint1.rotate(angle, origin);\n        this.controlPoint2.rotate(angle, origin);\n        this.end.rotate(angle, origin);\n        return this;\n    }\n    translate(tx, ty) {\n        if (typeof tx === 'number') {\n            this.start.translate(tx, ty);\n            this.controlPoint1.translate(tx, ty);\n            this.controlPoint2.translate(tx, ty);\n            this.end.translate(tx, ty);\n        }\n        else {\n            this.start.translate(tx);\n            this.controlPoint1.translate(tx);\n            this.controlPoint2.translate(tx);\n            this.end.translate(tx);\n        }\n        return this;\n    }\n    equals(c) {\n        return (c != null &&\n            this.start.equals(c.start) &&\n            this.controlPoint1.equals(c.controlPoint1) &&\n            this.controlPoint2.equals(c.controlPoint2) &&\n            this.end.equals(c.end));\n    }\n    clone() {\n        return new Curve(this.start, this.controlPoint1, this.controlPoint2, this.end);\n    }\n    toJSON() {\n        return {\n            start: this.start.toJSON(),\n            controlPoint1: this.controlPoint1.toJSON(),\n            controlPoint2: this.controlPoint2.toJSON(),\n            end: this.end.toJSON(),\n        };\n    }\n    serialize() {\n        return [\n            this.start.serialize(),\n            this.controlPoint1.serialize(),\n            this.controlPoint2.serialize(),\n            this.end.serialize(),\n        ].join(' ');\n    }\n}\n(function (Curve) {\n    function isCurve(instance) {\n        return instance != null && instance instanceof Curve;\n    }\n    Curve.isCurve = isCurve;\n})(Curve || (Curve = {}));\n(function (Curve) {\n    function getFirstControlPoints(rhs) {\n        const n = rhs.length;\n        const x = []; // `x` is a solution vector.\n        const tmp = [];\n        let b = 2.0;\n        x[0] = rhs[0] / b;\n        // Decomposition and forward substitution.\n        for (let i = 1; i < n; i += 1) {\n            tmp[i] = 1 / b;\n            b = (i < n - 1 ? 4.0 : 3.5) - tmp[i];\n            x[i] = (rhs[i] - x[i - 1]) / b;\n        }\n        for (let i = 1; i < n; i += 1) {\n            // Backsubstitution.\n            x[n - i - 1] -= tmp[n - i] * x[n - i];\n        }\n        return x;\n    }\n    function getCurveControlPoints(points) {\n        const knots = points.map((p) => Point.clone(p));\n        const firstControlPoints = [];\n        const secondControlPoints = [];\n        const n = knots.length - 1;\n        // Special case: Bezier curve should be a straight line.\n        if (n === 1) {\n            // 3P1 = 2P0 + P3\n            firstControlPoints[0] = new Point((2 * knots[0].x + knots[1].x) / 3, (2 * knots[0].y + knots[1].y) / 3);\n            // P2 = 2P1  P0\n            secondControlPoints[0] = new Point(2 * firstControlPoints[0].x - knots[0].x, 2 * firstControlPoints[0].y - knots[0].y);\n            return [firstControlPoints, secondControlPoints];\n        }\n        // Calculate first Bezier control points.\n        // Right hand side vector.\n        const rhs = [];\n        // Set right hand side X values.\n        for (let i = 1; i < n - 1; i += 1) {\n            rhs[i] = 4 * knots[i].x + 2 * knots[i + 1].x;\n        }\n        rhs[0] = knots[0].x + 2 * knots[1].x;\n        rhs[n - 1] = (8 * knots[n - 1].x + knots[n].x) / 2.0;\n        // Get first control points X-values.\n        const x = getFirstControlPoints(rhs);\n        // Set right hand side Y values.\n        for (let i = 1; i < n - 1; i += 1) {\n            rhs[i] = 4 * knots[i].y + 2 * knots[i + 1].y;\n        }\n        rhs[0] = knots[0].y + 2 * knots[1].y;\n        rhs[n - 1] = (8 * knots[n - 1].y + knots[n].y) / 2.0;\n        // Get first control points Y-values.\n        const y = getFirstControlPoints(rhs);\n        // Fill output arrays.\n        for (let i = 0; i < n; i += 1) {\n            // First control point.\n            firstControlPoints.push(new Point(x[i], y[i]));\n            // Second control point.\n            if (i < n - 1) {\n                secondControlPoints.push(new Point(2 * knots[i + 1].x - x[i + 1], 2 * knots[i + 1].y - y[i + 1]));\n            }\n            else {\n                secondControlPoints.push(new Point((knots[n].x + x[n - 1]) / 2, (knots[n].y + y[n - 1]) / 2));\n            }\n        }\n        return [firstControlPoints, secondControlPoints];\n    }\n    function throughPoints(points) {\n        if (points == null || (Array.isArray(points) && points.length < 2)) {\n            throw new Error('At least 2 points are required');\n        }\n        const controlPoints = getCurveControlPoints(points);\n        const curves = [];\n        for (let i = 0, ii = controlPoints[0].length; i < ii; i += 1) {\n            const controlPoint1 = new Point(controlPoints[0][i].x, controlPoints[0][i].y);\n            const controlPoint2 = new Point(controlPoints[1][i].x, controlPoints[1][i].y);\n            curves.push(new Curve(points[i], controlPoint1, controlPoint2, points[i + 1]));\n        }\n        return curves;\n    }\n    Curve.throughPoints = throughPoints;\n})(Curve || (Curve = {}));\n//# sourceMappingURL=curve.js.map","import { Geometry } from '../geometry';\nexport class Segment extends Geometry {\n    constructor() {\n        super(...arguments);\n        this.isVisible = true;\n        this.isSegment = true;\n        this.isSubpathStart = false;\n    }\n    get end() {\n        return this.endPoint;\n    }\n    get start() {\n        if (this.previousSegment == null) {\n            throw new Error('Missing previous segment. (This segment cannot be the ' +\n                'first segment of a path, or segment has not yet been ' +\n                'added to a path.)');\n        }\n        return this.previousSegment.end;\n    }\n    closestPointT(p, options) {\n        if (this.closestPointNormalizedLength) {\n            return this.closestPointNormalizedLength(p);\n        }\n        throw new Error('Neither `closestPointT` nor `closestPointNormalizedLength` method is implemented.');\n    }\n    // eslint-disable-next-line\n    lengthAtT(t, options) {\n        if (t <= 0) {\n            return 0;\n        }\n        const length = this.length();\n        if (t >= 1) {\n            return length;\n        }\n        return length * t;\n    }\n    divideAtT(t) {\n        if (this.divideAt) {\n            return this.divideAt(t);\n        }\n        throw new Error('Neither `divideAtT` nor `divideAt` method is implemented.');\n    }\n    pointAtT(t) {\n        if (this.pointAt) {\n            return this.pointAt(t);\n        }\n        throw new Error('Neither `pointAtT` nor `pointAt` method is implemented.');\n    }\n    tangentAtT(t) {\n        if (this.tangentAt) {\n            return this.tangentAt(t);\n        }\n        throw new Error('Neither `tangentAtT` nor `tangentAt` method is implemented.');\n    }\n}\n//# sourceMappingURL=segment.js.map","import { Line } from '../line';\nimport { Point } from '../point';\nimport { Segment } from './segment';\nexport class LineTo extends Segment {\n    constructor(x, y) {\n        super();\n        if (Line.isLine(x)) {\n            this.endPoint = x.end.clone().round(2);\n        }\n        else {\n            this.endPoint = Point.create(x, y).round(2);\n        }\n    }\n    get type() {\n        return 'L';\n    }\n    get line() {\n        return new Line(this.start, this.end);\n    }\n    bbox() {\n        return this.line.bbox();\n    }\n    closestPoint(p) {\n        return this.line.closestPoint(p);\n    }\n    closestPointLength(p) {\n        return this.line.closestPointLength(p);\n    }\n    closestPointNormalizedLength(p) {\n        return this.line.closestPointNormalizedLength(p);\n    }\n    closestPointTangent(p) {\n        return this.line.closestPointTangent(p);\n    }\n    length() {\n        return this.line.length();\n    }\n    divideAt(ratio) {\n        const divided = this.line.divideAt(ratio);\n        return [new LineTo(divided[0]), new LineTo(divided[1])];\n    }\n    divideAtLength(length) {\n        const divided = this.line.divideAtLength(length);\n        return [new LineTo(divided[0]), new LineTo(divided[1])];\n    }\n    getSubdivisions() {\n        return [];\n    }\n    pointAt(ratio) {\n        return this.line.pointAt(ratio);\n    }\n    pointAtLength(length) {\n        return this.line.pointAtLength(length);\n    }\n    tangentAt(ratio) {\n        return this.line.tangentAt(ratio);\n    }\n    tangentAtLength(length) {\n        return this.line.tangentAtLength(length);\n    }\n    isDifferentiable() {\n        if (this.previousSegment == null) {\n            return false;\n        }\n        return !this.start.equals(this.end);\n    }\n    clone() {\n        return new LineTo(this.end);\n    }\n    scale(sx, sy, origin) {\n        this.end.scale(sx, sy, origin);\n        return this;\n    }\n    rotate(angle, origin) {\n        this.end.rotate(angle, origin);\n        return this;\n    }\n    translate(tx, ty) {\n        if (typeof tx === 'number') {\n            this.end.translate(tx, ty);\n        }\n        else {\n            this.end.translate(tx);\n        }\n        return this;\n    }\n    equals(s) {\n        return (this.type === s.type &&\n            this.start.equals(s.start) &&\n            this.end.equals(s.end));\n    }\n    toJSON() {\n        return {\n            type: this.type,\n            start: this.start.toJSON(),\n            end: this.end.toJSON(),\n        };\n    }\n    serialize() {\n        const end = this.end;\n        return `${this.type} ${end.x} ${end.y}`;\n    }\n}\n(function (LineTo) {\n    function create(...args) {\n        const len = args.length;\n        const arg0 = args[0];\n        // line provided\n        if (Line.isLine(arg0)) {\n            return new LineTo(arg0);\n        }\n        // points provided\n        if (Point.isPointLike(arg0)) {\n            if (len === 1) {\n                return new LineTo(arg0);\n            }\n            // poly-line segment\n            return args.map((arg) => new LineTo(arg));\n        }\n        // coordinates provided\n        if (len === 2) {\n            return new LineTo(+args[0], +args[1]);\n        }\n        // poly-line segment\n        const segments = [];\n        for (let i = 0; i < len; i += 2) {\n            const x = +args[i];\n            const y = +args[i + 1];\n            segments.push(new LineTo(x, y));\n        }\n        return segments;\n    }\n    LineTo.create = create;\n})(LineTo || (LineTo = {}));\n//# sourceMappingURL=lineto.js.map","import { Line } from '../line';\nimport { LineTo } from './lineto';\nimport { Segment } from './segment';\nexport class Close extends Segment {\n    get end() {\n        if (!this.subpathStartSegment) {\n            throw new Error('Missing subpath start segment. (This segment needs a subpath ' +\n                'start segment (e.g. MoveTo), or segment has not yet been added' +\n                ' to a path.)');\n        }\n        return this.subpathStartSegment.end;\n    }\n    get type() {\n        return 'Z';\n    }\n    get line() {\n        return new Line(this.start, this.end);\n    }\n    bbox() {\n        return this.line.bbox();\n    }\n    closestPoint(p) {\n        return this.line.closestPoint(p);\n    }\n    closestPointLength(p) {\n        return this.line.closestPointLength(p);\n    }\n    closestPointNormalizedLength(p) {\n        return this.line.closestPointNormalizedLength(p);\n    }\n    closestPointTangent(p) {\n        return this.line.closestPointTangent(p);\n    }\n    length() {\n        return this.line.length();\n    }\n    divideAt(ratio) {\n        const divided = this.line.divideAt(ratio);\n        return [\n            // do not actually cut into the segment, first divided part can stay as Z\n            divided[1].isDifferentiable() ? new LineTo(divided[0]) : this.clone(),\n            new LineTo(divided[1]),\n        ];\n    }\n    divideAtLength(length) {\n        const divided = this.line.divideAtLength(length);\n        return [\n            divided[1].isDifferentiable() ? new LineTo(divided[0]) : this.clone(),\n            new LineTo(divided[1]),\n        ];\n    }\n    getSubdivisions() {\n        return [];\n    }\n    pointAt(ratio) {\n        return this.line.pointAt(ratio);\n    }\n    pointAtLength(length) {\n        return this.line.pointAtLength(length);\n    }\n    tangentAt(ratio) {\n        return this.line.tangentAt(ratio);\n    }\n    tangentAtLength(length) {\n        return this.line.tangentAtLength(length);\n    }\n    isDifferentiable() {\n        if (!this.previousSegment || !this.subpathStartSegment) {\n            return false;\n        }\n        return !this.start.equals(this.end);\n    }\n    scale() {\n        return this;\n    }\n    rotate() {\n        return this;\n    }\n    translate() {\n        return this;\n    }\n    equals(s) {\n        return (this.type === s.type &&\n            this.start.equals(s.start) &&\n            this.end.equals(s.end));\n    }\n    clone() {\n        return new Close();\n    }\n    toJSON() {\n        return {\n            type: this.type,\n            start: this.start.toJSON(),\n            end: this.end.toJSON(),\n        };\n    }\n    serialize() {\n        return this.type;\n    }\n}\n(function (Close) {\n    function create() {\n        return new Close();\n    }\n    Close.create = create;\n})(Close || (Close = {}));\n//# sourceMappingURL=close.js.map","import { Line } from '../line';\nimport { Curve } from '../curve';\nimport { Point } from '../point';\nimport { LineTo } from './lineto';\nimport { Segment } from './segment';\nexport class MoveTo extends Segment {\n    constructor(x, y) {\n        super();\n        this.isVisible = false;\n        this.isSubpathStart = true;\n        if (Line.isLine(x) || Curve.isCurve(x)) {\n            this.endPoint = x.end.clone().round(2);\n        }\n        else {\n            this.endPoint = Point.create(x, y).round(2);\n        }\n    }\n    get start() {\n        throw new Error('Illegal access. Moveto segments should not need a start property.');\n    }\n    get type() {\n        return 'M';\n    }\n    bbox() {\n        return null;\n    }\n    closestPoint() {\n        return this.end.clone();\n    }\n    closestPointLength() {\n        return 0;\n    }\n    closestPointNormalizedLength() {\n        return 0;\n    }\n    closestPointT() {\n        return 1;\n    }\n    closestPointTangent() {\n        return null;\n    }\n    length() {\n        return 0;\n    }\n    lengthAtT() {\n        return 0;\n    }\n    divideAt() {\n        return [this.clone(), this.clone()];\n    }\n    divideAtLength() {\n        return [this.clone(), this.clone()];\n    }\n    getSubdivisions() {\n        return [];\n    }\n    pointAt() {\n        return this.end.clone();\n    }\n    pointAtLength() {\n        return this.end.clone();\n    }\n    pointAtT() {\n        return this.end.clone();\n    }\n    tangentAt() {\n        return null;\n    }\n    tangentAtLength() {\n        return null;\n    }\n    tangentAtT() {\n        return null;\n    }\n    isDifferentiable() {\n        return false;\n    }\n    scale(sx, sy, origin) {\n        this.end.scale(sx, sy, origin);\n        return this;\n    }\n    rotate(angle, origin) {\n        this.end.rotate(angle, origin);\n        return this;\n    }\n    translate(tx, ty) {\n        if (typeof tx === 'number') {\n            this.end.translate(tx, ty);\n        }\n        else {\n            this.end.translate(tx);\n        }\n        return this;\n    }\n    clone() {\n        return new MoveTo(this.end);\n    }\n    equals(s) {\n        return this.type === s.type && this.end.equals(s.end);\n    }\n    toJSON() {\n        return {\n            type: this.type,\n            end: this.end.toJSON(),\n        };\n    }\n    serialize() {\n        const end = this.end;\n        return `${this.type} ${end.x} ${end.y}`;\n    }\n}\n(function (MoveTo) {\n    function create(...args) {\n        const len = args.length;\n        const arg0 = args[0];\n        // line provided\n        if (Line.isLine(arg0)) {\n            return new MoveTo(arg0);\n        }\n        // curve provided\n        if (Curve.isCurve(arg0)) {\n            return new MoveTo(arg0);\n        }\n        // points provided\n        if (Point.isPointLike(arg0)) {\n            if (len === 1) {\n                return new MoveTo(arg0);\n            }\n            // this is a moveto-with-subsequent-poly-line segment\n            const segments = [];\n            // points come one by one\n            for (let i = 0; i < len; i += 1) {\n                if (i === 0) {\n                    segments.push(new MoveTo(args[i]));\n                }\n                else {\n                    segments.push(new LineTo(args[i]));\n                }\n            }\n            return segments;\n        }\n        // coordinates provided\n        if (len === 2) {\n            return new MoveTo(+args[0], +args[1]);\n        }\n        // this is a moveto-with-subsequent-poly-line segment\n        const segments = [];\n        for (let i = 0; i < len; i += 2) {\n            const x = +args[i];\n            const y = +args[i + 1];\n            if (i === 0) {\n                segments.push(new MoveTo(x, y));\n            }\n            else {\n                segments.push(new LineTo(x, y));\n            }\n        }\n        return segments;\n    }\n    MoveTo.create = create;\n})(MoveTo || (MoveTo = {}));\n//# sourceMappingURL=moveto.js.map","import { Curve } from '../curve';\nimport { Point } from '../point';\nimport { Segment } from './segment';\nexport class CurveTo extends Segment {\n    constructor(arg0, arg1, arg2, arg3, arg4, arg5) {\n        super();\n        if (Curve.isCurve(arg0)) {\n            this.controlPoint1 = arg0.controlPoint1.clone().round(2);\n            this.controlPoint2 = arg0.controlPoint2.clone().round(2);\n            this.endPoint = arg0.end.clone().round(2);\n        }\n        else if (typeof arg0 === 'number') {\n            this.controlPoint1 = new Point(arg0, arg1).round(2);\n            this.controlPoint2 = new Point(arg2, arg3).round(2);\n            this.endPoint = new Point(arg4, arg5).round(2);\n        }\n        else {\n            this.controlPoint1 = Point.create(arg0).round(2);\n            this.controlPoint2 = Point.create(arg1).round(2);\n            this.endPoint = Point.create(arg2).round(2);\n        }\n    }\n    get type() {\n        return 'C';\n    }\n    get curve() {\n        return new Curve(this.start, this.controlPoint1, this.controlPoint2, this.end);\n    }\n    bbox() {\n        return this.curve.bbox();\n    }\n    closestPoint(p) {\n        return this.curve.closestPoint(p);\n    }\n    closestPointLength(p) {\n        return this.curve.closestPointLength(p);\n    }\n    closestPointNormalizedLength(p) {\n        return this.curve.closestPointNormalizedLength(p);\n    }\n    closestPointTangent(p) {\n        return this.curve.closestPointTangent(p);\n    }\n    length() {\n        return this.curve.length();\n    }\n    divideAt(ratio, options = {}) {\n        // TODO: fix options\n        const divided = this.curve.divideAt(ratio, options);\n        return [new CurveTo(divided[0]), new CurveTo(divided[1])];\n    }\n    divideAtLength(length, options = {}) {\n        // TODO: fix options\n        const divided = this.curve.divideAtLength(length, options);\n        return [new CurveTo(divided[0]), new CurveTo(divided[1])];\n    }\n    divideAtT(t) {\n        const divided = this.curve.divideAtT(t);\n        return [new CurveTo(divided[0]), new CurveTo(divided[1])];\n    }\n    getSubdivisions() {\n        return [];\n    }\n    pointAt(ratio) {\n        return this.curve.pointAt(ratio);\n    }\n    pointAtLength(length) {\n        return this.curve.pointAtLength(length);\n    }\n    tangentAt(ratio) {\n        return this.curve.tangentAt(ratio);\n    }\n    tangentAtLength(length) {\n        return this.curve.tangentAtLength(length);\n    }\n    isDifferentiable() {\n        if (!this.previousSegment) {\n            return false;\n        }\n        const start = this.start;\n        const control1 = this.controlPoint1;\n        const control2 = this.controlPoint2;\n        const end = this.end;\n        return !(start.equals(control1) &&\n            control1.equals(control2) &&\n            control2.equals(end));\n    }\n    scale(sx, sy, origin) {\n        this.controlPoint1.scale(sx, sy, origin);\n        this.controlPoint2.scale(sx, sy, origin);\n        this.end.scale(sx, sy, origin);\n        return this;\n    }\n    rotate(angle, origin) {\n        this.controlPoint1.rotate(angle, origin);\n        this.controlPoint2.rotate(angle, origin);\n        this.end.rotate(angle, origin);\n        return this;\n    }\n    translate(tx, ty) {\n        if (typeof tx === 'number') {\n            this.controlPoint1.translate(tx, ty);\n            this.controlPoint2.translate(tx, ty);\n            this.end.translate(tx, ty);\n        }\n        else {\n            this.controlPoint1.translate(tx);\n            this.controlPoint2.translate(tx);\n            this.end.translate(tx);\n        }\n        return this;\n    }\n    equals(s) {\n        return (this.start.equals(s.start) &&\n            this.end.equals(s.end) &&\n            this.controlPoint1.equals(s.controlPoint1) &&\n            this.controlPoint2.equals(s.controlPoint2));\n    }\n    clone() {\n        return new CurveTo(this.controlPoint1, this.controlPoint2, this.end);\n    }\n    toJSON() {\n        return {\n            type: this.type,\n            start: this.start.toJSON(),\n            controlPoint1: this.controlPoint1.toJSON(),\n            controlPoint2: this.controlPoint2.toJSON(),\n            end: this.end.toJSON(),\n        };\n    }\n    serialize() {\n        const c1 = this.controlPoint1;\n        const c2 = this.controlPoint2;\n        const end = this.end;\n        return [this.type, c1.x, c1.y, c2.x, c2.y, end.x, end.y].join(' ');\n    }\n}\n(function (CurveTo) {\n    function create(...args) {\n        const len = args.length;\n        const arg0 = args[0];\n        // curve provided\n        if (Curve.isCurve(arg0)) {\n            return new CurveTo(arg0);\n        }\n        // points provided\n        if (Point.isPointLike(arg0)) {\n            if (len === 3) {\n                return new CurveTo(args[0], args[1], args[2]);\n            }\n            // this is a poly-bezier segment\n            const segments = [];\n            for (let i = 0; i < len; i += 3) {\n                segments.push(new CurveTo(args[i], args[i + 1], args[i + 2]));\n            }\n            return segments;\n        }\n        // coordinates provided\n        if (len === 6) {\n            return new CurveTo(args[0], args[1], args[2], args[3], args[4], args[5]);\n        }\n        // this is a poly-bezier segment\n        const segments = [];\n        for (let i = 0; i < len; i += 6) {\n            segments.push(new CurveTo(args[i], args[i + 1], args[i + 2], args[i + 3], args[i + 4], args[i + 5]));\n        }\n        return segments;\n    }\n    CurveTo.create = create;\n})(CurveTo || (CurveTo = {}));\n//# sourceMappingURL=curveto.js.map","import { GeometryUtil } from '../util';\nfunction rotate(x, y, rad) {\n    return {\n        x: x * Math.cos(rad) - y * Math.sin(rad),\n        y: x * Math.sin(rad) + y * Math.cos(rad),\n    };\n}\nfunction q2c(x1, y1, ax, ay, x2, y2) {\n    const v13 = 1 / 3;\n    const v23 = 2 / 3;\n    return [\n        v13 * x1 + v23 * ax,\n        v13 * y1 + v23 * ay,\n        v13 * x2 + v23 * ax,\n        v13 * y2 + v23 * ay,\n        x2,\n        y2,\n    ];\n}\nfunction a2c(x1, y1, rx, ry, angle, largeArcFlag, sweepFlag, x2, y2, recursive) {\n    // for more information of where this math came from visit:\n    // http://www.w3.org/TR/SVG11/implnote.html#ArcImplementationNotes\n    const v120 = (Math.PI * 120) / 180;\n    const rad = (Math.PI / 180) * (+angle || 0);\n    let res = [];\n    let xy;\n    let f1;\n    let f2;\n    let cx;\n    let cy;\n    if (!recursive) {\n        xy = rotate(x1, y1, -rad);\n        x1 = xy.x; // eslint-disable-line\n        y1 = xy.y; // eslint-disable-line\n        xy = rotate(x2, y2, -rad);\n        x2 = xy.x; // eslint-disable-line\n        y2 = xy.y; // eslint-disable-line\n        const x = (x1 - x2) / 2;\n        const y = (y1 - y2) / 2;\n        let h = (x * x) / (rx * rx) + (y * y) / (ry * ry);\n        if (h > 1) {\n            h = Math.sqrt(h);\n            rx = h * rx; // eslint-disable-line\n            ry = h * ry; // eslint-disable-line\n        }\n        const rx2 = rx * rx;\n        const ry2 = ry * ry;\n        const k = (largeArcFlag === sweepFlag ? -1 : 1) *\n            Math.sqrt(Math.abs((rx2 * ry2 - rx2 * y * y - ry2 * x * x) / (rx2 * y * y + ry2 * x * x)));\n        cx = (k * rx * y) / ry + (x1 + x2) / 2;\n        cy = (k * -ry * x) / rx + (y1 + y2) / 2;\n        f1 = Math.asin((y1 - cy) / ry);\n        f2 = Math.asin((y2 - cy) / ry);\n        f1 = x1 < cx ? Math.PI - f1 : f1;\n        f2 = x2 < cx ? Math.PI - f2 : f2;\n        if (f1 < 0) {\n            f1 = Math.PI * 2 + f1;\n        }\n        if (f2 < 0) {\n            f2 = Math.PI * 2 + f2;\n        }\n        if (sweepFlag && f1 > f2) {\n            f1 -= Math.PI * 2;\n        }\n        if (!sweepFlag && f2 > f1) {\n            f2 -= Math.PI * 2;\n        }\n    }\n    else {\n        f1 = recursive[0];\n        f2 = recursive[1];\n        cx = recursive[2];\n        cy = recursive[3];\n    }\n    let df = f2 - f1;\n    if (Math.abs(df) > v120) {\n        const f2old = f2;\n        const x2old = x2;\n        const y2old = y2;\n        f2 = f1 + v120 * (sweepFlag && f2 > f1 ? 1 : -1);\n        x2 = cx + rx * Math.cos(f2); // eslint-disable-line\n        y2 = cy + ry * Math.sin(f2); // eslint-disable-line\n        res = a2c(x2, y2, rx, ry, angle, 0, sweepFlag, x2old, y2old, [\n            f2,\n            f2old,\n            cx,\n            cy,\n        ]);\n    }\n    df = f2 - f1;\n    const c1 = Math.cos(f1);\n    const s1 = Math.sin(f1);\n    const c2 = Math.cos(f2);\n    const s2 = Math.sin(f2);\n    const t = Math.tan(df / 4);\n    const hx = (4 / 3) * (rx * t);\n    const hy = (4 / 3) * (ry * t);\n    const m1 = [x1, y1];\n    const m2 = [x1 + hx * s1, y1 - hy * c1];\n    const m3 = [x2 + hx * s2, y2 - hy * c2];\n    const m4 = [x2, y2];\n    m2[0] = 2 * m1[0] - m2[0];\n    m2[1] = 2 * m1[1] - m2[1];\n    if (recursive) {\n        return [m2, m3, m4].concat(res);\n    }\n    {\n        res = [m2, m3, m4].concat(res).join().split(',');\n        const newres = [];\n        const ii = res.length;\n        for (let i = 0; i < ii; i += 1) {\n            newres[i] =\n                i % 2\n                    ? rotate(+res[i - 1], +res[i], rad).y\n                    : rotate(+res[i], +res[i + 1], rad).x;\n        }\n        return newres;\n    }\n}\nfunction parse(pathData) {\n    if (!pathData) {\n        return null;\n    }\n    const spaces = '\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029';\n    // https://regexper.com/#%28%5Ba-z%5D%29%5B%5Cs%2C%5D*%28%28-%3F%5Cd*%5C.%3F%5C%5Cd*%28%3F%3Ae%5B%5C-%2B%5D%3F%5Cd%2B%29%3F%5B%5Cs%5D*%2C%3F%5B%5Cs%5D*%29%2B%29\n    const segmentReg = new RegExp(`([a-z])[${spaces},]*((-?\\\\d*\\\\.?\\\\d*(?:e[\\\\-+]?\\\\d+)?[${spaces}]*,?[${spaces}]*)+)`, // eslint-disable-line\n    'ig');\n    // https://regexper.com/#%28-%3F%5Cd*%5C.%3F%5Cd*%28%3F%3Ae%5B%5C-%2B%5D%3F%5Cd%2B%29%3F%29%5B%5Cs%5D*%2C%3F%5B%5Cs%5D*\n    const commandParamReg = new RegExp(\n    // eslint-disable-next-line\n    `(-?\\\\d*\\\\.?\\\\d*(?:e[\\\\-+]?\\\\d+)?)[${spaces}]*,?[${spaces}]*`, 'ig');\n    const paramsCount = {\n        a: 7,\n        c: 6,\n        h: 1,\n        l: 2,\n        m: 2,\n        q: 4,\n        s: 4,\n        t: 2,\n        v: 1,\n        z: 0,\n    };\n    const segmetns = [];\n    pathData.replace(segmentReg, (input, cmd, args) => {\n        const params = [];\n        let command = cmd.toLowerCase();\n        args.replace(commandParamReg, (a, b) => {\n            if (b) {\n                params.push(+b);\n            }\n            return a;\n        });\n        if (command === 'm' && params.length > 2) {\n            segmetns.push([cmd, ...params.splice(0, 2)]);\n            command = 'l';\n            cmd = cmd === 'm' ? 'l' : 'L'; // eslint-disable-line\n        }\n        const count = paramsCount[command];\n        while (params.length >= count) {\n            segmetns.push([cmd, ...params.splice(0, count)]);\n            if (!count) {\n                break;\n            }\n        }\n        return input;\n    });\n    return segmetns;\n}\nfunction abs(pathString) {\n    const pathArray = parse(pathString);\n    // if invalid string, return 'M 0 0'\n    if (!pathArray || !pathArray.length) {\n        return [['M', 0, 0]];\n    }\n    let x = 0;\n    let y = 0;\n    let mx = 0;\n    let my = 0;\n    const segments = [];\n    for (let i = 0, ii = pathArray.length; i < ii; i += 1) {\n        const r = [];\n        segments.push(r);\n        const segment = pathArray[i];\n        const command = segment[0];\n        if (command !== command.toUpperCase()) {\n            r[0] = command.toUpperCase();\n            switch (r[0]) {\n                case 'A':\n                    r[1] = segment[1];\n                    r[2] = segment[2];\n                    r[3] = segment[3];\n                    r[4] = segment[4];\n                    r[5] = segment[5];\n                    r[6] = +segment[6] + x;\n                    r[7] = +segment[7] + y;\n                    break;\n                case 'V':\n                    r[1] = +segment[1] + y;\n                    break;\n                case 'H':\n                    r[1] = +segment[1] + x;\n                    break;\n                case 'M':\n                    mx = +segment[1] + x;\n                    my = +segment[2] + y;\n                    for (let j = 1, jj = segment.length; j < jj; j += 1) {\n                        r[j] = +segment[j] + (j % 2 ? x : y);\n                    }\n                    break;\n                default:\n                    for (let j = 1, jj = segment.length; j < jj; j += 1) {\n                        r[j] = +segment[j] + (j % 2 ? x : y);\n                    }\n                    break;\n            }\n        }\n        else {\n            for (let j = 0, jj = segment.length; j < jj; j += 1) {\n                r[j] = segment[j];\n            }\n        }\n        switch (r[0]) {\n            case 'Z':\n                x = +mx;\n                y = +my;\n                break;\n            case 'H':\n                x = r[1];\n                break;\n            case 'V':\n                y = r[1];\n                break;\n            case 'M':\n                mx = r[r.length - 2];\n                my = r[r.length - 1];\n                x = r[r.length - 2];\n                y = r[r.length - 1];\n                break;\n            default:\n                x = r[r.length - 2];\n                y = r[r.length - 1];\n                break;\n        }\n    }\n    return segments;\n}\nfunction normalize(path) {\n    const pathArray = abs(path);\n    const attrs = { x: 0, y: 0, bx: 0, by: 0, X: 0, Y: 0, qx: null, qy: null };\n    function processPath(path, d, pcom) {\n        let nx;\n        let ny;\n        if (!path) {\n            return ['C', d.x, d.y, d.x, d.y, d.x, d.y];\n        }\n        if (!(path[0] in { T: 1, Q: 1 })) {\n            d.qx = null;\n            d.qy = null;\n        }\n        switch (path[0]) {\n            case 'M':\n                d.X = path[1];\n                d.Y = path[2];\n                break;\n            case 'A':\n                if (parseFloat(path[1]) === 0 || parseFloat(path[2]) === 0) {\n                    // https://www.w3.org/TR/SVG/paths.html#ArcOutOfRangeParameters\n                    // \"If either rx or ry is 0, then this arc is treated as a\n                    // straight line segment (a \"lineto\") joining the endpoints.\"\n                    return ['L', path[6], path[7]];\n                }\n                return ['C'].concat(a2c.apply(0, [d.x, d.y].concat(path.slice(1))));\n            case 'S':\n                if (pcom === 'C' || pcom === 'S') {\n                    // In 'S' case we have to take into account, if the previous command is C/S.\n                    nx = d.x * 2 - d.bx; // And reflect the previous\n                    ny = d.y * 2 - d.by; // command's control point relative to the current point.\n                }\n                else {\n                    // or some else or nothing\n                    nx = d.x;\n                    ny = d.y;\n                }\n                return ['C', nx, ny].concat(path.slice(1));\n            case 'T':\n                if (pcom === 'Q' || pcom === 'T') {\n                    // In 'T' case we have to take into account, if the previous command is Q/T.\n                    d.qx = d.x * 2 - d.qx; // And make a reflection similar\n                    d.qy = d.y * 2 - d.qy; // to case 'S'.\n                }\n                else {\n                    // or something else or nothing\n                    d.qx = d.x;\n                    d.qy = d.y;\n                }\n                return ['C'].concat(q2c(d.x, d.y, d.qx, d.qy, path[1], path[2]));\n            case 'Q':\n                d.qx = path[1];\n                d.qy = path[2];\n                return ['C'].concat(q2c(d.x, d.y, path[1], path[2], path[3], path[4]));\n            case 'H':\n                return ['L'].concat(path[1], d.y);\n            case 'V':\n                return ['L'].concat(d.x, path[1]);\n            case 'L':\n                break;\n            case 'Z':\n                break;\n            default:\n                break;\n        }\n        return path;\n    }\n    function fixArc(pp, i) {\n        if (pp[i].length > 7) {\n            pp[i].shift();\n            const pi = pp[i];\n            while (pi.length) {\n                // if created multiple 'C's, their original seg is saved\n                commands[i] = 'A';\n                i += 1; // eslint-disable-line\n                pp.splice(i, 0, ['C'].concat(pi.splice(0, 6)));\n            }\n            pp.splice(i, 1);\n            ii = pathArray.length;\n        }\n    }\n    const commands = []; // path commands of original path p\n    let prevCommand = ''; // holder for previous path command of original path\n    let ii = pathArray.length;\n    for (let i = 0; i < ii; i += 1) {\n        let command = ''; // temporary holder for original path command\n        if (pathArray[i]) {\n            command = pathArray[i][0]; // save current path command\n        }\n        if (command !== 'C') {\n            // C is not saved yet, because it may be result of conversion\n            commands[i] = command; // Save current path command\n            if (i > 0) {\n                prevCommand = commands[i - 1]; // Get previous path command pcom\n            }\n        }\n        // Previous path command is inputted to processPath\n        pathArray[i] = processPath(pathArray[i], attrs, prevCommand);\n        if (commands[i] !== 'A' && command === 'C') {\n            commands[i] = 'C'; // 'A' is the only command\n        }\n        // which may produce multiple 'C's\n        // so we have to make sure that 'C' is also 'C' in original path\n        fixArc(pathArray, i); // fixArc adds also the right amount of 'A's to pcoms\n        const seg = pathArray[i];\n        const seglen = seg.length;\n        attrs.x = seg[seglen - 2];\n        attrs.y = seg[seglen - 1];\n        attrs.bx = parseFloat(seg[seglen - 4]) || attrs.x;\n        attrs.by = parseFloat(seg[seglen - 3]) || attrs.y;\n    }\n    // make sure normalized path data string starts with an M segment\n    if (!pathArray[0][0] || pathArray[0][0] !== 'M') {\n        pathArray.unshift(['M', 0, 0]);\n    }\n    return pathArray;\n}\n/**\n * Converts provided SVG path data string into a normalized path data string.\n *\n * The normalization uses a restricted subset of path commands; all segments\n * are translated into lineto, curveto, moveto, and closepath segments.\n *\n * Relative path commands are changed into their absolute counterparts,\n * and chaining of coordinates is disallowed.\n *\n * The function will always return a valid path data string; if an input\n * string cannot be normalized, 'M 0 0' is returned.\n */\nexport function normalizePathData(pathData) {\n    return normalize(pathData)\n        .map((segment) => segment.map((item) => typeof item === 'string' ? item : GeometryUtil.round(item, 2)))\n        .join(',')\n        .split(',')\n        .join(' ');\n}\n//# sourceMappingURL=normalize.js.map","import { GeometryUtil } from '../util';\nimport * as PathUtil from './util';\nimport { Line } from '../line';\nimport { Point } from '../point';\nimport { Curve } from '../curve';\nimport { Polyline } from '../polyline';\nimport { Rectangle } from '../rectangle';\nimport { Geometry } from '../geometry';\nimport { Close } from './close';\nimport { LineTo } from './lineto';\nimport { MoveTo } from './moveto';\nimport { CurveTo } from './curveto';\nimport { normalizePathData } from './normalize';\nexport class Path extends Geometry {\n    constructor(args) {\n        super();\n        this.PRECISION = 3;\n        this.segments = [];\n        if (Array.isArray(args)) {\n            if (Line.isLine(args[0]) || Curve.isCurve(args[0])) {\n                let previousObj = null;\n                const arr = args;\n                arr.forEach((o, i) => {\n                    if (i === 0) {\n                        this.appendSegment(Path.createSegment('M', o.start));\n                    }\n                    if (previousObj != null && !previousObj.end.equals(o.start)) {\n                        this.appendSegment(Path.createSegment('M', o.start));\n                    }\n                    if (Line.isLine(o)) {\n                        this.appendSegment(Path.createSegment('L', o.end));\n                    }\n                    else if (Curve.isCurve(o)) {\n                        this.appendSegment(Path.createSegment('C', o.controlPoint1, o.controlPoint2, o.end));\n                    }\n                    previousObj = o;\n                });\n            }\n            else {\n                const arr = args;\n                arr.forEach((s) => {\n                    if (s.isSegment) {\n                        this.appendSegment(s);\n                    }\n                });\n            }\n        }\n        else if (args != null) {\n            if (Line.isLine(args)) {\n                this.appendSegment(Path.createSegment('M', args.start));\n                this.appendSegment(Path.createSegment('L', args.end));\n            }\n            else if (Curve.isCurve(args)) {\n                this.appendSegment(Path.createSegment('M', args.start));\n                this.appendSegment(Path.createSegment('C', args.controlPoint1, args.controlPoint2, args.end));\n            }\n            else if (Polyline.isPolyline(args)) {\n                if (args.points && args.points.length) {\n                    args.points.forEach((point, index) => {\n                        const segment = index === 0\n                            ? Path.createSegment('M', point)\n                            : Path.createSegment('L', point);\n                        this.appendSegment(segment);\n                    });\n                }\n            }\n            else if (args.isSegment) {\n                this.appendSegment(args);\n            }\n        }\n    }\n    get start() {\n        const segments = this.segments;\n        const count = segments.length;\n        if (count === 0) {\n            return null;\n        }\n        for (let i = 0; i < count; i += 1) {\n            const segment = segments[i];\n            if (segment.isVisible) {\n                return segment.start;\n            }\n        }\n        // if no visible segment, return last segment end point\n        return segments[count - 1].end;\n    }\n    get end() {\n        const segments = this.segments;\n        const count = segments.length;\n        if (count === 0) {\n            return null;\n        }\n        for (let i = count - 1; i >= 0; i -= 1) {\n            const segment = segments[i];\n            if (segment.isVisible) {\n                return segment.end;\n            }\n        }\n        // if no visible segment, return last segment end point\n        return segments[count - 1].end;\n    }\n    moveTo(...args) {\n        return this.appendSegment(MoveTo.create.call(null, ...args));\n    }\n    lineTo(...args) {\n        return this.appendSegment(LineTo.create.call(null, ...args));\n    }\n    curveTo(...args) {\n        return this.appendSegment(CurveTo.create.call(null, ...args));\n    }\n    arcTo(rx, ry, xAxisRotation, largeArcFlag, sweepFlag, endX, endY) {\n        const start = this.end || new Point();\n        const points = typeof endX === 'number'\n            ? PathUtil.arcToCurves(start.x, start.y, rx, ry, xAxisRotation, largeArcFlag, sweepFlag, endX, endY)\n            : PathUtil.arcToCurves(start.x, start.y, rx, ry, xAxisRotation, largeArcFlag, sweepFlag, endX.x, endX.y);\n        if (points != null) {\n            for (let i = 0, ii = points.length; i < ii; i += 6) {\n                this.curveTo(points[i], points[i + 1], points[i + 2], points[i + 3], points[i + 4], points[i + 5]);\n            }\n        }\n        return this;\n    }\n    quadTo(x1, y1, x, y) {\n        const start = this.end || new Point();\n        const data = ['M', start.x, start.y];\n        if (typeof x1 === 'number') {\n            data.push('Q', x1, y1, x, y);\n        }\n        else {\n            const p = y1;\n            data.push(`Q`, x1.x, x1.y, p.x, p.y);\n        }\n        const path = Path.parse(data.join(' '));\n        this.appendSegment(path.segments.slice(1));\n        return this;\n    }\n    close() {\n        return this.appendSegment(Close.create());\n    }\n    drawPoints(points, options = {}) {\n        const raw = PathUtil.drawPoints(points, options);\n        const sub = Path.parse(raw);\n        if (sub && sub.segments) {\n            this.appendSegment(sub.segments);\n        }\n    }\n    bbox() {\n        const segments = this.segments;\n        const count = segments.length;\n        if (count === 0) {\n            return null;\n        }\n        let bbox;\n        for (let i = 0; i < count; i += 1) {\n            const segment = segments[i];\n            if (segment.isVisible) {\n                const segmentBBox = segment.bbox();\n                if (segmentBBox != null) {\n                    bbox = bbox ? bbox.union(segmentBBox) : segmentBBox;\n                }\n            }\n        }\n        if (bbox != null) {\n            return bbox;\n        }\n        // if the path has only invisible elements, return end point of last segment\n        const lastSegment = segments[count - 1];\n        return new Rectangle(lastSegment.end.x, lastSegment.end.y, 0, 0);\n    }\n    appendSegment(seg) {\n        const count = this.segments.length;\n        let previousSegment = count !== 0 ? this.segments[count - 1] : null;\n        let currentSegment;\n        const nextSegment = null;\n        if (Array.isArray(seg)) {\n            for (let i = 0, ii = seg.length; i < ii; i += 1) {\n                const segment = seg[i];\n                currentSegment = this.prepareSegment(segment, previousSegment, nextSegment);\n                this.segments.push(currentSegment);\n                previousSegment = currentSegment;\n            }\n        }\n        else if (seg != null && seg.isSegment) {\n            currentSegment = this.prepareSegment(seg, previousSegment, nextSegment);\n            this.segments.push(currentSegment);\n        }\n        return this;\n    }\n    insertSegment(index, seg) {\n        const count = this.segments.length;\n        if (index < 0) {\n            index = count + index + 1; // eslint-disable-line\n        }\n        if (index > count || index < 0) {\n            throw new Error('Index out of range.');\n        }\n        let currentSegment;\n        let previousSegment = null;\n        let nextSegment = null;\n        if (count !== 0) {\n            if (index >= 1) {\n                previousSegment = this.segments[index - 1];\n                nextSegment = previousSegment.nextSegment;\n            }\n            else {\n                previousSegment = null;\n                nextSegment = this.segments[0];\n            }\n        }\n        if (!Array.isArray(seg)) {\n            currentSegment = this.prepareSegment(seg, previousSegment, nextSegment);\n            this.segments.splice(index, 0, currentSegment);\n        }\n        else {\n            for (let i = 0, ii = seg.length; i < ii; i += 1) {\n                const segment = seg[i];\n                currentSegment = this.prepareSegment(segment, previousSegment, nextSegment);\n                this.segments.splice(index + i, 0, currentSegment);\n                previousSegment = currentSegment;\n            }\n        }\n        return this;\n    }\n    removeSegment(index) {\n        const idx = this.fixIndex(index);\n        const removedSegment = this.segments.splice(idx, 1)[0];\n        const previousSegment = removedSegment.previousSegment;\n        const nextSegment = removedSegment.nextSegment;\n        // link the previous and next segments together (if present)\n        if (previousSegment) {\n            previousSegment.nextSegment = nextSegment;\n        }\n        if (nextSegment) {\n            nextSegment.previousSegment = previousSegment;\n        }\n        if (removedSegment.isSubpathStart && nextSegment) {\n            this.updateSubpathStartSegment(nextSegment);\n        }\n        return removedSegment;\n    }\n    replaceSegment(index, seg) {\n        const idx = this.fixIndex(index);\n        let currentSegment;\n        const replacedSegment = this.segments[idx];\n        let previousSegment = replacedSegment.previousSegment;\n        const nextSegment = replacedSegment.nextSegment;\n        let updateSubpathStart = replacedSegment.isSubpathStart;\n        if (!Array.isArray(seg)) {\n            currentSegment = this.prepareSegment(seg, previousSegment, nextSegment);\n            this.segments.splice(idx, 1, currentSegment);\n            if (updateSubpathStart && currentSegment.isSubpathStart) {\n                // already updated by `prepareSegment`\n                updateSubpathStart = false;\n            }\n        }\n        else {\n            this.segments.splice(index, 1);\n            for (let i = 0, ii = seg.length; i < ii; i += 1) {\n                const segment = seg[i];\n                currentSegment = this.prepareSegment(segment, previousSegment, nextSegment);\n                this.segments.splice(index + i, 0, currentSegment);\n                previousSegment = currentSegment;\n                if (updateSubpathStart && currentSegment.isSubpathStart) {\n                    updateSubpathStart = false;\n                }\n            }\n        }\n        if (updateSubpathStart && nextSegment) {\n            this.updateSubpathStartSegment(nextSegment);\n        }\n    }\n    getSegment(index) {\n        const idx = this.fixIndex(index);\n        return this.segments[idx];\n    }\n    fixIndex(index) {\n        const length = this.segments.length;\n        if (length === 0) {\n            throw new Error('Path has no segments.');\n        }\n        let i = index;\n        while (i < 0) {\n            i = length + i;\n        }\n        if (i >= length || i < 0) {\n            throw new Error('Index out of range.');\n        }\n        return i;\n    }\n    segmentAt(ratio, options = {}) {\n        const index = this.segmentIndexAt(ratio, options);\n        if (!index) {\n            return null;\n        }\n        return this.getSegment(index);\n    }\n    segmentAtLength(length, options = {}) {\n        const index = this.segmentIndexAtLength(length, options);\n        if (!index)\n            return null;\n        return this.getSegment(index);\n    }\n    segmentIndexAt(ratio, options = {}) {\n        if (this.segments.length === 0) {\n            return null;\n        }\n        const rate = GeometryUtil.clamp(ratio, 0, 1);\n        const opt = this.getOptions(options);\n        const len = this.length(opt);\n        const length = len * rate;\n        return this.segmentIndexAtLength(length, opt);\n    }\n    segmentIndexAtLength(length, options = {}) {\n        const count = this.segments.length;\n        if (count === 0) {\n            return null;\n        }\n        let fromStart = true;\n        if (length < 0) {\n            fromStart = false;\n            length = -length; // eslint-disable-line\n        }\n        const precision = this.getPrecision(options);\n        const segmentSubdivisions = this.getSubdivisions(options);\n        let memo = 0;\n        let lastVisibleIndex = null;\n        for (let i = 0; i < count; i += 1) {\n            const index = fromStart ? i : count - 1 - i;\n            const segment = this.segments[index];\n            const subdivisions = segmentSubdivisions[index];\n            const len = segment.length({ precision, subdivisions });\n            if (segment.isVisible) {\n                if (length <= memo + len) {\n                    return index;\n                }\n                lastVisibleIndex = index;\n            }\n            memo += len;\n        }\n        // If length requested is higher than the length of the path, return\n        // last visible segment index. If no visible segment, return null.\n        return lastVisibleIndex;\n    }\n    getSegmentSubdivisions(options = {}) {\n        const precision = this.getPrecision(options);\n        const segmentSubdivisions = [];\n        for (let i = 0, ii = this.segments.length; i < ii; i += 1) {\n            const segment = this.segments[i];\n            const subdivisions = segment.getSubdivisions({ precision });\n            segmentSubdivisions.push(subdivisions);\n        }\n        return segmentSubdivisions;\n    }\n    updateSubpathStartSegment(segment) {\n        let previous = segment.previousSegment;\n        let current = segment;\n        while (current && !current.isSubpathStart) {\n            // assign previous segment's subpath start segment to this segment\n            if (previous != null) {\n                current.subpathStartSegment = previous.subpathStartSegment;\n            }\n            else {\n                current.subpathStartSegment = null;\n            }\n            previous = current;\n            current = current.nextSegment;\n        }\n    }\n    prepareSegment(segment, previousSegment, nextSegment) {\n        segment.previousSegment = previousSegment;\n        segment.nextSegment = nextSegment;\n        if (previousSegment != null) {\n            previousSegment.nextSegment = segment;\n        }\n        if (nextSegment != null) {\n            nextSegment.previousSegment = segment;\n        }\n        let updateSubpathStart = segment;\n        if (segment.isSubpathStart) {\n            // move to\n            segment.subpathStartSegment = segment;\n            updateSubpathStart = nextSegment;\n        }\n        // assign previous segment's subpath start (or self if it is a subpath start) to subsequent segments\n        if (updateSubpathStart != null) {\n            this.updateSubpathStartSegment(updateSubpathStart);\n        }\n        return segment;\n    }\n    closestPoint(p, options = {}) {\n        const t = this.closestPointT(p, options);\n        if (!t) {\n            return null;\n        }\n        return this.pointAtT(t);\n    }\n    closestPointLength(p, options = {}) {\n        const opts = this.getOptions(options);\n        const t = this.closestPointT(p, opts);\n        if (!t) {\n            return 0;\n        }\n        return this.lengthAtT(t, opts);\n    }\n    closestPointNormalizedLength(p, options = {}) {\n        const opts = this.getOptions(options);\n        const cpLength = this.closestPointLength(p, opts);\n        if (cpLength === 0) {\n            return 0;\n        }\n        const length = this.length(opts);\n        if (length === 0) {\n            return 0;\n        }\n        return cpLength / length;\n    }\n    closestPointT(p, options = {}) {\n        if (this.segments.length === 0) {\n            return null;\n        }\n        const precision = this.getPrecision(options);\n        const segmentSubdivisions = this.getSubdivisions(options);\n        let closestPointT;\n        let minSquaredDistance = Infinity;\n        for (let i = 0, ii = this.segments.length; i < ii; i += 1) {\n            const segment = this.segments[i];\n            const subdivisions = segmentSubdivisions[i];\n            if (segment.isVisible) {\n                const segmentClosestPointT = segment.closestPointT(p, {\n                    precision,\n                    subdivisions,\n                });\n                const segmentClosestPoint = segment.pointAtT(segmentClosestPointT);\n                const squaredDistance = GeometryUtil.squaredLength(segmentClosestPoint, p);\n                if (squaredDistance < minSquaredDistance) {\n                    closestPointT = { segmentIndex: i, value: segmentClosestPointT };\n                    minSquaredDistance = squaredDistance;\n                }\n            }\n        }\n        if (closestPointT) {\n            return closestPointT;\n        }\n        return { segmentIndex: this.segments.length - 1, value: 1 };\n    }\n    closestPointTangent(p, options = {}) {\n        if (this.segments.length === 0) {\n            return null;\n        }\n        const precision = this.getPrecision(options);\n        const segmentSubdivisions = this.getSubdivisions(options);\n        let closestPointTangent;\n        let minSquaredDistance = Infinity;\n        for (let i = 0, ii = this.segments.length; i < ii; i += 1) {\n            const segment = this.segments[i];\n            const subdivisions = segmentSubdivisions[i];\n            if (segment.isDifferentiable()) {\n                const segmentClosestPointT = segment.closestPointT(p, {\n                    precision,\n                    subdivisions,\n                });\n                const segmentClosestPoint = segment.pointAtT(segmentClosestPointT);\n                const squaredDistance = GeometryUtil.squaredLength(segmentClosestPoint, p);\n                if (squaredDistance < minSquaredDistance) {\n                    closestPointTangent = segment.tangentAtT(segmentClosestPointT);\n                    minSquaredDistance = squaredDistance;\n                }\n            }\n        }\n        if (closestPointTangent) {\n            return closestPointTangent;\n        }\n        return null;\n    }\n    containsPoint(p, options = {}) {\n        const polylines = this.toPolylines(options);\n        if (!polylines) {\n            return false;\n        }\n        let numIntersections = 0;\n        for (let i = 0, ii = polylines.length; i < ii; i += 1) {\n            const polyline = polylines[i];\n            if (polyline.containsPoint(p)) {\n                numIntersections += 1;\n            }\n        }\n        // returns `true` for odd numbers of intersections (even-odd algorithm)\n        return numIntersections % 2 === 1;\n    }\n    pointAt(ratio, options = {}) {\n        if (this.segments.length === 0) {\n            return null;\n        }\n        if (ratio <= 0) {\n            return this.start.clone();\n        }\n        if (ratio >= 1) {\n            return this.end.clone();\n        }\n        const opts = this.getOptions(options);\n        const pathLength = this.length(opts);\n        const length = pathLength * ratio;\n        return this.pointAtLength(length, opts);\n    }\n    pointAtLength(length, options = {}) {\n        if (this.segments.length === 0) {\n            return null;\n        }\n        if (length === 0) {\n            return this.start.clone();\n        }\n        let fromStart = true;\n        if (length < 0) {\n            fromStart = false;\n            length = -length; // eslint-disable-line\n        }\n        const precision = this.getPrecision(options);\n        const segmentSubdivisions = this.getSubdivisions(options);\n        let lastVisibleSegment;\n        let memo = 0;\n        for (let i = 0, ii = this.segments.length; i < ii; i += 1) {\n            const index = fromStart ? i : ii - 1 - i;\n            const segment = this.segments[index];\n            const subdivisions = segmentSubdivisions[index];\n            const d = segment.length({\n                precision,\n                subdivisions,\n            });\n            if (segment.isVisible) {\n                if (length <= memo + d) {\n                    return segment.pointAtLength((fromStart ? 1 : -1) * (length - memo), {\n                        precision,\n                        subdivisions,\n                    });\n                }\n                lastVisibleSegment = segment;\n            }\n            memo += d;\n        }\n        // if length requested is higher than the length of the path,\n        // return last visible segment endpoint\n        if (lastVisibleSegment) {\n            return fromStart ? lastVisibleSegment.end : lastVisibleSegment.start;\n        }\n        // if no visible segment, return last segment end point\n        const lastSegment = this.segments[this.segments.length - 1];\n        return lastSegment.end.clone();\n    }\n    pointAtT(t) {\n        const segments = this.segments;\n        const numSegments = segments.length;\n        if (numSegments === 0)\n            return null; // if segments is an empty array\n        const segmentIndex = t.segmentIndex;\n        if (segmentIndex < 0)\n            return segments[0].pointAtT(0);\n        if (segmentIndex >= numSegments) {\n            return segments[numSegments - 1].pointAtT(1);\n        }\n        const tValue = GeometryUtil.clamp(t.value, 0, 1);\n        return segments[segmentIndex].pointAtT(tValue);\n    }\n    divideAt(ratio, options = {}) {\n        if (this.segments.length === 0) {\n            return null;\n        }\n        const rate = GeometryUtil.clamp(ratio, 0, 1);\n        const opts = this.getOptions(options);\n        const len = this.length(opts);\n        const length = len * rate;\n        return this.divideAtLength(length, opts);\n    }\n    divideAtLength(length, options = {}) {\n        if (this.segments.length === 0) {\n            return null;\n        }\n        let fromStart = true;\n        if (length < 0) {\n            fromStart = false;\n            length = -length; // eslint-disable-line\n        }\n        const precision = this.getPrecision(options);\n        const segmentSubdivisions = this.getSubdivisions(options);\n        let memo = 0;\n        let divided;\n        let dividedSegmentIndex;\n        let lastValidSegment;\n        let lastValidSegmentIndex;\n        let t;\n        for (let i = 0, ii = this.segments.length; i < ii; i += 1) {\n            const index = fromStart ? i : ii - 1 - i;\n            const segment = this.getSegment(index);\n            const subdivisions = segmentSubdivisions[index];\n            const opts = { precision, subdivisions };\n            const len = segment.length(opts);\n            if (segment.isDifferentiable()) {\n                lastValidSegment = segment;\n                lastValidSegmentIndex = index;\n                if (length <= memo + len) {\n                    dividedSegmentIndex = index;\n                    divided = segment.divideAtLength((fromStart ? 1 : -1) * (length - memo), opts);\n                    break;\n                }\n            }\n            memo += len;\n        }\n        if (!lastValidSegment) {\n            return null;\n        }\n        if (!divided) {\n            dividedSegmentIndex = lastValidSegmentIndex;\n            t = fromStart ? 1 : 0;\n            divided = lastValidSegment.divideAtT(t);\n        }\n        // create a copy of this path and replace the identified segment with its two divided parts:\n        const pathCopy = this.clone();\n        const index = dividedSegmentIndex;\n        pathCopy.replaceSegment(index, divided);\n        const divisionStartIndex = index;\n        let divisionMidIndex = index + 1;\n        let divisionEndIndex = index + 2;\n        // do not insert the part if it looks like a point\n        if (!divided[0].isDifferentiable()) {\n            pathCopy.removeSegment(divisionStartIndex);\n            divisionMidIndex -= 1;\n            divisionEndIndex -= 1;\n        }\n        // insert a Moveto segment to ensure secondPath will be valid:\n        const movetoEnd = pathCopy.getSegment(divisionMidIndex).start;\n        pathCopy.insertSegment(divisionMidIndex, Path.createSegment('M', movetoEnd));\n        divisionEndIndex += 1;\n        // do not insert the part if it looks like a point\n        if (!divided[1].isDifferentiable()) {\n            pathCopy.removeSegment(divisionEndIndex - 1);\n            divisionEndIndex -= 1;\n        }\n        // ensure that Closepath segments in secondPath will be assigned correct subpathStartSegment:\n        const secondPathSegmentIndexConversion = divisionEndIndex - divisionStartIndex - 1;\n        for (let i = divisionEndIndex, ii = pathCopy.segments.length; i < ii; i += 1) {\n            const originalSegment = this.getSegment(i - secondPathSegmentIndexConversion);\n            const segment = pathCopy.getSegment(i);\n            if (segment.type === 'Z' &&\n                !originalSegment.subpathStartSegment.end.equals(segment.subpathStartSegment.end)) {\n                // pathCopy segment's subpathStartSegment is different from original segment's one\n                // convert this Closepath segment to a Lineto and replace it in pathCopy\n                const convertedSegment = Path.createSegment('L', originalSegment.end);\n                pathCopy.replaceSegment(i, convertedSegment);\n            }\n        }\n        // distribute pathCopy segments into two paths and return those:\n        const firstPath = new Path(pathCopy.segments.slice(0, divisionMidIndex));\n        const secondPath = new Path(pathCopy.segments.slice(divisionMidIndex));\n        return [firstPath, secondPath];\n    }\n    intersectsWithLine(line, options = {}) {\n        const polylines = this.toPolylines(options);\n        if (polylines == null) {\n            return null;\n        }\n        let intersections = null;\n        for (let i = 0, ii = polylines.length; i < ii; i += 1) {\n            const polyline = polylines[i];\n            const intersection = line.intersect(polyline);\n            if (intersection) {\n                if (intersections == null) {\n                    intersections = [];\n                }\n                if (Array.isArray(intersection)) {\n                    intersections.push(...intersection);\n                }\n                else {\n                    intersections.push(intersection);\n                }\n            }\n        }\n        return intersections;\n    }\n    isDifferentiable() {\n        for (let i = 0, ii = this.segments.length; i < ii; i += 1) {\n            const segment = this.segments[i];\n            if (segment.isDifferentiable()) {\n                return true;\n            }\n        }\n        return false;\n    }\n    isValid() {\n        const segments = this.segments;\n        const isValid = segments.length === 0 || segments[0].type === 'M';\n        return isValid;\n    }\n    length(options = {}) {\n        if (this.segments.length === 0) {\n            return 0;\n        }\n        const segmentSubdivisions = this.getSubdivisions(options);\n        let length = 0;\n        for (let i = 0, ii = this.segments.length; i < ii; i += 1) {\n            const segment = this.segments[i];\n            const subdivisions = segmentSubdivisions[i];\n            length += segment.length({ subdivisions });\n        }\n        return length;\n    }\n    lengthAtT(t, options = {}) {\n        const count = this.segments.length;\n        if (count === 0) {\n            return 0;\n        }\n        let segmentIndex = t.segmentIndex;\n        if (segmentIndex < 0) {\n            return 0;\n        }\n        let tValue = GeometryUtil.clamp(t.value, 0, 1);\n        if (segmentIndex >= count) {\n            segmentIndex = count - 1;\n            tValue = 1;\n        }\n        const precision = this.getPrecision(options);\n        const segmentSubdivisions = this.getSubdivisions(options);\n        let length = 0;\n        for (let i = 0; i < segmentIndex; i += 1) {\n            const segment = this.segments[i];\n            const subdivisions = segmentSubdivisions[i];\n            length += segment.length({ precision, subdivisions });\n        }\n        const segment = this.segments[segmentIndex];\n        const subdivisions = segmentSubdivisions[segmentIndex];\n        length += segment.lengthAtT(tValue, { precision, subdivisions });\n        return length;\n    }\n    tangentAt(ratio, options = {}) {\n        if (this.segments.length === 0) {\n            return null;\n        }\n        const rate = GeometryUtil.clamp(ratio, 0, 1);\n        const opts = this.getOptions(options);\n        const len = this.length(opts);\n        const length = len * rate;\n        return this.tangentAtLength(length, opts);\n    }\n    tangentAtLength(length, options = {}) {\n        if (this.segments.length === 0) {\n            return null;\n        }\n        let fromStart = true;\n        if (length < 0) {\n            fromStart = false;\n            length = -length; // eslint-disable-line\n        }\n        const precision = this.getPrecision(options);\n        const segmentSubdivisions = this.getSubdivisions(options);\n        let lastValidSegment;\n        let memo = 0;\n        for (let i = 0, ii = this.segments.length; i < ii; i += 1) {\n            const index = fromStart ? i : ii - 1 - i;\n            const segment = this.segments[index];\n            const subdivisions = segmentSubdivisions[index];\n            const len = segment.length({ precision, subdivisions });\n            if (segment.isDifferentiable()) {\n                if (length <= memo + len) {\n                    return segment.tangentAtLength((fromStart ? 1 : -1) * (length - memo), {\n                        precision,\n                        subdivisions,\n                    });\n                }\n                lastValidSegment = segment;\n            }\n            memo += len;\n        }\n        // if length requested is higher than the length of the path, return tangent of endpoint of last valid segment\n        if (lastValidSegment) {\n            const t = fromStart ? 1 : 0;\n            return lastValidSegment.tangentAtT(t);\n        }\n        // if no valid segment, return null\n        return null;\n    }\n    tangentAtT(t) {\n        const count = this.segments.length;\n        if (count === 0) {\n            return null;\n        }\n        const segmentIndex = t.segmentIndex;\n        if (segmentIndex < 0) {\n            return this.segments[0].tangentAtT(0);\n        }\n        if (segmentIndex >= count) {\n            return this.segments[count - 1].tangentAtT(1);\n        }\n        const tValue = GeometryUtil.clamp(t.value, 0, 1);\n        return this.segments[segmentIndex].tangentAtT(tValue);\n    }\n    getPrecision(options = {}) {\n        return options.precision == null ? this.PRECISION : options.precision;\n    }\n    getSubdivisions(options = {}) {\n        if (options.segmentSubdivisions == null) {\n            const precision = this.getPrecision(options);\n            return this.getSegmentSubdivisions({ precision });\n        }\n        return options.segmentSubdivisions;\n    }\n    getOptions(options = {}) {\n        const precision = this.getPrecision(options);\n        const segmentSubdivisions = this.getSubdivisions(options);\n        return { precision, segmentSubdivisions };\n    }\n    toPoints(options = {}) {\n        const segments = this.segments;\n        const count = segments.length;\n        if (count === 0) {\n            return null;\n        }\n        const segmentSubdivisions = this.getSubdivisions(options);\n        const points = [];\n        let partialPoints = [];\n        for (let i = 0; i < count; i += 1) {\n            const segment = segments[i];\n            if (segment.isVisible) {\n                const divisions = segmentSubdivisions[i];\n                if (divisions.length > 0) {\n                    // eslint-disable-next-line no-loop-func\n                    divisions.forEach((c) => partialPoints.push(c.start));\n                }\n                else {\n                    partialPoints.push(segment.start);\n                }\n            }\n            else if (partialPoints.length > 0) {\n                partialPoints.push(segments[i - 1].end);\n                points.push(partialPoints);\n                partialPoints = [];\n            }\n        }\n        if (partialPoints.length > 0) {\n            partialPoints.push(this.end);\n            points.push(partialPoints);\n        }\n        return points;\n    }\n    toPolylines(options = {}) {\n        const points = this.toPoints(options);\n        if (!points) {\n            return null;\n        }\n        return points.map((arr) => new Polyline(arr));\n    }\n    scale(sx, sy, origin) {\n        this.segments.forEach((s) => s.scale(sx, sy, origin));\n        return this;\n    }\n    rotate(angle, origin) {\n        this.segments.forEach((segment) => segment.rotate(angle, origin));\n        return this;\n    }\n    translate(tx, ty) {\n        if (typeof tx === 'number') {\n            this.segments.forEach((s) => s.translate(tx, ty));\n        }\n        else {\n            this.segments.forEach((s) => s.translate(tx));\n        }\n        return this;\n    }\n    clone() {\n        const path = new Path();\n        this.segments.forEach((s) => path.appendSegment(s.clone()));\n        return path;\n    }\n    equals(p) {\n        if (p == null) {\n            return false;\n        }\n        const segments = this.segments;\n        const otherSegments = p.segments;\n        const count = segments.length;\n        if (otherSegments.length !== count) {\n            return false;\n        }\n        for (let i = 0; i < count; i += 1) {\n            const a = segments[i];\n            const b = otherSegments[i];\n            if (a.type !== b.type || !a.equals(b)) {\n                return false;\n            }\n        }\n        return true;\n    }\n    toJSON() {\n        return this.segments.map((s) => s.toJSON());\n    }\n    serialize() {\n        if (!this.isValid()) {\n            throw new Error('Invalid path segments.');\n        }\n        return this.segments.map((s) => s.serialize()).join(' ');\n    }\n    toString() {\n        return this.serialize();\n    }\n}\n(function (Path) {\n    function isPath(instance) {\n        return instance != null && instance instanceof Path;\n    }\n    Path.isPath = isPath;\n})(Path || (Path = {}));\n(function (Path) {\n    function parse(pathData) {\n        if (!pathData) {\n            return new Path();\n        }\n        const path = new Path();\n        const commandRe = /(?:[a-zA-Z] *)(?:(?:-?\\d+(?:\\.\\d+)?(?:e[-+]?\\d+)? *,? *)|(?:-?\\.\\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\\d|-|\\.)/g;\n        const commands = Path.normalize(pathData).match(commandRe);\n        if (commands != null) {\n            for (let i = 0, ii = commands.length; i < ii; i += 1) {\n                const command = commands[i];\n                const argRe = /(?:[a-zA-Z])|(?:(?:-?\\d+(?:\\.\\d+)?(?:e[-+]?\\d+)?))|(?:(?:-?\\.\\d+))/g;\n                const args = command.match(argRe); // [type, coordinate1, coordinate2...]\n                if (args != null) {\n                    const type = args[0];\n                    const coords = args.slice(1).map((a) => +a);\n                    const segment = createSegment.call(null, type, ...coords);\n                    path.appendSegment(segment);\n                }\n            }\n        }\n        return path;\n    }\n    Path.parse = parse;\n    function createSegment(type, ...args) {\n        if (type === 'M') {\n            return MoveTo.create.call(null, ...args);\n        }\n        if (type === 'L') {\n            return LineTo.create.call(null, ...args);\n        }\n        if (type === 'C') {\n            return CurveTo.create.call(null, ...args);\n        }\n        if (type === 'z' || type === 'Z') {\n            return Close.create();\n        }\n        throw new Error(`Invalid path segment type \"${type}\"`);\n    }\n    Path.createSegment = createSegment;\n})(Path || (Path = {}));\n(function (Path) {\n    Path.normalize = normalizePathData;\n    Path.isValid = PathUtil.isValid;\n    Path.drawArc = PathUtil.drawArc;\n    Path.drawPoints = PathUtil.drawPoints;\n    Path.arcToCurves = PathUtil.arcToCurves;\n})(Path || (Path = {}));\n//# sourceMappingURL=path.js.map","import { StringExt, FunctionExt, Platform } from '@antv/x6-common';\nexport class Registry {\n    constructor(options) {\n        this.options = Object.assign({}, options);\n        this.data = this.options.data || {};\n        this.register = this.register.bind(this);\n        this.unregister = this.unregister.bind(this);\n    }\n    get names() {\n        return Object.keys(this.data);\n    }\n    register(name, options, force = false) {\n        if (typeof name === 'object') {\n            Object.entries(name).forEach(([key, val]) => {\n                this.register(key, val, options);\n            });\n            return;\n        }\n        if (this.exist(name) && !force && !Platform.isApplyingHMR()) {\n            this.onDuplicated(name);\n        }\n        const process = this.options.process;\n        const entity = process\n            ? FunctionExt.call(process, this, name, options)\n            : options;\n        this.data[name] = entity;\n        return entity;\n    }\n    unregister(name) {\n        const entity = name ? this.data[name] : null;\n        delete this.data[name];\n        return entity;\n    }\n    get(name) {\n        return name ? this.data[name] : null;\n    }\n    exist(name) {\n        return name ? this.data[name] != null : false;\n    }\n    onDuplicated(name) {\n        // eslint-disable-next-line no-useless-catch\n        try {\n            // race\n            if (this.options.onConflict) {\n                FunctionExt.call(this.options.onConflict, this, name);\n            }\n            throw new Error(`${StringExt.upperFirst(this.options.type)} with name '${name}' already registered.`);\n        }\n        catch (err) {\n            throw err;\n        }\n    }\n    onNotFound(name, prefix) {\n        throw new Error(this.getSpellingSuggestion(name, prefix));\n    }\n    getSpellingSuggestion(name, prefix) {\n        const suggestion = this.getSpellingSuggestionForName(name);\n        const prefixed = prefix\n            ? `${prefix} ${StringExt.lowerFirst(this.options.type)}`\n            : this.options.type;\n        return (\n        // eslint-disable-next-line\n        `${StringExt.upperFirst(prefixed)} with name '${name}' does not exist.${suggestion ? ` Did you mean '${suggestion}'?` : ''}`);\n    }\n    getSpellingSuggestionForName(name) {\n        return StringExt.getSpellingSuggestion(name, Object.keys(this.data), (candidate) => candidate);\n    }\n}\n(function (Registry) {\n    function create(options) {\n        return new Registry(options);\n    }\n    Registry.create = create;\n})(Registry || (Registry = {}));\n//# sourceMappingURL=registry.js.map","import { Dom } from '@antv/x6-common';\nexport const dot = {\n    color: '#aaaaaa',\n    thickness: 1,\n    markup: 'rect',\n    update(elem, options) {\n        const width = options.thickness * options.sx;\n        const height = options.thickness * options.sy;\n        Dom.attr(elem, {\n            width,\n            height,\n            rx: width,\n            ry: height,\n            fill: options.color,\n        });\n    },\n};\n//# sourceMappingURL=dot.js.map","import { Dom } from '@antv/x6-common';\nexport const fixedDot = {\n    color: '#aaaaaa',\n    thickness: 1,\n    markup: 'rect',\n    update(elem, options) {\n        const size = options.sx <= 1 ? options.thickness * options.sx : options.thickness;\n        Dom.attr(elem, {\n            width: size,\n            height: size,\n            rx: size,\n            ry: size,\n            fill: options.color,\n        });\n    },\n};\n//# sourceMappingURL=fixed-dot.js.map","import { Dom } from '@antv/x6-common';\nexport const mesh = {\n    color: 'rgba(224,224,224,1)',\n    thickness: 1,\n    markup: 'path',\n    update(elem, options) {\n        let d;\n        const width = options.width;\n        const height = options.height;\n        const thickness = options.thickness;\n        if (width - thickness >= 0 && height - thickness >= 0) {\n            d = ['M', width, 0, 'H0 M0 0 V0', height].join(' ');\n        }\n        else {\n            d = 'M 0 0 0 0';\n        }\n        Dom.attr(elem, {\n            d,\n            stroke: options.color,\n            'stroke-width': options.thickness,\n        });\n    },\n};\n//# sourceMappingURL=mesh.js.map","import { Dom } from '@antv/x6-common';\nexport const doubleMesh = [\n    {\n        color: 'rgba(224,224,224,1)',\n        thickness: 1,\n        markup: 'path',\n        update(elem, options) {\n            let d;\n            const width = options.width;\n            const height = options.height;\n            const thickness = options.thickness;\n            if (width - thickness >= 0 && height - thickness >= 0) {\n                d = ['M', width, 0, 'H0 M0 0 V0', height].join(' ');\n            }\n            else {\n                d = 'M 0 0 0 0';\n            }\n            Dom.attr(elem, {\n                d,\n                stroke: options.color,\n                'stroke-width': options.thickness,\n            });\n        },\n    },\n    {\n        color: 'rgba(224,224,224,0.2)',\n        thickness: 3,\n        factor: 4,\n        markup: 'path',\n        update(elem, options) {\n            let d;\n            const factor = options.factor || 1;\n            const width = options.width * factor;\n            const height = options.height * factor;\n            const thickness = options.thickness;\n            if (width - thickness >= 0 && height - thickness >= 0) {\n                d = ['M', width, 0, 'H0 M0 0 V0', height].join(' ');\n            }\n            else {\n                d = 'M 0 0 0 0';\n            }\n            // update wrapper size\n            options.width = width;\n            options.height = height;\n            Dom.attr(elem, {\n                d,\n                stroke: options.color,\n                'stroke-width': options.thickness,\n            });\n        },\n    },\n];\n//# sourceMappingURL=double-mesh.js.map","import { Dom, Vector } from '@antv/x6-common';\nimport { Registry } from '../registry';\nimport * as patterns from './main';\nexport class Grid {\n    constructor() {\n        this.patterns = {};\n        this.root = Vector.create(Dom.createSvgDocument(), {\n            width: '100%',\n            height: '100%',\n        }, [Dom.createSvgElement('defs')]).node;\n    }\n    add(id, elem) {\n        const firstChild = this.root.childNodes[0];\n        if (firstChild) {\n            firstChild.appendChild(elem);\n        }\n        this.patterns[id] = elem;\n        Vector.create('rect', {\n            width: '100%',\n            height: '100%',\n            fill: `url(#${id})`,\n        }).appendTo(this.root);\n    }\n    get(id) {\n        return this.patterns[id];\n    }\n    has(id) {\n        return this.patterns[id] != null;\n    }\n}\n(function (Grid) {\n    Grid.presets = patterns;\n    Grid.registry = Registry.create({\n        type: 'grid',\n    });\n    Grid.registry.register(Grid.presets, true);\n})(Grid || (Grid = {}));\n//# sourceMappingURL=index.js.map","export const flipX = function (img) {\n    // d b\n    // d b\n    const canvas = document.createElement('canvas');\n    const width = img.width;\n    const height = img.height;\n    canvas.width = width * 2;\n    canvas.height = height;\n    const ctx = canvas.getContext('2d');\n    // left image\n    ctx.drawImage(img, 0, 0, width, height);\n    // flipped right image\n    ctx.translate(2 * width, 0);\n    ctx.scale(-1, 1);\n    ctx.drawImage(img, 0, 0, width, height);\n    return canvas;\n};\n//# sourceMappingURL=flip-x.js.map","export const flipY = function (img) {\n    // d d\n    // q q\n    const canvas = document.createElement('canvas');\n    const width = img.width;\n    const height = img.height;\n    canvas.width = width;\n    canvas.height = height * 2;\n    const ctx = canvas.getContext('2d');\n    // top image\n    ctx.drawImage(img, 0, 0, width, height);\n    // flipped bottom image\n    ctx.translate(0, 2 * height);\n    ctx.scale(1, -1);\n    ctx.drawImage(img, 0, 0, width, height);\n    return canvas;\n};\n//# sourceMappingURL=flip-y.js.map","export const flipXY = function (img) {\n    // d b\n    // q p\n    const canvas = document.createElement('canvas');\n    const width = img.width;\n    const height = img.height;\n    canvas.width = 2 * width;\n    canvas.height = 2 * height;\n    const ctx = canvas.getContext('2d');\n    // top-left image\n    ctx.drawImage(img, 0, 0, width, height);\n    // xy-flipped bottom-right image\n    ctx.setTransform(-1, 0, 0, -1, canvas.width, canvas.height);\n    ctx.drawImage(img, 0, 0, width, height);\n    // x-flipped top-right image\n    ctx.setTransform(-1, 0, 0, 1, canvas.width, 0);\n    ctx.drawImage(img, 0, 0, width, height);\n    // y-flipped bottom-left image\n    ctx.setTransform(1, 0, 0, -1, 0, canvas.height);\n    ctx.drawImage(img, 0, 0, width, height);\n    return canvas;\n};\n//# sourceMappingURL=flip-xy.js.map","import { Angle } from '@antv/x6-geometry';\nexport const watermark = function (img, options) {\n    const width = img.width;\n    const height = img.height;\n    const canvas = document.createElement('canvas');\n    canvas.width = width * 3;\n    canvas.height = height * 3;\n    const ctx = canvas.getContext('2d');\n    const angle = options.angle != null ? -options.angle : -20;\n    const radians = Angle.toRad(angle);\n    const stepX = canvas.width / 4;\n    const stepY = canvas.height / 4;\n    for (let i = 0; i < 4; i += 1) {\n        for (let j = 0; j < 4; j += 1) {\n            if ((i + j) % 2 > 0) {\n                ctx.setTransform(1, 0, 0, 1, (2 * i - 1) * stepX, (2 * j - 1) * stepY);\n                ctx.rotate(radians);\n                ctx.drawImage(img, -width / 2, -height / 2, width, height);\n            }\n        }\n    }\n    return canvas;\n};\n//# sourceMappingURL=watermark.js.map","/* eslint-disable @typescript-eslint/ban-types */\nimport { Registry } from '../registry';\nimport * as patterns from './main';\nexport var Background;\n(function (Background) {\n    Background.presets = Object.assign({}, patterns);\n    Background.presets['flip-x'] = patterns.flipX;\n    Background.presets['flip-y'] = patterns.flipY;\n    Background.presets['flip-xy'] = patterns.flipXY;\n    Background.registry = Registry.create({\n        type: 'background pattern',\n    });\n    Background.registry.register(Background.presets, true);\n})(Background || (Background = {}));\n//# sourceMappingURL=index.js.map","import { Registry } from '../registry';\nimport * as filters from './main';\nexport var Filter;\n(function (Filter) {\n    Filter.presets = filters;\n    Filter.registry = Registry.create({\n        type: 'filter',\n    });\n    Filter.registry.register(Filter.presets, true);\n})(Filter || (Filter = {}));\n//# sourceMappingURL=index.js.map","export function getString(value, defaultValue) {\n    return value != null ? value : defaultValue;\n}\nexport function getNumber(num, defaultValue) {\n    return num != null && Number.isFinite(num) ? num : defaultValue;\n}\n//# sourceMappingURL=util.js.map","import { getString, getNumber } from './util';\nexport function outline(args = {}) {\n    const color = getString(args.color, 'blue');\n    const width = getNumber(args.width, 1);\n    const margin = getNumber(args.margin, 2);\n    const opacity = getNumber(args.opacity, 1);\n    const innerRadius = margin;\n    const outerRadius = margin + width;\n    return `\n    <filter>\n      <feFlood flood-color=\"${color}\" flood-opacity=\"${opacity}\" result=\"colored\"/>\n      <feMorphology in=\"SourceAlpha\" result=\"morphedOuter\" operator=\"dilate\" radius=\"${outerRadius}\" />\n      <feMorphology in=\"SourceAlpha\" result=\"morphedInner\" operator=\"dilate\" radius=\"${innerRadius}\" />\n      <feComposite result=\"morphedOuterColored\" in=\"colored\" in2=\"morphedOuter\" operator=\"in\"/>\n      <feComposite operator=\"xor\" in=\"morphedOuterColored\" in2=\"morphedInner\" result=\"outline\"/>\n      <feMerge>\n        <feMergeNode in=\"outline\"/>\n        <feMergeNode in=\"SourceGraphic\"/>\n      </feMerge>\n    </filter>\n  `.trim();\n}\n//# sourceMappingURL=outline.js.map","import { getString, getNumber } from './util';\nexport function highlight(args = {}) {\n    const color = getString(args.color, 'red');\n    const blur = getNumber(args.blur, 0);\n    const width = getNumber(args.width, 1);\n    const opacity = getNumber(args.opacity, 1);\n    return `\n      <filter>\n        <feFlood flood-color=\"${color}\" flood-opacity=\"${opacity}\" result=\"colored\"/>\n        <feMorphology result=\"morphed\" in=\"SourceGraphic\" operator=\"dilate\" radius=\"${width}\"/>\n        <feComposite result=\"composed\" in=\"colored\" in2=\"morphed\" operator=\"in\"/>\n        <feGaussianBlur result=\"blured\" in=\"composed\" stdDeviation=\"${blur}\"/>\n        <feBlend in=\"SourceGraphic\" in2=\"blured\" mode=\"normal\"/>\n      </filter>\n    `.trim();\n}\n//# sourceMappingURL=highlight.js.map","import { getNumber } from './util';\nexport function blur(args = {}) {\n    const x = getNumber(args.x, 2);\n    const stdDeviation = args.y != null && Number.isFinite(args.y) ? [x, args.y] : x;\n    return `\n    <filter>\n      <feGaussianBlur stdDeviation=\"${stdDeviation}\"/>\n    </filter>\n  `.trim();\n}\n//# sourceMappingURL=blur.js.map","import { getString, getNumber } from './util';\nexport function dropShadow(args = {}) {\n    const dx = getNumber(args.dx, 0);\n    const dy = getNumber(args.dy, 0);\n    const color = getString(args.color, 'black');\n    const blur = getNumber(args.blur, 4);\n    const opacity = getNumber(args.opacity, 1);\n    return 'SVGFEDropShadowElement' in window\n        ? `<filter>\n         <feDropShadow stdDeviation=\"${blur}\" dx=\"${dx}\" dy=\"${dy}\" flood-color=\"${color}\" flood-opacity=\"${opacity}\" />\n       </filter>`.trim()\n        : `<filter>\n         <feGaussianBlur in=\"SourceAlpha\" stdDeviation=\"${blur}\" />\n         <feOffset dx=\"${dx}\" dy=\"${dy}\" result=\"offsetblur\" />\n         <feFlood flood-color=\"${color}\" />\n         <feComposite in2=\"offsetblur\" operator=\"in\" />\n         <feComponentTransfer>\n           <feFuncA type=\"linear\" slope=\"${opacity}\" />\n         </feComponentTransfer>\n         <feMerge>\n           <feMergeNode/>\n           <feMergeNode in=\"SourceGraphic\"/>\n         </feMerge>\n       </filter>`.trim();\n}\n//# sourceMappingURL=drop-shadow.js.map","import { getNumber } from './util';\nexport function grayScale(args = {}) {\n    const amount = getNumber(args.amount, 1);\n    const a = 0.2126 + 0.7874 * (1 - amount);\n    const b = 0.7152 - 0.7152 * (1 - amount);\n    const c = 0.0722 - 0.0722 * (1 - amount);\n    const d = 0.2126 - 0.2126 * (1 - amount);\n    const e = 0.7152 + 0.2848 * (1 - amount);\n    const f = 0.0722 - 0.0722 * (1 - amount);\n    const g = 0.2126 - 0.2126 * (1 - amount);\n    const h = 0.0722 + 0.9278 * (1 - amount);\n    return `\n    <filter>\n      <feColorMatrix type=\"matrix\" values=\"${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${b} ${h} 0 0 0 0 0 1 0\"/>\n    </filter>\n  `.trim();\n}\n//# sourceMappingURL=gray-scale.js.map","import { getNumber } from './util';\nexport function sepia(args = {}) {\n    const amount = getNumber(args.amount, 1);\n    const a = 0.393 + 0.607 * (1 - amount);\n    const b = 0.769 - 0.769 * (1 - amount);\n    const c = 0.189 - 0.189 * (1 - amount);\n    const d = 0.349 - 0.349 * (1 - amount);\n    const e = 0.686 + 0.314 * (1 - amount);\n    const f = 0.168 - 0.168 * (1 - amount);\n    const g = 0.272 - 0.272 * (1 - amount);\n    const h = 0.534 - 0.534 * (1 - amount);\n    const i = 0.131 + 0.869 * (1 - amount);\n    return `\n      <filter>\n        <feColorMatrix type=\"matrix\" values=\"${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${h} ${i} 0 0 0 0 0 1 0\"/>\n      </filter>\n    `.trim();\n}\n//# sourceMappingURL=sepia.js.map","import { getNumber } from './util';\nexport function saturate(args = {}) {\n    const amount = getNumber(args.amount, 1);\n    return `\n      <filter>\n        <feColorMatrix type=\"saturate\" values=\"${1 - amount}\"/>\n      </filter>\n    `.trim();\n}\n//# sourceMappingURL=saturate.js.map","import { getNumber } from './util';\nexport function hueRotate(args = {}) {\n    const angle = getNumber(args.angle, 0);\n    return `\n      <filter>\n        <feColorMatrix type=\"hueRotate\" values=\"${angle}\"/>\n      </filter>\n    `.trim();\n}\n//# sourceMappingURL=hue-rotate.js.map","import { getNumber } from './util';\nexport function invert(args = {}) {\n    const amount = getNumber(args.amount, 1);\n    const amount2 = 1 - amount;\n    return `\n      <filter>\n        <feComponentTransfer>\n          <feFuncR type=\"table\" tableValues=\"${amount} ${amount2}\"/>\n          <feFuncG type=\"table\" tableValues=\"${amount} ${amount2}\"/>\n          <feFuncB type=\"table\" tableValues=\"${amount} ${amount2}\"/>\n        </feComponentTransfer>\n      </filter>\n    `.trim();\n}\n//# sourceMappingURL=invert.js.map","import { getNumber } from './util';\nexport function brightness(args = {}) {\n    const amount = getNumber(args.amount, 1);\n    return `\n    <filter>\n      <feComponentTransfer>\n        <feFuncR type=\"linear\" slope=\"${amount}\"/>\n        <feFuncG type=\"linear\" slope=\"${amount}\"/>\n        <feFuncB type=\"linear\" slope=\"${amount}\"/>\n      </feComponentTransfer>\n    </filter>\n  `.trim();\n}\n//# sourceMappingURL=brightness.js.map","import { getNumber } from './util';\nexport function contrast(args = {}) {\n    const amount = getNumber(args.amount, 1);\n    const amount2 = 0.5 - amount / 2;\n    return `\n    <filter>\n     <feComponentTransfer>\n        <feFuncR type=\"linear\" slope=\"${amount}\" intercept=\"${amount2}\"/>\n        <feFuncG type=\"linear\" slope=\"${amount}\" intercept=\"${amount2}\"/>\n        <feFuncB type=\"linear\" slope=\"${amount}\" intercept=\"${amount2}\"/>\n      </feComponentTransfer>\n    </filter>\n  `.trim();\n}\n//# sourceMappingURL=contrast.js.map","export const raw = {\n    xlinkHref: 'xlink:href',\n    xlinkShow: 'xlink:show',\n    xlinkRole: 'xlink:role',\n    xlinkType: 'xlink:type',\n    xlinkArcrole: 'xlink:arcrole',\n    xlinkTitle: 'xlink:title',\n    xlinkActuate: 'xlink:actuate',\n    xmlSpace: 'xml:space',\n    xmlBase: 'xml:base',\n    xmlLang: 'xml:lang',\n    preserveAspectRatio: 'preserveAspectRatio',\n    requiredExtension: 'requiredExtension',\n    requiredFeatures: 'requiredFeatures',\n    systemLanguage: 'systemLanguage',\n    externalResourcesRequired: 'externalResourceRequired',\n};\n//# sourceMappingURL=raw.js.map","import { Point, Path, Polyline } from '@antv/x6-geometry';\nimport { NumberExt, FunctionExt, Dom } from '@antv/x6-common';\nexport const ref = {\n// We do not set `ref` attribute directly on an element.\n// The attribute itself does not qualify for relative positioning.\n};\n// if `refX` is in [0, 1] then `refX` is a fraction of bounding box width\n// if `refX` is < 0 then `refX`'s absolute values is the right coordinate of the bounding box\n// otherwise, `refX` is the left coordinate of the bounding box\nexport const refX = {\n    position: positionWrapper('x', 'width', 'origin'),\n};\nexport const refY = {\n    position: positionWrapper('y', 'height', 'origin'),\n};\n// `ref-dx` and `ref-dy` define the offset of the subelement relative to the right and/or bottom\n// coordinate of the reference element.\nexport const refDx = {\n    position: positionWrapper('x', 'width', 'corner'),\n};\nexport const refDy = {\n    position: positionWrapper('y', 'height', 'corner'),\n};\n// 'ref-width'/'ref-height' defines the width/height of the subelement relatively to\n// the reference element size\n// val in 0..1         ref-width = 0.75 sets the width to 75% of the ref. el. width\n// val < 0 || val > 1  ref-height = -20 sets the height to the ref. el. height shorter by 20\nexport const refWidth = {\n    set: setWrapper('width', 'width'),\n};\nexport const refHeight = {\n    set: setWrapper('height', 'height'),\n};\nexport const refRx = {\n    set: setWrapper('rx', 'width'),\n};\nexport const refRy = {\n    set: setWrapper('ry', 'height'),\n};\nexport const refRInscribed = {\n    set: ((attrName) => {\n        const widthFn = setWrapper(attrName, 'width');\n        const heightFn = setWrapper(attrName, 'height');\n        return function (value, options) {\n            const refBBox = options.refBBox;\n            const fn = refBBox.height > refBBox.width ? widthFn : heightFn;\n            return FunctionExt.call(fn, this, value, options);\n        };\n    })('r'),\n};\nexport const refRCircumscribed = {\n    set(val, { refBBox }) {\n        let value = parseFloat(val);\n        const percentage = NumberExt.isPercentage(val);\n        if (percentage) {\n            value /= 100;\n        }\n        const diagonalLength = Math.sqrt(refBBox.height * refBBox.height + refBBox.width * refBBox.width);\n        let rValue;\n        if (Number.isFinite(value)) {\n            if (percentage || (value >= 0 && value <= 1)) {\n                rValue = value * diagonalLength;\n            }\n            else {\n                rValue = Math.max(value + diagonalLength, 0);\n            }\n        }\n        return { r: rValue };\n    },\n};\nexport const refCx = {\n    set: setWrapper('cx', 'width'),\n};\nexport const refCy = {\n    set: setWrapper('cy', 'height'),\n};\nexport const refDResetOffset = {\n    set: dWrapper({ resetOffset: true }),\n};\nexport const refDKeepOffset = {\n    set: dWrapper({ resetOffset: false }),\n};\nexport const refPointsResetOffset = {\n    set: pointsWrapper({ resetOffset: true }),\n};\nexport const refPointsKeepOffset = {\n    set: pointsWrapper({ resetOffset: false }),\n};\n// aliases\n// -------\nexport const refR = refRInscribed;\nexport const refD = refDResetOffset;\nexport const refPoints = refPointsResetOffset;\n// Allows to combine both absolute and relative positioning\n// refX: 50%, refX2: 20\nexport const refX2 = refX;\nexport const refY2 = refY;\nexport const refWidth2 = refWidth;\nexport const refHeight2 = refHeight;\n// utils\n// -----\nfunction positionWrapper(axis, dimension, origin) {\n    return (val, { refBBox }) => {\n        if (val == null) {\n            return null;\n        }\n        let value = parseFloat(val);\n        const percentage = NumberExt.isPercentage(val);\n        if (percentage) {\n            value /= 100;\n        }\n        let delta;\n        if (Number.isFinite(value)) {\n            const refOrigin = refBBox[origin];\n            if (percentage || (value > 0 && value < 1)) {\n                delta = refOrigin[axis] + refBBox[dimension] * value;\n            }\n            else {\n                delta = refOrigin[axis] + value;\n            }\n        }\n        const point = new Point();\n        point[axis] = delta || 0;\n        return point;\n    };\n}\nfunction setWrapper(attrName, dimension) {\n    return function (val, { refBBox }) {\n        let value = parseFloat(val);\n        const percentage = NumberExt.isPercentage(val);\n        if (percentage) {\n            value /= 100;\n        }\n        const attrs = {};\n        if (Number.isFinite(value)) {\n            const attrValue = percentage || (value >= 0 && value <= 1)\n                ? value * refBBox[dimension]\n                : Math.max(value + refBBox[dimension], 0);\n            attrs[attrName] = attrValue;\n        }\n        return attrs;\n    };\n}\nfunction shapeWrapper(shapeConstructor, options) {\n    const cacheName = 'x6-shape';\n    const resetOffset = options && options.resetOffset;\n    return function (value, { elem, refBBox }) {\n        let cache = Dom.data(elem, cacheName);\n        if (!cache || cache.value !== value) {\n            // only recalculate if value has changed\n            const cachedShape = shapeConstructor(value);\n            cache = {\n                value,\n                shape: cachedShape,\n                shapeBBox: cachedShape.bbox(),\n            };\n            Dom.data(elem, cacheName, cache);\n        }\n        const shape = cache.shape.clone();\n        const shapeBBox = cache.shapeBBox.clone();\n        const shapeOrigin = shapeBBox.getOrigin();\n        const refOrigin = refBBox.getOrigin();\n        shapeBBox.x = refOrigin.x;\n        shapeBBox.y = refOrigin.y;\n        const fitScale = refBBox.getMaxScaleToFit(shapeBBox, refOrigin);\n        // `maxRectScaleToFit` can give Infinity if width or height is 0\n        const sx = shapeBBox.width === 0 || refBBox.width === 0 ? 1 : fitScale.sx;\n        const sy = shapeBBox.height === 0 || refBBox.height === 0 ? 1 : fitScale.sy;\n        shape.scale(sx, sy, shapeOrigin);\n        if (resetOffset) {\n            shape.translate(-shapeOrigin.x, -shapeOrigin.y);\n        }\n        return shape;\n    };\n}\n// `d` attribute for SVGPaths\nfunction dWrapper(options) {\n    function pathConstructor(value) {\n        return Path.parse(value);\n    }\n    const shape = shapeWrapper(pathConstructor, options);\n    return (value, args) => {\n        const path = shape(value, args);\n        return {\n            d: path.serialize(),\n        };\n    };\n}\n// `points` attribute for SVGPolylines and SVGPolygons\nfunction pointsWrapper(options) {\n    const shape = shapeWrapper((points) => new Polyline(points), options);\n    return (value, args) => {\n        const polyline = shape(value, args);\n        return {\n            points: polyline.serialize(),\n        };\n    };\n}\n//# sourceMappingURL=ref.js.map","import { ObjectExt } from '@antv/x6-common';\nexport const fill = {\n    qualify: ObjectExt.isPlainObject,\n    set(fill, { view }) {\n        return `url(#${view.graph.defineGradient(fill)})`;\n    },\n};\n//# sourceMappingURL=fill.js.map","import { ObjectExt } from '@antv/x6-common';\nexport const stroke = {\n    qualify: ObjectExt.isPlainObject,\n    set(stroke, { view }) {\n        const cell = view.cell;\n        const options = Object.assign({}, stroke);\n        if (cell.isEdge() && options.type === 'linearGradient') {\n            const edgeView = view;\n            const source = edgeView.sourcePoint;\n            const target = edgeView.targetPoint;\n            options.id = `gradient-${options.type}-${cell.id}`;\n            options.attrs = Object.assign(Object.assign({}, options.attrs), { x1: source.x, y1: source.y, x2: target.x, y2: target.y, gradientUnits: 'userSpaceOnUse' });\n            view.graph.defs.remove(options.id);\n        }\n        return `url(#${view.graph.defineGradient(options)})`;\n    },\n};\n//# sourceMappingURL=stroke.js.map","import { ObjectExt, NumberExt, Dom, FunctionExt, } from '@antv/x6-common';\nexport const text = {\n    qualify(text, { attrs }) {\n        return attrs.textWrap == null || !ObjectExt.isPlainObject(attrs.textWrap);\n    },\n    set(text, { view, elem, attrs }) {\n        const cacheName = 'x6-text';\n        const cache = Dom.data(elem, cacheName);\n        const json = (str) => {\n            try {\n                return JSON.parse(str);\n            }\n            catch (error) {\n                return str;\n            }\n        };\n        const options = {\n            x: attrs.x,\n            eol: attrs.eol,\n            annotations: json(attrs.annotations),\n            textPath: json(attrs['text-path'] || attrs.textPath),\n            textVerticalAnchor: (attrs['text-vertical-anchor'] ||\n                attrs.textVerticalAnchor),\n            displayEmpty: (attrs['display-empty'] || attrs.displayEmpty) === 'true',\n            lineHeight: (attrs['line-height'] || attrs.lineHeight),\n        };\n        const fontSize = (attrs['font-size'] || attrs.fontSize);\n        const textHash = JSON.stringify([text, options]);\n        if (fontSize) {\n            elem.setAttribute('font-size', fontSize);\n        }\n        // Updates the text only if there was a change in the string\n        // or any of its attributes.\n        if (cache == null || cache !== textHash) {\n            // Text Along Path Selector\n            const textPath = options.textPath;\n            if (textPath != null && typeof textPath === 'object') {\n                const selector = textPath.selector;\n                if (typeof selector === 'string') {\n                    const pathNode = view.find(selector)[0];\n                    if (pathNode instanceof SVGPathElement) {\n                        Dom.ensureId(pathNode);\n                        options.textPath = Object.assign({ 'xlink:href': `#${pathNode.id}` }, textPath);\n                    }\n                }\n            }\n            Dom.text(elem, `${text}`, options);\n            Dom.data(elem, cacheName, textHash);\n        }\n    },\n};\nexport const textWrap = {\n    qualify: ObjectExt.isPlainObject,\n    set(val, { view, elem, attrs, refBBox }) {\n        const info = val;\n        // option `width`\n        const width = info.width || 0;\n        if (NumberExt.isPercentage(width)) {\n            refBBox.width *= parseFloat(width) / 100;\n        }\n        else if (width <= 0) {\n            refBBox.width += width;\n        }\n        else {\n            refBBox.width = width;\n        }\n        // option `height`\n        const height = info.height || 0;\n        if (NumberExt.isPercentage(height)) {\n            refBBox.height *= parseFloat(height) / 100;\n        }\n        else if (height <= 0) {\n            refBBox.height += height;\n        }\n        else {\n            refBBox.height = height;\n        }\n        // option `text`\n        let wrappedText;\n        let txt = info.text;\n        if (txt == null) {\n            // the edge of the label is assigned to txt\n            txt = attrs.text || (elem === null || elem === void 0 ? void 0 : elem.textContent);\n        }\n        if (txt != null) {\n            wrappedText = Dom.breakText(`${txt}`, refBBox, {\n                'font-weight': attrs['font-weight'] || attrs.fontWeight,\n                'font-size': attrs['font-size'] || attrs.fontSize,\n                'font-family': attrs['font-family'] || attrs.fontFamily,\n                lineHeight: attrs.lineHeight,\n            }, {\n                // svgDocument: view.graph.view.svg,\n                ellipsis: info.ellipsis,\n                // hyphen: info.hyphen as string,\n                // breakWord: info.breakWord as boolean,\n            });\n        }\n        else {\n            wrappedText = '';\n        }\n        FunctionExt.call(text.set, this, wrappedText, {\n            view,\n            elem,\n            attrs,\n            refBBox,\n            cell: view.cell,\n        });\n    },\n};\nconst isTextInUse = (val, { attrs }) => {\n    return attrs.text !== undefined;\n};\nexport const lineHeight = {\n    qualify: isTextInUse,\n};\nexport const textVerticalAnchor = {\n    qualify: isTextInUse,\n};\nexport const textPath = {\n    qualify: isTextInUse,\n};\nexport const annotations = {\n    qualify: isTextInUse,\n};\nexport const eol = {\n    qualify: isTextInUse,\n};\nexport const displayEmpty = {\n    qualify: isTextInUse,\n};\n//# sourceMappingURL=text.js.map","import { Dom } from '@antv/x6-common';\nexport const title = {\n    qualify(title, { elem }) {\n        // HTMLElement title is specified via an attribute (i.e. not an element)\n        return elem instanceof SVGElement;\n    },\n    set(val, { elem }) {\n        const cacheName = 'x6-title';\n        const title = `${val}`;\n        const cache = Dom.data(elem, cacheName);\n        if (cache == null || cache !== title) {\n            Dom.data(elem, cacheName, title);\n            // Generally SVGTitleElement should be the first child\n            // element of its parent.\n            const firstChild = elem.firstChild;\n            if (firstChild && firstChild.tagName.toUpperCase() === 'TITLE') {\n                // Update an existing title\n                const titleElem = firstChild;\n                titleElem.textContent = title;\n            }\n            else {\n                // Create a new title\n                const titleNode = document.createElementNS(elem.namespaceURI, 'title');\n                titleNode.textContent = title;\n                elem.insertBefore(titleNode, firstChild);\n            }\n        }\n    },\n};\n//# sourceMappingURL=title.js.map","import { NumberExt } from '@antv/x6-common';\nimport { Point } from '@antv/x6-geometry';\n// `x-align` when set to `middle` causes centering of the subelement around its new x coordinate.\n// `x-align` when set to `right` uses the x coordinate as referenced to the right of the bbox.\nexport const xAlign = {\n    offset: offsetWrapper('x', 'width', 'right'),\n};\n// `y-align` when set to `middle` causes centering of the subelement around its new y coordinate.\n// `y-align` when set to `bottom` uses the y coordinate as referenced to the bottom of the bbox.\nexport const yAlign = {\n    offset: offsetWrapper('y', 'height', 'bottom'),\n};\nexport const resetOffset = {\n    offset(val, { refBBox }) {\n        return val ? { x: -refBBox.x, y: -refBBox.y } : { x: 0, y: 0 };\n    },\n};\nfunction offsetWrapper(axis, dimension, corner) {\n    return (value, { refBBox }) => {\n        const point = new Point();\n        let delta;\n        if (value === 'middle') {\n            delta = refBBox[dimension] / 2;\n        }\n        else if (value === corner) {\n            delta = refBBox[dimension];\n        }\n        else if (typeof value === 'number' && Number.isFinite(value)) {\n            delta = value > -1 && value < 1 ? -refBBox[dimension] * value : -value;\n        }\n        else if (NumberExt.isPercentage(value)) {\n            delta = (refBBox[dimension] * parseFloat(value)) / 100;\n        }\n        else {\n            delta = 0;\n        }\n        point[axis] = -(refBBox[axis] + delta);\n        return point;\n    };\n}\n//# sourceMappingURL=align.js.map","import { ObjectExt, Dom } from '@antv/x6-common';\nexport const style = {\n    qualify: ObjectExt.isPlainObject,\n    set(styles, { elem }) {\n        Dom.css(elem, styles);\n    },\n};\n//# sourceMappingURL=style.js.map","export const html = {\n    set(html, { elem }) {\n        elem.innerHTML = `${html}`;\n    },\n};\n//# sourceMappingURL=html.js.map","import { ObjectExt } from '@antv/x6-common';\nexport const filter = {\n    qualify: ObjectExt.isPlainObject,\n    set(filter, { view }) {\n        return `url(#${view.graph.defineFilter(filter)})`;\n    },\n};\n//# sourceMappingURL=filter.js.map","export const port = {\n    set(port) {\n        if (port != null && typeof port === 'object' && port.id) {\n            return port.id;\n        }\n        return port;\n    },\n};\n//# sourceMappingURL=port.js.map","import { Path } from '@antv/x6-geometry';\nexport function normalize(d, offset1, offset2) {\n    let offsetX;\n    let offsetY;\n    if (typeof offset1 === 'object') {\n        offsetX = offset1.x;\n        offsetY = offset1.y;\n    }\n    else {\n        offsetX = offset1;\n        offsetY = offset2;\n    }\n    const path = Path.parse(d);\n    const bbox = path.bbox();\n    if (bbox) {\n        let ty = -bbox.height / 2 - bbox.y;\n        let tx = -bbox.width / 2 - bbox.x;\n        if (typeof offsetX === 'number') {\n            tx -= offsetX;\n        }\n        if (typeof offsetY === 'number') {\n            ty -= offsetY;\n        }\n        path.translate(tx, ty);\n    }\n    return path.serialize();\n}\n//# sourceMappingURL=util.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Path } from '@antv/x6-geometry';\nimport { NumberExt } from '@antv/x6-common';\nimport { normalize } from './util';\nexport const block = (_a) => {\n    var { size, width, height, offset, open } = _a, attrs = __rest(_a, [\"size\", \"width\", \"height\", \"offset\", \"open\"]);\n    return createClassicMarker({ size, width, height, offset }, open === true, true, undefined, attrs);\n};\nexport const classic = (_a) => {\n    var { size, width, height, offset, factor } = _a, attrs = __rest(_a, [\"size\", \"width\", \"height\", \"offset\", \"factor\"]);\n    return createClassicMarker({ size, width, height, offset }, false, false, factor, attrs);\n};\nfunction createClassicMarker(options, open, full, factor = 3 / 4, attrs = {}) {\n    const size = options.size || 10;\n    const width = options.width || size;\n    const height = options.height || size;\n    const path = new Path();\n    const localAttrs = {};\n    if (open) {\n        path\n            .moveTo(width, 0)\n            .lineTo(0, height / 2)\n            .lineTo(width, height);\n        localAttrs.fill = 'none';\n    }\n    else {\n        path.moveTo(0, height / 2);\n        path.lineTo(width, 0);\n        if (!full) {\n            const f = NumberExt.clamp(factor, 0, 1);\n            path.lineTo(width * f, height / 2);\n        }\n        path.lineTo(width, height);\n        path.close();\n    }\n    return Object.assign(Object.assign(Object.assign({}, localAttrs), attrs), { tagName: 'path', d: normalize(path.serialize(), {\n            x: options.offset != null ? options.offset : -width / 2,\n        }) });\n}\n//# sourceMappingURL=classic.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Path } from '@antv/x6-geometry';\nimport { normalize } from './util';\nexport const diamond = (_a) => {\n    var { size, width, height, offset } = _a, attrs = __rest(_a, [\"size\", \"width\", \"height\", \"offset\"]);\n    const s = size || 10;\n    const w = width || s;\n    const h = height || s;\n    const path = new Path();\n    path\n        .moveTo(0, h / 2)\n        .lineTo(w / 2, 0)\n        .lineTo(w, h / 2)\n        .lineTo(w / 2, h)\n        .close();\n    return Object.assign(Object.assign({}, attrs), { tagName: 'path', d: normalize(path.serialize(), offset == null ? -w / 2 : offset) });\n};\n//# sourceMappingURL=diamond.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { normalize } from './util';\nexport const path = (_a) => {\n    var { d, offsetX, offsetY } = _a, attrs = __rest(_a, [\"d\", \"offsetX\", \"offsetY\"]);\n    return Object.assign(Object.assign({}, attrs), { tagName: 'path', d: normalize(d, offsetX, offsetY) });\n};\n//# sourceMappingURL=path.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Path } from '@antv/x6-geometry';\nimport { normalize } from './util';\nexport const cross = (_a) => {\n    var { size, width, height, offset } = _a, attrs = __rest(_a, [\"size\", \"width\", \"height\", \"offset\"]);\n    const s = size || 10;\n    const w = width || s;\n    const h = height || s;\n    const path = new Path();\n    path.moveTo(0, 0).lineTo(w, h).moveTo(0, h).lineTo(w, 0);\n    return Object.assign(Object.assign({}, attrs), { tagName: 'path', fill: 'none', d: normalize(path.serialize(), offset || -w / 2) });\n};\n//# sourceMappingURL=cross.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Path } from '@antv/x6-geometry';\nimport { normalize } from './util';\nexport const async = (_a) => {\n    var { width, height, offset, open, flip } = _a, attrs = __rest(_a, [\"width\", \"height\", \"offset\", \"open\", \"flip\"]);\n    let h = height || 6;\n    const w = width || 10;\n    const opened = open === true;\n    const fliped = flip === true;\n    const result = Object.assign(Object.assign({}, attrs), { tagName: 'path' });\n    if (fliped) {\n        h = -h;\n    }\n    const path = new Path();\n    path.moveTo(0, h).lineTo(w, 0);\n    if (!opened) {\n        path.lineTo(w, h);\n        path.close();\n    }\n    else {\n        result.fill = 'none';\n    }\n    result.d = normalize(path.serialize(), {\n        x: offset || -w / 2,\n        y: h / 2,\n    });\n    return result;\n};\n//# sourceMappingURL=async.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Path } from '@antv/x6-geometry';\nimport { normalize } from './util';\nexport const circle = (_a) => {\n    var { r } = _a, attrs = __rest(_a, [\"r\"]);\n    const radius = r || 5;\n    return Object.assign(Object.assign({ cx: radius }, attrs), { tagName: 'circle', r: radius });\n};\nexport const circlePlus = (_a) => {\n    var { r } = _a, attrs = __rest(_a, [\"r\"]);\n    const radius = r || 5;\n    const path = new Path();\n    path.moveTo(radius, 0).lineTo(radius, radius * 2);\n    path.moveTo(0, radius).lineTo(radius * 2, radius);\n    return {\n        children: [\n            Object.assign(Object.assign({}, circle({ r: radius })), { fill: 'none' }),\n            Object.assign(Object.assign({}, attrs), { tagName: 'path', d: normalize(path.serialize(), -radius) }),\n        ],\n    };\n};\n//# sourceMappingURL=circle.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nexport const ellipse = (_a) => {\n    var { rx, ry } = _a, attrs = __rest(_a, [\"rx\", \"ry\"]);\n    const radiusX = rx || 5;\n    const radiusy = ry || 5;\n    return Object.assign(Object.assign({ cx: radiusX }, attrs), { tagName: 'ellipse', rx: radiusX, ry: radiusy });\n};\n//# sourceMappingURL=ellipse.js.map","import { Registry } from '../registry';\nimport * as markers from './main';\nimport { normalize as normalizeMarker } from './util';\nexport var Marker;\n(function (Marker) {\n    Marker.presets = markers;\n    Marker.registry = Registry.create({\n        type: 'marker',\n    });\n    Marker.registry.register(Marker.presets, true);\n})(Marker || (Marker = {}));\n(function (Marker) {\n    Marker.normalize = normalizeMarker;\n})(Marker || (Marker = {}));\n//# sourceMappingURL=index.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { ObjectExt } from '@antv/x6-common';\nimport { Marker } from '../marker';\nfunction qualify(value) {\n    return typeof value === 'string' || ObjectExt.isPlainObject(value);\n}\nexport const sourceMarker = {\n    qualify,\n    set(marker, { view, attrs }) {\n        return createMarker('marker-start', marker, view, attrs);\n    },\n};\nexport const targetMarker = {\n    qualify,\n    set(marker, { view, attrs }) {\n        return createMarker('marker-end', marker, view, attrs, {\n            transform: 'rotate(180)',\n        });\n    },\n};\nexport const vertexMarker = {\n    qualify,\n    set(marker, { view, attrs }) {\n        return createMarker('marker-mid', marker, view, attrs);\n    },\n};\nfunction createMarker(type, marker, view, attrs, manual = {}) {\n    const def = typeof marker === 'string' ? { name: marker } : marker;\n    const { name, args } = def, others = __rest(def, [\"name\", \"args\"]);\n    let preset = others;\n    if (name && typeof name === 'string') {\n        const fn = Marker.registry.get(name);\n        if (fn) {\n            preset = fn(Object.assign(Object.assign({}, others), args));\n        }\n        else {\n            return Marker.registry.onNotFound(name);\n        }\n    }\n    const options = Object.assign(Object.assign(Object.assign({}, normalizeAttr(attrs, type)), manual), preset);\n    return {\n        [type]: `url(#${view.graph.defineMarker(options)})`,\n    };\n}\nfunction normalizeAttr(attr, type) {\n    const result = {};\n    // The context 'fill' is disregared here. The usual case is to use the\n    // marker with a connection(for which 'fill' attribute is set to 'none').\n    const stroke = attr.stroke;\n    if (typeof stroke === 'string') {\n        result.stroke = stroke;\n        result.fill = stroke;\n    }\n    // Again the context 'fill-opacity' is ignored.\n    let strokeOpacity = attr.strokeOpacity;\n    if (strokeOpacity == null) {\n        strokeOpacity = attr['stroke-opacity'];\n    }\n    if (strokeOpacity == null) {\n        strokeOpacity = attr.opacity;\n    }\n    if (strokeOpacity != null) {\n        result['stroke-opacity'] = strokeOpacity;\n        result['fill-opacity'] = strokeOpacity;\n    }\n    if (type !== 'marker-mid') {\n        const strokeWidth = parseFloat((attr.strokeWidth || attr['stroke-width']));\n        if (Number.isFinite(strokeWidth) && strokeWidth > 1) {\n            const offset = Math.ceil(strokeWidth / 2);\n            result.refX = type === 'marker-start' ? offset : -offset;\n        }\n    }\n    return result;\n}\n//# sourceMappingURL=marker.js.map","const isEdgeView = (val, { view }) => {\n    return view.cell.isEdge();\n};\nexport const connection = {\n    qualify: isEdgeView,\n    set(val, args) {\n        var _a, _b, _c, _d;\n        const view = args.view;\n        const reverse = (val.reverse || false);\n        const stubs = (val.stubs || 0);\n        let d;\n        if (Number.isFinite(stubs) && stubs !== 0) {\n            if (!reverse) {\n                let offset;\n                if (stubs < 0) {\n                    const len = view.getConnectionLength() || 0;\n                    offset = (len + stubs) / 2;\n                }\n                else {\n                    offset = stubs;\n                }\n                const path = view.getConnection();\n                if (path) {\n                    const sourceParts = path.divideAtLength(offset);\n                    const targetParts = path.divideAtLength(-offset);\n                    if (sourceParts && targetParts) {\n                        d = `${sourceParts[0].serialize()} ${targetParts[1].serialize()}`;\n                    }\n                }\n            }\n            else {\n                let offset;\n                let length;\n                const len = view.getConnectionLength() || 0;\n                if (stubs < 0) {\n                    offset = (len + stubs) / 2;\n                    length = -stubs;\n                }\n                else {\n                    offset = stubs;\n                    length = len - stubs * 2;\n                }\n                const path = view.getConnection();\n                d = (_d = (_c = (_b = (_a = path === null || path === void 0 ? void 0 : path.divideAtLength(offset)) === null || _a === void 0 ? void 0 : _a[1]) === null || _b === void 0 ? void 0 : _b.divideAtLength(length)) === null || _c === void 0 ? void 0 : _c[0]) === null || _d === void 0 ? void 0 : _d.serialize();\n            }\n        }\n        return { d: d || view.getConnectionPathData() };\n    },\n};\nexport const atConnectionLengthKeepGradient = {\n    qualify: isEdgeView,\n    set: atConnectionWrapper('getTangentAtLength', { rotate: true }),\n};\nexport const atConnectionLengthIgnoreGradient = {\n    qualify: isEdgeView,\n    set: atConnectionWrapper('getTangentAtLength', { rotate: false }),\n};\nexport const atConnectionRatioKeepGradient = {\n    qualify: isEdgeView,\n    set: atConnectionWrapper('getTangentAtRatio', { rotate: true }),\n};\nexport const atConnectionRatioIgnoreGradient = {\n    qualify: isEdgeView,\n    set: atConnectionWrapper('getTangentAtRatio', { rotate: false }),\n};\n// aliases\n// -------\nexport const atConnectionLength = atConnectionLengthKeepGradient;\nexport const atConnectionRatio = atConnectionRatioKeepGradient;\n// utils\n// -----\nfunction atConnectionWrapper(method, options) {\n    const zeroVector = { x: 1, y: 0 };\n    return (value, args) => {\n        let p;\n        let angle;\n        const view = args.view;\n        const tangent = view[method](Number(value));\n        if (tangent) {\n            angle = options.rotate ? tangent.vector().vectorAngle(zeroVector) : 0;\n            p = tangent.start;\n        }\n        else {\n            p = view.path.start;\n            angle = 0;\n        }\n        if (angle === 0) {\n            return { transform: `translate(${p.x},${p.y}')` };\n        }\n        return {\n            transform: `translate(${p.x},${p.y}') rotate(${angle})`,\n        };\n    };\n}\n//# sourceMappingURL=connection.js.map","import { FunctionExt } from '@antv/x6-common';\nimport { Registry } from '../registry';\nimport { raw } from './raw';\nimport * as attrs from './main';\nexport var Attr;\n(function (Attr) {\n    function isValidDefinition(def, val, options) {\n        if (def != null) {\n            if (typeof def === 'string') {\n                return true;\n            }\n            if (typeof def.qualify !== 'function' ||\n                FunctionExt.call(def.qualify, this, val, options)) {\n                return true;\n            }\n        }\n        return false;\n    }\n    Attr.isValidDefinition = isValidDefinition;\n})(Attr || (Attr = {}));\n(function (Attr) {\n    Attr.presets = Object.assign(Object.assign({}, raw), attrs);\n    Attr.registry = Registry.create({\n        type: 'attribute definition',\n    });\n    Attr.registry.register(Attr.presets, true);\n})(Attr || (Attr = {}));\n//# sourceMappingURL=index.js.map","export const Config = {\n    prefixCls: 'x6',\n    autoInsertCSS: true,\n    useCSSSelector: true,\n    prefix(suffix) {\n        return `${Config.prefixCls}-${suffix}`;\n    },\n};\n//# sourceMappingURL=index.js.map","import { Dom } from '@antv/x6-common';\nimport { Config } from '../../config';\nconst defaultClassName = Config.prefix('highlighted');\nexport const className = {\n    highlight(cellView, magnet, options) {\n        const cls = (options && options.className) || defaultClassName;\n        Dom.addClass(magnet, cls);\n    },\n    unhighlight(cellView, magnet, options) {\n        const cls = (options && options.className) || defaultClassName;\n        Dom.removeClass(magnet, cls);\n    },\n};\n//# sourceMappingURL=class.js.map","import { Dom } from '@antv/x6-common';\nimport { Config } from '../../config';\nconst className = Config.prefix('highlight-opacity');\nexport const opacity = {\n    highlight(cellView, magnet) {\n        Dom.addClass(magnet, className);\n    },\n    unhighlight(cellView, magnetEl) {\n        Dom.removeClass(magnetEl, className);\n    },\n};\n//# sourceMappingURL=opacity.js.map","import { Point, Line, Rectangle, Polyline, Ellipse, Path, } from '@antv/x6-geometry';\nimport { Dom } from '@antv/x6-common';\nimport { normalize } from '../registry/marker/util';\nexport var Util;\n(function (Util) {\n    Util.normalizeMarker = normalize;\n    /**\n     * Transforms point by an SVG transformation represented by `matrix`.\n     */\n    function transformPoint(point, matrix) {\n        const ret = Dom.createSVGPoint(point.x, point.y).matrixTransform(matrix);\n        return new Point(ret.x, ret.y);\n    }\n    Util.transformPoint = transformPoint;\n    /**\n     * Transforms line by an SVG transformation represented by `matrix`.\n     */\n    function transformLine(line, matrix) {\n        return new Line(transformPoint(line.start, matrix), transformPoint(line.end, matrix));\n    }\n    Util.transformLine = transformLine;\n    /**\n     * Transforms polyline by an SVG transformation represented by `matrix`.\n     */\n    function transformPolyline(polyline, matrix) {\n        let points = polyline instanceof Polyline ? polyline.points : polyline;\n        if (!Array.isArray(points)) {\n            points = [];\n        }\n        return new Polyline(points.map((p) => transformPoint(p, matrix)));\n    }\n    Util.transformPolyline = transformPolyline;\n    function transformRectangle(rect, matrix) {\n        const svgDocument = Dom.createSvgElement('svg');\n        const p = svgDocument.createSVGPoint();\n        p.x = rect.x;\n        p.y = rect.y;\n        const corner1 = p.matrixTransform(matrix);\n        p.x = rect.x + rect.width;\n        p.y = rect.y;\n        const corner2 = p.matrixTransform(matrix);\n        p.x = rect.x + rect.width;\n        p.y = rect.y + rect.height;\n        const corner3 = p.matrixTransform(matrix);\n        p.x = rect.x;\n        p.y = rect.y + rect.height;\n        const corner4 = p.matrixTransform(matrix);\n        const minX = Math.min(corner1.x, corner2.x, corner3.x, corner4.x);\n        const maxX = Math.max(corner1.x, corner2.x, corner3.x, corner4.x);\n        const minY = Math.min(corner1.y, corner2.y, corner3.y, corner4.y);\n        const maxY = Math.max(corner1.y, corner2.y, corner3.y, corner4.y);\n        return new Rectangle(minX, minY, maxX - minX, maxY - minY);\n    }\n    Util.transformRectangle = transformRectangle;\n    /**\n     * Returns the bounding box of the element after transformations are\n     * applied. If `withoutTransformations` is `true`, transformations of\n     * the element will not be considered when computing the bounding box.\n     * If `target` is specified, bounding box will be computed relatively\n     * to the `target` element.\n     */\n    function bbox(elem, withoutTransformations, target) {\n        let box;\n        const ownerSVGElement = elem.ownerSVGElement;\n        // If the element is not in the live DOM, it does not have a bounding\n        // box defined and so fall back to 'zero' dimension element.\n        if (!ownerSVGElement) {\n            return new Rectangle(0, 0, 0, 0);\n        }\n        try {\n            box = elem.getBBox();\n        }\n        catch (e) {\n            // Fallback for IE.\n            box = {\n                x: elem.clientLeft,\n                y: elem.clientTop,\n                width: elem.clientWidth,\n                height: elem.clientHeight,\n            };\n        }\n        if (withoutTransformations) {\n            return Rectangle.create(box);\n        }\n        const matrix = Dom.getTransformToElement(elem, target || ownerSVGElement);\n        return transformRectangle(box, matrix);\n    }\n    Util.bbox = bbox;\n    /**\n     * Returns the bounding box of the element after transformations are\n     * applied. Unlike `bbox()`, this function fixes a browser implementation\n     * bug to return the correct bounding box if this elemenent is a group of\n     * svg elements (if `options.recursive` is specified).\n     */\n    function getBBox(elem, options = {}) {\n        let outputBBox;\n        const ownerSVGElement = elem.ownerSVGElement;\n        // If the element is not in the live DOM, it does not have a bounding box\n        // defined and so fall back to 'zero' dimension element.\n        // If the element is not an SVGGraphicsElement, we could not measure the\n        // bounding box either\n        if (!ownerSVGElement || !Dom.isSVGGraphicsElement(elem)) {\n            if (Dom.isHTMLElement(elem)) {\n                // If the element is a HTMLElement, return the position relative to the body\n                const { left, top, width, height } = getBoundingOffsetRect(elem);\n                return new Rectangle(left, top, width, height);\n            }\n            return new Rectangle(0, 0, 0, 0);\n        }\n        let target = options.target;\n        const recursive = options.recursive;\n        if (!recursive) {\n            try {\n                outputBBox = elem.getBBox();\n            }\n            catch (e) {\n                outputBBox = {\n                    x: elem.clientLeft,\n                    y: elem.clientTop,\n                    width: elem.clientWidth,\n                    height: elem.clientHeight,\n                };\n            }\n            if (!target) {\n                return Rectangle.create(outputBBox);\n            }\n            // transform like target\n            const matrix = Dom.getTransformToElement(elem, target);\n            return transformRectangle(outputBBox, matrix);\n        }\n        // recursive\n        {\n            const children = elem.childNodes;\n            const n = children.length;\n            if (n === 0) {\n                return getBBox(elem, {\n                    target,\n                });\n            }\n            if (!target) {\n                target = elem; // eslint-disable-line\n            }\n            for (let i = 0; i < n; i += 1) {\n                const child = children[i];\n                let childBBox;\n                if (child.childNodes.length === 0) {\n                    childBBox = getBBox(child, {\n                        target,\n                    });\n                }\n                else {\n                    // if child is a group element, enter it with a recursive call\n                    childBBox = getBBox(child, {\n                        target,\n                        recursive: true,\n                    });\n                }\n                if (!outputBBox) {\n                    outputBBox = childBBox;\n                }\n                else {\n                    outputBBox = outputBBox.union(childBBox);\n                }\n            }\n            return outputBBox;\n        }\n    }\n    Util.getBBox = getBBox;\n    function getBoundingOffsetRect(elem) {\n        let left = 0;\n        let top = 0;\n        let width = 0;\n        let height = 0;\n        if (elem) {\n            let current = elem;\n            while (current) {\n                left += current.offsetLeft;\n                top += current.offsetTop;\n                current = current.offsetParent;\n                if (current) {\n                    left += parseInt(Dom.getComputedStyle(current, 'borderLeft'), 10);\n                    top += parseInt(Dom.getComputedStyle(current, 'borderTop'), 10);\n                }\n            }\n            width = elem.offsetWidth;\n            height = elem.offsetHeight;\n        }\n        return {\n            left,\n            top,\n            width,\n            height,\n        };\n    }\n    Util.getBoundingOffsetRect = getBoundingOffsetRect;\n    /**\n     * Convert the SVGElement to an equivalent geometric shape. The element's\n     * transformations are not taken into account.\n     *\n     * SVGRectElement      => Rectangle\n     *\n     * SVGLineElement      => Line\n     *\n     * SVGCircleElement    => Ellipse\n     *\n     * SVGEllipseElement   => Ellipse\n     *\n     * SVGPolygonElement   => Polyline\n     *\n     * SVGPolylineElement  => Polyline\n     *\n     * SVGPathElement      => Path\n     *\n     * others              => Rectangle\n     */\n    function toGeometryShape(elem) {\n        const attr = (name) => {\n            const s = elem.getAttribute(name);\n            const v = s ? parseFloat(s) : 0;\n            return Number.isNaN(v) ? 0 : v;\n        };\n        switch (elem instanceof SVGElement && elem.nodeName.toLowerCase()) {\n            case 'rect':\n                return new Rectangle(attr('x'), attr('y'), attr('width'), attr('height'));\n            case 'circle':\n                return new Ellipse(attr('cx'), attr('cy'), attr('r'), attr('r'));\n            case 'ellipse':\n                return new Ellipse(attr('cx'), attr('cy'), attr('rx'), attr('ry'));\n            case 'polyline': {\n                const points = Dom.getPointsFromSvgElement(elem);\n                return new Polyline(points);\n            }\n            case 'polygon': {\n                const points = Dom.getPointsFromSvgElement(elem);\n                if (points.length > 1) {\n                    points.push(points[0]);\n                }\n                return new Polyline(points);\n            }\n            case 'path': {\n                let d = elem.getAttribute('d');\n                if (!Path.isValid(d)) {\n                    d = Path.normalize(d);\n                }\n                return Path.parse(d);\n            }\n            case 'line': {\n                return new Line(attr('x1'), attr('y1'), attr('x2'), attr('y2'));\n            }\n            default:\n                break;\n        }\n        // Anything else is a rectangle\n        return getBBox(elem);\n    }\n    Util.toGeometryShape = toGeometryShape;\n    function translateAndAutoOrient(elem, position, reference, target) {\n        const pos = Point.create(position);\n        const ref = Point.create(reference);\n        if (!target) {\n            const svg = elem instanceof SVGSVGElement ? elem : elem.ownerSVGElement;\n            target = svg; // eslint-disable-line\n        }\n        // Clean-up previously set transformations except the scale.\n        // If we didn't clean up the previous transformations then they'd\n        // add up with the old ones. Scale is an exception as it doesn't\n        // add up, consider: `this.scale(2).scale(2).scale(2)`. The result\n        // is that the element is scaled by the factor 2, not 8.\n        const s = Dom.scale(elem);\n        elem.setAttribute('transform', '');\n        const bbox = getBBox(elem, {\n            target,\n        }).scale(s.sx, s.sy);\n        // 1. Translate to origin.\n        const translateToOrigin = Dom.createSVGTransform();\n        translateToOrigin.setTranslate(-bbox.x - bbox.width / 2, -bbox.y - bbox.height / 2);\n        // 2. Rotate around origin.\n        const rotateAroundOrigin = Dom.createSVGTransform();\n        const angle = pos.angleBetween(ref, pos.clone().translate(1, 0));\n        if (angle)\n            rotateAroundOrigin.setRotate(angle, 0, 0);\n        // 3. Translate to the `position` + the offset (half my width)\n        //    towards the `reference` point.\n        const translateFromOrigin = Dom.createSVGTransform();\n        const finalPosition = pos.clone().move(ref, bbox.width / 2);\n        translateFromOrigin.setTranslate(2 * pos.x - finalPosition.x, 2 * pos.y - finalPosition.y);\n        // 4. Get the current transformation matrix of this node\n        const ctm = Dom.getTransformToElement(elem, target);\n        // 5. Apply transformations and the scale\n        const transform = Dom.createSVGTransform();\n        transform.setMatrix(translateFromOrigin.matrix.multiply(rotateAroundOrigin.matrix.multiply(translateToOrigin.matrix.multiply(ctm.scale(s.sx, s.sy)))));\n        elem.setAttribute('transform', Dom.matrixToTransformString(transform.matrix));\n    }\n    Util.translateAndAutoOrient = translateAndAutoOrient;\n    function findShapeNode(magnet) {\n        if (magnet == null) {\n            return null;\n        }\n        let node = magnet;\n        do {\n            let tagName = node.tagName;\n            if (typeof tagName !== 'string')\n                return null;\n            tagName = tagName.toUpperCase();\n            if (Dom.hasClass(node, 'x6-port')) {\n                node = node.nextElementSibling;\n            }\n            else if (tagName === 'G') {\n                node = node.firstElementChild;\n            }\n            else if (tagName === 'TITLE') {\n                node = node.nextElementSibling;\n            }\n            else\n                break;\n        } while (node);\n        return node;\n    }\n    Util.findShapeNode = findShapeNode;\n    // BBox is calculated by the attribute and shape of the node.\n    // Because of the reduction in DOM API calls, there is a significant performance improvement.\n    function getBBoxV2(elem) {\n        const node = findShapeNode(elem);\n        if (!Dom.isSVGGraphicsElement(node)) {\n            if (Dom.isHTMLElement(elem)) {\n                const { left, top, width, height } = getBoundingOffsetRect(elem);\n                return new Rectangle(left, top, width, height);\n            }\n            return new Rectangle(0, 0, 0, 0);\n        }\n        const shape = toGeometryShape(node);\n        const bbox = shape.bbox() || Rectangle.create();\n        // const transform = node.getAttribute('transform')\n        // if (transform) {\n        //   const nodeMatrix = Dom.transformStringToMatrix(transform)\n        //   return transformRectangle(bbox, nodeMatrix)\n        // }\n        return bbox;\n    }\n    Util.getBBoxV2 = getBBoxV2;\n})(Util || (Util = {}));\n//# sourceMappingURL=index.js.map","import { ObjectExt, Dom, Vector } from '@antv/x6-common';\nimport { Config } from '../../config';\nimport { Util } from '../../util';\nconst defaultOptions = {\n    padding: 3,\n    rx: 0,\n    ry: 0,\n    attrs: {\n        'stroke-width': 3,\n        stroke: '#FEB663',\n    },\n};\nexport const stroke = {\n    highlight(cellView, magnet, options) {\n        const id = Private.getHighlighterId(magnet, options);\n        if (Private.hasCache(id)) {\n            return;\n        }\n        // eslint-disable-next-line\n        options = ObjectExt.defaultsDeep({}, options, defaultOptions);\n        const magnetVel = Vector.create(magnet);\n        let pathData;\n        let magnetBBox;\n        try {\n            pathData = magnetVel.toPathData();\n        }\n        catch (error) {\n            // Failed to get path data from magnet element.\n            // Draw a rectangle around the entire cell view instead.\n            magnetBBox = Util.bbox(magnetVel.node, true);\n            pathData = Dom.rectToPathData(Object.assign(Object.assign({}, options), magnetBBox));\n        }\n        const path = Dom.createSvgElement('path');\n        Dom.attr(path, Object.assign({ d: pathData, 'pointer-events': 'none', 'vector-effect': 'non-scaling-stroke', fill: 'none' }, (options.attrs ? Dom.kebablizeAttrs(options.attrs) : null)));\n        // const highlightVel = v.create('path').attr()\n        if (cellView.isEdgeElement(magnet)) {\n            Dom.attr(path, 'd', cellView.getConnectionPathData());\n        }\n        else {\n            let highlightMatrix = magnetVel.getTransformToElement(cellView.container);\n            // Add padding to the highlight element.\n            const padding = options.padding;\n            if (padding) {\n                if (magnetBBox == null) {\n                    magnetBBox = Util.bbox(magnetVel.node, true);\n                }\n                const cx = magnetBBox.x + magnetBBox.width / 2;\n                const cy = magnetBBox.y + magnetBBox.height / 2;\n                magnetBBox = Util.transformRectangle(magnetBBox, highlightMatrix);\n                const width = Math.max(magnetBBox.width, 1);\n                const height = Math.max(magnetBBox.height, 1);\n                const sx = (width + padding) / width;\n                const sy = (height + padding) / height;\n                const paddingMatrix = Dom.createSVGMatrix({\n                    a: sx,\n                    b: 0,\n                    c: 0,\n                    d: sy,\n                    e: cx - sx * cx,\n                    f: cy - sy * cy,\n                });\n                highlightMatrix = highlightMatrix.multiply(paddingMatrix);\n            }\n            Dom.transform(path, highlightMatrix);\n        }\n        Dom.addClass(path, Config.prefix('highlight-stroke'));\n        const cell = cellView.cell;\n        const removeHandler = () => Private.removeHighlighter(id);\n        cell.on('removed', removeHandler);\n        if (cell.model) {\n            cell.model.on('reseted', removeHandler);\n        }\n        cellView.container.appendChild(path);\n        Private.setCache(id, path);\n    },\n    unhighlight(cellView, magnet, opt) {\n        Private.removeHighlighter(Private.getHighlighterId(magnet, opt));\n    },\n};\nvar Private;\n(function (Private) {\n    function getHighlighterId(magnet, options) {\n        Dom.ensureId(magnet);\n        return magnet.id + JSON.stringify(options);\n    }\n    Private.getHighlighterId = getHighlighterId;\n    const cache = {};\n    function setCache(id, elem) {\n        cache[id] = elem;\n    }\n    Private.setCache = setCache;\n    function hasCache(id) {\n        return cache[id] != null;\n    }\n    Private.hasCache = hasCache;\n    function removeHighlighter(id) {\n        const elem = cache[id];\n        if (elem) {\n            Dom.remove(elem);\n            delete cache[id];\n        }\n    }\n    Private.removeHighlighter = removeHighlighter;\n})(Private || (Private = {}));\n//# sourceMappingURL=stroke.js.map","import { Registry } from '../registry';\nimport * as highlighters from './main';\nexport var Highlighter;\n(function (Highlighter) {\n    function check(name, highlighter) {\n        if (typeof highlighter.highlight !== 'function') {\n            throw new Error(`Highlighter '${name}' is missing required \\`highlight()\\` method`);\n        }\n        if (typeof highlighter.unhighlight !== 'function') {\n            throw new Error(`Highlighter '${name}' is missing required \\`unhighlight()\\` method`);\n        }\n    }\n    Highlighter.check = check;\n})(Highlighter || (Highlighter = {}));\n(function (Highlighter) {\n    Highlighter.presets = highlighters;\n    Highlighter.registry = Registry.create({\n        type: 'highlighter',\n    });\n    Highlighter.registry.register(Highlighter.presets, true);\n})(Highlighter || (Highlighter = {}));\n//# sourceMappingURL=index.js.map","import { NumberExt } from '@antv/x6-common';\nimport { Point } from '@antv/x6-geometry';\nexport function normalizePoint(bbox, args = {}) {\n    return new Point(NumberExt.normalizePercentage(args.x, bbox.width), NumberExt.normalizePercentage(args.y, bbox.height));\n}\nexport function toResult(point, angle, rawArgs) {\n    return Object.assign({ angle, position: point.toJSON() }, rawArgs);\n}\n//# sourceMappingURL=util.js.map","import { normalizePoint, toResult } from './util';\nexport const absolute = (portsPositionArgs, elemBBox) => {\n    return portsPositionArgs.map(({ x, y, angle }) => toResult(normalizePoint(elemBBox, { x, y }), angle || 0));\n};\n//# sourceMappingURL=absolute.js.map","import { Ellipse } from '@antv/x6-geometry';\nimport { toResult } from './util';\nexport const ellipse = (portsPositionArgs, elemBBox, groupPositionArgs) => {\n    const startAngle = groupPositionArgs.start || 0;\n    const stepAngle = groupPositionArgs.step || 20;\n    return ellipseLayout(portsPositionArgs, elemBBox, startAngle, (index, count) => (index + 0.5 - count / 2) * stepAngle);\n};\nexport const ellipseSpread = (portsPositionArgs, elemBBox, groupPositionArgs) => {\n    const startAngle = groupPositionArgs.start || 0;\n    const stepAngle = groupPositionArgs.step || 360 / portsPositionArgs.length;\n    return ellipseLayout(portsPositionArgs, elemBBox, startAngle, (index) => {\n        return index * stepAngle;\n    });\n};\nfunction ellipseLayout(portsPositionArgs, elemBBox, startAngle, stepFn) {\n    const center = elemBBox.getCenter();\n    const start = elemBBox.getTopCenter();\n    const ratio = elemBBox.width / elemBBox.height;\n    const ellipse = Ellipse.fromRect(elemBBox);\n    const count = portsPositionArgs.length;\n    return portsPositionArgs.map((item, index) => {\n        const angle = startAngle + stepFn(index, count);\n        const p = start.clone().rotate(-angle, center).scale(ratio, 1, center);\n        const theta = item.compensateRotate ? -ellipse.tangentTheta(p) : 0;\n        if (item.dx || item.dy) {\n            p.translate(item.dx || 0, item.dy || 0);\n        }\n        if (item.dr) {\n            p.move(center, item.dr);\n        }\n        return toResult(p.round(), theta, item);\n    });\n}\n//# sourceMappingURL=ellipse.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Line } from '@antv/x6-geometry';\nimport { normalizePoint, toResult } from './util';\nexport const line = (portsPositionArgs, elemBBox, groupPositionArgs) => {\n    const start = normalizePoint(elemBBox, groupPositionArgs.start || elemBBox.getOrigin());\n    const end = normalizePoint(elemBBox, groupPositionArgs.end || elemBBox.getCorner());\n    return lineLayout(portsPositionArgs, start, end, groupPositionArgs);\n};\nexport const left = (portsPositionArgs, elemBBox, groupPositionArgs) => {\n    return lineLayout(portsPositionArgs, elemBBox.getTopLeft(), elemBBox.getBottomLeft(), groupPositionArgs);\n};\nexport const right = (portsPositionArgs, elemBBox, groupPositionArgs) => {\n    return lineLayout(portsPositionArgs, elemBBox.getTopRight(), elemBBox.getBottomRight(), groupPositionArgs);\n};\nexport const top = (portsPositionArgs, elemBBox, groupPositionArgs) => {\n    return lineLayout(portsPositionArgs, elemBBox.getTopLeft(), elemBBox.getTopRight(), groupPositionArgs);\n};\nexport const bottom = (portsPositionArgs, elemBBox, groupPositionArgs) => {\n    return lineLayout(portsPositionArgs, elemBBox.getBottomLeft(), elemBBox.getBottomRight(), groupPositionArgs);\n};\nfunction lineLayout(portsPositionArgs, p1, p2, groupPositionArgs) {\n    const line = new Line(p1, p2);\n    const length = portsPositionArgs.length;\n    return portsPositionArgs.map((_a, index) => {\n        var { strict } = _a, offset = __rest(_a, [\"strict\"]);\n        const ratio = strict || groupPositionArgs.strict\n            ? (index + 1) / (length + 1)\n            : (index + 0.5) / length;\n        const p = line.pointAt(ratio);\n        if (offset.dx || offset.dy) {\n            p.translate(offset.dx || 0, offset.dy || 0);\n        }\n        return toResult(p.round(), 0, offset);\n    });\n}\n//# sourceMappingURL=line.js.map","import { Registry } from '../registry';\nimport * as layouts from './main';\nexport var PortLayout;\n(function (PortLayout) {\n    PortLayout.presets = layouts;\n    PortLayout.registry = Registry.create({\n        type: 'port layout',\n    });\n    PortLayout.registry.register(PortLayout.presets, true);\n})(PortLayout || (PortLayout = {}));\n//# sourceMappingURL=index.js.map","import { ObjectExt } from '@antv/x6-common';\nconst defaults = {\n    position: { x: 0, y: 0 },\n    angle: 0,\n    attrs: {\n        '.': {\n            y: '0',\n            'text-anchor': 'start',\n        },\n    },\n};\nexport function toResult(preset, args) {\n    const { x, y, angle, attrs } = args || {};\n    return ObjectExt.defaultsDeep({}, { angle, attrs, position: { x, y } }, preset, defaults);\n}\n//# sourceMappingURL=util.js.map","import { toResult } from './util';\nexport const manual = (portPosition, elemBBox, args) => toResult({ position: elemBBox.getTopLeft() }, args);\nexport const left = (portPosition, elemBBox, args) => toResult({\n    position: { x: -15, y: 0 },\n    attrs: { '.': { y: '.3em', 'text-anchor': 'end' } },\n}, args);\nexport const right = (portPosition, elemBBox, args) => toResult({\n    position: { x: 15, y: 0 },\n    attrs: { '.': { y: '.3em', 'text-anchor': 'start' } },\n}, args);\nexport const top = (portPosition, elemBBox, args) => toResult({\n    position: { x: 0, y: -15 },\n    attrs: { '.': { 'text-anchor': 'middle' } },\n}, args);\nexport const bottom = (portPosition, elemBBox, args) => toResult({\n    position: { x: 0, y: 15 },\n    attrs: { '.': { y: '.6em', 'text-anchor': 'middle' } },\n}, args);\n//# sourceMappingURL=side.js.map","import { toResult } from './util';\nexport const outside = (portPosition, elemBBox, args) => outsideLayout(portPosition, elemBBox, false, args);\nexport const outsideOriented = (portPosition, elemBBox, args) => outsideLayout(portPosition, elemBBox, true, args);\nexport const inside = (portPosition, elemBBox, args) => insideLayout(portPosition, elemBBox, false, args);\nexport const insideOriented = (portPosition, elemBBox, args) => insideLayout(portPosition, elemBBox, true, args);\nfunction outsideLayout(portPosition, elemBBox, autoOrient, args) {\n    const offset = args.offset != null ? args.offset : 15;\n    const angle = elemBBox.getCenter().theta(portPosition);\n    const bboxAngles = getBBoxAngles(elemBBox);\n    let y;\n    let tx;\n    let ty;\n    let textAnchor;\n    let orientAngle = 0;\n    if (angle < bboxAngles[1] || angle > bboxAngles[2]) {\n        y = '.3em';\n        tx = offset;\n        ty = 0;\n        textAnchor = 'start';\n    }\n    else if (angle < bboxAngles[0]) {\n        y = '0';\n        tx = 0;\n        ty = -offset;\n        if (autoOrient) {\n            orientAngle = -90;\n            textAnchor = 'start';\n        }\n        else {\n            textAnchor = 'middle';\n        }\n    }\n    else if (angle < bboxAngles[3]) {\n        y = '.3em';\n        tx = -offset;\n        ty = 0;\n        textAnchor = 'end';\n    }\n    else {\n        y = '.6em';\n        tx = 0;\n        ty = offset;\n        if (autoOrient) {\n            orientAngle = 90;\n            textAnchor = 'start';\n        }\n        else {\n            textAnchor = 'middle';\n        }\n    }\n    return toResult({\n        position: {\n            x: Math.round(tx),\n            y: Math.round(ty),\n        },\n        angle: orientAngle,\n        attrs: {\n            '.': {\n                y,\n                'text-anchor': textAnchor,\n            },\n        },\n    }, args);\n}\nfunction insideLayout(portPosition, elemBBox, autoOrient, args) {\n    const offset = args.offset != null ? args.offset : 15;\n    const angle = elemBBox.getCenter().theta(portPosition);\n    const bboxAngles = getBBoxAngles(elemBBox);\n    let y;\n    let tx;\n    let ty;\n    let textAnchor;\n    let orientAngle = 0;\n    if (angle < bboxAngles[1] || angle > bboxAngles[2]) {\n        y = '.3em';\n        tx = -offset;\n        ty = 0;\n        textAnchor = 'end';\n    }\n    else if (angle < bboxAngles[0]) {\n        y = '.6em';\n        tx = 0;\n        ty = offset;\n        if (autoOrient) {\n            orientAngle = 90;\n            textAnchor = 'start';\n        }\n        else {\n            textAnchor = 'middle';\n        }\n    }\n    else if (angle < bboxAngles[3]) {\n        y = '.3em';\n        tx = offset;\n        ty = 0;\n        textAnchor = 'start';\n    }\n    else {\n        y = '0em';\n        tx = 0;\n        ty = -offset;\n        if (autoOrient) {\n            orientAngle = -90;\n            textAnchor = 'start';\n        }\n        else {\n            textAnchor = 'middle';\n        }\n    }\n    return toResult({\n        position: {\n            x: Math.round(tx),\n            y: Math.round(ty),\n        },\n        angle: orientAngle,\n        attrs: {\n            '.': {\n                y,\n                'text-anchor': textAnchor,\n            },\n        },\n    }, args);\n}\nfunction getBBoxAngles(elemBBox) {\n    const center = elemBBox.getCenter();\n    const tl = center.theta(elemBBox.getTopLeft());\n    const bl = center.theta(elemBBox.getBottomLeft());\n    const br = center.theta(elemBBox.getBottomRight());\n    const tr = center.theta(elemBBox.getTopRight());\n    return [tl, tr, br, bl];\n}\n//# sourceMappingURL=inout.js.map","import { Point } from '@antv/x6-geometry';\nimport { toResult } from './util';\nexport const radial = (portPosition, elemBBox, args) => radialLayout(portPosition.diff(elemBBox.getCenter()), false, args);\nexport const radialOriented = (portPosition, elemBBox, args) => radialLayout(portPosition.diff(elemBBox.getCenter()), true, args);\nfunction radialLayout(portCenterOffset, autoOrient, args) {\n    const offset = args.offset != null ? args.offset : 20;\n    const origin = new Point(0, 0);\n    const angle = -portCenterOffset.theta(origin);\n    const pos = portCenterOffset\n        .clone()\n        .move(origin, offset)\n        .diff(portCenterOffset)\n        .round();\n    let y = '.3em';\n    let textAnchor;\n    let orientAngle = angle;\n    if ((angle + 90) % 180 === 0) {\n        textAnchor = autoOrient ? 'end' : 'middle';\n        if (!autoOrient && angle === -270) {\n            y = '0em';\n        }\n    }\n    else if (angle > -270 && angle < -90) {\n        textAnchor = 'start';\n        orientAngle = angle - 180;\n    }\n    else {\n        textAnchor = 'end';\n    }\n    return toResult({\n        position: pos.round().toJSON(),\n        angle: autoOrient ? orientAngle : 0,\n        attrs: {\n            '.': {\n                y,\n                'text-anchor': textAnchor,\n            },\n        },\n    }, args);\n}\n//# sourceMappingURL=radial.js.map","import { Registry } from '../registry';\nimport * as layouts from './main';\nexport var PortLabelLayout;\n(function (PortLabelLayout) {\n    PortLabelLayout.presets = layouts;\n    PortLabelLayout.registry = Registry.create({\n        type: 'port label layout',\n    });\n    PortLabelLayout.registry.register(PortLabelLayout.presets, true);\n})(PortLabelLayout || (PortLabelLayout = {}));\n//# sourceMappingURL=index.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Dom, Basecoat } from '@antv/x6-common';\nimport { Config } from '../config';\nexport class View extends Basecoat {\n    get priority() {\n        return 2;\n    }\n    /** If need remove `this.container` DOM */\n    get disposeContainer() {\n        return true;\n    }\n    constructor() {\n        super();\n        this.cid = Private.uniqueId();\n        View.views[this.cid] = this;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    confirmUpdate(flag, options) {\n        return 0;\n    }\n    empty(elem = this.container) {\n        Dom.empty(elem);\n        return this;\n    }\n    unmount(elem = this.container) {\n        Dom.remove(elem);\n        return this;\n    }\n    remove(elem = this.container) {\n        if (elem === this.container) {\n            this.removeEventListeners(document);\n            this.onRemove();\n            delete View.views[this.cid];\n            if (this.disposeContainer) {\n                this.unmount(elem);\n            }\n        }\n        else {\n            this.unmount(elem);\n        }\n        return this;\n    }\n    onRemove() { }\n    setClass(className, elem = this.container) {\n        elem.classList.value = Array.isArray(className)\n            ? className.join(' ')\n            : className;\n    }\n    addClass(className, elem = this.container) {\n        Dom.addClass(elem, Array.isArray(className) ? className.join(' ') : className);\n        return this;\n    }\n    removeClass(className, elem = this.container) {\n        Dom.removeClass(elem, Array.isArray(className) ? className.join(' ') : className);\n        return this;\n    }\n    setStyle(style, elem = this.container) {\n        Dom.css(elem, style);\n        return this;\n    }\n    setAttrs(attrs, elem = this.container) {\n        if (attrs != null && elem != null) {\n            Dom.attr(elem, attrs);\n        }\n        return this;\n    }\n    /**\n     * Returns the value of the specified attribute of `node`.\n     *\n     * If the node does not set a value for attribute, start recursing up\n     * the DOM tree from node to lookup for attribute at the ancestors of\n     * node. If the recursion reaches CellView's root node and attribute\n     * is not found even there, return `null`.\n     */\n    findAttr(attrName, elem = this.container) {\n        let current = elem;\n        while (current && current.nodeType === 1) {\n            const value = current.getAttribute(attrName);\n            if (value != null) {\n                return value;\n            }\n            if (current === this.container) {\n                return null;\n            }\n            current = current.parentNode;\n        }\n        return null;\n    }\n    find(selector, rootElem = this.container, selectors = this.selectors) {\n        return View.find(selector, rootElem, selectors).elems;\n    }\n    findOne(selector, rootElem = this.container, selectors = this.selectors) {\n        const nodes = this.find(selector, rootElem, selectors);\n        return nodes.length > 0 ? nodes[0] : null;\n    }\n    findByAttr(attrName, elem = this.container) {\n        let node = elem;\n        while (node && node.getAttribute) {\n            const val = node.getAttribute(attrName);\n            if ((val != null || node === this.container) && val !== 'false') {\n                return node;\n            }\n            node = node.parentNode;\n        }\n        // If the overall cell has set `magnet === false`, then returns\n        // `null` to announce there is no magnet found for this cell.\n        // This is especially useful to set on cells that have 'ports'.\n        // In this case, only the ports have set `magnet === true` and the\n        // overall element has `magnet === false`.\n        return null;\n    }\n    getSelector(elem, prevSelector) {\n        let selector;\n        if (elem === this.container) {\n            if (typeof prevSelector === 'string') {\n                selector = `> ${prevSelector}`;\n            }\n            return selector;\n        }\n        if (elem) {\n            const nth = Dom.index(elem) + 1;\n            selector = `${elem.tagName.toLowerCase()}:nth-child(${nth})`;\n            if (prevSelector) {\n                selector += ` > ${prevSelector}`;\n            }\n            selector = this.getSelector(elem.parentNode, selector);\n        }\n        return selector;\n    }\n    prefixClassName(className) {\n        return Config.prefix(className);\n    }\n    delegateEvents(events, append) {\n        if (events == null) {\n            return this;\n        }\n        if (!append) {\n            this.undelegateEvents();\n        }\n        const splitter = /^(\\S+)\\s*(.*)$/;\n        Object.keys(events).forEach((key) => {\n            const match = key.match(splitter);\n            if (match == null) {\n                return;\n            }\n            const method = this.getEventHandler(events[key]);\n            if (typeof method === 'function') {\n                this.delegateEvent(match[1], match[2], method);\n            }\n        });\n        return this;\n    }\n    undelegateEvents() {\n        Dom.Event.off(this.container, this.getEventNamespace());\n        return this;\n    }\n    delegateDocumentEvents(events, data) {\n        this.addEventListeners(document, events, data);\n        return this;\n    }\n    undelegateDocumentEvents() {\n        this.removeEventListeners(document);\n        return this;\n    }\n    delegateEvent(eventName, selector, listener) {\n        Dom.Event.on(this.container, eventName + this.getEventNamespace(), selector, listener);\n        return this;\n    }\n    undelegateEvent(eventName, selector, listener) {\n        const name = eventName + this.getEventNamespace();\n        if (selector == null) {\n            Dom.Event.off(this.container, name);\n        }\n        else if (typeof selector === 'string') {\n            Dom.Event.off(this.container, name, selector, listener);\n        }\n        else {\n            Dom.Event.off(this.container, name, selector);\n        }\n        return this;\n    }\n    addEventListeners(elem, events, data) {\n        if (events == null) {\n            return this;\n        }\n        const ns = this.getEventNamespace();\n        Object.keys(events).forEach((eventName) => {\n            const method = this.getEventHandler(events[eventName]);\n            if (typeof method === 'function') {\n                Dom.Event.on(elem, eventName + ns, data, method);\n            }\n        });\n        return this;\n    }\n    removeEventListeners(elem) {\n        if (elem != null) {\n            Dom.Event.off(elem, this.getEventNamespace());\n        }\n        return this;\n    }\n    getEventNamespace() {\n        return `.${Config.prefixCls}-event-${this.cid}`;\n    }\n    // eslint-disable-next-line\n    getEventHandler(handler) {\n        // eslint-disable-next-line\n        let method;\n        if (typeof handler === 'string') {\n            const fn = this[handler];\n            if (typeof fn === 'function') {\n                method = (...args) => fn.call(this, ...args);\n            }\n        }\n        else {\n            method = (...args) => handler.call(this, ...args);\n        }\n        return method;\n    }\n    getEventTarget(e, options = {}) {\n        // Touchmove/Touchend event's target is not reflecting the element\n        // under the coordinates as mousemove does.\n        // It holds the element when a touchstart triggered.\n        const { target, type, clientX = 0, clientY = 0 } = e;\n        if (options.fromPoint || type === 'touchmove' || type === 'touchend') {\n            return document.elementFromPoint(clientX, clientY);\n        }\n        return target;\n    }\n    stopPropagation(e) {\n        this.setEventData(e, { propagationStopped: true });\n        return this;\n    }\n    isPropagationStopped(e) {\n        return this.getEventData(e).propagationStopped === true;\n    }\n    getEventData(e) {\n        return this.eventData(e);\n    }\n    setEventData(e, data) {\n        return this.eventData(e, data);\n    }\n    eventData(e, data) {\n        if (e == null) {\n            throw new TypeError('Event object required');\n        }\n        let currentData = e.data;\n        const key = `__${this.cid}__`;\n        // get\n        if (data == null) {\n            if (currentData == null) {\n                return {};\n            }\n            return currentData[key] || {};\n        }\n        // set\n        if (currentData == null) {\n            currentData = e.data = {};\n        }\n        if (currentData[key] == null) {\n            currentData[key] = Object.assign({}, data);\n        }\n        else {\n            currentData[key] = Object.assign(Object.assign({}, currentData[key]), data);\n        }\n        return currentData[key];\n    }\n    normalizeEvent(evt) {\n        return View.normalizeEvent(evt);\n    }\n    dispose() {\n        this.remove();\n    }\n}\n__decorate([\n    View.dispose()\n], View.prototype, \"dispose\", null);\n(function (View) {\n    function createElement(tagName, isSvgElement) {\n        return isSvgElement\n            ? Dom.createSvgElement(tagName || 'g')\n            : Dom.createElementNS(tagName || 'div');\n    }\n    View.createElement = createElement;\n    function find(selector, rootElem, selectors) {\n        if (!selector || selector === '.') {\n            return { elems: [rootElem] };\n        }\n        if (selectors) {\n            const nodes = selectors[selector];\n            if (nodes) {\n                return { elems: Array.isArray(nodes) ? nodes : [nodes] };\n            }\n        }\n        if (Config.useCSSSelector) {\n            const validSelector = selector.includes('>')\n                ? `:scope ${selector}`\n                : selector;\n            return {\n                isCSSSelector: true,\n                // $(rootElem).find(selector).toArray() as Element[]\n                elems: Array.prototype.slice.call(rootElem.querySelectorAll(validSelector)),\n            };\n        }\n        return { elems: [] };\n    }\n    View.find = find;\n    function normalizeEvent(evt) {\n        let normalizedEvent = evt;\n        const originalEvent = evt.originalEvent;\n        const touchEvt = originalEvent &&\n            originalEvent.changedTouches &&\n            originalEvent.changedTouches[0];\n        if (touchEvt) {\n            // eslint-disable-next-line no-restricted-syntax\n            for (const key in evt) {\n                if (touchEvt[key] === undefined) {\n                    touchEvt[key] = evt[key];\n                }\n            }\n            normalizedEvent = touchEvt;\n        }\n        return normalizedEvent;\n    }\n    View.normalizeEvent = normalizeEvent;\n})(View || (View = {}));\n(function (View) {\n    View.views = {};\n    function getView(cid) {\n        return View.views[cid] || null;\n    }\n    View.getView = getView;\n})(View || (View = {}));\nvar Private;\n(function (Private) {\n    let counter = 0;\n    function uniqueId() {\n        const id = `v${counter}`;\n        counter += 1;\n        return id;\n    }\n    Private.uniqueId = uniqueId;\n})(Private || (Private = {}));\n//# sourceMappingURL=view.js.map","import { ObjectExt, Dom, Vector } from '@antv/x6-common';\n// eslint-disable-next-line\nexport var Markup;\n(function (Markup) {\n    function isJSONMarkup(markup) {\n        return markup != null && !isStringMarkup(markup);\n    }\n    Markup.isJSONMarkup = isJSONMarkup;\n    function isStringMarkup(markup) {\n        return markup != null && typeof markup === 'string';\n    }\n    Markup.isStringMarkup = isStringMarkup;\n    function clone(markup) {\n        return markup == null || isStringMarkup(markup)\n            ? markup\n            : ObjectExt.cloneDeep(markup);\n    }\n    Markup.clone = clone;\n    /**\n     * Removes blank space in markup to prevent create empty text node.\n     */\n    function sanitize(markup) {\n        return `${markup}`\n            .trim()\n            .replace(/[\\r|\\n]/g, ' ')\n            .replace(/>\\s+</g, '><');\n    }\n    Markup.sanitize = sanitize;\n    function parseJSONMarkup(markup, options = { ns: Dom.ns.svg }) {\n        const fragment = document.createDocumentFragment();\n        const groups = {};\n        const selectors = {};\n        const queue = [\n            {\n                markup: Array.isArray(markup) ? markup : [markup],\n                parent: fragment,\n                ns: options.ns,\n            },\n        ];\n        while (queue.length > 0) {\n            const item = queue.pop();\n            let ns = item.ns || Dom.ns.svg;\n            const defines = item.markup;\n            const parentNode = item.parent;\n            defines.forEach((define) => {\n                // tagName\n                const tagName = define.tagName;\n                if (!tagName) {\n                    throw new TypeError('Invalid tagName');\n                }\n                // ns\n                if (define.ns) {\n                    ns = define.ns;\n                }\n                const node = ns\n                    ? Dom.createElementNS(tagName, ns)\n                    : Dom.createElement(tagName);\n                // attrs\n                const attrs = define.attrs;\n                if (attrs) {\n                    Dom.attr(node, Dom.kebablizeAttrs(attrs));\n                }\n                // style\n                const style = define.style;\n                if (style) {\n                    Dom.css(node, style);\n                }\n                // classname\n                const className = define.className;\n                if (className != null) {\n                    node.setAttribute('class', Array.isArray(className) ? className.join(' ') : className);\n                }\n                // textContent\n                if (define.textContent) {\n                    node.textContent = define.textContent;\n                }\n                // selector\n                const selector = define.selector;\n                if (selector != null) {\n                    if (selectors[selector]) {\n                        throw new TypeError('Selector must be unique');\n                    }\n                    selectors[selector] = node;\n                }\n                // group\n                if (define.groupSelector) {\n                    let nodeGroups = define.groupSelector;\n                    if (!Array.isArray(nodeGroups)) {\n                        nodeGroups = [nodeGroups];\n                    }\n                    nodeGroups.forEach((name) => {\n                        if (!groups[name]) {\n                            groups[name] = [];\n                        }\n                        groups[name].push(node);\n                    });\n                }\n                parentNode.appendChild(node);\n                // children\n                const children = define.children;\n                if (Array.isArray(children)) {\n                    queue.push({ ns, markup: children, parent: node });\n                }\n            });\n        }\n        Object.keys(groups).forEach((groupName) => {\n            if (selectors[groupName]) {\n                throw new Error('Ambiguous group selector');\n            }\n            selectors[groupName] = groups[groupName];\n        });\n        return { fragment, selectors, groups };\n    }\n    Markup.parseJSONMarkup = parseJSONMarkup;\n    function createContainer(firstChild) {\n        return firstChild instanceof SVGElement\n            ? Dom.createSvgElement('g')\n            : Dom.createElement('div');\n    }\n    function renderMarkup(markup) {\n        if (isStringMarkup(markup)) {\n            const nodes = Vector.createVectors(markup);\n            const count = nodes.length;\n            if (count === 1) {\n                return {\n                    elem: nodes[0].node,\n                };\n            }\n            if (count > 1) {\n                const elem = createContainer(nodes[0].node);\n                nodes.forEach((node) => {\n                    elem.appendChild(node.node);\n                });\n                return { elem };\n            }\n            return {};\n        }\n        const result = parseJSONMarkup(markup);\n        const fragment = result.fragment;\n        let elem = null;\n        if (fragment.childNodes.length > 1) {\n            elem = createContainer(fragment.firstChild);\n            elem.appendChild(fragment);\n        }\n        else {\n            elem = fragment.firstChild;\n        }\n        return { elem, selectors: result.selectors };\n    }\n    Markup.renderMarkup = renderMarkup;\n    function parseLabelStringMarkup(markup) {\n        const children = Vector.createVectors(markup);\n        const fragment = document.createDocumentFragment();\n        for (let i = 0, n = children.length; i < n; i += 1) {\n            const currentChild = children[i].node;\n            fragment.appendChild(currentChild);\n        }\n        return { fragment, selectors: {} };\n    }\n    Markup.parseLabelStringMarkup = parseLabelStringMarkup;\n})(Markup || (Markup = {}));\n// eslint-disable-next-line\n(function (Markup) {\n    function getSelector(elem, stop, prev) {\n        if (elem != null) {\n            let selector;\n            const tagName = elem.tagName.toLowerCase();\n            if (elem === stop) {\n                if (typeof prev === 'string') {\n                    selector = `> ${tagName} > ${prev}`;\n                }\n                else {\n                    selector = `> ${tagName}`;\n                }\n                return selector;\n            }\n            const parent = elem.parentNode;\n            if (parent && parent.childNodes.length > 1) {\n                const nth = Dom.index(elem) + 1;\n                selector = `${tagName}:nth-child(${nth})`;\n            }\n            else {\n                selector = tagName;\n            }\n            if (prev) {\n                selector += ` > ${prev}`;\n            }\n            return getSelector(elem.parentNode, stop, selector);\n        }\n        return prev;\n    }\n    Markup.getSelector = getSelector;\n})(Markup || (Markup = {}));\n// eslint-disable-next-line\n(function (Markup) {\n    function getPortContainerMarkup() {\n        return 'g';\n    }\n    Markup.getPortContainerMarkup = getPortContainerMarkup;\n    function getPortMarkup() {\n        return {\n            tagName: 'circle',\n            selector: 'circle',\n            attrs: {\n                r: 10,\n                fill: '#FFFFFF',\n                stroke: '#000000',\n            },\n        };\n    }\n    Markup.getPortMarkup = getPortMarkup;\n    function getPortLabelMarkup() {\n        return {\n            tagName: 'text',\n            selector: 'text',\n            attrs: {\n                fill: '#000000',\n            },\n        };\n    }\n    Markup.getPortLabelMarkup = getPortLabelMarkup;\n})(Markup || (Markup = {}));\n// eslint-disable-next-line\n(function (Markup) {\n    function getEdgeMarkup() {\n        return [\n            {\n                tagName: 'path',\n                selector: 'wrap',\n                groupSelector: 'lines',\n                attrs: {\n                    fill: 'none',\n                    cursor: 'pointer',\n                    stroke: 'transparent',\n                    strokeLinecap: 'round',\n                },\n            },\n            {\n                tagName: 'path',\n                selector: 'line',\n                groupSelector: 'lines',\n                attrs: {\n                    fill: 'none',\n                    pointerEvents: 'none',\n                },\n            },\n        ];\n    }\n    Markup.getEdgeMarkup = getEdgeMarkup;\n})(Markup || (Markup = {}));\n// eslint-disable-next-line\n(function (Markup) {\n    function getForeignObjectMarkup(bare = false) {\n        return {\n            tagName: 'foreignObject',\n            selector: 'fo',\n            children: [\n                {\n                    ns: Dom.ns.xhtml,\n                    tagName: 'body',\n                    selector: 'foBody',\n                    attrs: {\n                        xmlns: Dom.ns.xhtml,\n                    },\n                    style: {\n                        width: '100%',\n                        height: '100%',\n                        background: 'transparent',\n                    },\n                    children: bare\n                        ? []\n                        : [\n                            {\n                                tagName: 'div',\n                                selector: 'foContent',\n                                style: {\n                                    width: '100%',\n                                    height: '100%',\n                                },\n                            },\n                        ],\n                },\n            ],\n        };\n    }\n    Markup.getForeignObjectMarkup = getForeignObjectMarkup;\n})(Markup || (Markup = {}));\n//# sourceMappingURL=markup.js.map","import { Dictionary, Dom } from '@antv/x6-common';\nimport { Util } from '../util';\nexport class Cache {\n    constructor(view) {\n        this.view = view;\n        this.clean();\n    }\n    clean() {\n        if (this.elemCache) {\n            this.elemCache.dispose();\n        }\n        this.elemCache = new Dictionary();\n        this.pathCache = {};\n    }\n    get(elem) {\n        const cache = this.elemCache;\n        if (!cache.has(elem)) {\n            this.elemCache.set(elem, {});\n        }\n        return this.elemCache.get(elem);\n    }\n    getData(elem) {\n        const meta = this.get(elem);\n        if (!meta.data) {\n            meta.data = {};\n        }\n        return meta.data;\n    }\n    getMatrix(elem) {\n        const meta = this.get(elem);\n        if (meta.matrix == null) {\n            const target = this.view.container;\n            meta.matrix = Dom.getTransformToParentElement(elem, target);\n        }\n        return Dom.createSVGMatrix(meta.matrix);\n    }\n    getShape(elem) {\n        const meta = this.get(elem);\n        if (meta.shape == null) {\n            meta.shape = Util.toGeometryShape(elem);\n        }\n        return meta.shape.clone();\n    }\n    getBoundingRect(elem) {\n        const meta = this.get(elem);\n        if (meta.boundingRect == null) {\n            meta.boundingRect = Util.getBBoxV2(elem);\n        }\n        return meta.boundingRect.clone();\n    }\n}\n//# sourceMappingURL=cache.js.map","import { ObjectExt, ArrayExt, Dom, FunctionExt, Dictionary, StringExt, } from '@antv/x6-common';\nimport { Point } from '@antv/x6-geometry';\nimport { Attr } from '../registry/attr';\nimport { View } from './view';\nimport { Util } from '../util';\nexport class AttrManager {\n    constructor(view) {\n        this.view = view;\n    }\n    get cell() {\n        return this.view.cell;\n    }\n    getDefinition(attrName) {\n        return this.cell.getAttrDefinition(attrName);\n    }\n    processAttrs(elem, raw) {\n        let normal;\n        let set;\n        let offset;\n        let position;\n        const specials = [];\n        // divide the attributes between normal and special\n        Object.keys(raw).forEach((name) => {\n            const val = raw[name];\n            const definition = this.getDefinition(name);\n            const isValid = FunctionExt.call(Attr.isValidDefinition, this.view, definition, val, {\n                elem,\n                attrs: raw,\n                cell: this.cell,\n                view: this.view,\n            });\n            if (definition && isValid) {\n                if (typeof definition === 'string') {\n                    if (normal == null) {\n                        normal = {};\n                    }\n                    normal[definition] = val;\n                }\n                else if (val !== null) {\n                    specials.push({ name, definition });\n                }\n            }\n            else {\n                if (normal == null) {\n                    normal = {};\n                }\n                const normalName = Dom.CASE_SENSITIVE_ATTR.includes(name)\n                    ? name\n                    : StringExt.kebabCase(name);\n                normal[normalName] = val;\n            }\n        });\n        specials.forEach(({ name, definition }) => {\n            const val = raw[name];\n            const setDefine = definition;\n            if (typeof setDefine.set === 'function') {\n                if (set == null) {\n                    set = {};\n                }\n                set[name] = val;\n            }\n            const offsetDefine = definition;\n            if (typeof offsetDefine.offset === 'function') {\n                if (offset == null) {\n                    offset = {};\n                }\n                offset[name] = val;\n            }\n            const positionDefine = definition;\n            if (typeof positionDefine.position === 'function') {\n                if (position == null) {\n                    position = {};\n                }\n                position[name] = val;\n            }\n        });\n        return {\n            raw,\n            normal,\n            set,\n            offset,\n            position,\n        };\n    }\n    mergeProcessedAttrs(allProcessedAttrs, roProcessedAttrs) {\n        allProcessedAttrs.set = Object.assign(Object.assign({}, allProcessedAttrs.set), roProcessedAttrs.set);\n        allProcessedAttrs.position = Object.assign(Object.assign({}, allProcessedAttrs.position), roProcessedAttrs.position);\n        allProcessedAttrs.offset = Object.assign(Object.assign({}, allProcessedAttrs.offset), roProcessedAttrs.offset);\n        // Handle also the special transform property.\n        const transform = allProcessedAttrs.normal && allProcessedAttrs.normal.transform;\n        if (transform != null && roProcessedAttrs.normal) {\n            roProcessedAttrs.normal.transform = transform;\n        }\n        allProcessedAttrs.normal = roProcessedAttrs.normal;\n    }\n    findAttrs(cellAttrs, rootNode, selectorCache, selectors) {\n        const merge = [];\n        const result = new Dictionary();\n        Object.keys(cellAttrs).forEach((selector) => {\n            const attrs = cellAttrs[selector];\n            if (!ObjectExt.isPlainObject(attrs)) {\n                return;\n            }\n            const { isCSSSelector, elems } = View.find(selector, rootNode, selectors);\n            selectorCache[selector] = elems;\n            for (let i = 0, l = elems.length; i < l; i += 1) {\n                const elem = elems[i];\n                const unique = selectors && selectors[selector] === elem;\n                const prev = result.get(elem);\n                if (prev) {\n                    if (!prev.array) {\n                        merge.push(elem);\n                        prev.array = true;\n                        prev.attrs = [prev.attrs];\n                        prev.priority = [prev.priority];\n                    }\n                    const attributes = prev.attrs;\n                    const selectedLength = prev.priority;\n                    if (unique) {\n                        // node referenced by `selector`\n                        attributes.unshift(attrs);\n                        selectedLength.unshift(-1);\n                    }\n                    else {\n                        // node referenced by `groupSelector` or CSSSelector\n                        const sortIndex = ArrayExt.sortedIndex(selectedLength, isCSSSelector ? -1 : l);\n                        attributes.splice(sortIndex, 0, attrs);\n                        selectedLength.splice(sortIndex, 0, l);\n                    }\n                }\n                else {\n                    result.set(elem, {\n                        elem,\n                        attrs,\n                        priority: unique ? -1 : l,\n                        array: false,\n                    });\n                }\n            }\n        });\n        merge.forEach((node) => {\n            const item = result.get(node);\n            const arr = item.attrs;\n            item.attrs = arr.reduceRight((memo, attrs) => ObjectExt.merge(memo, attrs), {});\n        });\n        return result;\n    }\n    updateRelativeAttrs(elem, processedAttrs, refBBox) {\n        const rawAttrs = processedAttrs.raw || {};\n        let nodeAttrs = processedAttrs.normal || {};\n        const setAttrs = processedAttrs.set;\n        const positionAttrs = processedAttrs.position;\n        const offsetAttrs = processedAttrs.offset;\n        const getOptions = () => ({\n            elem,\n            cell: this.cell,\n            view: this.view,\n            attrs: rawAttrs,\n            refBBox: refBBox.clone(),\n        });\n        if (setAttrs != null) {\n            Object.keys(setAttrs).forEach((name) => {\n                const val = setAttrs[name];\n                const def = this.getDefinition(name);\n                if (def != null) {\n                    const ret = FunctionExt.call(def.set, this.view, val, getOptions());\n                    if (typeof ret === 'object') {\n                        nodeAttrs = Object.assign(Object.assign({}, nodeAttrs), ret);\n                    }\n                    else if (ret != null) {\n                        nodeAttrs[name] = ret;\n                    }\n                }\n            });\n        }\n        if (elem instanceof HTMLElement) {\n            // TODO: setting the `transform` attribute on HTMLElements\n            // via `node.style.transform = 'matrix(...)';` would introduce\n            // a breaking change (e.g. basic.TextBlock).\n            this.view.setAttrs(nodeAttrs, elem);\n            return;\n        }\n        // The final translation of the subelement.\n        const nodeTransform = nodeAttrs.transform;\n        const transform = nodeTransform ? `${nodeTransform}` : null;\n        const nodeMatrix = Dom.transformStringToMatrix(transform);\n        const nodePosition = new Point(nodeMatrix.e, nodeMatrix.f);\n        if (nodeTransform) {\n            delete nodeAttrs.transform;\n            nodeMatrix.e = 0;\n            nodeMatrix.f = 0;\n        }\n        let positioned = false;\n        if (positionAttrs != null) {\n            Object.keys(positionAttrs).forEach((name) => {\n                const val = positionAttrs[name];\n                const def = this.getDefinition(name);\n                if (def != null) {\n                    const ts = FunctionExt.call(def.position, this.view, val, getOptions());\n                    if (ts != null) {\n                        positioned = true;\n                        nodePosition.translate(Point.create(ts));\n                    }\n                }\n            });\n        }\n        // The node bounding box could depend on the `size`\n        // set from the previous loop.\n        this.view.setAttrs(nodeAttrs, elem);\n        let offseted = false;\n        if (offsetAttrs != null) {\n            // Check if the node is visible\n            const nodeBoundingRect = this.view.getBoundingRectOfElement(elem);\n            if (nodeBoundingRect.width > 0 && nodeBoundingRect.height > 0) {\n                const nodeBBox = Util.transformRectangle(nodeBoundingRect, nodeMatrix);\n                Object.keys(offsetAttrs).forEach((name) => {\n                    const val = offsetAttrs[name];\n                    const def = this.getDefinition(name);\n                    if (def != null) {\n                        const ts = FunctionExt.call(def.offset, this.view, val, {\n                            elem,\n                            cell: this.cell,\n                            view: this.view,\n                            attrs: rawAttrs,\n                            refBBox: nodeBBox,\n                        });\n                        if (ts != null) {\n                            offseted = true;\n                            nodePosition.translate(Point.create(ts));\n                        }\n                    }\n                });\n            }\n        }\n        if (nodeTransform != null || positioned || offseted) {\n            nodePosition.round(1);\n            nodeMatrix.e = nodePosition.x;\n            nodeMatrix.f = nodePosition.y;\n            elem.setAttribute('transform', Dom.matrixToTransformString(nodeMatrix));\n        }\n    }\n    update(rootNode, attrs, options) {\n        const selectorCache = {};\n        const nodesAttrs = this.findAttrs(options.attrs || attrs, rootNode, selectorCache, options.selectors);\n        // `nodesAttrs` are different from all attributes, when\n        // rendering only attributes sent to this method.\n        const nodesAllAttrs = options.attrs\n            ? this.findAttrs(attrs, rootNode, selectorCache, options.selectors)\n            : nodesAttrs;\n        const specialItems = [];\n        nodesAttrs.each((data) => {\n            const node = data.elem;\n            const nodeAttrs = data.attrs;\n            const processed = this.processAttrs(node, nodeAttrs);\n            if (processed.set == null &&\n                processed.position == null &&\n                processed.offset == null) {\n                this.view.setAttrs(processed.normal, node);\n            }\n            else {\n                const data = nodesAllAttrs.get(node);\n                const nodeAllAttrs = data ? data.attrs : null;\n                const refSelector = nodeAllAttrs && nodeAttrs.ref == null\n                    ? nodeAllAttrs.ref\n                    : nodeAttrs.ref;\n                let refNode;\n                if (refSelector) {\n                    refNode = (selectorCache[refSelector] ||\n                        this.view.find(refSelector, rootNode, options.selectors))[0];\n                    if (!refNode) {\n                        throw new Error(`\"${refSelector}\" reference does not exist.`);\n                    }\n                }\n                else {\n                    refNode = null;\n                }\n                const item = {\n                    node,\n                    refNode,\n                    attributes: nodeAllAttrs,\n                    processedAttributes: processed,\n                };\n                // If an element in the list is positioned relative to this one, then\n                // we want to insert this one before it in the list.\n                const index = specialItems.findIndex((item) => item.refNode === node);\n                if (index > -1) {\n                    specialItems.splice(index, 0, item);\n                }\n                else {\n                    specialItems.push(item);\n                }\n            }\n        });\n        const bboxCache = new Dictionary();\n        let rotatableMatrix;\n        specialItems.forEach((item) => {\n            const node = item.node;\n            const refNode = item.refNode;\n            let unrotatedRefBBox;\n            const isRefNodeRotatable = refNode != null &&\n                options.rotatableNode != null &&\n                Dom.contains(options.rotatableNode, refNode);\n            // Find the reference element bounding box. If no reference was\n            // provided, we use the optional bounding box.\n            if (refNode) {\n                unrotatedRefBBox = bboxCache.get(refNode);\n            }\n            if (!unrotatedRefBBox) {\n                const target = (isRefNodeRotatable ? options.rotatableNode : rootNode);\n                unrotatedRefBBox = refNode\n                    ? Util.getBBox(refNode, { target })\n                    : options.rootBBox;\n                if (refNode) {\n                    bboxCache.set(refNode, unrotatedRefBBox);\n                }\n            }\n            let processedAttrs;\n            if (options.attrs && item.attributes) {\n                // If there was a special attribute affecting the position amongst\n                // passed-in attributes we have to merge it with the rest of the\n                // element's attributes as they are necessary to update the position\n                // relatively (i.e `ref-x` && 'ref-dx').\n                processedAttrs = this.processAttrs(node, item.attributes);\n                this.mergeProcessedAttrs(processedAttrs, item.processedAttributes);\n            }\n            else {\n                processedAttrs = item.processedAttributes;\n            }\n            let refBBox = unrotatedRefBBox;\n            if (isRefNodeRotatable &&\n                options.rotatableNode != null &&\n                !options.rotatableNode.contains(node)) {\n                // If the referenced node is inside the rotatable group while the\n                // updated node is outside, we need to take the rotatable node\n                // transformation into account.\n                if (!rotatableMatrix) {\n                    rotatableMatrix = Dom.transformStringToMatrix(Dom.attr(options.rotatableNode, 'transform'));\n                }\n                refBBox = Util.transformRectangle(unrotatedRefBBox, rotatableMatrix);\n            }\n            this.updateRelativeAttrs(node, processedAttrs, refBBox);\n        });\n    }\n}\n//# sourceMappingURL=attr.js.map","/* eslint-disable no-bitwise */\nexport class FlagManager {\n    get cell() {\n        return this.view.cell;\n    }\n    constructor(view, actions, bootstrap = []) {\n        this.view = view;\n        const flags = {};\n        const attrs = {};\n        let shift = 0;\n        Object.keys(actions).forEach((attr) => {\n            let labels = actions[attr];\n            if (!Array.isArray(labels)) {\n                labels = [labels];\n            }\n            labels.forEach((label) => {\n                let flag = flags[label];\n                if (!flag) {\n                    shift += 1;\n                    flag = flags[label] = 1 << shift;\n                }\n                attrs[attr] |= flag;\n            });\n        });\n        let labels = bootstrap;\n        if (!Array.isArray(labels)) {\n            labels = [labels];\n        }\n        labels.forEach((label) => {\n            if (!flags[label]) {\n                shift += 1;\n                flags[label] = 1 << shift;\n            }\n        });\n        // 26 - 30 are reserved for paper flags\n        // 31+ overflows maximal number\n        if (shift > 25) {\n            throw new Error('Maximum number of flags exceeded.');\n        }\n        this.flags = flags;\n        this.attrs = attrs;\n        this.bootstrap = bootstrap;\n    }\n    getFlag(label) {\n        const flags = this.flags;\n        if (flags == null) {\n            return 0;\n        }\n        if (Array.isArray(label)) {\n            return label.reduce((memo, key) => memo | flags[key], 0);\n        }\n        return flags[label] | 0;\n    }\n    hasAction(flag, label) {\n        return flag & this.getFlag(label);\n    }\n    removeAction(flag, label) {\n        return flag ^ (flag & this.getFlag(label));\n    }\n    getBootstrapFlag() {\n        return this.getFlag(this.bootstrap);\n    }\n    getChangedFlag() {\n        let flag = 0;\n        if (!this.attrs) {\n            return flag;\n        }\n        Object.keys(this.attrs).forEach((attr) => {\n            if (this.cell.hasChanged(attr)) {\n                flag |= this.attrs[attr];\n            }\n        });\n        return flag;\n    }\n}\n//# sourceMappingURL=flag.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\n/* eslint-disable @typescript-eslint/no-unused-vars */\nimport { Rectangle } from '@antv/x6-geometry';\nimport { ArrayExt, ObjectExt, Dom, FunctionExt, } from '@antv/x6-common';\nimport { Registry } from '../registry/registry';\nimport { View } from './view';\nimport { Cache } from './cache';\nimport { Markup } from './markup';\nimport { ToolsView } from './tool';\nimport { AttrManager } from './attr';\nimport { FlagManager } from './flag';\nimport { Util } from '../util';\nexport class CellView extends View {\n    static getDefaults() {\n        return this.defaults;\n    }\n    static config(options) {\n        this.defaults = this.getOptions(options);\n    }\n    static getOptions(options) {\n        const mergeActions = (arr1, arr2) => {\n            if (arr2 != null) {\n                return ArrayExt.uniq([\n                    ...(Array.isArray(arr1) ? arr1 : [arr1]),\n                    ...(Array.isArray(arr2) ? arr2 : [arr2]),\n                ]);\n            }\n            return Array.isArray(arr1) ? [...arr1] : [arr1];\n        };\n        const ret = ObjectExt.cloneDeep(this.getDefaults());\n        const { bootstrap, actions, events, documentEvents } = options, others = __rest(options, [\"bootstrap\", \"actions\", \"events\", \"documentEvents\"]);\n        if (bootstrap) {\n            ret.bootstrap = mergeActions(ret.bootstrap, bootstrap);\n        }\n        if (actions) {\n            Object.entries(actions).forEach(([key, val]) => {\n                const raw = ret.actions[key];\n                if (val && raw) {\n                    ret.actions[key] = mergeActions(raw, val);\n                }\n                else if (val) {\n                    ret.actions[key] = mergeActions(val);\n                }\n            });\n        }\n        if (events) {\n            ret.events = Object.assign(Object.assign({}, ret.events), events);\n        }\n        if (options.documentEvents) {\n            ret.documentEvents = Object.assign(Object.assign({}, ret.documentEvents), documentEvents);\n        }\n        return ObjectExt.merge(ret, others);\n    }\n    get [Symbol.toStringTag]() {\n        return CellView.toStringTag;\n    }\n    constructor(cell, options = {}) {\n        super();\n        this.cell = cell;\n        this.options = this.ensureOptions(options);\n        this.graph = this.options.graph;\n        this.attr = new AttrManager(this);\n        this.flag = new FlagManager(this, this.options.actions, this.options.bootstrap);\n        this.cache = new Cache(this);\n        this.setContainer(this.ensureContainer());\n        this.setup();\n        this.init();\n    }\n    init() { }\n    onRemove() {\n        this.removeTools();\n    }\n    get priority() {\n        return this.options.priority;\n    }\n    get rootSelector() {\n        return this.options.rootSelector;\n    }\n    getConstructor() {\n        return this.constructor;\n    }\n    ensureOptions(options) {\n        return this.getConstructor().getOptions(options);\n    }\n    getContainerTagName() {\n        return this.options.isSvgElement ? 'g' : 'div';\n    }\n    getContainerStyle() { }\n    getContainerAttrs() {\n        return {\n            'data-cell-id': this.cell.id,\n            'data-shape': this.cell.shape,\n        };\n    }\n    getContainerClassName() {\n        return this.prefixClassName('cell');\n    }\n    ensureContainer() {\n        return View.createElement(this.getContainerTagName(), this.options.isSvgElement);\n    }\n    setContainer(container) {\n        if (this.container !== container) {\n            this.undelegateEvents();\n            this.container = container;\n            if (this.options.events != null) {\n                this.delegateEvents(this.options.events);\n            }\n            const attrs = this.getContainerAttrs();\n            if (attrs != null) {\n                this.setAttrs(attrs, container);\n            }\n            const style = this.getContainerStyle();\n            if (style != null) {\n                this.setStyle(style, container);\n            }\n            const className = this.getContainerClassName();\n            if (className != null) {\n                this.addClass(className, container);\n            }\n        }\n        return this;\n    }\n    isNodeView() {\n        return false;\n    }\n    isEdgeView() {\n        return false;\n    }\n    render() {\n        return this;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    confirmUpdate(flag, options = {}) {\n        return 0;\n    }\n    getBootstrapFlag() {\n        return this.flag.getBootstrapFlag();\n    }\n    getFlag(actions) {\n        return this.flag.getFlag(actions);\n    }\n    hasAction(flag, actions) {\n        return this.flag.hasAction(flag, actions);\n    }\n    removeAction(flag, actions) {\n        return this.flag.removeAction(flag, actions);\n    }\n    handleAction(flag, action, handle, additionalRemovedActions) {\n        if (this.hasAction(flag, action)) {\n            handle();\n            const removedFlags = [action];\n            if (additionalRemovedActions) {\n                if (typeof additionalRemovedActions === 'string') {\n                    removedFlags.push(additionalRemovedActions);\n                }\n                else {\n                    removedFlags.push(...additionalRemovedActions);\n                }\n            }\n            return this.removeAction(flag, removedFlags);\n        }\n        return flag;\n    }\n    setup() {\n        this.cell.on('changed', this.onCellChanged, this);\n    }\n    onCellChanged({ options }) {\n        this.onAttrsChange(options);\n    }\n    onAttrsChange(options) {\n        let flag = this.flag.getChangedFlag();\n        if (options.updated || !flag) {\n            return;\n        }\n        if (options.dirty && this.hasAction(flag, 'update')) {\n            flag |= this.getFlag('render'); // eslint-disable-line no-bitwise\n        }\n        // tool changes should be sync render\n        if (options.toolId) {\n            options.async = false;\n        }\n        if (this.graph != null) {\n            this.graph.renderer.requestViewUpdate(this, flag, options);\n        }\n    }\n    parseJSONMarkup(markup, rootElem) {\n        const result = Markup.parseJSONMarkup(markup);\n        const selectors = result.selectors;\n        const rootSelector = this.rootSelector;\n        if (rootElem && rootSelector) {\n            if (selectors[rootSelector]) {\n                throw new Error('Invalid root selector');\n            }\n            selectors[rootSelector] = rootElem;\n        }\n        return result;\n    }\n    can(feature) {\n        let interacting = this.graph.options.interacting;\n        if (typeof interacting === 'function') {\n            interacting = FunctionExt.call(interacting, this.graph, this);\n        }\n        if (typeof interacting === 'object') {\n            let val = interacting[feature];\n            if (typeof val === 'function') {\n                val = FunctionExt.call(val, this.graph, this);\n            }\n            return val !== false;\n        }\n        if (typeof interacting === 'boolean') {\n            return interacting;\n        }\n        return false;\n    }\n    cleanCache() {\n        this.cache.clean();\n        return this;\n    }\n    getCache(elem) {\n        return this.cache.get(elem);\n    }\n    getDataOfElement(elem) {\n        return this.cache.getData(elem);\n    }\n    getMatrixOfElement(elem) {\n        return this.cache.getMatrix(elem);\n    }\n    getShapeOfElement(elem) {\n        return this.cache.getShape(elem);\n    }\n    getBoundingRectOfElement(elem) {\n        return this.cache.getBoundingRect(elem);\n    }\n    getBBoxOfElement(elem) {\n        const rect = this.getBoundingRectOfElement(elem);\n        const matrix = this.getMatrixOfElement(elem);\n        const rm = this.getRootRotatedMatrix();\n        const tm = this.getRootTranslatedMatrix();\n        return Util.transformRectangle(rect, tm.multiply(rm).multiply(matrix));\n    }\n    getUnrotatedBBoxOfElement(elem) {\n        const rect = this.getBoundingRectOfElement(elem);\n        const matrix = this.getMatrixOfElement(elem);\n        const tm = this.getRootTranslatedMatrix();\n        return Util.transformRectangle(rect, tm.multiply(matrix));\n    }\n    getBBox(options = {}) {\n        let bbox;\n        if (options.useCellGeometry) {\n            const cell = this.cell;\n            const angle = cell.isNode() ? cell.getAngle() : 0;\n            bbox = cell.getBBox().bbox(angle);\n        }\n        else {\n            bbox = this.getBBoxOfElement(this.container);\n        }\n        return this.graph.coord.localToGraphRect(bbox);\n    }\n    getRootTranslatedMatrix() {\n        const cell = this.cell;\n        const pos = cell.isNode() ? cell.getPosition() : { x: 0, y: 0 };\n        return Dom.createSVGMatrix().translate(pos.x, pos.y);\n    }\n    getRootRotatedMatrix() {\n        let matrix = Dom.createSVGMatrix();\n        const cell = this.cell;\n        const angle = cell.isNode() ? cell.getAngle() : 0;\n        if (angle) {\n            const bbox = cell.getBBox();\n            const cx = bbox.width / 2;\n            const cy = bbox.height / 2;\n            matrix = matrix.translate(cx, cy).rotate(angle).translate(-cx, -cy);\n        }\n        return matrix;\n    }\n    findMagnet(elem = this.container) {\n        return this.findByAttr('magnet', elem);\n    }\n    updateAttrs(rootNode, attrs, options = {}) {\n        if (options.rootBBox == null) {\n            options.rootBBox = new Rectangle();\n        }\n        if (options.selectors == null) {\n            options.selectors = this.selectors;\n        }\n        this.attr.update(rootNode, attrs, options);\n    }\n    isEdgeElement(magnet) {\n        return this.cell.isEdge() && (magnet == null || magnet === this.container);\n    }\n    // #region highlight\n    prepareHighlight(elem, options = {}) {\n        const magnet = elem || this.container;\n        options.partial = magnet === this.container;\n        return magnet;\n    }\n    highlight(elem, options = {}) {\n        const magnet = this.prepareHighlight(elem, options);\n        this.notify('cell:highlight', {\n            magnet,\n            options,\n            view: this,\n            cell: this.cell,\n        });\n        if (this.isEdgeView()) {\n            this.notify('edge:highlight', {\n                magnet,\n                options,\n                view: this,\n                edge: this.cell,\n                cell: this.cell,\n            });\n        }\n        else if (this.isNodeView()) {\n            this.notify('node:highlight', {\n                magnet,\n                options,\n                view: this,\n                node: this.cell,\n                cell: this.cell,\n            });\n        }\n        return this;\n    }\n    unhighlight(elem, options = {}) {\n        const magnet = this.prepareHighlight(elem, options);\n        this.notify('cell:unhighlight', {\n            magnet,\n            options,\n            view: this,\n            cell: this.cell,\n        });\n        if (this.isNodeView()) {\n            this.notify('node:unhighlight', {\n                magnet,\n                options,\n                view: this,\n                node: this.cell,\n                cell: this.cell,\n            });\n        }\n        else if (this.isEdgeView()) {\n            this.notify('edge:unhighlight', {\n                magnet,\n                options,\n                view: this,\n                edge: this.cell,\n                cell: this.cell,\n            });\n        }\n        return this;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    notifyUnhighlight(magnet, options) { }\n    // #endregion\n    getEdgeTerminal(magnet, x, y, edge, type) {\n        const cell = this.cell;\n        const portId = this.findAttr('port', magnet);\n        const selector = magnet.getAttribute('data-selector');\n        const terminal = { cell: cell.id };\n        if (selector != null) {\n            terminal.magnet = selector;\n        }\n        if (portId != null) {\n            terminal.port = portId;\n            if (cell.isNode()) {\n                if (!cell.hasPort(portId) && selector == null) {\n                    // port created via the `port` attribute (not API)\n                    terminal.selector = this.getSelector(magnet);\n                }\n            }\n        }\n        else if (selector == null && this.container !== magnet) {\n            terminal.selector = this.getSelector(magnet);\n        }\n        return terminal;\n    }\n    getMagnetFromEdgeTerminal(terminal) {\n        const cell = this.cell;\n        const root = this.container;\n        const portId = terminal.port;\n        let selector = terminal.magnet;\n        let magnet;\n        if (portId != null && cell.isNode() && cell.hasPort(portId)) {\n            magnet = this.findPortElem(portId, selector) || root;\n        }\n        else {\n            if (!selector) {\n                selector = terminal.selector;\n            }\n            if (!selector && portId != null) {\n                selector = `[port=\"${portId}\"]`;\n            }\n            magnet = this.findOne(selector, root, this.selectors);\n        }\n        return magnet;\n    }\n    hasTools(name) {\n        const tools = this.tools;\n        if (tools == null) {\n            return false;\n        }\n        if (name == null) {\n            return true;\n        }\n        return tools.name === name;\n    }\n    addTools(config) {\n        this.removeTools();\n        if (config) {\n            if (!this.can('toolsAddable')) {\n                return this;\n            }\n            const tools = ToolsView.isToolsView(config)\n                ? config\n                : new ToolsView(config);\n            this.tools = tools;\n            tools.config({ view: this });\n            tools.mount();\n        }\n        return this;\n    }\n    updateTools(options = {}) {\n        if (this.tools) {\n            this.tools.update(options);\n        }\n        return this;\n    }\n    removeTools() {\n        if (this.tools) {\n            this.tools.remove();\n            this.tools = null;\n        }\n        return this;\n    }\n    hideTools() {\n        if (this.tools) {\n            this.tools.hide();\n        }\n        return this;\n    }\n    showTools() {\n        if (this.tools) {\n            this.tools.show();\n        }\n        return this;\n    }\n    renderTools() {\n        const tools = this.cell.getTools();\n        this.addTools(tools);\n        return this;\n    }\n    notify(name, args) {\n        this.trigger(name, args);\n        this.graph.trigger(name, args);\n        return this;\n    }\n    getEventArgs(e, x, y) {\n        const view = this; // eslint-disable-line @typescript-eslint/no-this-alias\n        const cell = view.cell;\n        if (x == null || y == null) {\n            return { e, view, cell };\n        }\n        return { e, x, y, view, cell };\n    }\n    onClick(e, x, y) {\n        this.notify('cell:click', this.getEventArgs(e, x, y));\n    }\n    onDblClick(e, x, y) {\n        this.notify('cell:dblclick', this.getEventArgs(e, x, y));\n    }\n    onContextMenu(e, x, y) {\n        this.notify('cell:contextmenu', this.getEventArgs(e, x, y));\n    }\n    onMouseDown(e, x, y) {\n        if (this.cell.model) {\n            this.cachedModelForMouseEvent = this.cell.model;\n            this.cachedModelForMouseEvent.startBatch('mouse');\n        }\n        this.notify('cell:mousedown', this.getEventArgs(e, x, y));\n    }\n    onMouseUp(e, x, y) {\n        this.notify('cell:mouseup', this.getEventArgs(e, x, y));\n        if (this.cachedModelForMouseEvent) {\n            this.cachedModelForMouseEvent.stopBatch('mouse', { cell: this.cell });\n            this.cachedModelForMouseEvent = null;\n        }\n    }\n    onMouseMove(e, x, y) {\n        this.notify('cell:mousemove', this.getEventArgs(e, x, y));\n    }\n    onMouseOver(e) {\n        this.notify('cell:mouseover', this.getEventArgs(e));\n    }\n    onMouseOut(e) {\n        this.notify('cell:mouseout', this.getEventArgs(e));\n    }\n    onMouseEnter(e) {\n        this.notify('cell:mouseenter', this.getEventArgs(e));\n    }\n    onMouseLeave(e) {\n        this.notify('cell:mouseleave', this.getEventArgs(e));\n    }\n    onMouseWheel(e, x, y, delta) {\n        this.notify('cell:mousewheel', Object.assign({ delta }, this.getEventArgs(e, x, y)));\n    }\n    onCustomEvent(e, name, x, y) {\n        this.notify('cell:customevent', Object.assign({ name }, this.getEventArgs(e, x, y)));\n        this.notify(name, Object.assign({}, this.getEventArgs(e, x, y)));\n    }\n    onMagnetMouseDown(e, magnet, x, y) { }\n    onMagnetDblClick(e, magnet, x, y) { }\n    onMagnetContextMenu(e, magnet, x, y) { }\n    onLabelMouseDown(e, x, y) { }\n    checkMouseleave(e) {\n        const target = this.getEventTarget(e, { fromPoint: true });\n        const view = this.graph.findViewByElem(target);\n        if (view === this) {\n            return;\n        }\n        // Leaving the current view\n        this.onMouseLeave(e);\n        if (!view) {\n            return;\n        }\n        // Entering another view\n        view.onMouseEnter(e);\n    }\n    dispose() {\n        this.cell.off('changed', this.onCellChanged, this);\n    }\n}\nCellView.defaults = {\n    isSvgElement: true,\n    rootSelector: 'root',\n    priority: 0,\n    bootstrap: [],\n    actions: {},\n};\n__decorate([\n    CellView.dispose()\n], CellView.prototype, \"dispose\", null);\n(function (CellView) {\n    CellView.Flag = FlagManager;\n    CellView.Attr = AttrManager;\n})(CellView || (CellView = {}));\n(function (CellView) {\n    CellView.toStringTag = `X6.${CellView.name}`;\n    function isCellView(instance) {\n        if (instance == null) {\n            return false;\n        }\n        if (instance instanceof CellView) {\n            return true;\n        }\n        const tag = instance[Symbol.toStringTag];\n        const view = instance;\n        if ((tag == null || tag === CellView.toStringTag) &&\n            typeof view.isNodeView === 'function' &&\n            typeof view.isEdgeView === 'function' &&\n            typeof view.confirmUpdate === 'function') {\n            return true;\n        }\n        return false;\n    }\n    CellView.isCellView = isCellView;\n})(CellView || (CellView = {}));\n// decorators\n// ----\n(function (CellView) {\n    function priority(value) {\n        return function (ctor) {\n            ctor.config({ priority: value });\n        };\n    }\n    CellView.priority = priority;\n    function bootstrap(actions) {\n        return function (ctor) {\n            ctor.config({ bootstrap: actions });\n        };\n    }\n    CellView.bootstrap = bootstrap;\n})(CellView || (CellView = {}));\n(function (CellView) {\n    CellView.registry = Registry.create({\n        type: 'view',\n    });\n})(CellView || (CellView = {}));\n//# sourceMappingURL=cell.js.map","import { Dom, ObjectExt, StringExt } from '@antv/x6-common';\nimport { NodeTool, EdgeTool } from '../registry/tool';\nimport { View } from './view';\nimport { CellView } from './cell';\nimport { Markup } from './markup';\nexport class ToolsView extends View {\n    get name() {\n        return this.options.name;\n    }\n    get graph() {\n        return this.cellView.graph;\n    }\n    get cell() {\n        return this.cellView.cell;\n    }\n    get [Symbol.toStringTag]() {\n        return ToolsView.toStringTag;\n    }\n    constructor(options = {}) {\n        super();\n        this.svgContainer = this.createContainer(true, options);\n        this.htmlContainer = this.createContainer(false, options);\n        this.config(options);\n    }\n    createContainer(svg, options) {\n        const container = svg\n            ? View.createElement('g', true)\n            : View.createElement('div', false);\n        Dom.addClass(container, this.prefixClassName('cell-tools'));\n        if (options.className) {\n            Dom.addClass(container, options.className);\n        }\n        return container;\n    }\n    config(options) {\n        this.options = Object.assign(Object.assign({}, this.options), options);\n        if (!CellView.isCellView(options.view) || options.view === this.cellView) {\n            return this;\n        }\n        this.cellView = options.view;\n        if (this.cell.isEdge()) {\n            Dom.addClass(this.svgContainer, this.prefixClassName('edge-tools'));\n            Dom.addClass(this.htmlContainer, this.prefixClassName('edge-tools'));\n        }\n        else if (this.cell.isNode()) {\n            Dom.addClass(this.svgContainer, this.prefixClassName('node-tools'));\n            Dom.addClass(this.htmlContainer, this.prefixClassName('node-tools'));\n        }\n        this.svgContainer.setAttribute('data-cell-id', this.cell.id);\n        this.htmlContainer.setAttribute('data-cell-id', this.cell.id);\n        if (this.name) {\n            this.svgContainer.setAttribute('data-tools-name', this.name);\n            this.htmlContainer.setAttribute('data-tools-name', this.name);\n        }\n        const tools = this.options.items;\n        if (!Array.isArray(tools)) {\n            return this;\n        }\n        this.tools = [];\n        const normalizedTools = [];\n        tools.forEach((meta) => {\n            if (ToolsView.ToolItem.isToolItem(meta)) {\n                if (meta.name === 'vertices') {\n                    normalizedTools.unshift(meta);\n                }\n                else {\n                    normalizedTools.push(meta);\n                }\n            }\n            else {\n                const name = typeof meta === 'object' ? meta.name : meta;\n                if (name === 'vertices') {\n                    normalizedTools.unshift(meta);\n                }\n                else {\n                    normalizedTools.push(meta);\n                }\n            }\n        });\n        for (let i = 0; i < normalizedTools.length; i += 1) {\n            const meta = normalizedTools[i];\n            let tool;\n            if (ToolsView.ToolItem.isToolItem(meta)) {\n                tool = meta;\n            }\n            else {\n                const name = typeof meta === 'object' ? meta.name : meta;\n                const args = typeof meta === 'object' ? meta.args || {} : {};\n                if (name) {\n                    if (this.cell.isNode()) {\n                        const ctor = NodeTool.registry.get(name);\n                        if (ctor) {\n                            tool = new ctor(args); // eslint-disable-line\n                        }\n                        else {\n                            return NodeTool.registry.onNotFound(name);\n                        }\n                    }\n                    else if (this.cell.isEdge()) {\n                        const ctor = EdgeTool.registry.get(name);\n                        if (ctor) {\n                            tool = new ctor(args); // eslint-disable-line\n                        }\n                        else {\n                            return EdgeTool.registry.onNotFound(name);\n                        }\n                    }\n                }\n            }\n            if (tool) {\n                tool.config(this.cellView, this);\n                tool.render();\n                const container = tool.options.isSVGElement !== false\n                    ? this.svgContainer\n                    : this.htmlContainer;\n                container.appendChild(tool.container);\n                this.tools.push(tool);\n            }\n        }\n        return this;\n    }\n    update(options = {}) {\n        const tools = this.tools;\n        if (tools) {\n            tools.forEach((tool) => {\n                if (options.toolId !== tool.cid && tool.isVisible()) {\n                    tool.update();\n                }\n            });\n        }\n        return this;\n    }\n    focus(focusedTool) {\n        const tools = this.tools;\n        if (tools) {\n            tools.forEach((tool) => {\n                if (focusedTool === tool) {\n                    tool.show();\n                }\n                else {\n                    tool.hide();\n                }\n            });\n        }\n        return this;\n    }\n    blur(blurredTool) {\n        const tools = this.tools;\n        if (tools) {\n            tools.forEach((tool) => {\n                if (tool !== blurredTool && !tool.isVisible()) {\n                    tool.show();\n                    tool.update();\n                }\n            });\n        }\n        return this;\n    }\n    hide() {\n        return this.focus(null);\n    }\n    show() {\n        return this.blur(null);\n    }\n    remove() {\n        const tools = this.tools;\n        if (tools) {\n            tools.forEach((tool) => tool.remove());\n            this.tools = null;\n        }\n        Dom.remove(this.svgContainer);\n        Dom.remove(this.htmlContainer);\n        return super.remove();\n    }\n    mount() {\n        const tools = this.tools;\n        const cellView = this.cellView;\n        if (cellView && tools) {\n            const hasSVG = tools.some((tool) => tool.options.isSVGElement !== false);\n            const hasHTML = tools.some((tool) => tool.options.isSVGElement === false);\n            if (hasSVG) {\n                const parent = this.options.local\n                    ? cellView.container\n                    : cellView.graph.view.decorator;\n                parent.appendChild(this.svgContainer);\n            }\n            if (hasHTML) {\n                this.graph.container.appendChild(this.htmlContainer);\n            }\n        }\n        return this;\n    }\n}\n(function (ToolsView) {\n    ToolsView.toStringTag = `X6.${ToolsView.name}`;\n    function isToolsView(instance) {\n        if (instance == null) {\n            return false;\n        }\n        if (instance instanceof ToolsView) {\n            return true;\n        }\n        const tag = instance[Symbol.toStringTag];\n        const view = instance;\n        if ((tag == null || tag === ToolsView.toStringTag) &&\n            view.graph != null &&\n            view.cell != null &&\n            typeof view.config === 'function' &&\n            typeof view.update === 'function' &&\n            typeof view.focus === 'function' &&\n            typeof view.blur === 'function' &&\n            typeof view.show === 'function' &&\n            typeof view.hide === 'function') {\n            return true;\n        }\n        return false;\n    }\n    ToolsView.isToolsView = isToolsView;\n})(ToolsView || (ToolsView = {}));\n(function (ToolsView) {\n    class ToolItem extends View {\n        static getDefaults() {\n            return this.defaults;\n        }\n        static config(options) {\n            this.defaults = this.getOptions(options);\n        }\n        static getOptions(options) {\n            return ObjectExt.merge(ObjectExt.cloneDeep(this.getDefaults()), options);\n        }\n        get graph() {\n            return this.cellView.graph;\n        }\n        get cell() {\n            return this.cellView.cell;\n        }\n        get name() {\n            return this.options.name;\n        }\n        get [Symbol.toStringTag]() {\n            return ToolItem.toStringTag;\n        }\n        constructor(options = {}) {\n            super();\n            this.visible = true;\n            this.options = this.getOptions(options);\n            this.container = View.createElement(this.options.tagName || 'g', this.options.isSVGElement !== false);\n            Dom.addClass(this.container, this.prefixClassName('cell-tool'));\n            if (typeof this.options.className === 'string') {\n                Dom.addClass(this.container, this.options.className);\n            }\n            this.init();\n        }\n        init() { }\n        getOptions(options) {\n            const ctor = this.constructor;\n            return ctor.getOptions(options);\n        }\n        delegateEvents() {\n            if (this.options.events) {\n                super.delegateEvents(this.options.events);\n            }\n            return this;\n        }\n        config(view, toolsView) {\n            this.cellView = view;\n            this.parent = toolsView;\n            this.stamp(this.container);\n            if (this.cell.isEdge()) {\n                Dom.addClass(this.container, this.prefixClassName('edge-tool'));\n            }\n            else if (this.cell.isNode()) {\n                Dom.addClass(this.container, this.prefixClassName('node-tool'));\n            }\n            if (this.name) {\n                this.container.setAttribute('data-tool-name', this.name);\n            }\n            this.delegateEvents();\n            return this;\n        }\n        render() {\n            this.empty();\n            const markup = this.options.markup;\n            if (markup) {\n                const meta = Markup.parseJSONMarkup(markup);\n                this.container.appendChild(meta.fragment);\n                this.childNodes = meta.selectors;\n            }\n            this.onRender();\n            return this;\n        }\n        onRender() { }\n        update() {\n            return this;\n        }\n        stamp(elem) {\n            if (elem) {\n                elem.setAttribute('data-cell-id', this.cellView.cell.id);\n            }\n        }\n        show() {\n            this.container.style.display = '';\n            this.visible = true;\n            return this;\n        }\n        hide() {\n            this.container.style.display = 'none';\n            this.visible = false;\n            return this;\n        }\n        isVisible() {\n            return this.visible;\n        }\n        focus() {\n            const opacity = this.options.focusOpacity;\n            if (opacity != null && Number.isFinite(opacity)) {\n                this.container.style.opacity = `${opacity}`;\n            }\n            this.parent.focus(this);\n            return this;\n        }\n        blur() {\n            this.container.style.opacity = '';\n            this.parent.blur(this);\n            return this;\n        }\n        guard(evt) {\n            if (this.graph == null || this.cellView == null) {\n                return true;\n            }\n            return this.graph.view.guard(evt, this.cellView);\n        }\n    }\n    // #region static\n    ToolItem.defaults = {\n        isSVGElement: true,\n        tagName: 'g',\n    };\n    ToolsView.ToolItem = ToolItem;\n    (function (ToolItem) {\n        let counter = 0;\n        function getClassName(name) {\n            if (name) {\n                return StringExt.pascalCase(name);\n            }\n            counter += 1;\n            return `CustomTool${counter}`;\n        }\n        function define(options) {\n            const tool = ObjectExt.createClass(getClassName(options.name), this);\n            tool.config(options);\n            return tool;\n        }\n        ToolItem.define = define;\n    })(ToolItem = ToolsView.ToolItem || (ToolsView.ToolItem = {}));\n    (function (ToolItem) {\n        ToolItem.toStringTag = `X6.${ToolItem.name}`;\n        function isToolItem(instance) {\n            if (instance == null) {\n                return false;\n            }\n            if (instance instanceof ToolItem) {\n                return true;\n            }\n            const tag = instance[Symbol.toStringTag];\n            const view = instance;\n            if ((tag == null || tag === ToolItem.toStringTag) &&\n                view.graph != null &&\n                view.cell != null &&\n                typeof view.config === 'function' &&\n                typeof view.update === 'function' &&\n                typeof view.focus === 'function' &&\n                typeof view.blur === 'function' &&\n                typeof view.show === 'function' &&\n                typeof view.hide === 'function' &&\n                typeof view.isVisible === 'function') {\n                return true;\n            }\n            return false;\n        }\n        ToolItem.isToolItem = isToolItem;\n    })(ToolItem = ToolsView.ToolItem || (ToolsView.ToolItem = {}));\n})(ToolsView || (ToolsView = {}));\n//# sourceMappingURL=tool.js.map","export const noop = (terminal) => terminal;\n//# sourceMappingURL=noop.js.map","import { Point } from '@antv/x6-geometry';\nfunction toPercentage(value, max) {\n    if (max === 0) {\n        return '0%';\n    }\n    return `${Math.round((value / max) * 100)}%`;\n}\nfunction pin(relative) {\n    const strategy = (terminal, view, magnet, coords) => {\n        return view.isEdgeElement(magnet)\n            ? pinEdgeTerminal(relative, terminal, view, magnet, coords)\n            : pinNodeTerminal(relative, terminal, view, magnet, coords);\n    };\n    return strategy;\n}\nfunction pinNodeTerminal(relative, data, view, magnet, coords) {\n    const node = view.cell;\n    const angle = node.getAngle();\n    const bbox = view.getUnrotatedBBoxOfElement(magnet);\n    const center = node.getBBox().getCenter();\n    const pos = Point.create(coords).rotate(angle, center);\n    let dx = pos.x - bbox.x;\n    let dy = pos.y - bbox.y;\n    if (relative) {\n        dx = toPercentage(dx, bbox.width);\n        dy = toPercentage(dy, bbox.height);\n    }\n    data.anchor = {\n        name: 'topLeft',\n        args: {\n            dx,\n            dy,\n            rotate: true,\n        },\n    };\n    return data;\n}\nfunction pinEdgeTerminal(relative, end, view, magnet, coords) {\n    const connection = view.getConnection();\n    if (!connection) {\n        return end;\n    }\n    const length = connection.closestPointLength(coords);\n    if (relative) {\n        const totalLength = connection.length();\n        end.anchor = {\n            name: 'ratio',\n            args: {\n                ratio: length / totalLength,\n            },\n        };\n    }\n    else {\n        end.anchor = {\n            name: 'length',\n            args: {\n                length,\n            },\n        };\n    }\n    return end;\n}\nexport const pinRelative = pin(true);\nexport const pinAbsolute = pin(false);\n//# sourceMappingURL=pin.js.map","import { Registry } from '../registry';\nimport * as strategies from './main';\nexport var ConnectionStrategy;\n(function (ConnectionStrategy) {\n    ConnectionStrategy.presets = strategies;\n    ConnectionStrategy.registry = Registry.create({\n        type: 'connection strategy',\n    });\n    ConnectionStrategy.registry.register(ConnectionStrategy.presets, true);\n})(ConnectionStrategy || (ConnectionStrategy = {}));\n//# sourceMappingURL=index.js.map","import { FunctionExt } from '@antv/x6-common';\nimport { ConnectionStrategy } from '../connection-strategy';\nexport function getAnchor(pos, terminalView, terminalMagnet, type) {\n    const end = FunctionExt.call(ConnectionStrategy.presets.pinRelative, this.graph, {}, terminalView, terminalMagnet, pos, this.cell, type, {});\n    return end.anchor;\n}\nexport function getViewBBox(view, quick) {\n    if (quick) {\n        return view.cell.getBBox();\n    }\n    return view.cell.isEdge()\n        ? view.getConnection().bbox()\n        : view.getUnrotatedBBoxOfElement(view.container);\n}\n//# sourceMappingURL=util.js.map","import { Point } from '@antv/x6-geometry';\nimport { Dom, NumberExt, FunctionExt } from '@antv/x6-common';\nimport { ToolsView } from '../../view/tool';\nimport * as Util from './util';\nexport class Button extends ToolsView.ToolItem {\n    onRender() {\n        Dom.addClass(this.container, this.prefixClassName('cell-tool-button'));\n        this.update();\n    }\n    update() {\n        this.updatePosition();\n        return this;\n    }\n    updatePosition() {\n        const view = this.cellView;\n        const matrix = view.cell.isEdge()\n            ? this.getEdgeMatrix()\n            : this.getNodeMatrix();\n        Dom.transform(this.container, matrix, { absolute: true });\n    }\n    getNodeMatrix() {\n        const view = this.cellView;\n        const options = this.options;\n        let { x = 0, y = 0 } = options;\n        const { offset, useCellGeometry, rotate } = options;\n        let bbox = Util.getViewBBox(view, useCellGeometry);\n        const angle = view.cell.getAngle();\n        if (!rotate) {\n            bbox = bbox.bbox(angle);\n        }\n        let offsetX = 0;\n        let offsetY = 0;\n        if (typeof offset === 'number') {\n            offsetX = offset;\n            offsetY = offset;\n        }\n        else if (typeof offset === 'object') {\n            offsetX = offset.x;\n            offsetY = offset.y;\n        }\n        x = NumberExt.normalizePercentage(x, bbox.width);\n        y = NumberExt.normalizePercentage(y, bbox.height);\n        let matrix = Dom.createSVGMatrix().translate(bbox.x + bbox.width / 2, bbox.y + bbox.height / 2);\n        if (rotate) {\n            matrix = matrix.rotate(angle);\n        }\n        matrix = matrix.translate(x + offsetX - bbox.width / 2, y + offsetY - bbox.height / 2);\n        return matrix;\n    }\n    getEdgeMatrix() {\n        const view = this.cellView;\n        const options = this.options;\n        const { offset = 0, distance = 0, rotate } = options;\n        let tangent;\n        let position;\n        let angle;\n        const d = NumberExt.normalizePercentage(distance, 1);\n        if (d >= 0 && d <= 1) {\n            tangent = view.getTangentAtRatio(d);\n        }\n        else {\n            tangent = view.getTangentAtLength(d);\n        }\n        if (tangent) {\n            position = tangent.start;\n            angle = tangent.vector().vectorAngle(new Point(1, 0)) || 0;\n        }\n        else {\n            position = view.getConnection().start;\n            angle = 0;\n        }\n        let matrix = Dom.createSVGMatrix()\n            .translate(position.x, position.y)\n            .rotate(angle);\n        if (typeof offset === 'object') {\n            matrix = matrix.translate(offset.x || 0, offset.y || 0);\n        }\n        else {\n            matrix = matrix.translate(0, offset);\n        }\n        if (!rotate) {\n            matrix = matrix.rotate(-angle);\n        }\n        return matrix;\n    }\n    onMouseDown(e) {\n        if (this.guard(e)) {\n            return;\n        }\n        e.stopPropagation();\n        e.preventDefault();\n        const onClick = this.options.onClick;\n        if (typeof onClick === 'function') {\n            FunctionExt.call(onClick, this.cellView, {\n                e,\n                view: this.cellView,\n                cell: this.cellView.cell,\n                btn: this,\n            });\n        }\n    }\n}\n(function (Button) {\n    Button.config({\n        name: 'button',\n        useCellGeometry: true,\n        events: {\n            mousedown: 'onMouseDown',\n            touchstart: 'onMouseDown',\n        },\n    });\n})(Button || (Button = {}));\n(function (Button) {\n    Button.Remove = Button.define({\n        name: 'button-remove',\n        markup: [\n            {\n                tagName: 'circle',\n                selector: 'button',\n                attrs: {\n                    r: 7,\n                    fill: '#FF1D00',\n                    cursor: 'pointer',\n                },\n            },\n            {\n                tagName: 'path',\n                selector: 'icon',\n                attrs: {\n                    d: 'M -3 -3 3 3 M -3 3 3 -3',\n                    fill: 'none',\n                    stroke: '#FFFFFF',\n                    'stroke-width': 2,\n                    'pointer-events': 'none',\n                },\n            },\n        ],\n        distance: 60,\n        offset: 0,\n        useCellGeometry: true,\n        onClick({ view, btn }) {\n            btn.parent.remove();\n            view.cell.remove({ ui: true, toolId: btn.cid });\n        },\n    });\n})(Button || (Button = {}));\n//# sourceMappingURL=button.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { NumberExt, Dom } from '@antv/x6-common';\nimport { ToolsView } from '../../view/tool';\nimport * as Util from './util';\nexport class Boundary extends ToolsView.ToolItem {\n    onRender() {\n        Dom.addClass(this.container, this.prefixClassName('cell-tool-boundary'));\n        if (this.options.attrs) {\n            const _a = this.options.attrs, { class: className } = _a, attrs = __rest(_a, [\"class\"]);\n            Dom.attr(this.container, Dom.kebablizeAttrs(attrs));\n            if (className) {\n                Dom.addClass(this.container, className);\n            }\n        }\n        this.update();\n    }\n    update() {\n        const view = this.cellView;\n        const options = this.options;\n        const { useCellGeometry, rotate } = options;\n        const padding = NumberExt.normalizeSides(options.padding);\n        let bbox = Util.getViewBBox(view, useCellGeometry).moveAndExpand({\n            x: -padding.left,\n            y: -padding.top,\n            width: padding.left + padding.right,\n            height: padding.top + padding.bottom,\n        });\n        const cell = view.cell;\n        if (cell.isNode()) {\n            const angle = cell.getAngle();\n            if (angle) {\n                if (rotate) {\n                    const origin = cell.getBBox().getCenter();\n                    Dom.rotate(this.container, angle, origin.x, origin.y, {\n                        absolute: true,\n                    });\n                }\n                else {\n                    bbox = bbox.bbox(angle);\n                }\n            }\n        }\n        Dom.attr(this.container, bbox.toJSON());\n        return this;\n    }\n}\n(function (Boundary) {\n    Boundary.config({\n        name: 'boundary',\n        tagName: 'rect',\n        padding: 10,\n        useCellGeometry: true,\n        attrs: {\n            fill: 'none',\n            stroke: '#333',\n            'stroke-width': 0.5,\n            'stroke-dasharray': '5, 5',\n            'pointer-events': 'none',\n        },\n    });\n})(Boundary || (Boundary = {}));\n//# sourceMappingURL=boundary.js.map","import { Point } from '@antv/x6-geometry';\nimport { ModifierKey } from '@antv/x6-common';\nimport { Config } from '../../config';\nimport { View } from '../../view/view';\nimport { ToolsView } from '../../view/tool';\nexport class Vertices extends ToolsView.ToolItem {\n    constructor() {\n        super(...arguments);\n        this.handles = [];\n    }\n    get vertices() {\n        return this.cellView.cell.getVertices();\n    }\n    onRender() {\n        this.addClass(this.prefixClassName('edge-tool-vertices'));\n        if (this.options.addable) {\n            this.updatePath();\n        }\n        this.resetHandles();\n        this.renderHandles();\n        return this;\n    }\n    update() {\n        const vertices = this.vertices;\n        if (vertices.length === this.handles.length) {\n            this.updateHandles();\n        }\n        else {\n            this.resetHandles();\n            this.renderHandles();\n        }\n        if (this.options.addable) {\n            this.updatePath();\n        }\n        return this;\n    }\n    resetHandles() {\n        const handles = this.handles;\n        this.handles = [];\n        if (handles) {\n            handles.forEach((handle) => {\n                this.stopHandleListening(handle);\n                handle.remove();\n            });\n        }\n    }\n    renderHandles() {\n        const vertices = this.vertices;\n        for (let i = 0, l = vertices.length; i < l; i += 1) {\n            const vertex = vertices[i];\n            const createHandle = this.options.createHandle;\n            const processHandle = this.options.processHandle;\n            const handle = createHandle({\n                index: i,\n                graph: this.graph,\n                guard: (evt) => this.guard(evt),\n                attrs: this.options.attrs || {},\n            });\n            if (processHandle) {\n                processHandle(handle);\n            }\n            handle.updatePosition(vertex.x, vertex.y);\n            this.stamp(handle.container);\n            this.container.appendChild(handle.container);\n            this.handles.push(handle);\n            this.startHandleListening(handle);\n        }\n    }\n    updateHandles() {\n        const vertices = this.vertices;\n        for (let i = 0, l = vertices.length; i < l; i += 1) {\n            const vertex = vertices[i];\n            const handle = this.handles[i];\n            if (handle) {\n                handle.updatePosition(vertex.x, vertex.y);\n            }\n        }\n    }\n    updatePath() {\n        const connection = this.childNodes.connection;\n        if (connection) {\n            connection.setAttribute('d', this.cellView.getConnectionPathData());\n        }\n    }\n    startHandleListening(handle) {\n        const edgeView = this.cellView;\n        if (edgeView.can('vertexMovable')) {\n            handle.on('change', this.onHandleChange, this);\n            handle.on('changing', this.onHandleChanging, this);\n            handle.on('changed', this.onHandleChanged, this);\n        }\n        if (edgeView.can('vertexDeletable')) {\n            handle.on('remove', this.onHandleRemove, this);\n        }\n    }\n    stopHandleListening(handle) {\n        const edgeView = this.cellView;\n        if (edgeView.can('vertexMovable')) {\n            handle.off('change', this.onHandleChange, this);\n            handle.off('changing', this.onHandleChanging, this);\n            handle.off('changed', this.onHandleChanged, this);\n        }\n        if (edgeView.can('vertexDeletable')) {\n            handle.off('remove', this.onHandleRemove, this);\n        }\n    }\n    getNeighborPoints(index) {\n        const edgeView = this.cellView;\n        const vertices = this.vertices;\n        const prev = index > 0 ? vertices[index - 1] : edgeView.sourceAnchor;\n        const next = index < vertices.length - 1 ? vertices[index + 1] : edgeView.targetAnchor;\n        return {\n            prev: Point.create(prev),\n            next: Point.create(next),\n        };\n    }\n    getMouseEventArgs(evt) {\n        const e = this.normalizeEvent(evt);\n        const { x, y } = this.graph.snapToGrid(e.clientX, e.clientY);\n        return { e, x, y };\n    }\n    onHandleChange({ e }) {\n        this.focus();\n        const edgeView = this.cellView;\n        edgeView.cell.startBatch('move-vertex', { ui: true, toolId: this.cid });\n        if (!this.options.stopPropagation) {\n            const { e: evt, x, y } = this.getMouseEventArgs(e);\n            this.eventData(evt, { start: { x, y } });\n            edgeView.notifyMouseDown(evt, x, y);\n        }\n    }\n    onHandleChanging({ handle, e, }) {\n        const edgeView = this.cellView;\n        const index = handle.options.index;\n        const { e: evt, x, y } = this.getMouseEventArgs(e);\n        const vertex = { x, y };\n        this.snapVertex(vertex, index);\n        edgeView.cell.setVertexAt(index, vertex, { ui: true, toolId: this.cid });\n        handle.updatePosition(vertex.x, vertex.y);\n        if (!this.options.stopPropagation) {\n            edgeView.notifyMouseMove(evt, x, y);\n        }\n    }\n    stopBatch(vertexAdded) {\n        this.cell.stopBatch('move-vertex', { ui: true, toolId: this.cid });\n        if (vertexAdded) {\n            this.cell.stopBatch('add-vertex', { ui: true, toolId: this.cid });\n        }\n    }\n    onHandleChanged({ e }) {\n        const options = this.options;\n        const edgeView = this.cellView;\n        if (options.addable) {\n            this.updatePath();\n        }\n        if (!options.removeRedundancies) {\n            this.stopBatch(this.eventData(e).vertexAdded);\n            return;\n        }\n        const verticesRemoved = edgeView.removeRedundantLinearVertices({\n            ui: true,\n            toolId: this.cid,\n        });\n        if (verticesRemoved) {\n            this.render();\n        }\n        this.blur();\n        this.stopBatch(this.eventData(e).vertexAdded);\n        const { e: evt, x, y } = this.getMouseEventArgs(e);\n        if (!this.options.stopPropagation) {\n            edgeView.notifyMouseUp(evt, x, y);\n            const { start } = this.eventData(evt);\n            if (start) {\n                const { x: startX, y: startY } = start;\n                if (startX === x && startY === y) {\n                    edgeView.onClick(evt, x, y);\n                }\n            }\n        }\n        edgeView.checkMouseleave(evt);\n        options.onChanged && options.onChanged({ edge: edgeView.cell, edgeView });\n    }\n    snapVertex(vertex, index) {\n        const snapRadius = this.options.snapRadius || 0;\n        if (snapRadius > 0) {\n            const neighbors = this.getNeighborPoints(index);\n            const prev = neighbors.prev;\n            const next = neighbors.next;\n            if (Math.abs(vertex.x - prev.x) < snapRadius) {\n                vertex.x = prev.x;\n            }\n            else if (Math.abs(vertex.x - next.x) < snapRadius) {\n                vertex.x = next.x;\n            }\n            if (Math.abs(vertex.y - prev.y) < snapRadius) {\n                vertex.y = neighbors.prev.y;\n            }\n            else if (Math.abs(vertex.y - next.y) < snapRadius) {\n                vertex.y = next.y;\n            }\n        }\n    }\n    onHandleRemove({ handle, e }) {\n        if (this.options.removable) {\n            const index = handle.options.index;\n            const edgeView = this.cellView;\n            edgeView.cell.removeVertexAt(index, { ui: true });\n            if (this.options.addable) {\n                this.updatePath();\n            }\n            edgeView.checkMouseleave(this.normalizeEvent(e));\n        }\n    }\n    allowAddVertex(e) {\n        const guard = this.guard(e);\n        const addable = this.options.addable && this.cellView.can('vertexAddable');\n        const matchModifiers = this.options.modifiers\n            ? ModifierKey.isMatch(e, this.options.modifiers)\n            : true;\n        return !guard && addable && matchModifiers;\n    }\n    onPathMouseDown(evt) {\n        const edgeView = this.cellView;\n        if (!this.allowAddVertex(evt)) {\n            return;\n        }\n        evt.stopPropagation();\n        evt.preventDefault();\n        const e = this.normalizeEvent(evt);\n        const vertex = this.graph.snapToGrid(e.clientX, e.clientY).toJSON();\n        edgeView.cell.startBatch('add-vertex', { ui: true, toolId: this.cid });\n        const index = edgeView.getVertexIndex(vertex.x, vertex.y);\n        this.snapVertex(vertex, index);\n        edgeView.cell.insertVertex(vertex, index, {\n            ui: true,\n            toolId: this.cid,\n        });\n        this.render();\n        const handle = this.handles[index];\n        this.eventData(e, { vertexAdded: true });\n        handle.onMouseDown(e);\n    }\n    onRemove() {\n        this.resetHandles();\n    }\n}\n(function (Vertices) {\n    class Handle extends View {\n        get graph() {\n            return this.options.graph;\n        }\n        constructor(options) {\n            super();\n            this.options = options;\n            this.render();\n            this.delegateEvents({\n                mousedown: 'onMouseDown',\n                touchstart: 'onMouseDown',\n                dblclick: 'onDoubleClick',\n            });\n        }\n        render() {\n            this.container = View.createElement('circle', true);\n            const attrs = this.options.attrs;\n            if (typeof attrs === 'function') {\n                const defaults = Vertices.getDefaults();\n                this.setAttrs(Object.assign(Object.assign({}, defaults.attrs), attrs(this)));\n            }\n            else {\n                this.setAttrs(attrs);\n            }\n            this.addClass(this.prefixClassName('edge-tool-vertex'));\n        }\n        updatePosition(x, y) {\n            this.setAttrs({ cx: x, cy: y });\n        }\n        onMouseDown(evt) {\n            if (this.options.guard(evt)) {\n                return;\n            }\n            evt.stopPropagation();\n            evt.preventDefault();\n            this.graph.view.undelegateEvents();\n            this.delegateDocumentEvents({\n                mousemove: 'onMouseMove',\n                touchmove: 'onMouseMove',\n                mouseup: 'onMouseUp',\n                touchend: 'onMouseUp',\n                touchcancel: 'onMouseUp',\n            }, evt.data);\n            this.emit('change', { e: evt, handle: this });\n        }\n        onMouseMove(evt) {\n            this.emit('changing', { e: evt, handle: this });\n        }\n        onMouseUp(evt) {\n            this.emit('changed', { e: evt, handle: this });\n            this.undelegateDocumentEvents();\n            this.graph.view.delegateEvents();\n        }\n        onDoubleClick(evt) {\n            this.emit('remove', { e: evt, handle: this });\n        }\n    }\n    Vertices.Handle = Handle;\n})(Vertices || (Vertices = {}));\n(function (Vertices) {\n    const pathClassName = Config.prefix('edge-tool-vertex-path');\n    Vertices.config({\n        name: 'vertices',\n        snapRadius: 20,\n        addable: true,\n        removable: true,\n        removeRedundancies: true,\n        stopPropagation: true,\n        attrs: {\n            r: 6,\n            fill: '#333',\n            stroke: '#fff',\n            cursor: 'move',\n            'stroke-width': 2,\n        },\n        createHandle: (options) => new Vertices.Handle(options),\n        markup: [\n            {\n                tagName: 'path',\n                selector: 'connection',\n                className: pathClassName,\n                attrs: {\n                    fill: 'none',\n                    stroke: 'transparent',\n                    'stroke-width': 10,\n                    cursor: 'pointer',\n                },\n            },\n        ],\n        events: {\n            [`mousedown .${pathClassName}`]: 'onPathMouseDown',\n            [`touchstart .${pathClassName}`]: 'onPathMouseDown',\n        },\n    });\n})(Vertices || (Vertices = {}));\n//# sourceMappingURL=vertices.js.map","import { Dom, ObjectExt, FunctionExt } from '@antv/x6-common';\nimport { Point, Line } from '@antv/x6-geometry';\nimport { View } from '../../view/view';\nimport { ToolsView } from '../../view/tool';\nimport * as Util from './util';\nexport class Segments extends ToolsView.ToolItem {\n    constructor() {\n        super(...arguments);\n        this.handles = [];\n    }\n    get vertices() {\n        return this.cellView.cell.getVertices();\n    }\n    update() {\n        this.render();\n        return this;\n    }\n    onRender() {\n        Dom.addClass(this.container, this.prefixClassName('edge-tool-segments'));\n        this.resetHandles();\n        const edgeView = this.cellView;\n        const vertices = [...this.vertices];\n        vertices.unshift(edgeView.sourcePoint);\n        vertices.push(edgeView.targetPoint);\n        for (let i = 0, l = vertices.length; i < l - 1; i += 1) {\n            const vertex = vertices[i];\n            const nextVertex = vertices[i + 1];\n            const handle = this.renderHandle(vertex, nextVertex, i);\n            this.stamp(handle.container);\n            this.handles.push(handle);\n        }\n        return this;\n    }\n    renderHandle(vertex, nextVertex, index) {\n        const handle = this.options.createHandle({\n            index,\n            graph: this.graph,\n            guard: (evt) => this.guard(evt),\n            attrs: this.options.attrs || {},\n        });\n        if (this.options.processHandle) {\n            this.options.processHandle(handle);\n        }\n        this.updateHandle(handle, vertex, nextVertex);\n        this.container.appendChild(handle.container);\n        this.startHandleListening(handle);\n        return handle;\n    }\n    startHandleListening(handle) {\n        handle.on('change', this.onHandleChange, this);\n        handle.on('changing', this.onHandleChanging, this);\n        handle.on('changed', this.onHandleChanged, this);\n    }\n    stopHandleListening(handle) {\n        handle.off('change', this.onHandleChange, this);\n        handle.off('changing', this.onHandleChanging, this);\n        handle.off('changed', this.onHandleChanged, this);\n    }\n    resetHandles() {\n        const handles = this.handles;\n        this.handles = [];\n        if (handles) {\n            handles.forEach((handle) => {\n                this.stopHandleListening(handle);\n                handle.remove();\n            });\n        }\n    }\n    shiftHandleIndexes(delta) {\n        const handles = this.handles;\n        for (let i = 0, n = handles.length; i < n; i += 1) {\n            handles[i].options.index += delta;\n        }\n    }\n    resetAnchor(type, anchor) {\n        const edge = this.cellView.cell;\n        const options = {\n            ui: true,\n            toolId: this.cid,\n        };\n        if (anchor) {\n            edge.prop([type, 'anchor'], anchor, options);\n        }\n        else {\n            edge.removeProp([type, 'anchor'], options);\n        }\n    }\n    snapHandle(handle, position, data) {\n        const axis = handle.options.axis;\n        const index = handle.options.index;\n        const edgeView = this.cellView;\n        const edge = edgeView.cell;\n        const vertices = edge.getVertices();\n        const prev = vertices[index - 2] || data.sourceAnchor;\n        const next = vertices[index + 1] || data.targetAnchor;\n        const snapRadius = this.options.snapRadius;\n        if (Math.abs(position[axis] - prev[axis]) < snapRadius) {\n            position[axis] = prev[axis];\n        }\n        else if (Math.abs(position[axis] - next[axis]) < snapRadius) {\n            position[axis] = next[axis];\n        }\n        return position;\n    }\n    onHandleChanging({ handle, e, }) {\n        const graph = this.graph;\n        const options = this.options;\n        const edgeView = this.cellView;\n        const anchorFn = options.anchor;\n        const axis = handle.options.axis;\n        const index = handle.options.index - 1;\n        const data = this.getEventData(e);\n        const evt = this.normalizeEvent(e);\n        const coords = graph.snapToGrid(evt.clientX, evt.clientY);\n        const position = this.snapHandle(handle, coords.clone(), data);\n        const vertices = ObjectExt.cloneDeep(this.vertices);\n        let vertex = vertices[index];\n        let nextVertex = vertices[index + 1];\n        // First Segment\n        const sourceView = edgeView.sourceView;\n        const sourceBBox = edgeView.sourceBBox;\n        let changeSourceAnchor = false;\n        let deleteSourceAnchor = false;\n        if (!vertex) {\n            vertex = edgeView.sourceAnchor.toJSON();\n            vertex[axis] = position[axis];\n            if (sourceBBox.containsPoint(vertex)) {\n                changeSourceAnchor = true;\n            }\n            else {\n                vertices.unshift(vertex);\n                this.shiftHandleIndexes(1);\n                deleteSourceAnchor = true;\n            }\n        }\n        else if (index === 0) {\n            if (sourceBBox.containsPoint(vertex)) {\n                vertices.shift();\n                this.shiftHandleIndexes(-1);\n                changeSourceAnchor = true;\n            }\n            else {\n                vertex[axis] = position[axis];\n                deleteSourceAnchor = true;\n            }\n        }\n        else {\n            vertex[axis] = position[axis];\n        }\n        if (typeof anchorFn === 'function' && sourceView) {\n            if (changeSourceAnchor) {\n                const sourceAnchorPosition = data.sourceAnchor.clone();\n                sourceAnchorPosition[axis] = position[axis];\n                const sourceAnchor = FunctionExt.call(anchorFn, edgeView, sourceAnchorPosition, sourceView, edgeView.sourceMagnet || sourceView.container, 'source', edgeView, this);\n                this.resetAnchor('source', sourceAnchor);\n            }\n            if (deleteSourceAnchor) {\n                this.resetAnchor('source', data.sourceAnchorDef);\n            }\n        }\n        // Last segment\n        const targetView = edgeView.targetView;\n        const targetBBox = edgeView.targetBBox;\n        let changeTargetAnchor = false;\n        let deleteTargetAnchor = false;\n        if (!nextVertex) {\n            nextVertex = edgeView.targetAnchor.toJSON();\n            nextVertex[axis] = position[axis];\n            if (targetBBox.containsPoint(nextVertex)) {\n                changeTargetAnchor = true;\n            }\n            else {\n                vertices.push(nextVertex);\n                deleteTargetAnchor = true;\n            }\n        }\n        else if (index === vertices.length - 2) {\n            if (targetBBox.containsPoint(nextVertex)) {\n                vertices.pop();\n                changeTargetAnchor = true;\n            }\n            else {\n                nextVertex[axis] = position[axis];\n                deleteTargetAnchor = true;\n            }\n        }\n        else {\n            nextVertex[axis] = position[axis];\n        }\n        if (typeof anchorFn === 'function' && targetView) {\n            if (changeTargetAnchor) {\n                const targetAnchorPosition = data.targetAnchor.clone();\n                targetAnchorPosition[axis] = position[axis];\n                const targetAnchor = FunctionExt.call(anchorFn, edgeView, targetAnchorPosition, targetView, edgeView.targetMagnet || targetView.container, 'target', edgeView, this);\n                this.resetAnchor('target', targetAnchor);\n            }\n            if (deleteTargetAnchor) {\n                this.resetAnchor('target', data.targetAnchorDef);\n            }\n        }\n        if (!Point.equalPoints(vertices, this.vertices)) {\n            this.cellView.cell.setVertices(vertices, { ui: true, toolId: this.cid });\n        }\n        this.updateHandle(handle, vertex, nextVertex, 0);\n        if (!options.stopPropagation) {\n            edgeView.notifyMouseMove(evt, coords.x, coords.y);\n        }\n    }\n    onHandleChange({ handle, e }) {\n        const options = this.options;\n        const handles = this.handles;\n        const edgeView = this.cellView;\n        const index = handle.options.index;\n        if (!Array.isArray(handles)) {\n            return;\n        }\n        for (let i = 0, n = handles.length; i < n; i += 1) {\n            if (i !== index) {\n                handles[i].hide();\n            }\n        }\n        this.focus();\n        this.setEventData(e, {\n            sourceAnchor: edgeView.sourceAnchor.clone(),\n            targetAnchor: edgeView.targetAnchor.clone(),\n            sourceAnchorDef: ObjectExt.cloneDeep(this.cell.prop(['source', 'anchor'])),\n            targetAnchorDef: ObjectExt.cloneDeep(this.cell.prop(['target', 'anchor'])),\n        });\n        this.cell.startBatch('move-segment', { ui: true, toolId: this.cid });\n        if (!options.stopPropagation) {\n            const normalizedEvent = this.normalizeEvent(e);\n            const coords = this.graph.snapToGrid(normalizedEvent.clientX, normalizedEvent.clientY);\n            edgeView.notifyMouseDown(normalizedEvent, coords.x, coords.y);\n        }\n    }\n    onHandleChanged({ e }) {\n        const options = this.options;\n        const edgeView = this.cellView;\n        if (options.removeRedundancies) {\n            edgeView.removeRedundantLinearVertices({ ui: true, toolId: this.cid });\n        }\n        const normalizedEvent = this.normalizeEvent(e);\n        const coords = this.graph.snapToGrid(normalizedEvent.clientX, normalizedEvent.clientY);\n        this.render();\n        this.blur();\n        this.cell.stopBatch('move-segment', { ui: true, toolId: this.cid });\n        if (!options.stopPropagation) {\n            edgeView.notifyMouseUp(normalizedEvent, coords.x, coords.y);\n        }\n        edgeView.checkMouseleave(normalizedEvent);\n        options.onChanged && options.onChanged({ edge: edgeView.cell, edgeView });\n    }\n    updateHandle(handle, vertex, nextVertex, offset = 0) {\n        const precision = this.options.precision || 0;\n        const vertical = Math.abs(vertex.x - nextVertex.x) < precision;\n        const horizontal = Math.abs(vertex.y - nextVertex.y) < precision;\n        if (vertical || horizontal) {\n            const segmentLine = new Line(vertex, nextVertex);\n            const length = segmentLine.length();\n            if (length < this.options.threshold) {\n                handle.hide();\n            }\n            else {\n                const position = segmentLine.getCenter();\n                const axis = vertical ? 'x' : 'y';\n                position[axis] += offset || 0;\n                const angle = segmentLine.vector().vectorAngle(new Point(1, 0));\n                handle.updatePosition(position.x, position.y, angle, this.cellView);\n                handle.show();\n                handle.options.axis = axis;\n            }\n        }\n        else {\n            handle.hide();\n        }\n    }\n    onRemove() {\n        this.resetHandles();\n    }\n}\n(function (Segments) {\n    class Handle extends View {\n        constructor(options) {\n            super();\n            this.options = options;\n            this.render();\n            this.delegateEvents({\n                mousedown: 'onMouseDown',\n                touchstart: 'onMouseDown',\n            });\n        }\n        render() {\n            this.container = View.createElement('rect', true);\n            const attrs = this.options.attrs;\n            if (typeof attrs === 'function') {\n                const defaults = Segments.getDefaults();\n                this.setAttrs(Object.assign(Object.assign({}, defaults.attrs), attrs(this)));\n            }\n            else {\n                this.setAttrs(attrs);\n            }\n            this.addClass(this.prefixClassName('edge-tool-segment'));\n        }\n        updatePosition(x, y, angle, view) {\n            const p = view.getClosestPoint(new Point(x, y)) || new Point(x, y);\n            let matrix = Dom.createSVGMatrix().translate(p.x, p.y);\n            if (!p.equals({ x, y })) {\n                const line = new Line(x, y, p.x, p.y);\n                let deg = line.vector().vectorAngle(new Point(1, 0));\n                if (deg !== 0) {\n                    deg += 90;\n                }\n                matrix = matrix.rotate(deg);\n            }\n            else {\n                matrix = matrix.rotate(angle);\n            }\n            this.setAttrs({\n                transform: Dom.matrixToTransformString(matrix),\n                cursor: angle % 180 === 0 ? 'row-resize' : 'col-resize',\n            });\n        }\n        onMouseDown(evt) {\n            if (this.options.guard(evt)) {\n                return;\n            }\n            this.trigger('change', { e: evt, handle: this });\n            evt.stopPropagation();\n            evt.preventDefault();\n            this.options.graph.view.undelegateEvents();\n            this.delegateDocumentEvents({\n                mousemove: 'onMouseMove',\n                touchmove: 'onMouseMove',\n                mouseup: 'onMouseUp',\n                touchend: 'onMouseUp',\n                touchcancel: 'onMouseUp',\n            }, evt.data);\n        }\n        onMouseMove(evt) {\n            this.emit('changing', { e: evt, handle: this });\n        }\n        onMouseUp(evt) {\n            this.emit('changed', { e: evt, handle: this });\n            this.undelegateDocumentEvents();\n            this.options.graph.view.delegateEvents();\n        }\n        show() {\n            this.container.style.display = '';\n        }\n        hide() {\n            this.container.style.display = 'none';\n        }\n    }\n    Segments.Handle = Handle;\n})(Segments || (Segments = {}));\n(function (Segments) {\n    Segments.config({\n        name: 'segments',\n        precision: 0.5,\n        threshold: 40,\n        snapRadius: 10,\n        stopPropagation: true,\n        removeRedundancies: true,\n        attrs: {\n            width: 20,\n            height: 8,\n            x: -10,\n            y: -4,\n            rx: 4,\n            ry: 4,\n            fill: '#333',\n            stroke: '#fff',\n            'stroke-width': 2,\n        },\n        createHandle: (options) => new Segments.Handle(options),\n        anchor: Util.getAnchor,\n    });\n})(Segments || (Segments = {}));\n//# sourceMappingURL=segments.js.map","import { Dom, FunctionExt } from '@antv/x6-common';\nimport { Point } from '@antv/x6-geometry';\nimport { ToolsView } from '../../view/tool';\nimport * as Util from './util';\nclass Anchor extends ToolsView.ToolItem {\n    get type() {\n        return this.options.type;\n    }\n    onRender() {\n        Dom.addClass(this.container, this.prefixClassName(`edge-tool-${this.type}-anchor`));\n        this.toggleArea(false);\n        this.update();\n    }\n    update() {\n        const type = this.type;\n        const edgeView = this.cellView;\n        const terminalView = edgeView.getTerminalView(type);\n        if (terminalView) {\n            this.updateAnchor();\n            this.updateArea();\n            this.container.style.display = '';\n        }\n        else {\n            this.container.style.display = 'none';\n        }\n        return this;\n    }\n    updateAnchor() {\n        const childNodes = this.childNodes;\n        if (!childNodes) {\n            return;\n        }\n        const anchorNode = childNodes.anchor;\n        if (!anchorNode) {\n            return;\n        }\n        const type = this.type;\n        const edgeView = this.cellView;\n        const options = this.options;\n        const position = edgeView.getTerminalAnchor(type);\n        const customAnchor = edgeView.cell.prop([type, 'anchor']);\n        anchorNode.setAttribute('transform', `translate(${position.x}, ${position.y})`);\n        const anchorAttrs = customAnchor\n            ? options.customAnchorAttrs\n            : options.defaultAnchorAttrs;\n        if (anchorAttrs) {\n            Object.keys(anchorAttrs).forEach((attrName) => {\n                anchorNode.setAttribute(attrName, anchorAttrs[attrName]);\n            });\n        }\n    }\n    updateArea() {\n        const childNodes = this.childNodes;\n        if (!childNodes) {\n            return;\n        }\n        const areaNode = childNodes.area;\n        if (!areaNode) {\n            return;\n        }\n        const type = this.type;\n        const edgeView = this.cellView;\n        const terminalView = edgeView.getTerminalView(type);\n        if (terminalView) {\n            const terminalCell = terminalView.cell;\n            const magnet = edgeView.getTerminalMagnet(type);\n            let padding = this.options.areaPadding || 0;\n            if (!Number.isFinite(padding)) {\n                padding = 0;\n            }\n            let bbox;\n            let angle;\n            let center;\n            if (terminalView.isEdgeElement(magnet)) {\n                bbox = terminalView.getBBox();\n                angle = 0;\n                center = bbox.getCenter();\n            }\n            else {\n                bbox = terminalView.getUnrotatedBBoxOfElement(magnet);\n                angle = terminalCell.getAngle();\n                center = bbox.getCenter();\n                if (angle) {\n                    center.rotate(-angle, terminalCell.getBBox().getCenter());\n                }\n            }\n            bbox.inflate(padding);\n            Dom.attr(areaNode, {\n                x: -bbox.width / 2,\n                y: -bbox.height / 2,\n                width: bbox.width,\n                height: bbox.height,\n                transform: `translate(${center.x}, ${center.y}) rotate(${angle})`,\n            });\n        }\n    }\n    toggleArea(visible) {\n        if (this.childNodes) {\n            const elem = this.childNodes.area;\n            if (elem) {\n                elem.style.display = visible ? '' : 'none';\n            }\n        }\n    }\n    onMouseDown(evt) {\n        if (this.guard(evt)) {\n            return;\n        }\n        evt.stopPropagation();\n        evt.preventDefault();\n        this.graph.view.undelegateEvents();\n        if (this.options.documentEvents) {\n            this.delegateDocumentEvents(this.options.documentEvents);\n        }\n        this.focus();\n        this.toggleArea(this.options.restrictArea);\n        this.cell.startBatch('move-anchor', {\n            ui: true,\n            toolId: this.cid,\n        });\n    }\n    resetAnchor(anchor) {\n        const type = this.type;\n        const cell = this.cell;\n        if (anchor) {\n            cell.prop([type, 'anchor'], anchor, {\n                rewrite: true,\n                ui: true,\n                toolId: this.cid,\n            });\n        }\n        else {\n            cell.removeProp([type, 'anchor'], {\n                ui: true,\n                toolId: this.cid,\n            });\n        }\n    }\n    onMouseMove(evt) {\n        const terminalType = this.type;\n        const edgeView = this.cellView;\n        const terminalView = edgeView.getTerminalView(terminalType);\n        if (terminalView == null) {\n            return;\n        }\n        const e = this.normalizeEvent(evt);\n        const terminalCell = terminalView.cell;\n        const terminalMagnet = edgeView.getTerminalMagnet(terminalType);\n        let coords = this.graph.coord.clientToLocalPoint(e.clientX, e.clientY);\n        const snapFn = this.options.snap;\n        if (typeof snapFn === 'function') {\n            const tmp = FunctionExt.call(snapFn, edgeView, coords, terminalView, terminalMagnet, terminalType, edgeView, this);\n            coords = Point.create(tmp);\n        }\n        if (this.options.restrictArea) {\n            if (terminalView.isEdgeElement(terminalMagnet)) {\n                const pointAtConnection = terminalView.getClosestPoint(coords);\n                if (pointAtConnection) {\n                    coords = pointAtConnection;\n                }\n            }\n            else {\n                const bbox = terminalView.getUnrotatedBBoxOfElement(terminalMagnet);\n                const angle = terminalCell.getAngle();\n                const origin = terminalCell.getBBox().getCenter();\n                const rotatedCoords = coords.clone().rotate(angle, origin);\n                if (!bbox.containsPoint(rotatedCoords)) {\n                    coords = bbox\n                        .getNearestPointToPoint(rotatedCoords)\n                        .rotate(-angle, origin);\n                }\n            }\n        }\n        let anchor;\n        const anchorFn = this.options.anchor;\n        if (typeof anchorFn === 'function') {\n            anchor = FunctionExt.call(anchorFn, edgeView, coords, terminalView, terminalMagnet, terminalType, edgeView, this);\n        }\n        this.resetAnchor(anchor);\n        this.update();\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    onMouseUp(evt) {\n        this.graph.view.delegateEvents();\n        this.undelegateDocumentEvents();\n        this.blur();\n        this.toggleArea(false);\n        const edgeView = this.cellView;\n        if (this.options.removeRedundancies) {\n            edgeView.removeRedundantLinearVertices({ ui: true, toolId: this.cid });\n        }\n        this.cell.stopBatch('move-anchor', { ui: true, toolId: this.cid });\n    }\n    onDblClick() {\n        const anchor = this.options.resetAnchor;\n        if (anchor) {\n            this.resetAnchor(anchor === true ? undefined : anchor);\n        }\n        this.update();\n    }\n}\n(function (Anchor) {\n    Anchor.config({\n        tagName: 'g',\n        markup: [\n            {\n                tagName: 'circle',\n                selector: 'anchor',\n                attrs: {\n                    cursor: 'pointer',\n                },\n            },\n            {\n                tagName: 'rect',\n                selector: 'area',\n                attrs: {\n                    'pointer-events': 'none',\n                    fill: 'none',\n                    stroke: '#33334F',\n                    'stroke-dasharray': '2,4',\n                    rx: 5,\n                    ry: 5,\n                },\n            },\n        ],\n        events: {\n            mousedown: 'onMouseDown',\n            touchstart: 'onMouseDown',\n            dblclick: 'onDblClick',\n        },\n        documentEvents: {\n            mousemove: 'onMouseMove',\n            touchmove: 'onMouseMove',\n            mouseup: 'onMouseUp',\n            touchend: 'onMouseUp',\n            touchcancel: 'onMouseUp',\n        },\n        customAnchorAttrs: {\n            'stroke-width': 4,\n            stroke: '#33334F',\n            fill: '#FFFFFF',\n            r: 5,\n        },\n        defaultAnchorAttrs: {\n            'stroke-width': 2,\n            stroke: '#FFFFFF',\n            fill: '#33334F',\n            r: 6,\n        },\n        areaPadding: 6,\n        snapRadius: 10,\n        resetAnchor: true,\n        restrictArea: true,\n        removeRedundancies: true,\n        anchor: Util.getAnchor,\n        snap(pos, terminalView, terminalMagnet, terminalType, edgeView, toolView) {\n            const snapRadius = toolView.options.snapRadius || 0;\n            const isSource = terminalType === 'source';\n            const refIndex = isSource ? 0 : -1;\n            const ref = this.cell.getVertexAt(refIndex) ||\n                this.getTerminalAnchor(isSource ? 'target' : 'source');\n            if (ref) {\n                if (Math.abs(ref.x - pos.x) < snapRadius)\n                    pos.x = ref.x;\n                if (Math.abs(ref.y - pos.y) < snapRadius)\n                    pos.y = ref.y;\n            }\n            return pos;\n        },\n    });\n})(Anchor || (Anchor = {}));\nexport const SourceAnchor = Anchor.define({\n    name: 'source-anchor',\n    type: 'source',\n});\nexport const TargetAnchor = Anchor.define({\n    name: 'target-anchor',\n    type: 'target',\n});\n//# sourceMappingURL=anchor.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Dom } from '@antv/x6-common';\nimport { Point } from '@antv/x6-geometry';\nimport { ToolsView } from '../../view/tool';\nclass Arrowhead extends ToolsView.ToolItem {\n    get type() {\n        return this.options.type;\n    }\n    get ratio() {\n        return this.options.ratio;\n    }\n    init() {\n        if (this.options.attrs) {\n            const _a = this.options.attrs, { class: className } = _a, attrs = __rest(_a, [\"class\"]);\n            this.setAttrs(attrs, this.container);\n            if (className) {\n                Dom.addClass(this.container, className);\n            }\n        }\n    }\n    onRender() {\n        Dom.addClass(this.container, this.prefixClassName(`edge-tool-${this.type}-arrowhead`));\n        this.update();\n    }\n    update() {\n        const ratio = this.ratio;\n        const edgeView = this.cellView;\n        const tangent = edgeView.getTangentAtRatio(ratio);\n        const position = tangent ? tangent.start : edgeView.getPointAtRatio(ratio);\n        const angle = (tangent && tangent.vector().vectorAngle(new Point(1, 0))) || 0;\n        if (!position) {\n            return this;\n        }\n        const matrix = Dom.createSVGMatrix()\n            .translate(position.x, position.y)\n            .rotate(angle);\n        Dom.transform(this.container, matrix, { absolute: true });\n        return this;\n    }\n    onMouseDown(evt) {\n        if (this.guard(evt)) {\n            return;\n        }\n        evt.stopPropagation();\n        evt.preventDefault();\n        const edgeView = this.cellView;\n        if (edgeView.can('arrowheadMovable')) {\n            edgeView.cell.startBatch('move-arrowhead', {\n                ui: true,\n                toolId: this.cid,\n            });\n            const coords = this.graph.snapToGrid(evt.clientX, evt.clientY);\n            const data = edgeView.prepareArrowheadDragging(this.type, {\n                x: coords.x,\n                y: coords.y,\n                options: Object.assign(Object.assign({}, this.options), { toolId: this.cid }),\n            });\n            this.cellView.setEventData(evt, data);\n            this.delegateDocumentEvents(this.options.documentEvents, evt.data);\n            edgeView.graph.view.undelegateEvents();\n            this.container.style.pointerEvents = 'none';\n        }\n        this.focus();\n    }\n    onMouseMove(evt) {\n        const e = this.normalizeEvent(evt);\n        const coords = this.graph.snapToGrid(e.clientX, e.clientY);\n        this.cellView.onMouseMove(e, coords.x, coords.y);\n        this.update();\n    }\n    onMouseUp(evt) {\n        this.undelegateDocumentEvents();\n        const e = this.normalizeEvent(evt);\n        const edgeView = this.cellView;\n        const coords = this.graph.snapToGrid(e.clientX, e.clientY);\n        edgeView.onMouseUp(e, coords.x, coords.y);\n        this.graph.view.delegateEvents();\n        this.blur();\n        this.container.style.pointerEvents = '';\n        edgeView.cell.stopBatch('move-arrowhead', {\n            ui: true,\n            toolId: this.cid,\n        });\n    }\n}\n(function (Arrowhead) {\n    Arrowhead.config({\n        tagName: 'path',\n        isSVGElement: true,\n        events: {\n            mousedown: 'onMouseDown',\n            touchstart: 'onMouseDown',\n        },\n        documentEvents: {\n            mousemove: 'onMouseMove',\n            touchmove: 'onMouseMove',\n            mouseup: 'onMouseUp',\n            touchend: 'onMouseUp',\n            touchcancel: 'onMouseUp',\n        },\n    });\n})(Arrowhead || (Arrowhead = {}));\nexport const SourceArrowhead = Arrowhead.define({\n    name: 'source-arrowhead',\n    type: 'source',\n    ratio: 0,\n    attrs: {\n        d: 'M 10 -8 -10 0 10 8 Z',\n        fill: '#333',\n        stroke: '#fff',\n        'stroke-width': 2,\n        cursor: 'move',\n    },\n});\nexport const TargetArrowhead = Arrowhead.define({\n    name: 'target-arrowhead',\n    type: 'target',\n    ratio: 1,\n    attrs: {\n        d: 'M -10 -8 10 0 -10 8 Z',\n        fill: '#333',\n        stroke: '#fff',\n        'stroke-width': 2,\n        cursor: 'move',\n    },\n});\n//# sourceMappingURL=arrowhead.js.map","import { Point } from '@antv/x6-geometry';\nimport { Dom, FunctionExt, NumberExt, ObjectExt } from '@antv/x6-common';\nimport { ToolsView } from '../../view/tool';\nimport { Util } from '../../util';\nexport class CellEditor extends ToolsView.ToolItem {\n    constructor() {\n        super(...arguments);\n        this.labelIndex = -1;\n        this.distance = 0.5;\n        this.dblClick = this.onCellDblClick.bind(this);\n    }\n    onRender() {\n        const cellView = this.cellView;\n        if (cellView) {\n            cellView.on('cell:dblclick', this.dblClick);\n        }\n    }\n    createElement() {\n        const classNames = [\n            this.prefixClassName(`${this.cell.isEdge() ? 'edge' : 'node'}-tool-editor`),\n            this.prefixClassName('cell-tool-editor'),\n        ];\n        this.editor = ToolsView.createElement('div', false);\n        this.addClass(classNames, this.editor);\n        this.editor.contentEditable = 'true';\n        this.container.appendChild(this.editor);\n    }\n    removeElement() {\n        this.undelegateDocumentEvents();\n        if (this.editor) {\n            this.container.removeChild(this.editor);\n            this.editor = null;\n        }\n    }\n    updateEditor() {\n        const { cell, editor } = this;\n        if (!editor) {\n            return;\n        }\n        const { style } = editor;\n        if (cell.isNode()) {\n            this.updateNodeEditorTransform();\n        }\n        else if (cell.isEdge()) {\n            this.updateEdgeEditorTransform();\n        }\n        // set font style\n        const { attrs } = this.options;\n        style.fontSize = `${attrs.fontSize}px`;\n        style.fontFamily = attrs.fontFamily;\n        style.color = attrs.color;\n        style.backgroundColor = attrs.backgroundColor;\n        // set init value\n        const text = this.getCellText() || '';\n        editor.innerText = text;\n        this.setCellText(''); // clear display value when edit status because char ghosting.\n        return this;\n    }\n    updateNodeEditorTransform() {\n        const { graph, cell, editor } = this;\n        if (!editor) {\n            return;\n        }\n        let pos = Point.create();\n        let minWidth = 20;\n        let translate = '';\n        let { x, y } = this.options;\n        const { width, height } = this.options;\n        if (typeof x !== 'undefined' && typeof y !== 'undefined') {\n            const bbox = cell.getBBox();\n            x = NumberExt.normalizePercentage(x, bbox.width);\n            y = NumberExt.normalizePercentage(y, bbox.height);\n            pos = bbox.topLeft.translate(x, y);\n            minWidth = bbox.width - x * 2;\n        }\n        else {\n            const bbox = cell.getBBox();\n            pos = bbox.center;\n            minWidth = bbox.width - 4;\n            translate = 'translate(-50%, -50%)';\n        }\n        const scale = graph.scale();\n        const { style } = editor;\n        pos = graph.localToGraph(pos);\n        style.left = `${pos.x}px`;\n        style.top = `${pos.y}px`;\n        style.transform = `scale(${scale.sx}, ${scale.sy}) ${translate}`;\n        style.minWidth = `${minWidth}px`;\n        if (typeof width === 'number') {\n            style.width = `${width}px`;\n        }\n        if (typeof height === 'number') {\n            style.height = `${height}px`;\n        }\n    }\n    updateEdgeEditorTransform() {\n        if (!this.event) {\n            return;\n        }\n        const { graph, editor } = this;\n        if (!editor) {\n            return;\n        }\n        let pos = Point.create();\n        let minWidth = 20;\n        const { style } = editor;\n        const target = this.event.target;\n        const parent = target.parentElement;\n        const isEdgeLabel = parent && Dom.hasClass(parent, this.prefixClassName('edge-label'));\n        if (isEdgeLabel) {\n            const index = parent.getAttribute('data-index') || '0';\n            this.labelIndex = parseInt(index, 10);\n            const matrix = parent.getAttribute('transform');\n            const { translation } = Dom.parseTransformString(matrix);\n            pos = new Point(translation.tx, translation.ty);\n            minWidth = Util.getBBox(target).width;\n        }\n        else {\n            if (!this.options.labelAddable) {\n                return this;\n            }\n            pos = graph.clientToLocal(Point.create(this.event.clientX, this.event.clientY));\n            const view = this.cellView;\n            const d = view.path.closestPointLength(pos);\n            this.distance = d;\n            this.labelIndex = -1;\n        }\n        pos = graph.localToGraph(pos);\n        const scale = graph.scale();\n        style.left = `${pos.x}px`;\n        style.top = `${pos.y}px`;\n        style.minWidth = `${minWidth}px`;\n        style.transform = `scale(${scale.sx}, ${scale.sy}) translate(-50%, -50%)`;\n    }\n    onDocumentMouseUp(e) {\n        if (this.editor && e.target !== this.editor) {\n            const value = this.editor.innerText.replace(/\\n$/, '') || '';\n            // set value, when value is null, we will remove label in edge\n            this.setCellText(value !== '' ? value : null);\n            // remove tool\n            this.removeElement();\n        }\n    }\n    onCellDblClick({ e }) {\n        if (!this.editor) {\n            e.stopPropagation();\n            this.removeElement();\n            this.event = e;\n            this.createElement();\n            this.updateEditor();\n            this.autoFocus();\n            this.delegateDocumentEvents(this.options.documentEvents);\n        }\n    }\n    onMouseDown(e) {\n        e.stopPropagation();\n    }\n    autoFocus() {\n        setTimeout(() => {\n            if (this.editor) {\n                this.editor.focus();\n                this.selectText();\n            }\n        });\n    }\n    selectText() {\n        if (window.getSelection && this.editor) {\n            const range = document.createRange();\n            const selection = window.getSelection();\n            range.selectNodeContents(this.editor);\n            selection.removeAllRanges();\n            selection.addRange(range);\n        }\n    }\n    getCellText() {\n        const { getText } = this.options;\n        if (typeof getText === 'function') {\n            return FunctionExt.call(getText, this.cellView, {\n                cell: this.cell,\n                index: this.labelIndex,\n            });\n        }\n        if (typeof getText === 'string') {\n            if (this.cell.isNode()) {\n                return this.cell.attr(getText);\n            }\n            if (this.cell.isEdge()) {\n                if (this.labelIndex !== -1) {\n                    return this.cell.prop(`labels/${this.labelIndex}/attrs/${getText}`);\n                }\n            }\n        }\n    }\n    setCellText(value) {\n        const setText = this.options.setText;\n        if (typeof setText === 'function') {\n            FunctionExt.call(setText, this.cellView, {\n                cell: this.cell,\n                value,\n                index: this.labelIndex,\n                distance: this.distance,\n            });\n            return;\n        }\n        if (typeof setText === 'string') {\n            if (this.cell.isNode()) {\n                if (value !== null) {\n                    this.cell.attr(setText, value);\n                }\n                return;\n            }\n            if (this.cell.isEdge()) {\n                const edge = this.cell;\n                if (this.labelIndex === -1) {\n                    if (value) {\n                        const newLabel = {\n                            position: {\n                                distance: this.distance,\n                            },\n                            attrs: {},\n                        };\n                        ObjectExt.setByPath(newLabel, `attrs/${setText}`, value);\n                        edge.appendLabel(newLabel);\n                    }\n                }\n                else {\n                    if (value !== null) {\n                        edge.prop(`labels/${this.labelIndex}/attrs/${setText}`, value);\n                    }\n                    else if (typeof this.labelIndex === 'number') {\n                        edge.removeLabelAt(this.labelIndex);\n                    }\n                }\n            }\n        }\n    }\n    onRemove() {\n        const cellView = this.cellView;\n        if (cellView) {\n            cellView.off('cell:dblclick', this.dblClick);\n        }\n        this.removeElement();\n    }\n}\n(function (CellEditor) {\n    CellEditor.config({\n        tagName: 'div',\n        isSVGElement: false,\n        events: {\n            mousedown: 'onMouseDown',\n            touchstart: 'onMouseDown',\n        },\n        documentEvents: {\n            mouseup: 'onDocumentMouseUp',\n            touchend: 'onDocumentMouseUp',\n            touchcancel: 'onDocumentMouseUp',\n        },\n    });\n})(CellEditor || (CellEditor = {}));\n(function (CellEditor) {\n    CellEditor.NodeEditor = CellEditor.define({\n        attrs: {\n            fontSize: 14,\n            fontFamily: 'Arial, helvetica, sans-serif',\n            color: '#000',\n            backgroundColor: '#fff',\n        },\n        getText: 'text/text',\n        setText: 'text/text',\n    });\n    CellEditor.EdgeEditor = CellEditor.define({\n        attrs: {\n            fontSize: 14,\n            fontFamily: 'Arial, helvetica, sans-serif',\n            color: '#000',\n            backgroundColor: '#fff',\n        },\n        labelAddable: true,\n        getText: 'label/text',\n        setText: 'label/text',\n    });\n})(CellEditor || (CellEditor = {}));\n//# sourceMappingURL=editor.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Registry } from '../registry';\nimport { ToolsView } from '../../view/tool';\nimport { Button } from './button';\nimport { Boundary } from './boundary';\nimport { Vertices } from './vertices';\nimport { Segments } from './segments';\nimport { SourceAnchor, TargetAnchor } from './anchor';\nimport { SourceArrowhead, TargetArrowhead } from './arrowhead';\nimport { CellEditor } from './editor';\nexport var NodeTool;\n(function (NodeTool) {\n    NodeTool.presets = {\n        boundary: Boundary,\n        button: Button,\n        'button-remove': Button.Remove,\n        'node-editor': CellEditor.NodeEditor,\n    };\n    NodeTool.registry = Registry.create({\n        type: 'node tool',\n        process(name, options) {\n            if (typeof options === 'function') {\n                return options;\n            }\n            let parent = ToolsView.ToolItem;\n            const { inherit } = options, others = __rest(options, [\"inherit\"]);\n            if (inherit) {\n                const base = this.get(inherit);\n                if (base == null) {\n                    this.onNotFound(inherit, 'inherited');\n                }\n                else {\n                    parent = base;\n                }\n            }\n            if (others.name == null) {\n                others.name = name;\n            }\n            return parent.define.call(parent, others);\n        },\n    });\n    NodeTool.registry.register(NodeTool.presets, true);\n})(NodeTool || (NodeTool = {}));\nexport var EdgeTool;\n(function (EdgeTool) {\n    EdgeTool.presets = {\n        boundary: Boundary,\n        vertices: Vertices,\n        segments: Segments,\n        button: Button,\n        'button-remove': Button.Remove,\n        'source-anchor': SourceAnchor,\n        'target-anchor': TargetAnchor,\n        'source-arrowhead': SourceArrowhead,\n        'target-arrowhead': TargetArrowhead,\n        'edge-editor': CellEditor.EdgeEditor,\n    };\n    EdgeTool.registry = Registry.create({\n        type: 'edge tool',\n        process(name, options) {\n            if (typeof options === 'function') {\n                return options;\n            }\n            let parent = ToolsView.ToolItem;\n            const { inherit } = options, others = __rest(options, [\"inherit\"]);\n            if (inherit) {\n                const base = this.get(inherit);\n                if (base == null) {\n                    this.onNotFound(inherit, 'inherited');\n                }\n                else {\n                    parent = base;\n                }\n            }\n            if (others.name == null) {\n                others.name = name;\n            }\n            return parent.define.call(parent, others);\n        },\n    });\n    EdgeTool.registry.register(EdgeTool.presets, true);\n})(EdgeTool || (EdgeTool = {}));\n//# sourceMappingURL=index.js.map","import { NumberExt } from '@antv/x6-common';\nexport const center = createBBoxAnchor('center');\nexport const top = createBBoxAnchor('topCenter');\nexport const bottom = createBBoxAnchor('bottomCenter');\nexport const left = createBBoxAnchor('leftMiddle');\nexport const right = createBBoxAnchor('rightMiddle');\nexport const topLeft = createBBoxAnchor('topLeft');\nexport const topRight = createBBoxAnchor('topRight');\nexport const bottomLeft = createBBoxAnchor('bottomLeft');\nexport const bottomRight = createBBoxAnchor('bottomRight');\nfunction createBBoxAnchor(method) {\n    return function (view, magnet, ref, options = {}) {\n        const bbox = options.rotate\n            ? view.getUnrotatedBBoxOfElement(magnet)\n            : view.getBBoxOfElement(magnet);\n        const result = bbox[method];\n        result.x += NumberExt.normalizePercentage(options.dx, bbox.width);\n        result.y += NumberExt.normalizePercentage(options.dy, bbox.height);\n        const cell = view.cell;\n        return options.rotate\n            ? result.rotate(-cell.getAngle(), cell.getBBox().getCenter())\n            : result;\n    };\n}\n//# sourceMappingURL=bbox.js.map","import { NumberExt } from '@antv/x6-common';\nimport { Point } from '@antv/x6-geometry';\n// eslint-disable-next-line\nexport function resolve(fn) {\n    return function (view, magnet, ref, options) {\n        if (ref instanceof Element) {\n            const refView = this.graph.findViewByElem(ref);\n            let refPoint;\n            if (refView) {\n                if (refView.isEdgeElement(ref)) {\n                    const distance = options.fixedAt != null ? options.fixedAt : '50%';\n                    refPoint = getPointAtEdge(refView, distance);\n                }\n                else {\n                    refPoint = refView.getBBoxOfElement(ref).getCenter();\n                }\n            }\n            else {\n                refPoint = new Point();\n            }\n            return fn.call(this, view, magnet, refPoint, options);\n        }\n        return fn.apply(this, arguments); // eslint-disable-line\n    };\n}\nexport function getPointAtEdge(edgeView, value) {\n    const isPercentage = NumberExt.isPercentage(value);\n    const num = typeof value === 'string' ? parseFloat(value) : value;\n    if (isPercentage) {\n        return edgeView.getPointAtRatio(num / 100);\n    }\n    return edgeView.getPointAtLength(num);\n}\n//# sourceMappingURL=util.js.map","import { Angle } from '@antv/x6-geometry';\nimport { resolve } from './util';\nconst orthogonal = function (view, magnet, refPoint, options) {\n    const angle = Angle.normalize(view.cell.getAngle());\n    const bbox = view.getBBoxOfElement(magnet);\n    const result = bbox.getCenter();\n    const topLeft = bbox.getTopLeft();\n    const bottomRight = bbox.getBottomRight();\n    let padding = options.padding;\n    if (!Number.isFinite(padding)) {\n        padding = 0;\n    }\n    if (topLeft.y + padding <= refPoint.y &&\n        refPoint.y <= bottomRight.y - padding) {\n        const dy = refPoint.y - result.y;\n        result.x +=\n            angle === 0 || angle === 180\n                ? 0\n                : (dy * 1) / Math.tan(Angle.toRad(angle));\n        result.y += dy;\n    }\n    else if (topLeft.x + padding <= refPoint.x &&\n        refPoint.x <= bottomRight.x - padding) {\n        const dx = refPoint.x - result.x;\n        result.y +=\n            angle === 90 || angle === 270 ? 0 : dx * Math.tan(Angle.toRad(angle));\n        result.x += dx;\n    }\n    return result;\n};\n/**\n * Tries to place the anchor of the edge inside the view bbox so that the\n * edge is made orthogonal. The anchor is placed along two line segments\n * inside the view bbox (between the centers of the top and bottom side and\n * between the centers of the left and right sides). If it is not possible\n * to place the anchor so that the edge would be orthogonal, the anchor is\n * placed at the center of the view bbox instead.\n */\nexport const orth = resolve(orthogonal);\n//# sourceMappingURL=orth.js.map","/**\n * Places the anchor of the edge at center of the node bbox.\n */\nexport const nodeCenter = function (view, magnet, ref, options, endType) {\n    const result = view.cell.getConnectionPoint(this.cell, endType);\n    if (options.dx || options.dy) {\n        result.translate(options.dx || 0, options.dy || 0);\n    }\n    return result;\n};\n//# sourceMappingURL=node-center.js.map","import { resolve } from './util';\nconst middleSide = function (view, magnet, refPoint, options) {\n    let bbox;\n    let angle = 0;\n    let center;\n    const node = view.cell;\n    if (options.rotate) {\n        bbox = view.getUnrotatedBBoxOfElement(magnet);\n        center = node.getBBox().getCenter();\n        angle = node.getAngle();\n    }\n    else {\n        bbox = view.getBBoxOfElement(magnet);\n    }\n    const padding = options.padding;\n    if (padding != null && Number.isFinite(padding)) {\n        bbox.inflate(padding);\n    }\n    if (options.rotate) {\n        refPoint.rotate(angle, center);\n    }\n    const side = bbox.getNearestSideToPoint(refPoint);\n    let result;\n    switch (side) {\n        case 'left':\n            result = bbox.getLeftMiddle();\n            break;\n        case 'right':\n            result = bbox.getRightMiddle();\n            break;\n        case 'top':\n            result = bbox.getTopCenter();\n            break;\n        case 'bottom':\n            result = bbox.getBottomCenter();\n            break;\n        default:\n            break;\n    }\n    const direction = options.direction;\n    if (direction === 'H') {\n        if (side === 'top' || side === 'bottom') {\n            if (refPoint.x <= bbox.x + bbox.width) {\n                result = bbox.getLeftMiddle();\n            }\n            else {\n                result = bbox.getRightMiddle();\n            }\n        }\n    }\n    else if (direction === 'V') {\n        if (refPoint.y <= bbox.y + bbox.height) {\n            result = bbox.getTopCenter();\n        }\n        else {\n            result = bbox.getBottomCenter();\n        }\n    }\n    return options.rotate ? result.rotate(-angle, center) : result;\n};\n/**\n * Places the anchor of the edge in the middle of the side of view bbox\n * closest to the other endpoint.\n */\nexport const midSide = resolve(middleSide);\n//# sourceMappingURL=middle-side.js.map","import { Registry } from '../registry';\nimport * as anchors from './main';\nexport var NodeAnchor;\n(function (NodeAnchor) {\n    NodeAnchor.presets = anchors;\n    NodeAnchor.registry = Registry.create({\n        type: 'node endpoint',\n    });\n    NodeAnchor.registry.register(NodeAnchor.presets, true);\n})(NodeAnchor || (NodeAnchor = {}));\n//# sourceMappingURL=index.js.map","export const ratio = function (view, magnet, ref, options) {\n    let ratio = options.ratio != null ? options.ratio : 0.5;\n    if (ratio > 1) {\n        ratio /= 100;\n    }\n    return view.getPointAtRatio(ratio);\n};\n//# sourceMappingURL=ratio.js.map","export const length = function (view, magnet, ref, options) {\n    const length = options.length != null ? options.length : 20;\n    return view.getPointAtLength(length);\n};\n//# sourceMappingURL=length.js.map","import { Point } from '@antv/x6-geometry';\nimport { resolve } from '../node-anchor/util';\nexport const getClosestPoint = function (view, magnet, refPoint, options) {\n    const closestPoint = view.getClosestPoint(refPoint);\n    return closestPoint != null ? closestPoint : new Point();\n};\nexport const closest = resolve(getClosestPoint);\n//# sourceMappingURL=closest.js.map","import { Line } from '@antv/x6-geometry';\nimport { FunctionExt } from '@antv/x6-common';\nimport { resolve, getPointAtEdge } from '../node-anchor/util';\nimport { getClosestPoint } from './closest';\nconst orthogonal = function (view, magnet, refPoint, options) {\n    const OFFSET = 1e6;\n    const path = view.getConnection();\n    const segmentSubdivisions = view.getConnectionSubdivisions();\n    const vLine = new Line(refPoint.clone().translate(0, OFFSET), refPoint.clone().translate(0, -OFFSET));\n    const hLine = new Line(refPoint.clone().translate(OFFSET, 0), refPoint.clone().translate(-OFFSET, 0));\n    const vIntersections = vLine.intersect(path, {\n        segmentSubdivisions,\n    });\n    const hIntersections = hLine.intersect(path, {\n        segmentSubdivisions,\n    });\n    const intersections = [];\n    if (vIntersections) {\n        intersections.push(...vIntersections);\n    }\n    if (hIntersections) {\n        intersections.push(...hIntersections);\n    }\n    if (intersections.length > 0) {\n        return refPoint.closest(intersections);\n    }\n    if (options.fallbackAt != null) {\n        return getPointAtEdge(view, options.fallbackAt);\n    }\n    return FunctionExt.call(getClosestPoint, this, view, magnet, refPoint, options);\n};\nexport const orth = resolve(orthogonal);\n//# sourceMappingURL=orth.js.map","import { Registry } from '../registry';\nimport * as anchors from './main';\nexport var EdgeAnchor;\n(function (EdgeAnchor) {\n    EdgeAnchor.presets = anchors;\n    EdgeAnchor.registry = Registry.create({\n        type: 'edge endpoint',\n    });\n    EdgeAnchor.registry.register(EdgeAnchor.presets, true);\n})(EdgeAnchor || (EdgeAnchor = {}));\n//# sourceMappingURL=index.js.map","import { Line } from '@antv/x6-geometry';\nexport function offset(p1, p2, offset) {\n    let tx;\n    if (typeof offset === 'object') {\n        if (Number.isFinite(offset.y)) {\n            const line = new Line(p2, p1);\n            const { start, end } = line.parallel(offset.y);\n            p2 = start; // eslint-disable-line\n            p1 = end; // eslint-disable-line\n        }\n        tx = offset.x;\n    }\n    else {\n        tx = offset;\n    }\n    if (tx == null || !Number.isFinite(tx)) {\n        return p1;\n    }\n    const length = p1.distance(p2);\n    if (tx === 0 && length > 0) {\n        return p1;\n    }\n    return p1.move(p2, -Math.min(tx, length - 1));\n}\nexport function getStrokeWidth(magnet) {\n    const stroke = magnet.getAttribute('stroke-width');\n    if (stroke === null) {\n        return 0;\n    }\n    return parseFloat(stroke) || 0;\n}\nexport function findShapeNode(magnet) {\n    if (magnet == null) {\n        return null;\n    }\n    let node = magnet;\n    do {\n        let tagName = node.tagName;\n        if (typeof tagName !== 'string')\n            return null;\n        tagName = tagName.toUpperCase();\n        if (tagName === 'G') {\n            node = node.firstElementChild;\n        }\n        else if (tagName === 'TITLE') {\n            node = node.nextElementSibling;\n        }\n        else\n            break;\n    } while (node);\n    return node;\n}\n//# sourceMappingURL=util.js.map","import { offset, getStrokeWidth } from './util';\n/**\n * Places the connection point at the intersection between the edge\n * path end segment and the target node bbox.\n */\nexport const bbox = function (line, view, magnet, options) {\n    const bbox = view.getBBoxOfElement(magnet);\n    if (options.stroked) {\n        bbox.inflate(getStrokeWidth(magnet) / 2);\n    }\n    const intersections = line.intersect(bbox);\n    const p = intersections && intersections.length\n        ? line.start.closest(intersections)\n        : line.end;\n    return offset(p, line.start, options.offset);\n};\n//# sourceMappingURL=bbox.js.map","import { FunctionExt } from '@antv/x6-common';\nimport { bbox } from './bbox';\nimport { offset, getStrokeWidth } from './util';\n/**\n * Places the connection point at the intersection between the\n * link path end segment and the element's unrotated bbox.\n */\nexport const rect = function (line, view, magnet, options, type) {\n    const cell = view.cell;\n    const angle = cell.isNode() ? cell.getAngle() : 0;\n    if (angle === 0) {\n        return FunctionExt.call(bbox, this, line, view, magnet, options, type);\n    }\n    const bboxRaw = view.getUnrotatedBBoxOfElement(magnet);\n    if (options.stroked) {\n        bboxRaw.inflate(getStrokeWidth(magnet) / 2);\n    }\n    const center = bboxRaw.getCenter();\n    const lineRaw = line.clone().rotate(angle, center);\n    const intersections = lineRaw.setLength(1e6).intersect(bboxRaw);\n    const p = intersections && intersections.length\n        ? lineRaw.start.closest(intersections).rotate(-angle, center)\n        : line.end;\n    return offset(p, line.start, options.offset);\n};\n//# sourceMappingURL=rect.js.map","import { ObjectExt, Dom } from '@antv/x6-common';\nimport { Path, Rectangle, Ellipse } from '@antv/x6-geometry';\nimport { offset, getStrokeWidth, findShapeNode } from './util';\nimport { Util } from '../../util';\n/**\n * Places the connection point at the intersection between the\n * edge path end segment and the actual shape of the target magnet.\n */\nexport const boundary = function (line, view, magnet, options) {\n    let node;\n    let intersection;\n    const anchor = line.end;\n    const selector = options.selector;\n    if (typeof selector === 'string') {\n        node = view.findOne(selector);\n    }\n    else if (Array.isArray(selector)) {\n        node = ObjectExt.getByPath(magnet, selector);\n    }\n    else {\n        node = findShapeNode(magnet);\n    }\n    if (!Dom.isSVGGraphicsElement(node)) {\n        if (node === magnet || !Dom.isSVGGraphicsElement(magnet)) {\n            return anchor;\n        }\n        node = magnet;\n    }\n    const localShape = view.getShapeOfElement(node);\n    const magnetMatrix = view.getMatrixOfElement(node);\n    const translateMatrix = view.getRootTranslatedMatrix();\n    const rotateMatrix = view.getRootRotatedMatrix();\n    const targetMatrix = translateMatrix\n        .multiply(rotateMatrix)\n        .multiply(magnetMatrix);\n    const localMatrix = targetMatrix.inverse();\n    const localLine = Util.transformLine(line, localMatrix);\n    const localRef = localLine.start.clone();\n    const data = view.getDataOfElement(node);\n    if (options.insideout === false) {\n        if (data.shapeBBox == null) {\n            data.shapeBBox = localShape.bbox();\n        }\n        const localBBox = data.shapeBBox;\n        if (localBBox != null && localBBox.containsPoint(localRef)) {\n            return anchor;\n        }\n    }\n    if (options.extrapolate === true) {\n        localLine.setLength(1e6);\n    }\n    // Caching segment subdivisions for paths\n    let pathOptions;\n    if (Path.isPath(localShape)) {\n        const precision = options.precision || 2;\n        if (data.segmentSubdivisions == null) {\n            data.segmentSubdivisions = localShape.getSegmentSubdivisions({\n                precision,\n            });\n        }\n        pathOptions = {\n            precision,\n            segmentSubdivisions: data.segmentSubdivisions,\n        };\n        intersection = localLine.intersect(localShape, pathOptions);\n    }\n    else {\n        intersection = localLine.intersect(localShape);\n    }\n    if (intersection) {\n        if (Array.isArray(intersection)) {\n            intersection = localRef.closest(intersection);\n        }\n    }\n    else if (options.sticky === true) {\n        // No intersection, find the closest point instead\n        if (Rectangle.isRectangle(localShape)) {\n            intersection = localShape.getNearestPointToPoint(localRef);\n        }\n        else if (Ellipse.isEllipse(localShape)) {\n            intersection = localShape.intersectsWithLineFromCenterToPoint(localRef);\n        }\n        else {\n            intersection = localShape.closestPoint(localRef, pathOptions);\n        }\n    }\n    const cp = intersection\n        ? Util.transformPoint(intersection, targetMatrix)\n        : anchor;\n    let cpOffset = options.offset || 0;\n    if (options.stroked !== false) {\n        if (typeof cpOffset === 'object') {\n            cpOffset = Object.assign({}, cpOffset);\n            if (cpOffset.x == null) {\n                cpOffset.x = 0;\n            }\n            cpOffset.x += getStrokeWidth(node) / 2;\n        }\n        else {\n            cpOffset += getStrokeWidth(node) / 2;\n        }\n    }\n    return offset(cp, line.start, cpOffset);\n};\n//# sourceMappingURL=boundary.js.map","import { offset } from './util';\nfunction alignLine(line, type, offset = 0) {\n    const { start, end } = line;\n    let a;\n    let b;\n    let direction;\n    let coordinate;\n    switch (type) {\n        case 'left':\n            coordinate = 'x';\n            a = end;\n            b = start;\n            direction = -1;\n            break;\n        case 'right':\n            coordinate = 'x';\n            a = start;\n            b = end;\n            direction = 1;\n            break;\n        case 'top':\n            coordinate = 'y';\n            a = end;\n            b = start;\n            direction = -1;\n            break;\n        case 'bottom':\n            coordinate = 'y';\n            a = start;\n            b = end;\n            direction = 1;\n            break;\n        default:\n            return;\n    }\n    if (start[coordinate] < end[coordinate]) {\n        a[coordinate] = b[coordinate];\n    }\n    else {\n        b[coordinate] = a[coordinate];\n    }\n    if (Number.isFinite(offset)) {\n        a[coordinate] += direction * offset;\n        b[coordinate] += direction * offset;\n    }\n}\n/**\n * Places the connection point at the edge's endpoint.\n */\nexport const anchor = function (line, view, magnet, options) {\n    const { alignOffset, align } = options;\n    if (align) {\n        alignLine(line, align, alignOffset);\n    }\n    return offset(line.end, line.start, options.offset);\n};\n//# sourceMappingURL=anchor.js.map","import { Registry } from '../registry';\nimport * as connectionPoints from './main';\nexport var ConnectionPoint;\n(function (ConnectionPoint) {\n    ConnectionPoint.presets = connectionPoints;\n    ConnectionPoint.registry = Registry.create({\n        type: 'connection point',\n    });\n    ConnectionPoint.registry.register(ConnectionPoint.presets, true);\n})(ConnectionPoint || (ConnectionPoint = {}));\n//# sourceMappingURL=index.js.map","export const normal = function (vertices) {\n    return [...vertices];\n};\n//# sourceMappingURL=normal.js.map","import { NumberExt } from '@antv/x6-common';\n/**\n * Routes the edge always to/from a certain side\n */\nexport const oneSide = function (vertices, options, edgeView) {\n    const side = options.side || 'bottom';\n    const padding = NumberExt.normalizeSides(options.padding || 40);\n    const sourceBBox = edgeView.sourceBBox;\n    const targetBBox = edgeView.targetBBox;\n    const sourcePoint = sourceBBox.getCenter();\n    const targetPoint = targetBBox.getCenter();\n    let coord;\n    let dim;\n    let factor;\n    switch (side) {\n        case 'top':\n            factor = -1;\n            coord = 'y';\n            dim = 'height';\n            break;\n        case 'left':\n            factor = -1;\n            coord = 'x';\n            dim = 'width';\n            break;\n        case 'right':\n            factor = 1;\n            coord = 'x';\n            dim = 'width';\n            break;\n        case 'bottom':\n        default:\n            factor = 1;\n            coord = 'y';\n            dim = 'height';\n            break;\n    }\n    // Move the points from the center of the element to outside of it.\n    sourcePoint[coord] += factor * (sourceBBox[dim] / 2 + padding[side]);\n    targetPoint[coord] += factor * (targetBBox[dim] / 2 + padding[side]);\n    // Make edge orthogonal (at least the first and last vertex).\n    if (factor * (sourcePoint[coord] - targetPoint[coord]) > 0) {\n        targetPoint[coord] = sourcePoint[coord];\n    }\n    else {\n        sourcePoint[coord] = targetPoint[coord];\n    }\n    return [sourcePoint.toJSON(), ...vertices, targetPoint.toJSON()];\n};\n//# sourceMappingURL=oneside.js.map","import { NumberExt } from '@antv/x6-common';\nimport { Rectangle } from '@antv/x6-geometry';\nexport function getPointBBox(p) {\n    return new Rectangle(p.x, p.y, 0, 0);\n}\nexport function getPaddingBox(options = {}) {\n    const sides = NumberExt.normalizeSides(options.padding || 20);\n    return {\n        x: -sides.left,\n        y: -sides.top,\n        width: sides.left + sides.right,\n        height: sides.top + sides.bottom,\n    };\n}\nexport function getSourceBBox(view, options = {}) {\n    return view.sourceBBox.clone().moveAndExpand(getPaddingBox(options));\n}\nexport function getTargetBBox(view, options = {}) {\n    return view.targetBBox.clone().moveAndExpand(getPaddingBox(options));\n}\nexport function getSourceAnchor(view, options = {}) {\n    if (view.sourceAnchor) {\n        return view.sourceAnchor;\n    }\n    const bbox = getSourceBBox(view, options);\n    return bbox.getCenter();\n}\nexport function getTargetAnchor(view, options = {}) {\n    if (view.targetAnchor) {\n        return view.targetAnchor;\n    }\n    const bbox = getTargetBBox(view, options);\n    return bbox.getCenter();\n}\n//# sourceMappingURL=util.js.map","import { ArrayExt } from '@antv/x6-common';\nimport { Point, Line, Angle } from '@antv/x6-geometry';\nimport * as Util from './util';\n/**\n * Returns a route with orthogonal line segments.\n */\nexport const orth = function (vertices, options, edgeView) {\n    let sourceBBox = Util.getSourceBBox(edgeView, options);\n    let targetBBox = Util.getTargetBBox(edgeView, options);\n    const sourceAnchor = Util.getSourceAnchor(edgeView, options);\n    const targetAnchor = Util.getTargetAnchor(edgeView, options);\n    // If anchor lies outside of bbox, the bbox expands to include it\n    sourceBBox = sourceBBox.union(Util.getPointBBox(sourceAnchor));\n    targetBBox = targetBBox.union(Util.getPointBBox(targetAnchor));\n    const points = vertices.map((p) => Point.create(p));\n    points.unshift(sourceAnchor);\n    points.push(targetAnchor);\n    // bearing of previous route segment\n    let bearing = null;\n    const result = [];\n    for (let i = 0, len = points.length - 1; i < len; i += 1) {\n        let route = null;\n        const from = points[i];\n        const to = points[i + 1];\n        const isOrthogonal = Private.getBearing(from, to) != null;\n        if (i === 0) {\n            // source\n            if (i + 1 === len) {\n                // source -> target\n                // Expand one of the nodes by 1px to detect situations when the two\n                // nodes are positioned next to each other with no gap in between.\n                if (sourceBBox.intersectsWithRect(targetBBox.clone().inflate(1))) {\n                    route = Private.insideNode(from, to, sourceBBox, targetBBox);\n                }\n                else if (!isOrthogonal) {\n                    route = Private.nodeToNode(from, to, sourceBBox, targetBBox);\n                }\n            }\n            else {\n                // source -> vertex\n                if (sourceBBox.containsPoint(to)) {\n                    route = Private.insideNode(from, to, sourceBBox, Util.getPointBBox(to).moveAndExpand(Util.getPaddingBox(options)));\n                }\n                else if (!isOrthogonal) {\n                    route = Private.nodeToVertex(from, to, sourceBBox);\n                }\n            }\n        }\n        else if (i + 1 === len) {\n            // vertex -> target\n            // prevent overlaps with previous line segment\n            const isOrthogonalLoop = isOrthogonal && Private.getBearing(to, from) === bearing;\n            if (targetBBox.containsPoint(from) || isOrthogonalLoop) {\n                route = Private.insideNode(from, to, Util.getPointBBox(from).moveAndExpand(Util.getPaddingBox(options)), targetBBox, bearing);\n            }\n            else if (!isOrthogonal) {\n                route = Private.vertexToNode(from, to, targetBBox, bearing);\n            }\n        }\n        else if (!isOrthogonal) {\n            // vertex -> vertex\n            route = Private.vertexToVertex(from, to, bearing);\n        }\n        // set bearing for next iteration\n        if (route) {\n            result.push(...route.points);\n            bearing = route.direction;\n        }\n        else {\n            // orthogonal route and not looped\n            bearing = Private.getBearing(from, to);\n        }\n        // push `to` point to identified orthogonal vertices array\n        if (i + 1 < len) {\n            result.push(to);\n        }\n    }\n    return result;\n};\nvar Private;\n(function (Private) {\n    /**\n     * Bearing to opposite bearing map\n     */\n    const opposites = {\n        N: 'S',\n        S: 'N',\n        E: 'W',\n        W: 'E',\n    };\n    /**\n     * Bearing to radians map\n     */\n    const radians = {\n        N: (-Math.PI / 2) * 3,\n        S: -Math.PI / 2,\n        E: 0,\n        W: Math.PI,\n    };\n    /**\n     * Returns a point `p` where lines p,p1 and p,p2 are perpendicular\n     * and p is not contained in the given box\n     */\n    function freeJoin(p1, p2, bbox) {\n        let p = new Point(p1.x, p2.y);\n        if (bbox.containsPoint(p)) {\n            p = new Point(p2.x, p1.y);\n        }\n        // kept for reference\n        // if (bbox.containsPoint(p)) {\n        //   return null\n        // }\n        return p;\n    }\n    /**\n     * Returns either width or height of a bbox based on the given bearing.\n     */\n    function getBBoxSize(bbox, bearing) {\n        return bbox[bearing === 'W' || bearing === 'E' ? 'width' : 'height'];\n    }\n    Private.getBBoxSize = getBBoxSize;\n    function getBearing(from, to) {\n        if (from.x === to.x) {\n            return from.y > to.y ? 'N' : 'S';\n        }\n        if (from.y === to.y) {\n            return from.x > to.x ? 'W' : 'E';\n        }\n        return null;\n    }\n    Private.getBearing = getBearing;\n    function vertexToVertex(from, to, bearing) {\n        const p1 = new Point(from.x, to.y);\n        const p2 = new Point(to.x, from.y);\n        const d1 = getBearing(from, p1);\n        const d2 = getBearing(from, p2);\n        const opposite = bearing ? opposites[bearing] : null;\n        const p = d1 === bearing || (d1 !== opposite && (d2 === opposite || d2 !== bearing))\n            ? p1\n            : p2;\n        return { points: [p], direction: getBearing(p, to) };\n    }\n    Private.vertexToVertex = vertexToVertex;\n    function nodeToVertex(from, to, fromBBox) {\n        const p = freeJoin(from, to, fromBBox);\n        return { points: [p], direction: getBearing(p, to) };\n    }\n    Private.nodeToVertex = nodeToVertex;\n    function vertexToNode(from, to, toBBox, bearing) {\n        const points = [new Point(from.x, to.y), new Point(to.x, from.y)];\n        const freePoints = points.filter((p) => !toBBox.containsPoint(p));\n        const freeBearingPoints = freePoints.filter((p) => getBearing(p, from) !== bearing);\n        let p;\n        if (freeBearingPoints.length > 0) {\n            // Try to pick a point which bears the same direction as the previous segment.\n            p = freeBearingPoints.filter((p) => getBearing(from, p) === bearing).pop();\n            p = p || freeBearingPoints[0];\n            return {\n                points: [p],\n                direction: getBearing(p, to),\n            };\n        }\n        {\n            // Here we found only points which are either contained in the element or they would create\n            // a link segment going in opposite direction from the previous one.\n            // We take the point inside element and move it outside the element in the direction the\n            // route is going. Now we can join this point with the current end (using freeJoin).\n            p = ArrayExt.difference(points, freePoints)[0];\n            const p2 = Point.create(to).move(p, -getBBoxSize(toBBox, bearing) / 2);\n            const p1 = freeJoin(p2, from, toBBox);\n            return {\n                points: [p1, p2],\n                direction: getBearing(p2, to),\n            };\n        }\n    }\n    Private.vertexToNode = vertexToNode;\n    function nodeToNode(from, to, fromBBox, toBBox) {\n        let route = nodeToVertex(to, from, toBBox);\n        const p1 = route.points[0];\n        if (fromBBox.containsPoint(p1)) {\n            route = nodeToVertex(from, to, fromBBox);\n            const p2 = route.points[0];\n            if (toBBox.containsPoint(p2)) {\n                const fromBorder = Point.create(from).move(p2, -getBBoxSize(fromBBox, getBearing(from, p2)) / 2);\n                const toBorder = Point.create(to).move(p1, -getBBoxSize(toBBox, getBearing(to, p1)) / 2);\n                const mid = new Line(fromBorder, toBorder).getCenter();\n                const startRoute = nodeToVertex(from, mid, fromBBox);\n                const endRoute = vertexToVertex(mid, to, startRoute.direction);\n                route.points = [startRoute.points[0], endRoute.points[0]];\n                route.direction = endRoute.direction;\n            }\n        }\n        return route;\n    }\n    Private.nodeToNode = nodeToNode;\n    // Finds route for situations where one node is inside the other.\n    // Typically the route is directed outside the outer node first and\n    // then back towards the inner node.\n    function insideNode(from, to, fromBBox, toBBox, bearing) {\n        const boundary = fromBBox.union(toBBox).inflate(1);\n        // start from the point which is closer to the boundary\n        const center = boundary.getCenter();\n        const reversed = center.distance(to) > center.distance(from);\n        const start = reversed ? to : from;\n        const end = reversed ? from : to;\n        let p1;\n        let p2;\n        let p3;\n        if (bearing) {\n            // Points on circle with radius equals 'W + H` are always outside the rectangle\n            // with width W and height H if the center of that circle is the center of that rectangle.\n            p1 = Point.fromPolar(boundary.width + boundary.height, radians[bearing], start);\n            p1 = boundary.getNearestPointToPoint(p1).move(p1, -1);\n        }\n        else {\n            p1 = boundary.getNearestPointToPoint(start).move(start, 1);\n        }\n        p2 = freeJoin(p1, end, boundary);\n        let points;\n        if (p1.round().equals(p2.round())) {\n            p2 = Point.fromPolar(boundary.width + boundary.height, Angle.toRad(p1.theta(start)) + Math.PI / 2, end);\n            p2 = boundary.getNearestPointToPoint(p2).move(end, 1).round();\n            p3 = freeJoin(p1, p2, boundary);\n            points = reversed ? [p2, p3, p1] : [p1, p3, p2];\n        }\n        else {\n            points = reversed ? [p2, p1] : [p1, p2];\n        }\n        const direction = reversed ? getBearing(p1, to) : getBearing(p2, to);\n        return {\n            points,\n            direction,\n        };\n    }\n    Private.insideNode = insideNode;\n})(Private || (Private = {}));\n//# sourceMappingURL=orth.js.map","import { NumberExt } from '@antv/x6-common';\nimport { Point, Angle } from '@antv/x6-geometry';\nimport { orth } from '../orth';\nexport const defaults = {\n    step: 10,\n    maxLoopCount: 2000,\n    precision: 1,\n    maxDirectionChange: 90,\n    perpendicular: true,\n    excludeTerminals: [],\n    excludeNodes: [],\n    excludeShapes: [],\n    startDirections: ['top', 'right', 'bottom', 'left'],\n    endDirections: ['top', 'right', 'bottom', 'left'],\n    directionMap: {\n        top: { x: 0, y: -1 },\n        right: { x: 1, y: 0 },\n        bottom: { x: 0, y: 1 },\n        left: { x: -1, y: 0 },\n    },\n    cost() {\n        const step = resolve(this.step, this);\n        return step;\n    },\n    directions() {\n        const step = resolve(this.step, this);\n        const cost = resolve(this.cost, this);\n        return [\n            { cost, offsetX: step, offsetY: 0 },\n            { cost, offsetX: -step, offsetY: 0 },\n            { cost, offsetX: 0, offsetY: step },\n            { cost, offsetX: 0, offsetY: -step },\n        ];\n    },\n    penalties() {\n        const step = resolve(this.step, this);\n        return {\n            0: 0,\n            45: step / 2,\n            90: step / 2,\n        };\n    },\n    paddingBox() {\n        const step = resolve(this.step, this);\n        return {\n            x: -step,\n            y: -step,\n            width: 2 * step,\n            height: 2 * step,\n        };\n    },\n    fallbackRouter: orth,\n    draggingRouter: null,\n    snapToGrid: true,\n};\nexport function resolve(input, options) {\n    if (typeof input === 'function') {\n        return input.call(options);\n    }\n    return input;\n}\nexport function resolveOptions(options) {\n    const result = Object.keys(options).reduce((memo, key) => {\n        const ret = memo;\n        if (key === 'fallbackRouter' ||\n            key === 'draggingRouter' ||\n            key === 'fallbackRoute') {\n            ret[key] = options[key];\n        }\n        else {\n            ret[key] = resolve(options[key], options);\n        }\n        return memo;\n    }, {});\n    if (result.padding) {\n        const sides = NumberExt.normalizeSides(result.padding);\n        result.paddingBox = {\n            x: -sides.left,\n            y: -sides.top,\n            width: sides.left + sides.right,\n            height: sides.top + sides.bottom,\n        };\n    }\n    result.directions.forEach((direction) => {\n        const point1 = new Point(0, 0);\n        const point2 = new Point(direction.offsetX, direction.offsetY);\n        direction.angle = Angle.normalize(point1.theta(point2));\n    });\n    return result;\n}\n//# sourceMappingURL=options.js.map","import { ArrayExt } from '@antv/x6-common';\nconst OPEN = 1;\nconst CLOSE = 2;\nexport class SortedSet {\n    constructor() {\n        this.items = [];\n        this.hash = {};\n        this.values = {};\n    }\n    add(item, value) {\n        if (this.hash[item]) {\n            // item removal\n            this.items.splice(this.items.indexOf(item), 1);\n        }\n        else {\n            this.hash[item] = OPEN;\n        }\n        this.values[item] = value;\n        const index = ArrayExt.sortedIndexBy(this.items, item, (key) => this.values[key]);\n        this.items.splice(index, 0, item);\n    }\n    pop() {\n        const item = this.items.shift();\n        if (item) {\n            this.hash[item] = CLOSE;\n        }\n        return item;\n    }\n    isOpen(item) {\n        return this.hash[item] === OPEN;\n    }\n    isClose(item) {\n        return this.hash[item] === CLOSE;\n    }\n    isEmpty() {\n        return this.items.length === 0;\n    }\n}\n//# sourceMappingURL=sorted-set.js.map","import { ArrayExt } from '@antv/x6-common';\nimport { Point } from '@antv/x6-geometry';\n/**\n * Helper structure to identify whether a point lies inside an obstacle.\n */\nexport class ObstacleMap {\n    constructor(options) {\n        this.options = options;\n        this.mapGridSize = 100;\n        this.map = {};\n    }\n    /**\n     * Builds a map of all nodes for quicker obstacle queries i.e. is a point\n     * contained in any obstacle?\n     *\n     * A simplified grid search.\n     */\n    build(model, edge) {\n        const options = this.options;\n        // source or target node could be excluded from set of obstacles\n        const excludedTerminals = options.excludeTerminals.reduce((memo, type) => {\n            const terminal = edge[type];\n            if (terminal) {\n                const cell = model.getCell(terminal.cell);\n                if (cell) {\n                    memo.push(cell);\n                }\n            }\n            return memo;\n        }, []);\n        let excludedAncestors = [];\n        const source = model.getCell(edge.getSourceCellId());\n        if (source) {\n            excludedAncestors = ArrayExt.union(excludedAncestors, source.getAncestors().map((cell) => cell.id));\n        }\n        const target = model.getCell(edge.getTargetCellId());\n        if (target) {\n            excludedAncestors = ArrayExt.union(excludedAncestors, target.getAncestors().map((cell) => cell.id));\n        }\n        // The graph is divided into smaller cells, where each holds information\n        // about which node belong to it. When we query whether a point lies\n        // inside an obstacle we don't need to go through all obstacles, we check\n        // only those in a particular cell.\n        const mapGridSize = this.mapGridSize;\n        model.getNodes().reduce((map, node) => {\n            const excludedTerminal = excludedTerminals.some((cell) => cell.id === node.id);\n            const excludedShape = node.shape\n                ? options.excludeShapes.includes(node.shape)\n                : false;\n            const excludedNode = options.excludeNodes.some((item) => {\n                if (typeof item === 'string') {\n                    return node.id === item;\n                }\n                return item === node;\n            });\n            const excludedAncestor = excludedAncestors.includes(node.id);\n            const excluded = excludedShape || excludedTerminal || excludedNode || excludedAncestor;\n            if (node.isVisible() && !excluded) {\n                const bbox = node.getBBox().moveAndExpand(options.paddingBox);\n                const origin = bbox.getOrigin().snapToGrid(mapGridSize);\n                const corner = bbox.getCorner().snapToGrid(mapGridSize);\n                for (let x = origin.x; x <= corner.x; x += mapGridSize) {\n                    for (let y = origin.y; y <= corner.y; y += mapGridSize) {\n                        const key = new Point(x, y).toString();\n                        if (map[key] == null) {\n                            map[key] = [];\n                        }\n                        map[key].push(bbox);\n                    }\n                }\n            }\n            return map;\n        }, this.map);\n        return this;\n    }\n    isAccessible(point) {\n        const key = point.clone().snapToGrid(this.mapGridSize).toString();\n        const rects = this.map[key];\n        return rects ? rects.every((rect) => !rect.containsPoint(point)) : true;\n    }\n}\n//# sourceMappingURL=obstacle-map.js.map","import { Point, Line, Angle, GeometryUtil } from '@antv/x6-geometry';\nexport function getSourceBBox(view, options) {\n    const bbox = view.sourceBBox.clone();\n    if (options && options.paddingBox) {\n        return bbox.moveAndExpand(options.paddingBox);\n    }\n    return bbox;\n}\nexport function getTargetBBox(view, options) {\n    const bbox = view.targetBBox.clone();\n    if (options && options.paddingBox) {\n        return bbox.moveAndExpand(options.paddingBox);\n    }\n    return bbox;\n}\nexport function getSourceEndpoint(view, options) {\n    if (view.sourceAnchor) {\n        return view.sourceAnchor;\n    }\n    const sourceBBox = getSourceBBox(view, options);\n    return sourceBBox.getCenter();\n}\nexport function getTargetEndpoint(view, options) {\n    if (view.targetAnchor) {\n        return view.targetAnchor;\n    }\n    const targetBBox = getTargetBBox(view, options);\n    return targetBBox.getCenter();\n}\n// returns a direction index from start point to end point\n// corrects for grid deformation between start and end\nexport function getDirectionAngle(start, end, directionCount, grid, options) {\n    const quadrant = 360 / directionCount;\n    const angleTheta = start.theta(fixAngleEnd(start, end, grid, options));\n    const normalizedAngle = Angle.normalize(angleTheta + quadrant / 2);\n    return quadrant * Math.floor(normalizedAngle / quadrant);\n}\nfunction fixAngleEnd(start, end, grid, options) {\n    const step = options.step;\n    const diffX = end.x - start.x;\n    const diffY = end.y - start.y;\n    const gridStepsX = diffX / grid.x;\n    const gridStepsY = diffY / grid.y;\n    const distanceX = gridStepsX * step;\n    const distanceY = gridStepsY * step;\n    return new Point(start.x + distanceX, start.y + distanceY);\n}\n/**\n * Returns the change in direction between two direction angles.\n */\nexport function getDirectionChange(angle1, angle2) {\n    const change = Math.abs(angle1 - angle2);\n    return change > 180 ? 360 - change : change;\n}\n// fix direction offsets according to current grid\nexport function getGridOffsets(grid, options) {\n    const step = options.step;\n    options.directions.forEach((direction) => {\n        direction.gridOffsetX = (direction.offsetX / step) * grid.x;\n        direction.gridOffsetY = (direction.offsetY / step) * grid.y;\n    });\n    return options.directions;\n}\n// get grid size in x and y dimensions, adapted to source and target positions\nexport function getGrid(step, source, target) {\n    return {\n        source: source.clone(),\n        x: getGridDimension(target.x - source.x, step),\n        y: getGridDimension(target.y - source.y, step),\n    };\n}\nfunction getGridDimension(diff, step) {\n    // return step if diff = 0\n    if (!diff) {\n        return step;\n    }\n    const abs = Math.abs(diff);\n    const count = Math.round(abs / step);\n    // return `abs` if less than one step apart\n    if (!count) {\n        return abs;\n    }\n    // otherwise, return corrected step\n    const roundedDiff = count * step;\n    const remainder = abs - roundedDiff;\n    const correction = remainder / count;\n    return step + correction;\n}\nfunction snapGrid(point, grid) {\n    const source = grid.source;\n    const x = GeometryUtil.snapToGrid(point.x - source.x, grid.x) + source.x;\n    const y = GeometryUtil.snapToGrid(point.y - source.y, grid.y) + source.y;\n    return new Point(x, y);\n}\nexport function round(point, precision) {\n    return point.round(precision);\n}\nexport function align(point, grid, precision) {\n    return round(snapGrid(point.clone(), grid), precision);\n}\nexport function getKey(point) {\n    return point.toString();\n}\nexport function normalizePoint(point) {\n    return new Point(point.x === 0 ? 0 : Math.abs(point.x) / point.x, point.y === 0 ? 0 : Math.abs(point.y) / point.y);\n}\nexport function getCost(from, anchors) {\n    let min = Infinity;\n    for (let i = 0, len = anchors.length; i < len; i += 1) {\n        const dist = from.manhattanDistance(anchors[i]);\n        if (dist < min) {\n            min = dist;\n        }\n    }\n    return min;\n}\n// Find points around the bbox taking given directions into account\n// lines are drawn from anchor in given directions, intersections recorded\n// if anchor is outside bbox, only those directions that intersect get a rect point\n// the anchor itself is returned as rect point (representing some directions)\n// (since those directions are unobstructed by the bbox)\nexport function getRectPoints(anchor, bbox, directionList, grid, options) {\n    const precision = options.precision;\n    const directionMap = options.directionMap;\n    const centerVector = anchor.diff(bbox.getCenter());\n    const rectPoints = Object.keys(directionMap).reduce((res, key) => {\n        if (directionList.includes(key)) {\n            const direction = directionMap[key];\n            // Create a line that is guaranteed to intersect the bbox if bbox\n            // is in the direction even if anchor lies outside of bbox.\n            const ending = new Point(anchor.x + direction.x * (Math.abs(centerVector.x) + bbox.width), anchor.y + direction.y * (Math.abs(centerVector.y) + bbox.height));\n            const intersectionLine = new Line(anchor, ending);\n            // Get the farther intersection, in case there are two\n            // (that happens if anchor lies next to bbox)\n            const intersections = intersectionLine.intersect(bbox) || [];\n            let farthestIntersectionDistance;\n            let farthestIntersection = null;\n            for (let i = 0; i < intersections.length; i += 1) {\n                const intersection = intersections[i];\n                const distance = anchor.squaredDistance(intersection);\n                if (farthestIntersectionDistance == null ||\n                    distance > farthestIntersectionDistance) {\n                    farthestIntersectionDistance = distance;\n                    farthestIntersection = intersection;\n                }\n            }\n            // If an intersection was found in this direction, it is our rectPoint\n            if (farthestIntersection) {\n                let target = align(farthestIntersection, grid, precision);\n                // If the rectPoint lies inside the bbox, offset it by one more step\n                if (bbox.containsPoint(target)) {\n                    target = align(target.translate(direction.x * grid.x, direction.y * grid.y), grid, precision);\n                }\n                res.push(target);\n            }\n        }\n        return res;\n    }, []);\n    // if anchor lies outside of bbox, add it to the array of points\n    if (!bbox.containsPoint(anchor)) {\n        rectPoints.push(align(anchor, grid, precision));\n    }\n    return rectPoints;\n}\n// reconstructs a route by concatenating points with their parents\nexport function reconstructRoute(parents, points, tailPoint, from, to) {\n    const route = [];\n    let prevDiff = normalizePoint(to.diff(tailPoint));\n    // tailPoint is assumed to be aligned already\n    let currentKey = getKey(tailPoint);\n    let parent = parents[currentKey];\n    let point;\n    while (parent) {\n        // point is assumed to be aligned already\n        point = points[currentKey];\n        const diff = normalizePoint(point.diff(parent));\n        if (!diff.equals(prevDiff)) {\n            route.unshift(point);\n            prevDiff = diff;\n        }\n        // parent is assumed to be aligned already\n        currentKey = getKey(parent);\n        parent = parents[currentKey];\n    }\n    // leadPoint is assumed to be aligned already\n    const leadPoint = points[currentKey];\n    const fromDiff = normalizePoint(leadPoint.diff(from));\n    if (!fromDiff.equals(prevDiff)) {\n        route.unshift(leadPoint);\n    }\n    return route;\n}\n//# sourceMappingURL=util.js.map","import { FunctionExt } from '@antv/x6-common';\nimport { Point, Rectangle } from '@antv/x6-geometry';\nimport { SortedSet } from './sorted-set';\nimport { ObstacleMap } from './obstacle-map';\nimport * as util from './util';\nimport { resolveOptions, } from './options';\n/**\n * Finds the route between two points (`from`, `to`).\n */\nfunction findRoute(edgeView, from, to, map, options) {\n    const precision = options.precision;\n    let sourceEndpoint;\n    let targetEndpoint;\n    if (Rectangle.isRectangle(from)) {\n        sourceEndpoint = util.round(util.getSourceEndpoint(edgeView, options).clone(), precision);\n    }\n    else {\n        sourceEndpoint = util.round(from.clone(), precision);\n    }\n    if (Rectangle.isRectangle(to)) {\n        targetEndpoint = util.round(util.getTargetEndpoint(edgeView, options).clone(), precision);\n    }\n    else {\n        targetEndpoint = util.round(to.clone(), precision);\n    }\n    // Get grid for this route.\n    const grid = util.getGrid(options.step, sourceEndpoint, targetEndpoint);\n    // Get pathfinding points.\n    // -----------------------\n    const startPoint = sourceEndpoint;\n    const endPoint = targetEndpoint;\n    let startPoints;\n    let endPoints;\n    if (Rectangle.isRectangle(from)) {\n        startPoints = util.getRectPoints(startPoint, from, options.startDirections, grid, options);\n    }\n    else {\n        startPoints = [startPoint];\n    }\n    if (Rectangle.isRectangle(to)) {\n        endPoints = util.getRectPoints(targetEndpoint, to, options.endDirections, grid, options);\n    }\n    else {\n        endPoints = [endPoint];\n    }\n    // take into account only accessible rect points (those not under obstacles)\n    startPoints = startPoints.filter((p) => map.isAccessible(p));\n    endPoints = endPoints.filter((p) => map.isAccessible(p));\n    // There is an accessible route point on both sides.\n    if (startPoints.length > 0 && endPoints.length > 0) {\n        const openSet = new SortedSet();\n        // Keeps the actual points for given nodes of the open set.\n        const points = {};\n        // Keeps the point that is immediate predecessor of given element.\n        const parents = {};\n        // Cost from start to a point along best known path.\n        const costs = {};\n        for (let i = 0, n = startPoints.length; i < n; i += 1) {\n            // startPoint is assumed to be aligned already\n            const startPoint = startPoints[i];\n            const key = util.getKey(startPoint);\n            openSet.add(key, util.getCost(startPoint, endPoints));\n            points[key] = startPoint;\n            costs[key] = 0;\n        }\n        const previousRouteDirectionAngle = options.previousDirectionAngle;\n        // undefined for first route\n        const isPathBeginning = previousRouteDirectionAngle === undefined;\n        // directions\n        let direction;\n        let directionChange;\n        const directions = util.getGridOffsets(grid, options);\n        const numDirections = directions.length;\n        const endPointsKeys = endPoints.reduce((res, endPoint) => {\n            const key = util.getKey(endPoint);\n            res.push(key);\n            return res;\n        }, []);\n        // main route finding loop\n        const sameStartEndPoints = Point.equalPoints(startPoints, endPoints);\n        let loopsRemaining = options.maxLoopCount;\n        while (!openSet.isEmpty() && loopsRemaining > 0) {\n            // Get the closest item and mark it CLOSED\n            const currentKey = openSet.pop();\n            const currentPoint = points[currentKey];\n            const currentParent = parents[currentKey];\n            const currentCost = costs[currentKey];\n            const isStartPoint = currentPoint.equals(startPoint);\n            const isRouteBeginning = currentParent == null;\n            let previousDirectionAngle;\n            if (!isRouteBeginning) {\n                previousDirectionAngle = util.getDirectionAngle(currentParent, currentPoint, numDirections, grid, options);\n            }\n            else if (!isPathBeginning) {\n                // a vertex on the route\n                previousDirectionAngle = previousRouteDirectionAngle;\n            }\n            else if (!isStartPoint) {\n                // beginning of route on the path\n                previousDirectionAngle = util.getDirectionAngle(startPoint, currentPoint, numDirections, grid, options);\n            }\n            else {\n                previousDirectionAngle = null;\n            }\n            // Check if we reached any endpoint\n            const skipEndCheck = isRouteBeginning && sameStartEndPoints;\n            if (!skipEndCheck && endPointsKeys.indexOf(currentKey) >= 0) {\n                options.previousDirectionAngle = previousDirectionAngle;\n                return util.reconstructRoute(parents, points, currentPoint, startPoint, endPoint);\n            }\n            // Go over all possible directions and find neighbors\n            for (let i = 0; i < numDirections; i += 1) {\n                direction = directions[i];\n                const directionAngle = direction.angle;\n                directionChange = util.getDirectionChange(previousDirectionAngle, directionAngle);\n                // Don't use the point changed rapidly.\n                if (!(isPathBeginning && isStartPoint) &&\n                    directionChange > options.maxDirectionChange) {\n                    continue;\n                }\n                const neighborPoint = util.align(currentPoint\n                    .clone()\n                    .translate(direction.gridOffsetX || 0, direction.gridOffsetY || 0), grid, precision);\n                const neighborKey = util.getKey(neighborPoint);\n                // Closed points were already evaluated.\n                if (openSet.isClose(neighborKey) || !map.isAccessible(neighborPoint)) {\n                    continue;\n                }\n                // Neighbor is an end point.\n                if (endPointsKeys.indexOf(neighborKey) >= 0) {\n                    const isEndPoint = neighborPoint.equals(endPoint);\n                    if (!isEndPoint) {\n                        const endDirectionAngle = util.getDirectionAngle(neighborPoint, endPoint, numDirections, grid, options);\n                        const endDirectionChange = util.getDirectionChange(directionAngle, endDirectionAngle);\n                        if (endDirectionChange > options.maxDirectionChange) {\n                            continue;\n                        }\n                    }\n                }\n                // The current direction is ok.\n                // ----------------------------\n                const neighborCost = direction.cost;\n                const neighborPenalty = isStartPoint\n                    ? 0\n                    : options.penalties[directionChange];\n                const costFromStart = currentCost + neighborCost + neighborPenalty;\n                // Neighbor point has not been processed yet or the cost of\n                // the path from start is lower than previously calculated.\n                if (!openSet.isOpen(neighborKey) ||\n                    costFromStart < costs[neighborKey]) {\n                    points[neighborKey] = neighborPoint;\n                    parents[neighborKey] = currentPoint;\n                    costs[neighborKey] = costFromStart;\n                    openSet.add(neighborKey, costFromStart + util.getCost(neighborPoint, endPoints));\n                }\n            }\n            loopsRemaining -= 1;\n        }\n    }\n    if (options.fallbackRoute) {\n        return FunctionExt.call(options.fallbackRoute, this, startPoint, endPoint, options);\n    }\n    return null;\n}\nfunction snap(vertices, gridSize = 10) {\n    if (vertices.length <= 1) {\n        return vertices;\n    }\n    for (let i = 0, len = vertices.length; i < len - 1; i += 1) {\n        const first = vertices[i];\n        const second = vertices[i + 1];\n        if (first.x === second.x) {\n            const x = gridSize * Math.round(first.x / gridSize);\n            if (first.x !== x) {\n                first.x = x;\n                second.x = x;\n            }\n        }\n        else if (first.y === second.y) {\n            const y = gridSize * Math.round(first.y / gridSize);\n            if (first.y !== y) {\n                first.y = y;\n                second.y = y;\n            }\n        }\n    }\n    return vertices;\n}\nexport const router = function (vertices, optionsRaw, edgeView) {\n    const options = resolveOptions(optionsRaw);\n    const sourceBBox = util.getSourceBBox(edgeView, options);\n    const targetBBox = util.getTargetBBox(edgeView, options);\n    const sourceEndpoint = util.getSourceEndpoint(edgeView, options);\n    // pathfinding\n    const map = new ObstacleMap(options).build(edgeView.graph.model, edgeView.cell);\n    const oldVertices = vertices.map((p) => Point.create(p));\n    const newVertices = [];\n    // The origin of first route's grid, does not need snapping\n    let tailPoint = sourceEndpoint;\n    let from;\n    let to;\n    for (let i = 0, len = oldVertices.length; i <= len; i += 1) {\n        let partialRoute = null;\n        from = to || sourceBBox;\n        to = oldVertices[i];\n        // This is the last iteration\n        if (to == null) {\n            to = targetBBox;\n            // If the target is a point, we should use dragging route\n            // instead of main routing method if it has been provided.\n            const edge = edgeView.cell;\n            const isEndingAtPoint = edge.getSourceCellId() == null || edge.getTargetCellId() == null;\n            if (isEndingAtPoint && typeof options.draggingRouter === 'function') {\n                const dragFrom = from === sourceBBox ? sourceEndpoint : from;\n                const dragTo = to.getOrigin();\n                partialRoute = FunctionExt.call(options.draggingRouter, edgeView, dragFrom, dragTo, options);\n            }\n        }\n        // Find the partial route\n        if (partialRoute == null) {\n            partialRoute = findRoute(edgeView, from, to, map, options);\n        }\n        // Cannot found the partial route.\n        if (partialRoute === null) {\n            // eslint-next-line\n            console.warn(`Unable to execute manhattan algorithm, use orth instead`);\n            return FunctionExt.call(options.fallbackRouter, this, vertices, options, edgeView);\n        }\n        // Remove the first point if the previous partial route has\n        // the same point as last.\n        const leadPoint = partialRoute[0];\n        if (leadPoint && leadPoint.equals(tailPoint)) {\n            partialRoute.shift();\n        }\n        // Save tailPoint for next iteration\n        tailPoint = partialRoute[partialRoute.length - 1] || tailPoint;\n        newVertices.push(...partialRoute);\n    }\n    if (options.snapToGrid) {\n        return snap(newVertices, edgeView.graph.grid.getGridSize());\n    }\n    return newVertices;\n};\n//# sourceMappingURL=router.js.map","import { FunctionExt } from '@antv/x6-common';\nimport { router } from './router';\nimport { defaults } from './options';\nexport const manhattan = function (vertices, options, edgeView) {\n    return FunctionExt.call(router, this, vertices, Object.assign(Object.assign({}, defaults), options), edgeView);\n};\n//# sourceMappingURL=index.js.map","import { FunctionExt } from '@antv/x6-common';\nimport { Point, Line, Angle } from '@antv/x6-geometry';\nimport { resolve } from './manhattan/options';\nimport { manhattan } from './manhattan/index';\nconst defaults = {\n    maxDirectionChange: 45,\n    // an array of directions to find next points on the route\n    // different from start/end directions\n    directions() {\n        const step = resolve(this.step, this);\n        const cost = resolve(this.cost, this);\n        const diagonalCost = Math.ceil(Math.sqrt((step * step) << 1)); // eslint-disable-line no-bitwise\n        return [\n            { cost, offsetX: step, offsetY: 0 },\n            { cost: diagonalCost, offsetX: step, offsetY: step },\n            { cost, offsetX: 0, offsetY: step },\n            { cost: diagonalCost, offsetX: -step, offsetY: step },\n            { cost, offsetX: -step, offsetY: 0 },\n            { cost: diagonalCost, offsetX: -step, offsetY: -step },\n            { cost, offsetX: 0, offsetY: -step },\n            { cost: diagonalCost, offsetX: step, offsetY: -step },\n        ];\n    },\n    // a simple route used in situations when main routing method fails\n    // (exceed max number of loop iterations, inaccessible)\n    fallbackRoute(from, to, options) {\n        // Find a route which breaks by 45 degrees ignoring all obstacles.\n        const theta = from.theta(to);\n        const route = [];\n        let a = { x: to.x, y: from.y };\n        let b = { x: from.x, y: to.y };\n        if (theta % 180 > 90) {\n            const t = a;\n            a = b;\n            b = t;\n        }\n        const p1 = theta % 90 < 45 ? a : b;\n        const l1 = new Line(from, p1);\n        const alpha = 90 * Math.ceil(theta / 90);\n        const p2 = Point.fromPolar(l1.squaredLength(), Angle.toRad(alpha + 135), p1);\n        const l2 = new Line(to, p2);\n        const intersectionPoint = l1.intersectsWithLine(l2);\n        const point = intersectionPoint || to;\n        const directionFrom = intersectionPoint ? point : from;\n        const quadrant = 360 / options.directions.length;\n        const angleTheta = directionFrom.theta(to);\n        const normalizedAngle = Angle.normalize(angleTheta + quadrant / 2);\n        const directionAngle = quadrant * Math.floor(normalizedAngle / quadrant);\n        options.previousDirectionAngle = directionAngle;\n        if (point)\n            route.push(point.round());\n        route.push(to);\n        return route;\n    },\n};\nexport const metro = function (vertices, options, linkView) {\n    return FunctionExt.call(manhattan, this, vertices, Object.assign(Object.assign({}, defaults), options), linkView);\n};\n//# sourceMappingURL=metro.js.map","export const er = function (vertices, options, edgeView) {\n    const offsetRaw = options.offset || 32;\n    const min = options.min == null ? 16 : options.min;\n    let offset = 0;\n    let direction = options.direction;\n    const sourceBBox = edgeView.sourceBBox;\n    const targetBBox = edgeView.targetBBox;\n    const sourcePoint = sourceBBox.getCenter();\n    const targetPoint = targetBBox.getCenter();\n    if (typeof offsetRaw === 'number') {\n        offset = offsetRaw;\n    }\n    if (direction == null) {\n        let dx = targetBBox.left - sourceBBox.right;\n        let dy = targetBBox.top - sourceBBox.bottom;\n        if (dx >= 0 && dy >= 0) {\n            direction = dx >= dy ? 'L' : 'T';\n        }\n        else if (dx <= 0 && dy >= 0) {\n            dx = sourceBBox.left - targetBBox.right;\n            if (dx >= 0) {\n                direction = dx >= dy ? 'R' : 'T';\n            }\n            else {\n                direction = 'T';\n            }\n        }\n        else if (dx >= 0 && dy <= 0) {\n            dy = sourceBBox.top - targetBBox.bottom;\n            if (dy >= 0) {\n                direction = dx >= dy ? 'L' : 'B';\n            }\n            else {\n                direction = 'L';\n            }\n        }\n        else {\n            dx = sourceBBox.left - targetBBox.right;\n            dy = sourceBBox.top - targetBBox.bottom;\n            if (dx >= 0 && dy >= 0) {\n                direction = dx >= dy ? 'R' : 'B';\n            }\n            else if (dx <= 0 && dy >= 0) {\n                direction = 'B';\n            }\n            else if (dx >= 0 && dy <= 0) {\n                direction = 'R';\n            }\n            else {\n                direction = Math.abs(dx) > Math.abs(dy) ? 'R' : 'B';\n            }\n        }\n    }\n    if (direction === 'H') {\n        direction = targetPoint.x - sourcePoint.x >= 0 ? 'L' : 'R';\n    }\n    else if (direction === 'V') {\n        direction = targetPoint.y - sourcePoint.y >= 0 ? 'T' : 'B';\n    }\n    if (offsetRaw === 'center') {\n        if (direction === 'L') {\n            offset = (targetBBox.left - sourceBBox.right) / 2;\n        }\n        else if (direction === 'R') {\n            offset = (sourceBBox.left - targetBBox.right) / 2;\n        }\n        else if (direction === 'T') {\n            offset = (targetBBox.top - sourceBBox.bottom) / 2;\n        }\n        else if (direction === 'B') {\n            offset = (sourceBBox.top - targetBBox.bottom) / 2;\n        }\n    }\n    let coord;\n    let dim;\n    let factor;\n    const horizontal = direction === 'L' || direction === 'R';\n    if (horizontal) {\n        if (targetPoint.y === sourcePoint.y) {\n            return [...vertices];\n        }\n        factor = direction === 'L' ? 1 : -1;\n        coord = 'x';\n        dim = 'width';\n    }\n    else {\n        if (targetPoint.x === sourcePoint.x) {\n            return [...vertices];\n        }\n        factor = direction === 'T' ? 1 : -1;\n        coord = 'y';\n        dim = 'height';\n    }\n    const source = sourcePoint.clone();\n    const target = targetPoint.clone();\n    source[coord] += factor * (sourceBBox[dim] / 2 + offset);\n    target[coord] -= factor * (targetBBox[dim] / 2 + offset);\n    if (horizontal) {\n        const sourceX = source.x;\n        const targetX = target.x;\n        const sourceDelta = sourceBBox.width / 2 + min;\n        const targetDelta = targetBBox.width / 2 + min;\n        if (targetPoint.x > sourcePoint.x) {\n            if (targetX <= sourceX) {\n                source.x = Math.max(targetX, sourcePoint.x + sourceDelta);\n                target.x = Math.min(sourceX, targetPoint.x - targetDelta);\n            }\n        }\n        else if (targetX >= sourceX) {\n            source.x = Math.min(targetX, sourcePoint.x - sourceDelta);\n            target.x = Math.max(sourceX, targetPoint.x + targetDelta);\n        }\n    }\n    else {\n        const sourceY = source.y;\n        const targetY = target.y;\n        const sourceDelta = sourceBBox.height / 2 + min;\n        const targetDelta = targetBBox.height / 2 + min;\n        if (targetPoint.y > sourcePoint.y) {\n            if (targetY <= sourceY) {\n                source.y = Math.max(targetY, sourcePoint.y + sourceDelta);\n                target.y = Math.min(sourceY, targetPoint.y - targetDelta);\n            }\n        }\n        else if (targetY >= sourceY) {\n            source.y = Math.min(targetY, sourcePoint.y - sourceDelta);\n            target.y = Math.max(sourceY, targetPoint.y + targetDelta);\n        }\n    }\n    return [source.toJSON(), ...vertices, target.toJSON()];\n};\n//# sourceMappingURL=er.js.map","import { Angle, Point, Line } from '@antv/x6-geometry';\nfunction rollup(points, merge) {\n    if (merge != null && merge !== false) {\n        const amount = typeof merge === 'boolean' ? 0 : merge;\n        if (amount > 0) {\n            const center1 = Point.create(points[1]).move(points[2], amount);\n            const center2 = Point.create(points[1]).move(points[0], amount);\n            return [center1.toJSON(), ...points, center2.toJSON()];\n        }\n        {\n            const center = points[1];\n            return [Object.assign({}, center), ...points, Object.assign({}, center)];\n        }\n    }\n    return points;\n}\nexport const loop = function (vertices, options, edgeView) {\n    const width = options.width || 50;\n    const height = options.height || 80;\n    const halfHeight = height / 2;\n    const angle = options.angle || 'auto';\n    const sourceAnchor = edgeView.sourceAnchor;\n    const targetAnchor = edgeView.targetAnchor;\n    const sourceBBox = edgeView.sourceBBox;\n    const targetBBox = edgeView.targetBBox;\n    if (sourceAnchor.equals(targetAnchor)) {\n        const getVertices = (angle) => {\n            const rad = Angle.toRad(angle);\n            const sin = Math.sin(rad);\n            const cos = Math.cos(rad);\n            const center = new Point(sourceAnchor.x + cos * width, sourceAnchor.y + sin * width);\n            const ref = new Point(center.x - cos * halfHeight, center.y - sin * halfHeight);\n            const p1 = ref.clone().rotate(-90, center);\n            const p2 = ref.clone().rotate(90, center);\n            return [p1.toJSON(), center.toJSON(), p2.toJSON()];\n        };\n        const validate = (end) => {\n            const start = sourceAnchor.clone().move(end, -1);\n            const line = new Line(start, end);\n            return (!sourceBBox.containsPoint(end) && !sourceBBox.intersectsWithLine(line));\n        };\n        const angles = [0, 90, 180, 270, 45, 135, 225, 315];\n        if (typeof angle === 'number') {\n            return rollup(getVertices(angle), options.merge);\n        }\n        const center = sourceBBox.getCenter();\n        if (center.equals(sourceAnchor)) {\n            return rollup(getVertices(0), options.merge);\n        }\n        const deg = center.angleBetween(sourceAnchor, center.clone().translate(1, 0));\n        let ret = getVertices(deg);\n        if (validate(ret[1])) {\n            return rollup(ret, options.merge);\n        }\n        // return the best vertices\n        for (let i = 1, l = angles.length; i < l; i += 1) {\n            ret = getVertices(deg + angles[i]);\n            if (validate(ret[1])) {\n                return rollup(ret, options.merge);\n            }\n        }\n        return rollup(ret, options.merge);\n    }\n    {\n        const line = new Line(sourceAnchor, targetAnchor);\n        let parallel = line.parallel(-width);\n        let center = parallel.getCenter();\n        let p1 = parallel.start.clone().move(parallel.end, halfHeight);\n        let p2 = parallel.end.clone().move(parallel.start, halfHeight);\n        const ref = line.parallel(-1);\n        const line1 = new Line(ref.start, center);\n        const line2 = new Line(ref.end, center);\n        if (sourceBBox.containsPoint(center) ||\n            targetBBox.containsPoint(center) ||\n            sourceBBox.intersectsWithLine(line1) ||\n            sourceBBox.intersectsWithLine(line2) ||\n            targetBBox.intersectsWithLine(line1) ||\n            targetBBox.intersectsWithLine(line2)) {\n            parallel = line.parallel(width);\n            center = parallel.getCenter();\n            p1 = parallel.start.clone().move(parallel.end, halfHeight);\n            p2 = parallel.end.clone().move(parallel.start, halfHeight);\n        }\n        if (options.merge) {\n            const line = new Line(sourceAnchor, targetAnchor);\n            const normal = new Line(center, line.center).setLength(Number.MAX_SAFE_INTEGER);\n            const intersects1 = sourceBBox.intersectsWithLine(normal);\n            const intersects2 = targetBBox.intersectsWithLine(normal);\n            const intersects = intersects1\n                ? Array.isArray(intersects1)\n                    ? intersects1\n                    : [intersects1]\n                : [];\n            if (intersects2) {\n                if (Array.isArray(intersects2)) {\n                    intersects.push(...intersects2);\n                }\n                else {\n                    intersects.push(intersects2);\n                }\n            }\n            const anchor = line.center.closest(intersects);\n            if (anchor) {\n                edgeView.sourceAnchor = anchor.clone();\n                edgeView.targetAnchor = anchor.clone();\n            }\n            else {\n                edgeView.sourceAnchor = line.center.clone();\n                edgeView.targetAnchor = line.center.clone();\n            }\n        }\n        return rollup([p1.toJSON(), center.toJSON(), p2.toJSON()], options.merge);\n    }\n};\n//# sourceMappingURL=loop.js.map","import { Registry } from '../registry';\nimport * as routers from './main';\nexport var Router;\n(function (Router) {\n    Router.presets = routers;\n    Router.registry = Registry.create({\n        type: 'router',\n    });\n    Router.registry.register(Router.presets, true);\n})(Router || (Router = {}));\n//# sourceMappingURL=index.js.map","import { Polyline, Path } from '@antv/x6-geometry';\nexport const normal = function (sourcePoint, targetPoint, routePoints, options = {}) {\n    const points = [sourcePoint, ...routePoints, targetPoint];\n    const polyline = new Polyline(points);\n    const path = new Path(polyline);\n    return options.raw ? path : path.serialize();\n};\n//# sourceMappingURL=normal.js.map","import { Path, Point } from '@antv/x6-geometry';\nexport const loop = function (sourcePoint, targetPoint, routePoints, options = {}) {\n    const fix = routePoints.length === 3 ? 0 : 1;\n    const p1 = Point.create(routePoints[0 + fix]);\n    const p2 = Point.create(routePoints[2 + fix]);\n    const center = Point.create(routePoints[1 + fix]);\n    if (!Point.equals(sourcePoint, targetPoint)) {\n        const middle = new Point((sourcePoint.x + targetPoint.x) / 2, (sourcePoint.y + targetPoint.y) / 2);\n        const angle = middle.angleBetween(Point.create(sourcePoint).rotate(90, middle), center);\n        if (angle > 1) {\n            p1.rotate(180 - angle, middle);\n            p2.rotate(180 - angle, middle);\n            center.rotate(180 - angle, middle);\n        }\n    }\n    const pathData = `\n     M ${sourcePoint.x} ${sourcePoint.y}\n     Q ${p1.x} ${p1.y} ${center.x} ${center.y}\n     Q ${p2.x} ${p2.y} ${targetPoint.x} ${targetPoint.y}\n  `;\n    return options.raw ? Path.parse(pathData) : pathData;\n};\n//# sourceMappingURL=loop.js.map","import { Point, Path } from '@antv/x6-geometry';\nexport const rounded = function (sourcePoint, targetPoint, routePoints, options = {}) {\n    const path = new Path();\n    path.appendSegment(Path.createSegment('M', sourcePoint));\n    const f13 = 1 / 3;\n    const f23 = 2 / 3;\n    const radius = options.radius || 10;\n    let prevDistance;\n    let nextDistance;\n    for (let i = 0, ii = routePoints.length; i < ii; i += 1) {\n        const curr = Point.create(routePoints[i]);\n        const prev = routePoints[i - 1] || sourcePoint;\n        const next = routePoints[i + 1] || targetPoint;\n        prevDistance = nextDistance || curr.distance(prev) / 2;\n        nextDistance = curr.distance(next) / 2;\n        const startMove = -Math.min(radius, prevDistance);\n        const endMove = -Math.min(radius, nextDistance);\n        const roundedStart = curr.clone().move(prev, startMove).round();\n        const roundedEnd = curr.clone().move(next, endMove).round();\n        const control1 = new Point(f13 * roundedStart.x + f23 * curr.x, f23 * curr.y + f13 * roundedStart.y);\n        const control2 = new Point(f13 * roundedEnd.x + f23 * curr.x, f23 * curr.y + f13 * roundedEnd.y);\n        path.appendSegment(Path.createSegment('L', roundedStart));\n        path.appendSegment(Path.createSegment('C', control1, control2, roundedEnd));\n    }\n    path.appendSegment(Path.createSegment('L', targetPoint));\n    return options.raw ? path : path.serialize();\n};\n//# sourceMappingURL=rounded.js.map","import { Curve, Path } from '@antv/x6-geometry';\nexport const smooth = function (sourcePoint, targetPoint, routePoints, options = {}) {\n    let path;\n    let direction = options.direction;\n    if (routePoints && routePoints.length !== 0) {\n        const points = [sourcePoint, ...routePoints, targetPoint];\n        const curves = Curve.throughPoints(points);\n        path = new Path(curves);\n    }\n    else {\n        // If we have no route, use a default cubic bezier curve, cubic bezier\n        // requires two control points, the control points have `x` midway\n        // between source and target. This produces an S-like curve.\n        path = new Path();\n        path.appendSegment(Path.createSegment('M', sourcePoint));\n        if (!direction) {\n            direction =\n                Math.abs(sourcePoint.x - targetPoint.x) >=\n                    Math.abs(sourcePoint.y - targetPoint.y)\n                    ? 'H'\n                    : 'V';\n        }\n        if (direction === 'H') {\n            const controlPointX = (sourcePoint.x + targetPoint.x) / 2;\n            path.appendSegment(Path.createSegment('C', controlPointX, sourcePoint.y, controlPointX, targetPoint.y, targetPoint.x, targetPoint.y));\n        }\n        else {\n            const controlPointY = (sourcePoint.y + targetPoint.y) / 2;\n            path.appendSegment(Path.createSegment('C', sourcePoint.x, controlPointY, targetPoint.x, controlPointY, targetPoint.x, targetPoint.y));\n        }\n    }\n    return options.raw ? path : path.serialize();\n};\n//# sourceMappingURL=smooth.js.map","/* eslint-disable no-underscore-dangle */\nimport { Point, Line, Path } from '@antv/x6-geometry';\n// takes care of math. error for case when jump is too close to end of line\nconst CLOSE_PROXIMITY_PADDING = 1;\nconst F13 = 1 / 3;\nconst F23 = 2 / 3;\nfunction setupUpdating(view) {\n    let updateList = view.graph._jumpOverUpdateList;\n    // first time setup for this paper\n    if (updateList == null) {\n        updateList = view.graph._jumpOverUpdateList = [];\n        view.graph.on('cell:mouseup', () => {\n            const list = view.graph._jumpOverUpdateList;\n            // add timeout to wait for the target node to be connected\n            // fix https://github.com/antvis/X6/issues/3387\n            setTimeout(() => {\n                for (let i = 0; i < list.length; i += 1) {\n                    list[i].update();\n                }\n            });\n        });\n        view.graph.on('model:reseted', () => {\n            updateList = view.graph._jumpOverUpdateList = [];\n        });\n    }\n    // add this link to a list so it can be updated when some other link is updated\n    if (updateList.indexOf(view) < 0) {\n        updateList.push(view);\n        // watch for change of connector type or removal of link itself\n        // to remove the link from a list of jump over connectors\n        const clean = () => updateList.splice(updateList.indexOf(view), 1);\n        view.cell.once('change:connector', clean);\n        view.cell.once('removed', clean);\n    }\n}\nfunction createLines(sourcePoint, targetPoint, route = []) {\n    const points = [sourcePoint, ...route, targetPoint];\n    const lines = [];\n    points.forEach((point, idx) => {\n        const next = points[idx + 1];\n        if (next != null) {\n            lines.push(new Line(point, next));\n        }\n    });\n    return lines;\n}\nfunction findLineIntersections(line, crossCheckLines) {\n    const intersections = [];\n    crossCheckLines.forEach((crossCheckLine) => {\n        const intersection = line.intersectsWithLine(crossCheckLine);\n        if (intersection) {\n            intersections.push(intersection);\n        }\n    });\n    return intersections;\n}\nfunction getDistence(p1, p2) {\n    return new Line(p1, p2).squaredLength();\n}\n/**\n * Split input line into multiple based on intersection points.\n */\nfunction createJumps(line, intersections, jumpSize) {\n    return intersections.reduce((memo, point, idx) => {\n        // skipping points that were merged with the previous line\n        // to make bigger arc over multiple lines that are close to each other\n        if (skippedPoints.includes(point)) {\n            return memo;\n        }\n        // always grab the last line from buffer and modify it\n        const lastLine = memo.pop() || line;\n        // calculate start and end of jump by moving by a given size of jump\n        const jumpStart = Point.create(point).move(lastLine.start, -jumpSize);\n        let jumpEnd = Point.create(point).move(lastLine.start, +jumpSize);\n        // now try to look at the next intersection point\n        const nextPoint = intersections[idx + 1];\n        if (nextPoint != null) {\n            const distance = jumpEnd.distance(nextPoint);\n            if (distance <= jumpSize) {\n                // next point is close enough, move the jump end by this\n                // difference and mark the next point to be skipped\n                jumpEnd = nextPoint.move(lastLine.start, distance);\n                skippedPoints.push(nextPoint);\n            }\n        }\n        else {\n            // this block is inside of `else` as an optimization so the distance is\n            // not calculated when we know there are no other intersection points\n            const endDistance = jumpStart.distance(lastLine.end);\n            // if the end is too close to possible jump, draw remaining line instead of a jump\n            if (endDistance < jumpSize * 2 + CLOSE_PROXIMITY_PADDING) {\n                memo.push(lastLine);\n                return memo;\n            }\n        }\n        const startDistance = jumpEnd.distance(lastLine.start);\n        if (startDistance < jumpSize * 2 + CLOSE_PROXIMITY_PADDING) {\n            // if the start of line is too close to jump, draw that line instead of a jump\n            memo.push(lastLine);\n            return memo;\n        }\n        // finally create a jump line\n        const jumpLine = new Line(jumpStart, jumpEnd);\n        // it's just simple line but with a `isJump` property\n        jumppedLines.push(jumpLine);\n        memo.push(new Line(lastLine.start, jumpStart), jumpLine, new Line(jumpEnd, lastLine.end));\n        return memo;\n    }, []);\n}\nfunction buildPath(lines, jumpSize, jumpType, radius) {\n    const path = new Path();\n    let segment;\n    // first move to the start of a first line\n    segment = Path.createSegment('M', lines[0].start);\n    path.appendSegment(segment);\n    lines.forEach((line, index) => {\n        if (jumppedLines.includes(line)) {\n            let angle;\n            let diff;\n            let control1;\n            let control2;\n            if (jumpType === 'arc') {\n                // approximates semicircle with 2 curves\n                angle = -90;\n                // determine rotation of arc based on difference between points\n                diff = line.start.diff(line.end);\n                // make sure the arc always points up (or right)\n                const xAxisRotate = diff.x < 0 || (diff.x === 0 && diff.y < 0);\n                if (xAxisRotate) {\n                    angle += 180;\n                }\n                const center = line.getCenter();\n                const centerLine = new Line(center, line.end).rotate(angle, center);\n                let halfLine;\n                // first half\n                halfLine = new Line(line.start, center);\n                control1 = halfLine.pointAt(2 / 3).rotate(angle, line.start);\n                control2 = centerLine.pointAt(1 / 3).rotate(-angle, centerLine.end);\n                segment = Path.createSegment('C', control1, control2, centerLine.end);\n                path.appendSegment(segment);\n                // second half\n                halfLine = new Line(center, line.end);\n                control1 = centerLine.pointAt(1 / 3).rotate(angle, centerLine.end);\n                control2 = halfLine.pointAt(1 / 3).rotate(-angle, line.end);\n                segment = Path.createSegment('C', control1, control2, line.end);\n                path.appendSegment(segment);\n            }\n            else if (jumpType === 'gap') {\n                segment = Path.createSegment('M', line.end);\n                path.appendSegment(segment);\n            }\n            else if (jumpType === 'cubic') {\n                // approximates semicircle with 1 curve\n                angle = line.start.theta(line.end);\n                const xOffset = jumpSize * 0.6;\n                let yOffset = jumpSize * 1.35;\n                // determine rotation of arc based on difference between points\n                diff = line.start.diff(line.end);\n                // make sure the arc always points up (or right)\n                const xAxisRotate = diff.x < 0 || (diff.x === 0 && diff.y < 0);\n                if (xAxisRotate) {\n                    yOffset *= -1;\n                }\n                control1 = new Point(line.start.x + xOffset, line.start.y + yOffset).rotate(angle, line.start);\n                control2 = new Point(line.end.x - xOffset, line.end.y + yOffset).rotate(angle, line.end);\n                segment = Path.createSegment('C', control1, control2, line.end);\n                path.appendSegment(segment);\n            }\n        }\n        else {\n            const nextLine = lines[index + 1];\n            if (radius === 0 || !nextLine || jumppedLines.includes(nextLine)) {\n                segment = Path.createSegment('L', line.end);\n                path.appendSegment(segment);\n            }\n            else {\n                buildRoundedSegment(radius, path, line.end, line.start, nextLine.end);\n            }\n        }\n    });\n    return path;\n}\nfunction buildRoundedSegment(offset, path, curr, prev, next) {\n    const prevDistance = curr.distance(prev) / 2;\n    const nextDistance = curr.distance(next) / 2;\n    const startMove = -Math.min(offset, prevDistance);\n    const endMove = -Math.min(offset, nextDistance);\n    const roundedStart = curr.clone().move(prev, startMove).round();\n    const roundedEnd = curr.clone().move(next, endMove).round();\n    const control1 = new Point(F13 * roundedStart.x + F23 * curr.x, F23 * curr.y + F13 * roundedStart.y);\n    const control2 = new Point(F13 * roundedEnd.x + F23 * curr.x, F23 * curr.y + F13 * roundedEnd.y);\n    let segment;\n    segment = Path.createSegment('L', roundedStart);\n    path.appendSegment(segment);\n    segment = Path.createSegment('C', control1, control2, roundedEnd);\n    path.appendSegment(segment);\n}\nlet jumppedLines;\nlet skippedPoints;\nexport const jumpover = function (sourcePoint, targetPoint, routePoints, options = {}) {\n    jumppedLines = [];\n    skippedPoints = [];\n    setupUpdating(this);\n    const jumpSize = options.size || 5;\n    const jumpType = options.type || 'arc';\n    const radius = options.radius || 0;\n    // list of connector types not to jump over.\n    const ignoreConnectors = options.ignoreConnectors || ['smooth'];\n    const graph = this.graph;\n    const model = graph.model;\n    const allLinks = model.getEdges();\n    // there is just one link, draw it directly\n    if (allLinks.length === 1) {\n        return buildPath(createLines(sourcePoint, targetPoint, routePoints), jumpSize, jumpType, radius);\n    }\n    const edge = this.cell;\n    const thisIndex = allLinks.indexOf(edge);\n    const defaultConnector = graph.options.connecting.connector || {};\n    // not all links are meant to be jumped over.\n    const edges = allLinks.filter((link, idx) => {\n        const connector = link.getConnector() || defaultConnector;\n        // avoid jumping over links with connector type listed in `ignored connectors`.\n        if (ignoreConnectors.includes(connector.name)) {\n            return false;\n        }\n        // filter out links that are above this one and  have the same connector type\n        // otherwise there would double hoops for each intersection\n        if (idx > thisIndex) {\n            return connector.name !== 'jumpover';\n        }\n        return true;\n    });\n    // find views for all links\n    const linkViews = edges.map((edge) => {\n        return graph.findViewByCell(edge);\n    });\n    // create lines for this link\n    const thisLines = createLines(sourcePoint, targetPoint, routePoints);\n    // create lines for all other links\n    const linkLines = linkViews.map((linkView) => {\n        if (linkView == null) {\n            return [];\n        }\n        if (linkView === this) {\n            return thisLines;\n        }\n        return createLines(linkView.sourcePoint, linkView.targetPoint, linkView.routePoints);\n    });\n    // transform lines for this link by splitting with jump lines at\n    // points of intersection with other links\n    const jumpingLines = [];\n    thisLines.forEach((line) => {\n        // iterate all links and grab the intersections with this line\n        // these are then sorted by distance so the line can be split more easily\n        const intersections = edges\n            .reduce((memo, link, i) => {\n            // don't intersection with itself\n            if (link !== edge) {\n                const lineIntersections = findLineIntersections(line, linkLines[i]);\n                memo.push(...lineIntersections);\n            }\n            return memo;\n        }, [])\n            .sort((a, b) => getDistence(line.start, a) - getDistence(line.start, b));\n        if (intersections.length > 0) {\n            // split the line based on found intersection points\n            jumpingLines.push(...createJumps(line, intersections, jumpSize));\n        }\n        else {\n            // without any intersection the line goes uninterrupted\n            jumpingLines.push(line);\n        }\n    });\n    const path = buildPath(jumpingLines, jumpSize, jumpType, radius);\n    jumppedLines = [];\n    skippedPoints = [];\n    return options.raw ? path : path.serialize();\n};\n//# sourceMappingURL=jumpover.js.map","import { Registry } from '../registry';\nimport * as connectors from './main';\nexport var Connector;\n(function (Connector) {\n    Connector.presets = connectors;\n    Connector.registry = Registry.create({\n        type: 'connector',\n    });\n    Connector.registry.register(Connector.presets, true);\n})(Connector || (Connector = {}));\n//# sourceMappingURL=index.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ObjectExt, Basecoat } from '@antv/x6-common';\nexport class Store extends Basecoat {\n    constructor(data = {}) {\n        super();\n        this.pending = false;\n        this.changing = false;\n        this.data = {};\n        this.mutate(ObjectExt.cloneDeep(data));\n        this.changed = {};\n    }\n    mutate(data, options = {}) {\n        const unset = options.unset === true;\n        const silent = options.silent === true;\n        const changes = [];\n        const changing = this.changing;\n        this.changing = true;\n        if (!changing) {\n            this.previous = ObjectExt.cloneDeep(this.data);\n            this.changed = {};\n        }\n        const current = this.data;\n        const previous = this.previous;\n        const changed = this.changed;\n        Object.keys(data).forEach((k) => {\n            const key = k;\n            const newValue = data[key];\n            if (!ObjectExt.isEqual(current[key], newValue)) {\n                changes.push(key);\n            }\n            if (!ObjectExt.isEqual(previous[key], newValue)) {\n                changed[key] = newValue;\n            }\n            else {\n                delete changed[key];\n            }\n            if (unset) {\n                delete current[key];\n            }\n            else {\n                current[key] = newValue;\n            }\n        });\n        if (!silent && changes.length > 0) {\n            this.pending = true;\n            this.pendingOptions = options;\n            changes.forEach((key) => {\n                this.emit('change:*', {\n                    key,\n                    options,\n                    store: this,\n                    current: current[key],\n                    previous: previous[key],\n                });\n            });\n        }\n        if (changing) {\n            return this;\n        }\n        if (!silent) {\n            // Changes can be recursively nested within `\"change\"` events.\n            while (this.pending) {\n                this.pending = false;\n                this.emit('changed', {\n                    current,\n                    previous,\n                    store: this,\n                    options: this.pendingOptions,\n                });\n            }\n        }\n        this.pending = false;\n        this.changing = false;\n        this.pendingOptions = null;\n        return this;\n    }\n    get(key, defaultValue) {\n        if (key == null) {\n            return this.data;\n        }\n        const ret = this.data[key];\n        return ret == null ? defaultValue : ret;\n    }\n    getPrevious(key) {\n        if (this.previous) {\n            const ret = this.previous[key];\n            return ret == null ? undefined : ret;\n        }\n        return undefined;\n    }\n    set(key, value, options) {\n        if (key != null) {\n            if (typeof key === 'object') {\n                this.mutate(key, value);\n            }\n            else {\n                this.mutate({ [key]: value }, options);\n            }\n        }\n        return this;\n    }\n    remove(key, options) {\n        const empty = undefined;\n        const subset = {};\n        let opts;\n        if (typeof key === 'string') {\n            subset[key] = empty;\n            opts = options;\n        }\n        else if (Array.isArray(key)) {\n            key.forEach((k) => (subset[k] = empty));\n            opts = options;\n        }\n        else {\n            // eslint-disable-next-line\n            for (const key in this.data) {\n                subset[key] = empty;\n            }\n            opts = key;\n        }\n        this.mutate(subset, Object.assign(Object.assign({}, opts), { unset: true }));\n        return this;\n    }\n    getByPath(path) {\n        return ObjectExt.getByPath(this.data, path, '/');\n    }\n    setByPath(path, value, options = {}) {\n        const delim = '/';\n        const pathArray = Array.isArray(path) ? [...path] : path.split(delim);\n        const pathString = Array.isArray(path) ? path.join(delim) : path;\n        const property = pathArray[0];\n        const pathArrayLength = pathArray.length;\n        options.propertyPath = pathString;\n        options.propertyValue = value;\n        options.propertyPathArray = pathArray;\n        if (pathArrayLength === 1) {\n            this.set(property, value, options);\n        }\n        else {\n            const update = {};\n            let diver = update;\n            let nextKey = property;\n            // Initialize the nested object. Subobjects are either arrays or objects.\n            // An empty array is created if the sub-key is an integer. Otherwise, an\n            // empty object is created.\n            for (let i = 1; i < pathArrayLength; i += 1) {\n                const key = pathArray[i];\n                const isArrayIndex = Number.isFinite(Number(key));\n                diver = diver[nextKey] = isArrayIndex ? [] : {};\n                nextKey = key;\n            }\n            // Fills update with the `value` on `path`.\n            ObjectExt.setByPath(update, pathArray, value, delim);\n            const data = ObjectExt.cloneDeep(this.data);\n            // If rewrite mode enabled, we replace value referenced by path with the\n            // new one (we don't merge).\n            if (options.rewrite) {\n                ObjectExt.unsetByPath(data, path, delim);\n            }\n            const merged = ObjectExt.merge(data, update);\n            this.set(property, merged[property], options);\n        }\n        return this;\n    }\n    removeByPath(path, options) {\n        const keys = Array.isArray(path) ? path : path.split('/');\n        const key = keys[0];\n        if (keys.length === 1) {\n            this.remove(key, options);\n        }\n        else {\n            const paths = keys.slice(1);\n            const prop = ObjectExt.cloneDeep(this.get(key));\n            if (prop) {\n                ObjectExt.unsetByPath(prop, paths);\n            }\n            this.set(key, prop, options);\n        }\n        return this;\n    }\n    hasChanged(key) {\n        if (key == null) {\n            return Object.keys(this.changed).length > 0;\n        }\n        return key in this.changed;\n    }\n    /**\n     * Returns an object containing all the data that have changed,\n     * or `null` if there are no changes. Useful for determining what\n     * parts of a view need to be updated.\n     */\n    getChanges(diff) {\n        if (diff == null) {\n            return this.hasChanged() ? ObjectExt.cloneDeep(this.changed) : null;\n        }\n        const old = this.changing ? this.previous : this.data;\n        const changed = {};\n        let hasChanged;\n        // eslint-disable-next-line\n        for (const key in diff) {\n            const val = diff[key];\n            if (!ObjectExt.isEqual(old[key], val)) {\n                changed[key] = val;\n                hasChanged = true;\n            }\n        }\n        return hasChanged ? ObjectExt.cloneDeep(changed) : null;\n    }\n    /**\n     * Returns a copy of the store's `data` object.\n     */\n    toJSON() {\n        return ObjectExt.cloneDeep(this.data);\n    }\n    clone() {\n        const constructor = this.constructor;\n        return new constructor(this.data);\n    }\n    dispose() {\n        this.off();\n        this.data = {};\n        this.previous = {};\n        this.changed = {};\n        this.pending = false;\n        this.changing = false;\n        this.pendingOptions = null;\n        this.trigger('disposed', { store: this });\n    }\n}\n__decorate([\n    Basecoat.dispose()\n], Store.prototype, \"dispose\", null);\n//# sourceMappingURL=store.js.map","import { ObjectExt, Timing, Interp } from '@antv/x6-common';\nexport class Animation {\n    constructor(cell) {\n        this.cell = cell;\n        this.ids = {};\n        this.cache = {};\n    }\n    get() {\n        return Object.keys(this.ids);\n    }\n    start(path, targetValue, options = {}, delim = '/') {\n        const startValue = this.cell.getPropByPath(path);\n        const localOptions = ObjectExt.defaults(options, Animation.defaultOptions);\n        const timing = this.getTiming(localOptions.timing);\n        const interpolate = this.getInterp(localOptions.interp, startValue, targetValue);\n        let startTime = 0;\n        const key = Array.isArray(path) ? path.join(delim) : path;\n        const paths = Array.isArray(path) ? path : path.split(delim);\n        const iterate = () => {\n            const now = new Date().getTime();\n            if (startTime === 0) {\n                startTime = now;\n            }\n            const elaspe = now - startTime;\n            let progress = elaspe / localOptions.duration;\n            if (progress < 1) {\n                this.ids[key] = requestAnimationFrame(iterate);\n            }\n            else {\n                progress = 1;\n            }\n            const currentValue = interpolate(timing(progress));\n            this.cell.setPropByPath(paths, currentValue);\n            if (options.progress) {\n                options.progress(Object.assign({ progress, currentValue }, this.getArgs(key)));\n            }\n            if (progress === 1) {\n                this.cell.notify('transition:complete', this.getArgs(key));\n                options.complete && options.complete(this.getArgs(key));\n                this.cell.notify('transition:finish', this.getArgs(key));\n                options.finish && options.finish(this.getArgs(key));\n                this.clean(key);\n            }\n        };\n        setTimeout(() => {\n            this.stop(path, undefined, delim);\n            this.cache[key] = { startValue, targetValue, options: localOptions };\n            this.ids[key] = requestAnimationFrame(iterate);\n            this.cell.notify('transition:start', this.getArgs(key));\n            options.start && options.start(this.getArgs(key));\n        }, options.delay);\n        return this.stop.bind(this, path, delim, options);\n    }\n    stop(path, options = {}, delim = '/') {\n        const paths = Array.isArray(path) ? path : path.split(delim);\n        Object.keys(this.ids)\n            .filter((key) => ObjectExt.isEqual(paths, key.split(delim).slice(0, paths.length)))\n            .forEach((key) => {\n            cancelAnimationFrame(this.ids[key]);\n            const data = this.cache[key];\n            const commonArgs = this.getArgs(key);\n            const localOptions = Object.assign(Object.assign({}, data.options), options);\n            const jumpedToEnd = localOptions.jumpedToEnd;\n            if (jumpedToEnd && data.targetValue != null) {\n                this.cell.setPropByPath(key, data.targetValue);\n                this.cell.notify('transition:end', Object.assign({}, commonArgs));\n                this.cell.notify('transition:complete', Object.assign({}, commonArgs));\n                localOptions.complete && localOptions.complete(Object.assign({}, commonArgs));\n            }\n            const stopArgs = Object.assign({ jumpedToEnd }, commonArgs);\n            this.cell.notify('transition:stop', Object.assign({}, stopArgs));\n            localOptions.stop && localOptions.stop(Object.assign({}, stopArgs));\n            this.cell.notify('transition:finish', Object.assign({}, commonArgs));\n            localOptions.finish && localOptions.finish(Object.assign({}, commonArgs));\n            this.clean(key);\n        });\n        return this;\n    }\n    clean(key) {\n        delete this.ids[key];\n        delete this.cache[key];\n    }\n    getTiming(timing) {\n        return typeof timing === 'string' ? Timing[timing] : timing;\n    }\n    getInterp(interp, startValue, targetValue) {\n        if (interp) {\n            return interp(startValue, targetValue);\n        }\n        if (typeof targetValue === 'number') {\n            return Interp.number(startValue, targetValue);\n        }\n        if (typeof targetValue === 'string') {\n            if (targetValue[0] === '#') {\n                return Interp.color(startValue, targetValue);\n            }\n            return Interp.unit(startValue, targetValue);\n        }\n        return Interp.object(startValue, targetValue);\n    }\n    getArgs(key) {\n        const data = this.cache[key];\n        return {\n            path: key,\n            startValue: data.startValue,\n            targetValue: data.targetValue,\n            cell: this.cell,\n        };\n    }\n}\n(function (Animation) {\n    Animation.defaultOptions = {\n        delay: 10,\n        duration: 100,\n        timing: 'linear',\n    };\n})(Animation || (Animation = {}));\n//# sourceMappingURL=animation.js.map","/* eslint-disable no-underscore-dangle */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { ArrayExt, StringExt, ObjectExt, FunctionExt, Basecoat, } from '@antv/x6-common';\nimport { Rectangle, Point } from '@antv/x6-geometry';\nimport { Attr } from '../registry';\nimport { Store } from './store';\nimport { Animation } from './animation';\nexport class Cell extends Basecoat {\n    static config(presets) {\n        const { markup, propHooks, attrHooks } = presets, others = __rest(presets, [\"markup\", \"propHooks\", \"attrHooks\"]);\n        if (markup != null) {\n            this.markup = markup;\n        }\n        if (propHooks) {\n            this.propHooks = this.propHooks.slice();\n            if (Array.isArray(propHooks)) {\n                this.propHooks.push(...propHooks);\n            }\n            else if (typeof propHooks === 'function') {\n                this.propHooks.push(propHooks);\n            }\n            else {\n                Object.values(propHooks).forEach((hook) => {\n                    if (typeof hook === 'function') {\n                        this.propHooks.push(hook);\n                    }\n                });\n            }\n        }\n        if (attrHooks) {\n            this.attrHooks = Object.assign(Object.assign({}, this.attrHooks), attrHooks);\n        }\n        this.defaults = ObjectExt.merge({}, this.defaults, others);\n    }\n    static getMarkup() {\n        return this.markup;\n    }\n    static getDefaults(raw) {\n        return (raw ? this.defaults : ObjectExt.cloneDeep(this.defaults));\n    }\n    static getAttrHooks() {\n        return this.attrHooks;\n    }\n    static applyPropHooks(cell, metadata) {\n        return this.propHooks.reduce((memo, hook) => {\n            return hook ? FunctionExt.call(hook, cell, memo) : memo;\n        }, metadata);\n    }\n    // #endregion\n    get [Symbol.toStringTag]() {\n        return Cell.toStringTag;\n    }\n    constructor(metadata = {}) {\n        super();\n        const ctor = this.constructor;\n        const defaults = ctor.getDefaults(true);\n        const props = ObjectExt.merge({}, this.preprocess(defaults), this.preprocess(metadata));\n        this.id = props.id || StringExt.uuid();\n        this.store = new Store(props);\n        this.animation = new Animation(this);\n        this.setup();\n        this.init();\n        this.postprocess(metadata);\n    }\n    init() { }\n    // #region model\n    get model() {\n        return this._model;\n    }\n    set model(model) {\n        if (this._model !== model) {\n            this._model = model;\n        }\n    }\n    // #endregion\n    preprocess(metadata, ignoreIdCheck) {\n        const id = metadata.id;\n        const ctor = this.constructor;\n        const props = ctor.applyPropHooks(this, metadata);\n        if (id == null && ignoreIdCheck !== true) {\n            props.id = StringExt.uuid();\n        }\n        return props;\n    }\n    postprocess(metadata) { } // eslint-disable-line\n    setup() {\n        this.store.on('change:*', (metadata) => {\n            const { key, current, previous, options } = metadata;\n            this.notify('change:*', {\n                key,\n                options,\n                current,\n                previous,\n                cell: this,\n            });\n            this.notify(`change:${key}`, {\n                options,\n                current,\n                previous,\n                cell: this,\n            });\n            const type = key;\n            if (type === 'source' || type === 'target') {\n                this.notify(`change:terminal`, {\n                    type,\n                    current,\n                    previous,\n                    options,\n                    cell: this,\n                });\n            }\n        });\n        this.store.on('changed', ({ options }) => this.notify('changed', { options, cell: this }));\n    }\n    notify(name, args) {\n        this.trigger(name, args);\n        const model = this.model;\n        if (model) {\n            model.notify(`cell:${name}`, args);\n            if (this.isNode()) {\n                model.notify(`node:${name}`, Object.assign(Object.assign({}, args), { node: this }));\n            }\n            else if (this.isEdge()) {\n                model.notify(`edge:${name}`, Object.assign(Object.assign({}, args), { edge: this }));\n            }\n        }\n        return this;\n    }\n    isNode() {\n        return false;\n    }\n    isEdge() {\n        return false;\n    }\n    isSameStore(cell) {\n        return this.store === cell.store;\n    }\n    get view() {\n        return this.store.get('view');\n    }\n    get shape() {\n        return this.store.get('shape', '');\n    }\n    getProp(key, defaultValue) {\n        if (key == null) {\n            return this.store.get();\n        }\n        return this.store.get(key, defaultValue);\n    }\n    setProp(key, value, options) {\n        if (typeof key === 'string') {\n            this.store.set(key, value, options);\n        }\n        else {\n            const props = this.preprocess(key, true);\n            this.store.set(ObjectExt.merge({}, this.getProp(), props), value);\n            this.postprocess(key);\n        }\n        return this;\n    }\n    removeProp(key, options) {\n        if (typeof key === 'string' || Array.isArray(key)) {\n            this.store.removeByPath(key, options);\n        }\n        else {\n            this.store.remove(options);\n        }\n        return this;\n    }\n    hasChanged(key) {\n        return key == null ? this.store.hasChanged() : this.store.hasChanged(key);\n    }\n    getPropByPath(path) {\n        return this.store.getByPath(path);\n    }\n    setPropByPath(path, value, options = {}) {\n        if (this.model) {\n            // update inner reference\n            if (path === 'children') {\n                this._children = value\n                    ? value\n                        .map((id) => this.model.getCell(id))\n                        .filter((child) => child != null)\n                    : null;\n            }\n            else if (path === 'parent') {\n                this._parent = value ? this.model.getCell(value) : null;\n            }\n        }\n        this.store.setByPath(path, value, options);\n        return this;\n    }\n    removePropByPath(path, options = {}) {\n        const paths = Array.isArray(path) ? path : path.split('/');\n        // Once a property is removed from the `attrs` the CellView will\n        // recognize a `dirty` flag and re-render itself in order to remove\n        // the attribute from SVGElement.\n        if (paths[0] === 'attrs') {\n            options.dirty = true;\n        }\n        this.store.removeByPath(paths, options);\n        return this;\n    }\n    prop(key, value, options) {\n        if (key == null) {\n            return this.getProp();\n        }\n        if (typeof key === 'string' || Array.isArray(key)) {\n            if (arguments.length === 1) {\n                return this.getPropByPath(key);\n            }\n            if (value == null) {\n                return this.removePropByPath(key, options || {});\n            }\n            return this.setPropByPath(key, value, options || {});\n        }\n        return this.setProp(key, value || {});\n    }\n    previous(name) {\n        return this.store.getPrevious(name);\n    }\n    // #endregion\n    // #region zIndex\n    get zIndex() {\n        return this.getZIndex();\n    }\n    set zIndex(z) {\n        if (z == null) {\n            this.removeZIndex();\n        }\n        else {\n            this.setZIndex(z);\n        }\n    }\n    getZIndex() {\n        return this.store.get('zIndex');\n    }\n    setZIndex(z, options = {}) {\n        this.store.set('zIndex', z, options);\n        return this;\n    }\n    removeZIndex(options = {}) {\n        this.store.remove('zIndex', options);\n        return this;\n    }\n    toFront(options = {}) {\n        const model = this.model;\n        if (model) {\n            let z = model.getMaxZIndex();\n            let cells;\n            if (options.deep) {\n                cells = this.getDescendants({ deep: true, breadthFirst: true });\n                cells.unshift(this);\n            }\n            else {\n                cells = [this];\n            }\n            z = z - cells.length + 1;\n            const count = model.total();\n            let changed = model.indexOf(this) !== count - cells.length;\n            if (!changed) {\n                changed = cells.some((cell, index) => cell.getZIndex() !== z + index);\n            }\n            if (changed) {\n                this.batchUpdate('to-front', () => {\n                    z += cells.length;\n                    cells.forEach((cell, index) => {\n                        cell.setZIndex(z + index, options);\n                    });\n                });\n            }\n        }\n        return this;\n    }\n    toBack(options = {}) {\n        const model = this.model;\n        if (model) {\n            let z = model.getMinZIndex();\n            let cells;\n            if (options.deep) {\n                cells = this.getDescendants({ deep: true, breadthFirst: true });\n                cells.unshift(this);\n            }\n            else {\n                cells = [this];\n            }\n            let changed = model.indexOf(this) !== 0;\n            if (!changed) {\n                changed = cells.some((cell, index) => cell.getZIndex() !== z + index);\n            }\n            if (changed) {\n                this.batchUpdate('to-back', () => {\n                    z -= cells.length;\n                    cells.forEach((cell, index) => {\n                        cell.setZIndex(z + index, options);\n                    });\n                });\n            }\n        }\n        return this;\n    }\n    // #endregion\n    // #region markup\n    get markup() {\n        return this.getMarkup();\n    }\n    set markup(value) {\n        if (value == null) {\n            this.removeMarkup();\n        }\n        else {\n            this.setMarkup(value);\n        }\n    }\n    getMarkup() {\n        let markup = this.store.get('markup');\n        if (markup == null) {\n            const ctor = this.constructor;\n            markup = ctor.getMarkup();\n        }\n        return markup;\n    }\n    setMarkup(markup, options = {}) {\n        this.store.set('markup', markup, options);\n        return this;\n    }\n    removeMarkup(options = {}) {\n        this.store.remove('markup', options);\n        return this;\n    }\n    // #endregion\n    // #region attrs\n    get attrs() {\n        return this.getAttrs();\n    }\n    set attrs(value) {\n        if (value == null) {\n            this.removeAttrs();\n        }\n        else {\n            this.setAttrs(value);\n        }\n    }\n    getAttrs() {\n        const result = this.store.get('attrs');\n        return result ? Object.assign({}, result) : {};\n    }\n    setAttrs(attrs, options = {}) {\n        if (attrs == null) {\n            this.removeAttrs(options);\n        }\n        else {\n            const set = (attrs) => this.store.set('attrs', attrs, options);\n            if (options.overwrite === true) {\n                set(attrs);\n            }\n            else {\n                const prev = this.getAttrs();\n                if (options.deep === false) {\n                    set(Object.assign(Object.assign({}, prev), attrs));\n                }\n                else {\n                    set(ObjectExt.merge({}, prev, attrs));\n                }\n            }\n        }\n        return this;\n    }\n    replaceAttrs(attrs, options = {}) {\n        return this.setAttrs(attrs, Object.assign(Object.assign({}, options), { overwrite: true }));\n    }\n    updateAttrs(attrs, options = {}) {\n        return this.setAttrs(attrs, Object.assign(Object.assign({}, options), { deep: false }));\n    }\n    removeAttrs(options = {}) {\n        this.store.remove('attrs', options);\n        return this;\n    }\n    getAttrDefinition(attrName) {\n        if (!attrName) {\n            return null;\n        }\n        const ctor = this.constructor;\n        const hooks = ctor.getAttrHooks() || {};\n        let definition = hooks[attrName] || Attr.registry.get(attrName);\n        if (!definition) {\n            const name = StringExt.camelCase(attrName);\n            definition = hooks[name] || Attr.registry.get(name);\n        }\n        return definition || null;\n    }\n    getAttrByPath(path) {\n        if (path == null || path === '') {\n            return this.getAttrs();\n        }\n        return this.getPropByPath(this.prefixAttrPath(path));\n    }\n    setAttrByPath(path, value, options = {}) {\n        this.setPropByPath(this.prefixAttrPath(path), value, options);\n        return this;\n    }\n    removeAttrByPath(path, options = {}) {\n        this.removePropByPath(this.prefixAttrPath(path), options);\n        return this;\n    }\n    prefixAttrPath(path) {\n        return Array.isArray(path) ? ['attrs'].concat(path) : `attrs/${path}`;\n    }\n    attr(path, value, options) {\n        if (path == null) {\n            return this.getAttrByPath();\n        }\n        if (typeof path === 'string' || Array.isArray(path)) {\n            if (arguments.length === 1) {\n                return this.getAttrByPath(path);\n            }\n            if (value == null) {\n                return this.removeAttrByPath(path, options || {});\n            }\n            return this.setAttrByPath(path, value, options || {});\n        }\n        return this.setAttrs(path, (value || {}));\n    }\n    // #endregion\n    // #region visible\n    get visible() {\n        return this.isVisible();\n    }\n    set visible(value) {\n        this.setVisible(value);\n    }\n    setVisible(visible, options = {}) {\n        this.store.set('visible', visible, options);\n        return this;\n    }\n    isVisible() {\n        return this.store.get('visible') !== false;\n    }\n    show(options = {}) {\n        if (!this.isVisible()) {\n            this.setVisible(true, options);\n        }\n        return this;\n    }\n    hide(options = {}) {\n        if (this.isVisible()) {\n            this.setVisible(false, options);\n        }\n        return this;\n    }\n    toggleVisible(isVisible, options = {}) {\n        const visible = typeof isVisible === 'boolean' ? isVisible : !this.isVisible();\n        const localOptions = typeof isVisible === 'boolean' ? options : isVisible;\n        if (visible) {\n            this.show(localOptions);\n        }\n        else {\n            this.hide(localOptions);\n        }\n        return this;\n    }\n    // #endregion\n    // #region data\n    get data() {\n        return this.getData();\n    }\n    set data(val) {\n        this.setData(val);\n    }\n    getData() {\n        return this.store.get('data');\n    }\n    setData(data, options = {}) {\n        if (data == null) {\n            this.removeData(options);\n        }\n        else {\n            const set = (data) => this.store.set('data', data, options);\n            if (options.overwrite === true) {\n                set(data);\n            }\n            else {\n                const prev = this.getData();\n                if (options.deep === false) {\n                    set(typeof data === 'object' ? Object.assign(Object.assign({}, prev), data) : data);\n                }\n                else {\n                    set(ObjectExt.merge({}, prev, data));\n                }\n            }\n        }\n        return this;\n    }\n    replaceData(data, options = {}) {\n        return this.setData(data, Object.assign(Object.assign({}, options), { overwrite: true }));\n    }\n    updateData(data, options = {}) {\n        return this.setData(data, Object.assign(Object.assign({}, options), { deep: false }));\n    }\n    removeData(options = {}) {\n        this.store.remove('data', options);\n        return this;\n    }\n    // #endregion\n    // #region parent children\n    get parent() {\n        return this.getParent();\n    }\n    get children() {\n        return this.getChildren();\n    }\n    getParentId() {\n        return this.store.get('parent');\n    }\n    getParent() {\n        const parentId = this.getParentId();\n        if (parentId && this.model) {\n            const parent = this.model.getCell(parentId);\n            this._parent = parent;\n            return parent;\n        }\n        return null;\n    }\n    getChildren() {\n        const childrenIds = this.store.get('children');\n        if (childrenIds && childrenIds.length && this.model) {\n            const children = childrenIds\n                .map((id) => { var _a; return (_a = this.model) === null || _a === void 0 ? void 0 : _a.getCell(id); })\n                .filter((cell) => cell != null);\n            this._children = children;\n            return [...children];\n        }\n        return null;\n    }\n    hasParent() {\n        return this.parent != null;\n    }\n    isParentOf(child) {\n        return child != null && child.getParent() === this;\n    }\n    isChildOf(parent) {\n        return parent != null && this.getParent() === parent;\n    }\n    eachChild(iterator, context) {\n        if (this.children) {\n            this.children.forEach(iterator, context);\n        }\n        return this;\n    }\n    filterChild(filter, context) {\n        return this.children ? this.children.filter(filter, context) : [];\n    }\n    getChildCount() {\n        return this.children == null ? 0 : this.children.length;\n    }\n    getChildIndex(child) {\n        return this.children == null ? -1 : this.children.indexOf(child);\n    }\n    getChildAt(index) {\n        return this.children != null && index >= 0 ? this.children[index] : null;\n    }\n    getAncestors(options = {}) {\n        const ancestors = [];\n        let parent = this.getParent();\n        while (parent) {\n            ancestors.push(parent);\n            parent = options.deep !== false ? parent.getParent() : null;\n        }\n        return ancestors;\n    }\n    getDescendants(options = {}) {\n        if (options.deep !== false) {\n            // breadth first\n            if (options.breadthFirst) {\n                const cells = [];\n                const queue = this.getChildren() || [];\n                while (queue.length > 0) {\n                    const parent = queue.shift();\n                    const children = parent.getChildren();\n                    cells.push(parent);\n                    if (children) {\n                        queue.push(...children);\n                    }\n                }\n                return cells;\n            }\n            // depth first\n            {\n                const cells = this.getChildren() || [];\n                cells.forEach((cell) => {\n                    cells.push(...cell.getDescendants(options));\n                });\n                return cells;\n            }\n        }\n        return this.getChildren() || [];\n    }\n    isDescendantOf(ancestor, options = {}) {\n        if (ancestor == null) {\n            return false;\n        }\n        if (options.deep !== false) {\n            let current = this.getParent();\n            while (current) {\n                if (current === ancestor) {\n                    return true;\n                }\n                current = current.getParent();\n            }\n            return false;\n        }\n        return this.isChildOf(ancestor);\n    }\n    isAncestorOf(descendant, options = {}) {\n        if (descendant == null) {\n            return false;\n        }\n        return descendant.isDescendantOf(this, options);\n    }\n    contains(cell) {\n        return this.isAncestorOf(cell);\n    }\n    getCommonAncestor(...cells) {\n        return Cell.getCommonAncestor(this, ...cells);\n    }\n    setParent(parent, options = {}) {\n        this._parent = parent;\n        if (parent) {\n            this.store.set('parent', parent.id, options);\n        }\n        else {\n            this.store.remove('parent', options);\n        }\n        return this;\n    }\n    setChildren(children, options = {}) {\n        this._children = children;\n        if (children != null) {\n            this.store.set('children', children.map((child) => child.id), options);\n        }\n        else {\n            this.store.remove('children', options);\n        }\n        return this;\n    }\n    unembed(child, options = {}) {\n        const children = this.children;\n        if (children != null && child != null) {\n            const index = this.getChildIndex(child);\n            if (index !== -1) {\n                children.splice(index, 1);\n                child.setParent(null, options);\n                this.setChildren(children, options);\n            }\n        }\n        return this;\n    }\n    embed(child, options = {}) {\n        child.addTo(this, options);\n        return this;\n    }\n    addTo(target, options = {}) {\n        if (Cell.isCell(target)) {\n            target.addChild(this, options);\n        }\n        else {\n            target.addCell(this, options);\n        }\n        return this;\n    }\n    insertTo(parent, index, options = {}) {\n        parent.insertChild(this, index, options);\n        return this;\n    }\n    addChild(child, options = {}) {\n        return this.insertChild(child, undefined, options);\n    }\n    insertChild(child, index, options = {}) {\n        if (child != null && child !== this) {\n            const oldParent = child.getParent();\n            const changed = this !== oldParent;\n            let pos = index;\n            if (pos == null) {\n                pos = this.getChildCount();\n                if (!changed) {\n                    pos -= 1;\n                }\n            }\n            // remove from old parent\n            if (oldParent) {\n                const children = oldParent.getChildren();\n                if (children) {\n                    const index = children.indexOf(child);\n                    if (index >= 0) {\n                        child.setParent(null, options);\n                        children.splice(index, 1);\n                        oldParent.setChildren(children, options);\n                    }\n                }\n            }\n            let children = this.children;\n            if (children == null) {\n                children = [];\n                children.push(child);\n            }\n            else {\n                children.splice(pos, 0, child);\n            }\n            child.setParent(this, options);\n            this.setChildren(children, options);\n            if (changed && this.model) {\n                const incomings = this.model.getIncomingEdges(this);\n                const outgoings = this.model.getOutgoingEdges(this);\n                if (incomings) {\n                    incomings.forEach((edge) => edge.updateParent(options));\n                }\n                if (outgoings) {\n                    outgoings.forEach((edge) => edge.updateParent(options));\n                }\n            }\n            if (this.model) {\n                this.model.addCell(child, options);\n            }\n        }\n        return this;\n    }\n    removeFromParent(options = {}) {\n        const parent = this.getParent();\n        if (parent != null) {\n            const index = parent.getChildIndex(this);\n            parent.removeChildAt(index, options);\n        }\n        return this;\n    }\n    removeChild(child, options = {}) {\n        const index = this.getChildIndex(child);\n        return this.removeChildAt(index, options);\n    }\n    removeChildAt(index, options = {}) {\n        const child = this.getChildAt(index);\n        const children = this.children;\n        if (children != null && child != null) {\n            this.unembed(child, options);\n            child.remove(options);\n        }\n        return child;\n    }\n    remove(options = {}) {\n        this.batchUpdate('remove', () => {\n            const parent = this.getParent();\n            if (parent) {\n                parent.removeChild(this, options);\n            }\n            if (options.deep !== false) {\n                this.eachChild((child) => child.remove(options));\n            }\n            if (this.model) {\n                this.model.removeCell(this, options);\n            }\n        });\n        return this;\n    }\n    transition(path, target, options = {}, delim = '/') {\n        return this.animation.start(path, target, options, delim);\n    }\n    stopTransition(path, options, delim = '/') {\n        this.animation.stop(path, options, delim);\n        return this;\n    }\n    getTransitions() {\n        return this.animation.get();\n    }\n    // #endregion\n    // #region transform\n    // eslint-disable-next-line\n    translate(tx, ty, options) {\n        return this;\n    }\n    scale(sx, // eslint-disable-line\n    sy, // eslint-disable-line\n    origin, // eslint-disable-line\n    options) {\n        return this;\n    }\n    addTools(items, obj, options) {\n        const toolItems = Array.isArray(items) ? items : [items];\n        const name = typeof obj === 'string' ? obj : null;\n        const config = typeof obj === 'object' ? obj : typeof options === 'object' ? options : {};\n        if (config.reset) {\n            return this.setTools({ name, items: toolItems, local: config.local }, config);\n        }\n        let tools = ObjectExt.cloneDeep(this.getTools());\n        if (tools == null || name == null || tools.name === name) {\n            if (tools == null) {\n                tools = {};\n            }\n            if (!tools.items) {\n                tools.items = [];\n            }\n            tools.name = name;\n            tools.items = [...tools.items, ...toolItems];\n            return this.setTools(Object.assign({}, tools), config);\n        }\n    }\n    setTools(tools, options = {}) {\n        if (tools == null) {\n            this.removeTools();\n        }\n        else {\n            this.store.set('tools', Cell.normalizeTools(tools), options);\n        }\n        return this;\n    }\n    getTools() {\n        return this.store.get('tools');\n    }\n    removeTools(options = {}) {\n        this.store.remove('tools', options);\n        return this;\n    }\n    hasTools(name) {\n        const tools = this.getTools();\n        if (tools == null) {\n            return false;\n        }\n        if (name == null) {\n            return true;\n        }\n        return tools.name === name;\n    }\n    hasTool(name) {\n        const tools = this.getTools();\n        if (tools == null) {\n            return false;\n        }\n        return tools.items.some((item) => typeof item === 'string' ? item === name : item.name === name);\n    }\n    removeTool(nameOrIndex, options = {}) {\n        const tools = ObjectExt.cloneDeep(this.getTools());\n        if (tools) {\n            let updated = false;\n            const items = tools.items.slice();\n            const remove = (index) => {\n                items.splice(index, 1);\n                updated = true;\n            };\n            if (typeof nameOrIndex === 'number') {\n                remove(nameOrIndex);\n            }\n            else {\n                for (let i = items.length - 1; i >= 0; i -= 1) {\n                    const item = items[i];\n                    const exist = typeof item === 'string'\n                        ? item === nameOrIndex\n                        : item.name === nameOrIndex;\n                    if (exist) {\n                        remove(i);\n                    }\n                }\n            }\n            if (updated) {\n                tools.items = items;\n                this.setTools(tools, options);\n            }\n        }\n        return this;\n    }\n    // #endregion\n    // #region common\n    // eslint-disable-next-line\n    getBBox(options) {\n        return new Rectangle();\n    }\n    // eslint-disable-next-line\n    getConnectionPoint(edge, type) {\n        return new Point();\n    }\n    toJSON(options = {}) {\n        const props = Object.assign({}, this.store.get());\n        const toString = Object.prototype.toString;\n        const cellType = this.isNode() ? 'node' : this.isEdge() ? 'edge' : 'cell';\n        if (!props.shape) {\n            const ctor = this.constructor;\n            throw new Error(`Unable to serialize ${cellType} missing \"shape\" prop, check the ${cellType} \"${ctor.name || toString.call(ctor)}\"`);\n        }\n        const ctor = this.constructor;\n        const diff = options.diff === true;\n        const attrs = props.attrs || {};\n        const presets = ctor.getDefaults(true);\n        // When `options.diff` is `true`, we should process the custom options,\n        // such as `width`, `height` etc. to ensure the comparing work correctly.\n        const defaults = diff ? this.preprocess(presets, true) : presets;\n        const defaultAttrs = defaults.attrs || {};\n        const finalAttrs = {};\n        Object.entries(props).forEach(([key, val]) => {\n            if (val != null &&\n                !Array.isArray(val) &&\n                typeof val === 'object' &&\n                !ObjectExt.isPlainObject(val)) {\n                throw new Error(`Can only serialize ${cellType} with plain-object props, but got a \"${toString.call(val)}\" type of key \"${key}\" on ${cellType} \"${this.id}\"`);\n            }\n            if (key !== 'attrs' && key !== 'shape' && diff) {\n                const preset = defaults[key];\n                if (ObjectExt.isEqual(val, preset)) {\n                    delete props[key];\n                }\n            }\n        });\n        Object.keys(attrs).forEach((key) => {\n            const attr = attrs[key];\n            const defaultAttr = defaultAttrs[key];\n            Object.keys(attr).forEach((name) => {\n                const value = attr[name];\n                const defaultValue = defaultAttr ? defaultAttr[name] : null;\n                if (value != null &&\n                    typeof value === 'object' &&\n                    !Array.isArray(value)) {\n                    Object.keys(value).forEach((subName) => {\n                        const subValue = value[subName];\n                        if (defaultAttr == null ||\n                            defaultValue == null ||\n                            !ObjectExt.isObject(defaultValue) ||\n                            !ObjectExt.isEqual(defaultValue[subName], subValue)) {\n                            if (finalAttrs[key] == null) {\n                                finalAttrs[key] = {};\n                            }\n                            if (finalAttrs[key][name] == null) {\n                                finalAttrs[key][name] = {};\n                            }\n                            const tmp = finalAttrs[key][name];\n                            tmp[subName] = subValue;\n                        }\n                    });\n                }\n                else if (defaultAttr == null ||\n                    !ObjectExt.isEqual(defaultValue, value)) {\n                    // `value` is not an object, default attribute with `key` does not\n                    // exist or it is different than the attribute value set on the cell.\n                    if (finalAttrs[key] == null) {\n                        finalAttrs[key] = {};\n                    }\n                    finalAttrs[key][name] = value;\n                }\n            });\n        });\n        const finalProps = Object.assign(Object.assign({}, props), { attrs: ObjectExt.isEmpty(finalAttrs) ? undefined : finalAttrs });\n        if (finalProps.attrs == null) {\n            delete finalProps.attrs;\n        }\n        const ret = finalProps;\n        if (ret.angle === 0) {\n            delete ret.angle;\n        }\n        return ObjectExt.cloneDeep(ret);\n    }\n    clone(options = {}) {\n        if (!options.deep) {\n            const data = Object.assign({}, this.store.get());\n            if (!options.keepId) {\n                delete data.id;\n            }\n            delete data.parent;\n            delete data.children;\n            const ctor = this.constructor;\n            return new ctor(data); // eslint-disable-line new-cap\n        }\n        // Deep cloning. Clone the cell itself and all its children.\n        const map = Cell.deepClone(this);\n        return map[this.id];\n    }\n    findView(graph) {\n        return graph.findViewByCell(this);\n    }\n    // #endregion\n    // #region batch\n    startBatch(name, data = {}, model = this.model) {\n        this.notify('batch:start', { name, data, cell: this });\n        if (model) {\n            model.startBatch(name, Object.assign(Object.assign({}, data), { cell: this }));\n        }\n        return this;\n    }\n    stopBatch(name, data = {}, model = this.model) {\n        if (model) {\n            model.stopBatch(name, Object.assign(Object.assign({}, data), { cell: this }));\n        }\n        this.notify('batch:stop', { name, data, cell: this });\n        return this;\n    }\n    batchUpdate(name, execute, data) {\n        // The model is null after cell was removed(remove batch).\n        // So we should temp save model to trigger pairing batch event.\n        const model = this.model;\n        this.startBatch(name, data, model);\n        const result = execute();\n        this.stopBatch(name, data, model);\n        return result;\n    }\n    // #endregion\n    // #region IDisposable\n    dispose() {\n        this.removeFromParent();\n        this.store.dispose();\n    }\n}\nCell.defaults = {};\nCell.attrHooks = {};\nCell.propHooks = [];\n__decorate([\n    Basecoat.dispose()\n], Cell.prototype, \"dispose\", null);\n(function (Cell) {\n    function normalizeTools(raw) {\n        if (typeof raw === 'string') {\n            return { items: [raw] };\n        }\n        if (Array.isArray(raw)) {\n            return { items: raw };\n        }\n        if (raw.items) {\n            return raw;\n        }\n        return {\n            items: [raw],\n        };\n    }\n    Cell.normalizeTools = normalizeTools;\n})(Cell || (Cell = {}));\n(function (Cell) {\n    Cell.toStringTag = `X6.${Cell.name}`;\n    function isCell(instance) {\n        if (instance == null) {\n            return false;\n        }\n        if (instance instanceof Cell) {\n            return true;\n        }\n        const tag = instance[Symbol.toStringTag];\n        const cell = instance;\n        if ((tag == null || tag === Cell.toStringTag) &&\n            typeof cell.isNode === 'function' &&\n            typeof cell.isEdge === 'function' &&\n            typeof cell.prop === 'function' &&\n            typeof cell.attr === 'function') {\n            return true;\n        }\n        return false;\n    }\n    Cell.isCell = isCell;\n})(Cell || (Cell = {}));\n(function (Cell) {\n    function getCommonAncestor(...cells) {\n        const ancestors = cells\n            .filter((cell) => cell != null)\n            .map((cell) => cell.getAncestors())\n            .sort((a, b) => {\n            return a.length - b.length;\n        });\n        const first = ancestors.shift();\n        return (first.find((cell) => ancestors.every((item) => item.includes(cell))) ||\n            null);\n    }\n    Cell.getCommonAncestor = getCommonAncestor;\n    function getCellsBBox(cells, options = {}) {\n        let bbox = null;\n        for (let i = 0, ii = cells.length; i < ii; i += 1) {\n            const cell = cells[i];\n            let rect = cell.getBBox(options);\n            if (rect) {\n                if (cell.isNode()) {\n                    const angle = cell.getAngle();\n                    if (angle != null && angle !== 0) {\n                        rect = rect.bbox(angle);\n                    }\n                }\n                bbox = bbox == null ? rect : bbox.union(rect);\n            }\n        }\n        return bbox;\n    }\n    Cell.getCellsBBox = getCellsBBox;\n    function deepClone(cell) {\n        const cells = [cell, ...cell.getDescendants({ deep: true })];\n        return Cell.cloneCells(cells);\n    }\n    Cell.deepClone = deepClone;\n    function cloneCells(cells) {\n        const inputs = ArrayExt.uniq(cells);\n        const cloneMap = inputs.reduce((map, cell) => {\n            map[cell.id] = cell.clone();\n            return map;\n        }, {});\n        inputs.forEach((cell) => {\n            const clone = cloneMap[cell.id];\n            if (clone.isEdge()) {\n                const sourceId = clone.getSourceCellId();\n                const targetId = clone.getTargetCellId();\n                if (sourceId && cloneMap[sourceId]) {\n                    // Source is a node and the node is among the clones.\n                    // Then update the source of the cloned edge.\n                    clone.setSource(Object.assign(Object.assign({}, clone.getSource()), { cell: cloneMap[sourceId].id }));\n                }\n                if (targetId && cloneMap[targetId]) {\n                    // Target is a node and the node is among the clones.\n                    // Then update the target of the cloned edge.\n                    clone.setTarget(Object.assign(Object.assign({}, clone.getTarget()), { cell: cloneMap[targetId].id }));\n                }\n            }\n            // Find the parent of the original cell\n            const parent = cell.getParent();\n            if (parent && cloneMap[parent.id]) {\n                clone.setParent(cloneMap[parent.id]);\n            }\n            // Find the children of the original cell\n            const children = cell.getChildren();\n            if (children && children.length) {\n                const embeds = children.reduce((memo, child) => {\n                    // Embedded cells that are not being cloned can not be carried\n                    // over with other embedded cells.\n                    if (cloneMap[child.id]) {\n                        memo.push(cloneMap[child.id]);\n                    }\n                    return memo;\n                }, []);\n                if (embeds.length > 0) {\n                    clone.setChildren(embeds);\n                }\n            }\n        });\n        return cloneMap;\n    }\n    Cell.cloneCells = cloneCells;\n})(Cell || (Cell = {}));\n(function (Cell) {\n    Cell.config({\n        propHooks(_a) {\n            var { tools } = _a, metadata = __rest(_a, [\"tools\"]);\n            if (tools) {\n                metadata.tools = Cell.normalizeTools(tools);\n            }\n            return metadata;\n        },\n    });\n})(Cell || (Cell = {}));\n//# sourceMappingURL=cell.js.map","export var ShareRegistry;\n(function (ShareRegistry) {\n    let edgeRegistry;\n    let nodeRegistry;\n    function exist(name, isNode) {\n        return isNode\n            ? edgeRegistry != null && edgeRegistry.exist(name)\n            : nodeRegistry != null && nodeRegistry.exist(name);\n    }\n    ShareRegistry.exist = exist;\n    function setEdgeRegistry(registry) {\n        edgeRegistry = registry;\n    }\n    ShareRegistry.setEdgeRegistry = setEdgeRegistry;\n    function setNodeRegistry(registry) {\n        nodeRegistry = registry;\n    }\n    ShareRegistry.setNodeRegistry = setNodeRegistry;\n})(ShareRegistry || (ShareRegistry = {}));\n//# sourceMappingURL=registry.js.map","import { ObjectExt } from '@antv/x6-common';\nimport { Point } from '@antv/x6-geometry';\nimport { PortLayout, PortLabelLayout } from '../registry';\nexport class PortManager {\n    constructor(data) {\n        this.ports = [];\n        this.groups = {};\n        this.init(ObjectExt.cloneDeep(data));\n    }\n    getPorts() {\n        return this.ports;\n    }\n    getGroup(groupName) {\n        return groupName != null ? this.groups[groupName] : null;\n    }\n    getPortsByGroup(groupName) {\n        return this.ports.filter((p) => p.group === groupName || (p.group == null && groupName == null));\n    }\n    getPortsLayoutByGroup(groupName, elemBBox) {\n        const ports = this.getPortsByGroup(groupName);\n        const group = groupName ? this.getGroup(groupName) : null;\n        const groupPosition = group ? group.position : null;\n        const groupPositionName = groupPosition ? groupPosition.name : null;\n        let layoutFn;\n        if (groupPositionName != null) {\n            const fn = PortLayout.registry.get(groupPositionName);\n            if (fn == null) {\n                return PortLayout.registry.onNotFound(groupPositionName);\n            }\n            layoutFn = fn;\n        }\n        else {\n            layoutFn = PortLayout.presets.left;\n        }\n        const portsArgs = ports.map((port) => (port && port.position && port.position.args) || {});\n        const groupArgs = (groupPosition && groupPosition.args) || {};\n        const layouts = layoutFn(portsArgs, elemBBox, groupArgs);\n        return layouts.map((portLayout, index) => {\n            const port = ports[index];\n            return {\n                portLayout,\n                portId: port.id,\n                portSize: port.size,\n                portAttrs: port.attrs,\n                labelSize: port.label.size,\n                labelLayout: this.getPortLabelLayout(port, Point.create(portLayout.position), elemBBox),\n            };\n        });\n    }\n    init(data) {\n        const { groups, items } = data;\n        if (groups != null) {\n            Object.keys(groups).forEach((key) => {\n                this.groups[key] = this.parseGroup(groups[key]);\n            });\n        }\n        if (Array.isArray(items)) {\n            items.forEach((item) => {\n                this.ports.push(this.parsePort(item));\n            });\n        }\n    }\n    parseGroup(group) {\n        return Object.assign(Object.assign({}, group), { label: this.getLabel(group, true), position: this.getPortPosition(group.position, true) });\n    }\n    parsePort(port) {\n        const result = Object.assign({}, port);\n        const group = this.getGroup(port.group) || {};\n        result.markup = result.markup || group.markup;\n        result.attrs = ObjectExt.merge({}, group.attrs, result.attrs);\n        result.position = this.createPosition(group, result);\n        result.label = ObjectExt.merge({}, group.label, this.getLabel(result));\n        result.zIndex = this.getZIndex(group, result);\n        result.size = Object.assign(Object.assign({}, group.size), result.size);\n        return result;\n    }\n    getZIndex(group, port) {\n        if (typeof port.zIndex === 'number') {\n            return port.zIndex;\n        }\n        if (typeof group.zIndex === 'number' || group.zIndex === 'auto') {\n            return group.zIndex;\n        }\n        return 'auto';\n    }\n    createPosition(group, port) {\n        return ObjectExt.merge({\n            name: 'left',\n            args: {},\n        }, group.position, { args: port.args });\n    }\n    getPortPosition(position, setDefault = false) {\n        if (position == null) {\n            if (setDefault) {\n                return { name: 'left', args: {} };\n            }\n        }\n        else {\n            if (typeof position === 'string') {\n                return {\n                    name: position,\n                    args: {},\n                };\n            }\n            if (Array.isArray(position)) {\n                return {\n                    name: 'absolute',\n                    args: { x: position[0], y: position[1] },\n                };\n            }\n            if (typeof position === 'object') {\n                return position;\n            }\n        }\n        return { args: {} };\n    }\n    getPortLabelPosition(position, setDefault = false) {\n        if (position == null) {\n            if (setDefault) {\n                return { name: 'left', args: {} };\n            }\n        }\n        else {\n            if (typeof position === 'string') {\n                return {\n                    name: position,\n                    args: {},\n                };\n            }\n            if (typeof position === 'object') {\n                return position;\n            }\n        }\n        return { args: {} };\n    }\n    getLabel(item, setDefaults = false) {\n        const label = item.label || {};\n        label.position = this.getPortLabelPosition(label.position, setDefaults);\n        return label;\n    }\n    getPortLabelLayout(port, portPosition, elemBBox) {\n        const name = port.label.position.name || 'left';\n        const args = port.label.position.args || {};\n        const layoutFn = PortLabelLayout.registry.get(name) || PortLabelLayout.presets.left;\n        if (layoutFn) {\n            return layoutFn(portPosition, elemBBox, args);\n        }\n        return null;\n    }\n}\n//# sourceMappingURL=port.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Point, Rectangle, Angle } from '@antv/x6-geometry';\nimport { StringExt, ObjectExt, NumberExt, Interp, } from '@antv/x6-common';\nimport { Registry } from '../registry/registry';\nimport { Markup } from '../view/markup';\nimport { Cell } from './cell';\nimport { ShareRegistry } from './registry';\nimport { PortManager } from './port';\nexport class Node extends Cell {\n    get [Symbol.toStringTag]() {\n        return Node.toStringTag;\n    }\n    constructor(metadata = {}) {\n        super(metadata);\n        this.initPorts();\n    }\n    preprocess(metadata, ignoreIdCheck) {\n        const { x, y, width, height } = metadata, others = __rest(metadata, [\"x\", \"y\", \"width\", \"height\"]);\n        if (x != null || y != null) {\n            const position = others.position;\n            others.position = Object.assign(Object.assign({}, position), { x: x != null ? x : position ? position.x : 0, y: y != null ? y : position ? position.y : 0 });\n        }\n        if (width != null || height != null) {\n            const size = others.size;\n            others.size = Object.assign(Object.assign({}, size), { width: width != null ? width : size ? size.width : 0, height: height != null ? height : size ? size.height : 0 });\n        }\n        return super.preprocess(others, ignoreIdCheck);\n    }\n    isNode() {\n        return true;\n    }\n    size(width, height, options) {\n        if (width === undefined) {\n            return this.getSize();\n        }\n        if (typeof width === 'number') {\n            return this.setSize(width, height, options);\n        }\n        return this.setSize(width, height);\n    }\n    getSize() {\n        const size = this.store.get('size');\n        return size ? Object.assign({}, size) : { width: 1, height: 1 };\n    }\n    setSize(width, height, options) {\n        if (typeof width === 'object') {\n            this.resize(width.width, width.height, height);\n        }\n        else {\n            this.resize(width, height, options);\n        }\n        return this;\n    }\n    resize(width, height, options = {}) {\n        this.startBatch('resize', options);\n        const direction = options.direction;\n        if (direction) {\n            const currentSize = this.getSize();\n            switch (direction) {\n                case 'left':\n                case 'right':\n                    // Don't change height when resizing horizontally.\n                    height = currentSize.height; // eslint-disable-line\n                    break;\n                case 'top':\n                case 'bottom':\n                    // Don't change width when resizing vertically.\n                    width = currentSize.width; // eslint-disable-line\n                    break;\n                default:\n                    break;\n            }\n            const map = {\n                right: 0,\n                'top-right': 0,\n                top: 1,\n                'top-left': 1,\n                left: 2,\n                'bottom-left': 2,\n                bottom: 3,\n                'bottom-right': 3,\n            };\n            let quadrant = map[direction];\n            const angle = Angle.normalize(this.getAngle() || 0);\n            if (options.absolute) {\n                // We are taking the node's rotation into account\n                quadrant += Math.floor((angle + 45) / 90);\n                quadrant %= 4;\n            }\n            // This is a rectangle in size of the un-rotated node.\n            const bbox = this.getBBox();\n            // Pick the corner point on the node, which meant to stay on its\n            // place before and after the rotation.\n            let fixedPoint;\n            if (quadrant === 0) {\n                fixedPoint = bbox.getBottomLeft();\n            }\n            else if (quadrant === 1) {\n                fixedPoint = bbox.getCorner();\n            }\n            else if (quadrant === 2) {\n                fixedPoint = bbox.getTopRight();\n            }\n            else {\n                fixedPoint = bbox.getOrigin();\n            }\n            // Find an image of the previous indent point. This is the position,\n            // where is the point actually located on the screen.\n            const imageFixedPoint = fixedPoint\n                .clone()\n                .rotate(-angle, bbox.getCenter());\n            // Every point on the element rotates around a circle with the centre of\n            // rotation in the middle of the element while the whole element is being\n            // rotated. That means that the distance from a point in the corner of\n            // the element (supposed its always rect) to the center of the element\n            // doesn't change during the rotation and therefore it equals to a\n            // distance on un-rotated element.\n            // We can find the distance as DISTANCE = (ELEMENTWIDTH/2)^2 + (ELEMENTHEIGHT/2)^2)^0.5.\n            const radius = Math.sqrt(width * width + height * height) / 2;\n            // Now we are looking for an angle between x-axis and the line starting\n            // at image of fixed point and ending at the center of the element.\n            // We call this angle `alpha`.\n            // The image of a fixed point is located in n-th quadrant. For each\n            // quadrant passed going anti-clockwise we have to add 90 degrees.\n            // Note that the first quadrant has index 0.\n            //\n            // 3 | 2\n            // --c-- Quadrant positions around the element's center `c`\n            // 0 | 1\n            //\n            let alpha = (quadrant * Math.PI) / 2;\n            // Add an angle between the beginning of the current quadrant (line\n            // parallel with x-axis or y-axis going through the center of the\n            // element) and line crossing the indent of the fixed point and the\n            // center of the element. This is the angle we need but on the\n            // un-rotated element.\n            alpha += Math.atan(quadrant % 2 === 0 ? height / width : width / height);\n            // Lastly we have to deduct the original angle the element was rotated\n            // by and that's it.\n            alpha -= Angle.toRad(angle);\n            // With this angle and distance we can easily calculate the centre of\n            // the un-rotated element.\n            // Note that fromPolar constructor accepts an angle in radians.\n            const center = Point.fromPolar(radius, alpha, imageFixedPoint);\n            // The top left corner on the un-rotated element has to be half a width\n            // on the left and half a height to the top from the center. This will\n            // be the origin of rectangle we were looking for.\n            const origin = center.clone().translate(width / -2, height / -2);\n            this.store.set('size', { width, height }, options);\n            this.setPosition(origin.x, origin.y, options);\n        }\n        else {\n            this.store.set('size', { width, height }, options);\n        }\n        this.stopBatch('resize', options);\n        return this;\n    }\n    scale(sx, sy, origin, options = {}) {\n        const scaledBBox = this.getBBox().scale(sx, sy, origin == null ? undefined : origin);\n        this.startBatch('scale', options);\n        this.setPosition(scaledBBox.x, scaledBBox.y, options);\n        this.resize(scaledBBox.width, scaledBBox.height, options);\n        this.stopBatch('scale');\n        return this;\n    }\n    position(arg0, arg1, arg2) {\n        if (typeof arg0 === 'number') {\n            return this.setPosition(arg0, arg1, arg2);\n        }\n        return this.getPosition(arg0);\n    }\n    getPosition(options = {}) {\n        if (options.relative) {\n            const parent = this.getParent();\n            if (parent != null && parent.isNode()) {\n                const currentPosition = this.getPosition();\n                const parentPosition = parent.getPosition();\n                return {\n                    x: currentPosition.x - parentPosition.x,\n                    y: currentPosition.y - parentPosition.y,\n                };\n            }\n        }\n        const pos = this.store.get('position');\n        return pos ? Object.assign({}, pos) : { x: 0, y: 0 };\n    }\n    setPosition(arg0, arg1, arg2 = {}) {\n        let x;\n        let y;\n        let options;\n        if (typeof arg0 === 'object') {\n            x = arg0.x;\n            y = arg0.y;\n            options = arg1 || {};\n        }\n        else {\n            x = arg0;\n            y = arg1;\n            options = arg2 || {};\n        }\n        if (options.relative) {\n            const parent = this.getParent();\n            if (parent != null && parent.isNode()) {\n                const parentPosition = parent.getPosition();\n                x += parentPosition.x;\n                y += parentPosition.y;\n            }\n        }\n        if (options.deep) {\n            const currentPosition = this.getPosition();\n            this.translate(x - currentPosition.x, y - currentPosition.y, options);\n        }\n        else {\n            this.store.set('position', { x, y }, options);\n        }\n        return this;\n    }\n    translate(tx = 0, ty = 0, options = {}) {\n        if (tx === 0 && ty === 0) {\n            return this;\n        }\n        // Pass the initiator of the translation.\n        options.translateBy = options.translateBy || this.id;\n        const position = this.getPosition();\n        if (options.restrict != null && options.translateBy === this.id) {\n            // We are restricting the translation for the element itself only. We get\n            // the bounding box of the element including all its embeds.\n            // All embeds have to be translated the exact same way as the element.\n            const bbox = this.getBBox({ deep: true });\n            const ra = options.restrict;\n            // - - - - - - - - - - - - -> ra.x + ra.width\n            // - - - -> position.x      |\n            // -> bbox.x\n            //                   |\n            //         \n            //                 |\n            //   \n            //                  |\n            //   <-dx->                     | restricted area right border\n            //         <-width->        |    translated element\n            //   <- - bbox.width - ->        embedded element\n            const dx = position.x - bbox.x;\n            const dy = position.y - bbox.y;\n            // Find the maximal/minimal coordinates that the element can be translated\n            // while complies the restrictions.\n            const x = Math.max(ra.x + dx, Math.min(ra.x + ra.width + dx - bbox.width, position.x + tx));\n            const y = Math.max(ra.y + dy, Math.min(ra.y + ra.height + dy - bbox.height, position.y + ty));\n            // recalculate the translation taking the restrictions into account.\n            tx = x - position.x; // eslint-disable-line\n            ty = y - position.y; // eslint-disable-line\n        }\n        const translatedPosition = {\n            x: position.x + tx,\n            y: position.y + ty,\n        };\n        // To find out by how much an element was translated in event\n        // 'change:position' handlers.\n        options.tx = tx;\n        options.ty = ty;\n        if (options.transition) {\n            if (typeof options.transition !== 'object') {\n                options.transition = {};\n            }\n            this.transition('position', translatedPosition, Object.assign(Object.assign({}, options.transition), { interp: Interp.object }));\n            this.eachChild((child) => {\n                var _a;\n                const excluded = (_a = options.exclude) === null || _a === void 0 ? void 0 : _a.includes(child);\n                if (!excluded) {\n                    child.translate(tx, ty, options);\n                }\n            });\n        }\n        else {\n            this.startBatch('translate', options);\n            this.store.set('position', translatedPosition, options);\n            this.eachChild((child) => {\n                var _a;\n                const excluded = (_a = options.exclude) === null || _a === void 0 ? void 0 : _a.includes(child);\n                if (!excluded) {\n                    child.translate(tx, ty, options);\n                }\n            });\n            this.stopBatch('translate', options);\n        }\n        return this;\n    }\n    angle(val, options) {\n        if (val == null) {\n            return this.getAngle();\n        }\n        return this.rotate(val, options);\n    }\n    getAngle() {\n        return this.store.get('angle', 0);\n    }\n    rotate(angle, options = {}) {\n        const currentAngle = this.getAngle();\n        if (options.center) {\n            const size = this.getSize();\n            const position = this.getPosition();\n            const center = this.getBBox().getCenter();\n            center.rotate(currentAngle - angle, options.center);\n            const dx = center.x - size.width / 2 - position.x;\n            const dy = center.y - size.height / 2 - position.y;\n            this.startBatch('rotate', { angle, options });\n            this.setPosition(position.x + dx, position.y + dy, options);\n            this.rotate(angle, Object.assign(Object.assign({}, options), { center: null }));\n            this.stopBatch('rotate');\n        }\n        else {\n            this.store.set('angle', options.absolute ? angle : (currentAngle + angle) % 360, options);\n        }\n        return this;\n    }\n    // #endregion\n    // #region common\n    getBBox(options = {}) {\n        if (options.deep) {\n            const cells = this.getDescendants({ deep: true, breadthFirst: true });\n            cells.push(this);\n            return Cell.getCellsBBox(cells);\n        }\n        return Rectangle.fromPositionAndSize(this.getPosition(), this.getSize());\n    }\n    getConnectionPoint(edge, type) {\n        const bbox = this.getBBox();\n        const center = bbox.getCenter();\n        const terminal = edge.getTerminal(type);\n        if (terminal == null) {\n            return center;\n        }\n        const portId = terminal.port;\n        if (!portId || !this.hasPort(portId)) {\n            return center;\n        }\n        const port = this.getPort(portId);\n        if (!port || !port.group) {\n            return center;\n        }\n        const layouts = this.getPortsPosition(port.group);\n        const position = layouts[portId].position;\n        const portCenter = Point.create(position).translate(bbox.getOrigin());\n        const angle = this.getAngle();\n        if (angle) {\n            portCenter.rotate(-angle, center);\n        }\n        return portCenter;\n    }\n    /**\n     * Sets cell's size and position based on the children bbox and given padding.\n     */\n    fit(options = {}) {\n        const children = this.getChildren() || [];\n        const embeds = children.filter((cell) => cell.isNode());\n        if (embeds.length === 0) {\n            return this;\n        }\n        this.startBatch('fit-embeds', options);\n        if (options.deep) {\n            embeds.forEach((cell) => cell.fit(options));\n        }\n        let { x, y, width, height } = Cell.getCellsBBox(embeds);\n        const padding = NumberExt.normalizeSides(options.padding);\n        x -= padding.left;\n        y -= padding.top;\n        width += padding.left + padding.right;\n        height += padding.bottom + padding.top;\n        this.store.set({\n            position: { x, y },\n            size: { width, height },\n        }, options);\n        this.stopBatch('fit-embeds');\n        return this;\n    }\n    // #endregion\n    // #region ports\n    get portContainerMarkup() {\n        return this.getPortContainerMarkup();\n    }\n    set portContainerMarkup(markup) {\n        this.setPortContainerMarkup(markup);\n    }\n    getDefaultPortContainerMarkup() {\n        return (this.store.get('defaultPortContainerMarkup') ||\n            Markup.getPortContainerMarkup());\n    }\n    getPortContainerMarkup() {\n        return (this.store.get('portContainerMarkup') ||\n            this.getDefaultPortContainerMarkup());\n    }\n    setPortContainerMarkup(markup, options = {}) {\n        this.store.set('portContainerMarkup', Markup.clone(markup), options);\n        return this;\n    }\n    get portMarkup() {\n        return this.getPortMarkup();\n    }\n    set portMarkup(markup) {\n        this.setPortMarkup(markup);\n    }\n    getDefaultPortMarkup() {\n        return this.store.get('defaultPortMarkup') || Markup.getPortMarkup();\n    }\n    getPortMarkup() {\n        return this.store.get('portMarkup') || this.getDefaultPortMarkup();\n    }\n    setPortMarkup(markup, options = {}) {\n        this.store.set('portMarkup', Markup.clone(markup), options);\n        return this;\n    }\n    get portLabelMarkup() {\n        return this.getPortLabelMarkup();\n    }\n    set portLabelMarkup(markup) {\n        this.setPortLabelMarkup(markup);\n    }\n    getDefaultPortLabelMarkup() {\n        return (this.store.get('defaultPortLabelMarkup') || Markup.getPortLabelMarkup());\n    }\n    getPortLabelMarkup() {\n        return this.store.get('portLabelMarkup') || this.getDefaultPortLabelMarkup();\n    }\n    setPortLabelMarkup(markup, options = {}) {\n        this.store.set('portLabelMarkup', Markup.clone(markup), options);\n        return this;\n    }\n    get ports() {\n        const res = this.store.get('ports', { items: [] });\n        if (res.items == null) {\n            res.items = [];\n        }\n        return res;\n    }\n    getPorts() {\n        return ObjectExt.cloneDeep(this.ports.items);\n    }\n    getPortsByGroup(groupName) {\n        return this.getPorts().filter((port) => port.group === groupName);\n    }\n    getPort(portId) {\n        return ObjectExt.cloneDeep(this.ports.items.find((port) => port.id && port.id === portId));\n    }\n    getPortAt(index) {\n        return this.ports.items[index] || null;\n    }\n    hasPorts() {\n        return this.ports.items.length > 0;\n    }\n    hasPort(portId) {\n        return this.getPortIndex(portId) !== -1;\n    }\n    getPortIndex(port) {\n        const portId = typeof port === 'string' ? port : port.id;\n        return portId != null\n            ? this.ports.items.findIndex((item) => item.id === portId)\n            : -1;\n    }\n    getPortsPosition(groupName) {\n        const size = this.getSize();\n        const layouts = this.port.getPortsLayoutByGroup(groupName, new Rectangle(0, 0, size.width, size.height));\n        return layouts.reduce((memo, item) => {\n            const layout = item.portLayout;\n            memo[item.portId] = {\n                position: Object.assign({}, layout.position),\n                angle: layout.angle || 0,\n            };\n            return memo;\n        }, {});\n    }\n    getPortProp(portId, path) {\n        return this.getPropByPath(this.prefixPortPath(portId, path));\n    }\n    setPortProp(portId, arg1, arg2, arg3) {\n        if (typeof arg1 === 'string' || Array.isArray(arg1)) {\n            const path = this.prefixPortPath(portId, arg1);\n            const value = arg2;\n            return this.setPropByPath(path, value, arg3);\n        }\n        const path = this.prefixPortPath(portId);\n        const value = arg1;\n        return this.setPropByPath(path, value, arg2);\n    }\n    removePortProp(portId, path, options) {\n        if (typeof path === 'string' || Array.isArray(path)) {\n            return this.removePropByPath(this.prefixPortPath(portId, path), options);\n        }\n        return this.removePropByPath(this.prefixPortPath(portId), path);\n    }\n    portProp(portId, path, value, options) {\n        if (path == null) {\n            return this.getPortProp(portId);\n        }\n        if (typeof path === 'string' || Array.isArray(path)) {\n            if (arguments.length === 2) {\n                return this.getPortProp(portId, path);\n            }\n            if (value == null) {\n                return this.removePortProp(portId, path, options);\n            }\n            return this.setPortProp(portId, path, value, options);\n        }\n        return this.setPortProp(portId, path, value);\n    }\n    prefixPortPath(portId, path) {\n        const index = this.getPortIndex(portId);\n        if (index === -1) {\n            throw new Error(`Unable to find port with id: \"${portId}\"`);\n        }\n        if (path == null || path === '') {\n            return ['ports', 'items', `${index}`];\n        }\n        if (Array.isArray(path)) {\n            return ['ports', 'items', `${index}`, ...path];\n        }\n        return `ports/items/${index}/${path}`;\n    }\n    addPort(port, options) {\n        const ports = [...this.ports.items];\n        ports.push(port);\n        this.setPropByPath('ports/items', ports, options);\n        return this;\n    }\n    addPorts(ports, options) {\n        this.setPropByPath('ports/items', [...this.ports.items, ...ports], options);\n        return this;\n    }\n    insertPort(index, port, options) {\n        const ports = [...this.ports.items];\n        ports.splice(index, 0, port);\n        this.setPropByPath('ports/items', ports, options);\n        return this;\n    }\n    removePort(port, options = {}) {\n        return this.removePortAt(this.getPortIndex(port), options);\n    }\n    removePortAt(index, options = {}) {\n        if (index >= 0) {\n            const ports = [...this.ports.items];\n            ports.splice(index, 1);\n            options.rewrite = true;\n            this.setPropByPath('ports/items', ports, options);\n        }\n        return this;\n    }\n    removePorts(portsForRemoval, opt) {\n        let options;\n        if (Array.isArray(portsForRemoval)) {\n            options = opt || {};\n            if (portsForRemoval.length) {\n                options.rewrite = true;\n                const currentPorts = [...this.ports.items];\n                const remainingPorts = currentPorts.filter((cp) => !portsForRemoval.some((p) => {\n                    const id = typeof p === 'string' ? p : p.id;\n                    return cp.id === id;\n                }));\n                this.setPropByPath('ports/items', remainingPorts, options);\n            }\n        }\n        else {\n            options = portsForRemoval || {};\n            options.rewrite = true;\n            this.setPropByPath('ports/items', [], options);\n        }\n        return this;\n    }\n    getParsedPorts() {\n        return this.port.getPorts();\n    }\n    getParsedGroups() {\n        return this.port.groups;\n    }\n    getPortsLayoutByGroup(groupName, bbox) {\n        return this.port.getPortsLayoutByGroup(groupName, bbox);\n    }\n    initPorts() {\n        this.updatePortData();\n        this.on('change:ports', () => {\n            this.processRemovedPort();\n            this.updatePortData();\n        });\n    }\n    processRemovedPort() {\n        const current = this.ports;\n        const currentItemsMap = {};\n        current.items.forEach((item) => {\n            if (item.id) {\n                currentItemsMap[item.id] = true;\n            }\n        });\n        const removed = {};\n        const previous = this.store.getPrevious('ports') || {\n            items: [],\n        };\n        previous.items.forEach((item) => {\n            if (item.id && !currentItemsMap[item.id]) {\n                removed[item.id] = true;\n            }\n        });\n        const model = this.model;\n        if (model && !ObjectExt.isEmpty(removed)) {\n            const incomings = model.getConnectedEdges(this, { incoming: true });\n            incomings.forEach((edge) => {\n                const portId = edge.getTargetPortId();\n                if (portId && removed[portId]) {\n                    edge.remove();\n                }\n            });\n            const outgoings = model.getConnectedEdges(this, { outgoing: true });\n            outgoings.forEach((edge) => {\n                const portId = edge.getSourcePortId();\n                if (portId && removed[portId]) {\n                    edge.remove();\n                }\n            });\n        }\n    }\n    validatePorts() {\n        const ids = {};\n        const errors = [];\n        this.ports.items.forEach((p) => {\n            if (typeof p !== 'object') {\n                errors.push(`Invalid port ${p}.`);\n            }\n            if (p.id == null) {\n                p.id = this.generatePortId();\n            }\n            if (ids[p.id]) {\n                errors.push('Duplicitied port id.');\n            }\n            ids[p.id] = true;\n        });\n        return errors;\n    }\n    generatePortId() {\n        return StringExt.uuid();\n    }\n    updatePortData() {\n        const err = this.validatePorts();\n        if (err.length > 0) {\n            this.store.set('ports', this.store.getPrevious('ports'));\n            throw new Error(err.join(' '));\n        }\n        const prev = this.port ? this.port.getPorts() : null;\n        this.port = new PortManager(this.ports);\n        const curr = this.port.getPorts();\n        const added = prev\n            ? curr.filter((item) => {\n                if (!prev.find((prevPort) => prevPort.id === item.id)) {\n                    return item;\n                }\n                return null;\n            })\n            : [...curr];\n        const removed = prev\n            ? prev.filter((item) => {\n                if (!curr.find((curPort) => curPort.id === item.id)) {\n                    return item;\n                }\n                return null;\n            })\n            : [];\n        if (added.length > 0) {\n            this.notify('ports:added', { added, cell: this, node: this });\n        }\n        if (removed.length > 0) {\n            this.notify('ports:removed', { removed, cell: this, node: this });\n        }\n    }\n}\nNode.defaults = {\n    angle: 0,\n    position: { x: 0, y: 0 },\n    size: { width: 1, height: 1 },\n};\n(function (Node) {\n    Node.toStringTag = `X6.${Node.name}`;\n    function isNode(instance) {\n        if (instance == null) {\n            return false;\n        }\n        if (instance instanceof Node) {\n            return true;\n        }\n        const tag = instance[Symbol.toStringTag];\n        const node = instance;\n        if ((tag == null || tag === Node.toStringTag) &&\n            typeof node.isNode === 'function' &&\n            typeof node.isEdge === 'function' &&\n            typeof node.prop === 'function' &&\n            typeof node.attr === 'function' &&\n            typeof node.size === 'function' &&\n            typeof node.position === 'function') {\n            return true;\n        }\n        return false;\n    }\n    Node.isNode = isNode;\n})(Node || (Node = {}));\n(function (Node) {\n    Node.config({\n        propHooks(_a) {\n            var { ports } = _a, metadata = __rest(_a, [\"ports\"]);\n            if (ports) {\n                metadata.ports = Array.isArray(ports) ? { items: ports } : ports;\n            }\n            return metadata;\n        },\n    });\n})(Node || (Node = {}));\n(function (Node) {\n    Node.registry = Registry.create({\n        type: 'node',\n        process(shape, options) {\n            if (ShareRegistry.exist(shape, true)) {\n                throw new Error(`Node with name '${shape}' was registered by anthor Edge`);\n            }\n            if (typeof options === 'function') {\n                options.config({ shape });\n                return options;\n            }\n            let parent = Node;\n            const { inherit } = options, config = __rest(options, [\"inherit\"]);\n            if (inherit) {\n                if (typeof inherit === 'string') {\n                    const base = this.get(inherit);\n                    if (base == null) {\n                        this.onNotFound(inherit, 'inherited');\n                    }\n                    else {\n                        parent = base;\n                    }\n                }\n                else {\n                    parent = inherit;\n                }\n            }\n            if (config.constructorName == null) {\n                config.constructorName = shape;\n            }\n            const ctor = parent.define.call(parent, config);\n            ctor.config({ shape });\n            return ctor;\n        },\n    });\n    ShareRegistry.setNodeRegistry(Node.registry);\n})(Node || (Node = {}));\n(function (Node) {\n    let counter = 0;\n    function getClassName(name) {\n        if (name) {\n            return StringExt.pascalCase(name);\n        }\n        counter += 1;\n        return `CustomNode${counter}`;\n    }\n    function define(config) {\n        const { constructorName, overwrite } = config, others = __rest(config, [\"constructorName\", \"overwrite\"]);\n        const ctor = ObjectExt.createClass(getClassName(constructorName || others.shape), this);\n        ctor.config(others);\n        if (others.shape) {\n            Node.registry.register(others.shape, ctor, overwrite);\n        }\n        return ctor;\n    }\n    Node.define = define;\n    function create(options) {\n        const shape = options.shape || 'rect';\n        const Ctor = Node.registry.get(shape);\n        if (Ctor) {\n            return new Ctor(options);\n        }\n        return Node.registry.onNotFound(shape);\n    }\n    Node.create = create;\n})(Node || (Node = {}));\n//# sourceMappingURL=node.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { ObjectExt, StringExt } from '@antv/x6-common';\nimport { Point, Polyline } from '@antv/x6-geometry';\nimport { Registry } from '../registry/registry';\nimport { Markup } from '../view/markup';\nimport { ShareRegistry } from './registry';\nimport { Cell } from './cell';\nexport class Edge extends Cell {\n    get [Symbol.toStringTag]() {\n        return Edge.toStringTag;\n    }\n    constructor(metadata = {}) {\n        super(metadata);\n    }\n    preprocess(metadata, ignoreIdCheck) {\n        const { source, sourceCell, sourcePort, sourcePoint, target, targetCell, targetPort, targetPoint } = metadata, others = __rest(metadata, [\"source\", \"sourceCell\", \"sourcePort\", \"sourcePoint\", \"target\", \"targetCell\", \"targetPort\", \"targetPoint\"]);\n        const data = others;\n        const isValidId = (val) => typeof val === 'string' || typeof val === 'number';\n        if (source != null) {\n            if (Cell.isCell(source)) {\n                data.source = { cell: source.id };\n            }\n            else if (isValidId(source)) {\n                data.source = { cell: source };\n            }\n            else if (Point.isPoint(source)) {\n                data.source = source.toJSON();\n            }\n            else if (Array.isArray(source)) {\n                data.source = { x: source[0], y: source[1] };\n            }\n            else {\n                const cell = source.cell;\n                if (Cell.isCell(cell)) {\n                    data.source = Object.assign(Object.assign({}, source), { cell: cell.id });\n                }\n                else {\n                    data.source = source;\n                }\n            }\n        }\n        if (sourceCell != null || sourcePort != null) {\n            let terminal = data.source;\n            if (sourceCell != null) {\n                const id = isValidId(sourceCell) ? sourceCell : sourceCell.id;\n                if (terminal) {\n                    terminal.cell = id;\n                }\n                else {\n                    terminal = data.source = { cell: id };\n                }\n            }\n            if (sourcePort != null && terminal) {\n                terminal.port = sourcePort;\n            }\n        }\n        else if (sourcePoint != null) {\n            data.source = Point.create(sourcePoint).toJSON();\n        }\n        if (target != null) {\n            if (Cell.isCell(target)) {\n                data.target = { cell: target.id };\n            }\n            else if (isValidId(target)) {\n                data.target = { cell: target };\n            }\n            else if (Point.isPoint(target)) {\n                data.target = target.toJSON();\n            }\n            else if (Array.isArray(target)) {\n                data.target = { x: target[0], y: target[1] };\n            }\n            else {\n                const cell = target.cell;\n                if (Cell.isCell(cell)) {\n                    data.target = Object.assign(Object.assign({}, target), { cell: cell.id });\n                }\n                else {\n                    data.target = target;\n                }\n            }\n        }\n        if (targetCell != null || targetPort != null) {\n            let terminal = data.target;\n            if (targetCell != null) {\n                const id = isValidId(targetCell) ? targetCell : targetCell.id;\n                if (terminal) {\n                    terminal.cell = id;\n                }\n                else {\n                    terminal = data.target = { cell: id };\n                }\n            }\n            if (targetPort != null && terminal) {\n                terminal.port = targetPort;\n            }\n        }\n        else if (targetPoint != null) {\n            data.target = Point.create(targetPoint).toJSON();\n        }\n        return super.preprocess(data, ignoreIdCheck);\n    }\n    setup() {\n        super.setup();\n        this.on('change:labels', (args) => this.onLabelsChanged(args));\n        this.on('change:vertices', (args) => this.onVertexsChanged(args));\n    }\n    isEdge() {\n        return true;\n    }\n    // #region terminal\n    disconnect(options = {}) {\n        this.store.set({\n            source: { x: 0, y: 0 },\n            target: { x: 0, y: 0 },\n        }, options);\n        return this;\n    }\n    get source() {\n        return this.getSource();\n    }\n    set source(data) {\n        this.setSource(data);\n    }\n    getSource() {\n        return this.getTerminal('source');\n    }\n    getSourceCellId() {\n        return this.source.cell;\n    }\n    getSourcePortId() {\n        return this.source.port;\n    }\n    setSource(source, args, options = {}) {\n        return this.setTerminal('source', source, args, options);\n    }\n    get target() {\n        return this.getTarget();\n    }\n    set target(data) {\n        this.setTarget(data);\n    }\n    getTarget() {\n        return this.getTerminal('target');\n    }\n    getTargetCellId() {\n        return this.target.cell;\n    }\n    getTargetPortId() {\n        return this.target.port;\n    }\n    setTarget(target, args, options = {}) {\n        return this.setTerminal('target', target, args, options);\n    }\n    getTerminal(type) {\n        return Object.assign({}, this.store.get(type));\n    }\n    setTerminal(type, terminal, args, options = {}) {\n        // `terminal` is a cell\n        if (Cell.isCell(terminal)) {\n            this.store.set(type, ObjectExt.merge({}, args, { cell: terminal.id }), options);\n            return this;\n        }\n        // `terminal` is a point-like object\n        const p = terminal;\n        if (Point.isPoint(terminal) || (p.x != null && p.y != null)) {\n            this.store.set(type, ObjectExt.merge({}, args, { x: p.x, y: p.y }), options);\n            return this;\n        }\n        // `terminal` is an object\n        this.store.set(type, ObjectExt.cloneDeep(terminal), options);\n        return this;\n    }\n    getSourcePoint() {\n        return this.getTerminalPoint('source');\n    }\n    getTargetPoint() {\n        return this.getTerminalPoint('target');\n    }\n    getTerminalPoint(type) {\n        const terminal = this[type];\n        if (Point.isPointLike(terminal)) {\n            return Point.create(terminal);\n        }\n        const cell = this.getTerminalCell(type);\n        if (cell) {\n            return cell.getConnectionPoint(this, type);\n        }\n        return new Point();\n    }\n    getSourceCell() {\n        return this.getTerminalCell('source');\n    }\n    getTargetCell() {\n        return this.getTerminalCell('target');\n    }\n    getTerminalCell(type) {\n        if (this.model) {\n            const cellId = type === 'source' ? this.getSourceCellId() : this.getTargetCellId();\n            if (cellId) {\n                return this.model.getCell(cellId);\n            }\n        }\n        return null;\n    }\n    getSourceNode() {\n        return this.getTerminalNode('source');\n    }\n    getTargetNode() {\n        return this.getTerminalNode('target');\n    }\n    getTerminalNode(type) {\n        let cell = this; // eslint-disable-line\n        const visited = {};\n        while (cell && cell.isEdge()) {\n            if (visited[cell.id]) {\n                return null;\n            }\n            visited[cell.id] = true;\n            cell = cell.getTerminalCell(type);\n        }\n        return cell && cell.isNode() ? cell : null;\n    }\n    // #endregion\n    // #region router\n    get router() {\n        return this.getRouter();\n    }\n    set router(data) {\n        if (data == null) {\n            this.removeRouter();\n        }\n        else {\n            this.setRouter(data);\n        }\n    }\n    getRouter() {\n        return this.store.get('router');\n    }\n    setRouter(name, args, options) {\n        if (typeof name === 'object') {\n            this.store.set('router', name, args);\n        }\n        else {\n            this.store.set('router', { name, args }, options);\n        }\n        return this;\n    }\n    removeRouter(options = {}) {\n        this.store.remove('router', options);\n        return this;\n    }\n    // #endregion\n    // #region connector\n    get connector() {\n        return this.getConnector();\n    }\n    set connector(data) {\n        if (data == null) {\n            this.removeConnector();\n        }\n        else {\n            this.setConnector(data);\n        }\n    }\n    getConnector() {\n        return this.store.get('connector');\n    }\n    setConnector(name, args, options) {\n        if (typeof name === 'object') {\n            this.store.set('connector', name, args);\n        }\n        else {\n            this.store.set('connector', { name, args }, options);\n        }\n        return this;\n    }\n    removeConnector(options = {}) {\n        return this.store.remove('connector', options);\n    }\n    // #endregion\n    // #region labels\n    getDefaultLabel() {\n        const ctor = this.constructor;\n        const defaults = this.store.get('defaultLabel') || ctor.defaultLabel || {};\n        return ObjectExt.cloneDeep(defaults);\n    }\n    get labels() {\n        return this.getLabels();\n    }\n    set labels(labels) {\n        this.setLabels(labels);\n    }\n    getLabels() {\n        return [...this.store.get('labels', [])].map((item) => this.parseLabel(item));\n    }\n    setLabels(labels, options = {}) {\n        this.store.set('labels', Array.isArray(labels) ? labels : [labels], options);\n        return this;\n    }\n    insertLabel(label, index, options = {}) {\n        const labels = this.getLabels();\n        const len = labels.length;\n        let idx = index != null && Number.isFinite(index) ? index : len;\n        if (idx < 0) {\n            idx = len + idx + 1;\n        }\n        labels.splice(idx, 0, this.parseLabel(label));\n        return this.setLabels(labels, options);\n    }\n    appendLabel(label, options = {}) {\n        return this.insertLabel(label, -1, options);\n    }\n    getLabelAt(index) {\n        const labels = this.getLabels();\n        if (index != null && Number.isFinite(index)) {\n            return this.parseLabel(labels[index]);\n        }\n        return null;\n    }\n    setLabelAt(index, label, options = {}) {\n        if (index != null && Number.isFinite(index)) {\n            const labels = this.getLabels();\n            labels[index] = this.parseLabel(label);\n            this.setLabels(labels, options);\n        }\n        return this;\n    }\n    removeLabelAt(index, options = {}) {\n        const labels = this.getLabels();\n        const idx = index != null && Number.isFinite(index) ? index : -1;\n        const removed = labels.splice(idx, 1);\n        this.setLabels(labels, options);\n        return removed.length ? removed[0] : null;\n    }\n    parseLabel(label) {\n        if (typeof label === 'string') {\n            const ctor = this.constructor;\n            return ctor.parseStringLabel(label);\n        }\n        return label;\n    }\n    onLabelsChanged({ previous, current, }) {\n        const added = previous && current\n            ? current.filter((label1) => {\n                if (!previous.find((label2) => label1 === label2 || ObjectExt.isEqual(label1, label2))) {\n                    return label1;\n                }\n                return null;\n            })\n            : current\n                ? [...current]\n                : [];\n        const removed = previous && current\n            ? previous.filter((label1) => {\n                if (!current.find((label2) => label1 === label2 || ObjectExt.isEqual(label1, label2))) {\n                    return label1;\n                }\n                return null;\n            })\n            : previous\n                ? [...previous]\n                : [];\n        if (added.length > 0) {\n            this.notify('labels:added', { added, cell: this, edge: this });\n        }\n        if (removed.length > 0) {\n            this.notify('labels:removed', { removed, cell: this, edge: this });\n        }\n    }\n    // #endregion\n    // #region vertices\n    get vertices() {\n        return this.getVertices();\n    }\n    set vertices(vertices) {\n        this.setVertices(vertices);\n    }\n    getVertices() {\n        return [...this.store.get('vertices', [])];\n    }\n    setVertices(vertices, options = {}) {\n        const points = Array.isArray(vertices) ? vertices : [vertices];\n        this.store.set('vertices', points.map((p) => Point.toJSON(p)), options);\n        return this;\n    }\n    insertVertex(vertice, index, options = {}) {\n        const vertices = this.getVertices();\n        const len = vertices.length;\n        let idx = index != null && Number.isFinite(index) ? index : len;\n        if (idx < 0) {\n            idx = len + idx + 1;\n        }\n        vertices.splice(idx, 0, Point.toJSON(vertice));\n        return this.setVertices(vertices, options);\n    }\n    appendVertex(vertex, options = {}) {\n        return this.insertVertex(vertex, -1, options);\n    }\n    getVertexAt(index) {\n        if (index != null && Number.isFinite(index)) {\n            const vertices = this.getVertices();\n            return vertices[index];\n        }\n        return null;\n    }\n    setVertexAt(index, vertice, options = {}) {\n        if (index != null && Number.isFinite(index)) {\n            const vertices = this.getVertices();\n            vertices[index] = vertice;\n            this.setVertices(vertices, options);\n        }\n        return this;\n    }\n    removeVertexAt(index, options = {}) {\n        const vertices = this.getVertices();\n        const idx = index != null && Number.isFinite(index) ? index : -1;\n        vertices.splice(idx, 1);\n        return this.setVertices(vertices, options);\n    }\n    onVertexsChanged({ previous, current, }) {\n        const added = previous && current\n            ? current.filter((p1) => {\n                if (!previous.find((p2) => Point.equals(p1, p2))) {\n                    return p1;\n                }\n                return null;\n            })\n            : current\n                ? [...current]\n                : [];\n        const removed = previous && current\n            ? previous.filter((p1) => {\n                if (!current.find((p2) => Point.equals(p1, p2))) {\n                    return p1;\n                }\n                return null;\n            })\n            : previous\n                ? [...previous]\n                : [];\n        if (added.length > 0) {\n            this.notify('vertexs:added', { added, cell: this, edge: this });\n        }\n        if (removed.length > 0) {\n            this.notify('vertexs:removed', { removed, cell: this, edge: this });\n        }\n    }\n    // #endregion\n    // #region markup\n    getDefaultMarkup() {\n        return this.store.get('defaultMarkup') || Markup.getEdgeMarkup();\n    }\n    getMarkup() {\n        return super.getMarkup() || this.getDefaultMarkup();\n    }\n    // #endregion\n    // #region transform\n    /**\n     * Translate the edge vertices (and source and target if they are points)\n     * by `tx` pixels in the x-axis and `ty` pixels in the y-axis.\n     */\n    translate(tx, ty, options = {}) {\n        options.translateBy = options.translateBy || this.id;\n        options.tx = tx;\n        options.ty = ty;\n        return this.applyToPoints((p) => ({\n            x: (p.x || 0) + tx,\n            y: (p.y || 0) + ty,\n        }), options);\n    }\n    /**\n     * Scales the edge's points (vertices) relative to the given origin.\n     */\n    scale(sx, sy, origin, options = {}) {\n        return this.applyToPoints((p) => {\n            return Point.create(p).scale(sx, sy, origin).toJSON();\n        }, options);\n    }\n    applyToPoints(worker, options = {}) {\n        const attrs = {};\n        const source = this.getSource();\n        const target = this.getTarget();\n        if (Point.isPointLike(source)) {\n            attrs.source = worker(source);\n        }\n        if (Point.isPointLike(target)) {\n            attrs.target = worker(target);\n        }\n        const vertices = this.getVertices();\n        if (vertices.length > 0) {\n            attrs.vertices = vertices.map(worker);\n        }\n        this.store.set(attrs, options);\n        return this;\n    }\n    // #endregion\n    // #region common\n    getBBox() {\n        return this.getPolyline().bbox();\n    }\n    getConnectionPoint() {\n        return this.getPolyline().pointAt(0.5);\n    }\n    getPolyline() {\n        const points = [\n            this.getSourcePoint(),\n            ...this.getVertices().map((vertice) => Point.create(vertice)),\n            this.getTargetPoint(),\n        ];\n        return new Polyline(points);\n    }\n    updateParent(options) {\n        let newParent = null;\n        const source = this.getSourceCell();\n        const target = this.getTargetCell();\n        const prevParent = this.getParent();\n        if (source && target) {\n            if (source === target || source.isDescendantOf(target)) {\n                newParent = target;\n            }\n            else if (target.isDescendantOf(source)) {\n                newParent = source;\n            }\n            else {\n                newParent = Cell.getCommonAncestor(source, target);\n            }\n        }\n        // Unembeds the edge if source and target has no common\n        // ancestor or common ancestor changed\n        if (prevParent && newParent && newParent.id !== prevParent.id) {\n            prevParent.unembed(this, options);\n        }\n        // Embeds the edge if source and target are not same\n        if (newParent && (!prevParent || prevParent.id !== newParent.id)) {\n            newParent.embed(this, options);\n        }\n        return newParent;\n    }\n    hasLoop(options = {}) {\n        const source = this.getSource();\n        const target = this.getTarget();\n        const sourceId = source.cell;\n        const targetId = target.cell;\n        if (!sourceId || !targetId) {\n            return false;\n        }\n        let loop = sourceId === targetId;\n        // Note that there in the deep mode a edge can have a loop,\n        // even if it connects only a parent and its embed.\n        // A loop \"target equals source\" is valid in both shallow and deep mode.\n        // eslint-disable-next-line\n        if (!loop && options.deep && this._model) {\n            const sourceCell = this.getSourceCell();\n            const targetCell = this.getTargetCell();\n            if (sourceCell && targetCell) {\n                loop =\n                    sourceCell.isAncestorOf(targetCell, options) ||\n                        targetCell.isAncestorOf(sourceCell, options);\n            }\n        }\n        return loop;\n    }\n    getFragmentAncestor() {\n        const cells = [this, this.getSourceNode(), this.getTargetNode()].filter((item) => item != null);\n        return this.getCommonAncestor(...cells);\n    }\n    isFragmentDescendantOf(cell) {\n        const ancestor = this.getFragmentAncestor();\n        return (!!ancestor && (ancestor.id === cell.id || ancestor.isDescendantOf(cell)));\n    }\n}\nEdge.defaults = {};\n(function (Edge) {\n    function equalTerminals(a, b) {\n        const a1 = a;\n        const b1 = b;\n        if (a1.cell === b1.cell) {\n            return a1.port === b1.port || (a1.port == null && b1.port == null);\n        }\n        return false;\n    }\n    Edge.equalTerminals = equalTerminals;\n})(Edge || (Edge = {}));\n(function (Edge) {\n    Edge.defaultLabel = {\n        markup: [\n            {\n                tagName: 'rect',\n                selector: 'body',\n            },\n            {\n                tagName: 'text',\n                selector: 'label',\n            },\n        ],\n        attrs: {\n            text: {\n                fill: '#000',\n                fontSize: 14,\n                textAnchor: 'middle',\n                textVerticalAnchor: 'middle',\n                pointerEvents: 'none',\n            },\n            rect: {\n                ref: 'label',\n                fill: '#fff',\n                rx: 3,\n                ry: 3,\n                refWidth: 1,\n                refHeight: 1,\n                refX: 0,\n                refY: 0,\n            },\n        },\n        position: {\n            distance: 0.5,\n        },\n    };\n    function parseStringLabel(text) {\n        return {\n            attrs: { label: { text } },\n        };\n    }\n    Edge.parseStringLabel = parseStringLabel;\n})(Edge || (Edge = {}));\n(function (Edge) {\n    Edge.toStringTag = `X6.${Edge.name}`;\n    function isEdge(instance) {\n        if (instance == null) {\n            return false;\n        }\n        if (instance instanceof Edge) {\n            return true;\n        }\n        const tag = instance[Symbol.toStringTag];\n        const edge = instance;\n        if ((tag == null || tag === Edge.toStringTag) &&\n            typeof edge.isNode === 'function' &&\n            typeof edge.isEdge === 'function' &&\n            typeof edge.prop === 'function' &&\n            typeof edge.attr === 'function' &&\n            typeof edge.disconnect === 'function' &&\n            typeof edge.getSource === 'function' &&\n            typeof edge.getTarget === 'function') {\n            return true;\n        }\n        return false;\n    }\n    Edge.isEdge = isEdge;\n})(Edge || (Edge = {}));\n(function (Edge) {\n    Edge.registry = Registry.create({\n        type: 'edge',\n        process(shape, options) {\n            if (ShareRegistry.exist(shape, false)) {\n                throw new Error(`Edge with name '${shape}' was registered by anthor Node`);\n            }\n            if (typeof options === 'function') {\n                options.config({ shape });\n                return options;\n            }\n            let parent = Edge;\n            // default inherit from 'dege'\n            const { inherit = 'edge' } = options, others = __rest(options, [\"inherit\"]);\n            if (typeof inherit === 'string') {\n                const base = this.get(inherit || 'edge');\n                if (base == null && inherit) {\n                    this.onNotFound(inherit, 'inherited');\n                }\n                else {\n                    parent = base;\n                }\n            }\n            else {\n                parent = inherit;\n            }\n            if (others.constructorName == null) {\n                others.constructorName = shape;\n            }\n            const ctor = parent.define.call(parent, others);\n            ctor.config({ shape });\n            return ctor;\n        },\n    });\n    ShareRegistry.setEdgeRegistry(Edge.registry);\n})(Edge || (Edge = {}));\n(function (Edge) {\n    let counter = 0;\n    function getClassName(name) {\n        if (name) {\n            return StringExt.pascalCase(name);\n        }\n        counter += 1;\n        return `CustomEdge${counter}`;\n    }\n    function define(config) {\n        const { constructorName, overwrite } = config, others = __rest(config, [\"constructorName\", \"overwrite\"]);\n        const ctor = ObjectExt.createClass(getClassName(constructorName || others.shape), this);\n        ctor.config(others);\n        if (others.shape) {\n            Edge.registry.register(others.shape, ctor, overwrite);\n        }\n        return ctor;\n    }\n    Edge.define = define;\n    function create(options) {\n        const shape = options.shape || 'edge';\n        const Ctor = Edge.registry.get(shape);\n        if (Ctor) {\n            return new Ctor(options);\n        }\n        return Edge.registry.onNotFound(shape);\n    }\n    Edge.create = create;\n})(Edge || (Edge = {}));\n(function (Edge) {\n    const shape = 'basic.edge';\n    Edge.config({\n        shape,\n        propHooks(metadata) {\n            const { label, vertices } = metadata, others = __rest(metadata, [\"label\", \"vertices\"]);\n            if (label) {\n                if (others.labels == null) {\n                    others.labels = [];\n                }\n                const formated = typeof label === 'string' ? Edge.parseStringLabel(label) : label;\n                others.labels.push(formated);\n            }\n            if (vertices) {\n                if (Array.isArray(vertices)) {\n                    others.vertices = vertices.map((item) => Point.create(item).toJSON());\n                }\n            }\n            return others;\n        },\n    });\n    Edge.registry.register(shape, Edge);\n})(Edge || (Edge = {}));\n//# sourceMappingURL=edge.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ArrayExt, Basecoat } from '@antv/x6-common';\nexport class Collection extends Basecoat {\n    constructor(cells, options = {}) {\n        super();\n        this.length = 0;\n        this.comparator = options.comparator || 'zIndex';\n        this.clean();\n        if (cells) {\n            this.reset(cells, { silent: true });\n        }\n    }\n    toJSON() {\n        return this.cells.map((cell) => cell.toJSON());\n    }\n    add(cells, index, options) {\n        let localIndex;\n        let localOptions;\n        if (typeof index === 'number') {\n            localIndex = index;\n            localOptions = Object.assign({ merge: false }, options);\n        }\n        else {\n            localIndex = this.length;\n            localOptions = Object.assign({ merge: false }, index);\n        }\n        if (localIndex > this.length) {\n            localIndex = this.length;\n        }\n        if (localIndex < 0) {\n            localIndex += this.length + 1;\n        }\n        const entities = Array.isArray(cells) ? cells : [cells];\n        const sortable = this.comparator &&\n            typeof index !== 'number' &&\n            localOptions.sort !== false;\n        const sortAttr = this.comparator || null;\n        let sort = false;\n        const added = [];\n        const merged = [];\n        entities.forEach((cell) => {\n            const existing = this.get(cell);\n            if (existing) {\n                if (localOptions.merge && !cell.isSameStore(existing)) {\n                    existing.setProp(cell.getProp(), options); // merge\n                    merged.push(existing);\n                    if (sortable && !sort) {\n                        if (sortAttr == null || typeof sortAttr === 'function') {\n                            sort = existing.hasChanged();\n                        }\n                        else if (typeof sortAttr === 'string') {\n                            sort = existing.hasChanged(sortAttr);\n                        }\n                        else {\n                            sort = sortAttr.some((key) => existing.hasChanged(key));\n                        }\n                    }\n                }\n            }\n            else {\n                added.push(cell);\n                this.reference(cell);\n            }\n        });\n        if (added.length) {\n            if (sortable) {\n                sort = true;\n            }\n            this.cells.splice(localIndex, 0, ...added);\n            this.length = this.cells.length;\n        }\n        if (sort) {\n            this.sort({ silent: true });\n        }\n        if (!localOptions.silent) {\n            added.forEach((cell, i) => {\n                const args = {\n                    cell,\n                    index: localIndex + i,\n                    options: localOptions,\n                };\n                this.trigger('added', args);\n                if (!localOptions.dryrun) {\n                    cell.notify('added', Object.assign({}, args));\n                }\n            });\n            if (sort) {\n                this.trigger('sorted');\n            }\n            if (added.length || merged.length) {\n                this.trigger('updated', {\n                    added,\n                    merged,\n                    removed: [],\n                    options: localOptions,\n                });\n            }\n        }\n        return this;\n    }\n    remove(cells, options = {}) {\n        const arr = Array.isArray(cells) ? cells : [cells];\n        const removed = this.removeCells(arr, options);\n        if (!options.silent && removed.length > 0) {\n            this.trigger('updated', {\n                options,\n                removed,\n                added: [],\n                merged: [],\n            });\n        }\n        return Array.isArray(cells) ? removed : removed[0];\n    }\n    removeCells(cells, options) {\n        const removed = [];\n        for (let i = 0; i < cells.length; i += 1) {\n            const cell = this.get(cells[i]);\n            if (cell == null) {\n                continue;\n            }\n            const index = this.cells.indexOf(cell);\n            this.cells.splice(index, 1);\n            this.length -= 1;\n            delete this.map[cell.id];\n            removed.push(cell);\n            this.unreference(cell);\n            if (!options.dryrun) {\n                cell.remove();\n            }\n            if (!options.silent) {\n                this.trigger('removed', { cell, index, options });\n                if (!options.dryrun) {\n                    cell.notify('removed', { cell, index, options });\n                }\n            }\n        }\n        return removed;\n    }\n    reset(cells, options = {}) {\n        const previous = this.cells.slice();\n        previous.forEach((cell) => this.unreference(cell));\n        this.clean();\n        this.add(cells, Object.assign({ silent: true }, options));\n        if (!options.silent) {\n            const current = this.cells.slice();\n            this.trigger('reseted', {\n                options,\n                previous,\n                current,\n            });\n            const added = [];\n            const removed = [];\n            current.forEach((a) => {\n                const exist = previous.some((b) => b.id === a.id);\n                if (!exist) {\n                    added.push(a);\n                }\n            });\n            previous.forEach((a) => {\n                const exist = current.some((b) => b.id === a.id);\n                if (!exist) {\n                    removed.push(a);\n                }\n            });\n            this.trigger('updated', { options, added, removed, merged: [] });\n        }\n        return this;\n    }\n    push(cell, options) {\n        return this.add(cell, this.length, options);\n    }\n    pop(options) {\n        const cell = this.at(this.length - 1);\n        return this.remove(cell, options);\n    }\n    unshift(cell, options) {\n        return this.add(cell, 0, options);\n    }\n    shift(options) {\n        const cell = this.at(0);\n        return this.remove(cell, options);\n    }\n    get(cell) {\n        if (cell == null) {\n            return null;\n        }\n        const id = typeof cell === 'string' || typeof cell === 'number' ? cell : cell.id;\n        return this.map[id] || null;\n    }\n    has(cell) {\n        return this.get(cell) != null;\n    }\n    at(index) {\n        if (index < 0) {\n            index += this.length; // eslint-disable-line\n        }\n        return this.cells[index] || null;\n    }\n    first() {\n        return this.at(0);\n    }\n    last() {\n        return this.at(-1);\n    }\n    indexOf(cell) {\n        return this.cells.indexOf(cell);\n    }\n    toArray() {\n        return this.cells.slice();\n    }\n    sort(options = {}) {\n        if (this.comparator != null) {\n            this.cells = ArrayExt.sortBy(this.cells, this.comparator);\n            if (!options.silent) {\n                this.trigger('sorted');\n            }\n        }\n        return this;\n    }\n    clone() {\n        const constructor = this.constructor;\n        return new constructor(this.cells.slice(), {\n            comparator: this.comparator,\n        });\n    }\n    reference(cell) {\n        this.map[cell.id] = cell;\n        cell.on('*', this.notifyCellEvent, this);\n    }\n    unreference(cell) {\n        cell.off('*', this.notifyCellEvent, this);\n        delete this.map[cell.id];\n    }\n    notifyCellEvent(name, args) {\n        const cell = args.cell;\n        this.trigger(`cell:${name}`, args);\n        if (cell) {\n            if (cell.isNode()) {\n                this.trigger(`node:${name}`, Object.assign(Object.assign({}, args), { node: cell }));\n            }\n            else if (cell.isEdge()) {\n                this.trigger(`edge:${name}`, Object.assign(Object.assign({}, args), { edge: cell }));\n            }\n        }\n    }\n    clean() {\n        this.length = 0;\n        this.cells = [];\n        this.map = {};\n    }\n    dispose() {\n        this.reset([]);\n    }\n}\n__decorate([\n    Collection.dispose()\n], Collection.prototype, \"dispose\", null);\n//# sourceMappingURL=collection.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { FunctionExt, Dijkstra, Basecoat } from '@antv/x6-common';\nimport { Rectangle } from '@antv/x6-geometry';\nimport { Cell } from './cell';\nimport { Edge } from './edge';\nimport { Node } from './node';\nimport { Collection } from './collection';\nexport class Model extends Basecoat {\n    get [Symbol.toStringTag]() {\n        return Model.toStringTag;\n    }\n    constructor(cells = []) {\n        super();\n        this.batches = {};\n        this.addings = new WeakMap();\n        this.nodes = {};\n        this.edges = {};\n        this.outgoings = {};\n        this.incomings = {};\n        this.collection = new Collection(cells);\n        this.setup();\n    }\n    notify(name, args) {\n        this.trigger(name, args);\n        const graph = this.graph;\n        if (graph) {\n            if (name === 'sorted' || name === 'reseted' || name === 'updated') {\n                graph.trigger(`model:${name}`, args);\n            }\n            else {\n                graph.trigger(name, args);\n            }\n        }\n        return this;\n    }\n    setup() {\n        const collection = this.collection;\n        collection.on('sorted', () => this.notify('sorted', null));\n        collection.on('updated', (args) => this.notify('updated', args));\n        collection.on('cell:change:zIndex', () => this.sortOnChangeZ());\n        collection.on('added', ({ cell }) => {\n            this.onCellAdded(cell);\n        });\n        collection.on('removed', (args) => {\n            const cell = args.cell;\n            this.onCellRemoved(cell, args.options);\n            // Should trigger remove-event manually after cell was removed.\n            this.notify('cell:removed', args);\n            if (cell.isNode()) {\n                this.notify('node:removed', Object.assign(Object.assign({}, args), { node: cell }));\n            }\n            else if (cell.isEdge()) {\n                this.notify('edge:removed', Object.assign(Object.assign({}, args), { edge: cell }));\n            }\n        });\n        collection.on('reseted', (args) => {\n            this.onReset(args.current);\n            this.notify('reseted', args);\n        });\n        collection.on('edge:change:source', ({ edge }) => this.onEdgeTerminalChanged(edge, 'source'));\n        collection.on('edge:change:target', ({ edge }) => {\n            this.onEdgeTerminalChanged(edge, 'target');\n        });\n    }\n    sortOnChangeZ() {\n        this.collection.sort();\n    }\n    onCellAdded(cell) {\n        const cellId = cell.id;\n        if (cell.isEdge()) {\n            // Auto update edge's parent\n            cell.updateParent();\n            this.edges[cellId] = true;\n            this.onEdgeTerminalChanged(cell, 'source');\n            this.onEdgeTerminalChanged(cell, 'target');\n        }\n        else {\n            this.nodes[cellId] = true;\n        }\n    }\n    onCellRemoved(cell, options) {\n        const cellId = cell.id;\n        if (cell.isEdge()) {\n            delete this.edges[cellId];\n            const source = cell.getSource();\n            const target = cell.getTarget();\n            if (source && source.cell) {\n                const cache = this.outgoings[source.cell];\n                const index = cache ? cache.indexOf(cellId) : -1;\n                if (index >= 0) {\n                    cache.splice(index, 1);\n                    if (cache.length === 0) {\n                        delete this.outgoings[source.cell];\n                    }\n                }\n            }\n            if (target && target.cell) {\n                const cache = this.incomings[target.cell];\n                const index = cache ? cache.indexOf(cellId) : -1;\n                if (index >= 0) {\n                    cache.splice(index, 1);\n                    if (cache.length === 0) {\n                        delete this.incomings[target.cell];\n                    }\n                }\n            }\n        }\n        else {\n            delete this.nodes[cellId];\n        }\n        if (!options.clear) {\n            if (options.disconnectEdges) {\n                this.disconnectConnectedEdges(cell, options);\n            }\n            else {\n                this.removeConnectedEdges(cell, options);\n            }\n        }\n        if (cell.model === this) {\n            cell.model = null;\n        }\n    }\n    onReset(cells) {\n        this.nodes = {};\n        this.edges = {};\n        this.outgoings = {};\n        this.incomings = {};\n        cells.forEach((cell) => this.onCellAdded(cell));\n    }\n    onEdgeTerminalChanged(edge, type) {\n        const ref = type === 'source' ? this.outgoings : this.incomings;\n        const prev = edge.previous(type);\n        if (prev && prev.cell) {\n            const cellId = Cell.isCell(prev.cell) ? prev.cell.id : prev.cell;\n            const cache = ref[cellId];\n            const index = cache ? cache.indexOf(edge.id) : -1;\n            if (index >= 0) {\n                cache.splice(index, 1);\n                if (cache.length === 0) {\n                    delete ref[cellId];\n                }\n            }\n        }\n        const terminal = edge.getTerminal(type);\n        if (terminal && terminal.cell) {\n            const terminalId = Cell.isCell(terminal.cell)\n                ? terminal.cell.id\n                : terminal.cell;\n            const cache = ref[terminalId] || [];\n            const index = cache.indexOf(edge.id);\n            if (index === -1) {\n                cache.push(edge.id);\n            }\n            ref[terminalId] = cache;\n        }\n    }\n    prepareCell(cell, options) {\n        if (!cell.model && (!options || !options.dryrun)) {\n            cell.model = this;\n        }\n        if (cell.zIndex == null) {\n            cell.setZIndex(this.getMaxZIndex() + 1, { silent: true });\n        }\n        return cell;\n    }\n    resetCells(cells, options = {}) {\n        // Do not update model at this time. Because if we just update the graph\n        // with the same json-data, the edge will reference to the old nodes.\n        cells.map((cell) => this.prepareCell(cell, Object.assign(Object.assign({}, options), { dryrun: true })));\n        this.collection.reset(cells, options);\n        // Update model and trigger edge update it's references\n        cells.map((cell) => this.prepareCell(cell, { options }));\n        return this;\n    }\n    clear(options = {}) {\n        const raw = this.getCells();\n        if (raw.length === 0) {\n            return this;\n        }\n        const localOptions = Object.assign(Object.assign({}, options), { clear: true });\n        this.batchUpdate('clear', () => {\n            // The nodes come after the edges.\n            const cells = raw.sort((a, b) => {\n                const v1 = a.isEdge() ? 1 : 2;\n                const v2 = b.isEdge() ? 1 : 2;\n                return v1 - v2;\n            });\n            while (cells.length > 0) {\n                // Note that all the edges are removed first, so it's safe to\n                // remove the nodes without removing the connected edges first.\n                const cell = cells.shift();\n                if (cell) {\n                    cell.remove(localOptions);\n                }\n            }\n        }, localOptions);\n        return this;\n    }\n    addNode(metadata, options = {}) {\n        const node = Node.isNode(metadata) ? metadata : this.createNode(metadata);\n        this.addCell(node, options);\n        return node;\n    }\n    updateNode(metadata, options = {}) {\n        const node = this.createNode(metadata);\n        const prop = node.getProp();\n        node.dispose();\n        return this.updateCell(prop, options);\n    }\n    createNode(metadata) {\n        return Node.create(metadata);\n    }\n    addEdge(metadata, options = {}) {\n        const edge = Edge.isEdge(metadata) ? metadata : this.createEdge(metadata);\n        this.addCell(edge, options);\n        return edge;\n    }\n    createEdge(metadata) {\n        return Edge.create(metadata);\n    }\n    updateEdge(metadata, options = {}) {\n        const edge = this.createEdge(metadata);\n        const prop = edge.getProp();\n        edge.dispose();\n        return this.updateCell(prop, options);\n    }\n    addCell(cell, options = {}) {\n        if (Array.isArray(cell)) {\n            return this.addCells(cell, options);\n        }\n        if (!this.collection.has(cell) && !this.addings.has(cell)) {\n            this.addings.set(cell, true);\n            this.collection.add(this.prepareCell(cell, options), options);\n            cell.eachChild((child) => this.addCell(child, options));\n            this.addings.delete(cell);\n        }\n        return this;\n    }\n    addCells(cells, options = {}) {\n        const count = cells.length;\n        if (count === 0) {\n            return this;\n        }\n        const localOptions = Object.assign(Object.assign({}, options), { position: count - 1, maxPosition: count - 1 });\n        this.startBatch('add', Object.assign(Object.assign({}, localOptions), { cells }));\n        cells.forEach((cell) => {\n            this.addCell(cell, localOptions);\n            localOptions.position -= 1;\n        });\n        this.stopBatch('add', Object.assign(Object.assign({}, localOptions), { cells }));\n        return this;\n    }\n    updateCell(prop, options = {}) {\n        const existing = prop.id && this.getCell(prop.id);\n        if (existing) {\n            return this.batchUpdate('update', () => {\n                Object.entries(prop).forEach(([key, val]) => existing.setProp(key, val, options));\n                return true;\n            }, prop);\n        }\n        return false;\n    }\n    removeCell(obj, options = {}) {\n        const cell = typeof obj === 'string' ? this.getCell(obj) : obj;\n        if (cell && this.has(cell)) {\n            return this.collection.remove(cell, options);\n        }\n        return null;\n    }\n    updateCellId(cell, newId) {\n        if (cell.id === newId)\n            return;\n        this.startBatch('update', { id: newId });\n        cell.prop('id', newId);\n        const newCell = cell.clone({ keepId: true });\n        this.addCell(newCell);\n        // update connected edge terminal\n        const edges = this.getConnectedEdges(cell);\n        edges.forEach((edge) => {\n            const sourceCell = edge.getSourceCell();\n            const targetCell = edge.getTargetCell();\n            if (sourceCell === cell) {\n                edge.setSource(Object.assign(Object.assign({}, edge.getSource()), { cell: newId }));\n            }\n            if (targetCell === cell) {\n                edge.setTarget(Object.assign(Object.assign({}, edge.getTarget()), { cell: newId }));\n            }\n        });\n        this.removeCell(cell);\n        this.stopBatch('update', { id: newId });\n        return newCell;\n    }\n    removeCells(cells, options = {}) {\n        if (cells.length) {\n            return this.batchUpdate('remove', () => {\n                return cells.map((cell) => this.removeCell(cell, options));\n            });\n        }\n        return [];\n    }\n    removeConnectedEdges(cell, options = {}) {\n        const edges = this.getConnectedEdges(cell);\n        edges.forEach((edge) => {\n            edge.remove(options);\n        });\n        return edges;\n    }\n    disconnectConnectedEdges(cell, options = {}) {\n        const cellId = typeof cell === 'string' ? cell : cell.id;\n        this.getConnectedEdges(cell).forEach((edge) => {\n            const sourceCellId = edge.getSourceCellId();\n            const targetCellId = edge.getTargetCellId();\n            if (sourceCellId === cellId) {\n                edge.setSource({ x: 0, y: 0 }, options);\n            }\n            if (targetCellId === cellId) {\n                edge.setTarget({ x: 0, y: 0 }, options);\n            }\n        });\n    }\n    has(obj) {\n        return this.collection.has(obj);\n    }\n    total() {\n        return this.collection.length;\n    }\n    indexOf(cell) {\n        return this.collection.indexOf(cell);\n    }\n    /**\n     * Returns a cell from the graph by its id.\n     */\n    getCell(id) {\n        return this.collection.get(id);\n    }\n    /**\n     * Returns all the nodes and edges in the graph.\n     */\n    getCells() {\n        return this.collection.toArray();\n    }\n    /**\n     * Returns the first cell (node or edge) in the graph. The first cell is\n     * defined as the cell with the lowest `zIndex`.\n     */\n    getFirstCell() {\n        return this.collection.first();\n    }\n    /**\n     * Returns the last cell (node or edge) in the graph. The last cell is\n     * defined as the cell with the highest `zIndex`.\n     */\n    getLastCell() {\n        return this.collection.last();\n    }\n    /**\n     * Returns the lowest `zIndex` value in the graph.\n     */\n    getMinZIndex() {\n        const first = this.collection.first();\n        return first ? first.getZIndex() || 0 : 0;\n    }\n    /**\n     * Returns the highest `zIndex` value in the graph.\n     */\n    getMaxZIndex() {\n        const last = this.collection.last();\n        return last ? last.getZIndex() || 0 : 0;\n    }\n    getCellsFromCache(cache) {\n        return cache\n            ? Object.keys(cache)\n                .map((id) => this.getCell(id))\n                .filter((cell) => cell != null)\n            : [];\n    }\n    /**\n     * Returns all the nodes in the graph.\n     */\n    getNodes() {\n        return this.getCellsFromCache(this.nodes);\n    }\n    /**\n     * Returns all the edges in the graph.\n     */\n    getEdges() {\n        return this.getCellsFromCache(this.edges);\n    }\n    /**\n     * Returns all outgoing edges for the node.\n     */\n    getOutgoingEdges(cell) {\n        const cellId = typeof cell === 'string' ? cell : cell.id;\n        const cellIds = this.outgoings[cellId];\n        return cellIds\n            ? cellIds\n                .map((id) => this.getCell(id))\n                .filter((cell) => cell && cell.isEdge())\n            : null;\n    }\n    /**\n     * Returns all incoming edges for the node.\n     */\n    getIncomingEdges(cell) {\n        const cellId = typeof cell === 'string' ? cell : cell.id;\n        const cellIds = this.incomings[cellId];\n        return cellIds\n            ? cellIds\n                .map((id) => this.getCell(id))\n                .filter((cell) => cell && cell.isEdge())\n            : null;\n    }\n    /**\n     * Returns edges connected with cell.\n     */\n    getConnectedEdges(cell, options = {}) {\n        const result = [];\n        const node = typeof cell === 'string' ? this.getCell(cell) : cell;\n        if (node == null) {\n            return result;\n        }\n        const cache = {};\n        const indirect = options.indirect;\n        let incoming = options.incoming;\n        let outgoing = options.outgoing;\n        if (incoming == null && outgoing == null) {\n            incoming = outgoing = true;\n        }\n        const collect = (cell, isOutgoing) => {\n            const edges = isOutgoing\n                ? this.getOutgoingEdges(cell)\n                : this.getIncomingEdges(cell);\n            if (edges != null) {\n                edges.forEach((edge) => {\n                    if (cache[edge.id]) {\n                        return;\n                    }\n                    result.push(edge);\n                    cache[edge.id] = true;\n                    if (indirect) {\n                        if (incoming) {\n                            collect(edge, false);\n                        }\n                        if (outgoing) {\n                            collect(edge, true);\n                        }\n                    }\n                });\n            }\n            if (indirect && cell.isEdge()) {\n                const terminal = isOutgoing\n                    ? cell.getTargetCell()\n                    : cell.getSourceCell();\n                if (terminal && terminal.isEdge()) {\n                    if (!cache[terminal.id]) {\n                        result.push(terminal);\n                        collect(terminal, isOutgoing);\n                    }\n                }\n            }\n        };\n        if (outgoing) {\n            collect(node, true);\n        }\n        if (incoming) {\n            collect(node, false);\n        }\n        if (options.deep) {\n            const descendants = node.getDescendants({ deep: true });\n            const embedsCache = {};\n            descendants.forEach((cell) => {\n                if (cell.isNode()) {\n                    embedsCache[cell.id] = true;\n                }\n            });\n            const collectSub = (cell, isOutgoing) => {\n                const edges = isOutgoing\n                    ? this.getOutgoingEdges(cell.id)\n                    : this.getIncomingEdges(cell.id);\n                if (edges != null) {\n                    edges.forEach((edge) => {\n                        if (!cache[edge.id]) {\n                            const sourceCell = edge.getSourceCell();\n                            const targetCell = edge.getTargetCell();\n                            if (!options.enclosed &&\n                                sourceCell &&\n                                embedsCache[sourceCell.id] &&\n                                targetCell &&\n                                embedsCache[targetCell.id]) {\n                                return;\n                            }\n                            result.push(edge);\n                            cache[edge.id] = true;\n                        }\n                    });\n                }\n            };\n            descendants.forEach((cell) => {\n                if (cell.isEdge()) {\n                    return;\n                }\n                if (outgoing) {\n                    collectSub(cell, true);\n                }\n                if (incoming) {\n                    collectSub(cell, false);\n                }\n            });\n        }\n        return result;\n    }\n    isBoundary(cell, isOrigin) {\n        const node = typeof cell === 'string' ? this.getCell(cell) : cell;\n        const arr = isOrigin\n            ? this.getIncomingEdges(node)\n            : this.getOutgoingEdges(node);\n        return arr == null || arr.length === 0;\n    }\n    getBoundaryNodes(isOrigin) {\n        const result = [];\n        Object.keys(this.nodes).forEach((nodeId) => {\n            if (this.isBoundary(nodeId, isOrigin)) {\n                const node = this.getCell(nodeId);\n                if (node) {\n                    result.push(node);\n                }\n            }\n        });\n        return result;\n    }\n    /**\n     * Returns an array of all the roots of the graph.\n     */\n    getRoots() {\n        return this.getBoundaryNodes(true);\n    }\n    /**\n     * Returns an array of all the leafs of the graph.\n     */\n    getLeafs() {\n        return this.getBoundaryNodes(false);\n    }\n    /**\n     * Returns `true` if the node is a root node, i.e. there is no edges\n     * coming to the node.\n     */\n    isRoot(cell) {\n        return this.isBoundary(cell, true);\n    }\n    /**\n     * Returns `true` if the node is a leaf node, i.e. there is no edges\n     * going out from the node.\n     */\n    isLeaf(cell) {\n        return this.isBoundary(cell, false);\n    }\n    /**\n     * Returns all the neighbors of node in the graph. Neighbors are all\n     * the nodes connected to node via either incoming or outgoing edge.\n     */\n    getNeighbors(cell, options = {}) {\n        let incoming = options.incoming;\n        let outgoing = options.outgoing;\n        if (incoming == null && outgoing == null) {\n            incoming = outgoing = true;\n        }\n        const edges = this.getConnectedEdges(cell, options);\n        const map = edges.reduce((memo, edge) => {\n            const hasLoop = edge.hasLoop(options);\n            const sourceCell = edge.getSourceCell();\n            const targetCell = edge.getTargetCell();\n            if (incoming &&\n                sourceCell &&\n                sourceCell.isNode() &&\n                !memo[sourceCell.id]) {\n                if (hasLoop ||\n                    (sourceCell !== cell &&\n                        (!options.deep || !sourceCell.isDescendantOf(cell)))) {\n                    memo[sourceCell.id] = sourceCell;\n                }\n            }\n            if (outgoing &&\n                targetCell &&\n                targetCell.isNode() &&\n                !memo[targetCell.id]) {\n                if (hasLoop ||\n                    (targetCell !== cell &&\n                        (!options.deep || !targetCell.isDescendantOf(cell)))) {\n                    memo[targetCell.id] = targetCell;\n                }\n            }\n            return memo;\n        }, {});\n        if (cell.isEdge()) {\n            if (incoming) {\n                const sourceCell = cell.getSourceCell();\n                if (sourceCell && sourceCell.isNode() && !map[sourceCell.id]) {\n                    map[sourceCell.id] = sourceCell;\n                }\n            }\n            if (outgoing) {\n                const targetCell = cell.getTargetCell();\n                if (targetCell && targetCell.isNode() && !map[targetCell.id]) {\n                    map[targetCell.id] = targetCell;\n                }\n            }\n        }\n        return Object.keys(map).map((id) => map[id]);\n    }\n    /**\n     * Returns `true` if `cell2` is a neighbor of `cell1`.\n     */\n    isNeighbor(cell1, cell2, options = {}) {\n        let incoming = options.incoming;\n        let outgoing = options.outgoing;\n        if (incoming == null && outgoing == null) {\n            incoming = outgoing = true;\n        }\n        return this.getConnectedEdges(cell1, options).some((edge) => {\n            const sourceCell = edge.getSourceCell();\n            const targetCell = edge.getTargetCell();\n            if (incoming && sourceCell && sourceCell.id === cell2.id) {\n                return true;\n            }\n            if (outgoing && targetCell && targetCell.id === cell2.id) {\n                return true;\n            }\n            return false;\n        });\n    }\n    getSuccessors(cell, options = {}) {\n        const successors = [];\n        this.search(cell, (curr, distance) => {\n            if (curr !== cell && this.matchDistance(distance, options.distance)) {\n                successors.push(curr);\n            }\n        }, Object.assign(Object.assign({}, options), { outgoing: true }));\n        return successors;\n    }\n    /**\n     * Returns `true` if `cell2` is a successor of `cell1`.\n     */\n    isSuccessor(cell1, cell2, options = {}) {\n        let result = false;\n        this.search(cell1, (curr, distance) => {\n            if (curr === cell2 &&\n                curr !== cell1 &&\n                this.matchDistance(distance, options.distance)) {\n                result = true;\n                return false;\n            }\n        }, Object.assign(Object.assign({}, options), { outgoing: true }));\n        return result;\n    }\n    getPredecessors(cell, options = {}) {\n        const predecessors = [];\n        this.search(cell, (curr, distance) => {\n            if (curr !== cell && this.matchDistance(distance, options.distance)) {\n                predecessors.push(curr);\n            }\n        }, Object.assign(Object.assign({}, options), { incoming: true }));\n        return predecessors;\n    }\n    /**\n     * Returns `true` if `cell2` is a predecessor of `cell1`.\n     */\n    isPredecessor(cell1, cell2, options = {}) {\n        let result = false;\n        this.search(cell1, (curr, distance) => {\n            if (curr === cell2 &&\n                curr !== cell1 &&\n                this.matchDistance(distance, options.distance)) {\n                result = true;\n                return false;\n            }\n        }, Object.assign(Object.assign({}, options), { incoming: true }));\n        return result;\n    }\n    matchDistance(distance, preset) {\n        if (preset == null) {\n            return true;\n        }\n        if (typeof preset === 'function') {\n            return preset(distance);\n        }\n        if (Array.isArray(preset) && preset.includes(distance)) {\n            return true;\n        }\n        return distance === preset;\n    }\n    /**\n     * Returns the common ancestor of the passed cells.\n     */\n    getCommonAncestor(...cells) {\n        const arr = [];\n        cells.forEach((item) => {\n            if (item) {\n                if (Array.isArray(item)) {\n                    arr.push(...item);\n                }\n                else {\n                    arr.push(item);\n                }\n            }\n        });\n        return Cell.getCommonAncestor(...arr);\n    }\n    /**\n     * Returns an array of cells that result from finding nodes/edges that\n     * are connected to any of the cells in the cells array. This function\n     * loops over cells and if the current cell is a edge, it collects its\n     * source/target nodes; if it is an node, it collects its incoming and\n     * outgoing edges if both the edge terminal (source/target) are in the\n     * cells array.\n     */\n    getSubGraph(cells, options = {}) {\n        const subgraph = [];\n        const cache = {};\n        const nodes = [];\n        const edges = [];\n        const collect = (cell) => {\n            if (!cache[cell.id]) {\n                subgraph.push(cell);\n                cache[cell.id] = cell;\n                if (cell.isEdge()) {\n                    edges.push(cell);\n                }\n                if (cell.isNode()) {\n                    nodes.push(cell);\n                }\n            }\n        };\n        cells.forEach((cell) => {\n            collect(cell);\n            if (options.deep) {\n                const descendants = cell.getDescendants({ deep: true });\n                descendants.forEach((descendant) => collect(descendant));\n            }\n        });\n        edges.forEach((edge) => {\n            // For edges, include their source & target\n            const sourceCell = edge.getSourceCell();\n            const targetCell = edge.getTargetCell();\n            if (sourceCell && !cache[sourceCell.id]) {\n                subgraph.push(sourceCell);\n                cache[sourceCell.id] = sourceCell;\n                if (sourceCell.isNode()) {\n                    nodes.push(sourceCell);\n                }\n            }\n            if (targetCell && !cache[targetCell.id]) {\n                subgraph.push(targetCell);\n                cache[targetCell.id] = targetCell;\n                if (targetCell.isNode()) {\n                    nodes.push(targetCell);\n                }\n            }\n        });\n        nodes.forEach((node) => {\n            // For nodes, include their connected edges if their source/target\n            // is in the subgraph.\n            const edges = this.getConnectedEdges(node, options);\n            edges.forEach((edge) => {\n                const sourceCell = edge.getSourceCell();\n                const targetCell = edge.getTargetCell();\n                if (!cache[edge.id] &&\n                    sourceCell &&\n                    cache[sourceCell.id] &&\n                    targetCell &&\n                    cache[targetCell.id]) {\n                    subgraph.push(edge);\n                    cache[edge.id] = edge;\n                }\n            });\n        });\n        return subgraph;\n    }\n    /**\n     * Clones the whole subgraph (including all the connected links whose\n     * source/target is in the subgraph). If `options.deep` is `true`, also\n     * take into account all the embedded cells of all the subgraph cells.\n     *\n     * Returns a map of the form: { [original cell ID]: [clone] }.\n     */\n    cloneSubGraph(cells, options = {}) {\n        const subgraph = this.getSubGraph(cells, options);\n        return this.cloneCells(subgraph);\n    }\n    cloneCells(cells) {\n        return Cell.cloneCells(cells);\n    }\n    getNodesFromPoint(x, y) {\n        const p = typeof x === 'number' ? { x, y: y || 0 } : x;\n        return this.getNodes().filter((node) => {\n            return node.getBBox().containsPoint(p);\n        });\n    }\n    getNodesInArea(x, y, w, h, options) {\n        const rect = typeof x === 'number'\n            ? new Rectangle(x, y, w, h)\n            : Rectangle.create(x);\n        const opts = typeof x === 'number' ? options : y;\n        const strict = opts && opts.strict;\n        return this.getNodes().filter((node) => {\n            const bbox = node.getBBox();\n            return strict ? rect.containsRect(bbox) : rect.isIntersectWithRect(bbox);\n        });\n    }\n    getEdgesInArea(x, y, w, h, options) {\n        const rect = typeof x === 'number'\n            ? new Rectangle(x, y, w, h)\n            : Rectangle.create(x);\n        const opts = typeof x === 'number' ? options : y;\n        const strict = opts && opts.strict;\n        return this.getEdges().filter((edge) => {\n            const bbox = edge.getBBox();\n            if (bbox.width === 0) {\n                bbox.inflate(1, 0);\n            }\n            else if (bbox.height === 0) {\n                bbox.inflate(0, 1);\n            }\n            return strict ? rect.containsRect(bbox) : rect.isIntersectWithRect(bbox);\n        });\n    }\n    getNodesUnderNode(node, options = {}) {\n        const bbox = node.getBBox();\n        const nodes = options.by == null || options.by === 'bbox'\n            ? this.getNodesInArea(bbox)\n            : this.getNodesFromPoint(bbox[options.by]);\n        return nodes.filter((curr) => node.id !== curr.id && !curr.isDescendantOf(node));\n    }\n    /**\n     * Returns the bounding box that surrounds all cells in the graph.\n     */\n    getAllCellsBBox() {\n        return this.getCellsBBox(this.getCells());\n    }\n    /**\n     * Returns the bounding box that surrounds all the given cells.\n     */\n    getCellsBBox(cells, options = {}) {\n        return Cell.getCellsBBox(cells, options);\n    }\n    // #region search\n    search(cell, iterator, options = {}) {\n        if (options.breadthFirst) {\n            this.breadthFirstSearch(cell, iterator, options);\n        }\n        else {\n            this.depthFirstSearch(cell, iterator, options);\n        }\n    }\n    breadthFirstSearch(cell, iterator, options = {}) {\n        const queue = [];\n        const visited = {};\n        const distance = {};\n        queue.push(cell);\n        distance[cell.id] = 0;\n        while (queue.length > 0) {\n            const next = queue.shift();\n            if (next == null || visited[next.id]) {\n                continue;\n            }\n            visited[next.id] = true;\n            if (FunctionExt.call(iterator, this, next, distance[next.id]) === false) {\n                continue;\n            }\n            const neighbors = this.getNeighbors(next, options);\n            neighbors.forEach((neighbor) => {\n                distance[neighbor.id] = distance[next.id] + 1;\n                queue.push(neighbor);\n            });\n        }\n    }\n    depthFirstSearch(cell, iterator, options = {}) {\n        const queue = [];\n        const visited = {};\n        const distance = {};\n        queue.push(cell);\n        distance[cell.id] = 0;\n        while (queue.length > 0) {\n            const next = queue.pop();\n            if (next == null || visited[next.id]) {\n                continue;\n            }\n            visited[next.id] = true;\n            if (FunctionExt.call(iterator, this, next, distance[next.id]) === false) {\n                continue;\n            }\n            const neighbors = this.getNeighbors(next, options);\n            const lastIndex = queue.length;\n            neighbors.forEach((neighbor) => {\n                distance[neighbor.id] = distance[next.id] + 1;\n                queue.splice(lastIndex, 0, neighbor);\n            });\n        }\n    }\n    // #endregion\n    // #region shortest path\n    /** *\n     * Returns an array of IDs of nodes on the shortest\n     * path between source and target.\n     */\n    getShortestPath(source, target, options = {}) {\n        const adjacencyList = {};\n        this.getEdges().forEach((edge) => {\n            const sourceId = edge.getSourceCellId();\n            const targetId = edge.getTargetCellId();\n            if (sourceId && targetId) {\n                if (!adjacencyList[sourceId]) {\n                    adjacencyList[sourceId] = [];\n                }\n                if (!adjacencyList[targetId]) {\n                    adjacencyList[targetId] = [];\n                }\n                adjacencyList[sourceId].push(targetId);\n                if (!options.directed) {\n                    adjacencyList[targetId].push(sourceId);\n                }\n            }\n        });\n        const sourceId = typeof source === 'string' ? source : source.id;\n        const previous = Dijkstra.run(adjacencyList, sourceId, options.weight);\n        const path = [];\n        let targetId = typeof target === 'string' ? target : target.id;\n        if (previous[targetId]) {\n            path.push(targetId);\n        }\n        while ((targetId = previous[targetId])) {\n            path.unshift(targetId);\n        }\n        return path;\n    }\n    // #endregion\n    // #region transform\n    /**\n     * Translate all cells in the graph by `tx` and `ty` pixels.\n     */\n    translate(tx, ty, options) {\n        this.getCells()\n            .filter((cell) => !cell.hasParent())\n            .forEach((cell) => cell.translate(tx, ty, options));\n        return this;\n    }\n    resize(width, height, options) {\n        return this.resizeCells(width, height, this.getCells(), options);\n    }\n    resizeCells(width, height, cells, options = {}) {\n        const bbox = this.getCellsBBox(cells);\n        if (bbox) {\n            const sx = Math.max(width / bbox.width, 0);\n            const sy = Math.max(height / bbox.height, 0);\n            const origin = bbox.getOrigin();\n            cells.forEach((cell) => cell.scale(sx, sy, origin, options));\n        }\n        return this;\n    }\n    // #endregion\n    // #region serialize/deserialize\n    toJSON(options = {}) {\n        return Model.toJSON(this.getCells(), options);\n    }\n    parseJSON(data) {\n        return Model.fromJSON(data);\n    }\n    fromJSON(data, options = {}) {\n        const cells = this.parseJSON(data);\n        this.resetCells(cells, options);\n        return this;\n    }\n    // #endregion\n    // #region batch\n    startBatch(name, data = {}) {\n        this.batches[name] = (this.batches[name] || 0) + 1;\n        this.notify('batch:start', { name, data });\n        return this;\n    }\n    stopBatch(name, data = {}) {\n        this.batches[name] = (this.batches[name] || 0) - 1;\n        this.notify('batch:stop', { name, data });\n        return this;\n    }\n    batchUpdate(name, execute, data = {}) {\n        this.startBatch(name, data);\n        const result = execute();\n        this.stopBatch(name, data);\n        return result;\n    }\n    hasActiveBatch(name = Object.keys(this.batches)) {\n        const names = Array.isArray(name) ? name : [name];\n        return names.some((batch) => this.batches[batch] > 0);\n    }\n    // #endregion\n    dispose() {\n        this.collection.dispose();\n    }\n}\n__decorate([\n    Model.dispose()\n], Model.prototype, \"dispose\", null);\n(function (Model) {\n    Model.toStringTag = `X6.${Model.name}`;\n    function isModel(instance) {\n        if (instance == null) {\n            return false;\n        }\n        if (instance instanceof Model) {\n            return true;\n        }\n        const tag = instance[Symbol.toStringTag];\n        const model = instance;\n        if ((tag == null || tag === Model.toStringTag) &&\n            typeof model.addNode === 'function' &&\n            typeof model.addEdge === 'function' &&\n            model.collection != null) {\n            return true;\n        }\n        return false;\n    }\n    Model.isModel = isModel;\n})(Model || (Model = {}));\n(function (Model) {\n    function toJSON(cells, options = {}) {\n        return {\n            cells: cells.map((cell) => cell.toJSON(options)),\n        };\n    }\n    Model.toJSON = toJSON;\n    function fromJSON(data) {\n        const cells = [];\n        if (Array.isArray(data)) {\n            cells.push(...data);\n        }\n        else {\n            if (data.cells) {\n                cells.push(...data.cells);\n            }\n            if (data.nodes) {\n                data.nodes.forEach((node) => {\n                    if (node.shape == null) {\n                        node.shape = 'rect';\n                    }\n                    cells.push(node);\n                });\n            }\n            if (data.edges) {\n                data.edges.forEach((edge) => {\n                    if (edge.shape == null) {\n                        edge.shape = 'edge';\n                    }\n                    cells.push(edge);\n                });\n            }\n        }\n        return cells.map((cell) => {\n            const type = cell.shape;\n            if (type) {\n                if (Node.registry.exist(type)) {\n                    return Node.create(cell);\n                }\n                if (Edge.registry.exist(type)) {\n                    return Edge.create(cell);\n                }\n            }\n            throw new Error('The `shape` should be specified when creating a node/edge instance');\n        });\n    }\n    Model.fromJSON = fromJSON;\n})(Model || (Model = {}));\n//# sourceMappingURL=model.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { ObjectExt } from '@antv/x6-common';\nimport { Node } from '../model';\nexport class Base extends Node {\n    get label() {\n        return this.getLabel();\n    }\n    set label(val) {\n        this.setLabel(val);\n    }\n    getLabel() {\n        return this.getAttrByPath('text/text');\n    }\n    setLabel(label, options) {\n        if (label == null) {\n            this.removeLabel();\n        }\n        else {\n            this.setAttrByPath('text/text', label, options);\n        }\n        return this;\n    }\n    removeLabel() {\n        this.removeAttrByPath('text/text');\n        return this;\n    }\n}\n(function (Base) {\n    Base.bodyAttr = {\n        fill: '#ffffff',\n        stroke: '#333333',\n        strokeWidth: 2,\n    };\n    Base.labelAttr = {\n        fontSize: 14,\n        fill: '#000000',\n        refX: 0.5,\n        refY: 0.5,\n        textAnchor: 'middle',\n        textVerticalAnchor: 'middle',\n        fontFamily: 'Arial, helvetica, sans-serif',\n    };\n    Base.config({\n        attrs: { text: Object.assign({}, Base.labelAttr) },\n        propHooks(metadata) {\n            const { label } = metadata, others = __rest(metadata, [\"label\"]);\n            if (label) {\n                ObjectExt.setByPath(others, 'attrs/text/text', label);\n            }\n            return others;\n        },\n        visible: true,\n    });\n})(Base || (Base = {}));\n//# sourceMappingURL=base.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { ObjectExt } from '@antv/x6-common';\nimport { Base } from './base';\nexport function getMarkup(tagName, selector = 'body') {\n    return [\n        {\n            tagName,\n            selector,\n        },\n        {\n            tagName: 'text',\n            selector: 'label',\n        },\n    ];\n}\nexport function getImageUrlHook(attrName = 'xlink:href') {\n    const hook = (metadata) => {\n        const { imageUrl, imageWidth, imageHeight } = metadata, others = __rest(metadata, [\"imageUrl\", \"imageWidth\", \"imageHeight\"]);\n        if (imageUrl != null || imageWidth != null || imageHeight != null) {\n            const apply = () => {\n                if (others.attrs) {\n                    const image = others.attrs.image;\n                    if (imageUrl != null) {\n                        image[attrName] = imageUrl;\n                    }\n                    if (imageWidth != null) {\n                        image.width = imageWidth;\n                    }\n                    if (imageHeight != null) {\n                        image.height = imageHeight;\n                    }\n                    others.attrs.image = image;\n                }\n            };\n            if (others.attrs) {\n                if (others.attrs.image == null) {\n                    others.attrs.image = {};\n                }\n                apply();\n            }\n            else {\n                others.attrs = {\n                    image: {},\n                };\n                apply();\n            }\n        }\n        return others;\n    };\n    return hook;\n}\nexport function createShape(shape, config, options = {}) {\n    const defaults = {\n        constructorName: shape,\n        markup: getMarkup(shape, options.selector),\n        attrs: {\n            [shape]: Object.assign({}, Base.bodyAttr),\n        },\n    };\n    const base = options.parent || Base;\n    return base.define(ObjectExt.merge(defaults, config, { shape }));\n}\n//# sourceMappingURL=util.js.map","import { createShape } from './util';\nexport const Rect = createShape('rect', {\n    attrs: {\n        body: {\n            refWidth: '100%',\n            refHeight: '100%',\n        },\n    },\n});\n//# sourceMappingURL=rect.js.map","import { Edge as EdgeBase } from '../model/edge';\nexport const Edge = EdgeBase.define({\n    shape: 'edge',\n    markup: [\n        {\n            tagName: 'path',\n            selector: 'wrap',\n            groupSelector: 'lines',\n            attrs: {\n                fill: 'none',\n                cursor: 'pointer',\n                stroke: 'transparent',\n                strokeLinecap: 'round',\n            },\n        },\n        {\n            tagName: 'path',\n            selector: 'line',\n            groupSelector: 'lines',\n            attrs: {\n                fill: 'none',\n                pointerEvents: 'none',\n            },\n        },\n    ],\n    attrs: {\n        lines: {\n            connection: true,\n            strokeLinejoin: 'round',\n        },\n        wrap: {\n            strokeWidth: 10,\n        },\n        line: {\n            stroke: '#333',\n            strokeWidth: 2,\n            targetMarker: 'classic',\n        },\n    },\n});\n//# sourceMappingURL=edge.js.map","import { createShape } from './util';\nexport const Ellipse = createShape('ellipse', {\n    attrs: {\n        body: {\n            refCx: '50%',\n            refCy: '50%',\n            refRx: '50%',\n            refRy: '50%',\n        },\n    },\n});\n//# sourceMappingURL=ellipse.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Point } from '@antv/x6-geometry';\nimport { ObjectExt } from '@antv/x6-common';\nimport { Base } from './base';\nexport class Poly extends Base {\n    get points() {\n        return this.getPoints();\n    }\n    set points(pts) {\n        this.setPoints(pts);\n    }\n    getPoints() {\n        return this.getAttrByPath('body/refPoints');\n    }\n    setPoints(points, options) {\n        if (points == null) {\n            this.removePoints();\n        }\n        else {\n            this.setAttrByPath('body/refPoints', Poly.pointsToString(points), options);\n        }\n        return this;\n    }\n    removePoints() {\n        this.removeAttrByPath('body/refPoints');\n        return this;\n    }\n}\n(function (Poly) {\n    function pointsToString(points) {\n        return typeof points === 'string'\n            ? points\n            : points\n                .map((p) => {\n                if (Array.isArray(p)) {\n                    return p.join(',');\n                }\n                if (Point.isPointLike(p)) {\n                    return `${p.x}, ${p.y}`;\n                }\n                return '';\n            })\n                .join(' ');\n    }\n    Poly.pointsToString = pointsToString;\n    Poly.config({\n        propHooks(metadata) {\n            const { points } = metadata, others = __rest(metadata, [\"points\"]);\n            if (points) {\n                const data = pointsToString(points);\n                if (data) {\n                    ObjectExt.setByPath(others, 'attrs/body/refPoints', data);\n                }\n            }\n            return others;\n        },\n    });\n})(Poly || (Poly = {}));\n//# sourceMappingURL=poly.js.map","import { Poly } from './poly';\nimport { createShape } from './util';\nexport const Polygon = createShape('polygon', {}, { parent: Poly });\n//# sourceMappingURL=polygon.js.map","import { Poly } from './poly';\nimport { createShape } from './util';\nexport const Polyline = createShape('polyline', {}, { parent: Poly });\n//# sourceMappingURL=polyline.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { ObjectExt } from '@antv/x6-common';\nimport { Base } from './base';\nexport const Path = Base.define({\n    shape: 'path',\n    markup: [\n        {\n            tagName: 'rect',\n            selector: 'bg',\n        },\n        {\n            tagName: 'path',\n            selector: 'body',\n        },\n        {\n            tagName: 'text',\n            selector: 'label',\n        },\n    ],\n    attrs: {\n        bg: {\n            refWidth: '100%',\n            refHeight: '100%',\n            fill: 'none',\n            stroke: 'none',\n            pointerEvents: 'all',\n        },\n        body: {\n            fill: 'none',\n            stroke: '#000',\n            strokeWidth: 2,\n        },\n    },\n    propHooks(metadata) {\n        const { path } = metadata, others = __rest(metadata, [\"path\"]);\n        if (path) {\n            ObjectExt.setByPath(others, 'attrs/body/refD', path);\n        }\n        return others;\n    },\n});\n//# sourceMappingURL=path.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Platform, Dom, FunctionExt, ObjectExt } from '@antv/x6-common';\nimport { Attr } from '../registry';\nimport { Base } from './base';\nexport const TextBlock = Base.define({\n    shape: 'text-block',\n    markup: [\n        {\n            tagName: 'rect',\n            selector: 'body',\n        },\n        Platform.SUPPORT_FOREIGNOBJECT\n            ? {\n                tagName: 'foreignObject',\n                selector: 'foreignObject',\n                children: [\n                    {\n                        tagName: 'div',\n                        ns: Dom.ns.xhtml,\n                        selector: 'label',\n                        style: {\n                            width: '100%',\n                            height: '100%',\n                            position: 'static',\n                            backgroundColor: 'transparent',\n                            textAlign: 'center',\n                            margin: 0,\n                            padding: '0px 5px',\n                            boxSizing: 'border-box',\n                            display: 'flex',\n                            alignItems: 'center',\n                            justifyContent: 'center',\n                        },\n                    },\n                ],\n            }\n            : {\n                tagName: 'text',\n                selector: 'label',\n                attrs: {\n                    textAnchor: 'middle',\n                },\n            },\n    ],\n    attrs: {\n        body: Object.assign(Object.assign({}, Base.bodyAttr), { refWidth: '100%', refHeight: '100%' }),\n        foreignObject: {\n            refWidth: '100%',\n            refHeight: '100%',\n        },\n        label: {\n            style: {\n                fontSize: 14,\n            },\n        },\n    },\n    propHooks(metadata) {\n        const { text } = metadata, others = __rest(metadata, [\"text\"]);\n        if (text) {\n            ObjectExt.setByPath(others, 'attrs/label/text', text);\n        }\n        return others;\n    },\n    attrHooks: {\n        text: {\n            set(text, { cell, view, refBBox, elem, attrs }) {\n                if (elem instanceof HTMLElement) {\n                    elem.textContent = text;\n                }\n                else {\n                    // No foreign object\n                    const style = attrs.style || {};\n                    const wrapValue = { text, width: -5, height: '100%' };\n                    const wrapAttrs = Object.assign({ textVerticalAnchor: 'middle' }, style);\n                    const textWrap = Attr.presets.textWrap;\n                    FunctionExt.call(textWrap.set, this, wrapValue, {\n                        cell,\n                        view,\n                        elem,\n                        refBBox,\n                        attrs: wrapAttrs,\n                    });\n                    return { fill: style.color || null };\n                }\n            },\n            position(text, { refBBox, elem }) {\n                if (elem instanceof SVGElement) {\n                    return refBBox.getCenter();\n                }\n            },\n        },\n    },\n});\n//# sourceMappingURL=text-block.js.map","import { getImageUrlHook, createShape } from './util';\nexport const Image = createShape('image', {\n    attrs: {\n        image: {\n            refWidth: '100%',\n            refHeight: '100%',\n        },\n    },\n    propHooks: getImageUrlHook(),\n}, {\n    selector: 'image',\n});\n//# sourceMappingURL=image.js.map","import { createShape } from './util';\nexport const Circle = createShape('circle', {\n    attrs: {\n        body: {\n            refCx: '50%',\n            refCy: '50%',\n            refR: '50%',\n        },\n    },\n});\n//# sourceMappingURL=circle.js.map","import { ArrayExt, FunctionExt, Dom } from '@antv/x6-common';\nimport { Rectangle, Point, GeometryUtil } from '@antv/x6-geometry';\nimport { Config } from '../config';\nimport { Cell } from '../model/cell';\nimport { CellView } from './cell';\nimport { Markup } from './markup';\nexport class NodeView extends CellView {\n    constructor() {\n        super(...arguments);\n        this.portsCache = {};\n        // #endregion\n    }\n    get [Symbol.toStringTag]() {\n        return NodeView.toStringTag;\n    }\n    getContainerClassName() {\n        const classList = [\n            super.getContainerClassName(),\n            this.prefixClassName('node'),\n        ];\n        if (!this.can('nodeMovable')) {\n            classList.push(this.prefixClassName('node-immovable'));\n        }\n        return classList.join(' ');\n    }\n    updateClassName(e) {\n        const target = e.target;\n        if (target.hasAttribute('magnet')) {\n            // port\n            const className = this.prefixClassName('port-unconnectable');\n            if (this.can('magnetConnectable')) {\n                Dom.removeClass(target, className);\n            }\n            else {\n                Dom.addClass(target, className);\n            }\n        }\n        else {\n            // node\n            const className = this.prefixClassName('node-immovable');\n            if (this.can('nodeMovable')) {\n                this.removeClass(className);\n            }\n            else {\n                this.addClass(className);\n            }\n        }\n    }\n    isNodeView() {\n        return true;\n    }\n    confirmUpdate(flag, options = {}) {\n        let ret = flag;\n        if (this.hasAction(ret, 'ports')) {\n            this.removePorts();\n            this.cleanPortsCache();\n        }\n        if (this.hasAction(ret, 'render')) {\n            this.render();\n            ret = this.removeAction(ret, [\n                'render',\n                'update',\n                'resize',\n                'translate',\n                'rotate',\n                'ports',\n                'tools',\n            ]);\n        }\n        else {\n            ret = this.handleAction(ret, 'resize', () => this.resize(), 'update');\n            ret = this.handleAction(ret, 'update', () => this.update(), \n            // `update()` will render ports when useCSSSelectors are enabled\n            Config.useCSSSelector ? 'ports' : null);\n            ret = this.handleAction(ret, 'translate', () => this.translate());\n            ret = this.handleAction(ret, 'rotate', () => this.rotate());\n            ret = this.handleAction(ret, 'ports', () => this.renderPorts());\n            ret = this.handleAction(ret, 'tools', () => {\n                if (this.getFlag('tools') === flag) {\n                    this.renderTools();\n                }\n                else {\n                    this.updateTools(options);\n                }\n            });\n        }\n        return ret;\n    }\n    update(partialAttrs) {\n        this.cleanCache();\n        // When CSS selector strings are used, make sure no rule matches port nodes.\n        if (Config.useCSSSelector) {\n            this.removePorts();\n        }\n        const node = this.cell;\n        const size = node.getSize();\n        const attrs = node.getAttrs();\n        this.updateAttrs(this.container, attrs, {\n            attrs: partialAttrs === attrs ? null : partialAttrs,\n            rootBBox: new Rectangle(0, 0, size.width, size.height),\n            selectors: this.selectors,\n        });\n        if (Config.useCSSSelector) {\n            this.renderPorts();\n        }\n    }\n    renderMarkup() {\n        const markup = this.cell.markup;\n        if (markup) {\n            if (typeof markup === 'string') {\n                throw new TypeError('Not support string markup.');\n            }\n            return this.renderJSONMarkup(markup);\n        }\n        throw new TypeError('Invalid node markup.');\n    }\n    renderJSONMarkup(markup) {\n        const ret = this.parseJSONMarkup(markup, this.container);\n        this.selectors = ret.selectors;\n        this.container.appendChild(ret.fragment);\n    }\n    render() {\n        this.empty();\n        this.renderMarkup();\n        this.resize();\n        this.updateTransform();\n        if (!Config.useCSSSelector) {\n            this.renderPorts();\n        }\n        this.renderTools();\n        return this;\n    }\n    resize() {\n        if (this.cell.getAngle()) {\n            this.rotate();\n        }\n        this.update();\n    }\n    translate() {\n        this.updateTransform();\n    }\n    rotate() {\n        this.updateTransform();\n    }\n    getTranslationString() {\n        const position = this.cell.getPosition();\n        return `translate(${position.x},${position.y})`;\n    }\n    getRotationString() {\n        const angle = this.cell.getAngle();\n        if (angle) {\n            const size = this.cell.getSize();\n            return `rotate(${angle},${size.width / 2},${size.height / 2})`;\n        }\n    }\n    updateTransform() {\n        let transform = this.getTranslationString();\n        const rot = this.getRotationString();\n        if (rot) {\n            transform += ` ${rot}`;\n        }\n        this.container.setAttribute('transform', transform);\n    }\n    // #region ports\n    findPortElem(portId, selector) {\n        const cache = portId ? this.portsCache[portId] : null;\n        if (!cache) {\n            return null;\n        }\n        const portRoot = cache.portContentElement;\n        const portSelectors = cache.portContentSelectors || {};\n        return this.findOne(selector, portRoot, portSelectors);\n    }\n    cleanPortsCache() {\n        this.portsCache = {};\n    }\n    removePorts() {\n        Object.values(this.portsCache).forEach((cached) => {\n            Dom.remove(cached.portElement);\n        });\n    }\n    renderPorts() {\n        const container = this.container;\n        // References to rendered elements without z-index\n        const references = [];\n        container.childNodes.forEach((child) => {\n            references.push(child);\n        });\n        const parsedPorts = this.cell.getParsedPorts();\n        const portsGropsByZ = ArrayExt.groupBy(parsedPorts, 'zIndex');\n        const autoZIndexKey = 'auto';\n        // render non-z first\n        if (portsGropsByZ[autoZIndexKey]) {\n            portsGropsByZ[autoZIndexKey].forEach((port) => {\n                const portElement = this.getPortElement(port);\n                container.append(portElement);\n                references.push(portElement);\n            });\n        }\n        Object.keys(portsGropsByZ).forEach((key) => {\n            if (key !== autoZIndexKey) {\n                const zIndex = parseInt(key, 10);\n                this.appendPorts(portsGropsByZ[key], zIndex, references);\n            }\n        });\n        this.updatePorts();\n    }\n    appendPorts(ports, zIndex, refs) {\n        const elems = ports.map((p) => this.getPortElement(p));\n        if (refs[zIndex] || zIndex < 0) {\n            Dom.before(refs[Math.max(zIndex, 0)], elems);\n        }\n        else {\n            Dom.append(this.container, elems);\n        }\n    }\n    getPortElement(port) {\n        const cached = this.portsCache[port.id];\n        if (cached) {\n            return cached.portElement;\n        }\n        return this.createPortElement(port);\n    }\n    createPortElement(port) {\n        let renderResult = Markup.renderMarkup(this.cell.getPortContainerMarkup());\n        const portElement = renderResult.elem;\n        if (portElement == null) {\n            throw new Error('Invalid port container markup.');\n        }\n        renderResult = Markup.renderMarkup(this.getPortMarkup(port));\n        const portContentElement = renderResult.elem;\n        const portContentSelectors = renderResult.selectors;\n        if (portContentElement == null) {\n            throw new Error('Invalid port markup.');\n        }\n        this.setAttrs({\n            port: port.id,\n            'port-group': port.group,\n        }, portContentElement);\n        let portClass = 'x6-port';\n        if (port.group) {\n            portClass += ` x6-port-${port.group}`;\n        }\n        Dom.addClass(portElement, portClass);\n        Dom.addClass(portElement, 'x6-port');\n        Dom.addClass(portContentElement, 'x6-port-body');\n        portElement.appendChild(portContentElement);\n        let portSelectors = portContentSelectors;\n        let portLabelElement;\n        let portLabelSelectors;\n        const existLabel = this.existPortLabel(port);\n        if (existLabel) {\n            renderResult = Markup.renderMarkup(this.getPortLabelMarkup(port.label));\n            portLabelElement = renderResult.elem;\n            portLabelSelectors = renderResult.selectors;\n            if (portLabelElement == null) {\n                throw new Error('Invalid port label markup.');\n            }\n            if (portContentSelectors && portLabelSelectors) {\n                // eslint-disable-next-line\n                for (const key in portLabelSelectors) {\n                    if (portContentSelectors[key] && key !== this.rootSelector) {\n                        throw new Error('Selectors within port must be unique.');\n                    }\n                }\n                portSelectors = Object.assign(Object.assign({}, portContentSelectors), portLabelSelectors);\n            }\n            Dom.addClass(portLabelElement, 'x6-port-label');\n            portElement.appendChild(portLabelElement);\n        }\n        this.portsCache[port.id] = {\n            portElement,\n            portSelectors,\n            portLabelElement,\n            portLabelSelectors,\n            portContentElement,\n            portContentSelectors,\n        };\n        if (this.graph.options.onPortRendered) {\n            this.graph.options.onPortRendered({\n                port,\n                node: this.cell,\n                container: portElement,\n                selectors: portSelectors,\n                labelContainer: portLabelElement,\n                labelSelectors: portLabelSelectors,\n                contentContainer: portContentElement,\n                contentSelectors: portContentSelectors,\n            });\n        }\n        return portElement;\n    }\n    updatePorts() {\n        const groups = this.cell.getParsedGroups();\n        const groupList = Object.keys(groups);\n        if (groupList.length === 0) {\n            this.updatePortGroup();\n        }\n        else {\n            groupList.forEach((groupName) => this.updatePortGroup(groupName));\n        }\n    }\n    updatePortGroup(groupName) {\n        const bbox = Rectangle.fromSize(this.cell.getSize());\n        const metrics = this.cell.getPortsLayoutByGroup(groupName, bbox);\n        for (let i = 0, n = metrics.length; i < n; i += 1) {\n            const metric = metrics[i];\n            const portId = metric.portId;\n            const cached = this.portsCache[portId] || {};\n            const portLayout = metric.portLayout;\n            this.applyPortTransform(cached.portElement, portLayout);\n            if (metric.portAttrs != null) {\n                const options = {\n                    selectors: cached.portSelectors || {},\n                };\n                if (metric.portSize) {\n                    options.rootBBox = Rectangle.fromSize(metric.portSize);\n                }\n                this.updateAttrs(cached.portElement, metric.portAttrs, options);\n            }\n            const labelLayout = metric.labelLayout;\n            if (labelLayout && cached.portLabelElement) {\n                this.applyPortTransform(cached.portLabelElement, labelLayout, -(portLayout.angle || 0));\n                if (labelLayout.attrs) {\n                    const options = {\n                        selectors: cached.portLabelSelectors || {},\n                    };\n                    if (metric.labelSize) {\n                        options.rootBBox = Rectangle.fromSize(metric.labelSize);\n                    }\n                    this.updateAttrs(cached.portLabelElement, labelLayout.attrs, options);\n                }\n            }\n        }\n    }\n    applyPortTransform(element, layout, initialAngle = 0) {\n        const angle = layout.angle;\n        const position = layout.position;\n        const matrix = Dom.createSVGMatrix()\n            .rotate(initialAngle)\n            .translate(position.x || 0, position.y || 0)\n            .rotate(angle || 0);\n        Dom.transform(element, matrix, { absolute: true });\n    }\n    getPortMarkup(port) {\n        return port.markup || this.cell.portMarkup;\n    }\n    getPortLabelMarkup(label) {\n        return label.markup || this.cell.portLabelMarkup;\n    }\n    existPortLabel(port) {\n        return port.attrs && port.attrs.text;\n    }\n    getEventArgs(e, x, y) {\n        const view = this; // eslint-disable-line\n        const node = view.cell;\n        const cell = node;\n        if (x == null || y == null) {\n            return { e, view, node, cell };\n        }\n        return { e, x, y, view, node, cell };\n    }\n    getPortEventArgs(e, port, pos) {\n        const view = this; // eslint-disable-line\n        const node = view.cell;\n        const cell = node;\n        if (pos) {\n            return {\n                e,\n                x: pos.x,\n                y: pos.y,\n                view,\n                node,\n                cell,\n                port,\n            };\n        }\n        return { e, view, node, cell, port };\n    }\n    notifyMouseDown(e, x, y) {\n        super.onMouseDown(e, x, y);\n        this.notify('node:mousedown', this.getEventArgs(e, x, y));\n    }\n    notifyMouseMove(e, x, y) {\n        super.onMouseMove(e, x, y);\n        this.notify('node:mousemove', this.getEventArgs(e, x, y));\n    }\n    notifyMouseUp(e, x, y) {\n        super.onMouseUp(e, x, y);\n        this.notify('node:mouseup', this.getEventArgs(e, x, y));\n    }\n    notifyPortEvent(name, e, pos) {\n        const port = this.findAttr('port', e.target);\n        if (port) {\n            const originType = e.type;\n            if (name === 'node:port:mouseenter') {\n                e.type = 'mouseenter';\n            }\n            else if (name === 'node:port:mouseleave') {\n                e.type = 'mouseleave';\n            }\n            this.notify(name, this.getPortEventArgs(e, port, pos));\n            e.type = originType;\n        }\n    }\n    onClick(e, x, y) {\n        super.onClick(e, x, y);\n        this.notify('node:click', this.getEventArgs(e, x, y));\n        this.notifyPortEvent('node:port:click', e, { x, y });\n    }\n    onDblClick(e, x, y) {\n        super.onDblClick(e, x, y);\n        this.notify('node:dblclick', this.getEventArgs(e, x, y));\n        this.notifyPortEvent('node:port:dblclick', e, { x, y });\n    }\n    onContextMenu(e, x, y) {\n        super.onContextMenu(e, x, y);\n        this.notify('node:contextmenu', this.getEventArgs(e, x, y));\n        this.notifyPortEvent('node:port:contextmenu', e, { x, y });\n    }\n    onMouseDown(e, x, y) {\n        if (this.isPropagationStopped(e)) {\n            return;\n        }\n        this.notifyMouseDown(e, x, y);\n        this.notifyPortEvent('node:port:mousedown', e, { x, y });\n        this.startNodeDragging(e, x, y);\n    }\n    onMouseMove(e, x, y) {\n        const data = this.getEventData(e);\n        const action = data.action;\n        if (action === 'magnet') {\n            this.dragMagnet(e, x, y);\n        }\n        else {\n            if (action === 'move') {\n                const meta = data;\n                const view = meta.targetView || this;\n                view.dragNode(e, x, y);\n                view.notify('node:moving', {\n                    e,\n                    x,\n                    y,\n                    view,\n                    cell: view.cell,\n                    node: view.cell,\n                });\n            }\n            this.notifyMouseMove(e, x, y);\n            this.notifyPortEvent('node:port:mousemove', e, { x, y });\n        }\n        this.setEventData(e, data);\n    }\n    onMouseUp(e, x, y) {\n        const data = this.getEventData(e);\n        const action = data.action;\n        if (action === 'magnet') {\n            this.stopMagnetDragging(e, x, y);\n        }\n        else {\n            this.notifyMouseUp(e, x, y);\n            this.notifyPortEvent('node:port:mouseup', e, { x, y });\n            if (action === 'move') {\n                const meta = data;\n                const view = meta.targetView || this;\n                view.stopNodeDragging(e, x, y);\n            }\n        }\n        const magnet = data.targetMagnet;\n        if (magnet) {\n            this.onMagnetClick(e, magnet, x, y);\n        }\n        this.checkMouseleave(e);\n    }\n    onMouseOver(e) {\n        super.onMouseOver(e);\n        this.notify('node:mouseover', this.getEventArgs(e));\n        // mock mouseenter event,so we can get correct trigger time when move mouse from node to port\n        // wo also need to change e.type for use get correct event args\n        this.notifyPortEvent('node:port:mouseenter', e);\n        this.notifyPortEvent('node:port:mouseover', e);\n    }\n    onMouseOut(e) {\n        super.onMouseOut(e);\n        this.notify('node:mouseout', this.getEventArgs(e));\n        // mock mouseleave event,so we can get correct trigger time when move mouse from port to node\n        // wo also need to change e.type for use get correct event args\n        this.notifyPortEvent('node:port:mouseleave', e);\n        this.notifyPortEvent('node:port:mouseout', e);\n    }\n    onMouseEnter(e) {\n        this.updateClassName(e);\n        super.onMouseEnter(e);\n        this.notify('node:mouseenter', this.getEventArgs(e));\n    }\n    onMouseLeave(e) {\n        super.onMouseLeave(e);\n        this.notify('node:mouseleave', this.getEventArgs(e));\n    }\n    onMouseWheel(e, x, y, delta) {\n        super.onMouseWheel(e, x, y, delta);\n        this.notify('node:mousewheel', Object.assign({ delta }, this.getEventArgs(e, x, y)));\n    }\n    onMagnetClick(e, magnet, x, y) {\n        const graph = this.graph;\n        const count = graph.view.getMouseMovedCount(e);\n        if (count > graph.options.clickThreshold) {\n            return;\n        }\n        this.notify('node:magnet:click', Object.assign({ magnet }, this.getEventArgs(e, x, y)));\n    }\n    onMagnetDblClick(e, magnet, x, y) {\n        this.notify('node:magnet:dblclick', Object.assign({ magnet }, this.getEventArgs(e, x, y)));\n    }\n    onMagnetContextMenu(e, magnet, x, y) {\n        this.notify('node:magnet:contextmenu', Object.assign({ magnet }, this.getEventArgs(e, x, y)));\n    }\n    onMagnetMouseDown(e, magnet, x, y) {\n        this.startMagnetDragging(e, x, y);\n    }\n    onCustomEvent(e, name, x, y) {\n        this.notify('node:customevent', Object.assign({ name }, this.getEventArgs(e, x, y)));\n        super.onCustomEvent(e, name, x, y);\n    }\n    prepareEmbedding(e) {\n        const graph = this.graph;\n        const data = this.getEventData(e);\n        const node = data.cell || this.cell;\n        const view = graph.findViewByCell(node);\n        const localPoint = graph.snapToGrid(e.clientX, e.clientY);\n        this.notify('node:embed', {\n            e,\n            node,\n            view,\n            cell: node,\n            x: localPoint.x,\n            y: localPoint.y,\n            currentParent: node.getParent(),\n        });\n    }\n    processEmbedding(e, data) {\n        const cell = data.cell || this.cell;\n        const graph = data.graph || this.graph;\n        const options = graph.options.embedding;\n        const findParent = options.findParent;\n        let candidates = typeof findParent === 'function'\n            ? FunctionExt.call(findParent, graph, {\n                view: this,\n                node: this.cell,\n            }).filter((c) => {\n                return (Cell.isCell(c) &&\n                    this.cell.id !== c.id &&\n                    !c.isDescendantOf(this.cell));\n            })\n            : graph.model.getNodesUnderNode(cell, {\n                by: findParent,\n            });\n        // Picks the node with the highest `z` index\n        if (options.frontOnly) {\n            if (candidates.length > 0) {\n                const zIndexMap = ArrayExt.groupBy(candidates, 'zIndex');\n                const maxZIndex = ArrayExt.max(Object.keys(zIndexMap).map((z) => parseInt(z, 10)));\n                if (maxZIndex) {\n                    candidates = zIndexMap[maxZIndex];\n                }\n            }\n        }\n        // Filter the nodes which is invisiable\n        candidates = candidates.filter((candidate) => candidate.visible);\n        let newCandidateView = null;\n        const prevCandidateView = data.candidateEmbedView;\n        const validateEmbeding = options.validate;\n        for (let i = candidates.length - 1; i >= 0; i -= 1) {\n            const candidate = candidates[i];\n            if (prevCandidateView && prevCandidateView.cell.id === candidate.id) {\n                // candidate remains the same\n                newCandidateView = prevCandidateView;\n                break;\n            }\n            else {\n                const view = candidate.findView(graph);\n                if (validateEmbeding &&\n                    FunctionExt.call(validateEmbeding, graph, {\n                        child: this.cell,\n                        parent: view.cell,\n                        childView: this,\n                        parentView: view,\n                    })) {\n                    // flip to the new candidate\n                    newCandidateView = view;\n                    break;\n                }\n            }\n        }\n        this.clearEmbedding(data);\n        if (newCandidateView) {\n            newCandidateView.highlight(null, { type: 'embedding' });\n        }\n        data.candidateEmbedView = newCandidateView;\n        const localPoint = graph.snapToGrid(e.clientX, e.clientY);\n        this.notify('node:embedding', {\n            e,\n            cell,\n            node: cell,\n            view: graph.findViewByCell(cell),\n            x: localPoint.x,\n            y: localPoint.y,\n            currentParent: cell.getParent(),\n            candidateParent: newCandidateView ? newCandidateView.cell : null,\n        });\n    }\n    clearEmbedding(data) {\n        const candidateView = data.candidateEmbedView;\n        if (candidateView) {\n            candidateView.unhighlight(null, { type: 'embedding' });\n            data.candidateEmbedView = null;\n        }\n    }\n    finalizeEmbedding(e, data) {\n        this.graph.startBatch('embedding');\n        const cell = data.cell || this.cell;\n        const graph = data.graph || this.graph;\n        const view = graph.findViewByCell(cell);\n        const parent = cell.getParent();\n        const candidateView = data.candidateEmbedView;\n        if (candidateView) {\n            // Candidate view is chosen to become the parent of the node.\n            candidateView.unhighlight(null, { type: 'embedding' });\n            data.candidateEmbedView = null;\n            if (parent == null || parent.id !== candidateView.cell.id) {\n                candidateView.cell.insertChild(cell, undefined, { ui: true });\n            }\n        }\n        else if (parent) {\n            parent.unembed(cell, { ui: true });\n        }\n        graph.model.getConnectedEdges(cell, { deep: true }).forEach((edge) => {\n            edge.updateParent({ ui: true });\n        });\n        if (view && candidateView) {\n            const localPoint = graph.snapToGrid(e.clientX, e.clientY);\n            view.notify('node:embedded', {\n                e,\n                cell,\n                x: localPoint.x,\n                y: localPoint.y,\n                node: cell,\n                view: graph.findViewByCell(cell),\n                previousParent: parent,\n                currentParent: cell.getParent(),\n            });\n        }\n        this.graph.stopBatch('embedding');\n    }\n    getDelegatedView() {\n        let cell = this.cell;\n        let view = this; // eslint-disable-line\n        while (view) {\n            if (cell.isEdge()) {\n                break;\n            }\n            if (!cell.hasParent() || view.can('stopDelegateOnDragging')) {\n                return view;\n            }\n            cell = cell.getParent();\n            view = this.graph.findViewByCell(cell);\n        }\n        return null;\n    }\n    validateMagnet(cellView, magnet, e) {\n        if (magnet.getAttribute('magnet') !== 'passive') {\n            const validate = this.graph.options.connecting.validateMagnet;\n            if (validate) {\n                return FunctionExt.call(validate, this.graph, {\n                    e,\n                    magnet,\n                    view: cellView,\n                    cell: cellView.cell,\n                });\n            }\n            return true;\n        }\n        return false;\n    }\n    startMagnetDragging(e, x, y) {\n        if (!this.can('magnetConnectable')) {\n            return;\n        }\n        e.stopPropagation();\n        const magnet = e.currentTarget;\n        const graph = this.graph;\n        this.setEventData(e, {\n            targetMagnet: magnet,\n        });\n        if (this.validateMagnet(this, magnet, e)) {\n            if (graph.options.magnetThreshold <= 0) {\n                this.startConnectting(e, magnet, x, y);\n            }\n            this.setEventData(e, {\n                action: 'magnet',\n            });\n            this.stopPropagation(e);\n        }\n        else {\n            this.onMouseDown(e, x, y);\n        }\n        graph.view.delegateDragEvents(e, this);\n    }\n    startConnectting(e, magnet, x, y) {\n        this.graph.model.startBatch('add-edge');\n        const edgeView = this.createEdgeFromMagnet(magnet, x, y);\n        edgeView.setEventData(e, edgeView.prepareArrowheadDragging('target', {\n            x,\n            y,\n            isNewEdge: true,\n            fallbackAction: 'remove',\n        }));\n        this.setEventData(e, { edgeView });\n        edgeView.notifyMouseDown(e, x, y);\n    }\n    getDefaultEdge(sourceView, sourceMagnet) {\n        let edge;\n        const create = this.graph.options.connecting.createEdge;\n        if (create) {\n            edge = FunctionExt.call(create, this.graph, {\n                sourceMagnet,\n                sourceView,\n                sourceCell: sourceView.cell,\n            });\n        }\n        return edge;\n    }\n    createEdgeFromMagnet(magnet, x, y) {\n        const graph = this.graph;\n        const model = graph.model;\n        const edge = this.getDefaultEdge(this, magnet);\n        edge.setSource(Object.assign(Object.assign({}, edge.getSource()), this.getEdgeTerminal(magnet, x, y, edge, 'source')));\n        edge.setTarget(Object.assign(Object.assign({}, edge.getTarget()), { x, y }));\n        edge.addTo(model, { async: false, ui: true });\n        return edge.findView(graph);\n    }\n    dragMagnet(e, x, y) {\n        const data = this.getEventData(e);\n        const edgeView = data.edgeView;\n        if (edgeView) {\n            edgeView.onMouseMove(e, x, y);\n            this.autoScrollGraph(e.clientX, e.clientY);\n        }\n        else {\n            const graph = this.graph;\n            const magnetThreshold = graph.options.magnetThreshold;\n            const currentTarget = this.getEventTarget(e);\n            const targetMagnet = data.targetMagnet;\n            // magnetThreshold when the pointer leaves the magnet\n            if (magnetThreshold === 'onleave') {\n                if (targetMagnet === currentTarget ||\n                    targetMagnet.contains(currentTarget)) {\n                    return;\n                }\n                // eslint-disable-next-line no-lonely-if\n            }\n            else {\n                // magnetThreshold defined as a number of movements\n                if (graph.view.getMouseMovedCount(e) <= magnetThreshold) {\n                    return;\n                }\n            }\n            this.startConnectting(e, targetMagnet, x, y);\n        }\n    }\n    stopMagnetDragging(e, x, y) {\n        const data = this.eventData(e);\n        const edgeView = data.edgeView;\n        if (edgeView) {\n            edgeView.onMouseUp(e, x, y);\n            this.graph.model.stopBatch('add-edge');\n        }\n    }\n    notifyUnhandledMouseDown(e, x, y) {\n        this.notify('node:unhandled:mousedown', {\n            e,\n            x,\n            y,\n            view: this,\n            cell: this.cell,\n            node: this.cell,\n        });\n    }\n    notifyNodeMove(name, e, x, y, cell) {\n        let cells = [cell];\n        const selection = this.graph.getPlugin('selection');\n        if (selection && selection.isSelectionMovable()) {\n            const selectedCells = selection.getSelectedCells();\n            if (selectedCells.includes(cell)) {\n                cells = selectedCells.filter((c) => c.isNode());\n            }\n        }\n        cells.forEach((c) => {\n            this.notify(name, {\n                e,\n                x,\n                y,\n                cell: c,\n                node: c,\n                view: c.findView(this.graph),\n            });\n        });\n    }\n    getRestrictArea(view) {\n        const restrict = this.graph.options.translating.restrict;\n        const area = typeof restrict === 'function'\n            ? FunctionExt.call(restrict, this.graph, view)\n            : restrict;\n        if (typeof area === 'number') {\n            return this.graph.transform.getGraphArea().inflate(area);\n        }\n        if (area === true) {\n            return this.graph.transform.getGraphArea();\n        }\n        return area || null;\n    }\n    startNodeDragging(e, x, y) {\n        const targetView = this.getDelegatedView();\n        if (targetView == null || !targetView.can('nodeMovable')) {\n            return this.notifyUnhandledMouseDown(e, x, y);\n        }\n        this.setEventData(e, {\n            targetView,\n            action: 'move',\n        });\n        const position = Point.create(targetView.cell.getPosition());\n        targetView.setEventData(e, {\n            moving: false,\n            offset: position.diff(x, y),\n            restrict: this.getRestrictArea(targetView),\n        });\n    }\n    dragNode(e, x, y) {\n        const node = this.cell;\n        const graph = this.graph;\n        const gridSize = graph.getGridSize();\n        const data = this.getEventData(e);\n        const offset = data.offset;\n        const restrict = data.restrict;\n        if (!data.moving) {\n            data.moving = true;\n            this.addClass('node-moving');\n            this.notifyNodeMove('node:move', e, x, y, this.cell);\n        }\n        this.autoScrollGraph(e.clientX, e.clientY);\n        const posX = GeometryUtil.snapToGrid(x + offset.x, gridSize);\n        const posY = GeometryUtil.snapToGrid(y + offset.y, gridSize);\n        node.setPosition(posX, posY, {\n            restrict,\n            deep: true,\n            ui: true,\n        });\n        if (graph.options.embedding.enabled) {\n            if (!data.embedding) {\n                this.prepareEmbedding(e);\n                data.embedding = true;\n            }\n            this.processEmbedding(e, data);\n        }\n    }\n    stopNodeDragging(e, x, y) {\n        const data = this.getEventData(e);\n        if (data.embedding) {\n            this.finalizeEmbedding(e, data);\n        }\n        if (data.moving) {\n            this.removeClass('node-moving');\n            this.notifyNodeMove('node:moved', e, x, y, this.cell);\n        }\n        data.moving = false;\n        data.embedding = false;\n    }\n    // eslint-disable-next-line\n    autoScrollGraph(x, y) {\n        const scroller = this.graph.getPlugin('scroller');\n        if (scroller) {\n            scroller.autoScroll(x, y);\n        }\n    }\n}\n(function (NodeView) {\n    NodeView.toStringTag = `X6.${NodeView.name}`;\n    function isNodeView(instance) {\n        if (instance == null) {\n            return false;\n        }\n        if (instance instanceof NodeView) {\n            return true;\n        }\n        const tag = instance[Symbol.toStringTag];\n        const view = instance;\n        if ((tag == null || tag === NodeView.toStringTag) &&\n            typeof view.isNodeView === 'function' &&\n            typeof view.isEdgeView === 'function' &&\n            typeof view.confirmUpdate === 'function' &&\n            typeof view.update === 'function' &&\n            typeof view.findPortElem === 'function' &&\n            typeof view.resize === 'function' &&\n            typeof view.rotate === 'function' &&\n            typeof view.translate === 'function') {\n            return true;\n        }\n        return false;\n    }\n    NodeView.isNodeView = isNodeView;\n})(NodeView || (NodeView = {}));\nNodeView.config({\n    isSvgElement: true,\n    priority: 0,\n    bootstrap: ['render'],\n    actions: {\n        view: ['render'],\n        markup: ['render'],\n        attrs: ['update'],\n        size: ['resize', 'ports', 'tools'],\n        angle: ['rotate', 'tools'],\n        position: ['translate', 'tools'],\n        ports: ['ports'],\n        tools: ['tools'],\n    },\n});\nNodeView.registry.register('node', NodeView, true);\n//# sourceMappingURL=node.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Rectangle, Polyline, Point, Angle, Path, Line, } from '@antv/x6-geometry';\nimport { ObjectExt, NumberExt, FunctionExt, Dom, Vector, } from '@antv/x6-common';\nimport { Router, Connector, NodeAnchor, EdgeAnchor, ConnectionPoint, } from '../registry';\nimport { Edge } from '../model/edge';\nimport { CellView } from './cell';\nimport { NodeView } from './node';\nexport class EdgeView extends CellView {\n    constructor() {\n        super(...arguments);\n        this.POINT_ROUNDING = 2;\n        this.labelDestroyFn = {};\n        // #endregion\n    }\n    get [Symbol.toStringTag]() {\n        return EdgeView.toStringTag;\n    }\n    getContainerClassName() {\n        return [super.getContainerClassName(), this.prefixClassName('edge')].join(' ');\n    }\n    get sourceBBox() {\n        const sourceView = this.sourceView;\n        if (!sourceView) {\n            const sourceDef = this.cell.getSource();\n            return new Rectangle(sourceDef.x, sourceDef.y);\n        }\n        const sourceMagnet = this.sourceMagnet;\n        if (sourceView.isEdgeElement(sourceMagnet)) {\n            return new Rectangle(this.sourceAnchor.x, this.sourceAnchor.y);\n        }\n        return sourceView.getBBoxOfElement(sourceMagnet || sourceView.container);\n    }\n    get targetBBox() {\n        const targetView = this.targetView;\n        if (!targetView) {\n            const targetDef = this.cell.getTarget();\n            return new Rectangle(targetDef.x, targetDef.y);\n        }\n        const targetMagnet = this.targetMagnet;\n        if (targetView.isEdgeElement(targetMagnet)) {\n            return new Rectangle(this.targetAnchor.x, this.targetAnchor.y);\n        }\n        return targetView.getBBoxOfElement(targetMagnet || targetView.container);\n    }\n    isEdgeView() {\n        return true;\n    }\n    confirmUpdate(flag, options = {}) {\n        let ref = flag;\n        if (this.hasAction(ref, 'source')) {\n            if (!this.updateTerminalProperties('source')) {\n                return ref;\n            }\n            ref = this.removeAction(ref, 'source');\n        }\n        if (this.hasAction(ref, 'target')) {\n            if (!this.updateTerminalProperties('target')) {\n                return ref;\n            }\n            ref = this.removeAction(ref, 'target');\n        }\n        if (this.hasAction(ref, 'render')) {\n            this.render();\n            ref = this.removeAction(ref, ['render', 'update', 'labels', 'tools']);\n            return ref;\n        }\n        ref = this.handleAction(ref, 'update', () => this.update(options));\n        ref = this.handleAction(ref, 'labels', () => this.onLabelsChange(options));\n        ref = this.handleAction(ref, 'tools', () => this.renderTools());\n        return ref;\n    }\n    // #region render\n    render() {\n        this.empty();\n        this.renderMarkup();\n        this.labelContainer = null;\n        this.renderLabels();\n        this.update();\n        this.renderTools();\n        return this;\n    }\n    renderMarkup() {\n        const markup = this.cell.markup;\n        if (markup) {\n            if (typeof markup === 'string') {\n                throw new TypeError('Not support string markup.');\n            }\n            return this.renderJSONMarkup(markup);\n        }\n        throw new TypeError('Invalid edge markup.');\n    }\n    renderJSONMarkup(markup) {\n        const ret = this.parseJSONMarkup(markup, this.container);\n        this.selectors = ret.selectors;\n        this.container.append(ret.fragment);\n    }\n    customizeLabels() {\n        if (this.labelContainer) {\n            const edge = this.cell;\n            const labels = edge.labels;\n            for (let i = 0, n = labels.length; i < n; i += 1) {\n                const label = labels[i];\n                const container = this.labelCache[i];\n                const selectors = this.labelSelectors[i];\n                const onEdgeLabelRendered = this.graph.options.onEdgeLabelRendered;\n                if (onEdgeLabelRendered) {\n                    const fn = onEdgeLabelRendered({\n                        edge,\n                        label,\n                        container,\n                        selectors,\n                    });\n                    if (fn) {\n                        this.labelDestroyFn[i] = fn;\n                    }\n                }\n            }\n        }\n    }\n    destroyCustomizeLabels() {\n        const labels = this.cell.labels;\n        if (this.labelCache && this.labelSelectors && this.labelDestroyFn) {\n            for (let i = 0, n = labels.length; i < n; i += 1) {\n                const fn = this.labelDestroyFn[i];\n                const container = this.labelCache[i];\n                const selectors = this.labelSelectors[i];\n                if (fn && container && selectors) {\n                    fn({\n                        edge: this.cell,\n                        label: labels[i],\n                        container,\n                        selectors,\n                    });\n                }\n            }\n        }\n        this.labelDestroyFn = {};\n    }\n    renderLabels() {\n        const edge = this.cell;\n        const labels = edge.getLabels();\n        const count = labels.length;\n        let container = this.labelContainer;\n        this.labelCache = {};\n        this.labelSelectors = {};\n        if (count <= 0) {\n            if (container && container.parentNode) {\n                container.parentNode.removeChild(container);\n            }\n            return this;\n        }\n        if (container) {\n            this.empty(container);\n        }\n        else {\n            container = Dom.createSvgElement('g');\n            this.addClass(this.prefixClassName('edge-labels'), container);\n            this.labelContainer = container;\n        }\n        for (let i = 0, ii = labels.length; i < ii; i += 1) {\n            const label = labels[i];\n            const normalized = this.normalizeLabelMarkup(this.parseLabelMarkup(label.markup));\n            let labelNode;\n            let selectors;\n            if (normalized) {\n                labelNode = normalized.node;\n                selectors = normalized.selectors;\n            }\n            else {\n                const defaultLabel = edge.getDefaultLabel();\n                const normalized = this.normalizeLabelMarkup(this.parseLabelMarkup(defaultLabel.markup));\n                labelNode = normalized.node;\n                selectors = normalized.selectors;\n            }\n            labelNode.setAttribute('data-index', `${i}`);\n            container.appendChild(labelNode);\n            const rootSelector = this.rootSelector;\n            if (selectors[rootSelector]) {\n                throw new Error('Ambiguous label root selector.');\n            }\n            selectors[rootSelector] = labelNode;\n            this.labelCache[i] = labelNode;\n            this.labelSelectors[i] = selectors;\n        }\n        if (container.parentNode == null) {\n            this.container.appendChild(container);\n        }\n        this.updateLabels();\n        this.customizeLabels();\n        return this;\n    }\n    onLabelsChange(options = {}) {\n        this.destroyCustomizeLabels();\n        if (this.shouldRerenderLabels(options)) {\n            this.renderLabels();\n        }\n        else {\n            this.updateLabels();\n        }\n        this.updateLabelPositions();\n    }\n    shouldRerenderLabels(options = {}) {\n        const previousLabels = this.cell.previous('labels');\n        if (previousLabels == null) {\n            return true;\n        }\n        // Here is an optimization for cases when we know, that change does\n        // not require re-rendering of all labels.\n        if ('propertyPathArray' in options && 'propertyValue' in options) {\n            // The label is setting by `prop()` method\n            const pathArray = options.propertyPathArray || [];\n            const pathLength = pathArray.length;\n            if (pathLength > 1) {\n                // We are changing a single label here e.g. 'labels/0/position'\n                const index = pathArray[1];\n                if (previousLabels[index]) {\n                    if (pathLength === 2) {\n                        // We are changing the entire label. Need to check if the\n                        // markup is also being changed.\n                        return (typeof options.propertyValue === 'object' &&\n                            ObjectExt.has(options.propertyValue, 'markup'));\n                    }\n                    // We are changing a label property but not the markup\n                    if (pathArray[2] !== 'markup') {\n                        return false;\n                    }\n                }\n            }\n        }\n        return true;\n    }\n    parseLabelMarkup(markup) {\n        if (markup) {\n            if (typeof markup === 'string') {\n                return this.parseLabelStringMarkup(markup);\n            }\n            return this.parseJSONMarkup(markup);\n        }\n        return null;\n    }\n    parseLabelStringMarkup(labelMarkup) {\n        const children = Vector.createVectors(labelMarkup);\n        const fragment = document.createDocumentFragment();\n        for (let i = 0, n = children.length; i < n; i += 1) {\n            const currentChild = children[i].node;\n            fragment.appendChild(currentChild);\n        }\n        return { fragment, selectors: {} };\n    }\n    normalizeLabelMarkup(markup) {\n        if (markup == null) {\n            return;\n        }\n        const fragment = markup.fragment;\n        if (!(fragment instanceof DocumentFragment) || !fragment.hasChildNodes()) {\n            throw new Error('Invalid label markup.');\n        }\n        let vel;\n        const childNodes = fragment.childNodes;\n        if (childNodes.length > 1 || childNodes[0].nodeName.toUpperCase() !== 'G') {\n            vel = Vector.create('g').append(fragment);\n        }\n        else {\n            vel = Vector.create(childNodes[0]);\n        }\n        vel.addClass(this.prefixClassName('edge-label'));\n        return {\n            node: vel.node,\n            selectors: markup.selectors,\n        };\n    }\n    updateLabels() {\n        if (this.labelContainer) {\n            const edge = this.cell;\n            const labels = edge.labels;\n            const canLabelMove = this.can('edgeLabelMovable');\n            const defaultLabel = edge.getDefaultLabel();\n            for (let i = 0, n = labels.length; i < n; i += 1) {\n                const elem = this.labelCache[i];\n                const selectors = this.labelSelectors[i];\n                elem.setAttribute('cursor', canLabelMove ? 'move' : 'default');\n                const label = labels[i];\n                const attrs = ObjectExt.merge({}, defaultLabel.attrs, label.attrs);\n                this.updateAttrs(elem, attrs, {\n                    selectors,\n                    rootBBox: label.size ? Rectangle.fromSize(label.size) : undefined,\n                });\n            }\n        }\n    }\n    renderTools() {\n        const tools = this.cell.getTools();\n        this.addTools(tools);\n        return this;\n    }\n    // #endregion\n    // #region updating\n    update(options = {}) {\n        this.cleanCache();\n        this.updateConnection(options);\n        const _a = this.cell.getAttrs(), { text } = _a, attrs = __rest(_a, [\"text\"]);\n        if (attrs != null) {\n            this.updateAttrs(this.container, attrs, {\n                selectors: this.selectors,\n            });\n        }\n        this.updateLabelPositions();\n        this.updateTools(options);\n        return this;\n    }\n    removeRedundantLinearVertices(options = {}) {\n        const edge = this.cell;\n        const vertices = edge.getVertices();\n        const routePoints = [this.sourceAnchor, ...vertices, this.targetAnchor];\n        const rawCount = routePoints.length;\n        // Puts the route points into a polyline and try to simplify.\n        const polyline = new Polyline(routePoints);\n        polyline.simplify({ threshold: 0.01 });\n        const simplifiedPoints = polyline.points.map((point) => point.toJSON());\n        const simplifiedCount = simplifiedPoints.length;\n        // If simplification did not remove any redundant vertices.\n        if (rawCount === simplifiedCount) {\n            return 0;\n        }\n        // Sets simplified polyline points as edge vertices.\n        // Removes first and last polyline points again (source/target anchors).\n        edge.setVertices(simplifiedPoints.slice(1, simplifiedCount - 1), options);\n        return rawCount - simplifiedCount;\n    }\n    getTerminalView(type) {\n        switch (type) {\n            case 'source':\n                return this.sourceView || null;\n            case 'target':\n                return this.targetView || null;\n            default:\n                throw new Error(`Unknown terminal type '${type}'`);\n        }\n    }\n    getTerminalAnchor(type) {\n        switch (type) {\n            case 'source':\n                return Point.create(this.sourceAnchor);\n            case 'target':\n                return Point.create(this.targetAnchor);\n            default:\n                throw new Error(`Unknown terminal type '${type}'`);\n        }\n    }\n    getTerminalConnectionPoint(type) {\n        switch (type) {\n            case 'source':\n                return Point.create(this.sourcePoint);\n            case 'target':\n                return Point.create(this.targetPoint);\n            default:\n                throw new Error(`Unknown terminal type '${type}'`);\n        }\n    }\n    getTerminalMagnet(type, options = {}) {\n        switch (type) {\n            case 'source': {\n                if (options.raw) {\n                    return this.sourceMagnet;\n                }\n                const sourceView = this.sourceView;\n                if (!sourceView) {\n                    return null;\n                }\n                return this.sourceMagnet || sourceView.container;\n            }\n            case 'target': {\n                if (options.raw) {\n                    return this.targetMagnet;\n                }\n                const targetView = this.targetView;\n                if (!targetView) {\n                    return null;\n                }\n                return this.targetMagnet || targetView.container;\n            }\n            default: {\n                throw new Error(`Unknown terminal type '${type}'`);\n            }\n        }\n    }\n    updateConnection(options = {}) {\n        const edge = this.cell;\n        // The edge is being translated by an ancestor that will shift\n        // source, target and vertices by an equal distance.\n        // todo isFragmentDescendantOf is invalid\n        if (options.translateBy &&\n            edge.isFragmentDescendantOf(options.translateBy)) {\n            const tx = options.tx || 0;\n            const ty = options.ty || 0;\n            this.routePoints = new Polyline(this.routePoints).translate(tx, ty).points;\n            this.translateConnectionPoints(tx, ty);\n            this.path.translate(tx, ty);\n        }\n        else {\n            const vertices = edge.getVertices();\n            // 1. Find anchor points\n            const anchors = this.findAnchors(vertices);\n            this.sourceAnchor = anchors.source;\n            this.targetAnchor = anchors.target;\n            // 2. Find route points\n            this.routePoints = this.findRoutePoints(vertices);\n            // 3. Find connection points\n            const connectionPoints = this.findConnectionPoints(this.routePoints, this.sourceAnchor, this.targetAnchor);\n            this.sourcePoint = connectionPoints.source;\n            this.targetPoint = connectionPoints.target;\n            // 4. Find Marker Connection Point\n            const markerPoints = this.findMarkerPoints(this.routePoints, this.sourcePoint, this.targetPoint);\n            // 5. Make path\n            this.path = this.findPath(this.routePoints, markerPoints.source || this.sourcePoint, markerPoints.target || this.targetPoint);\n        }\n        this.cleanCache();\n    }\n    findAnchors(vertices) {\n        const edge = this.cell;\n        const source = edge.source;\n        const target = edge.target;\n        const firstVertex = vertices[0];\n        const lastVertex = vertices[vertices.length - 1];\n        if (target.priority && !source.priority) {\n            // Reversed order\n            return this.findAnchorsOrdered('target', lastVertex, 'source', firstVertex);\n        }\n        // Usual order\n        return this.findAnchorsOrdered('source', firstVertex, 'target', lastVertex);\n    }\n    findAnchorsOrdered(firstType, firstPoint, secondType, secondPoint) {\n        let firstAnchor;\n        let secondAnchor;\n        const edge = this.cell;\n        const firstTerminal = edge[firstType];\n        const secondTerminal = edge[secondType];\n        const firstView = this.getTerminalView(firstType);\n        const secondView = this.getTerminalView(secondType);\n        const firstMagnet = this.getTerminalMagnet(firstType);\n        const secondMagnet = this.getTerminalMagnet(secondType);\n        if (firstView) {\n            let firstRef;\n            if (firstPoint) {\n                firstRef = Point.create(firstPoint);\n            }\n            else if (secondView) {\n                firstRef = secondMagnet;\n            }\n            else {\n                firstRef = Point.create(secondTerminal);\n            }\n            firstAnchor = this.getAnchor(firstTerminal.anchor, firstView, firstMagnet, firstRef, firstType);\n        }\n        else {\n            firstAnchor = Point.create(firstTerminal);\n        }\n        if (secondView) {\n            const secondRef = Point.create(secondPoint || firstAnchor);\n            secondAnchor = this.getAnchor(secondTerminal.anchor, secondView, secondMagnet, secondRef, secondType);\n        }\n        else {\n            secondAnchor = Point.isPointLike(secondTerminal)\n                ? Point.create(secondTerminal)\n                : new Point();\n        }\n        return {\n            [firstType]: firstAnchor,\n            [secondType]: secondAnchor,\n        };\n    }\n    getAnchor(def, cellView, magnet, ref, terminalType) {\n        const isEdge = cellView.isEdgeElement(magnet);\n        const connecting = this.graph.options.connecting;\n        let config = typeof def === 'string' ? { name: def } : def;\n        if (!config) {\n            const defaults = isEdge\n                ? (terminalType === 'source'\n                    ? connecting.sourceEdgeAnchor\n                    : connecting.targetEdgeAnchor) || connecting.edgeAnchor\n                : (terminalType === 'source'\n                    ? connecting.sourceAnchor\n                    : connecting.targetAnchor) || connecting.anchor;\n            config = typeof defaults === 'string' ? { name: defaults } : defaults;\n        }\n        if (!config) {\n            throw new Error(`Anchor should be specified.`);\n        }\n        let anchor;\n        const name = config.name;\n        if (isEdge) {\n            const fn = EdgeAnchor.registry.get(name);\n            if (typeof fn !== 'function') {\n                return EdgeAnchor.registry.onNotFound(name);\n            }\n            anchor = FunctionExt.call(fn, this, cellView, magnet, ref, config.args || {}, terminalType);\n        }\n        else {\n            const fn = NodeAnchor.registry.get(name);\n            if (typeof fn !== 'function') {\n                return NodeAnchor.registry.onNotFound(name);\n            }\n            anchor = FunctionExt.call(fn, this, cellView, magnet, ref, config.args || {}, terminalType);\n        }\n        return anchor ? anchor.round(this.POINT_ROUNDING) : new Point();\n    }\n    findRoutePoints(vertices = []) {\n        const defaultRouter = this.graph.options.connecting.router || Router.presets.normal;\n        const router = this.cell.getRouter() || defaultRouter;\n        let routePoints;\n        if (typeof router === 'function') {\n            routePoints = FunctionExt.call(router, this, vertices, {}, this);\n        }\n        else {\n            const name = typeof router === 'string' ? router : router.name;\n            const args = typeof router === 'string' ? {} : router.args || {};\n            const fn = name ? Router.registry.get(name) : Router.presets.normal;\n            if (typeof fn !== 'function') {\n                return Router.registry.onNotFound(name);\n            }\n            routePoints = FunctionExt.call(fn, this, vertices, args, this);\n        }\n        return routePoints == null\n            ? vertices.map((p) => Point.create(p))\n            : routePoints.map((p) => Point.create(p));\n    }\n    findConnectionPoints(routePoints, sourceAnchor, targetAnchor) {\n        const edge = this.cell;\n        const connecting = this.graph.options.connecting;\n        const sourceTerminal = edge.getSource();\n        const targetTerminal = edge.getTarget();\n        const sourceView = this.sourceView;\n        const targetView = this.targetView;\n        const firstRoutePoint = routePoints[0];\n        const lastRoutePoint = routePoints[routePoints.length - 1];\n        // source\n        let sourcePoint;\n        if (sourceView && !sourceView.isEdgeElement(this.sourceMagnet)) {\n            const sourceMagnet = this.sourceMagnet || sourceView.container;\n            const sourcePointRef = firstRoutePoint || targetAnchor;\n            const sourceLine = new Line(sourcePointRef, sourceAnchor);\n            const connectionPointDef = sourceTerminal.connectionPoint ||\n                connecting.sourceConnectionPoint ||\n                connecting.connectionPoint;\n            sourcePoint = this.getConnectionPoint(connectionPointDef, sourceView, sourceMagnet, sourceLine, 'source');\n        }\n        else {\n            sourcePoint = sourceAnchor;\n        }\n        // target\n        let targetPoint;\n        if (targetView && !targetView.isEdgeElement(this.targetMagnet)) {\n            const targetMagnet = this.targetMagnet || targetView.container;\n            const targetConnectionPointDef = targetTerminal.connectionPoint ||\n                connecting.targetConnectionPoint ||\n                connecting.connectionPoint;\n            const targetPointRef = lastRoutePoint || sourceAnchor;\n            const targetLine = new Line(targetPointRef, targetAnchor);\n            targetPoint = this.getConnectionPoint(targetConnectionPointDef, targetView, targetMagnet, targetLine, 'target');\n        }\n        else {\n            targetPoint = targetAnchor;\n        }\n        return {\n            source: sourcePoint,\n            target: targetPoint,\n        };\n    }\n    getConnectionPoint(def, view, magnet, line, endType) {\n        const anchor = line.end;\n        if (def == null) {\n            return anchor;\n        }\n        const name = typeof def === 'string' ? def : def.name;\n        const args = typeof def === 'string' ? {} : def.args;\n        const fn = ConnectionPoint.registry.get(name);\n        if (typeof fn !== 'function') {\n            return ConnectionPoint.registry.onNotFound(name);\n        }\n        const connectionPoint = FunctionExt.call(fn, this, line, view, magnet, args || {}, endType);\n        return connectionPoint ? connectionPoint.round(this.POINT_ROUNDING) : anchor;\n    }\n    findMarkerPoints(routePoints, sourcePoint, targetPoint) {\n        const getLineWidth = (type) => {\n            const attrs = this.cell.getAttrs();\n            const keys = Object.keys(attrs);\n            for (let i = 0, l = keys.length; i < l; i += 1) {\n                const attr = attrs[keys[i]];\n                if (attr[`${type}Marker`] || attr[`${type}-marker`]) {\n                    const strokeWidth = attr.strokeWidth || attr['stroke-width'];\n                    if (strokeWidth) {\n                        return parseFloat(strokeWidth);\n                    }\n                    break;\n                }\n            }\n            return null;\n        };\n        const firstRoutePoint = routePoints[0];\n        const lastRoutePoint = routePoints[routePoints.length - 1];\n        let sourceMarkerPoint;\n        let targetMarkerPoint;\n        const sourceStrokeWidth = getLineWidth('source');\n        if (sourceStrokeWidth) {\n            sourceMarkerPoint = sourcePoint\n                .clone()\n                .move(firstRoutePoint || targetPoint, -sourceStrokeWidth);\n        }\n        const targetStrokeWidth = getLineWidth('target');\n        if (targetStrokeWidth) {\n            targetMarkerPoint = targetPoint\n                .clone()\n                .move(lastRoutePoint || sourcePoint, -targetStrokeWidth);\n        }\n        this.sourceMarkerPoint = sourceMarkerPoint || sourcePoint.clone();\n        this.targetMarkerPoint = targetMarkerPoint || targetPoint.clone();\n        return {\n            source: sourceMarkerPoint,\n            target: targetMarkerPoint,\n        };\n    }\n    findPath(routePoints, sourcePoint, targetPoint) {\n        const def = this.cell.getConnector() || this.graph.options.connecting.connector;\n        let name;\n        let args;\n        let fn;\n        if (typeof def === 'string') {\n            name = def;\n        }\n        else {\n            name = def.name;\n            args = def.args;\n        }\n        if (name) {\n            const method = Connector.registry.get(name);\n            if (typeof method !== 'function') {\n                return Connector.registry.onNotFound(name);\n            }\n            fn = method;\n        }\n        else {\n            fn = Connector.presets.normal;\n        }\n        const path = FunctionExt.call(fn, this, sourcePoint, targetPoint, routePoints, Object.assign(Object.assign({}, args), { raw: true }), this);\n        return typeof path === 'string' ? Path.parse(path) : path;\n    }\n    translateConnectionPoints(tx, ty) {\n        this.sourcePoint.translate(tx, ty);\n        this.targetPoint.translate(tx, ty);\n        this.sourceAnchor.translate(tx, ty);\n        this.targetAnchor.translate(tx, ty);\n        this.sourceMarkerPoint.translate(tx, ty);\n        this.targetMarkerPoint.translate(tx, ty);\n    }\n    updateLabelPositions() {\n        if (this.labelContainer == null) {\n            return this;\n        }\n        const path = this.path;\n        if (!path) {\n            return this;\n        }\n        const edge = this.cell;\n        const labels = edge.getLabels();\n        if (labels.length === 0) {\n            return this;\n        }\n        const defaultLabel = edge.getDefaultLabel();\n        const defaultPosition = this.normalizeLabelPosition(defaultLabel.position);\n        for (let i = 0, ii = labels.length; i < ii; i += 1) {\n            const label = labels[i];\n            const labelNode = this.labelCache[i];\n            if (!labelNode) {\n                continue;\n            }\n            const labelPosition = this.normalizeLabelPosition(label.position);\n            const pos = ObjectExt.merge({}, defaultPosition, labelPosition);\n            const matrix = this.getLabelTransformationMatrix(pos);\n            labelNode.setAttribute('transform', Dom.matrixToTransformString(matrix));\n        }\n        return this;\n    }\n    updateTerminalProperties(type) {\n        const edge = this.cell;\n        const graph = this.graph;\n        const terminal = edge[type];\n        const nodeId = terminal && terminal.cell;\n        const viewKey = `${type}View`;\n        // terminal is a point\n        if (!nodeId) {\n            this[viewKey] = null;\n            this.updateTerminalMagnet(type);\n            return true;\n        }\n        const terminalCell = graph.getCellById(nodeId);\n        if (!terminalCell) {\n            throw new Error(`Edge's ${type} node with id \"${nodeId}\" not exists`);\n        }\n        const endView = terminalCell.findView(graph);\n        if (!endView) {\n            return false;\n        }\n        this[viewKey] = endView;\n        this.updateTerminalMagnet(type);\n        return true;\n    }\n    updateTerminalMagnet(type) {\n        const propName = `${type}Magnet`;\n        const terminalView = this.getTerminalView(type);\n        if (terminalView) {\n            let magnet = terminalView.getMagnetFromEdgeTerminal(this.cell[type]);\n            if (magnet === terminalView.container) {\n                magnet = null;\n            }\n            this[propName] = magnet;\n        }\n        else {\n            this[propName] = null;\n        }\n    }\n    getLabelPositionAngle(idx) {\n        const label = this.cell.getLabelAt(idx);\n        if (label && label.position && typeof label.position === 'object') {\n            return label.position.angle || 0;\n        }\n        return 0;\n    }\n    getLabelPositionArgs(idx) {\n        const label = this.cell.getLabelAt(idx);\n        if (label && label.position && typeof label.position === 'object') {\n            return label.position.options;\n        }\n    }\n    getDefaultLabelPositionArgs() {\n        const defaultLabel = this.cell.getDefaultLabel();\n        if (defaultLabel &&\n            defaultLabel.position &&\n            typeof defaultLabel.position === 'object') {\n            return defaultLabel.position.options;\n        }\n    }\n    mergeLabelPositionArgs(labelPositionArgs, defaultLabelPositionArgs) {\n        if (labelPositionArgs === null) {\n            return null;\n        }\n        if (labelPositionArgs === undefined) {\n            if (defaultLabelPositionArgs === null) {\n                return null;\n            }\n            return defaultLabelPositionArgs;\n        }\n        return ObjectExt.merge({}, defaultLabelPositionArgs, labelPositionArgs);\n    }\n    // #endregion\n    getConnection() {\n        return this.path != null ? this.path.clone() : null;\n    }\n    getConnectionPathData() {\n        if (this.path == null) {\n            return '';\n        }\n        const cache = this.cache.pathCache;\n        if (!ObjectExt.has(cache, 'data')) {\n            cache.data = this.path.serialize();\n        }\n        return cache.data || '';\n    }\n    getConnectionSubdivisions() {\n        if (this.path == null) {\n            return null;\n        }\n        const cache = this.cache.pathCache;\n        if (!ObjectExt.has(cache, 'segmentSubdivisions')) {\n            cache.segmentSubdivisions = this.path.getSegmentSubdivisions();\n        }\n        return cache.segmentSubdivisions;\n    }\n    getConnectionLength() {\n        if (this.path == null) {\n            return 0;\n        }\n        const cache = this.cache.pathCache;\n        if (!ObjectExt.has(cache, 'length')) {\n            cache.length = this.path.length({\n                segmentSubdivisions: this.getConnectionSubdivisions(),\n            });\n        }\n        return cache.length;\n    }\n    getPointAtLength(length) {\n        if (this.path == null) {\n            return null;\n        }\n        return this.path.pointAtLength(length, {\n            segmentSubdivisions: this.getConnectionSubdivisions(),\n        });\n    }\n    getPointAtRatio(ratio) {\n        if (this.path == null) {\n            return null;\n        }\n        if (NumberExt.isPercentage(ratio)) {\n            // eslint-disable-next-line\n            ratio = parseFloat(ratio) / 100;\n        }\n        return this.path.pointAt(ratio, {\n            segmentSubdivisions: this.getConnectionSubdivisions(),\n        });\n    }\n    getTangentAtLength(length) {\n        if (this.path == null) {\n            return null;\n        }\n        return this.path.tangentAtLength(length, {\n            segmentSubdivisions: this.getConnectionSubdivisions(),\n        });\n    }\n    getTangentAtRatio(ratio) {\n        if (this.path == null) {\n            return null;\n        }\n        return this.path.tangentAt(ratio, {\n            segmentSubdivisions: this.getConnectionSubdivisions(),\n        });\n    }\n    getClosestPoint(point) {\n        if (this.path == null) {\n            return null;\n        }\n        return this.path.closestPoint(point, {\n            segmentSubdivisions: this.getConnectionSubdivisions(),\n        });\n    }\n    getClosestPointLength(point) {\n        if (this.path == null) {\n            return null;\n        }\n        return this.path.closestPointLength(point, {\n            segmentSubdivisions: this.getConnectionSubdivisions(),\n        });\n    }\n    getClosestPointRatio(point) {\n        if (this.path == null) {\n            return null;\n        }\n        return this.path.closestPointNormalizedLength(point, {\n            segmentSubdivisions: this.getConnectionSubdivisions(),\n        });\n    }\n    getLabelPosition(x, y, p3, p4) {\n        const pos = { distance: 0 };\n        // normalize data from the two possible signatures\n        let angle = 0;\n        let options;\n        if (typeof p3 === 'number') {\n            angle = p3;\n            options = p4;\n        }\n        else {\n            options = p3;\n        }\n        if (options != null) {\n            pos.options = options;\n        }\n        // identify distance/offset settings\n        const isOffsetAbsolute = options && options.absoluteOffset;\n        const isDistanceRelative = !(options && options.absoluteDistance);\n        const isDistanceAbsoluteReverse = options && options.absoluteDistance && options.reverseDistance;\n        // find closest point t\n        const path = this.path;\n        const pathOptions = {\n            segmentSubdivisions: this.getConnectionSubdivisions(),\n        };\n        const labelPoint = new Point(x, y);\n        const t = path.closestPointT(labelPoint, pathOptions);\n        // distance\n        const totalLength = this.getConnectionLength() || 0;\n        let labelDistance = path.lengthAtT(t, pathOptions);\n        if (isDistanceRelative) {\n            labelDistance = totalLength > 0 ? labelDistance / totalLength : 0;\n        }\n        if (isDistanceAbsoluteReverse) {\n            // fix for end point (-0 => 1)\n            labelDistance = -1 * (totalLength - labelDistance) || 1;\n        }\n        pos.distance = labelDistance;\n        // offset\n        // use absolute offset if:\n        // - options.absoluteOffset is true,\n        // - options.absoluteOffset is not true but there is no tangent\n        let tangent;\n        if (!isOffsetAbsolute)\n            tangent = path.tangentAtT(t);\n        let labelOffset;\n        if (tangent) {\n            labelOffset = tangent.pointOffset(labelPoint);\n        }\n        else {\n            const closestPoint = path.pointAtT(t);\n            const labelOffsetDiff = labelPoint.diff(closestPoint);\n            labelOffset = { x: labelOffsetDiff.x, y: labelOffsetDiff.y };\n        }\n        pos.offset = labelOffset;\n        pos.angle = angle;\n        return pos;\n    }\n    normalizeLabelPosition(pos) {\n        if (typeof pos === 'number') {\n            return { distance: pos };\n        }\n        return pos;\n    }\n    getLabelTransformationMatrix(labelPosition) {\n        const pos = this.normalizeLabelPosition(labelPosition);\n        const options = pos.options || {};\n        const labelAngle = pos.angle || 0;\n        const labelDistance = pos.distance;\n        const isDistanceRelative = labelDistance > 0 && labelDistance <= 1;\n        let labelOffset = 0;\n        const offsetCoord = { x: 0, y: 0 };\n        const offset = pos.offset;\n        if (offset) {\n            if (typeof offset === 'number') {\n                labelOffset = offset;\n            }\n            else {\n                if (offset.x != null) {\n                    offsetCoord.x = offset.x;\n                }\n                if (offset.y != null) {\n                    offsetCoord.y = offset.y;\n                }\n            }\n        }\n        const isOffsetAbsolute = offsetCoord.x !== 0 || offsetCoord.y !== 0 || labelOffset === 0;\n        const isKeepGradient = options.keepGradient;\n        const isEnsureLegibility = options.ensureLegibility;\n        const path = this.path;\n        const pathOpt = { segmentSubdivisions: this.getConnectionSubdivisions() };\n        const distance = isDistanceRelative\n            ? labelDistance * this.getConnectionLength()\n            : labelDistance;\n        const tangent = path.tangentAtLength(distance, pathOpt);\n        let translation;\n        let angle = labelAngle;\n        if (tangent) {\n            if (isOffsetAbsolute) {\n                translation = tangent.start;\n                translation.translate(offsetCoord);\n            }\n            else {\n                const normal = tangent.clone();\n                normal.rotate(-90, tangent.start);\n                normal.setLength(labelOffset);\n                translation = normal.end;\n            }\n            if (isKeepGradient) {\n                angle = tangent.angle() + labelAngle;\n                if (isEnsureLegibility) {\n                    angle = Angle.normalize(((angle + 90) % 180) - 90);\n                }\n            }\n        }\n        else {\n            // fallback - the connection has zero length\n            translation = path.start;\n            if (isOffsetAbsolute) {\n                translation.translate(offsetCoord);\n            }\n        }\n        return Dom.createSVGMatrix()\n            .translate(translation.x, translation.y)\n            .rotate(angle);\n    }\n    getVertexIndex(x, y) {\n        const edge = this.cell;\n        const vertices = edge.getVertices();\n        const vertexLength = this.getClosestPointLength(new Point(x, y));\n        let index = 0;\n        if (vertexLength != null) {\n            for (const ii = vertices.length; index < ii; index += 1) {\n                const currentVertex = vertices[index];\n                const currentLength = this.getClosestPointLength(currentVertex);\n                if (currentLength != null && vertexLength < currentLength) {\n                    break;\n                }\n            }\n        }\n        return index;\n    }\n    getEventArgs(e, x, y) {\n        const view = this; // eslint-disable-line\n        const edge = view.cell;\n        const cell = edge;\n        if (x == null || y == null) {\n            return { e, view, edge, cell };\n        }\n        return { e, x, y, view, edge, cell };\n    }\n    notifyUnhandledMouseDown(e, x, y) {\n        this.notify('edge:unhandled:mousedown', {\n            e,\n            x,\n            y,\n            view: this,\n            cell: this.cell,\n            edge: this.cell,\n        });\n    }\n    notifyMouseDown(e, x, y) {\n        super.onMouseDown(e, x, y);\n        this.notify('edge:mousedown', this.getEventArgs(e, x, y));\n    }\n    notifyMouseMove(e, x, y) {\n        super.onMouseMove(e, x, y);\n        this.notify('edge:mousemove', this.getEventArgs(e, x, y));\n    }\n    notifyMouseUp(e, x, y) {\n        super.onMouseUp(e, x, y);\n        this.notify('edge:mouseup', this.getEventArgs(e, x, y));\n    }\n    onClick(e, x, y) {\n        super.onClick(e, x, y);\n        this.notify('edge:click', this.getEventArgs(e, x, y));\n    }\n    onDblClick(e, x, y) {\n        super.onDblClick(e, x, y);\n        this.notify('edge:dblclick', this.getEventArgs(e, x, y));\n    }\n    onContextMenu(e, x, y) {\n        super.onContextMenu(e, x, y);\n        this.notify('edge:contextmenu', this.getEventArgs(e, x, y));\n    }\n    onMouseDown(e, x, y) {\n        this.notifyMouseDown(e, x, y);\n        this.startEdgeDragging(e, x, y);\n    }\n    onMouseMove(e, x, y) {\n        const data = this.getEventData(e);\n        switch (data.action) {\n            case 'drag-label': {\n                this.dragLabel(e, x, y);\n                break;\n            }\n            case 'drag-arrowhead': {\n                this.dragArrowhead(e, x, y);\n                break;\n            }\n            case 'drag-edge': {\n                this.dragEdge(e, x, y);\n                break;\n            }\n            default:\n                break;\n        }\n        this.notifyMouseMove(e, x, y);\n        return data;\n    }\n    onMouseUp(e, x, y) {\n        const data = this.getEventData(e);\n        switch (data.action) {\n            case 'drag-label': {\n                this.stopLabelDragging(e, x, y);\n                break;\n            }\n            case 'drag-arrowhead': {\n                this.stopArrowheadDragging(e, x, y);\n                break;\n            }\n            case 'drag-edge': {\n                this.stopEdgeDragging(e, x, y);\n                break;\n            }\n            default:\n                break;\n        }\n        this.notifyMouseUp(e, x, y);\n        this.checkMouseleave(e);\n        return data;\n    }\n    onMouseOver(e) {\n        super.onMouseOver(e);\n        this.notify('edge:mouseover', this.getEventArgs(e));\n    }\n    onMouseOut(e) {\n        super.onMouseOut(e);\n        this.notify('edge:mouseout', this.getEventArgs(e));\n    }\n    onMouseEnter(e) {\n        super.onMouseEnter(e);\n        this.notify('edge:mouseenter', this.getEventArgs(e));\n    }\n    onMouseLeave(e) {\n        super.onMouseLeave(e);\n        this.notify('edge:mouseleave', this.getEventArgs(e));\n    }\n    onMouseWheel(e, x, y, delta) {\n        super.onMouseWheel(e, x, y, delta);\n        this.notify('edge:mousewheel', Object.assign({ delta }, this.getEventArgs(e, x, y)));\n    }\n    onCustomEvent(e, name, x, y) {\n        // For default edge tool\n        const tool = Dom.findParentByClass(e.target, 'edge-tool', this.container);\n        if (tool) {\n            e.stopPropagation(); // no further action to be executed\n            if (this.can('useEdgeTools')) {\n                if (name === 'edge:remove') {\n                    this.cell.remove({ ui: true });\n                    return;\n                }\n                this.notify('edge:customevent', Object.assign({ name }, this.getEventArgs(e, x, y)));\n            }\n            this.notifyMouseDown(e, x, y);\n        }\n        else {\n            this.notify('edge:customevent', Object.assign({ name }, this.getEventArgs(e, x, y)));\n            super.onCustomEvent(e, name, x, y);\n        }\n    }\n    onLabelMouseDown(e, x, y) {\n        this.notifyMouseDown(e, x, y);\n        this.startLabelDragging(e, x, y);\n        const stopPropagation = this.getEventData(e).stopPropagation;\n        if (stopPropagation) {\n            e.stopPropagation();\n        }\n    }\n    // #region drag edge\n    startEdgeDragging(e, x, y) {\n        if (!this.can('edgeMovable')) {\n            this.notifyUnhandledMouseDown(e, x, y);\n            return;\n        }\n        this.setEventData(e, {\n            x,\n            y,\n            moving: false,\n            action: 'drag-edge',\n        });\n    }\n    dragEdge(e, x, y) {\n        const data = this.getEventData(e);\n        if (!data.moving) {\n            data.moving = true;\n            this.addClass('edge-moving');\n            this.notify('edge:move', {\n                e,\n                x,\n                y,\n                view: this,\n                cell: this.cell,\n                edge: this.cell,\n            });\n        }\n        this.cell.translate(x - data.x, y - data.y, { ui: true });\n        this.setEventData(e, { x, y });\n        this.notify('edge:moving', {\n            e,\n            x,\n            y,\n            view: this,\n            cell: this.cell,\n            edge: this.cell,\n        });\n    }\n    stopEdgeDragging(e, x, y) {\n        const data = this.getEventData(e);\n        if (data.moving) {\n            this.removeClass('edge-moving');\n            this.notify('edge:moved', {\n                e,\n                x,\n                y,\n                view: this,\n                cell: this.cell,\n                edge: this.cell,\n            });\n        }\n        data.moving = false;\n    }\n    // #endregion\n    // #region drag arrowhead\n    prepareArrowheadDragging(type, options) {\n        const magnet = this.getTerminalMagnet(type);\n        const data = {\n            action: 'drag-arrowhead',\n            x: options.x,\n            y: options.y,\n            isNewEdge: options.isNewEdge === true,\n            terminalType: type,\n            initialMagnet: magnet,\n            initialTerminal: ObjectExt.clone(this.cell[type]),\n            fallbackAction: options.fallbackAction || 'revert',\n            getValidateConnectionArgs: this.createValidateConnectionArgs(type),\n            options: options.options,\n        };\n        this.beforeArrowheadDragging(data);\n        return data;\n    }\n    createValidateConnectionArgs(type) {\n        const args = [];\n        args[4] = type;\n        args[5] = this;\n        let opposite;\n        let i = 0;\n        let j = 0;\n        if (type === 'source') {\n            i = 2;\n            opposite = 'target';\n        }\n        else {\n            j = 2;\n            opposite = 'source';\n        }\n        const terminal = this.cell[opposite];\n        const cellId = terminal.cell;\n        if (cellId) {\n            let magnet;\n            const view = (args[i] = this.graph.findViewByCell(cellId));\n            if (view) {\n                magnet = view.getMagnetFromEdgeTerminal(terminal);\n                if (magnet === view.container) {\n                    magnet = undefined;\n                }\n            }\n            args[i + 1] = magnet;\n        }\n        return (cellView, magnet) => {\n            args[j] = cellView;\n            args[j + 1] = cellView.container === magnet ? undefined : magnet;\n            return args;\n        };\n    }\n    beforeArrowheadDragging(data) {\n        data.zIndex = this.cell.zIndex;\n        this.cell.toFront();\n        const style = this.container.style;\n        data.pointerEvents = style.pointerEvents;\n        style.pointerEvents = 'none';\n        if (this.graph.options.connecting.highlight) {\n            this.highlightAvailableMagnets(data);\n        }\n    }\n    afterArrowheadDragging(data) {\n        if (data.zIndex != null) {\n            this.cell.setZIndex(data.zIndex, { ui: true });\n            data.zIndex = null;\n        }\n        const container = this.container;\n        container.style.pointerEvents = data.pointerEvents || '';\n        if (this.graph.options.connecting.highlight) {\n            this.unhighlightAvailableMagnets(data);\n        }\n    }\n    validateConnection(sourceView, sourceMagnet, targetView, targetMagnet, terminalType, edgeView, candidateTerminal) {\n        const options = this.graph.options.connecting;\n        const allowLoop = options.allowLoop;\n        const allowNode = options.allowNode;\n        const allowEdge = options.allowEdge;\n        const allowPort = options.allowPort;\n        const allowMulti = options.allowMulti;\n        const validate = options.validateConnection;\n        const edge = edgeView ? edgeView.cell : null;\n        const terminalView = terminalType === 'target' ? targetView : sourceView;\n        const terminalMagnet = terminalType === 'target' ? targetMagnet : sourceMagnet;\n        let valid = true;\n        const doValidate = (validate) => {\n            const sourcePort = terminalType === 'source'\n                ? candidateTerminal\n                    ? candidateTerminal.port\n                    : null\n                : edge\n                    ? edge.getSourcePortId()\n                    : null;\n            const targetPort = terminalType === 'target'\n                ? candidateTerminal\n                    ? candidateTerminal.port\n                    : null\n                : edge\n                    ? edge.getTargetPortId()\n                    : null;\n            return FunctionExt.call(validate, this.graph, {\n                edge,\n                edgeView,\n                sourceView,\n                targetView,\n                sourcePort,\n                targetPort,\n                sourceMagnet,\n                targetMagnet,\n                sourceCell: sourceView ? sourceView.cell : null,\n                targetCell: targetView ? targetView.cell : null,\n                type: terminalType,\n            });\n        };\n        if (allowLoop != null) {\n            if (typeof allowLoop === 'boolean') {\n                if (!allowLoop && sourceView === targetView) {\n                    valid = false;\n                }\n            }\n            else {\n                valid = doValidate(allowLoop);\n            }\n        }\n        if (valid && allowPort != null) {\n            if (typeof allowPort === 'boolean') {\n                if (!allowPort && terminalMagnet) {\n                    valid = false;\n                }\n            }\n            else {\n                valid = doValidate(allowPort);\n            }\n        }\n        if (valid && allowEdge != null) {\n            if (typeof allowEdge === 'boolean') {\n                if (!allowEdge && EdgeView.isEdgeView(terminalView)) {\n                    valid = false;\n                }\n            }\n            else {\n                valid = doValidate(allowEdge);\n            }\n        }\n        // When judging nodes, the influence of the ports should be excluded,\n        // because the ports and nodes have the same terminalView\n        if (valid && allowNode != null && terminalMagnet == null) {\n            if (typeof allowNode === 'boolean') {\n                if (!allowNode && NodeView.isNodeView(terminalView)) {\n                    valid = false;\n                }\n            }\n            else {\n                valid = doValidate(allowNode);\n            }\n        }\n        if (valid && allowMulti != null && edgeView) {\n            const edge = edgeView.cell;\n            const source = terminalType === 'source'\n                ? candidateTerminal\n                : edge.getSource();\n            const target = terminalType === 'target'\n                ? candidateTerminal\n                : edge.getTarget();\n            const terminalCell = candidateTerminal\n                ? this.graph.getCellById(candidateTerminal.cell)\n                : null;\n            if (source && target && source.cell && target.cell && terminalCell) {\n                if (typeof allowMulti === 'function') {\n                    valid = doValidate(allowMulti);\n                }\n                else {\n                    const connectedEdges = this.graph.model.getConnectedEdges(terminalCell, {\n                        outgoing: terminalType === 'source',\n                        incoming: terminalType === 'target',\n                    });\n                    if (connectedEdges.length) {\n                        if (allowMulti === 'withPort') {\n                            const exist = connectedEdges.some((link) => {\n                                const s = link.getSource();\n                                const t = link.getTarget();\n                                return (s &&\n                                    t &&\n                                    s.cell === source.cell &&\n                                    t.cell === target.cell &&\n                                    s.port != null &&\n                                    s.port === source.port &&\n                                    t.port != null &&\n                                    t.port === target.port);\n                            });\n                            if (exist) {\n                                valid = false;\n                            }\n                        }\n                        else if (!allowMulti) {\n                            const exist = connectedEdges.some((link) => {\n                                const s = link.getSource();\n                                const t = link.getTarget();\n                                return (s && t && s.cell === source.cell && t.cell === target.cell);\n                            });\n                            if (exist) {\n                                valid = false;\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        if (valid && validate != null) {\n            valid = doValidate(validate);\n        }\n        return valid;\n    }\n    allowConnectToBlank(edge) {\n        const graph = this.graph;\n        const options = graph.options.connecting;\n        const allowBlank = options.allowBlank;\n        if (typeof allowBlank !== 'function') {\n            return !!allowBlank;\n        }\n        const edgeView = graph.findViewByCell(edge);\n        const sourceCell = edge.getSourceCell();\n        const targetCell = edge.getTargetCell();\n        const sourceView = graph.findViewByCell(sourceCell);\n        const targetView = graph.findViewByCell(targetCell);\n        return FunctionExt.call(allowBlank, graph, {\n            edge,\n            edgeView,\n            sourceCell,\n            targetCell,\n            sourceView,\n            targetView,\n            sourcePort: edge.getSourcePortId(),\n            targetPort: edge.getTargetPortId(),\n            sourceMagnet: edgeView.sourceMagnet,\n            targetMagnet: edgeView.targetMagnet,\n        });\n    }\n    validateEdge(edge, type, initialTerminal) {\n        const graph = this.graph;\n        if (!this.allowConnectToBlank(edge)) {\n            const sourceId = edge.getSourceCellId();\n            const targetId = edge.getTargetCellId();\n            if (!(sourceId && targetId)) {\n                return false;\n            }\n        }\n        const validate = graph.options.connecting.validateEdge;\n        if (validate) {\n            return FunctionExt.call(validate, graph, {\n                edge,\n                type,\n                previous: initialTerminal,\n            });\n        }\n        return true;\n    }\n    arrowheadDragging(target, x, y, data) {\n        data.x = x;\n        data.y = y;\n        // Checking views right under the pointer\n        if (data.currentTarget !== target) {\n            // Unhighlight the previous view under pointer if there was one.\n            if (data.currentMagnet && data.currentView) {\n                data.currentView.unhighlight(data.currentMagnet, {\n                    type: 'magnetAdsorbed',\n                });\n            }\n            data.currentView = this.graph.findViewByElem(target);\n            if (data.currentView) {\n                // If we found a view that is under the pointer, we need to find\n                // the closest magnet based on the real target element of the event.\n                data.currentMagnet = data.currentView.findMagnet(target);\n                if (data.currentMagnet &&\n                    this.validateConnection(...data.getValidateConnectionArgs(data.currentView, data.currentMagnet), data.currentView.getEdgeTerminal(data.currentMagnet, x, y, this.cell, data.terminalType))) {\n                    data.currentView.highlight(data.currentMagnet, {\n                        type: 'magnetAdsorbed',\n                    });\n                }\n                else {\n                    // This type of connection is not valid. Disregard this magnet.\n                    data.currentMagnet = null;\n                }\n            }\n            else {\n                // Make sure we'll unset previous magnet.\n                data.currentMagnet = null;\n            }\n        }\n        data.currentTarget = target;\n        this.cell.prop(data.terminalType, { x, y }, Object.assign(Object.assign({}, data.options), { ui: true }));\n    }\n    arrowheadDragged(data, x, y) {\n        const view = data.currentView;\n        const magnet = data.currentMagnet;\n        if (!magnet || !view) {\n            return;\n        }\n        view.unhighlight(magnet, { type: 'magnetAdsorbed' });\n        const type = data.terminalType;\n        const terminal = view.getEdgeTerminal(magnet, x, y, this.cell, type);\n        this.cell.setTerminal(type, terminal, { ui: true });\n    }\n    snapArrowhead(x, y, data) {\n        const graph = this.graph;\n        const { snap, allowEdge } = graph.options.connecting;\n        const radius = (typeof snap === 'object' && snap.radius) || 50;\n        const anchor = (typeof snap === 'object' && snap.anchor) || 'center';\n        const views = graph.renderer.findViewsInArea({\n            x: x - radius,\n            y: y - radius,\n            width: 2 * radius,\n            height: 2 * radius,\n        }, { nodeOnly: true });\n        if (allowEdge) {\n            const edgeViews = graph.renderer\n                .findEdgeViewsFromPoint({ x, y }, radius)\n                .filter((view) => {\n                return view !== this;\n            });\n            views.push(...edgeViews);\n        }\n        const prevView = data.closestView || null;\n        const prevMagnet = data.closestMagnet || null;\n        data.closestView = null;\n        data.closestMagnet = null;\n        let distance;\n        let minDistance = Number.MAX_SAFE_INTEGER;\n        const pos = new Point(x, y);\n        views.forEach((view) => {\n            if (view.container.getAttribute('magnet') !== 'false') {\n                if (view.isNodeView()) {\n                    distance =\n                        anchor === 'center'\n                            ? view.cell.getBBox().getCenter().distance(pos)\n                            : view.cell.getBBox().getNearestPointToPoint(pos).distance(pos);\n                }\n                else if (view.isEdgeView()) {\n                    const point = view.getClosestPoint(pos);\n                    if (point) {\n                        distance = point.distance(pos);\n                    }\n                    else {\n                        distance = Number.MAX_SAFE_INTEGER;\n                    }\n                }\n                if (distance < radius && distance < minDistance) {\n                    if (prevMagnet === view.container ||\n                        this.validateConnection(...data.getValidateConnectionArgs(view, null), view.getEdgeTerminal(view.container, x, y, this.cell, data.terminalType))) {\n                        minDistance = distance;\n                        data.closestView = view;\n                        data.closestMagnet = view.container;\n                    }\n                }\n            }\n            view.container.querySelectorAll('[magnet]').forEach((magnet) => {\n                if (magnet.getAttribute('magnet') !== 'false') {\n                    const bbox = view.getBBoxOfElement(magnet);\n                    distance = pos.distance(bbox.getCenter());\n                    if (distance < radius && distance < minDistance) {\n                        if (prevMagnet === magnet ||\n                            this.validateConnection(...data.getValidateConnectionArgs(view, magnet), view.getEdgeTerminal(magnet, x, y, this.cell, data.terminalType))) {\n                            minDistance = distance;\n                            data.closestView = view;\n                            data.closestMagnet = magnet;\n                        }\n                    }\n                }\n            });\n        });\n        let terminal;\n        const type = data.terminalType;\n        const closestView = data.closestView;\n        const closestMagnet = data.closestMagnet;\n        const changed = prevMagnet !== closestMagnet;\n        if (prevView && changed) {\n            prevView.unhighlight(prevMagnet, {\n                type: 'magnetAdsorbed',\n            });\n        }\n        if (closestView) {\n            if (!changed) {\n                return;\n            }\n            closestView.highlight(closestMagnet, {\n                type: 'magnetAdsorbed',\n            });\n            terminal = closestView.getEdgeTerminal(closestMagnet, x, y, this.cell, type);\n        }\n        else {\n            terminal = { x, y };\n        }\n        this.cell.setTerminal(type, terminal, {}, Object.assign(Object.assign({}, data.options), { ui: true }));\n    }\n    snapArrowheadEnd(data) {\n        // Finish off link snapping.\n        // Everything except view unhighlighting was already done on pointermove.\n        const closestView = data.closestView;\n        const closestMagnet = data.closestMagnet;\n        if (closestView && closestMagnet) {\n            closestView.unhighlight(closestMagnet, {\n                type: 'magnetAdsorbed',\n            });\n            data.currentMagnet = closestView.findMagnet(closestMagnet);\n        }\n        data.closestView = null;\n        data.closestMagnet = null;\n    }\n    finishEmbedding(data) {\n        // Resets parent of the edge if embedding is enabled\n        if (this.graph.options.embedding.enabled && this.cell.updateParent()) {\n            // Make sure we don't reverse to the original 'z' index\n            data.zIndex = null;\n        }\n    }\n    fallbackConnection(data) {\n        switch (data.fallbackAction) {\n            case 'remove':\n                this.cell.remove({ ui: true });\n                break;\n            case 'revert':\n            default:\n                this.cell.prop(data.terminalType, data.initialTerminal, {\n                    ui: true,\n                });\n                break;\n        }\n    }\n    notifyConnectionEvent(data, e) {\n        const terminalType = data.terminalType;\n        const initialTerminal = data.initialTerminal;\n        const currentTerminal = this.cell[terminalType];\n        const changed = currentTerminal && !Edge.equalTerminals(initialTerminal, currentTerminal);\n        if (changed) {\n            const graph = this.graph;\n            const previous = initialTerminal;\n            const previousCell = previous.cell\n                ? graph.getCellById(previous.cell)\n                : null;\n            const previousPort = previous.port;\n            const previousView = previousCell\n                ? graph.findViewByCell(previousCell)\n                : null;\n            const previousPoint = previousCell || data.isNewEdge\n                ? null\n                : Point.create(initialTerminal).toJSON();\n            const current = currentTerminal;\n            const currentCell = current.cell ? graph.getCellById(current.cell) : null;\n            const currentPort = current.port;\n            const currentView = currentCell ? graph.findViewByCell(currentCell) : null;\n            const currentPoint = currentCell\n                ? null\n                : Point.create(currentTerminal).toJSON();\n            this.notify('edge:connected', {\n                e,\n                previousCell,\n                previousPort,\n                previousView,\n                previousPoint,\n                currentCell,\n                currentView,\n                currentPort,\n                currentPoint,\n                previousMagnet: data.initialMagnet,\n                currentMagnet: data.currentMagnet,\n                edge: this.cell,\n                view: this,\n                type: terminalType,\n                isNew: data.isNewEdge,\n            });\n        }\n    }\n    highlightAvailableMagnets(data) {\n        const graph = this.graph;\n        const cells = graph.model.getCells();\n        data.marked = {};\n        for (let i = 0, ii = cells.length; i < ii; i += 1) {\n            const view = graph.findViewByCell(cells[i]);\n            // Prevent highlighting new edge\n            // Close https://github.com/antvis/X6/issues/2853\n            if (!view || view.cell.id === this.cell.id) {\n                continue;\n            }\n            const magnets = Array.prototype.slice.call(view.container.querySelectorAll('[magnet]'));\n            if (view.container.getAttribute('magnet') !== 'false') {\n                magnets.push(view.container);\n            }\n            const availableMagnets = magnets.filter((magnet) => this.validateConnection(...data.getValidateConnectionArgs(view, magnet), view.getEdgeTerminal(magnet, data.x, data.y, this.cell, data.terminalType)));\n            if (availableMagnets.length > 0) {\n                // highlight all available magnets\n                for (let j = 0, jj = availableMagnets.length; j < jj; j += 1) {\n                    view.highlight(availableMagnets[j], { type: 'magnetAvailable' });\n                }\n                // highlight the entire view\n                view.highlight(null, { type: 'nodeAvailable' });\n                data.marked[view.cell.id] = availableMagnets;\n            }\n        }\n    }\n    unhighlightAvailableMagnets(data) {\n        const marked = data.marked || {};\n        Object.keys(marked).forEach((id) => {\n            const view = this.graph.findViewByCell(id);\n            if (view) {\n                const magnets = marked[id];\n                magnets.forEach((magnet) => {\n                    view.unhighlight(magnet, { type: 'magnetAvailable' });\n                });\n                view.unhighlight(null, { type: 'nodeAvailable' });\n            }\n        });\n        data.marked = null;\n    }\n    startArrowheadDragging(e, x, y) {\n        if (!this.can('arrowheadMovable')) {\n            this.notifyUnhandledMouseDown(e, x, y);\n            return;\n        }\n        const elem = e.target;\n        const type = elem.getAttribute('data-terminal');\n        const data = this.prepareArrowheadDragging(type, { x, y });\n        this.setEventData(e, data);\n    }\n    dragArrowhead(e, x, y) {\n        const data = this.getEventData(e);\n        if (this.graph.options.connecting.snap) {\n            this.snapArrowhead(x, y, data);\n        }\n        else {\n            this.arrowheadDragging(this.getEventTarget(e), x, y, data);\n        }\n    }\n    stopArrowheadDragging(e, x, y) {\n        const graph = this.graph;\n        const data = this.getEventData(e);\n        if (graph.options.connecting.snap) {\n            this.snapArrowheadEnd(data);\n        }\n        else {\n            this.arrowheadDragged(data, x, y);\n        }\n        const valid = this.validateEdge(this.cell, data.terminalType, data.initialTerminal);\n        if (valid) {\n            this.finishEmbedding(data);\n            this.notifyConnectionEvent(data, e);\n        }\n        else {\n            // If the changed edge is not allowed, revert to its previous state.\n            this.fallbackConnection(data);\n        }\n        this.afterArrowheadDragging(data);\n    }\n    // #endregion\n    // #region drag lable\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    startLabelDragging(e, x, y) {\n        if (this.can('edgeLabelMovable')) {\n            const target = e.currentTarget;\n            const index = parseInt(target.getAttribute('data-index'), 10);\n            const positionAngle = this.getLabelPositionAngle(index);\n            const labelPositionArgs = this.getLabelPositionArgs(index);\n            const defaultLabelPositionArgs = this.getDefaultLabelPositionArgs();\n            const positionArgs = this.mergeLabelPositionArgs(labelPositionArgs, defaultLabelPositionArgs);\n            this.setEventData(e, {\n                index,\n                positionAngle,\n                positionArgs,\n                stopPropagation: true,\n                action: 'drag-label',\n            });\n        }\n        else {\n            // If labels can't be dragged no default action is triggered.\n            this.setEventData(e, { stopPropagation: true });\n        }\n        this.graph.view.delegateDragEvents(e, this);\n    }\n    dragLabel(e, x, y) {\n        const data = this.getEventData(e);\n        const originLabel = this.cell.getLabelAt(data.index);\n        const label = ObjectExt.merge({}, originLabel, {\n            position: this.getLabelPosition(x, y, data.positionAngle, data.positionArgs),\n        });\n        this.cell.setLabelAt(data.index, label);\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    stopLabelDragging(e, x, y) { }\n}\n(function (EdgeView) {\n    EdgeView.toStringTag = `X6.${EdgeView.name}`;\n    function isEdgeView(instance) {\n        if (instance == null) {\n            return false;\n        }\n        if (instance instanceof EdgeView) {\n            return true;\n        }\n        const tag = instance[Symbol.toStringTag];\n        const view = instance;\n        if ((tag == null || tag === EdgeView.toStringTag) &&\n            typeof view.isNodeView === 'function' &&\n            typeof view.isEdgeView === 'function' &&\n            typeof view.confirmUpdate === 'function' &&\n            typeof view.update === 'function' &&\n            typeof view.getConnection === 'function') {\n            return true;\n        }\n        return false;\n    }\n    EdgeView.isEdgeView = isEdgeView;\n})(EdgeView || (EdgeView = {}));\nEdgeView.config({\n    isSvgElement: true,\n    priority: 1,\n    bootstrap: ['render', 'source', 'target'],\n    actions: {\n        view: ['render'],\n        markup: ['render'],\n        attrs: ['update'],\n        source: ['source', 'update'],\n        target: ['target', 'update'],\n        router: ['update'],\n        connector: ['update'],\n        labels: ['labels'],\n        defaultLabel: ['labels'],\n        tools: ['tools'],\n        vertices: ['vertices', 'update'],\n    },\n});\nEdgeView.registry.register('edge', EdgeView, true);\n//# sourceMappingURL=edge.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Dom, FunctionExt } from '@antv/x6-common';\nimport { Cell } from '../model';\nimport { Config } from '../config';\nimport { View, Markup } from '../view';\nexport class GraphView extends View {\n    /** Graph's `this.container` is from outer, should not dispose */\n    get disposeContainer() {\n        return false;\n    }\n    get options() {\n        return this.graph.options;\n    }\n    constructor(graph) {\n        super();\n        this.graph = graph;\n        const { selectors, fragment } = Markup.parseJSONMarkup(GraphView.markup);\n        this.background = selectors.background;\n        this.grid = selectors.grid;\n        this.svg = selectors.svg;\n        this.defs = selectors.defs;\n        this.viewport = selectors.viewport;\n        this.primer = selectors.primer;\n        this.stage = selectors.stage;\n        this.decorator = selectors.decorator;\n        this.overlay = selectors.overlay;\n        this.container = this.options.container;\n        this.restore = GraphView.snapshoot(this.container);\n        Dom.addClass(this.container, this.prefixClassName('graph'));\n        Dom.append(this.container, fragment);\n        this.delegateEvents();\n    }\n    delegateEvents() {\n        const ctor = this.constructor;\n        super.delegateEvents(ctor.events);\n        return this;\n    }\n    /**\n     * Guard the specified event. If the event is not interesting, it\n     * returns `true`, otherwise returns `false`.\n     */\n    guard(e, view) {\n        // handled as `contextmenu` type\n        if (e.type === 'mousedown' && e.button === 2) {\n            return true;\n        }\n        if (this.options.guard && this.options.guard(e, view)) {\n            return true;\n        }\n        if (e.data && e.data.guarded !== undefined) {\n            return e.data.guarded;\n        }\n        if (view && view.cell && Cell.isCell(view.cell)) {\n            return false;\n        }\n        if (this.svg === e.target ||\n            this.container === e.target ||\n            this.svg.contains(e.target)) {\n            return false;\n        }\n        return true;\n    }\n    findView(elem) {\n        return this.graph.findViewByElem(elem);\n    }\n    onDblClick(evt) {\n        if (this.options.preventDefaultDblClick) {\n            evt.preventDefault();\n        }\n        const e = this.normalizeEvent(evt);\n        const view = this.findView(e.target);\n        if (this.guard(e, view)) {\n            return;\n        }\n        const localPoint = this.graph.snapToGrid(e.clientX, e.clientY);\n        if (view) {\n            view.onDblClick(e, localPoint.x, localPoint.y);\n        }\n        else {\n            this.graph.trigger('blank:dblclick', {\n                e,\n                x: localPoint.x,\n                y: localPoint.y,\n            });\n        }\n    }\n    onClick(evt) {\n        if (this.getMouseMovedCount(evt) <= this.options.clickThreshold) {\n            const e = this.normalizeEvent(evt);\n            const view = this.findView(e.target);\n            if (this.guard(e, view)) {\n                return;\n            }\n            const localPoint = this.graph.snapToGrid(e.clientX, e.clientY);\n            if (view) {\n                view.onClick(e, localPoint.x, localPoint.y);\n            }\n            else {\n                this.graph.trigger('blank:click', {\n                    e,\n                    x: localPoint.x,\n                    y: localPoint.y,\n                });\n            }\n        }\n    }\n    isPreventDefaultContextMenu(view) {\n        let preventDefaultContextMenu = this.options.preventDefaultContextMenu;\n        if (typeof preventDefaultContextMenu === 'function') {\n            preventDefaultContextMenu = FunctionExt.call(preventDefaultContextMenu, this.graph, { view });\n        }\n        return preventDefaultContextMenu;\n    }\n    onContextMenu(evt) {\n        const e = this.normalizeEvent(evt);\n        const view = this.findView(e.target);\n        if (this.isPreventDefaultContextMenu(view)) {\n            evt.preventDefault();\n        }\n        if (this.guard(e, view)) {\n            return;\n        }\n        const localPoint = this.graph.snapToGrid(e.clientX, e.clientY);\n        if (view) {\n            view.onContextMenu(e, localPoint.x, localPoint.y);\n        }\n        else {\n            this.graph.trigger('blank:contextmenu', {\n                e,\n                x: localPoint.x,\n                y: localPoint.y,\n            });\n        }\n    }\n    delegateDragEvents(e, view) {\n        if (e.data == null) {\n            e.data = {};\n        }\n        this.setEventData(e, {\n            currentView: view || null,\n            mouseMovedCount: 0,\n            startPosition: {\n                x: e.clientX,\n                y: e.clientY,\n            },\n        });\n        const ctor = this.constructor;\n        this.delegateDocumentEvents(ctor.documentEvents, e.data);\n        this.undelegateEvents();\n    }\n    getMouseMovedCount(e) {\n        const data = this.getEventData(e);\n        return data.mouseMovedCount || 0;\n    }\n    onMouseDown(evt) {\n        const e = this.normalizeEvent(evt);\n        const view = this.findView(e.target);\n        if (this.guard(e, view)) {\n            return;\n        }\n        if (this.options.preventDefaultMouseDown) {\n            evt.preventDefault();\n        }\n        const localPoint = this.graph.snapToGrid(e.clientX, e.clientY);\n        if (view) {\n            view.onMouseDown(e, localPoint.x, localPoint.y);\n        }\n        else {\n            if (this.options.preventDefaultBlankAction &&\n                ['touchstart'].includes(e.type)) {\n                evt.preventDefault();\n            }\n            this.graph.trigger('blank:mousedown', {\n                e,\n                x: localPoint.x,\n                y: localPoint.y,\n            });\n        }\n        this.delegateDragEvents(e, view);\n    }\n    onMouseMove(evt) {\n        const data = this.getEventData(evt);\n        const startPosition = data.startPosition;\n        if (startPosition &&\n            startPosition.x === evt.clientX &&\n            startPosition.y === evt.clientY) {\n            return;\n        }\n        if (data.mouseMovedCount == null) {\n            data.mouseMovedCount = 0;\n        }\n        data.mouseMovedCount += 1;\n        const mouseMovedCount = data.mouseMovedCount;\n        if (mouseMovedCount <= this.options.moveThreshold) {\n            return;\n        }\n        const e = this.normalizeEvent(evt);\n        const localPoint = this.graph.snapToGrid(e.clientX, e.clientY);\n        const view = data.currentView;\n        if (view) {\n            view.onMouseMove(e, localPoint.x, localPoint.y);\n        }\n        else {\n            this.graph.trigger('blank:mousemove', {\n                e,\n                x: localPoint.x,\n                y: localPoint.y,\n            });\n        }\n        this.setEventData(e, data);\n    }\n    onMouseUp(e) {\n        this.undelegateDocumentEvents();\n        const normalized = this.normalizeEvent(e);\n        const localPoint = this.graph.snapToGrid(normalized.clientX, normalized.clientY);\n        const data = this.getEventData(e);\n        const view = data.currentView;\n        if (view) {\n            view.onMouseUp(normalized, localPoint.x, localPoint.y);\n        }\n        else {\n            this.graph.trigger('blank:mouseup', {\n                e: normalized,\n                x: localPoint.x,\n                y: localPoint.y,\n            });\n        }\n        if (!e.isPropagationStopped()) {\n            const ev = new Dom.EventObject(e, {\n                type: 'click',\n                data: e.data,\n            });\n            this.onClick(ev);\n        }\n        e.stopImmediatePropagation();\n        this.delegateEvents();\n    }\n    onMouseOver(evt) {\n        const e = this.normalizeEvent(evt);\n        const view = this.findView(e.target);\n        if (this.guard(e, view)) {\n            return;\n        }\n        if (view) {\n            view.onMouseOver(e);\n        }\n        else {\n            // prevent border of paper from triggering this\n            if (this.container === e.target) {\n                return;\n            }\n            this.graph.trigger('blank:mouseover', { e });\n        }\n    }\n    onMouseOut(evt) {\n        const e = this.normalizeEvent(evt);\n        const view = this.findView(e.target);\n        if (this.guard(e, view)) {\n            return;\n        }\n        if (view) {\n            view.onMouseOut(e);\n        }\n        else {\n            if (this.container === e.target) {\n                return;\n            }\n            this.graph.trigger('blank:mouseout', { e });\n        }\n    }\n    onMouseEnter(evt) {\n        const e = this.normalizeEvent(evt);\n        const view = this.findView(e.target);\n        if (this.guard(e, view)) {\n            return;\n        }\n        const relatedView = this.graph.findViewByElem(e.relatedTarget);\n        if (view) {\n            if (relatedView === view) {\n                // mouse moved from tool to view\n                return;\n            }\n            view.onMouseEnter(e);\n        }\n        else {\n            if (relatedView) {\n                return;\n            }\n            this.graph.trigger('graph:mouseenter', { e });\n        }\n    }\n    onMouseLeave(evt) {\n        const e = this.normalizeEvent(evt);\n        const view = this.findView(e.target);\n        if (this.guard(e, view)) {\n            return;\n        }\n        const relatedView = this.graph.findViewByElem(e.relatedTarget);\n        if (view) {\n            if (relatedView === view) {\n                // mouse moved from view to tool\n                return;\n            }\n            view.onMouseLeave(e);\n        }\n        else {\n            if (relatedView) {\n                return;\n            }\n            this.graph.trigger('graph:mouseleave', { e });\n        }\n    }\n    onMouseWheel(evt) {\n        const e = this.normalizeEvent(evt);\n        const view = this.findView(e.target);\n        if (this.guard(e, view)) {\n            return;\n        }\n        const originalEvent = e.originalEvent;\n        const localPoint = this.graph.snapToGrid(originalEvent.clientX, originalEvent.clientY);\n        const delta = Math.max(-1, Math.min(1, originalEvent.wheelDelta || -originalEvent.detail));\n        if (view) {\n            view.onMouseWheel(e, localPoint.x, localPoint.y, delta);\n        }\n        else {\n            this.graph.trigger('blank:mousewheel', {\n                e,\n                delta,\n                x: localPoint.x,\n                y: localPoint.y,\n            });\n        }\n    }\n    onCustomEvent(evt) {\n        const elem = evt.currentTarget;\n        const event = elem.getAttribute('event') || elem.getAttribute('data-event');\n        if (event) {\n            const view = this.findView(elem);\n            if (view) {\n                const e = this.normalizeEvent(evt);\n                if (this.guard(e, view)) {\n                    return;\n                }\n                const localPoint = this.graph.snapToGrid(e.clientX, e.clientY);\n                view.onCustomEvent(e, event, localPoint.x, localPoint.y);\n            }\n        }\n    }\n    handleMagnetEvent(evt, handler) {\n        const magnetElem = evt.currentTarget;\n        const magnetValue = magnetElem.getAttribute('magnet');\n        if (magnetValue && magnetValue.toLowerCase() !== 'false') {\n            const view = this.findView(magnetElem);\n            if (view) {\n                const e = this.normalizeEvent(evt);\n                if (this.guard(e, view)) {\n                    return;\n                }\n                const localPoint = this.graph.snapToGrid(e.clientX, e.clientY);\n                FunctionExt.call(handler, this.graph, view, e, magnetElem, localPoint.x, localPoint.y);\n            }\n        }\n    }\n    onMagnetMouseDown(e) {\n        this.handleMagnetEvent(e, (view, e, magnet, x, y) => {\n            view.onMagnetMouseDown(e, magnet, x, y);\n        });\n    }\n    onMagnetDblClick(e) {\n        this.handleMagnetEvent(e, (view, e, magnet, x, y) => {\n            view.onMagnetDblClick(e, magnet, x, y);\n        });\n    }\n    onMagnetContextMenu(e) {\n        const view = this.findView(e.target);\n        if (this.isPreventDefaultContextMenu(view)) {\n            e.preventDefault();\n        }\n        this.handleMagnetEvent(e, (view, e, magnet, x, y) => {\n            view.onMagnetContextMenu(e, magnet, x, y);\n        });\n    }\n    onLabelMouseDown(evt) {\n        const labelNode = evt.currentTarget;\n        const view = this.findView(labelNode);\n        if (view) {\n            const e = this.normalizeEvent(evt);\n            if (this.guard(e, view)) {\n                return;\n            }\n            const localPoint = this.graph.snapToGrid(e.clientX, e.clientY);\n            view.onLabelMouseDown(e, localPoint.x, localPoint.y);\n        }\n    }\n    onImageDragStart() {\n        // This is the only way to prevent image dragging in Firefox that works.\n        // Setting -moz-user-select: none, draggable=\"false\" attribute or\n        // user-drag: none didn't help.\n        return false;\n    }\n    dispose() {\n        this.undelegateEvents();\n        this.undelegateDocumentEvents();\n        this.restore();\n        this.restore = () => { };\n    }\n}\n__decorate([\n    View.dispose()\n], GraphView.prototype, \"dispose\", null);\n(function (GraphView) {\n    const prefixCls = `${Config.prefixCls}-graph`;\n    GraphView.markup = [\n        {\n            ns: Dom.ns.xhtml,\n            tagName: 'div',\n            selector: 'background',\n            className: `${prefixCls}-background`,\n        },\n        {\n            ns: Dom.ns.xhtml,\n            tagName: 'div',\n            selector: 'grid',\n            className: `${prefixCls}-grid`,\n        },\n        {\n            ns: Dom.ns.svg,\n            tagName: 'svg',\n            selector: 'svg',\n            className: `${prefixCls}-svg`,\n            attrs: {\n                width: '100%',\n                height: '100%',\n                'xmlns:xlink': Dom.ns.xlink,\n            },\n            children: [\n                {\n                    tagName: 'defs',\n                    selector: 'defs',\n                },\n                {\n                    tagName: 'g',\n                    selector: 'viewport',\n                    className: `${prefixCls}-svg-viewport`,\n                    children: [\n                        {\n                            tagName: 'g',\n                            selector: 'primer',\n                            className: `${prefixCls}-svg-primer`,\n                        },\n                        {\n                            tagName: 'g',\n                            selector: 'stage',\n                            className: `${prefixCls}-svg-stage`,\n                        },\n                        {\n                            tagName: 'g',\n                            selector: 'decorator',\n                            className: `${prefixCls}-svg-decorator`,\n                        },\n                        {\n                            tagName: 'g',\n                            selector: 'overlay',\n                            className: `${prefixCls}-svg-overlay`,\n                        },\n                    ],\n                },\n            ],\n        },\n    ];\n    function snapshoot(elem) {\n        const cloned = elem.cloneNode();\n        elem.childNodes.forEach((child) => cloned.appendChild(child));\n        return () => {\n            // remove all children\n            Dom.empty(elem);\n            // remove all attributes\n            while (elem.attributes.length > 0) {\n                elem.removeAttribute(elem.attributes[0].name);\n            }\n            // restore attributes\n            for (let i = 0, l = cloned.attributes.length; i < l; i += 1) {\n                const attr = cloned.attributes[i];\n                elem.setAttribute(attr.name, attr.value);\n            }\n            // restore children\n            cloned.childNodes.forEach((child) => elem.appendChild(child));\n        };\n    }\n    GraphView.snapshoot = snapshoot;\n})(GraphView || (GraphView = {}));\n(function (GraphView) {\n    const prefixCls = Config.prefixCls;\n    GraphView.events = {\n        dblclick: 'onDblClick',\n        contextmenu: 'onContextMenu',\n        touchstart: 'onMouseDown',\n        mousedown: 'onMouseDown',\n        mouseover: 'onMouseOver',\n        mouseout: 'onMouseOut',\n        mouseenter: 'onMouseEnter',\n        mouseleave: 'onMouseLeave',\n        mousewheel: 'onMouseWheel',\n        DOMMouseScroll: 'onMouseWheel',\n        [`mouseenter  .${prefixCls}-cell`]: 'onMouseEnter',\n        [`mouseleave  .${prefixCls}-cell`]: 'onMouseLeave',\n        [`mouseenter  .${prefixCls}-cell-tools`]: 'onMouseEnter',\n        [`mouseleave  .${prefixCls}-cell-tools`]: 'onMouseLeave',\n        [`mousedown   .${prefixCls}-cell [event]`]: 'onCustomEvent',\n        [`touchstart  .${prefixCls}-cell [event]`]: 'onCustomEvent',\n        [`mousedown   .${prefixCls}-cell [data-event]`]: 'onCustomEvent',\n        [`touchstart  .${prefixCls}-cell [data-event]`]: 'onCustomEvent',\n        [`dblclick    .${prefixCls}-cell [magnet]`]: 'onMagnetDblClick',\n        [`contextmenu .${prefixCls}-cell [magnet]`]: 'onMagnetContextMenu',\n        [`mousedown   .${prefixCls}-cell [magnet]`]: 'onMagnetMouseDown',\n        [`touchstart  .${prefixCls}-cell [magnet]`]: 'onMagnetMouseDown',\n        [`dblclick    .${prefixCls}-cell [data-magnet]`]: 'onMagnetDblClick',\n        [`contextmenu .${prefixCls}-cell [data-magnet]`]: 'onMagnetContextMenu',\n        [`mousedown   .${prefixCls}-cell [data-magnet]`]: 'onMagnetMouseDown',\n        [`touchstart  .${prefixCls}-cell [data-magnet]`]: 'onMagnetMouseDown',\n        [`dragstart   .${prefixCls}-cell image`]: 'onImageDragStart',\n        [`mousedown   .${prefixCls}-edge .${prefixCls}-edge-label`]: 'onLabelMouseDown',\n        [`touchstart  .${prefixCls}-edge .${prefixCls}-edge-label`]: 'onLabelMouseDown',\n    };\n    GraphView.documentEvents = {\n        mousemove: 'onMouseMove',\n        touchmove: 'onMouseMove',\n        mouseup: 'onMouseUp',\n        touchend: 'onMouseUp',\n        touchcancel: 'onMouseUp',\n    };\n})(GraphView || (GraphView = {}));\n//# sourceMappingURL=view.js.map","/* eslint-disable */\n/**\n * Auto generated file, do not modify it!\n */\nexport const content = `.x6-graph {\n  position: relative;\n  overflow: hidden;\n  outline: none;\n  touch-action: none;\n}\n.x6-graph-background,\n.x6-graph-grid,\n.x6-graph-svg {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n}\n.x6-graph-background-stage,\n.x6-graph-grid-stage,\n.x6-graph-svg-stage {\n  user-select: none;\n}\n.x6-graph.x6-graph-pannable {\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n}\n.x6-graph.x6-graph-panning {\n  cursor: grabbing;\n  cursor: -moz-grabbing;\n  cursor: -webkit-grabbing;\n  user-select: none;\n}\n.x6-node {\n  cursor: move;\n  /* stylelint-disable-next-line */\n}\n.x6-node.x6-node-immovable {\n  cursor: default;\n}\n.x6-node * {\n  -webkit-user-drag: none;\n}\n.x6-node .scalable * {\n  vector-effect: non-scaling-stroke;\n}\n.x6-node [magnet='true'] {\n  cursor: crosshair;\n  transition: opacity 0.3s;\n}\n.x6-node [magnet='true']:hover {\n  opacity: 0.7;\n}\n.x6-node foreignObject {\n  display: block;\n  overflow: visible;\n  background-color: transparent;\n}\n.x6-node foreignObject > body {\n  position: static;\n  width: 100%;\n  height: 100%;\n  margin: 0;\n  padding: 0;\n  overflow: visible;\n  background-color: transparent;\n}\n.x6-edge .source-marker,\n.x6-edge .target-marker {\n  vector-effect: non-scaling-stroke;\n}\n.x6-edge .connection {\n  stroke-linejoin: round;\n  fill: none;\n}\n.x6-edge .connection-wrap {\n  cursor: move;\n  opacity: 0;\n  fill: none;\n  stroke: #000;\n  stroke-width: 15;\n  stroke-linecap: round;\n  stroke-linejoin: round;\n}\n.x6-edge .connection-wrap:hover {\n  opacity: 0.4;\n  stroke-opacity: 0.4;\n}\n.x6-edge .vertices {\n  cursor: move;\n  opacity: 0;\n}\n.x6-edge .vertices .vertex {\n  fill: #1abc9c;\n}\n.x6-edge .vertices .vertex :hover {\n  fill: #34495e;\n  stroke: none;\n}\n.x6-edge .vertices .vertex-remove {\n  cursor: pointer;\n  fill: #fff;\n}\n.x6-edge .vertices .vertex-remove-area {\n  cursor: pointer;\n  opacity: 0.1;\n}\n.x6-edge .vertices .vertex-group:hover .vertex-remove-area {\n  opacity: 1;\n}\n.x6-edge .arrowheads {\n  cursor: move;\n  opacity: 0;\n}\n.x6-edge .arrowheads .arrowhead {\n  fill: #1abc9c;\n}\n.x6-edge .arrowheads .arrowhead :hover {\n  fill: #f39c12;\n  stroke: none;\n}\n.x6-edge .tools {\n  cursor: pointer;\n  opacity: 0;\n}\n.x6-edge .tools .tool-options {\n  display: none;\n}\n.x6-edge .tools .tool-remove circle {\n  fill: #f00;\n}\n.x6-edge .tools .tool-remove path {\n  fill: #fff;\n}\n.x6-edge:hover .vertices,\n.x6-edge:hover .arrowheads,\n.x6-edge:hover .tools {\n  opacity: 1;\n}\n.x6-highlight-opacity {\n  opacity: 0.3;\n}\n.x6-cell-tool-editor {\n  position: relative;\n  display: inline-block;\n  min-height: 1em;\n  margin: 0;\n  padding: 0;\n  line-height: 1;\n  white-space: normal;\n  text-align: center;\n  vertical-align: top;\n  overflow-wrap: normal;\n  outline: none;\n  transform-origin: 0 0;\n  -webkit-user-drag: none;\n}\n.x6-edge-tool-editor {\n  border: 1px solid #275fc5;\n  border-radius: 2px;\n}\n`;\n//# sourceMappingURL=raw.js.map","import { Disposable } from '@antv/x6-common';\nexport class Base extends Disposable {\n    get options() {\n        return this.graph.options;\n    }\n    get model() {\n        return this.graph.model;\n    }\n    get view() {\n        return this.graph.view;\n    }\n    constructor(graph) {\n        super();\n        this.graph = graph;\n        this.init();\n    }\n    init() { }\n}\n//# sourceMappingURL=base.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { CssLoader } from '@antv/x6-common';\nimport { Config } from '../config';\nimport { content } from '../style/raw';\nimport { Base } from './base';\nexport class CSSManager extends Base {\n    init() {\n        if (Config.autoInsertCSS) {\n            CssLoader.ensure('core', content);\n        }\n    }\n    dispose() {\n        CssLoader.clean('core');\n    }\n}\n__decorate([\n    CSSManager.dispose()\n], CSSManager.prototype, \"dispose\", null);\n//# sourceMappingURL=css.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { ObjectExt } from '@antv/x6-common';\nimport { Config } from '../config';\nimport { Edge as StandardEdge } from '../shape';\nexport var Options;\n(function (Options) {\n    function get(options) {\n        const { grid, panning, mousewheel, embedding } = options, others = __rest(options\n        // size\n        // ----\n        , [\"grid\", \"panning\", \"mousewheel\", \"embedding\"]);\n        // size\n        // ----\n        const container = options.container;\n        if (container != null) {\n            if (others.width == null) {\n                others.width = container.clientWidth;\n            }\n            if (others.height == null) {\n                others.height = container.clientHeight;\n            }\n        }\n        else {\n            throw new Error(`Ensure the container of the graph is specified and valid`);\n        }\n        const result = ObjectExt.merge({}, Options.defaults, others);\n        // grid\n        // ----\n        const defaultGrid = { size: 10, visible: false };\n        if (typeof grid === 'number') {\n            result.grid = { size: grid, visible: false };\n        }\n        else if (typeof grid === 'boolean') {\n            result.grid = Object.assign(Object.assign({}, defaultGrid), { visible: grid });\n        }\n        else {\n            result.grid = Object.assign(Object.assign({}, defaultGrid), grid);\n        }\n        // booleas\n        // -------\n        const booleas = [\n            'panning',\n            'mousewheel',\n            'embedding',\n        ];\n        booleas.forEach((key) => {\n            const val = options[key];\n            if (typeof val === 'boolean') {\n                result[key].enabled = val;\n            }\n            else {\n                result[key] = Object.assign(Object.assign({}, result[key]), val);\n            }\n        });\n        return result;\n    }\n    Options.get = get;\n})(Options || (Options = {}));\n(function (Options) {\n    Options.defaults = {\n        x: 0,\n        y: 0,\n        scaling: {\n            min: 0.01,\n            max: 16,\n        },\n        grid: {\n            size: 10,\n            visible: false,\n        },\n        background: false,\n        panning: {\n            enabled: false,\n            eventTypes: ['leftMouseDown'],\n        },\n        mousewheel: {\n            enabled: false,\n            factor: 1.2,\n            zoomAtMousePosition: true,\n        },\n        highlighting: {\n            default: {\n                name: 'stroke',\n                args: {\n                    padding: 3,\n                },\n            },\n            nodeAvailable: {\n                name: 'className',\n                args: {\n                    className: Config.prefix('available-node'),\n                },\n            },\n            magnetAvailable: {\n                name: 'className',\n                args: {\n                    className: Config.prefix('available-magnet'),\n                },\n            },\n        },\n        connecting: {\n            snap: false,\n            allowLoop: true,\n            allowNode: true,\n            allowEdge: false,\n            allowPort: true,\n            allowBlank: true,\n            allowMulti: true,\n            highlight: false,\n            anchor: 'center',\n            edgeAnchor: 'ratio',\n            connectionPoint: 'boundary',\n            router: 'normal',\n            connector: 'normal',\n            validateConnection({ type, sourceView, targetView }) {\n                const view = type === 'target' ? targetView : sourceView;\n                return view != null;\n            },\n            createEdge() {\n                return new StandardEdge();\n            },\n        },\n        translating: {\n            restrict: false,\n        },\n        embedding: {\n            enabled: false,\n            findParent: 'bbox',\n            frontOnly: true,\n            validate: () => true,\n        },\n        moveThreshold: 0,\n        clickThreshold: 0,\n        magnetThreshold: 0,\n        preventDefaultDblClick: true,\n        preventDefaultMouseDown: false,\n        preventDefaultContextMenu: true,\n        preventDefaultBlankAction: true,\n        interacting: {\n            edgeLabelMovable: false,\n        },\n        async: true,\n        virtual: false,\n        guard: () => false,\n    };\n})(Options || (Options = {}));\n//# sourceMappingURL=options.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Dom, Vector } from '@antv/x6-common';\nimport * as Registry from '../registry';\nimport { Base } from './base';\nexport class GridManager extends Base {\n    get elem() {\n        return this.view.grid;\n    }\n    get grid() {\n        return this.options.grid;\n    }\n    init() {\n        this.startListening();\n        this.draw(this.grid);\n    }\n    startListening() {\n        this.graph.on('scale', this.update, this);\n        this.graph.on('translate', this.update, this);\n    }\n    stopListening() {\n        this.graph.off('scale', this.update, this);\n        this.graph.off('translate', this.update, this);\n    }\n    setVisible(visible) {\n        if (this.grid.visible !== visible) {\n            this.grid.visible = visible;\n            this.update();\n        }\n    }\n    getGridSize() {\n        return this.grid.size;\n    }\n    setGridSize(size) {\n        this.grid.size = Math.max(size, 1);\n        this.update();\n    }\n    show() {\n        this.setVisible(true);\n        this.update();\n    }\n    hide() {\n        this.setVisible(false);\n        this.update();\n    }\n    clear() {\n        this.elem.style.backgroundImage = '';\n    }\n    draw(options) {\n        this.clear();\n        this.instance = null;\n        Object.assign(this.grid, options);\n        this.patterns = this.resolveGrid(options);\n        this.update();\n    }\n    update(options = {}) {\n        const gridSize = this.grid.size;\n        if (gridSize <= 1 || !this.grid.visible) {\n            return this.clear();\n        }\n        const ctm = this.graph.matrix();\n        const grid = this.getInstance();\n        const items = Array.isArray(options) ? options : [options];\n        this.patterns.forEach((settings, index) => {\n            const id = `pattern_${index}`;\n            const sx = ctm.a || 1;\n            const sy = ctm.d || 1;\n            const { update, markup } = settings, others = __rest(settings, [\"update\", \"markup\"]);\n            const options = Object.assign(Object.assign(Object.assign({}, others), items[index]), { sx,\n                sy, ox: ctm.e || 0, oy: ctm.f || 0, width: gridSize * sx, height: gridSize * sy });\n            if (!grid.has(id)) {\n                grid.add(id, Vector.create('pattern', { id, patternUnits: 'userSpaceOnUse' }, Vector.createVectors(markup)).node);\n            }\n            const patternElem = grid.get(id);\n            if (typeof update === 'function') {\n                update(patternElem.childNodes[0], options);\n            }\n            let x = options.ox % options.width;\n            if (x < 0) {\n                x += options.width;\n            }\n            let y = options.oy % options.height;\n            if (y < 0) {\n                y += options.height;\n            }\n            Dom.attr(patternElem, {\n                x,\n                y,\n                width: options.width,\n                height: options.height,\n            });\n        });\n        const base64 = new XMLSerializer().serializeToString(grid.root);\n        const url = `url(data:image/svg+xml;base64,${btoa(base64)})`;\n        this.elem.style.backgroundImage = url;\n    }\n    getInstance() {\n        if (!this.instance) {\n            this.instance = new Registry.Grid();\n        }\n        return this.instance;\n    }\n    resolveGrid(options) {\n        if (!options) {\n            return [];\n        }\n        const type = options.type;\n        if (type == null) {\n            return [\n                Object.assign(Object.assign({}, Registry.Grid.presets.dot), options.args),\n            ];\n        }\n        const items = Registry.Grid.registry.get(type);\n        if (items) {\n            let args = options.args || [];\n            if (!Array.isArray(args)) {\n                args = [args];\n            }\n            return Array.isArray(items)\n                ? items.map((item, index) => (Object.assign(Object.assign({}, item), args[index])))\n                : [Object.assign(Object.assign({}, items), args[0])];\n        }\n        return Registry.Grid.registry.onNotFound(type);\n    }\n    dispose() {\n        this.stopListening();\n        this.clear();\n    }\n}\n__decorate([\n    Base.dispose()\n], GridManager.prototype, \"dispose\", null);\n//# sourceMappingURL=grid.js.map","import { Dom, NumberExt } from '@antv/x6-common';\nimport { Point, Rectangle } from '@antv/x6-geometry';\nimport { Base } from './base';\nimport { Util } from '../util';\nexport class TransformManager extends Base {\n    get container() {\n        return this.graph.view.container;\n    }\n    get viewport() {\n        return this.graph.view.viewport;\n    }\n    get stage() {\n        return this.graph.view.stage;\n    }\n    init() {\n        this.resize();\n    }\n    /**\n     * Returns the current transformation matrix of the graph.\n     */\n    getMatrix() {\n        const transform = this.viewport.getAttribute('transform');\n        if (transform !== this.viewportTransformString) {\n            // `getCTM`: top-left relative to the SVG element\n            // `getScreenCTM`: top-left relative to the document\n            this.viewportMatrix = this.viewport.getCTM();\n            this.viewportTransformString = transform;\n        }\n        // Clone the cached current transformation matrix.\n        // If no matrix previously stored the identity matrix is returned.\n        return Dom.createSVGMatrix(this.viewportMatrix);\n    }\n    /**\n     * Sets new transformation with the given `matrix`\n     */\n    setMatrix(matrix) {\n        const ctm = Dom.createSVGMatrix(matrix);\n        const transform = Dom.matrixToTransformString(ctm);\n        this.viewport.setAttribute('transform', transform);\n        this.viewportMatrix = ctm;\n        this.viewportTransformString = transform;\n    }\n    resize(width, height) {\n        let w = width === undefined ? this.options.width : width;\n        let h = height === undefined ? this.options.height : height;\n        this.options.width = w;\n        this.options.height = h;\n        if (typeof w === 'number') {\n            w = Math.round(w);\n        }\n        if (typeof h === 'number') {\n            h = Math.round(h);\n        }\n        this.container.style.width = w == null ? '' : `${w}px`;\n        this.container.style.height = h == null ? '' : `${h}px`;\n        const size = this.getComputedSize();\n        this.graph.trigger('resize', Object.assign({}, size));\n        return this;\n    }\n    getComputedSize() {\n        let w = this.options.width;\n        let h = this.options.height;\n        if (!NumberExt.isNumber(w)) {\n            w = this.container.clientWidth;\n        }\n        if (!NumberExt.isNumber(h)) {\n            h = this.container.clientHeight;\n        }\n        return { width: w, height: h };\n    }\n    getScale() {\n        return Dom.matrixToScale(this.getMatrix());\n    }\n    scale(sx, sy = sx, ox = 0, oy = 0) {\n        sx = this.clampScale(sx); // eslint-disable-line\n        sy = this.clampScale(sy); // eslint-disable-line\n        if (ox || oy) {\n            const ts = this.getTranslation();\n            const tx = ts.tx - ox * (sx - 1);\n            const ty = ts.ty - oy * (sy - 1);\n            if (tx !== ts.tx || ty !== ts.ty) {\n                this.translate(tx, ty);\n            }\n        }\n        const matrix = this.getMatrix();\n        matrix.a = sx;\n        matrix.d = sy;\n        this.setMatrix(matrix);\n        this.graph.trigger('scale', { sx, sy, ox, oy });\n        return this;\n    }\n    clampScale(scale) {\n        const range = this.graph.options.scaling;\n        return NumberExt.clamp(scale, range.min || 0.01, range.max || 16);\n    }\n    getZoom() {\n        return this.getScale().sx;\n    }\n    zoom(factor, options) {\n        options = options || {}; // eslint-disable-line\n        let sx = factor;\n        let sy = factor;\n        const scale = this.getScale();\n        const clientSize = this.getComputedSize();\n        let cx = clientSize.width / 2;\n        let cy = clientSize.height / 2;\n        if (!options.absolute) {\n            sx += scale.sx;\n            sy += scale.sy;\n        }\n        if (options.scaleGrid) {\n            sx = Math.round(sx / options.scaleGrid) * options.scaleGrid;\n            sy = Math.round(sy / options.scaleGrid) * options.scaleGrid;\n        }\n        if (options.maxScale) {\n            sx = Math.min(options.maxScale, sx);\n            sy = Math.min(options.maxScale, sy);\n        }\n        if (options.minScale) {\n            sx = Math.max(options.minScale, sx);\n            sy = Math.max(options.minScale, sy);\n        }\n        if (options.center) {\n            cx = options.center.x;\n            cy = options.center.y;\n        }\n        sx = this.clampScale(sx);\n        sy = this.clampScale(sy);\n        if (cx || cy) {\n            const ts = this.getTranslation();\n            const tx = cx - (cx - ts.tx) * (sx / scale.sx);\n            const ty = cy - (cy - ts.ty) * (sy / scale.sy);\n            if (tx !== ts.tx || ty !== ts.ty) {\n                this.translate(tx, ty);\n            }\n        }\n        this.scale(sx, sy);\n        return this;\n    }\n    getRotation() {\n        return Dom.matrixToRotation(this.getMatrix());\n    }\n    rotate(angle, cx, cy) {\n        if (cx == null || cy == null) {\n            const bbox = Util.getBBox(this.stage);\n            cx = bbox.width / 2; // eslint-disable-line\n            cy = bbox.height / 2; // eslint-disable-line\n        }\n        const ctm = this.getMatrix()\n            .translate(cx, cy)\n            .rotate(angle)\n            .translate(-cx, -cy);\n        this.setMatrix(ctm);\n        return this;\n    }\n    getTranslation() {\n        return Dom.matrixToTranslation(this.getMatrix());\n    }\n    translate(tx, ty) {\n        const matrix = this.getMatrix();\n        matrix.e = tx || 0;\n        matrix.f = ty || 0;\n        this.setMatrix(matrix);\n        const ts = this.getTranslation();\n        this.options.x = ts.tx;\n        this.options.y = ts.ty;\n        this.graph.trigger('translate', Object.assign({}, ts));\n        return this;\n    }\n    setOrigin(ox, oy) {\n        return this.translate(ox || 0, oy || 0);\n    }\n    fitToContent(gridWidth, gridHeight, padding, options) {\n        if (typeof gridWidth === 'object') {\n            const opts = gridWidth;\n            gridWidth = opts.gridWidth || 1; // eslint-disable-line\n            gridHeight = opts.gridHeight || 1; // eslint-disable-line\n            padding = opts.padding || 0; // eslint-disable-line\n            options = opts; // eslint-disable-line\n        }\n        else {\n            gridWidth = gridWidth || 1; // eslint-disable-line\n            gridHeight = gridHeight || 1; // eslint-disable-line\n            padding = padding || 0; // eslint-disable-line\n            if (options == null) {\n                options = {}; // eslint-disable-line\n            }\n        }\n        const paddings = NumberExt.normalizeSides(padding);\n        const border = options.border || 0;\n        const contentArea = options.contentArea\n            ? Rectangle.create(options.contentArea)\n            : this.getContentArea(options);\n        if (border > 0) {\n            contentArea.inflate(border);\n        }\n        const scale = this.getScale();\n        const translate = this.getTranslation();\n        const sx = scale.sx;\n        const sy = scale.sy;\n        contentArea.x *= sx;\n        contentArea.y *= sy;\n        contentArea.width *= sx;\n        contentArea.height *= sy;\n        let width = Math.max(Math.ceil((contentArea.width + contentArea.x) / gridWidth), 1) *\n            gridWidth;\n        let height = Math.max(Math.ceil((contentArea.height + contentArea.y) / gridHeight), 1) * gridHeight;\n        let tx = 0;\n        let ty = 0;\n        if ((options.allowNewOrigin === 'negative' && contentArea.x < 0) ||\n            (options.allowNewOrigin === 'positive' && contentArea.x >= 0) ||\n            options.allowNewOrigin === 'any') {\n            tx = Math.ceil(-contentArea.x / gridWidth) * gridWidth;\n            tx += paddings.left;\n            width += tx;\n        }\n        if ((options.allowNewOrigin === 'negative' && contentArea.y < 0) ||\n            (options.allowNewOrigin === 'positive' && contentArea.y >= 0) ||\n            options.allowNewOrigin === 'any') {\n            ty = Math.ceil(-contentArea.y / gridHeight) * gridHeight;\n            ty += paddings.top;\n            height += ty;\n        }\n        width += paddings.right;\n        height += paddings.bottom;\n        // Make sure the resulting width and height are greater than minimum.\n        width = Math.max(width, options.minWidth || 0);\n        height = Math.max(height, options.minHeight || 0);\n        // Make sure the resulting width and height are lesser than maximum.\n        width = Math.min(width, options.maxWidth || Number.MAX_SAFE_INTEGER);\n        height = Math.min(height, options.maxHeight || Number.MAX_SAFE_INTEGER);\n        const size = this.getComputedSize();\n        const sizeChanged = width !== size.width || height !== size.height;\n        const originChanged = tx !== translate.tx || ty !== translate.ty;\n        // Change the dimensions only if there is a size discrepency or an origin change\n        if (originChanged) {\n            this.translate(tx, ty);\n        }\n        if (sizeChanged) {\n            this.resize(width, height);\n        }\n        return new Rectangle(-tx / sx, -ty / sy, width / sx, height / sy);\n    }\n    scaleContentToFit(options = {}) {\n        this.scaleContentToFitImpl(options);\n    }\n    scaleContentToFitImpl(options = {}, translate = true) {\n        let contentBBox;\n        let contentLocalOrigin;\n        if (options.contentArea) {\n            const contentArea = options.contentArea;\n            contentBBox = this.graph.localToGraph(contentArea);\n            contentLocalOrigin = Point.create(contentArea);\n        }\n        else {\n            contentBBox = this.getContentBBox(options);\n            contentLocalOrigin = this.graph.graphToLocal(contentBBox);\n        }\n        if (!contentBBox.width || !contentBBox.height) {\n            return;\n        }\n        const padding = NumberExt.normalizeSides(options.padding);\n        const minScale = options.minScale || 0;\n        const maxScale = options.maxScale || Number.MAX_SAFE_INTEGER;\n        const minScaleX = options.minScaleX || minScale;\n        const maxScaleX = options.maxScaleX || maxScale;\n        const minScaleY = options.minScaleY || minScale;\n        const maxScaleY = options.maxScaleY || maxScale;\n        let fittingBox;\n        if (options.viewportArea) {\n            fittingBox = options.viewportArea;\n        }\n        else {\n            const computedSize = this.getComputedSize();\n            const currentTranslate = this.getTranslation();\n            fittingBox = {\n                x: currentTranslate.tx,\n                y: currentTranslate.ty,\n                width: computedSize.width,\n                height: computedSize.height,\n            };\n        }\n        fittingBox = Rectangle.create(fittingBox).moveAndExpand({\n            x: padding.left,\n            y: padding.top,\n            width: -padding.left - padding.right,\n            height: -padding.top - padding.bottom,\n        });\n        const currentScale = this.getScale();\n        let newSX = (fittingBox.width / contentBBox.width) * currentScale.sx;\n        let newSY = (fittingBox.height / contentBBox.height) * currentScale.sy;\n        if (options.preserveAspectRatio !== false) {\n            newSX = newSY = Math.min(newSX, newSY);\n        }\n        // snap scale to a grid\n        const gridSize = options.scaleGrid;\n        if (gridSize) {\n            newSX = gridSize * Math.floor(newSX / gridSize);\n            newSY = gridSize * Math.floor(newSY / gridSize);\n        }\n        // scale min/max boundaries\n        newSX = NumberExt.clamp(newSX, minScaleX, maxScaleX);\n        newSY = NumberExt.clamp(newSY, minScaleY, maxScaleY);\n        this.scale(newSX, newSY);\n        if (translate) {\n            const origin = this.options;\n            const newOX = fittingBox.x - contentLocalOrigin.x * newSX - origin.x;\n            const newOY = fittingBox.y - contentLocalOrigin.y * newSY - origin.y;\n            this.translate(newOX, newOY);\n        }\n    }\n    getContentArea(options = {}) {\n        // use geometry calc default\n        if (options.useCellGeometry !== false) {\n            return this.model.getAllCellsBBox() || new Rectangle();\n        }\n        return Util.getBBox(this.stage);\n    }\n    getContentBBox(options = {}) {\n        return this.graph.localToGraph(this.getContentArea(options));\n    }\n    getGraphArea() {\n        const rect = Rectangle.fromSize(this.getComputedSize());\n        return this.graph.graphToLocal(rect);\n    }\n    zoomToRect(rect, options = {}) {\n        const area = Rectangle.create(rect);\n        const graph = this.graph;\n        options.contentArea = area;\n        if (options.viewportArea == null) {\n            options.viewportArea = {\n                x: graph.options.x,\n                y: graph.options.y,\n                width: this.options.width,\n                height: this.options.height,\n            };\n        }\n        this.scaleContentToFitImpl(options, false);\n        const center = area.getCenter();\n        this.centerPoint(center.x, center.y);\n        return this;\n    }\n    zoomToFit(options = {}) {\n        return this.zoomToRect(this.getContentArea(options), options);\n    }\n    centerPoint(x, y) {\n        const clientSize = this.getComputedSize();\n        const scale = this.getScale();\n        const ts = this.getTranslation();\n        const cx = clientSize.width / 2;\n        const cy = clientSize.height / 2;\n        x = typeof x === 'number' ? x : cx; // eslint-disable-line\n        y = typeof y === 'number' ? y : cy; // eslint-disable-line\n        x = cx - x * scale.sx; // eslint-disable-line\n        y = cy - y * scale.sy; // eslint-disable-line\n        if (ts.tx !== x || ts.ty !== y) {\n            this.translate(x, y);\n        }\n    }\n    centerContent(options) {\n        const rect = this.graph.getContentArea(options);\n        const center = rect.getCenter();\n        this.centerPoint(center.x, center.y);\n    }\n    centerCell(cell) {\n        return this.positionCell(cell, 'center');\n    }\n    positionPoint(point, x, y) {\n        const clientSize = this.getComputedSize();\n        // eslint-disable-next-line\n        x = NumberExt.normalizePercentage(x, Math.max(0, clientSize.width));\n        if (x < 0) {\n            x = clientSize.width + x; // eslint-disable-line\n        }\n        // eslint-disable-next-line\n        y = NumberExt.normalizePercentage(y, Math.max(0, clientSize.height));\n        if (y < 0) {\n            y = clientSize.height + y; // eslint-disable-line\n        }\n        const ts = this.getTranslation();\n        const scale = this.getScale();\n        const dx = x - point.x * scale.sx;\n        const dy = y - point.y * scale.sy;\n        if (ts.tx !== dx || ts.ty !== dy) {\n            this.translate(dx, dy);\n        }\n    }\n    positionRect(rect, pos) {\n        const bbox = Rectangle.create(rect);\n        switch (pos) {\n            case 'center':\n                return this.positionPoint(bbox.getCenter(), '50%', '50%');\n            case 'top':\n                return this.positionPoint(bbox.getTopCenter(), '50%', 0);\n            case 'top-right':\n                return this.positionPoint(bbox.getTopRight(), '100%', 0);\n            case 'right':\n                return this.positionPoint(bbox.getRightMiddle(), '100%', '50%');\n            case 'bottom-right':\n                return this.positionPoint(bbox.getBottomRight(), '100%', '100%');\n            case 'bottom':\n                return this.positionPoint(bbox.getBottomCenter(), '50%', '100%');\n            case 'bottom-left':\n                return this.positionPoint(bbox.getBottomLeft(), 0, '100%');\n            case 'left':\n                return this.positionPoint(bbox.getLeftMiddle(), 0, '50%');\n            case 'top-left':\n                return this.positionPoint(bbox.getTopLeft(), 0, 0);\n            default:\n                return this;\n        }\n    }\n    positionCell(cell, pos) {\n        const bbox = cell.getBBox();\n        return this.positionRect(bbox, pos);\n    }\n    positionContent(pos, options) {\n        const rect = this.graph.getContentArea(options);\n        return this.positionRect(rect, pos);\n    }\n}\n//# sourceMappingURL=transform.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ObjectExt } from '@antv/x6-common';\nimport { Rectangle } from '@antv/x6-geometry';\nimport { Background } from '../registry';\nimport { Base } from './base';\nexport class BackgroundManager extends Base {\n    get elem() {\n        return this.view.background;\n    }\n    init() {\n        this.startListening();\n        if (this.options.background) {\n            this.draw(this.options.background);\n        }\n    }\n    startListening() {\n        this.graph.on('scale', this.update, this);\n        this.graph.on('translate', this.update, this);\n    }\n    stopListening() {\n        this.graph.off('scale', this.update, this);\n        this.graph.off('translate', this.update, this);\n    }\n    updateBackgroundImage(options = {}) {\n        let backgroundSize = options.size || 'auto auto';\n        let backgroundPosition = options.position || 'center';\n        const scale = this.graph.transform.getScale();\n        const ts = this.graph.translate();\n        // backgroundPosition\n        if (typeof backgroundPosition === 'object') {\n            const x = ts.tx + scale.sx * (backgroundPosition.x || 0);\n            const y = ts.ty + scale.sy * (backgroundPosition.y || 0);\n            backgroundPosition = `${x}px ${y}px`;\n        }\n        // backgroundSize\n        if (typeof backgroundSize === 'object') {\n            backgroundSize = Rectangle.fromSize(backgroundSize).scale(scale.sx, scale.sy);\n            backgroundSize = `${backgroundSize.width}px ${backgroundSize.height}px`;\n        }\n        this.elem.style.backgroundSize = backgroundSize;\n        this.elem.style.backgroundPosition = backgroundPosition;\n    }\n    drawBackgroundImage(img, options = {}) {\n        if (!(img instanceof HTMLImageElement)) {\n            this.elem.style.backgroundImage = '';\n            return;\n        }\n        // draw multiple times to show the last image\n        const cache = this.optionsCache;\n        if (cache && cache.image !== options.image) {\n            return;\n        }\n        let uri;\n        const opacity = options.opacity;\n        const backgroundSize = options.size;\n        let backgroundRepeat = options.repeat || 'no-repeat';\n        const pattern = Background.registry.get(backgroundRepeat);\n        if (typeof pattern === 'function') {\n            const quality = options.quality || 1;\n            img.width *= quality;\n            img.height *= quality;\n            const canvas = pattern(img, options);\n            if (!(canvas instanceof HTMLCanvasElement)) {\n                throw new Error('Background pattern must return an HTML Canvas instance');\n            }\n            uri = canvas.toDataURL('image/png');\n            // `repeat` was changed in pattern function\n            if (options.repeat && backgroundRepeat !== options.repeat) {\n                backgroundRepeat = options.repeat;\n            }\n            else {\n                backgroundRepeat = 'repeat';\n            }\n            if (typeof backgroundSize === 'object') {\n                // recalculate the tile size if an object passed in\n                backgroundSize.width *= canvas.width / img.width;\n                backgroundSize.height *= canvas.height / img.height;\n            }\n            else if (backgroundSize === undefined) {\n                // calcule the tile size if no provided\n                options.size = {\n                    width: canvas.width / quality,\n                    height: canvas.height / quality,\n                };\n            }\n        }\n        else {\n            uri = img.src;\n            if (backgroundSize === undefined) {\n                options.size = {\n                    width: img.width,\n                    height: img.height,\n                };\n            }\n        }\n        if (cache != null &&\n            typeof options.size === 'object' &&\n            options.image === cache.image &&\n            options.repeat === cache.repeat &&\n            options.quality ===\n                cache.quality) {\n            cache.size = ObjectExt.clone(options.size);\n        }\n        const style = this.elem.style;\n        style.backgroundImage = `url(${uri})`;\n        style.backgroundRepeat = backgroundRepeat;\n        style.opacity = opacity == null || opacity >= 1 ? '' : `${opacity}`;\n        this.updateBackgroundImage(options);\n    }\n    updateBackgroundColor(color) {\n        this.elem.style.backgroundColor = color || '';\n    }\n    updateBackgroundOptions(options) {\n        this.graph.options.background = options;\n    }\n    update() {\n        if (this.optionsCache) {\n            this.updateBackgroundImage(this.optionsCache);\n        }\n    }\n    draw(options) {\n        const opts = options || {};\n        this.updateBackgroundOptions(options);\n        this.updateBackgroundColor(opts.color);\n        if (opts.image) {\n            this.optionsCache = ObjectExt.clone(opts);\n            const img = document.createElement('img');\n            img.onload = () => this.drawBackgroundImage(img, options);\n            img.setAttribute('crossorigin', 'anonymous');\n            img.src = opts.image;\n        }\n        else {\n            this.drawBackgroundImage(null);\n            this.optionsCache = null;\n        }\n    }\n    clear() {\n        this.draw();\n    }\n    dispose() {\n        this.clear();\n        this.stopListening();\n    }\n}\n__decorate([\n    Base.dispose()\n], BackgroundManager.prototype, \"dispose\", null);\n//# sourceMappingURL=background.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ModifierKey, Dom } from '@antv/x6-common';\nimport { Base } from './base';\nexport class PanningManager extends Base {\n    get widgetOptions() {\n        return this.options.panning;\n    }\n    get pannable() {\n        return this.widgetOptions && this.widgetOptions.enabled === true;\n    }\n    init() {\n        this.onRightMouseDown = this.onRightMouseDown.bind(this);\n        this.onSpaceKeyDown = this.onSpaceKeyDown.bind(this);\n        this.onSpaceKeyUp = this.onSpaceKeyUp.bind(this);\n        this.startListening();\n        this.updateClassName();\n    }\n    startListening() {\n        this.graph.on('blank:mousedown', this.onMouseDown, this);\n        this.graph.on('node:unhandled:mousedown', this.onMouseDown, this);\n        this.graph.on('edge:unhandled:mousedown', this.onMouseDown, this);\n        Dom.Event.on(this.graph.container, 'mousedown', this.onRightMouseDown);\n        Dom.Event.on(document.body, {\n            keydown: this.onSpaceKeyDown,\n            keyup: this.onSpaceKeyUp,\n        });\n        this.mousewheelHandle = new Dom.MouseWheelHandle(this.graph.container, this.onMouseWheel.bind(this), this.allowMouseWheel.bind(this));\n        this.mousewheelHandle.enable();\n    }\n    stopListening() {\n        this.graph.off('blank:mousedown', this.onMouseDown, this);\n        this.graph.off('node:unhandled:mousedown', this.onMouseDown, this);\n        this.graph.off('edge:unhandled:mousedown', this.onMouseDown, this);\n        Dom.Event.off(this.graph.container, 'mousedown', this.onRightMouseDown);\n        Dom.Event.off(document.body, {\n            keydown: this.onSpaceKeyDown,\n            keyup: this.onSpaceKeyUp,\n        });\n        if (this.mousewheelHandle) {\n            this.mousewheelHandle.disable();\n        }\n    }\n    allowPanning(e, strict) {\n        ;\n        e.spaceKey = this.isSpaceKeyPressed;\n        return (this.pannable &&\n            ModifierKey.isMatch(e, this.widgetOptions.modifiers, strict));\n    }\n    startPanning(evt) {\n        const e = this.view.normalizeEvent(evt);\n        this.clientX = e.clientX;\n        this.clientY = e.clientY;\n        this.panning = true;\n        this.updateClassName();\n        Dom.Event.on(document.body, {\n            'mousemove.panning touchmove.panning': this.pan.bind(this),\n            'mouseup.panning touchend.panning': this.stopPanning.bind(this),\n            'mouseleave.panning': this.stopPanning.bind(this),\n        });\n        Dom.Event.on(window, 'mouseup.panning', this.stopPanning.bind(this));\n    }\n    pan(evt) {\n        const e = this.view.normalizeEvent(evt);\n        const dx = e.clientX - this.clientX;\n        const dy = e.clientY - this.clientY;\n        this.clientX = e.clientX;\n        this.clientY = e.clientY;\n        this.graph.translateBy(dx, dy);\n    }\n    // eslint-disable-next-line\n    stopPanning(e) {\n        this.panning = false;\n        this.updateClassName();\n        Dom.Event.off(document.body, '.panning');\n        Dom.Event.off(window, '.panning');\n    }\n    updateClassName() {\n        const container = this.view.container;\n        const panning = this.view.prefixClassName('graph-panning');\n        const pannable = this.view.prefixClassName('graph-pannable');\n        if (this.pannable) {\n            if (this.panning) {\n                Dom.addClass(container, panning);\n                Dom.removeClass(container, pannable);\n            }\n            else {\n                Dom.removeClass(container, panning);\n                Dom.addClass(container, pannable);\n            }\n        }\n        else {\n            Dom.removeClass(container, panning);\n            Dom.removeClass(container, pannable);\n        }\n    }\n    onMouseDown({ e }) {\n        if (!this.allowBlankMouseDown(e)) {\n            return;\n        }\n        const selection = this.graph.getPlugin('selection');\n        const allowRubberband = selection && selection.allowRubberband(e, true);\n        if (this.allowPanning(e, true) ||\n            (this.allowPanning(e) && !allowRubberband)) {\n            this.startPanning(e);\n        }\n    }\n    onRightMouseDown(e) {\n        const eventTypes = this.widgetOptions.eventTypes;\n        if (!((eventTypes === null || eventTypes === void 0 ? void 0 : eventTypes.includes('rightMouseDown')) && e.button === 2)) {\n            return;\n        }\n        if (this.allowPanning(e, true)) {\n            this.startPanning(e);\n        }\n    }\n    onMouseWheel(e, deltaX, deltaY) {\n        this.graph.translateBy(-deltaX, -deltaY);\n    }\n    onSpaceKeyDown(e) {\n        if (e.which === 32) {\n            this.isSpaceKeyPressed = true;\n        }\n    }\n    onSpaceKeyUp(e) {\n        if (e.which === 32) {\n            this.isSpaceKeyPressed = false;\n        }\n    }\n    allowBlankMouseDown(e) {\n        const eventTypes = this.widgetOptions.eventTypes;\n        return (((eventTypes === null || eventTypes === void 0 ? void 0 : eventTypes.includes('leftMouseDown')) && e.button === 0) ||\n            ((eventTypes === null || eventTypes === void 0 ? void 0 : eventTypes.includes('mouseWheelDown')) && e.button === 1));\n    }\n    allowMouseWheel(e) {\n        var _a;\n        return (this.pannable &&\n            !e.ctrlKey &&\n            ((_a = this.widgetOptions.eventTypes) === null || _a === void 0 ? void 0 : _a.includes('mouseWheel')));\n    }\n    autoPanning(x, y) {\n        const buffer = 10;\n        const graphArea = this.graph.getGraphArea();\n        let dx = 0;\n        let dy = 0;\n        if (x <= graphArea.left + buffer) {\n            dx = -buffer;\n        }\n        if (y <= graphArea.top + buffer) {\n            dy = -buffer;\n        }\n        if (x >= graphArea.right - buffer) {\n            dx = buffer;\n        }\n        if (y >= graphArea.bottom - buffer) {\n            dy = buffer;\n        }\n        if (dx !== 0 || dy !== 0) {\n            this.graph.translateBy(-dx, -dy);\n        }\n    }\n    enablePanning() {\n        if (!this.pannable) {\n            this.widgetOptions.enabled = true;\n            this.updateClassName();\n        }\n    }\n    disablePanning() {\n        if (this.pannable) {\n            this.widgetOptions.enabled = false;\n            this.updateClassName();\n        }\n    }\n    dispose() {\n        this.stopListening();\n    }\n}\n__decorate([\n    Base.dispose()\n], PanningManager.prototype, \"dispose\", null);\n//# sourceMappingURL=panning.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ModifierKey, Dom, NumberExt, Disposable } from '@antv/x6-common';\nimport { Base } from './base';\nexport class MouseWheel extends Base {\n    constructor() {\n        super(...arguments);\n        this.cumulatedFactor = 1;\n    }\n    get widgetOptions() {\n        return this.options.mousewheel;\n    }\n    init() {\n        this.container = this.graph.container;\n        this.target = this.widgetOptions.global ? document : this.container;\n        this.mousewheelHandle = new Dom.MouseWheelHandle(this.target, this.onMouseWheel.bind(this), this.allowMouseWheel.bind(this));\n        if (this.widgetOptions.enabled) {\n            this.enable(true);\n        }\n    }\n    get disabled() {\n        return this.widgetOptions.enabled !== true;\n    }\n    enable(force) {\n        if (this.disabled || force) {\n            this.widgetOptions.enabled = true;\n            this.mousewheelHandle.enable();\n        }\n    }\n    disable() {\n        if (!this.disabled) {\n            this.widgetOptions.enabled = false;\n            this.mousewheelHandle.disable();\n        }\n    }\n    allowMouseWheel(e) {\n        const guard = this.widgetOptions.guard;\n        return ((guard == null || guard(e)) &&\n            ModifierKey.isMatch(e, this.widgetOptions.modifiers));\n    }\n    onMouseWheel(e) {\n        const guard = this.widgetOptions.guard;\n        if ((guard == null || guard(e)) &&\n            ModifierKey.isMatch(e, this.widgetOptions.modifiers)) {\n            const factor = this.widgetOptions.factor || 1.2;\n            if (this.currentScale == null) {\n                this.startPos = { x: e.clientX, y: e.clientY };\n                this.currentScale = this.graph.transform.getScale().sx;\n            }\n            const delta = e.deltaY;\n            if (delta < 0) {\n                // zoomin\n                // ------\n                // Switches to 1% zoom steps below 15%\n                if (this.currentScale < 0.15) {\n                    this.cumulatedFactor = (this.currentScale + 0.01) / this.currentScale;\n                }\n                else {\n                    // Uses to 5% zoom steps for better grid rendering in\n                    // webkit and to avoid rounding errors for zoom steps\n                    this.cumulatedFactor =\n                        Math.round(this.currentScale * factor * 20) / 20 / this.currentScale;\n                    if (this.cumulatedFactor === 1) {\n                        this.cumulatedFactor = 1.05;\n                    }\n                }\n            }\n            else {\n                // zoomout\n                // -------\n                // Switches to 1% zoom steps below 15%\n                if (this.currentScale <= 0.15) {\n                    this.cumulatedFactor = (this.currentScale - 0.01) / this.currentScale;\n                }\n                else {\n                    // Uses to 5% zoom steps for better grid rendering in\n                    // webkit and to avoid rounding errors for zoom steps\n                    this.cumulatedFactor =\n                        Math.round(this.currentScale * (1 / factor) * 20) /\n                            20 /\n                            this.currentScale;\n                    if (this.cumulatedFactor === 1) {\n                        this.cumulatedFactor = 0.95;\n                    }\n                }\n            }\n            this.cumulatedFactor = Math.max(0.01, Math.min(this.currentScale * this.cumulatedFactor, 160) /\n                this.currentScale);\n            const currentScale = this.currentScale;\n            let targetScale = this.graph.transform.clampScale(currentScale * this.cumulatedFactor);\n            const minScale = this.widgetOptions.minScale || Number.MIN_SAFE_INTEGER;\n            const maxScale = this.widgetOptions.maxScale || Number.MAX_SAFE_INTEGER;\n            targetScale = NumberExt.clamp(targetScale, minScale, maxScale);\n            if (targetScale !== currentScale) {\n                if (this.widgetOptions.zoomAtMousePosition) {\n                    const hasScroller = !!this.graph.getPlugin('scroller');\n                    const origin = hasScroller\n                        ? this.graph.clientToLocal(this.startPos)\n                        : this.graph.clientToGraph(this.startPos);\n                    this.graph.zoom(targetScale, {\n                        absolute: true,\n                        center: origin.clone(),\n                    });\n                }\n                else {\n                    this.graph.zoom(targetScale, { absolute: true });\n                }\n            }\n            this.currentScale = null;\n            this.cumulatedFactor = 1;\n        }\n    }\n    dispose() {\n        this.disable();\n    }\n}\n__decorate([\n    Disposable.dispose()\n], MouseWheel.prototype, \"dispose\", null);\n//# sourceMappingURL=mousewheel.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { FunctionExt } from '@antv/x6-common';\nimport { Base } from './base';\nexport class VirtualRenderManager extends Base {\n    init() {\n        this.resetRenderArea = FunctionExt.throttle(this.resetRenderArea, 200, {\n            leading: true,\n        });\n        this.resetRenderArea();\n        this.startListening();\n    }\n    startListening() {\n        this.graph.on('translate', this.resetRenderArea, this);\n        this.graph.on('scale', this.resetRenderArea, this);\n        this.graph.on('resize', this.resetRenderArea, this);\n    }\n    stopListening() {\n        this.graph.off('translate', this.resetRenderArea, this);\n        this.graph.off('scale', this.resetRenderArea, this);\n        this.graph.off('resize', this.resetRenderArea, this);\n    }\n    enableVirtualRender() {\n        this.options.virtual = true;\n        this.resetRenderArea();\n    }\n    disableVirtualRender() {\n        this.options.virtual = false;\n        this.graph.renderer.setRenderArea(undefined);\n    }\n    resetRenderArea() {\n        if (this.options.virtual) {\n            const renderArea = this.graph.getGraphArea();\n            this.graph.renderer.setRenderArea(renderArea);\n        }\n    }\n    dispose() {\n        this.stopListening();\n    }\n}\n__decorate([\n    Base.dispose()\n], VirtualRenderManager.prototype, \"dispose\", null);\n//# sourceMappingURL=virtual-render.js.map","export class JobQueue {\n    constructor() {\n        this.isFlushing = false;\n        this.isFlushPending = false;\n        this.scheduleId = 0;\n        this.queue = [];\n        this.frameInterval = 33;\n        this.initialTime = Date.now();\n    }\n    queueJob(job) {\n        if (job.priority & JOB_PRIORITY.PRIOR) {\n            job.cb();\n        }\n        else {\n            const index = this.findInsertionIndex(job);\n            if (index >= 0) {\n                this.queue.splice(index, 0, job);\n            }\n        }\n    }\n    queueFlush() {\n        if (!this.isFlushing && !this.isFlushPending) {\n            this.isFlushPending = true;\n            this.scheduleJob();\n        }\n    }\n    queueFlushSync() {\n        if (!this.isFlushing && !this.isFlushPending) {\n            this.isFlushPending = true;\n            this.flushJobsSync();\n        }\n    }\n    clearJobs() {\n        this.queue.length = 0;\n        this.isFlushing = false;\n        this.isFlushPending = false;\n        this.cancelScheduleJob();\n    }\n    flushJobs() {\n        this.isFlushPending = false;\n        this.isFlushing = true;\n        const startTime = this.getCurrentTime();\n        let job;\n        while ((job = this.queue.shift())) {\n            job.cb();\n            if (this.getCurrentTime() - startTime >= this.frameInterval) {\n                break;\n            }\n        }\n        this.isFlushing = false;\n        if (this.queue.length) {\n            this.queueFlush();\n        }\n    }\n    flushJobsSync() {\n        this.isFlushPending = false;\n        this.isFlushing = true;\n        let job;\n        while ((job = this.queue.shift())) {\n            try {\n                job.cb();\n            }\n            catch (error) {\n                // eslint-disable-next-line\n                console.log(error);\n            }\n        }\n        this.isFlushing = false;\n    }\n    findInsertionIndex(job) {\n        let left = 0;\n        let ins = this.queue.length;\n        let right = ins - 1;\n        const priority = job.priority;\n        while (left <= right) {\n            const mid = ((right - left) >> 1) + left;\n            if (priority <= this.queue[mid].priority) {\n                left = mid + 1;\n            }\n            else {\n                ins = mid;\n                right = mid - 1;\n            }\n        }\n        return ins;\n    }\n    scheduleJob() {\n        if ('requestIdleCallback' in window) {\n            if (this.scheduleId) {\n                this.cancelScheduleJob();\n            }\n            this.scheduleId = window.requestIdleCallback(this.flushJobs.bind(this), {\n                timeout: 100,\n            });\n        }\n        else {\n            if (this.scheduleId) {\n                this.cancelScheduleJob();\n            }\n            this.scheduleId = window.setTimeout(this.flushJobs.bind(this));\n        }\n    }\n    cancelScheduleJob() {\n        if ('cancelIdleCallback' in window) {\n            if (this.scheduleId) {\n                window.cancelIdleCallback(this.scheduleId);\n            }\n            this.scheduleId = 0;\n        }\n        else {\n            if (this.scheduleId) {\n                clearTimeout(this.scheduleId);\n            }\n            this.scheduleId = 0;\n        }\n    }\n    getCurrentTime() {\n        const hasPerformanceNow = typeof performance === 'object' && typeof performance.now === 'function';\n        if (hasPerformanceNow) {\n            return performance.now();\n        }\n        return Date.now() - this.initialTime;\n    }\n}\nexport var JOB_PRIORITY;\n(function (JOB_PRIORITY) {\n    JOB_PRIORITY[JOB_PRIORITY[\"Update\"] = 2] = \"Update\";\n    JOB_PRIORITY[JOB_PRIORITY[\"RenderEdge\"] = 4] = \"RenderEdge\";\n    JOB_PRIORITY[JOB_PRIORITY[\"RenderNode\"] = 8] = \"RenderNode\";\n    JOB_PRIORITY[JOB_PRIORITY[\"PRIOR\"] = 1048576] = \"PRIOR\";\n})(JOB_PRIORITY || (JOB_PRIORITY = {}));\n// function findInsertionIndex(job: Job) {\n//   let start = 0\n//   for (let i = 0, len = queue.length; i < len; i += 1) {\n//     const j = queue[i]\n//     if (j.id === job.id) {\n//       console.log('xx', j.bit, job.bit)\n//     }\n//     if (j.id === job.id && (job.bit ^ (job.bit & j.bit)) === 0) {\n//       return -1\n//     }\n//     if (j.priority <= job.priority) {\n//       start += 1\n//     }\n//   }\n//   return start\n// }\n//# sourceMappingURL=queueJob.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Dom, Disposable, FunctionExt } from '@antv/x6-common';\nimport { CellView, NodeView, EdgeView } from '../view';\nimport { JobQueue, JOB_PRIORITY } from './queueJob';\nexport class Scheduler extends Disposable {\n    get model() {\n        return this.graph.model;\n    }\n    get container() {\n        return this.graph.view.stage;\n    }\n    constructor(graph) {\n        super();\n        this.views = {};\n        this.willRemoveViews = {};\n        this.queue = new JobQueue();\n        this.graph = graph;\n        this.init();\n    }\n    init() {\n        this.startListening();\n        this.renderViews(this.model.getCells());\n    }\n    startListening() {\n        this.model.on('reseted', this.onModelReseted, this);\n        this.model.on('cell:added', this.onCellAdded, this);\n        this.model.on('cell:removed', this.onCellRemoved, this);\n        this.model.on('cell:change:zIndex', this.onCellZIndexChanged, this);\n        this.model.on('cell:change:visible', this.onCellVisibleChanged, this);\n    }\n    stopListening() {\n        this.model.off('reseted', this.onModelReseted, this);\n        this.model.off('cell:added', this.onCellAdded, this);\n        this.model.off('cell:removed', this.onCellRemoved, this);\n        this.model.off('cell:change:zIndex', this.onCellZIndexChanged, this);\n        this.model.off('cell:change:visible', this.onCellVisibleChanged, this);\n    }\n    onModelReseted({ options }) {\n        this.queue.clearJobs();\n        this.removeZPivots();\n        this.resetViews();\n        const cells = this.model.getCells();\n        this.renderViews(cells, Object.assign(Object.assign({}, options), { queue: cells.map((cell) => cell.id) }));\n    }\n    onCellAdded({ cell, options }) {\n        this.renderViews([cell], options);\n    }\n    onCellRemoved({ cell }) {\n        this.removeViews([cell]);\n    }\n    onCellZIndexChanged({ cell, options, }) {\n        const viewItem = this.views[cell.id];\n        if (viewItem) {\n            this.requestViewUpdate(viewItem.view, Scheduler.FLAG_INSERT, options, JOB_PRIORITY.Update, true);\n        }\n    }\n    onCellVisibleChanged({ cell, current, }) {\n        this.toggleVisible(cell, !!current);\n    }\n    requestViewUpdate(view, flag, options = {}, priority = JOB_PRIORITY.Update, flush = true) {\n        const id = view.cell.id;\n        const viewItem = this.views[id];\n        if (!viewItem) {\n            return;\n        }\n        viewItem.flag = flag;\n        viewItem.options = options;\n        const priorAction = view.hasAction(flag, ['translate', 'resize', 'rotate']);\n        if (priorAction || options.async === false) {\n            priority = JOB_PRIORITY.PRIOR; // eslint-disable-line\n            flush = false; // eslint-disable-line\n        }\n        this.queue.queueJob({\n            id,\n            priority,\n            cb: () => {\n                this.renderViewInArea(view, flag, options);\n                const queue = options.queue;\n                if (queue) {\n                    const index = queue.indexOf(view.cell.id);\n                    if (index >= 0) {\n                        queue.splice(index, 1);\n                    }\n                    if (queue.length === 0) {\n                        this.graph.trigger('render:done');\n                    }\n                }\n            },\n        });\n        const effectedEdges = this.getEffectedEdges(view);\n        effectedEdges.forEach((edge) => {\n            this.requestViewUpdate(edge.view, edge.flag, options, priority, false);\n        });\n        if (flush) {\n            this.flush();\n        }\n    }\n    setRenderArea(area) {\n        this.renderArea = area;\n        this.flushWaitingViews();\n    }\n    isViewMounted(view) {\n        if (view == null) {\n            return false;\n        }\n        const viewItem = this.views[view.cell.id];\n        if (!viewItem) {\n            return false;\n        }\n        return viewItem.state === Scheduler.ViewState.MOUNTED;\n    }\n    renderViews(cells, options = {}) {\n        cells.sort((c1, c2) => {\n            if (c1.isNode() && c2.isEdge()) {\n                return -1;\n            }\n            return 0;\n        });\n        cells.forEach((cell) => {\n            const id = cell.id;\n            const views = this.views;\n            let flag = 0;\n            let viewItem = views[id];\n            if (viewItem) {\n                flag = Scheduler.FLAG_INSERT;\n            }\n            else {\n                const cellView = this.createCellView(cell);\n                if (cellView) {\n                    cellView.graph = this.graph;\n                    flag = Scheduler.FLAG_INSERT | cellView.getBootstrapFlag();\n                    viewItem = {\n                        view: cellView,\n                        flag,\n                        options,\n                        state: Scheduler.ViewState.CREATED,\n                    };\n                    this.views[id] = viewItem;\n                }\n            }\n            if (viewItem) {\n                this.requestViewUpdate(viewItem.view, flag, options, this.getRenderPriority(viewItem.view), false);\n            }\n        });\n        this.flush();\n    }\n    renderViewInArea(view, flag, options = {}) {\n        const cell = view.cell;\n        const id = cell.id;\n        const viewItem = this.views[id];\n        if (!viewItem) {\n            return;\n        }\n        let result = 0;\n        if (this.isUpdatable(view)) {\n            result = this.updateView(view, flag, options);\n            viewItem.flag = result;\n        }\n        else {\n            if (viewItem.state === Scheduler.ViewState.MOUNTED) {\n                result = this.updateView(view, flag, options);\n                viewItem.flag = result;\n            }\n            else {\n                viewItem.state = Scheduler.ViewState.WAITING;\n            }\n        }\n        if (result) {\n            if (cell.isEdge() &&\n                (result & view.getFlag(['source', 'target'])) === 0) {\n                this.queue.queueJob({\n                    id,\n                    priority: JOB_PRIORITY.RenderEdge,\n                    cb: () => {\n                        this.updateView(view, flag, options);\n                    },\n                });\n            }\n        }\n    }\n    removeViews(cells) {\n        cells.forEach((cell) => {\n            const id = cell.id;\n            const viewItem = this.views[id];\n            if (viewItem) {\n                this.willRemoveViews[id] = viewItem;\n                delete this.views[id];\n                this.queue.queueJob({\n                    id,\n                    priority: this.getRenderPriority(viewItem.view),\n                    cb: () => {\n                        this.removeView(viewItem.view);\n                    },\n                });\n            }\n        });\n        this.flush();\n    }\n    flush() {\n        this.graph.options.async\n            ? this.queue.queueFlush()\n            : this.queue.queueFlushSync();\n    }\n    flushWaitingViews() {\n        Object.values(this.views).forEach((viewItem) => {\n            if (viewItem && viewItem.state === Scheduler.ViewState.WAITING) {\n                const { view, flag, options } = viewItem;\n                this.requestViewUpdate(view, flag, options, this.getRenderPriority(view), false);\n            }\n        });\n        this.flush();\n    }\n    updateView(view, flag, options = {}) {\n        if (view == null) {\n            return 0;\n        }\n        if (CellView.isCellView(view)) {\n            if (flag & Scheduler.FLAG_REMOVE) {\n                this.removeView(view.cell);\n                return 0;\n            }\n            if (flag & Scheduler.FLAG_INSERT) {\n                this.insertView(view);\n                flag ^= Scheduler.FLAG_INSERT; // eslint-disable-line\n            }\n        }\n        if (!flag) {\n            return 0;\n        }\n        return view.confirmUpdate(flag, options);\n    }\n    insertView(view) {\n        const viewItem = this.views[view.cell.id];\n        if (viewItem) {\n            const zIndex = view.cell.getZIndex();\n            const pivot = this.addZPivot(zIndex);\n            this.container.insertBefore(view.container, pivot);\n            if (!view.cell.isVisible()) {\n                this.toggleVisible(view.cell, false);\n            }\n            viewItem.state = Scheduler.ViewState.MOUNTED;\n            this.graph.trigger('view:mounted', { view });\n        }\n    }\n    resetViews() {\n        this.willRemoveViews = Object.assign(Object.assign({}, this.views), this.willRemoveViews);\n        Object.values(this.willRemoveViews).forEach((viewItem) => {\n            if (viewItem) {\n                this.removeView(viewItem.view);\n            }\n        });\n        this.views = {};\n        this.willRemoveViews = {};\n    }\n    removeView(view) {\n        const cell = view.cell;\n        const viewItem = this.willRemoveViews[cell.id];\n        if (viewItem && view) {\n            viewItem.view.remove();\n            delete this.willRemoveViews[cell.id];\n            this.graph.trigger('view:unmounted', { view });\n        }\n    }\n    toggleVisible(cell, visible) {\n        const edges = this.model.getConnectedEdges(cell);\n        for (let i = 0, len = edges.length; i < len; i += 1) {\n            const edge = edges[i];\n            if (visible) {\n                const source = edge.getSourceCell();\n                const target = edge.getTargetCell();\n                if ((source && !source.isVisible()) ||\n                    (target && !target.isVisible())) {\n                    continue;\n                }\n                this.toggleVisible(edge, true);\n            }\n            else {\n                this.toggleVisible(edge, false);\n            }\n        }\n        const viewItem = this.views[cell.id];\n        if (viewItem) {\n            Dom.css(viewItem.view.container, {\n                display: visible ? 'unset' : 'none',\n            });\n        }\n    }\n    addZPivot(zIndex = 0) {\n        if (this.zPivots == null) {\n            this.zPivots = {};\n        }\n        const pivots = this.zPivots;\n        let pivot = pivots[zIndex];\n        if (pivot) {\n            return pivot;\n        }\n        pivot = pivots[zIndex] = document.createComment(`z-index:${zIndex + 1}`);\n        let neighborZ = -Infinity;\n        // eslint-disable-next-line\n        for (const key in pivots) {\n            const currentZ = +key;\n            if (currentZ < zIndex && currentZ > neighborZ) {\n                neighborZ = currentZ;\n                if (neighborZ === zIndex - 1) {\n                    continue;\n                }\n            }\n        }\n        const layer = this.container;\n        if (neighborZ !== -Infinity) {\n            const neighborPivot = pivots[neighborZ];\n            layer.insertBefore(pivot, neighborPivot.nextSibling);\n        }\n        else {\n            layer.insertBefore(pivot, layer.firstChild);\n        }\n        return pivot;\n    }\n    removeZPivots() {\n        if (this.zPivots) {\n            Object.values(this.zPivots).forEach((elem) => {\n                if (elem && elem.parentNode) {\n                    elem.parentNode.removeChild(elem);\n                }\n            });\n        }\n        this.zPivots = {};\n    }\n    createCellView(cell) {\n        const options = { graph: this.graph };\n        const createViewHook = this.graph.options.createCellView;\n        if (createViewHook) {\n            const ret = FunctionExt.call(createViewHook, this.graph, cell);\n            if (ret) {\n                return new ret(cell, options); // eslint-disable-line new-cap\n            }\n            if (ret === null) {\n                // null means not render\n                return null;\n            }\n        }\n        const view = cell.view;\n        if (view != null && typeof view === 'string') {\n            const def = CellView.registry.get(view);\n            if (def) {\n                return new def(cell, options); // eslint-disable-line new-cap\n            }\n            return CellView.registry.onNotFound(view);\n        }\n        if (cell.isNode()) {\n            return new NodeView(cell, options);\n        }\n        if (cell.isEdge()) {\n            return new EdgeView(cell, options);\n        }\n        return null;\n    }\n    getEffectedEdges(view) {\n        const effectedEdges = [];\n        const cell = view.cell;\n        const edges = this.model.getConnectedEdges(cell);\n        for (let i = 0, n = edges.length; i < n; i += 1) {\n            const edge = edges[i];\n            const viewItem = this.views[edge.id];\n            if (!viewItem) {\n                continue;\n            }\n            const edgeView = viewItem.view;\n            if (!this.isViewMounted(edgeView)) {\n                continue;\n            }\n            const flagLabels = ['update'];\n            if (edge.getTargetCell() === cell) {\n                flagLabels.push('target');\n            }\n            if (edge.getSourceCell() === cell) {\n                flagLabels.push('source');\n            }\n            effectedEdges.push({\n                id: edge.id,\n                view: edgeView,\n                flag: edgeView.getFlag(flagLabels),\n            });\n        }\n        return effectedEdges;\n    }\n    isUpdatable(view) {\n        if (view.isNodeView()) {\n            if (this.renderArea) {\n                return this.renderArea.isIntersectWithRect(view.cell.getBBox());\n            }\n            return true;\n        }\n        if (view.isEdgeView()) {\n            const edge = view.cell;\n            const sourceCell = edge.getSourceCell();\n            const targetCell = edge.getTargetCell();\n            if (this.renderArea && sourceCell && targetCell) {\n                return (this.renderArea.isIntersectWithRect(sourceCell.getBBox()) ||\n                    this.renderArea.isIntersectWithRect(targetCell.getBBox()));\n            }\n        }\n        return true;\n    }\n    getRenderPriority(view) {\n        return view.cell.isNode()\n            ? JOB_PRIORITY.RenderNode\n            : JOB_PRIORITY.RenderEdge;\n    }\n    dispose() {\n        this.stopListening();\n        // clear views\n        Object.keys(this.views).forEach((id) => {\n            this.views[id].view.dispose();\n        });\n        this.views = {};\n    }\n}\n__decorate([\n    Disposable.dispose()\n], Scheduler.prototype, \"dispose\", null);\n(function (Scheduler) {\n    Scheduler.FLAG_INSERT = 1 << 30;\n    Scheduler.FLAG_REMOVE = 1 << 29;\n    Scheduler.FLAG_RENDER = (1 << 26) - 1;\n})(Scheduler || (Scheduler = {}));\n(function (Scheduler) {\n    let ViewState;\n    (function (ViewState) {\n        ViewState[ViewState[\"CREATED\"] = 0] = \"CREATED\";\n        ViewState[ViewState[\"MOUNTED\"] = 1] = \"MOUNTED\";\n        ViewState[ViewState[\"WAITING\"] = 2] = \"WAITING\";\n    })(ViewState = Scheduler.ViewState || (Scheduler.ViewState = {}));\n})(Scheduler || (Scheduler = {}));\n//# sourceMappingURL=scheduler.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/* eslint-disable @typescript-eslint/no-unused-vars */\nimport { Rectangle } from '@antv/x6-geometry';\nimport { Base } from '../graph/base';\nimport { Cell } from '../model';\nimport { Scheduler } from './scheduler';\nimport { Util } from '../util';\nexport class Renderer extends Base {\n    constructor() {\n        super(...arguments);\n        this.schedule = new Scheduler(this.graph);\n    }\n    requestViewUpdate(view, flag, options = {}) {\n        this.schedule.requestViewUpdate(view, flag, options);\n    }\n    isViewMounted(view) {\n        return this.schedule.isViewMounted(view);\n    }\n    setRenderArea(area) {\n        this.schedule.setRenderArea(area);\n    }\n    findViewByElem(elem) {\n        if (elem == null) {\n            return null;\n        }\n        const container = this.options.container;\n        const target = typeof elem === 'string'\n            ? container.querySelector(elem)\n            : elem instanceof Element\n                ? elem\n                : elem[0];\n        if (target) {\n            const id = this.graph.view.findAttr('data-cell-id', target);\n            if (id) {\n                const views = this.schedule.views;\n                if (views[id]) {\n                    return views[id].view;\n                }\n            }\n        }\n        return null;\n    }\n    findViewByCell(cell) {\n        if (cell == null) {\n            return null;\n        }\n        const id = Cell.isCell(cell) ? cell.id : cell;\n        const views = this.schedule.views;\n        if (views[id]) {\n            return views[id].view;\n        }\n        return null;\n    }\n    findViewsFromPoint(p) {\n        const ref = { x: p.x, y: p.y };\n        return this.model\n            .getCells()\n            .map((cell) => this.findViewByCell(cell))\n            .filter((view) => {\n            if (view != null) {\n                return Util.getBBox(view.container, {\n                    target: this.view.stage,\n                }).containsPoint(ref);\n            }\n            return false;\n        });\n    }\n    findEdgeViewsFromPoint(p, threshold = 5) {\n        return this.model\n            .getEdges()\n            .map((edge) => this.findViewByCell(edge))\n            .filter((view) => {\n            if (view != null) {\n                const point = view.getClosestPoint(p);\n                if (point) {\n                    return point.distance(p) <= threshold;\n                }\n            }\n            return false;\n        });\n    }\n    findViewsInArea(rect, options = {}) {\n        const area = Rectangle.create(rect);\n        return this.model\n            .getCells()\n            .map((cell) => this.findViewByCell(cell))\n            .filter((view) => {\n            if (view) {\n                if (options.nodeOnly && !view.isNodeView()) {\n                    return false;\n                }\n                const bbox = Util.getBBox(view.container, {\n                    target: this.view.stage,\n                });\n                if (bbox.width === 0) {\n                    bbox.inflate(1, 0);\n                }\n                else if (bbox.height === 0) {\n                    bbox.inflate(0, 1);\n                }\n                return options.strict\n                    ? area.containsRect(bbox)\n                    : area.isIntersectWithRect(bbox);\n            }\n            return false;\n        });\n    }\n    dispose() {\n        this.schedule.dispose();\n    }\n}\n__decorate([\n    Base.dispose()\n], Renderer.prototype, \"dispose\", null);\n//# sourceMappingURL=renderer.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { StringExt, Dom, Vector } from '@antv/x6-common';\nimport { Filter } from '../registry';\nimport { Markup } from '../view';\nimport { Base } from './base';\nexport class DefsManager extends Base {\n    get cid() {\n        return this.graph.view.cid;\n    }\n    get svg() {\n        return this.view.svg;\n    }\n    get defs() {\n        return this.view.defs;\n    }\n    isDefined(id) {\n        return this.svg.getElementById(id) != null;\n    }\n    filter(options) {\n        let filterId = options.id;\n        const name = options.name;\n        if (!filterId) {\n            filterId = `filter-${name}-${this.cid}-${StringExt.hashcode(JSON.stringify(options))}`;\n        }\n        if (!this.isDefined(filterId)) {\n            const fn = Filter.registry.get(name);\n            if (fn == null) {\n                return Filter.registry.onNotFound(name);\n            }\n            const markup = fn(options.args || {});\n            // Set the filter area to be 3x the bounding box of the cell\n            // and center the filter around the cell.\n            const attrs = Object.assign(Object.assign({ x: -1, y: -1, width: 3, height: 3, filterUnits: 'objectBoundingBox' }, options.attrs), { id: filterId });\n            Vector.create(Markup.sanitize(markup), attrs).appendTo(this.defs);\n        }\n        return filterId;\n    }\n    gradient(options) {\n        let id = options.id;\n        const type = options.type;\n        if (!id) {\n            id = `gradient-${type}-${this.cid}-${StringExt.hashcode(JSON.stringify(options))}`;\n        }\n        if (!this.isDefined(id)) {\n            const stops = options.stops;\n            const arr = stops.map((stop) => {\n                const opacity = stop.opacity != null && Number.isFinite(stop.opacity)\n                    ? stop.opacity\n                    : 1;\n                return `<stop offset=\"${stop.offset}\" stop-color=\"${stop.color}\" stop-opacity=\"${opacity}\"/>`;\n            });\n            const markup = `<${type}>${arr.join('')}</${type}>`;\n            const attrs = Object.assign({ id }, options.attrs);\n            Vector.create(markup, attrs).appendTo(this.defs);\n        }\n        return id;\n    }\n    marker(options) {\n        const { id, refX, refY, markerUnits, markerOrient, tagName, children } = options, attrs = __rest(options, [\"id\", \"refX\", \"refY\", \"markerUnits\", \"markerOrient\", \"tagName\", \"children\"]);\n        let markerId = id;\n        if (!markerId) {\n            markerId = `marker-${this.cid}-${StringExt.hashcode(JSON.stringify(options))}`;\n        }\n        if (!this.isDefined(markerId)) {\n            if (tagName !== 'path') {\n                // remove unnecessary d attribute inherit from standard edge.\n                delete attrs.d;\n            }\n            const pathMarker = Vector.create('marker', {\n                refX,\n                refY,\n                id: markerId,\n                overflow: 'visible',\n                orient: markerOrient != null ? markerOrient : 'auto',\n                markerUnits: markerUnits || 'userSpaceOnUse',\n            }, children\n                ? children.map((_a) => {\n                    var { tagName } = _a, other = __rest(_a, [\"tagName\"]);\n                    return Vector.create(`${tagName}` || 'path', Dom.kebablizeAttrs(Object.assign(Object.assign({}, attrs), other)));\n                })\n                : [Vector.create(tagName || 'path', Dom.kebablizeAttrs(attrs))]);\n            this.defs.appendChild(pathMarker.node);\n        }\n        return markerId;\n    }\n    remove(id) {\n        const elem = this.svg.getElementById(id);\n        if (elem && elem.parentNode) {\n            elem.parentNode.removeChild(elem);\n        }\n    }\n}\n//# sourceMappingURL=defs.js.map","import { Dom } from '@antv/x6-common';\nimport { Point, Rectangle } from '@antv/x6-geometry';\nimport { Base } from './base';\nimport { Util } from '../util';\nexport class CoordManager extends Base {\n    getClientMatrix() {\n        return Dom.createSVGMatrix(this.view.stage.getScreenCTM());\n    }\n    /**\n     * Returns coordinates of the graph viewport, relative to the window.\n     */\n    getClientOffset() {\n        // see: https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect\n        const rect = this.view.svg.getBoundingClientRect();\n        return new Point(rect.left, rect.top);\n    }\n    /**\n     * Returns coordinates of the graph viewport, relative to the document.\n     */\n    getPageOffset() {\n        // see: https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect\n        return this.getClientOffset().translate(window.scrollX, window.scrollY);\n    }\n    snapToGrid(x, y) {\n        const p = typeof x === 'number'\n            ? this.clientToLocalPoint(x, y)\n            : this.clientToLocalPoint(x.x, x.y);\n        return p.snapToGrid(this.graph.getGridSize());\n    }\n    localToGraphPoint(x, y) {\n        const localPoint = Point.create(x, y);\n        return Util.transformPoint(localPoint, this.graph.matrix());\n    }\n    localToClientPoint(x, y) {\n        const localPoint = Point.create(x, y);\n        return Util.transformPoint(localPoint, this.getClientMatrix());\n    }\n    localToPagePoint(x, y) {\n        const p = typeof x === 'number'\n            ? this.localToGraphPoint(x, y)\n            : this.localToGraphPoint(x);\n        return p.translate(this.getPageOffset());\n    }\n    localToGraphRect(x, y, width, height) {\n        const localRect = Rectangle.create(x, y, width, height);\n        return Util.transformRectangle(localRect, this.graph.matrix());\n    }\n    localToClientRect(x, y, width, height) {\n        const localRect = Rectangle.create(x, y, width, height);\n        return Util.transformRectangle(localRect, this.getClientMatrix());\n    }\n    localToPageRect(x, y, width, height) {\n        const rect = typeof x === 'number'\n            ? this.localToGraphRect(x, y, width, height)\n            : this.localToGraphRect(x);\n        return rect.translate(this.getPageOffset());\n    }\n    graphToLocalPoint(x, y) {\n        const graphPoint = Point.create(x, y);\n        return Util.transformPoint(graphPoint, this.graph.matrix().inverse());\n    }\n    clientToLocalPoint(x, y) {\n        const clientPoint = Point.create(x, y);\n        return Util.transformPoint(clientPoint, this.getClientMatrix().inverse());\n    }\n    clientToGraphPoint(x, y) {\n        const clientPoint = Point.create(x, y);\n        return Util.transformPoint(clientPoint, this.graph.matrix().multiply(this.getClientMatrix().inverse()));\n    }\n    pageToLocalPoint(x, y) {\n        const pagePoint = Point.create(x, y);\n        const graphPoint = pagePoint.diff(this.getPageOffset());\n        return this.graphToLocalPoint(graphPoint);\n    }\n    graphToLocalRect(x, y, width, height) {\n        const graphRect = Rectangle.create(x, y, width, height);\n        return Util.transformRectangle(graphRect, this.graph.matrix().inverse());\n    }\n    clientToLocalRect(x, y, width, height) {\n        const clientRect = Rectangle.create(x, y, width, height);\n        return Util.transformRectangle(clientRect, this.getClientMatrix().inverse());\n    }\n    clientToGraphRect(x, y, width, height) {\n        const clientRect = Rectangle.create(x, y, width, height);\n        return Util.transformRectangle(clientRect, this.graph.matrix().multiply(this.getClientMatrix().inverse()));\n    }\n    pageToLocalRect(x, y, width, height) {\n        const graphRect = Rectangle.create(x, y, width, height);\n        const pageOffset = this.getPageOffset();\n        graphRect.x -= pageOffset.x;\n        graphRect.y -= pageOffset.y;\n        return this.graphToLocalRect(graphRect);\n    }\n}\n//# sourceMappingURL=coord.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Dom } from '@antv/x6-common';\nimport { Highlighter } from '../registry';\nimport { Base } from './base';\nexport class HighlightManager extends Base {\n    constructor() {\n        super(...arguments);\n        this.highlights = {};\n    }\n    init() {\n        this.startListening();\n    }\n    startListening() {\n        this.graph.on('cell:highlight', this.onCellHighlight, this);\n        this.graph.on('cell:unhighlight', this.onCellUnhighlight, this);\n    }\n    stopListening() {\n        this.graph.off('cell:highlight', this.onCellHighlight, this);\n        this.graph.off('cell:unhighlight', this.onCellUnhighlight, this);\n    }\n    onCellHighlight({ view: cellView, magnet, options = {}, }) {\n        const resolved = this.resolveHighlighter(options);\n        if (!resolved) {\n            return;\n        }\n        const key = this.getHighlighterId(magnet, resolved);\n        if (!this.highlights[key]) {\n            const highlighter = resolved.highlighter;\n            highlighter.highlight(cellView, magnet, Object.assign({}, resolved.args));\n            this.highlights[key] = {\n                cellView,\n                magnet,\n                highlighter,\n                args: resolved.args,\n            };\n        }\n    }\n    onCellUnhighlight({ magnet, options = {}, }) {\n        const resolved = this.resolveHighlighter(options);\n        if (!resolved) {\n            return;\n        }\n        const id = this.getHighlighterId(magnet, resolved);\n        this.unhighlight(id);\n    }\n    resolveHighlighter(options) {\n        const graphOptions = this.options;\n        let highlighterDef = options.highlighter;\n        if (highlighterDef == null) {\n            // check for built-in types\n            const type = options.type;\n            highlighterDef =\n                (type && graphOptions.highlighting[type]) ||\n                    graphOptions.highlighting.default;\n        }\n        if (highlighterDef == null) {\n            return null;\n        }\n        const def = typeof highlighterDef === 'string'\n            ? {\n                name: highlighterDef,\n            }\n            : highlighterDef;\n        const name = def.name;\n        const highlighter = Highlighter.registry.get(name);\n        if (highlighter == null) {\n            return Highlighter.registry.onNotFound(name);\n        }\n        Highlighter.check(name, highlighter);\n        return {\n            name,\n            highlighter,\n            args: def.args || {},\n        };\n    }\n    getHighlighterId(magnet, options) {\n        Dom.ensureId(magnet);\n        return options.name + magnet.id + JSON.stringify(options.args);\n    }\n    unhighlight(id) {\n        const highlight = this.highlights[id];\n        if (highlight) {\n            highlight.highlighter.unhighlight(highlight.cellView, highlight.magnet, highlight.args);\n            delete this.highlights[id];\n        }\n    }\n    dispose() {\n        Object.keys(this.highlights).forEach((id) => this.unhighlight(id));\n        this.stopListening();\n    }\n}\n__decorate([\n    HighlightManager.dispose()\n], HighlightManager.prototype, \"dispose\", null);\n//# sourceMappingURL=highlight.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { SizeSensor } from '@antv/x6-common';\nimport { Base } from './base';\nexport class SizeManager extends Base {\n    getScroller() {\n        const scroller = this.graph.getPlugin('scroller');\n        if (scroller && scroller.options.enabled) {\n            return scroller;\n        }\n        return null;\n    }\n    getContainer() {\n        const scroller = this.getScroller();\n        if (scroller) {\n            return scroller.container.parentElement;\n        }\n        return this.graph.container.parentElement;\n    }\n    getSensorTarget() {\n        const autoResize = this.options.autoResize;\n        if (autoResize) {\n            if (typeof autoResize === 'boolean') {\n                return this.getContainer();\n            }\n            return autoResize;\n        }\n    }\n    init() {\n        const autoResize = this.options.autoResize;\n        if (autoResize) {\n            const target = this.getSensorTarget();\n            if (target) {\n                SizeSensor.bind(target, () => {\n                    const width = target.offsetWidth;\n                    const height = target.offsetHeight;\n                    this.resize(width, height);\n                });\n            }\n        }\n    }\n    resize(width, height) {\n        const scroller = this.getScroller();\n        if (scroller) {\n            scroller.resize(width, height);\n        }\n        else {\n            this.graph.transform.resize(width, height);\n        }\n    }\n    dispose() {\n        SizeSensor.clear(this.graph.container);\n    }\n}\n__decorate([\n    Base.dispose()\n], SizeManager.prototype, \"dispose\", null);\n//# sourceMappingURL=size.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Basecoat } from '@antv/x6-common';\nimport { Point, Rectangle } from '@antv/x6-geometry';\nimport { Model, Cell, Node, Edge } from '../model';\nimport { CellView } from '../view';\nimport * as Registry from '../registry';\nimport { GraphView } from './view';\nimport { CSSManager as Css } from './css';\nimport { Options as GraphOptions } from './options';\nimport { GridManager as Grid } from './grid';\nimport { TransformManager as Transform } from './transform';\nimport { BackgroundManager as Background } from './background';\nimport { PanningManager as Panning } from './panning';\nimport { MouseWheel as Wheel } from './mousewheel';\nimport { VirtualRenderManager as VirtualRender } from './virtual-render';\nimport { Renderer as ViewRenderer } from '../renderer';\nimport { DefsManager as Defs } from './defs';\nimport { CoordManager as Coord } from './coord';\nimport { HighlightManager as Highlight } from './highlight';\nimport { SizeManager as Size } from './size';\nexport class Graph extends Basecoat {\n    get container() {\n        return this.options.container;\n    }\n    get [Symbol.toStringTag]() {\n        return Graph.toStringTag;\n    }\n    constructor(options) {\n        super();\n        this.installedPlugins = new Set();\n        this.options = GraphOptions.get(options);\n        this.css = new Css(this);\n        this.view = new GraphView(this);\n        this.defs = new Defs(this);\n        this.coord = new Coord(this);\n        this.transform = new Transform(this);\n        this.highlight = new Highlight(this);\n        this.grid = new Grid(this);\n        this.background = new Background(this);\n        if (this.options.model) {\n            this.model = this.options.model;\n        }\n        else {\n            this.model = new Model();\n            this.model.graph = this;\n        }\n        this.renderer = new ViewRenderer(this);\n        this.panning = new Panning(this);\n        this.mousewheel = new Wheel(this);\n        this.virtualRender = new VirtualRender(this);\n        this.size = new Size(this);\n    }\n    // #region model\n    isNode(cell) {\n        return cell.isNode();\n    }\n    isEdge(cell) {\n        return cell.isEdge();\n    }\n    resetCells(cells, options = {}) {\n        this.model.resetCells(cells, options);\n        return this;\n    }\n    clearCells(options = {}) {\n        this.model.clear(options);\n        return this;\n    }\n    toJSON(options = {}) {\n        return this.model.toJSON(options);\n    }\n    parseJSON(data) {\n        return this.model.parseJSON(data);\n    }\n    fromJSON(data, options = {}) {\n        this.model.fromJSON(data, options);\n        return this;\n    }\n    getCellById(id) {\n        return this.model.getCell(id);\n    }\n    addNode(node, options = {}) {\n        return this.model.addNode(node, options);\n    }\n    addNodes(nodes, options = {}) {\n        return this.addCell(nodes.map((node) => (Node.isNode(node) ? node : this.createNode(node))), options);\n    }\n    createNode(metadata) {\n        return this.model.createNode(metadata);\n    }\n    removeNode(node, options = {}) {\n        return this.model.removeCell(node, options);\n    }\n    addEdge(edge, options = {}) {\n        return this.model.addEdge(edge, options);\n    }\n    addEdges(edges, options = {}) {\n        return this.addCell(edges.map((edge) => (Edge.isEdge(edge) ? edge : this.createEdge(edge))), options);\n    }\n    removeEdge(edge, options = {}) {\n        return this.model.removeCell(edge, options);\n    }\n    createEdge(metadata) {\n        return this.model.createEdge(metadata);\n    }\n    addCell(cell, options = {}) {\n        this.model.addCell(cell, options);\n        return this;\n    }\n    removeCell(cell, options = {}) {\n        return this.model.removeCell(cell, options);\n    }\n    removeCells(cells, options = {}) {\n        return this.model.removeCells(cells, options);\n    }\n    removeConnectedEdges(cell, options = {}) {\n        return this.model.removeConnectedEdges(cell, options);\n    }\n    disconnectConnectedEdges(cell, options = {}) {\n        this.model.disconnectConnectedEdges(cell, options);\n        return this;\n    }\n    hasCell(cell) {\n        return this.model.has(cell);\n    }\n    getCells() {\n        return this.model.getCells();\n    }\n    getCellCount() {\n        return this.model.total();\n    }\n    /**\n     * Returns all the nodes in the graph.\n     */\n    getNodes() {\n        return this.model.getNodes();\n    }\n    /**\n     * Returns all the edges in the graph.\n     */\n    getEdges() {\n        return this.model.getEdges();\n    }\n    /**\n     * Returns all outgoing edges for the node.\n     */\n    getOutgoingEdges(cell) {\n        return this.model.getOutgoingEdges(cell);\n    }\n    /**\n     * Returns all incoming edges for the node.\n     */\n    getIncomingEdges(cell) {\n        return this.model.getIncomingEdges(cell);\n    }\n    /**\n     * Returns edges connected with cell.\n     */\n    getConnectedEdges(cell, options = {}) {\n        return this.model.getConnectedEdges(cell, options);\n    }\n    /**\n     * Returns an array of all the roots of the graph.\n     */\n    getRootNodes() {\n        return this.model.getRoots();\n    }\n    /**\n     * Returns an array of all the leafs of the graph.\n     */\n    getLeafNodes() {\n        return this.model.getLeafs();\n    }\n    /**\n     * Returns `true` if the node is a root node, i.e.\n     * there is no  edges coming to the node.\n     */\n    isRootNode(cell) {\n        return this.model.isRoot(cell);\n    }\n    /**\n     * Returns `true` if the node is a leaf node, i.e.\n     * there is no edges going out from the node.\n     */\n    isLeafNode(cell) {\n        return this.model.isLeaf(cell);\n    }\n    /**\n     * Returns all the neighbors of node in the graph. Neighbors are all\n     * the nodes connected to node via either incoming or outgoing edge.\n     */\n    getNeighbors(cell, options = {}) {\n        return this.model.getNeighbors(cell, options);\n    }\n    /**\n     * Returns `true` if `cell2` is a neighbor of `cell1`.\n     */\n    isNeighbor(cell1, cell2, options = {}) {\n        return this.model.isNeighbor(cell1, cell2, options);\n    }\n    getSuccessors(cell, options = {}) {\n        return this.model.getSuccessors(cell, options);\n    }\n    /**\n     * Returns `true` if `cell2` is a successor of `cell1`.\n     */\n    isSuccessor(cell1, cell2, options = {}) {\n        return this.model.isSuccessor(cell1, cell2, options);\n    }\n    getPredecessors(cell, options = {}) {\n        return this.model.getPredecessors(cell, options);\n    }\n    /**\n     * Returns `true` if `cell2` is a predecessor of `cell1`.\n     */\n    isPredecessor(cell1, cell2, options = {}) {\n        return this.model.isPredecessor(cell1, cell2, options);\n    }\n    getCommonAncestor(...cells) {\n        return this.model.getCommonAncestor(...cells);\n    }\n    /**\n     * Returns an array of cells that result from finding nodes/edges that\n     * are connected to any of the cells in the cells array. This function\n     * loops over cells and if the current cell is a edge, it collects its\n     * source/target nodes; if it is an node, it collects its incoming and\n     * outgoing edges if both the edge terminal (source/target) are in the\n     * cells array.\n     */\n    getSubGraph(cells, options = {}) {\n        return this.model.getSubGraph(cells, options);\n    }\n    /**\n     * Clones the whole subgraph (including all the connected links whose\n     * source/target is in the subgraph). If `options.deep` is `true`, also\n     * take into account all the embedded cells of all the subgraph cells.\n     *\n     * Returns a map of the form: { [original cell ID]: [clone] }.\n     */\n    cloneSubGraph(cells, options = {}) {\n        return this.model.cloneSubGraph(cells, options);\n    }\n    cloneCells(cells) {\n        return this.model.cloneCells(cells);\n    }\n    getNodesFromPoint(x, y) {\n        return this.model.getNodesFromPoint(x, y);\n    }\n    getNodesInArea(x, y, w, h, options) {\n        return this.model.getNodesInArea(x, y, w, h, options);\n    }\n    getNodesUnderNode(node, options = {}) {\n        return this.model.getNodesUnderNode(node, options);\n    }\n    searchCell(cell, iterator, options = {}) {\n        this.model.search(cell, iterator, options);\n        return this;\n    }\n    /** *\n     * Returns an array of IDs of nodes on the shortest\n     * path between source and target.\n     */\n    getShortestPath(source, target, options = {}) {\n        return this.model.getShortestPath(source, target, options);\n    }\n    /**\n     * Returns the bounding box that surrounds all cells in the graph.\n     */\n    getAllCellsBBox() {\n        return this.model.getAllCellsBBox();\n    }\n    /**\n     * Returns the bounding box that surrounds all the given cells.\n     */\n    getCellsBBox(cells, options = {}) {\n        return this.model.getCellsBBox(cells, options);\n    }\n    startBatch(name, data = {}) {\n        this.model.startBatch(name, data);\n    }\n    stopBatch(name, data = {}) {\n        this.model.stopBatch(name, data);\n    }\n    batchUpdate(arg1, arg2, arg3) {\n        const name = typeof arg1 === 'string' ? arg1 : 'update';\n        const execute = typeof arg1 === 'string' ? arg2 : arg1;\n        const data = typeof arg2 === 'function' ? arg3 : arg2;\n        this.startBatch(name, data);\n        const result = execute();\n        this.stopBatch(name, data);\n        return result;\n    }\n    updateCellId(cell, newId) {\n        return this.model.updateCellId(cell, newId);\n    }\n    // #endregion\n    // #region view\n    findView(ref) {\n        if (Cell.isCell(ref)) {\n            return this.findViewByCell(ref);\n        }\n        return this.findViewByElem(ref);\n    }\n    findViews(ref) {\n        if (Rectangle.isRectangleLike(ref)) {\n            return this.findViewsInArea(ref);\n        }\n        if (Point.isPointLike(ref)) {\n            return this.findViewsFromPoint(ref);\n        }\n        return [];\n    }\n    findViewByCell(cell) {\n        return this.renderer.findViewByCell(cell);\n    }\n    findViewByElem(elem) {\n        return this.renderer.findViewByElem(elem);\n    }\n    findViewsFromPoint(x, y) {\n        const p = typeof x === 'number' ? { x, y: y } : x;\n        return this.renderer.findViewsFromPoint(p);\n    }\n    findViewsInArea(x, y, width, height, options) {\n        const rect = typeof x === 'number'\n            ? {\n                x,\n                y: y,\n                width: width,\n                height: height,\n            }\n            : x;\n        const localOptions = typeof x === 'number'\n            ? options\n            : y;\n        return this.renderer.findViewsInArea(rect, localOptions);\n    }\n    matrix(mat) {\n        if (typeof mat === 'undefined') {\n            return this.transform.getMatrix();\n        }\n        this.transform.setMatrix(mat);\n        return this;\n    }\n    resize(width, height) {\n        const scroller = this.getPlugin('scroller');\n        if (scroller) {\n            scroller.resize(width, height);\n        }\n        else {\n            this.transform.resize(width, height);\n        }\n        return this;\n    }\n    scale(sx, sy = sx, cx = 0, cy = 0) {\n        if (typeof sx === 'undefined') {\n            return this.transform.getScale();\n        }\n        this.transform.scale(sx, sy, cx, cy);\n        return this;\n    }\n    zoom(factor, options) {\n        const scroller = this.getPlugin('scroller');\n        if (scroller) {\n            if (typeof factor === 'undefined') {\n                return scroller.zoom();\n            }\n            scroller.zoom(factor, options);\n        }\n        else {\n            if (typeof factor === 'undefined') {\n                return this.transform.getZoom();\n            }\n            this.transform.zoom(factor, options);\n        }\n        return this;\n    }\n    zoomTo(factor, options = {}) {\n        const scroller = this.getPlugin('scroller');\n        if (scroller) {\n            scroller.zoom(factor, Object.assign(Object.assign({}, options), { absolute: true }));\n        }\n        else {\n            this.transform.zoom(factor, Object.assign(Object.assign({}, options), { absolute: true }));\n        }\n        return this;\n    }\n    zoomToRect(rect, options = {}) {\n        const scroller = this.getPlugin('scroller');\n        if (scroller) {\n            scroller.zoomToRect(rect, options);\n        }\n        else {\n            this.transform.zoomToRect(rect, options);\n        }\n        return this;\n    }\n    zoomToFit(options = {}) {\n        const scroller = this.getPlugin('scroller');\n        if (scroller) {\n            scroller.zoomToFit(options);\n        }\n        else {\n            this.transform.zoomToFit(options);\n        }\n        return this;\n    }\n    rotate(angle, cx, cy) {\n        if (typeof angle === 'undefined') {\n            return this.transform.getRotation();\n        }\n        this.transform.rotate(angle, cx, cy);\n        return this;\n    }\n    translate(tx, ty) {\n        if (typeof tx === 'undefined') {\n            return this.transform.getTranslation();\n        }\n        this.transform.translate(tx, ty);\n        return this;\n    }\n    translateBy(dx, dy) {\n        const ts = this.translate();\n        const tx = ts.tx + dx;\n        const ty = ts.ty + dy;\n        return this.translate(tx, ty);\n    }\n    getGraphArea() {\n        return this.transform.getGraphArea();\n    }\n    getContentArea(options = {}) {\n        return this.transform.getContentArea(options);\n    }\n    getContentBBox(options = {}) {\n        return this.transform.getContentBBox(options);\n    }\n    fitToContent(gridWidth, gridHeight, padding, options) {\n        return this.transform.fitToContent(gridWidth, gridHeight, padding, options);\n    }\n    scaleContentToFit(options = {}) {\n        this.transform.scaleContentToFit(options);\n        return this;\n    }\n    /**\n     * Position the center of graph to the center of the viewport.\n     */\n    center(options) {\n        return this.centerPoint(options);\n    }\n    centerPoint(x, y, options) {\n        const scroller = this.getPlugin('scroller');\n        if (scroller) {\n            scroller.centerPoint(x, y, options);\n        }\n        else {\n            this.transform.centerPoint(x, y);\n        }\n        return this;\n    }\n    centerContent(options) {\n        const scroller = this.getPlugin('scroller');\n        if (scroller) {\n            scroller.centerContent(options);\n        }\n        else {\n            this.transform.centerContent(options);\n        }\n        return this;\n    }\n    centerCell(cell, options) {\n        const scroller = this.getPlugin('scroller');\n        if (scroller) {\n            scroller.centerCell(cell, options);\n        }\n        else {\n            this.transform.centerCell(cell);\n        }\n        return this;\n    }\n    positionPoint(point, x, y, options = {}) {\n        const scroller = this.getPlugin('scroller');\n        if (scroller) {\n            scroller.positionPoint(point, x, y, options);\n        }\n        else {\n            this.transform.positionPoint(point, x, y);\n        }\n        return this;\n    }\n    positionRect(rect, direction, options) {\n        const scroller = this.getPlugin('scroller');\n        if (scroller) {\n            scroller.positionRect(rect, direction, options);\n        }\n        else {\n            this.transform.positionRect(rect, direction);\n        }\n        return this;\n    }\n    positionCell(cell, direction, options) {\n        const scroller = this.getPlugin('scroller');\n        if (scroller) {\n            scroller.positionCell(cell, direction, options);\n        }\n        else {\n            this.transform.positionCell(cell, direction);\n        }\n        return this;\n    }\n    positionContent(pos, options) {\n        const scroller = this.getPlugin('scroller');\n        if (scroller) {\n            scroller.positionContent(pos, options);\n        }\n        else {\n            this.transform.positionContent(pos, options);\n        }\n        return this;\n    }\n    snapToGrid(x, y) {\n        return this.coord.snapToGrid(x, y);\n    }\n    pageToLocal(x, y, width, height) {\n        if (Rectangle.isRectangleLike(x)) {\n            return this.coord.pageToLocalRect(x);\n        }\n        if (typeof x === 'number' &&\n            typeof y === 'number' &&\n            typeof width === 'number' &&\n            typeof height === 'number') {\n            return this.coord.pageToLocalRect(x, y, width, height);\n        }\n        return this.coord.pageToLocalPoint(x, y);\n    }\n    localToPage(x, y, width, height) {\n        if (Rectangle.isRectangleLike(x)) {\n            return this.coord.localToPageRect(x);\n        }\n        if (typeof x === 'number' &&\n            typeof y === 'number' &&\n            typeof width === 'number' &&\n            typeof height === 'number') {\n            return this.coord.localToPageRect(x, y, width, height);\n        }\n        return this.coord.localToPagePoint(x, y);\n    }\n    clientToLocal(x, y, width, height) {\n        if (Rectangle.isRectangleLike(x)) {\n            return this.coord.clientToLocalRect(x);\n        }\n        if (typeof x === 'number' &&\n            typeof y === 'number' &&\n            typeof width === 'number' &&\n            typeof height === 'number') {\n            return this.coord.clientToLocalRect(x, y, width, height);\n        }\n        return this.coord.clientToLocalPoint(x, y);\n    }\n    localToClient(x, y, width, height) {\n        if (Rectangle.isRectangleLike(x)) {\n            return this.coord.localToClientRect(x);\n        }\n        if (typeof x === 'number' &&\n            typeof y === 'number' &&\n            typeof width === 'number' &&\n            typeof height === 'number') {\n            return this.coord.localToClientRect(x, y, width, height);\n        }\n        return this.coord.localToClientPoint(x, y);\n    }\n    localToGraph(x, y, width, height) {\n        if (Rectangle.isRectangleLike(x)) {\n            return this.coord.localToGraphRect(x);\n        }\n        if (typeof x === 'number' &&\n            typeof y === 'number' &&\n            typeof width === 'number' &&\n            typeof height === 'number') {\n            return this.coord.localToGraphRect(x, y, width, height);\n        }\n        return this.coord.localToGraphPoint(x, y);\n    }\n    graphToLocal(x, y, width, height) {\n        if (Rectangle.isRectangleLike(x)) {\n            return this.coord.graphToLocalRect(x);\n        }\n        if (typeof x === 'number' &&\n            typeof y === 'number' &&\n            typeof width === 'number' &&\n            typeof height === 'number') {\n            return this.coord.graphToLocalRect(x, y, width, height);\n        }\n        return this.coord.graphToLocalPoint(x, y);\n    }\n    clientToGraph(x, y, width, height) {\n        if (Rectangle.isRectangleLike(x)) {\n            return this.coord.clientToGraphRect(x);\n        }\n        if (typeof x === 'number' &&\n            typeof y === 'number' &&\n            typeof width === 'number' &&\n            typeof height === 'number') {\n            return this.coord.clientToGraphRect(x, y, width, height);\n        }\n        return this.coord.clientToGraphPoint(x, y);\n    }\n    // #endregion\n    // #region defs\n    defineFilter(options) {\n        return this.defs.filter(options);\n    }\n    defineGradient(options) {\n        return this.defs.gradient(options);\n    }\n    defineMarker(options) {\n        return this.defs.marker(options);\n    }\n    // #endregion\n    // #region grid\n    getGridSize() {\n        return this.grid.getGridSize();\n    }\n    setGridSize(gridSize) {\n        this.grid.setGridSize(gridSize);\n        return this;\n    }\n    showGrid() {\n        this.grid.show();\n        return this;\n    }\n    hideGrid() {\n        this.grid.hide();\n        return this;\n    }\n    clearGrid() {\n        this.grid.clear();\n        return this;\n    }\n    drawGrid(options) {\n        this.grid.draw(options);\n        return this;\n    }\n    // #endregion\n    // #region background\n    updateBackground() {\n        this.background.update();\n        return this;\n    }\n    drawBackground(options, onGraph) {\n        const scroller = this.getPlugin('scroller');\n        if (scroller != null && (this.options.background == null || !onGraph)) {\n            scroller.drawBackground(options, onGraph);\n        }\n        else {\n            this.background.draw(options);\n        }\n        return this;\n    }\n    clearBackground(onGraph) {\n        const scroller = this.getPlugin('scroller');\n        if (scroller != null && (this.options.background == null || !onGraph)) {\n            scroller.clearBackground(onGraph);\n        }\n        else {\n            this.background.clear();\n        }\n        return this;\n    }\n    // #endregion\n    // #region virtual-render\n    enableVirtualRender() {\n        this.virtualRender.enableVirtualRender();\n        return this;\n    }\n    disableVirtualRender() {\n        this.virtualRender.disableVirtualRender();\n        return this;\n    }\n    // #endregion\n    // #region mousewheel\n    isMouseWheelEnabled() {\n        return !this.mousewheel.disabled;\n    }\n    enableMouseWheel() {\n        this.mousewheel.enable();\n        return this;\n    }\n    disableMouseWheel() {\n        this.mousewheel.disable();\n        return this;\n    }\n    toggleMouseWheel(enabled) {\n        if (enabled == null) {\n            if (this.isMouseWheelEnabled()) {\n                this.disableMouseWheel();\n            }\n            else {\n                this.enableMouseWheel();\n            }\n        }\n        else if (enabled) {\n            this.enableMouseWheel();\n        }\n        else {\n            this.disableMouseWheel();\n        }\n        return this;\n    }\n    // #endregion\n    // #region panning\n    isPannable() {\n        const scroller = this.getPlugin('scroller');\n        if (scroller) {\n            return scroller.isPannable();\n        }\n        return this.panning.pannable;\n    }\n    enablePanning() {\n        const scroller = this.getPlugin('scroller');\n        if (scroller) {\n            scroller.enablePanning();\n        }\n        else {\n            this.panning.enablePanning();\n        }\n        return this;\n    }\n    disablePanning() {\n        const scroller = this.getPlugin('scroller');\n        if (scroller) {\n            scroller.disablePanning();\n        }\n        else {\n            this.panning.disablePanning();\n        }\n        return this;\n    }\n    togglePanning(pannable) {\n        if (pannable == null) {\n            if (this.isPannable()) {\n                this.disablePanning();\n            }\n            else {\n                this.enablePanning();\n            }\n        }\n        else if (pannable !== this.isPannable()) {\n            if (pannable) {\n                this.enablePanning();\n            }\n            else {\n                this.disablePanning();\n            }\n        }\n        return this;\n    }\n    // #endregion\n    // #region plugin\n    use(plugin, ...options) {\n        if (!this.installedPlugins.has(plugin)) {\n            this.installedPlugins.add(plugin);\n            plugin.init(this, ...options);\n        }\n        return this;\n    }\n    getPlugin(pluginName) {\n        return Array.from(this.installedPlugins).find((plugin) => plugin.name === pluginName);\n    }\n    getPlugins(pluginName) {\n        return Array.from(this.installedPlugins).filter((plugin) => pluginName.includes(plugin.name));\n    }\n    enablePlugins(plugins) {\n        let postPlugins = plugins;\n        if (!Array.isArray(postPlugins)) {\n            postPlugins = [postPlugins];\n        }\n        const aboutToChangePlugins = this.getPlugins(postPlugins);\n        aboutToChangePlugins === null || aboutToChangePlugins === void 0 ? void 0 : aboutToChangePlugins.forEach((plugin) => {\n            var _a;\n            (_a = plugin === null || plugin === void 0 ? void 0 : plugin.enable) === null || _a === void 0 ? void 0 : _a.call(plugin);\n        });\n        return this;\n    }\n    disablePlugins(plugins) {\n        let postPlugins = plugins;\n        if (!Array.isArray(postPlugins)) {\n            postPlugins = [postPlugins];\n        }\n        const aboutToChangePlugins = this.getPlugins(postPlugins);\n        aboutToChangePlugins === null || aboutToChangePlugins === void 0 ? void 0 : aboutToChangePlugins.forEach((plugin) => {\n            var _a;\n            (_a = plugin === null || plugin === void 0 ? void 0 : plugin.disable) === null || _a === void 0 ? void 0 : _a.call(plugin);\n        });\n        return this;\n    }\n    isPluginEnabled(pluginName) {\n        var _a;\n        const pluginIns = this.getPlugin(pluginName);\n        return (_a = pluginIns === null || pluginIns === void 0 ? void 0 : pluginIns.isEnabled) === null || _a === void 0 ? void 0 : _a.call(pluginIns);\n    }\n    disposePlugins(plugins) {\n        let postPlugins = plugins;\n        if (!Array.isArray(postPlugins)) {\n            postPlugins = [postPlugins];\n        }\n        const aboutToChangePlugins = this.getPlugins(postPlugins);\n        aboutToChangePlugins === null || aboutToChangePlugins === void 0 ? void 0 : aboutToChangePlugins.forEach((plugin) => {\n            plugin.dispose();\n            this.installedPlugins.delete(plugin);\n        });\n        return this;\n    }\n    // #endregion\n    // #region dispose\n    dispose(clean = true) {\n        if (clean) {\n            this.model.dispose();\n        }\n        this.css.dispose();\n        this.defs.dispose();\n        this.grid.dispose();\n        this.coord.dispose();\n        this.transform.dispose();\n        this.highlight.dispose();\n        this.background.dispose();\n        this.mousewheel.dispose();\n        this.panning.dispose();\n        this.view.dispose();\n        this.renderer.dispose();\n        this.installedPlugins.forEach((plugin) => {\n            plugin.dispose();\n        });\n    }\n}\n__decorate([\n    Basecoat.dispose()\n], Graph.prototype, \"dispose\", null);\n(function (Graph) {\n    /* eslint-disable @typescript-eslint/no-unused-vars */\n    Graph.View = GraphView;\n    Graph.Renderer = ViewRenderer;\n    Graph.MouseWheel = Wheel;\n    Graph.DefsManager = Defs;\n    Graph.GridManager = Grid;\n    Graph.CoordManager = Coord;\n    Graph.TransformManager = Transform;\n    Graph.HighlightManager = Highlight;\n    Graph.BackgroundManager = Background;\n    Graph.PanningManager = Panning;\n})(Graph || (Graph = {}));\n(function (Graph) {\n    Graph.toStringTag = `X6.${Graph.name}`;\n    function isGraph(instance) {\n        if (instance == null) {\n            return false;\n        }\n        if (instance instanceof Graph) {\n            return true;\n        }\n        const tag = instance[Symbol.toStringTag];\n        if (tag == null || tag === Graph.toStringTag) {\n            return true;\n        }\n        return false;\n    }\n    Graph.isGraph = isGraph;\n})(Graph || (Graph = {}));\n(function (Graph) {\n    function render(options, data) {\n        const graph = options instanceof HTMLElement\n            ? new Graph({ container: options })\n            : new Graph(options);\n        if (data != null) {\n            graph.fromJSON(data);\n        }\n        return graph;\n    }\n    Graph.render = render;\n})(Graph || (Graph = {}));\n(function (Graph) {\n    Graph.registerNode = Node.registry.register;\n    Graph.registerEdge = Edge.registry.register;\n    Graph.registerView = CellView.registry.register;\n    Graph.registerAttr = Registry.Attr.registry.register;\n    Graph.registerGrid = Registry.Grid.registry.register;\n    Graph.registerFilter = Registry.Filter.registry.register;\n    Graph.registerNodeTool = Registry.NodeTool.registry.register;\n    Graph.registerEdgeTool = Registry.EdgeTool.registry.register;\n    Graph.registerBackground = Registry.Background.registry.register;\n    Graph.registerHighlighter = Registry.Highlighter.registry.register;\n    Graph.registerPortLayout = Registry.PortLayout.registry.register;\n    Graph.registerPortLabelLayout = Registry.PortLabelLayout.registry.register;\n    Graph.registerMarker = Registry.Marker.registry.register;\n    Graph.registerRouter = Registry.Router.registry.register;\n    Graph.registerConnector = Registry.Connector.registry.register;\n    Graph.registerAnchor = Registry.NodeAnchor.registry.register;\n    Graph.registerEdgeAnchor = Registry.EdgeAnchor.registry.register;\n    Graph.registerConnectionPoint = Registry.ConnectionPoint.registry.register;\n})(Graph || (Graph = {}));\n(function (Graph) {\n    Graph.unregisterNode = Node.registry.unregister;\n    Graph.unregisterEdge = Edge.registry.unregister;\n    Graph.unregisterView = CellView.registry.unregister;\n    Graph.unregisterAttr = Registry.Attr.registry.unregister;\n    Graph.unregisterGrid = Registry.Grid.registry.unregister;\n    Graph.unregisterFilter = Registry.Filter.registry.unregister;\n    Graph.unregisterNodeTool = Registry.NodeTool.registry.unregister;\n    Graph.unregisterEdgeTool = Registry.EdgeTool.registry.unregister;\n    Graph.unregisterBackground = Registry.Background.registry.unregister;\n    Graph.unregisterHighlighter = Registry.Highlighter.registry.unregister;\n    Graph.unregisterPortLayout = Registry.PortLayout.registry.unregister;\n    Graph.unregisterPortLabelLayout = Registry.PortLabelLayout.registry.unregister;\n    Graph.unregisterMarker = Registry.Marker.registry.unregister;\n    Graph.unregisterRouter = Registry.Router.registry.unregister;\n    Graph.unregisterConnector = Registry.Connector.registry.unregister;\n    Graph.unregisterAnchor = Registry.NodeAnchor.registry.unregister;\n    Graph.unregisterEdgeAnchor = Registry.EdgeAnchor.registry.unregister;\n    Graph.unregisterConnectionPoint = Registry.ConnectionPoint.registry.unregister;\n})(Graph || (Graph = {}));\n//# sourceMappingURL=graph.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Dom } from '@antv/x6-common';\nimport { Markup } from '../view';\nimport { Node } from '../model/node';\nimport { NodeView } from '../view/node';\nimport { Graph } from '../graph/graph';\nexport class HTML extends Node {\n}\n(function (HTML) {\n    class View extends NodeView {\n        init() {\n            super.init();\n            this.cell.on('change:*', this.onCellChangeAny, this);\n        }\n        onCellChangeAny({ key }) {\n            const content = HTML.shapeMaps[this.cell.shape];\n            if (content) {\n                const { effect } = content;\n                if (!effect || effect.includes(key)) {\n                    this.renderHTMLComponent();\n                }\n            }\n        }\n        confirmUpdate(flag) {\n            const ret = super.confirmUpdate(flag);\n            return this.handleAction(ret, View.action, () => this.renderHTMLComponent());\n        }\n        renderHTMLComponent() {\n            const container = this.selectors && this.selectors.foContent;\n            if (container) {\n                Dom.empty(container);\n                const content = HTML.shapeMaps[this.cell.shape];\n                if (!content) {\n                    return;\n                }\n                let { html } = content;\n                if (typeof html === 'function') {\n                    html = html(this.cell);\n                }\n                if (html) {\n                    if (typeof html === 'string') {\n                        container.innerHTML = html;\n                    }\n                    else {\n                        Dom.append(container, html);\n                    }\n                }\n            }\n        }\n        dispose() {\n            this.cell.off('change:*', this.onCellChangeAny, this);\n        }\n    }\n    __decorate([\n        View.dispose()\n    ], View.prototype, \"dispose\", null);\n    HTML.View = View;\n    (function (View) {\n        View.action = 'html';\n        View.config({\n            bootstrap: [View.action],\n            actions: {\n                html: View.action,\n            },\n        });\n        NodeView.registry.register('html-view', View, true);\n    })(View = HTML.View || (HTML.View = {}));\n})(HTML || (HTML = {}));\n(function (HTML) {\n    HTML.config({\n        view: 'html-view',\n        markup: [\n            {\n                tagName: 'rect',\n                selector: 'body',\n            },\n            Object.assign({}, Markup.getForeignObjectMarkup()),\n            {\n                tagName: 'text',\n                selector: 'label',\n            },\n        ],\n        attrs: {\n            body: {\n                fill: 'none',\n                stroke: 'none',\n                refWidth: '100%',\n                refHeight: '100%',\n            },\n            fo: {\n                refWidth: '100%',\n                refHeight: '100%',\n            },\n        },\n    });\n    Node.registry.register('html', HTML, true);\n})(HTML || (HTML = {}));\n(function (HTML) {\n    HTML.shapeMaps = {};\n    function register(config) {\n        const { shape, html, effect, inherit } = config, others = __rest(config, [\"shape\", \"html\", \"effect\", \"inherit\"]);\n        if (!shape) {\n            throw new Error('should specify shape in config');\n        }\n        HTML.shapeMaps[shape] = {\n            html,\n            effect,\n        };\n        Graph.registerNode(shape, Object.assign({ inherit: inherit || 'html' }, others), true);\n    }\n    HTML.register = register;\n})(HTML || (HTML = {}));\n//# sourceMappingURL=html.js.map","/* eslint-disable */\n/**\n * Auto generated file, do not modify it!\n */\nexport const content = `.x6-widget-dnd {\n  position: absolute;\n  top: -10000px;\n  left: -10000px;\n  z-index: 999999;\n  display: none;\n  cursor: move;\n  opacity: 0.7;\n  pointer-events: 'cursor';\n}\n.x6-widget-dnd.dragging {\n  display: inline-block;\n}\n.x6-widget-dnd.dragging * {\n  pointer-events: none !important;\n}\n.x6-widget-dnd .x6-graph {\n  background: transparent;\n  box-shadow: none;\n}\n`;\n//# sourceMappingURL=raw.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { GeometryUtil, Rectangle, FunctionExt, Dom, CssLoader, View, Graph, } from '@antv/x6';\nimport { content } from './style/raw';\nexport class Dnd extends View {\n    get targetScroller() {\n        const target = this.options.target;\n        const scroller = target.getPlugin('scroller');\n        return scroller;\n    }\n    get targetGraph() {\n        return this.options.target;\n    }\n    get targetModel() {\n        return this.targetGraph.model;\n    }\n    get snapline() {\n        const target = this.options.target;\n        const snapline = target.getPlugin('snapline');\n        return snapline;\n    }\n    constructor(options) {\n        super();\n        this.name = 'dnd';\n        this.options = Object.assign(Object.assign({}, Dnd.defaults), options);\n        this.init();\n    }\n    init() {\n        CssLoader.ensure(this.name, content);\n        this.container = document.createElement('div');\n        Dom.addClass(this.container, this.prefixClassName('widget-dnd'));\n        this.draggingGraph = new Graph(Object.assign(Object.assign({}, this.options.delegateGraphOptions), { container: document.createElement('div'), width: 1, height: 1, async: false }));\n        Dom.append(this.container, this.draggingGraph.container);\n    }\n    start(node, evt) {\n        const e = evt;\n        e.preventDefault();\n        this.targetModel.startBatch('dnd');\n        Dom.addClass(this.container, 'dragging');\n        Dom.appendTo(this.container, this.options.draggingContainer || document.body);\n        this.sourceNode = node;\n        this.prepareDragging(node, e.clientX, e.clientY);\n        const local = this.updateNodePosition(e.clientX, e.clientY);\n        if (this.isSnaplineEnabled()) {\n            this.snapline.captureCursorOffset({\n                e,\n                node,\n                cell: node,\n                view: this.draggingView,\n                x: local.x,\n                y: local.y,\n            });\n            this.draggingNode.on('change:position', this.snap, this);\n        }\n        this.delegateDocumentEvents(Dnd.documentEvents, e.data);\n    }\n    isSnaplineEnabled() {\n        return this.snapline && this.snapline.isEnabled();\n    }\n    prepareDragging(sourceNode, clientX, clientY) {\n        const draggingGraph = this.draggingGraph;\n        const draggingModel = draggingGraph.model;\n        const draggingNode = this.options.getDragNode(sourceNode, {\n            sourceNode,\n            draggingGraph,\n            targetGraph: this.targetGraph,\n        });\n        draggingNode.position(0, 0);\n        let padding = 5;\n        if (this.isSnaplineEnabled()) {\n            padding += this.snapline.options.tolerance || 0;\n        }\n        if (this.isSnaplineEnabled() || this.options.scaled) {\n            const scale = this.targetGraph.transform.getScale();\n            draggingGraph.scale(scale.sx, scale.sy);\n            padding *= Math.max(scale.sx, scale.sy);\n        }\n        else {\n            draggingGraph.scale(1, 1);\n        }\n        this.clearDragging();\n        // if (this.options.animation) {\n        //   this.$container.stop(true, true)\n        // }\n        draggingModel.resetCells([draggingNode]);\n        const delegateView = draggingGraph.findViewByCell(draggingNode);\n        delegateView.undelegateEvents();\n        delegateView.cell.off('changed');\n        draggingGraph.fitToContent({\n            padding,\n            allowNewOrigin: 'any',\n            useCellGeometry: false,\n        });\n        const bbox = delegateView.getBBox();\n        this.geometryBBox = delegateView.getBBox({ useCellGeometry: true });\n        this.delta = this.geometryBBox.getTopLeft().diff(bbox.getTopLeft());\n        this.draggingNode = draggingNode;\n        this.draggingView = delegateView;\n        this.draggingBBox = draggingNode.getBBox();\n        this.padding = padding;\n        this.originOffset = this.updateGraphPosition(clientX, clientY);\n    }\n    updateGraphPosition(clientX, clientY) {\n        const scrollTop = document.body.scrollTop || document.documentElement.scrollTop;\n        const scrollLeft = document.body.scrollLeft || document.documentElement.scrollLeft;\n        const delta = this.delta;\n        const nodeBBox = this.geometryBBox;\n        const padding = this.padding || 5;\n        const offset = {\n            left: clientX - delta.x - nodeBBox.width / 2 - padding + scrollLeft,\n            top: clientY - delta.y - nodeBBox.height / 2 - padding + scrollTop,\n        };\n        if (this.draggingGraph) {\n            Dom.css(this.container, {\n                left: `${offset.left}px`,\n                top: `${offset.top}px`,\n            });\n        }\n        return offset;\n    }\n    updateNodePosition(x, y) {\n        const local = this.targetGraph.clientToLocal(x, y);\n        const bbox = this.draggingBBox;\n        local.x -= bbox.width / 2;\n        local.y -= bbox.height / 2;\n        this.draggingNode.position(local.x, local.y);\n        return local;\n    }\n    snap({ cell, current, options, }) {\n        const node = cell;\n        if (options.snapped) {\n            const bbox = this.draggingBBox;\n            node.position(bbox.x + options.tx, bbox.y + options.ty, { silent: true });\n            this.draggingView.translate();\n            node.position(current.x, current.y, { silent: true });\n            this.snapOffset = {\n                x: options.tx,\n                y: options.ty,\n            };\n        }\n        else {\n            this.snapOffset = null;\n        }\n    }\n    onDragging(evt) {\n        const draggingView = this.draggingView;\n        if (draggingView) {\n            evt.preventDefault();\n            const e = this.normalizeEvent(evt);\n            const clientX = e.clientX;\n            const clientY = e.clientY;\n            this.updateGraphPosition(clientX, clientY);\n            const local = this.updateNodePosition(clientX, clientY);\n            const embeddingMode = this.targetGraph.options.embedding.enabled;\n            const isValidArea = (embeddingMode || this.isSnaplineEnabled()) &&\n                this.isInsideValidArea({\n                    x: clientX,\n                    y: clientY,\n                });\n            if (embeddingMode) {\n                draggingView.setEventData(e, {\n                    graph: this.targetGraph,\n                    candidateEmbedView: this.candidateEmbedView,\n                });\n                const data = draggingView.getEventData(e);\n                if (isValidArea) {\n                    draggingView.processEmbedding(e, data);\n                }\n                else {\n                    draggingView.clearEmbedding(data);\n                }\n                this.candidateEmbedView = data.candidateEmbedView;\n            }\n            // update snapline\n            if (this.isSnaplineEnabled()) {\n                if (isValidArea) {\n                    this.snapline.snapOnMoving({\n                        e,\n                        view: draggingView,\n                        x: local.x,\n                        y: local.y,\n                    });\n                }\n                else {\n                    this.snapline.hide();\n                }\n            }\n        }\n    }\n    onDragEnd(evt) {\n        const draggingNode = this.draggingNode;\n        if (draggingNode) {\n            const e = this.normalizeEvent(evt);\n            const draggingView = this.draggingView;\n            const draggingBBox = this.draggingBBox;\n            const snapOffset = this.snapOffset;\n            let x = draggingBBox.x;\n            let y = draggingBBox.y;\n            if (snapOffset) {\n                x += snapOffset.x;\n                y += snapOffset.y;\n            }\n            draggingNode.position(x, y, { silent: true });\n            const ret = this.drop(draggingNode, { x: e.clientX, y: e.clientY });\n            const callback = (node) => {\n                if (node) {\n                    this.onDropped(draggingNode);\n                    if (this.targetGraph.options.embedding.enabled && draggingView) {\n                        draggingView.setEventData(e, {\n                            cell: node,\n                            graph: this.targetGraph,\n                            candidateEmbedView: this.candidateEmbedView,\n                        });\n                        draggingView.finalizeEmbedding(e, draggingView.getEventData(e));\n                    }\n                }\n                else {\n                    this.onDropInvalid();\n                }\n                this.candidateEmbedView = null;\n                this.targetModel.stopBatch('dnd');\n            };\n            if (FunctionExt.isAsync(ret)) {\n                // stop dragging\n                this.undelegateDocumentEvents();\n                ret.then(callback); // eslint-disable-line\n            }\n            else {\n                callback(ret);\n            }\n        }\n    }\n    clearDragging() {\n        if (this.draggingNode) {\n            this.sourceNode = null;\n            this.draggingNode.remove();\n            this.draggingNode = null;\n            this.draggingView = null;\n            this.delta = null;\n            this.padding = null;\n            this.snapOffset = null;\n            this.originOffset = null;\n            this.undelegateDocumentEvents();\n        }\n    }\n    onDropped(draggingNode) {\n        if (this.draggingNode === draggingNode) {\n            this.clearDragging();\n            Dom.removeClass(this.container, 'dragging');\n            Dom.remove(this.container);\n        }\n    }\n    onDropInvalid() {\n        const draggingNode = this.draggingNode;\n        if (draggingNode) {\n            this.onDropped(draggingNode);\n            // todo\n            // const anim = this.options.animation\n            // if (anim) {\n            //   const duration = (typeof anim === 'object' && anim.duration) || 150\n            //   const easing = (typeof anim === 'object' && anim.easing) || 'swing'\n            //   this.draggingView = null\n            //   this.$container.animate(this.originOffset!, duration, easing, () =>\n            //     this.onDropped(draggingNode),\n            //   )\n            // } else {\n            //   this.onDropped(draggingNode)\n            // }\n        }\n    }\n    isInsideValidArea(p) {\n        let targetRect;\n        let dndRect = null;\n        const targetGraph = this.targetGraph;\n        const targetScroller = this.targetScroller;\n        if (this.options.dndContainer) {\n            dndRect = this.getDropArea(this.options.dndContainer);\n        }\n        const isInsideDndRect = dndRect && dndRect.containsPoint(p);\n        if (targetScroller) {\n            if (targetScroller.options.autoResize) {\n                targetRect = this.getDropArea(targetScroller.container);\n            }\n            else {\n                const outter = this.getDropArea(targetScroller.container);\n                targetRect = this.getDropArea(targetGraph.container).intersectsWithRect(outter);\n            }\n        }\n        else {\n            targetRect = this.getDropArea(targetGraph.container);\n        }\n        return !isInsideDndRect && targetRect && targetRect.containsPoint(p);\n    }\n    getDropArea(elem) {\n        const offset = Dom.offset(elem);\n        const scrollTop = document.body.scrollTop || document.documentElement.scrollTop;\n        const scrollLeft = document.body.scrollLeft || document.documentElement.scrollLeft;\n        return Rectangle.create({\n            x: offset.left +\n                parseInt(Dom.css(elem, 'border-left-width'), 10) -\n                scrollLeft,\n            y: offset.top +\n                parseInt(Dom.css(elem, 'border-top-width'), 10) -\n                scrollTop,\n            width: elem.clientWidth,\n            height: elem.clientHeight,\n        });\n    }\n    drop(draggingNode, pos) {\n        if (this.isInsideValidArea(pos)) {\n            const targetGraph = this.targetGraph;\n            const targetModel = targetGraph.model;\n            const local = targetGraph.clientToLocal(pos);\n            const sourceNode = this.sourceNode;\n            const droppingNode = this.options.getDropNode(draggingNode, {\n                sourceNode,\n                draggingNode,\n                targetGraph: this.targetGraph,\n                draggingGraph: this.draggingGraph,\n            });\n            const bbox = droppingNode.getBBox();\n            local.x += bbox.x - bbox.width / 2;\n            local.y += bbox.y - bbox.height / 2;\n            const gridSize = this.snapOffset ? 1 : targetGraph.getGridSize();\n            droppingNode.position(GeometryUtil.snapToGrid(local.x, gridSize), GeometryUtil.snapToGrid(local.y, gridSize));\n            droppingNode.removeZIndex();\n            const validateNode = this.options.validateNode;\n            const ret = validateNode\n                ? validateNode(droppingNode, {\n                    sourceNode,\n                    draggingNode,\n                    droppingNode,\n                    targetGraph,\n                    draggingGraph: this.draggingGraph,\n                })\n                : true;\n            if (typeof ret === 'boolean') {\n                if (ret) {\n                    targetModel.addCell(droppingNode, { stencil: this.cid });\n                    return droppingNode;\n                }\n                return null;\n            }\n            return FunctionExt.toDeferredBoolean(ret).then((valid) => {\n                if (valid) {\n                    targetModel.addCell(droppingNode, { stencil: this.cid });\n                    return droppingNode;\n                }\n                return null;\n            });\n        }\n        return null;\n    }\n    onRemove() {\n        if (this.draggingGraph) {\n            this.draggingGraph.view.remove();\n            this.draggingGraph.dispose();\n        }\n    }\n    dispose() {\n        this.remove();\n        CssLoader.clean(this.name);\n    }\n}\n__decorate([\n    View.dispose()\n], Dnd.prototype, \"dispose\", null);\n(function (Dnd) {\n    Dnd.defaults = {\n        // animation: false,\n        getDragNode: (sourceNode) => sourceNode.clone(),\n        getDropNode: (draggingNode) => draggingNode.clone(),\n    };\n    Dnd.documentEvents = {\n        mousemove: 'onDragging',\n        touchmove: 'onDragging',\n        mouseup: 'onDragEnd',\n        touchend: 'onDragEnd',\n        touchcancel: 'onDragEnd',\n    };\n})(Dnd || (Dnd = {}));\n//# sourceMappingURL=index.js.map","import { Model } from '@antv/x6';\nexport function grid(cells, options = {}) {\n    const model = Model.isModel(cells)\n        ? cells\n        : new Model().resetCells(cells, {\n            sort: false,\n            dryrun: true,\n        });\n    const nodes = model.getNodes();\n    const columns = options.columns || 1;\n    const rows = Math.ceil(nodes.length / columns);\n    const dx = options.dx || 0;\n    const dy = options.dy || 0;\n    const centre = options.center !== false;\n    const resizeToFit = options.resizeToFit === true;\n    const marginX = options.marginX || 0;\n    const marginY = options.marginY || 0;\n    const columnWidths = [];\n    let columnWidth = options.columnWidth;\n    if (columnWidth === 'compact') {\n        for (let j = 0; j < columns; j += 1) {\n            const items = GridLayout.getNodesInColumn(nodes, j, columns);\n            columnWidths.push(GridLayout.getMaxDim(items, 'width') + dx);\n        }\n    }\n    else {\n        if (columnWidth == null || columnWidth === 'auto') {\n            columnWidth = GridLayout.getMaxDim(nodes, 'width') + dx;\n        }\n        for (let i = 0; i < columns; i += 1) {\n            columnWidths.push(columnWidth);\n        }\n    }\n    const columnLefts = GridLayout.accumulate(columnWidths, marginX);\n    const rowHeights = [];\n    let rowHeight = options.rowHeight;\n    if (rowHeight === 'compact') {\n        for (let i = 0; i < rows; i += 1) {\n            const items = GridLayout.getNodesInRow(nodes, i, columns);\n            rowHeights.push(GridLayout.getMaxDim(items, 'height') + dy);\n        }\n    }\n    else {\n        if (rowHeight == null || rowHeight === 'auto') {\n            rowHeight = GridLayout.getMaxDim(nodes, 'height') + dy;\n        }\n        for (let i = 0; i < rows; i += 1) {\n            rowHeights.push(rowHeight);\n        }\n    }\n    const rowTops = GridLayout.accumulate(rowHeights, marginY);\n    model.startBatch('layout');\n    nodes.forEach((node, index) => {\n        const rowIndex = index % columns;\n        const columnIndex = Math.floor(index / columns);\n        const columnWidth = columnWidths[rowIndex];\n        const rowHeight = rowHeights[columnIndex];\n        let cx = 0;\n        let cy = 0;\n        let size = node.getSize();\n        if (resizeToFit) {\n            let width = columnWidth - 2 * dx;\n            let height = rowHeight - 2 * dy;\n            const calcHeight = size.height * (size.width ? width / size.width : 1);\n            const calcWidth = size.width * (size.height ? height / size.height : 1);\n            if (rowHeight < calcHeight) {\n                width = calcWidth;\n            }\n            else {\n                height = calcHeight;\n            }\n            size = {\n                width,\n                height,\n            };\n            node.setSize(size, options);\n        }\n        if (centre) {\n            cx = (columnWidth - size.width) / 2;\n            cy = (rowHeight - size.height) / 2;\n        }\n        node.position(columnLefts[rowIndex] + dx + cx, rowTops[columnIndex] + dy + cy, options);\n    });\n    model.stopBatch('layout');\n}\nvar GridLayout;\n(function (GridLayout) {\n    function getMaxDim(nodes, name) {\n        return nodes.reduce((memo, node) => Math.max(node === null || node === void 0 ? void 0 : node.getSize()[name], memo), 0);\n    }\n    GridLayout.getMaxDim = getMaxDim;\n    function getNodesInRow(nodes, rowIndex, columnCount) {\n        const res = [];\n        for (let i = columnCount * rowIndex, ii = i + columnCount; i < ii; i += 1) {\n            if (nodes[i])\n                res.push(nodes[i]);\n        }\n        return res;\n    }\n    GridLayout.getNodesInRow = getNodesInRow;\n    function getNodesInColumn(nodes, columnIndex, columnCount) {\n        const res = [];\n        for (let i = columnIndex, ii = nodes.length; i < ii; i += columnCount) {\n            if (nodes[i])\n                res.push(nodes[i]);\n        }\n        return res;\n    }\n    GridLayout.getNodesInColumn = getNodesInColumn;\n    function accumulate(items, start) {\n        return items.reduce((memo, item, i) => {\n            memo.push(memo[i] + item);\n            return memo;\n        }, [start || 0]);\n    }\n    GridLayout.accumulate = accumulate;\n})(GridLayout || (GridLayout = {}));\n//# sourceMappingURL=grid.js.map","/* eslint-disable */\n/**\n * Auto generated file, do not modify it!\n */\nexport const content = `.x6-widget-dnd {\n  position: absolute;\n  top: -10000px;\n  left: -10000px;\n  z-index: 999999;\n  display: none;\n  cursor: move;\n  opacity: 0.7;\n  pointer-events: 'cursor';\n}\n.x6-widget-dnd.dragging {\n  display: inline-block;\n}\n.x6-widget-dnd.dragging * {\n  pointer-events: none !important;\n}\n.x6-widget-dnd .x6-graph {\n  background: transparent;\n  box-shadow: none;\n}\n.x6-widget-stencil {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n}\n.x6-widget-stencil::after {\n  position: absolute;\n  top: 0;\n  display: block;\n  width: 100%;\n  height: 20px;\n  padding: 8px 0;\n  line-height: 20px;\n  text-align: center;\n  opacity: 0;\n  transition: top 0.1s linear, opacity 0.1s linear;\n  content: ' ';\n  pointer-events: none;\n}\n.x6-widget-stencil-content {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  height: auto;\n  overflow-x: hidden;\n  overflow-y: auto;\n}\n.x6-widget-stencil .x6-node [magnet]:not([magnet='passive']) {\n  pointer-events: none;\n}\n.x6-widget-stencil-group {\n  padding: 0;\n  padding-bottom: 8px;\n  overflow: hidden;\n  user-select: none;\n}\n.x6-widget-stencil-group.collapsed {\n  height: auto;\n  padding-bottom: 0;\n}\n.x6-widget-stencil-group-title {\n  position: relative;\n  margin-top: 0;\n  margin-bottom: 0;\n  padding: 4px;\n  cursor: pointer;\n}\n.x6-widget-stencil-title,\n.x6-widget-stencil-group > .x6-widget-stencil-group-title {\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  user-select: none;\n}\n.x6-widget-stencil .unmatched {\n  opacity: 0.3;\n}\n.x6-widget-stencil .x6-node.unmatched {\n  display: none;\n}\n.x6-widget-stencil-group.unmatched {\n  display: none;\n}\n.x6-widget-stencil-search-text {\n  position: relative;\n  z-index: 1;\n  box-sizing: border-box;\n  width: 100%;\n  height: 30px;\n  max-height: 30px;\n  line-height: 30px;\n  outline: 0;\n}\n.x6-widget-stencil.not-found::after {\n  opacity: 1;\n  content: attr(data-not-found-text);\n}\n.x6-widget-stencil.not-found.searchable::after {\n  top: 30px;\n}\n.x6-widget-stencil.not-found.searchable.collapsable::after {\n  top: 50px;\n}\n.x6-widget-stencil {\n  color: #333;\n  background: #f5f5f5;\n}\n.x6-widget-stencil-content {\n  position: absolute;\n}\n.x6-widget-stencil.collapsable > .x6-widget-stencil-content {\n  top: 32px;\n}\n.x6-widget-stencil.searchable > .x6-widget-stencil-content {\n  top: 80px;\n}\n.x6-widget-stencil.not-found::after {\n  position: absolute;\n}\n.x6-widget-stencil.not-found.searchable.collapsable::after {\n  top: 80px;\n}\n.x6-widget-stencil.not-found.searchable::after {\n  top: 60px;\n}\n.x6-widget-stencil-group {\n  height: auto;\n  margin-bottom: 1px;\n  padding: 0;\n  transition: none;\n}\n.x6-widget-stencil-group .x6-graph {\n  background: transparent;\n  box-shadow: none;\n}\n.x6-widget-stencil-group.collapsed {\n  height: auto;\n  max-height: 31px;\n}\n.x6-widget-stencil-title,\n.x6-widget-stencil-group > .x6-widget-stencil-group-title {\n  position: relative;\n  left: 0;\n  box-sizing: border-box;\n  width: 100%;\n  height: 32px;\n  padding: 0 5px 0 8px;\n  color: #666;\n  font-weight: 700;\n  font-size: 12px;\n  line-height: 32px;\n  cursor: default;\n  transition: all 0.3;\n}\n.x6-widget-stencil-title:hover,\n.x6-widget-stencil-group > .x6-widget-stencil-group-title:hover {\n  color: #444;\n}\n.x6-widget-stencil-title {\n  background: #e9e9e9;\n}\n.x6-widget-stencil-group > .x6-widget-stencil-group-title {\n  background: #ededed;\n}\n.x6-widget-stencil.collapsable > .x6-widget-stencil-title,\n.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title {\n  padding-left: 32px;\n  cursor: pointer;\n}\n.x6-widget-stencil.collapsable > .x6-widget-stencil-title::before,\n.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title::before {\n  position: absolute;\n  top: 6px;\n  left: 8px;\n  display: block;\n  width: 18px;\n  height: 18px;\n  margin: 0;\n  padding: 0;\n  background-color: transparent;\n  background-repeat: no-repeat;\n  background-position: 0 0;\n  border: none;\n  content: ' ';\n}\n.x6-widget-stencil.collapsable > .x6-widget-stencil-title::before,\n.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title::before {\n  background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJub256ZXJvIj48cGF0aCBkPSJNOS4zNzUuNUM0LjY4Ny41Ljg3NSA0LjMxMy44NzUgOWMwIDQuNjg4IDMuODEyIDguNSA4LjUgOC41IDQuNjg3IDAgOC41LTMuODEyIDguNS04LjUgMC00LjY4Ny0zLjgxMy04LjUtOC41LTguNXptMCAxNS44ODZDNS4zMDMgMTYuMzg2IDEuOTkgMTMuMDcyIDEuOTkgOXMzLjMxMi03LjM4NSA3LjM4NS03LjM4NVMxNi43NiA0LjkyOCAxNi43NiA5YzAgNC4wNzItMy4zMTMgNy4zODYtNy4zODUgNy4zODZ6Ii8+PHBhdGggZD0iTTEyLjc1MyA4LjQ0M0g1Ljk5N2EuNTU4LjU1OCAwIDAwMCAxLjExNmg2Ljc1NmEuNTU4LjU1OCAwIDAwMC0xLjExNnoiLz48L2c+PC9zdmc+');\n  opacity: 0.4;\n  transition: all 0.3s;\n}\n.x6-widget-stencil.collapsable > .x6-widget-stencil-title:hover::before,\n.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title:hover::before {\n  opacity: 0.6;\n}\n.x6-widget-stencil.collapsable.collapsed > .x6-widget-stencil-title::before,\n.x6-widget-stencil-group.collapsable.collapsed > .x6-widget-stencil-group-title::before {\n  background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJub256ZXJvIj48cGF0aCBkPSJNOS4zNzUuNUM0LjY4Ny41Ljg3NSA0LjMxMy44NzUgOWMwIDQuNjg4IDMuODEyIDguNSA4LjUgOC41IDQuNjg3IDAgOC41LTMuODEyIDguNS04LjUgMC00LjY4Ny0zLjgxMy04LjUtOC41LTguNXptMCAxNS44ODZDNS4zMDMgMTYuMzg2IDEuOTkgMTMuMDcyIDEuOTkgOXMzLjMxMi03LjM4NSA3LjM4NS03LjM4NVMxNi43NiA0LjkyOCAxNi43NiA5YzAgNC4wNzItMy4zMTMgNy4zODYtNy4zODUgNy4zODZ6Ii8+PHBhdGggZD0iTTEyLjc1MyA4LjQ0M0g1Ljk5N2EuNTU4LjU1OCAwIDAwMCAxLjExNmg2Ljc1NmEuNTU4LjU1OCAwIDAwMC0xLjExNnoiLz48cGF0aCBkPSJNOC44MTcgNS42MjN2Ni43NTZhLjU1OC41NTggMCAwMDEuMTE2IDBWNS42MjNhLjU1OC41NTggMCAxMC0xLjExNiAweiIvPjwvZz48L3N2Zz4=');\n  opacity: 0.4;\n}\n.x6-widget-stencil.collapsable.collapsed > .x6-widget-stencil-title:hover::before,\n.x6-widget-stencil-group.collapsable.collapsed > .x6-widget-stencil-group-title:hover::before {\n  opacity: 0.6;\n}\n.x6-widget-stencil input[type='search'] {\n  appearance: textfield;\n}\n.x6-widget-stencil input[type='search']::-webkit-search-cancel-button,\n.x6-widget-stencil input[type='search']::-webkit-search-decoration {\n  appearance: none;\n}\n.x6-widget-stencil-search-text {\n  display: block;\n  width: 90%;\n  margin: 8px 5%;\n  padding-left: 8px;\n  color: #333;\n  background: #fff;\n  border: 1px solid #e9e9e9;\n  border-radius: 12px;\n  outline: 0;\n}\n.x6-widget-stencil-search-text:focus {\n  outline: 0;\n}\n.x6-widget-stencil::after {\n  color: #808080;\n  font-weight: 600;\n  font-size: 12px;\n  background: 0 0;\n}\n`;\n//# sourceMappingURL=raw.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Dom, FunctionExt, CssLoader, Node, Model, View, Graph, } from '@antv/x6';\nimport { Dnd } from '@antv/x6-plugin-dnd';\nimport { grid } from './grid';\nimport { content } from './style/raw';\nexport class Stencil extends View {\n    get targetScroller() {\n        const target = this.options.target;\n        const scroller = target.getPlugin('scroller');\n        return scroller;\n    }\n    get targetGraph() {\n        return this.options.target;\n    }\n    get targetModel() {\n        return this.targetGraph.model;\n    }\n    constructor(options = {}) {\n        super();\n        this.name = 'stencil';\n        CssLoader.ensure(this.name, content);\n        this.graphs = {};\n        this.groups = {};\n        this.options = Object.assign(Object.assign({}, Stencil.defaultOptions), options);\n        this.init();\n    }\n    init() {\n        this.dnd = new Dnd(this.options);\n        this.onSearch = FunctionExt.debounce(this.onSearch, 200);\n        this.initContainer();\n        this.initSearch();\n        this.initContent();\n        this.initGroups();\n        this.setTitle();\n        this.startListening();\n    }\n    load(data, groupName) {\n        if (Array.isArray(data)) {\n            this.loadGroup(data, groupName);\n        }\n        else if (this.options.groups) {\n            Object.keys(this.options.groups).forEach((groupName) => {\n                if (data[groupName]) {\n                    this.loadGroup(data[groupName], groupName);\n                }\n            });\n        }\n        return this;\n    }\n    unload(data, groupName) {\n        if (Array.isArray(data)) {\n            this.loadGroup(data, groupName, true);\n        }\n        else if (this.options.groups) {\n            Object.keys(this.options.groups).forEach((groupName) => {\n                if (data[groupName]) {\n                    this.loadGroup(data[groupName], groupName, true);\n                }\n            });\n        }\n        return this;\n    }\n    toggleGroup(groupName) {\n        if (this.isGroupCollapsed(groupName)) {\n            this.expandGroup(groupName);\n        }\n        else {\n            this.collapseGroup(groupName);\n        }\n        return this;\n    }\n    collapseGroup(groupName) {\n        if (this.isGroupCollapsable(groupName)) {\n            const group = this.groups[groupName];\n            if (group && !this.isGroupCollapsed(groupName)) {\n                this.trigger('group:collapse', { name: groupName });\n                Dom.addClass(group, 'collapsed');\n            }\n        }\n        return this;\n    }\n    expandGroup(groupName) {\n        if (this.isGroupCollapsable(groupName)) {\n            const group = this.groups[groupName];\n            if (group && this.isGroupCollapsed(groupName)) {\n                this.trigger('group:expand', { name: groupName });\n                Dom.removeClass(group, 'collapsed');\n            }\n        }\n        return this;\n    }\n    isGroupCollapsable(groupName) {\n        const group = this.groups[groupName];\n        return Dom.hasClass(group, 'collapsable');\n    }\n    isGroupCollapsed(groupName) {\n        const group = this.groups[groupName];\n        return group && Dom.hasClass(group, 'collapsed');\n    }\n    collapseGroups() {\n        Object.keys(this.groups).forEach((groupName) => this.collapseGroup(groupName));\n        return this;\n    }\n    expandGroups() {\n        Object.keys(this.groups).forEach((groupName) => this.expandGroup(groupName));\n        return this;\n    }\n    resizeGroup(groupName, size) {\n        const graph = this.graphs[groupName];\n        if (graph) {\n            graph.resize(size.width, size.height);\n        }\n        return this;\n    }\n    addGroup(group) {\n        const groups = Array.isArray(group) ? group : [group];\n        if (this.options.groups) {\n            this.options.groups.push(...groups);\n        }\n        else {\n            this.options.groups = groups;\n        }\n        groups.forEach((group) => this.initGroup(group));\n    }\n    removeGroup(groupName) {\n        const groupNames = Array.isArray(groupName) ? groupName : [groupName];\n        if (this.options.groups) {\n            this.options.groups = this.options.groups.filter((group) => !groupNames.includes(group.name));\n            groupNames.forEach((groupName) => {\n                const graph = this.graphs[groupName];\n                this.unregisterGraphEvents(graph);\n                graph.dispose();\n                delete this.graphs[groupName];\n                const elem = this.groups[groupName];\n                Dom.remove(elem);\n                delete this.groups[groupName];\n            });\n        }\n    }\n    // #endregion\n    initContainer() {\n        this.container = document.createElement('div');\n        Dom.addClass(this.container, this.prefixClassName(ClassNames.base));\n        Dom.attr(this.container, 'data-not-found-text', this.options.notFoundText || 'No matches found');\n    }\n    initContent() {\n        this.content = document.createElement('div');\n        Dom.addClass(this.content, this.prefixClassName(ClassNames.content));\n        Dom.appendTo(this.content, this.container);\n    }\n    initSearch() {\n        if (this.options.search) {\n            Dom.addClass(this.container, 'searchable');\n            Dom.append(this.container, this.renderSearch());\n        }\n    }\n    initGroup(group) {\n        const globalGraphOptions = this.options.stencilGraphOptions || {};\n        const groupElem = document.createElement('div');\n        Dom.addClass(groupElem, this.prefixClassName(ClassNames.group));\n        Dom.attr(groupElem, 'data-name', group.name);\n        if ((group.collapsable == null && this.options.collapsable) ||\n            group.collapsable !== false) {\n            Dom.addClass(groupElem, 'collapsable');\n        }\n        Dom.toggleClass(groupElem, 'collapsed', group.collapsed === true);\n        const title = document.createElement('h3');\n        Dom.addClass(title, this.prefixClassName(ClassNames.groupTitle));\n        title.innerHTML = group.title || group.name;\n        const content = document.createElement('div');\n        Dom.addClass(content, this.prefixClassName(ClassNames.groupContent));\n        const graphOptionsInGroup = group.graphOptions;\n        const graph = new Graph(Object.assign(Object.assign(Object.assign({}, globalGraphOptions), graphOptionsInGroup), { container: document.createElement('div'), model: globalGraphOptions.model || new Model(), width: group.graphWidth || this.options.stencilGraphWidth, height: group.graphHeight || this.options.stencilGraphHeight, interacting: false, preventDefaultBlankAction: false }));\n        this.registerGraphEvents(graph);\n        Dom.append(content, graph.container);\n        Dom.append(groupElem, [title, content]);\n        Dom.appendTo(groupElem, this.content);\n        this.groups[group.name] = groupElem;\n        this.graphs[group.name] = graph;\n    }\n    initGroups() {\n        this.clearGroups();\n        this.setCollapsableState();\n        if (this.options.groups && this.options.groups.length) {\n            this.options.groups.forEach((group) => {\n                this.initGroup(group);\n            });\n        }\n        else {\n            const globalGraphOptions = this.options.stencilGraphOptions || {};\n            const graph = new Graph(Object.assign(Object.assign({}, globalGraphOptions), { container: document.createElement('div'), model: globalGraphOptions.model || new Model(), width: this.options.stencilGraphWidth, height: this.options.stencilGraphHeight, interacting: false, preventDefaultBlankAction: false }));\n            Dom.append(this.content, graph.container);\n            this.graphs[Private.defaultGroupName] = graph;\n        }\n    }\n    setCollapsableState() {\n        this.options.collapsable =\n            this.options.collapsable &&\n                this.options.groups &&\n                this.options.groups.some((group) => group.collapsable !== false);\n        if (this.options.collapsable) {\n            Dom.addClass(this.container, 'collapsable');\n            const collapsed = this.options.groups &&\n                this.options.groups.every((group) => group.collapsed || group.collapsable === false);\n            if (collapsed) {\n                Dom.addClass(this.container, 'collapsed');\n            }\n            else {\n                Dom.removeClass(this.container, 'collapsed');\n            }\n        }\n        else {\n            Dom.removeClass(this.container, 'collapsable');\n        }\n    }\n    setTitle() {\n        const title = document.createElement('div');\n        Dom.addClass(title, this.prefixClassName(ClassNames.title));\n        title.innerHTML = this.options.title;\n        Dom.appendTo(title, this.container);\n    }\n    renderSearch() {\n        const elem = document.createElement('div');\n        Dom.addClass(elem, this.prefixClassName(ClassNames.search));\n        const input = document.createElement('input');\n        Dom.attr(input, {\n            type: 'search',\n            placeholder: this.options.placeholder || 'Search',\n        });\n        Dom.addClass(input, this.prefixClassName(ClassNames.searchText));\n        Dom.append(elem, input);\n        return elem;\n    }\n    startListening() {\n        const title = this.prefixClassName(ClassNames.title);\n        const searchText = this.prefixClassName(ClassNames.searchText);\n        const groupTitle = this.prefixClassName(ClassNames.groupTitle);\n        this.delegateEvents({\n            [`click .${title}`]: 'onTitleClick',\n            [`touchstart .${title}`]: 'onTitleClick',\n            [`click .${groupTitle}`]: 'onGroupTitleClick',\n            [`touchstart .${groupTitle}`]: 'onGroupTitleClick',\n            [`input .${searchText}`]: 'onSearch',\n            [`focusin .${searchText}`]: 'onSearchFocusIn',\n            [`focusout .${searchText}`]: 'onSearchFocusOut',\n        });\n    }\n    stopListening() {\n        this.undelegateEvents();\n    }\n    registerGraphEvents(graph) {\n        graph.on('cell:mousedown', this.onDragStart, this);\n    }\n    unregisterGraphEvents(graph) {\n        graph.off('cell:mousedown', this.onDragStart, this);\n    }\n    loadGroup(cells, groupName, reverse) {\n        const model = this.getModel(groupName);\n        if (model) {\n            const nodes = cells.map((cell) => Node.isNode(cell) ? cell : Node.create(cell));\n            if (reverse === true) {\n                model.removeCells(nodes);\n            }\n            else {\n                model.resetCells(nodes);\n            }\n        }\n        const group = this.getGroup(groupName);\n        let height = this.options.stencilGraphHeight;\n        if (group && group.graphHeight != null) {\n            height = group.graphHeight;\n        }\n        const layout = (group && group.layout) || this.options.layout;\n        if (layout && model) {\n            FunctionExt.call(layout, this, model, group);\n        }\n        if (!height) {\n            const graph = this.getGraph(groupName);\n            graph.fitToContent({\n                minWidth: graph.options.width,\n                gridHeight: 1,\n                padding: (group && group.graphPadding) ||\n                    this.options.stencilGraphPadding ||\n                    10,\n            });\n        }\n        return this;\n    }\n    onDragStart(args) {\n        const { e, node } = args;\n        const group = this.getGroupByNode(node);\n        if (group && group.nodeMovable === false) {\n            return;\n        }\n        this.dnd.start(node, e);\n    }\n    filter(keyword, filter) {\n        const found = Object.keys(this.graphs).reduce((memo, groupName) => {\n            const graph = this.graphs[groupName];\n            const name = groupName === Private.defaultGroupName ? null : groupName;\n            const items = graph.model.getNodes().filter((cell) => {\n                let matched = false;\n                if (typeof filter === 'function') {\n                    matched = FunctionExt.call(filter, this, cell, keyword, name, this);\n                }\n                else if (typeof filter === 'boolean') {\n                    matched = filter;\n                }\n                else {\n                    matched = this.isCellMatched(cell, keyword, filter, keyword.toLowerCase() !== keyword);\n                }\n                const view = graph.renderer.findViewByCell(cell);\n                if (view) {\n                    Dom.toggleClass(view.container, 'unmatched', !matched);\n                }\n                return matched;\n            });\n            const found = items.length > 0;\n            const options = this.options;\n            const model = new Model();\n            model.resetCells(items);\n            if (options.layout) {\n                FunctionExt.call(options.layout, this, model, this.getGroup(groupName));\n            }\n            if (this.groups[groupName]) {\n                Dom.toggleClass(this.groups[groupName], 'unmatched', !found);\n            }\n            graph.fitToContent({\n                gridWidth: 1,\n                gridHeight: 1,\n                padding: options.stencilGraphPadding || 10,\n            });\n            return memo || found;\n        }, false);\n        Dom.toggleClass(this.container, 'not-found', !found);\n    }\n    isCellMatched(cell, keyword, filters, ignoreCase) {\n        if (keyword && filters) {\n            return Object.keys(filters).some((shape) => {\n                if (shape === '*' || cell.shape === shape) {\n                    const filter = filters[shape];\n                    if (typeof filter === 'boolean') {\n                        return filter;\n                    }\n                    const paths = Array.isArray(filter) ? filter : [filter];\n                    return paths.some((path) => {\n                        let val = cell.getPropByPath(path);\n                        if (val != null) {\n                            val = `${val}`;\n                            if (!ignoreCase) {\n                                val = val.toLowerCase();\n                            }\n                            return val.indexOf(keyword) >= 0;\n                        }\n                        return false;\n                    });\n                }\n                return false;\n            });\n        }\n        return true;\n    }\n    onSearch(evt) {\n        this.filter(evt.target.value, this.options.search);\n    }\n    onSearchFocusIn() {\n        Dom.addClass(this.container, 'is-focused');\n    }\n    onSearchFocusOut() {\n        Dom.removeClass(this.container, 'is-focused');\n    }\n    onTitleClick() {\n        if (this.options.collapsable) {\n            Dom.toggleClass(this.container, 'collapsed');\n            if (Dom.hasClass(this.container, 'collapsed')) {\n                this.collapseGroups();\n            }\n            else {\n                this.expandGroups();\n            }\n        }\n    }\n    onGroupTitleClick(evt) {\n        const group = evt.target.closest(`.${this.prefixClassName(ClassNames.group)}`);\n        if (group) {\n            this.toggleGroup(Dom.attr(group, 'data-name') || '');\n        }\n        const allCollapsed = Object.keys(this.groups).every((name) => {\n            const group = this.getGroup(name);\n            const groupElem = this.groups[name];\n            return ((group && group.collapsable === false) ||\n                Dom.hasClass(groupElem, 'collapsed'));\n        });\n        Dom.toggleClass(this.container, 'collapsed', allCollapsed);\n    }\n    getModel(groupName) {\n        const graph = this.getGraph(groupName);\n        return graph ? graph.model : null;\n    }\n    getGraph(groupName) {\n        return this.graphs[groupName || Private.defaultGroupName];\n    }\n    getGroup(groupName) {\n        const groups = this.options.groups;\n        if (groupName != null && groups && groups.length) {\n            return groups.find((group) => group.name === groupName);\n        }\n        return null;\n    }\n    getGroupByNode(node) {\n        const groups = this.options.groups;\n        if (groups) {\n            return groups.find((group) => {\n                const model = this.getModel(group.name);\n                if (model) {\n                    return model.has(node.id);\n                }\n                return false;\n            });\n        }\n        return null;\n    }\n    clearGroups() {\n        Object.keys(this.graphs).forEach((groupName) => {\n            const graph = this.graphs[groupName];\n            this.unregisterGraphEvents(graph);\n            graph.dispose();\n        });\n        Object.keys(this.groups).forEach((groupName) => {\n            const elem = this.groups[groupName];\n            Dom.remove(elem);\n        });\n        this.graphs = {};\n        this.groups = {};\n    }\n    onRemove() {\n        this.clearGroups();\n        this.dnd.remove();\n        this.stopListening();\n        this.undelegateDocumentEvents();\n    }\n    dispose() {\n        this.remove();\n        CssLoader.clean(this.name);\n    }\n}\n__decorate([\n    View.dispose()\n], Stencil.prototype, \"dispose\", null);\n(function (Stencil) {\n    Stencil.defaultOptions = Object.assign({ stencilGraphWidth: 200, stencilGraphHeight: 800, title: 'Stencil', collapsable: false, placeholder: 'Search', notFoundText: 'No matches found', layout(model, group) {\n            const options = {\n                columnWidth: this.options.stencilGraphWidth / 2 - 10,\n                columns: 2,\n                rowHeight: 80,\n                resizeToFit: false,\n                dx: 10,\n                dy: 10,\n            };\n            grid(model, Object.assign(Object.assign(Object.assign({}, options), this.options.layoutOptions), (group ? group.layoutOptions : {})));\n        } }, Dnd.defaults);\n})(Stencil || (Stencil = {}));\nvar ClassNames;\n(function (ClassNames) {\n    ClassNames.base = 'widget-stencil';\n    ClassNames.title = `${ClassNames.base}-title`;\n    ClassNames.search = `${ClassNames.base}-search`;\n    ClassNames.searchText = `${ClassNames.search}-text`;\n    ClassNames.content = `${ClassNames.base}-content`;\n    ClassNames.group = `${ClassNames.base}-group`;\n    ClassNames.groupTitle = `${ClassNames.group}-title`;\n    ClassNames.groupContent = `${ClassNames.group}-content`;\n})(ClassNames || (ClassNames = {}));\nvar Private;\n(function (Private) {\n    Private.defaultGroupName = '__default__';\n})(Private || (Private = {}));\n//# sourceMappingURL=index.js.map","import {Graph, Shape} from '@antv/x6'\r\n\r\n// /\r\nexport const showPorts = (ports, show) => {\r\n    for (let i = 0, len = ports.length; i < len; i = i + 1) {\r\n        ports[i].style.visibility = show ? 'visible' : 'hidden'\r\n    }\r\n}\r\n\r\nexport function createBlock() {\r\n// #region \r\n    const ports = {\r\n        groups: {\r\n            top: {\r\n                position: 'top',\r\n                attrs: {\r\n                    circle: {\r\n                        r: 4,\r\n                        magnet: true,\r\n                        stroke: '#5F95FF',\r\n                        strokeWidth: 1,\r\n                        fill: '#fff',\r\n                        style: {\r\n                            visibility: 'hidden',\r\n                        },\r\n                    },\r\n                },\r\n            },\r\n            right: {\r\n                position: 'right',\r\n                attrs: {\r\n                    circle: {\r\n                        r: 4,\r\n                        magnet: true,\r\n                        stroke: '#5F95FF',\r\n                        strokeWidth: 1,\r\n                        fill: '#fff',\r\n                        style: {\r\n                            visibility: 'hidden',\r\n                        },\r\n                    },\r\n                },\r\n            },\r\n            bottom: {\r\n                position: 'bottom',\r\n                attrs: {\r\n                    circle: {\r\n                        r: 4,\r\n                        magnet: true,\r\n                        stroke: '#5F95FF',\r\n                        strokeWidth: 1,\r\n                        fill: '#fff',\r\n                        style: {\r\n                            visibility: 'hidden',\r\n                        },\r\n                    },\r\n                },\r\n            },\r\n            left: {\r\n                position: 'left',\r\n                attrs: {\r\n                    circle: {\r\n                        r: 4,\r\n                        magnet: true,\r\n                        stroke: '#5F95FF',\r\n                        strokeWidth: 1,\r\n                        fill: '#fff',\r\n                        style: {\r\n                            visibility: 'hidden',\r\n                        },\r\n                    },\r\n                },\r\n            },\r\n        },\r\n        items: [\r\n            {\r\n                group: 'top',\r\n            },\r\n            {\r\n                group: 'right',\r\n            },\r\n            {\r\n                group: 'bottom',\r\n            },\r\n            {\r\n                group: 'left',\r\n            },\r\n        ],\r\n    }\r\n\r\n    Graph.registerNode(\r\n        'custom-rect',\r\n        {\r\n            inherit: 'rect',\r\n            width: 66,\r\n            height: 36,\r\n            attrs: {\r\n                body: {\r\n                    strokeWidth: 1,\r\n                    stroke: '#5F95FF',\r\n                    fill: '#EFF4FF',\r\n                },\r\n                text: {\r\n                    fontSize: 12,\r\n                    fill: '#262626',\r\n                },\r\n            },\r\n            ports: {...ports},\r\n        },\r\n        true,\r\n    )\r\n\r\n    Graph.registerNode(\r\n        'custom-polygon',\r\n        {\r\n            inherit: 'polygon',\r\n            width: 66,\r\n            height: 36,\r\n            attrs: {\r\n                body: {\r\n                    strokeWidth: 1,\r\n                    stroke: '#5F95FF',\r\n                    fill: '#EFF4FF',\r\n                },\r\n                text: {\r\n                    fontSize: 12,\r\n                    fill: '#262626',\r\n                },\r\n            },\r\n            ports: {\r\n                ...ports,\r\n                items: [\r\n                    {\r\n                        group: 'top',\r\n                    },\r\n                    {\r\n                        group: 'bottom',\r\n                    },\r\n                ],\r\n            },\r\n        },\r\n        true,\r\n    )\r\n\r\n    Graph.registerNode(\r\n        'custom-circle',\r\n        {\r\n            inherit: 'circle',\r\n            width: 45,\r\n            height: 45,\r\n            attrs: {\r\n                body: {\r\n                    strokeWidth: 1,\r\n                    stroke: '#5F95FF',\r\n                    fill: '#EFF4FF',\r\n                },\r\n                text: {\r\n                    fontSize: 12,\r\n                    fill: '#262626',\r\n                },\r\n            },\r\n            ports: {...ports},\r\n        },\r\n        true,\r\n    )\r\n\r\n    Graph.registerNode(\r\n        'custom-image',\r\n        {\r\n            inherit: 'rect',\r\n            width: 52,\r\n            height: 52,\r\n            markup: [\r\n                {\r\n                    tagName: 'rect',\r\n                    selector: 'body',\r\n                },\r\n                {\r\n                    tagName: 'image',\r\n                },\r\n                {\r\n                    tagName: 'text',\r\n                    selector: 'label',\r\n                },\r\n            ],\r\n            attrs: {\r\n                body: {\r\n                    stroke: '#5F95FF',\r\n                    fill: '#5F95FF',\r\n                },\r\n                image: {\r\n                    width: 26,\r\n                    height: 26,\r\n                    refX: 13,\r\n                    refY: 16,\r\n                },\r\n                label: {\r\n                    refX: 3,\r\n                    refY: 2,\r\n                    textAnchor: 'left',\r\n                    textVerticalAnchor: 'top',\r\n                    fontSize: 12,\r\n                    fill: '#fff',\r\n                },\r\n            },\r\n            ports: {...ports},\r\n        },\r\n        true,\r\n    )\r\n}\r\n\r\nexport function block(graph) {\r\n    return [\r\n        {\r\n            label: '',\r\n            shape: 'custom-circle',\r\n        },\r\n        {\r\n            label: '',\r\n            shape: 'custom-rect',\r\n        },\r\n        {\r\n            label: '',\r\n            shape: 'custom-polygon',\r\n            points: '40,0 80,40 40,80 0,40',\r\n        },\r\n        {\r\n            label: '',\r\n            shape: 'custom-circle',\r\n        },\r\n    ]\r\n}\r\n\r\nexport function reverseObject(object) {\r\n    const newObject = {}\r\n    for (const [key, value] of Object.entries(object)) {\r\n        newObject[value] = key\r\n    }\r\n    return newObject\r\n} ","import { Graph } from '@antv/x6';\nGraph.prototype.toSVG = function (callback, options) {\n    const instance = this.getPlugin('export');\n    if (instance) {\n        instance.toSVG(callback, options);\n    }\n};\nGraph.prototype.toPNG = function (callback, options) {\n    const instance = this.getPlugin('export');\n    if (instance) {\n        instance.toPNG(callback, options);\n    }\n};\nGraph.prototype.toJPEG = function (callback, options) {\n    const instance = this.getPlugin('export');\n    if (instance) {\n        instance.toJPEG(callback, options);\n    }\n};\nGraph.prototype.exportPNG = function (fileName, options) {\n    const instance = this.getPlugin('export');\n    if (instance) {\n        instance.exportPNG(fileName, options);\n    }\n};\nGraph.prototype.exportJPEG = function (fileName, options) {\n    const instance = this.getPlugin('export');\n    if (instance) {\n        instance.exportJPEG(fileName, options);\n    }\n};\nGraph.prototype.exportSVG = function (fileName, options) {\n    const instance = this.getPlugin('export');\n    if (instance) {\n        instance.exportSVG(fileName, options);\n    }\n};\n//# sourceMappingURL=api.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { DataUri, NumberExt, FunctionExt, Vector, Rectangle, Basecoat, Dom, } from '@antv/x6';\nimport './api';\nexport class Export extends Basecoat {\n    constructor() {\n        super();\n        this.name = 'export';\n    }\n    get view() {\n        return this.graph.view;\n    }\n    init(graph) {\n        this.graph = graph;\n    }\n    exportPNG(fileName = 'chart', options = {}) {\n        this.toPNG((dataUri) => {\n            DataUri.downloadDataUri(dataUri, fileName);\n        }, options);\n    }\n    exportJPEG(fileName = 'chart', options = {}) {\n        this.toPNG((dataUri) => {\n            DataUri.downloadDataUri(dataUri, fileName);\n        }, options);\n    }\n    exportSVG(fileName = 'chart', options = {}) {\n        this.toSVG((svg) => {\n            DataUri.downloadDataUri(DataUri.svgToDataUrl(svg), fileName);\n        }, options);\n    }\n    toSVG(callback, options = {}) {\n        this.notify('before:export', options);\n        const rawSVG = this.view.svg;\n        const vSVG = Vector.create(rawSVG).clone();\n        let clonedSVG = vSVG.node;\n        const vStage = vSVG.findOne(`.${this.view.prefixClassName('graph-svg-stage')}`);\n        const viewBox = options.viewBox || this.graph.graphToLocal(this.graph.getContentBBox());\n        const dimension = options.preserveDimensions;\n        if (dimension) {\n            const size = typeof dimension === 'boolean' ? viewBox : dimension;\n            vSVG.attr({\n                width: size.width,\n                height: size.height,\n            });\n        }\n        vSVG\n            .removeAttribute('style')\n            .attr('viewBox', [viewBox.x, viewBox.y, viewBox.width, viewBox.height].join(' '));\n        vStage.removeAttribute('transform');\n        // Stores all the CSS declarations from external stylesheets to the\n        // `style` attribute of the SVG document nodes.\n        // This is achieved in three steps.\n        // -----------------------------------\n        // 1. Disabling all the stylesheets in the page and therefore collecting\n        //    only default style values. This, together with the step 2, makes it\n        //    possible to discard default CSS property values and store only those\n        //    that differ.\n        //\n        // 2. Enabling back all the stylesheets in the page and collecting styles\n        //    that differ from the default values.\n        //\n        // 3. Applying the difference between default values and the ones set by\n        //    custom stylesheets onto the `style` attribute of each of the nodes\n        //    in SVG.\n        if (options.copyStyles !== false) {\n            const document = rawSVG.ownerDocument;\n            const raws = Array.from(rawSVG.querySelectorAll('*'));\n            const clones = Array.from(clonedSVG.querySelectorAll('*'));\n            const styleSheetCount = document.styleSheets.length;\n            const styleSheetsCopy = [];\n            for (let k = styleSheetCount - 1; k >= 0; k -= 1) {\n                // There is a bug (bugSS) in Chrome 14 and Safari. When you set\n                // `stylesheet.disable = true` it will also remove it from\n                // `document.styleSheets`. So we need to store all stylesheets before\n                // we disable them. Later on we put them back to `document.styleSheets`\n                // if needed.\n                // See the bug `https://code.google.com/p/chromium/issues/detail?id=88310`.\n                styleSheetsCopy[k] = document.styleSheets[k];\n                document.styleSheets[k].disabled = true;\n            }\n            const defaultComputedStyles = {};\n            raws.forEach((elem, index) => {\n                const computedStyle = window.getComputedStyle(elem, null);\n                // We're making a deep copy of the `computedStyle` so that it's not affected\n                // by that next step when all the stylesheets are re-enabled again.\n                const defaultComputedStyle = {};\n                Object.keys(computedStyle).forEach((property) => {\n                    defaultComputedStyle[property] =\n                        computedStyle.getPropertyValue(property);\n                });\n                defaultComputedStyles[index] = defaultComputedStyle;\n            });\n            // Copy all stylesheets back\n            if (styleSheetCount !== document.styleSheets.length) {\n                styleSheetsCopy.forEach((copy, index) => {\n                    document.styleSheets[index] = copy;\n                });\n            }\n            for (let i = 0; i < styleSheetCount; i += 1) {\n                document.styleSheets[i].disabled = false;\n            }\n            const customStyles = {};\n            raws.forEach((elem, index) => {\n                const computedStyle = window.getComputedStyle(elem, null);\n                const defaultComputedStyle = defaultComputedStyles[index];\n                const customStyle = {};\n                Object.keys(computedStyle).forEach((property) => {\n                    if (!NumberExt.isNumber(property) &&\n                        computedStyle.getPropertyValue(property) !==\n                            defaultComputedStyle[property]) {\n                        customStyle[property] = computedStyle.getPropertyValue(property);\n                    }\n                });\n                customStyles[index] = customStyle;\n            });\n            clones.forEach((elem, index) => {\n                Dom.css(elem, customStyles[index]);\n            });\n        }\n        const stylesheet = options.stylesheet;\n        if (typeof stylesheet === 'string') {\n            const cDATASection = rawSVG\n                .ownerDocument.implementation.createDocument(null, 'xml', null)\n                .createCDATASection(stylesheet);\n            vSVG.prepend(Vector.create('style', {\n                type: 'text/css',\n            }, [cDATASection]));\n        }\n        const format = () => {\n            const beforeSerialize = options.beforeSerialize;\n            if (typeof beforeSerialize === 'function') {\n                const ret = FunctionExt.call(beforeSerialize, this.graph, clonedSVG);\n                if (ret instanceof SVGSVGElement) {\n                    clonedSVG = ret;\n                }\n            }\n            const dataUri = new XMLSerializer()\n                .serializeToString(clonedSVG)\n                .replace(/&nbsp;/g, '\\u00a0');\n            this.notify('after:export', options);\n            callback(dataUri);\n        };\n        if (options.serializeImages) {\n            const deferrals = vSVG.find('image').map((vImage) => {\n                return new Promise((resolve) => {\n                    const url = vImage.attr('xlink:href') || vImage.attr('href');\n                    DataUri.imageToDataUri(url, (err, dataUri) => {\n                        if (!err && dataUri) {\n                            vImage.attr('xlink:href', dataUri);\n                        }\n                        resolve();\n                    });\n                });\n            });\n            Promise.all(deferrals).then(format);\n        }\n        else {\n            format();\n        }\n    }\n    toDataURL(callback, options) {\n        let viewBox = options.viewBox || this.graph.getContentBBox();\n        const padding = NumberExt.normalizeSides(options.padding);\n        if (options.width && options.height) {\n            if (padding.left + padding.right >= options.width) {\n                padding.left = padding.right = 0;\n            }\n            if (padding.top + padding.bottom >= options.height) {\n                padding.top = padding.bottom = 0;\n            }\n        }\n        const expanding = new Rectangle(-padding.left, -padding.top, padding.left + padding.right, padding.top + padding.bottom);\n        if (options.width && options.height) {\n            const width = viewBox.width + padding.left + padding.right;\n            const height = viewBox.height + padding.top + padding.bottom;\n            expanding.scale(width / options.width, height / options.height);\n        }\n        viewBox = Rectangle.create(viewBox).moveAndExpand(expanding);\n        const rawSize = typeof options.width === 'number' && typeof options.height === 'number'\n            ? { width: options.width, height: options.height }\n            : viewBox;\n        let scale = options.ratio ? parseFloat(options.ratio) : 1;\n        if (!Number.isFinite(scale) || scale === 0) {\n            scale = 1;\n        }\n        const size = {\n            width: Math.max(Math.round(rawSize.width * scale), 1),\n            height: Math.max(Math.round(rawSize.height * scale), 1),\n        };\n        {\n            const imgDataCanvas = document.createElement('canvas');\n            const context2D = imgDataCanvas.getContext('2d');\n            imgDataCanvas.width = size.width;\n            imgDataCanvas.height = size.height;\n            const x = size.width - 1;\n            const y = size.height - 1;\n            context2D.fillStyle = 'rgb(1,1,1)';\n            context2D.fillRect(x, y, 1, 1);\n            const data = context2D.getImageData(x, y, 1, 1).data;\n            if (data[0] !== 1 || data[1] !== 1 || data[2] !== 1) {\n                throw new Error('size exceeded');\n            }\n        }\n        const img = new Image();\n        img.onload = () => {\n            const canvas = document.createElement('canvas');\n            canvas.width = size.width;\n            canvas.height = size.height;\n            const context = canvas.getContext('2d');\n            context.fillStyle = options.backgroundColor || 'white';\n            context.fillRect(0, 0, size.width, size.height);\n            try {\n                context.drawImage(img, 0, 0, size.width, size.height);\n                const dataUri = canvas.toDataURL(options.type, options.quality);\n                callback(dataUri);\n            }\n            catch (error) {\n                // pass\n            }\n        };\n        this.toSVG((dataUri) => {\n            img.src = `data:image/svg+xml,${encodeURIComponent(dataUri)}`;\n        }, Object.assign(Object.assign({}, options), { viewBox, serializeImages: true, preserveDimensions: Object.assign({}, size) }));\n    }\n    toPNG(callback, options = {}) {\n        this.toDataURL(callback, Object.assign(Object.assign({}, options), { type: 'image/png' }));\n    }\n    toJPEG(callback, options = {}) {\n        this.toDataURL(callback, Object.assign(Object.assign({}, options), { type: 'image/jpeg' }));\n    }\n    notify(name, args) {\n        this.trigger(name, args);\n        this.graph.trigger(name, args);\n    }\n    dispose() {\n        this.off();\n    }\n}\n__decorate([\n    Basecoat.dispose()\n], Export.prototype, \"dispose\", null);\n//# sourceMappingURL=index.js.map","<template>\r\n    <div id=\"container\">\r\n        <div id=\"stencil\"></div>\r\n        <div id=\"graph-container\"></div>\r\n    </div>\r\n    <div>\r\n        <el-button type=\"primary\" @click=\"exportSvg\">svg</el-button>\r\n        <el-button type=\"primary\" @click=\"exportPng\">png</el-button>\r\n        <el-button type=\"primary\" @click=\"getShape\"></el-button>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { onMounted, ref } from 'vue';\r\nimport { Graph, Shape } from '@antv/x6'\r\nimport { Stencil } from \"@antv/x6-plugin-stencil\"\r\nimport { createBlock, showPorts, block } from './hook/UseAntVFlow'\r\nimport { Export } from '@antv/x6-plugin-export';\r\nimport { ElMessage } from 'element-plus';\r\nimport { uniqBy } from 'lodash'\r\n\r\nlet graph = ref(null)\r\n\r\nfunction init() {\r\n    // #region \r\n    graph.value = new Graph({\r\n        container: document.getElementById('graph-container'),\r\n        grid: true,\r\n        mousewheel: {\r\n            enabled: true,\r\n            zoomAtMousePosition: true,\r\n            modifiers: 'ctrl',\r\n            minScale: 0.5,\r\n            maxScale: 3,\r\n        },\r\n        connecting: {\r\n            router: {\r\n                name: 'manhattan',\r\n                args: {\r\n                    padding: 1,\r\n                },\r\n            },\r\n            connector: {\r\n                name: 'rounded',\r\n                args: {\r\n                    radius: 8,\r\n                },\r\n            },\r\n            anchor: 'center',\r\n            connectionPoint: 'anchor',\r\n            allowBlank: false,\r\n            snap: {\r\n                radius: 20,\r\n            },\r\n            createEdge() {\r\n                return new Shape.Edge({\r\n                    attrs: {\r\n                        line: {\r\n                            stroke: '#A2B1C3',\r\n                            strokeWidth: 2,\r\n                            targetMarker: {\r\n                                name: 'block',\r\n                                width: 12,\r\n                                height: 8,\r\n                            },\r\n                        },\r\n                    },\r\n                    zIndex: 0,\r\n                })\r\n            },\r\n            validateConnection({targetMagnet}) {\r\n                return !!targetMagnet\r\n            },\r\n        },\r\n        highlighting: {\r\n            magnetAdsorbed: {\r\n                name: 'stroke',\r\n                args: {\r\n                    attrs: {\r\n                        fill: '#5F95FF',\r\n                        stroke: '#5F95FF',\r\n                    },\r\n                },\r\n            },\r\n        },\r\n    })\r\n    // #endregion\r\n    graph.value.on('node:mouseenter', () => {\r\n        const container = document.getElementById('graph-container')\r\n        const ports = container.querySelectorAll('.x6-port-body')\r\n        showPorts(ports, true)\r\n    })\r\n    graph.value.on('node:mouseleave', () => {\r\n        const container = document.getElementById('graph-container')\r\n        const ports = container.querySelectorAll('.x6-port-body')\r\n        showPorts(ports, false)\r\n    })\r\n    // #region  stencil\r\n    const stencil = new Stencil({\r\n        title: '',\r\n        target: graph.value,\r\n        stencilGraphWidth: 200,\r\n        stencilGraphHeight: 180,\r\n        collapsable: true,\r\n        groups: [\r\n            {\r\n                title: '',\r\n                name: 'group1',\r\n            },\r\n            {\r\n                title: '',\r\n                name: 'group2',\r\n                graphHeight: 250,\r\n                layoutOptions: {\r\n                    rowHeight: 70,\r\n                },\r\n            },\r\n        ],\r\n        layoutOptions: {\r\n            columns: 2,\r\n            columnWidth: 80,\r\n            rowHeight: 55,\r\n        },\r\n    })\r\n    document.getElementById('stencil').appendChild(stencil.container)\r\n\r\n    const {r1, r2, r3, r4, r5, r6, imageShapes} = block(graph.value)\r\n    stencil.load([r1, r2, r3, r4, r5, r6], 'group1')\r\n    const imageNodes = imageShapes.map((item) =>\r\n        graph.value.createNode({\r\n            shape: 'custom-image',\r\n            label: item.label,\r\n            attrs: {\r\n                image: {\r\n                    'xlink:href': item.image,\r\n                },\r\n            },\r\n        }),\r\n    )\r\n    stencil.load(imageNodes, 'group2')\r\n    graph.value.use(new Export())\r\n}\r\n\r\nonMounted(() => {\r\n    createBlock()\r\n    init()\r\n})\r\n\r\nconst exportPng = () => {\r\n    graph.value.exportPNG('chart', {})\r\n}\r\n\r\nconst exportSvg = () => {\r\n    ElMessage.warning(\"tmd\")\r\n    graph.value.exportSVG('chart', {\r\n        preserveDimensions: true\r\n    })\r\n}\r\n\r\nconst getShape = () => {\r\n    ElMessage.success(\"\")\r\n    console.log('', graph.value.getCells())\r\n    console.log('', graph.value.getNodes())\r\n    const line = graph.value.getCells().filter(item => item.shape === 'edge')\r\n    const blocks = graph.value.getNodes()\r\n    let blocksSort = []\r\n    line.forEach(item => {\r\n        const sourceId = item['source']['cell']\r\n        const targetId = item['target']['cell']\r\n        blocks.forEach(b => {\r\n            if (b.id === sourceId) {\r\n                blocksSort.push(b)\r\n            }\r\n            if (b.id === targetId) {\r\n                blocksSort.push(b)\r\n            }\r\n        })\r\n    })\r\n    console.log(\"\", uniqBy(blocksSort,'id'))\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n    #container {\r\n        display: flex;\r\n        border: 1px solid #dfe3e8;\r\n        width: 100%;\r\n        height: 80vh;\r\n    }\r\n\r\n    #stencil {\r\n        position: relative;\r\n        width: 200px;\r\n        border-right: 1px solid #dfe3e8;\r\n    }\r\n\r\n    #graph-container {\r\n        flex: 1;\r\n    }\r\n</style>\r\n","import script from \"./AntVX6.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./AntVX6.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./AntVX6.vue?vue&type=style&index=0&id=d0a1cb70&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\test\\\\vue\\\\vue3-ts\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-d0a1cb70\"]])\n\nexport default __exports__","'use strict';\nvar $ = require('../internals/export');\nvar map = require('../internals/iterator-map');\nvar IS_PURE = require('../internals/is-pure');\n\n// `Iterator.prototype.map` method\n// https://tc39.es/ecma262/#sec-iterator.prototype.map\n$({ target: 'Iterator', proto: true, real: true, forced: IS_PURE }, {\n  map: map\n});\n","'use strict';\nvar call = require('../internals/function-call');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar getIteratorDirect = require('../internals/get-iterator-direct');\nvar createIteratorProxy = require('../internals/iterator-create-proxy');\nvar callWithSafeIterationClosing = require('../internals/call-with-safe-iteration-closing');\n\nvar IteratorProxy = createIteratorProxy(function () {\n  var iterator = this.iterator;\n  var result = anObject(call(this.next, iterator));\n  var done = this.done = !!result.done;\n  if (!done) return callWithSafeIterationClosing(iterator, this.mapper, [result.value, this.counter++], true);\n});\n\n// `Iterator.prototype.map` method\n// https://github.com/tc39/proposal-iterator-helpers\nmodule.exports = function map(mapper) {\n  anObject(this);\n  aCallable(mapper);\n  return new IteratorProxy(getIteratorDirect(this), {\n    mapper: mapper\n  });\n};\n","import root from './_root.js';\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    allocUnsafe = Buffer ? Buffer.allocUnsafe : undefined;\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var length = buffer.length,\n      result = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);\n\n  buffer.copy(result);\n  return result;\n}\n\nexport default cloneBuffer;\n"],"sourceRoot":""}