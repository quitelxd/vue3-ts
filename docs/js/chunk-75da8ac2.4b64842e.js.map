{"version":3,"sources":["webpack:///./node_modules/@antv/x6-common/es/polyfill/index.js","webpack:///./src/views/flow/AntVX6.vue","webpack:///./node_modules/@antv/x6-common/es/common/disposable.js","webpack:///./node_modules/lodash-es/now.js","webpack:///./node_modules/lodash-es/_trimmedEndIndex.js","webpack:///./node_modules/lodash-es/_baseTrim.js","webpack:///./node_modules/lodash-es/isSymbol.js","webpack:///./node_modules/lodash-es/toNumber.js","webpack:///./node_modules/lodash-es/debounce.js","webpack:///./node_modules/lodash-es/throttle.js","webpack:///./node_modules/@antv/x6-common/es/function/function.js","webpack:///./node_modules/@antv/x6-common/es/function/async.js","webpack:///./node_modules/@antv/x6-common/es/event/util.js","webpack:///./node_modules/@antv/x6-common/es/event/events.js","webpack:///./node_modules/lodash-es/_baseHas.js","webpack:///./node_modules/lodash-es/_isKey.js","webpack:///./node_modules/lodash-es/memoize.js","webpack:///./node_modules/lodash-es/_memoizeCapped.js","webpack:///./node_modules/lodash-es/_stringToPath.js","webpack:///./node_modules/lodash-es/_arrayMap.js","webpack:///./node_modules/lodash-es/_baseToString.js","webpack:///./node_modules/lodash-es/toString.js","webpack:///./node_modules/lodash-es/_castPath.js","webpack:///./node_modules/lodash-es/_toKey.js","webpack:///./node_modules/lodash-es/_hasPath.js","webpack:///./node_modules/lodash-es/has.js","webpack:///./node_modules/lodash-es/_baseGet.js","webpack:///./node_modules/lodash-es/_defineProperty.js","webpack:///./node_modules/lodash-es/_baseAssignValue.js","webpack:///./node_modules/lodash-es/_assignValue.js","webpack:///./node_modules/lodash-es/_baseSet.js","webpack:///./node_modules/lodash-es/_basePickBy.js","webpack:///./node_modules/lodash-es/_baseHasIn.js","webpack:///./node_modules/lodash-es/hasIn.js","webpack:///./node_modules/lodash-es/_basePick.js","webpack:///./node_modules/lodash-es/_isFlattenable.js","webpack:///./node_modules/lodash-es/_baseFlatten.js","webpack:///./node_modules/lodash-es/flatten.js","webpack:///./node_modules/lodash-es/_apply.js","webpack:///./node_modules/lodash-es/_overRest.js","webpack:///./node_modules/lodash-es/constant.js","webpack:///./node_modules/lodash-es/_baseSetToString.js","webpack:///./node_modules/lodash-es/_shortOut.js","webpack:///./node_modules/lodash-es/_setToString.js","webpack:///./node_modules/lodash-es/_flatRest.js","webpack:///./node_modules/lodash-es/pick.js","webpack:///./node_modules/lodash-es/_assignMergeValue.js","webpack:///./node_modules/lodash-es/_cloneArrayBuffer.js","webpack:///./node_modules/lodash-es/_cloneTypedArray.js","webpack:///./node_modules/lodash-es/_copyArray.js","webpack:///./node_modules/lodash-es/_baseCreate.js","webpack:///./node_modules/lodash-es/_getPrototype.js","webpack:///./node_modules/lodash-es/_initCloneObject.js","webpack:///./node_modules/lodash-es/isArrayLikeObject.js","webpack:///./node_modules/lodash-es/isPlainObject.js","webpack:///./node_modules/lodash-es/_safeGet.js","webpack:///./node_modules/lodash-es/_copyObject.js","webpack:///./node_modules/lodash-es/_nativeKeysIn.js","webpack:///./node_modules/lodash-es/_baseKeysIn.js","webpack:///./node_modules/lodash-es/keysIn.js","webpack:///./node_modules/lodash-es/toPlainObject.js","webpack:///./node_modules/lodash-es/_baseMergeDeep.js","webpack:///./node_modules/lodash-es/_baseMerge.js","webpack:///./node_modules/lodash-es/_baseRest.js","webpack:///./node_modules/lodash-es/_isIterateeCall.js","webpack:///./node_modules/lodash-es/_createAssigner.js","webpack:///./node_modules/lodash-es/merge.js","webpack:///./node_modules/lodash-es/isEmpty.js","webpack:///./node_modules/lodash-es/_baseAssign.js","webpack:///./node_modules/lodash-es/_baseAssignIn.js","webpack:///./node_modules/lodash-es/_copySymbols.js","webpack:///./node_modules/lodash-es/_getSymbolsIn.js","webpack:///./node_modules/lodash-es/_copySymbolsIn.js","webpack:///./node_modules/lodash-es/_getAllKeysIn.js","webpack:///./node_modules/lodash-es/_initCloneArray.js","webpack:///./node_modules/lodash-es/_cloneDataView.js","webpack:///./node_modules/lodash-es/_cloneRegExp.js","webpack:///./node_modules/lodash-es/_cloneSymbol.js","webpack:///./node_modules/lodash-es/_initCloneByTag.js","webpack:///./node_modules/lodash-es/_baseIsMap.js","webpack:///./node_modules/lodash-es/isMap.js","webpack:///./node_modules/lodash-es/_baseIsSet.js","webpack:///./node_modules/lodash-es/isSet.js","webpack:///./node_modules/lodash-es/_baseClone.js","webpack:///./node_modules/lodash-es/clone.js","webpack:///./node_modules/lodash-es/cloneDeep.js","webpack:///./node_modules/lodash-es/defaults.js","webpack:///./node_modules/lodash-es/_customDefaultsMerge.js","webpack:///./node_modules/lodash-es/mergeWith.js","webpack:///./node_modules/lodash-es/defaultsDeep.js","webpack:///./node_modules/@antv/x6-common/es/object/mixins.js","webpack:///./node_modules/@antv/x6-common/es/object/inherit.js","webpack:///./node_modules/@antv/x6-common/es/object/object.js","webpack:///./node_modules/@antv/x6-common/es/common/basecoat.js","webpack:///./node_modules/lodash-es/_baseFindIndex.js","webpack:///./node_modules/lodash-es/_baseIsNaN.js","webpack:///./node_modules/lodash-es/_strictIndexOf.js","webpack:///./node_modules/lodash-es/_baseIndexOf.js","webpack:///./node_modules/lodash-es/_arrayIncludes.js","webpack:///./node_modules/lodash-es/_arrayIncludesWith.js","webpack:///./node_modules/lodash-es/noop.js","webpack:///./node_modules/lodash-es/_createSet.js","webpack:///./node_modules/lodash-es/_baseUniq.js","webpack:///./node_modules/lodash-es/uniq.js","webpack:///./node_modules/lodash-es/union.js","webpack:///./node_modules/lodash-es/_baseSortedIndexBy.js","webpack:///./node_modules/lodash-es/_baseSortedIndex.js","webpack:///./node_modules/lodash-es/sortedIndex.js","webpack:///./node_modules/lodash-es/_baseIsMatch.js","webpack:///./node_modules/lodash-es/_isStrictComparable.js","webpack:///./node_modules/lodash-es/_getMatchData.js","webpack:///./node_modules/lodash-es/_matchesStrictComparable.js","webpack:///./node_modules/lodash-es/_baseMatches.js","webpack:///./node_modules/lodash-es/get.js","webpack:///./node_modules/lodash-es/_baseMatchesProperty.js","webpack:///./node_modules/lodash-es/_baseProperty.js","webpack:///./node_modules/lodash-es/_basePropertyDeep.js","webpack:///./node_modules/lodash-es/property.js","webpack:///./node_modules/lodash-es/_baseIteratee.js","webpack:///./node_modules/lodash-es/sortedIndexBy.js","webpack:///./node_modules/lodash-es/_baseMap.js","webpack:///./node_modules/lodash-es/_baseSortBy.js","webpack:///./node_modules/lodash-es/_compareAscending.js","webpack:///./node_modules/lodash-es/_compareMultiple.js","webpack:///./node_modules/lodash-es/_baseOrderBy.js","webpack:///./node_modules/lodash-es/sortBy.js","webpack:///./node_modules/lodash-es/_arrayAggregator.js","webpack:///./node_modules/lodash-es/_baseAggregator.js","webpack:///./node_modules/lodash-es/_createAggregator.js","webpack:///./node_modules/lodash-es/groupBy.js","webpack:///./node_modules/lodash-es/_baseDifference.js","webpack:///./node_modules/lodash-es/difference.js","webpack:///./node_modules/lodash-es/_baseExtremum.js","webpack:///./node_modules/lodash-es/_baseGt.js","webpack:///./node_modules/lodash-es/max.js","webpack:///./node_modules/lodash-es/uniqueId.js","webpack:///./node_modules/lodash-es/_arrayReduce.js","webpack:///./node_modules/lodash-es/_basePropertyOf.js","webpack:///./node_modules/lodash-es/_deburrLetter.js","webpack:///./node_modules/lodash-es/deburr.js","webpack:///./node_modules/lodash-es/_asciiWords.js","webpack:///./node_modules/lodash-es/_hasUnicodeWord.js","webpack:///./node_modules/lodash-es/_unicodeWords.js","webpack:///./node_modules/lodash-es/words.js","webpack:///./node_modules/lodash-es/_createCompounder.js","webpack:///./node_modules/lodash-es/_baseSlice.js","webpack:///./node_modules/lodash-es/_castSlice.js","webpack:///./node_modules/lodash-es/_hasUnicode.js","webpack:///./node_modules/lodash-es/_asciiToArray.js","webpack:///./node_modules/lodash-es/_unicodeToArray.js","webpack:///./node_modules/lodash-es/_stringToArray.js","webpack:///./node_modules/lodash-es/_createCaseFirst.js","webpack:///./node_modules/lodash-es/upperFirst.js","webpack:///./node_modules/lodash-es/startCase.js","webpack:///./node_modules/lodash-es/capitalize.js","webpack:///./node_modules/lodash-es/camelCase.js","webpack:///./node_modules/lodash-es/upperCase.js","webpack:///./node_modules/lodash-es/lowerCase.js","webpack:///./node_modules/lodash-es/lowerFirst.js","webpack:///./node_modules/@antv/x6-common/es/string/format.js","webpack:///./node_modules/@antv/x6-common/es/string/hashcode.js","webpack:///./node_modules/@antv/x6-common/es/string/uuid.js","webpack:///./node_modules/@antv/x6-common/es/string/suggestion.js","webpack:///./node_modules/lodash-es/isNumber.js","webpack:///./node_modules/lodash-es/_baseClamp.js","webpack:///./node_modules/lodash-es/clamp.js","webpack:///./node_modules/@antv/x6-common/es/number/number.js","webpack:///./node_modules/@antv/x6-common/es/platform/index.js","webpack:///./node_modules/@antv/x6-common/es/dom/class.js","webpack:///./node_modules/@antv/x6-common/es/dom/elem.js","webpack:///./node_modules/@antv/x6-common/es/dom/attr.js","webpack:///./node_modules/@antv/x6-common/es/text/annotate.js","webpack:///./node_modules/@antv/x6-common/es/text/sanitize.js","webpack:///./node_modules/@antv/x6-common/es/datauri/index.js","webpack:///./node_modules/@antv/x6-common/es/unit/index.js","webpack:///./node_modules/@antv/x6-common/es/dom/prefix.js","webpack:///./node_modules/@antv/x6-common/es/dom/style.js","webpack:///./node_modules/@antv/x6-common/es/dom/selection.js","webpack:///./node_modules/@antv/x6-common/es/dom/css.js","webpack:///./node_modules/@antv/x6-common/es/dom/data.js","webpack:///./node_modules/@antv/x6-common/es/dom/prop.js","webpack:///./node_modules/@antv/x6-common/es/vector/index.js","webpack:///./node_modules/@antv/x6-common/es/dom/text.js","webpack:///./node_modules/@antv/x6-common/es/dom/path.js","webpack:///./node_modules/@antv/x6-common/es/dom/matrix.js","webpack:///./node_modules/@antv/x6-common/es/dom/transform.js","webpack:///./node_modules/@antv/x6-common/es/dom/event/hook.js","webpack:///./node_modules/@antv/x6-common/es/dom/event/store.js","webpack:///./node_modules/@antv/x6-common/es/dom/event/util.js","webpack:///./node_modules/@antv/x6-common/es/dom/event/special.js","webpack:///./node_modules/@antv/x6-common/es/dom/event/object.js","webpack:///./node_modules/@antv/x6-common/es/dom/event/core.js","webpack:///./node_modules/@antv/x6-common/es/dom/event/main.js","webpack:///./node_modules/@antv/x6-common/es/dom/mousewheel.js","webpack:///./node_modules/@antv/x6-common/es/dom/position.js","webpack:///./node_modules/@antv/x6-common/es/size-sensor/sensors/util.js","webpack:///./node_modules/@antv/x6-common/es/size-sensor/sensors/object.js","webpack:///./node_modules/@antv/x6-common/es/size-sensor/sensors/observer.js","webpack:///./node_modules/@antv/x6-common/es/size-sensor/sensors/index.js","webpack:///./node_modules/@antv/x6-common/es/size-sensor/index.js","webpack:///./node_modules/@antv/x6-common/es/algorithm/dijkstra.js","webpack:///./node_modules/@antv/x6-common/es/modifier/index.js","webpack:///./node_modules/@antv/x6-common/es/animation/timing.js","webpack:///./node_modules/@antv/x6-common/es/animation/interp.js","webpack:///./node_modules/@antv/x6-common/es/algorithm/priorityqueue.js","webpack:///./node_modules/@antv/x6-common/es/color/index.js","webpack:///./node_modules/@antv/x6-common/es/dictionary/dictionary.js","webpack:///./node_modules/@antv/x6-common/es/css-loader/loader.js","webpack:///./node_modules/@antv/x6-geometry/es/angle.js","webpack:///./node_modules/@antv/x6-geometry/es/util.js","webpack:///./node_modules/@antv/x6-geometry/es/geometry.js","webpack:///./node_modules/@antv/x6-geometry/es/point.js","webpack:///./node_modules/@antv/x6-geometry/es/rectangle.js","webpack:///./node_modules/@antv/x6-geometry/es/line.js","webpack:///./node_modules/@antv/x6-geometry/es/ellipse.js","webpack:///./node_modules/@antv/x6-geometry/es/path/util.js","webpack:///./node_modules/@antv/x6-geometry/es/polyline.js","webpack:///./node_modules/@antv/x6-geometry/es/curve.js","webpack:///./node_modules/@antv/x6-geometry/es/path/segment.js","webpack:///./node_modules/@antv/x6-geometry/es/path/lineto.js","webpack:///./node_modules/@antv/x6-geometry/es/path/close.js","webpack:///./node_modules/@antv/x6-geometry/es/path/moveto.js","webpack:///./node_modules/@antv/x6-geometry/es/path/curveto.js","webpack:///./node_modules/@antv/x6-geometry/es/path/normalize.js","webpack:///./node_modules/@antv/x6-geometry/es/path/path.js","webpack:///./node_modules/@antv/x6/es/registry/registry.js","webpack:///./node_modules/@antv/x6/es/registry/grid/dot.js","webpack:///./node_modules/@antv/x6/es/registry/grid/fixed-dot.js","webpack:///./node_modules/@antv/x6/es/registry/grid/mesh.js","webpack:///./node_modules/@antv/x6/es/registry/grid/double-mesh.js","webpack:///./node_modules/@antv/x6/es/registry/grid/index.js","webpack:///./node_modules/@antv/x6/es/registry/background/flip-x.js","webpack:///./node_modules/@antv/x6/es/registry/background/flip-y.js","webpack:///./node_modules/@antv/x6/es/registry/background/flip-xy.js","webpack:///./node_modules/@antv/x6/es/registry/background/watermark.js","webpack:///./node_modules/@antv/x6/es/registry/background/index.js","webpack:///./node_modules/@antv/x6/es/registry/filter/index.js","webpack:///./node_modules/@antv/x6/es/registry/filter/util.js","webpack:///./node_modules/@antv/x6/es/registry/filter/outline.js","webpack:///./node_modules/@antv/x6/es/registry/filter/highlight.js","webpack:///./node_modules/@antv/x6/es/registry/filter/blur.js","webpack:///./node_modules/@antv/x6/es/registry/filter/drop-shadow.js","webpack:///./node_modules/@antv/x6/es/registry/filter/gray-scale.js","webpack:///./node_modules/@antv/x6/es/registry/filter/sepia.js","webpack:///./node_modules/@antv/x6/es/registry/filter/saturate.js","webpack:///./node_modules/@antv/x6/es/registry/filter/hue-rotate.js","webpack:///./node_modules/@antv/x6/es/registry/filter/invert.js","webpack:///./node_modules/@antv/x6/es/registry/filter/brightness.js","webpack:///./node_modules/@antv/x6/es/registry/filter/contrast.js","webpack:///./node_modules/@antv/x6/es/registry/attr/raw.js","webpack:///./node_modules/@antv/x6/es/registry/attr/ref.js","webpack:///./node_modules/@antv/x6/es/registry/attr/fill.js","webpack:///./node_modules/@antv/x6/es/registry/attr/stroke.js","webpack:///./node_modules/@antv/x6/es/registry/attr/text.js","webpack:///./node_modules/@antv/x6/es/registry/attr/title.js","webpack:///./node_modules/@antv/x6/es/registry/attr/align.js","webpack:///./node_modules/@antv/x6/es/registry/attr/style.js","webpack:///./node_modules/@antv/x6/es/registry/attr/html.js","webpack:///./node_modules/@antv/x6/es/registry/attr/filter.js","webpack:///./node_modules/@antv/x6/es/registry/attr/port.js","webpack:///./node_modules/@antv/x6/es/registry/marker/util.js","webpack:///./node_modules/@antv/x6/es/registry/marker/classic.js","webpack:///./node_modules/@antv/x6/es/registry/marker/diamond.js","webpack:///./node_modules/@antv/x6/es/registry/marker/path.js","webpack:///./node_modules/@antv/x6/es/registry/marker/cross.js","webpack:///./node_modules/@antv/x6/es/registry/marker/async.js","webpack:///./node_modules/@antv/x6/es/registry/marker/circle.js","webpack:///./node_modules/@antv/x6/es/registry/marker/ellipse.js","webpack:///./node_modules/@antv/x6/es/registry/marker/index.js","webpack:///./node_modules/@antv/x6/es/registry/attr/marker.js","webpack:///./node_modules/@antv/x6/es/registry/attr/connection.js","webpack:///./node_modules/@antv/x6/es/registry/attr/index.js","webpack:///./node_modules/@antv/x6/es/config/index.js","webpack:///./node_modules/@antv/x6/es/registry/highlighter/class.js","webpack:///./node_modules/@antv/x6/es/registry/highlighter/opacity.js","webpack:///./node_modules/@antv/x6/es/util/index.js","webpack:///./node_modules/@antv/x6/es/registry/highlighter/stroke.js","webpack:///./node_modules/@antv/x6/es/registry/highlighter/index.js","webpack:///./node_modules/@antv/x6/es/registry/port-layout/util.js","webpack:///./node_modules/@antv/x6/es/registry/port-layout/absolute.js","webpack:///./node_modules/@antv/x6/es/registry/port-layout/ellipse.js","webpack:///./node_modules/@antv/x6/es/registry/port-layout/line.js","webpack:///./node_modules/@antv/x6/es/registry/port-layout/index.js","webpack:///./node_modules/@antv/x6/es/registry/port-label-layout/util.js","webpack:///./node_modules/@antv/x6/es/registry/port-label-layout/side.js","webpack:///./node_modules/@antv/x6/es/registry/port-label-layout/inout.js","webpack:///./node_modules/@antv/x6/es/registry/port-label-layout/radial.js","webpack:///./node_modules/@antv/x6/es/registry/port-label-layout/index.js","webpack:///./node_modules/@antv/x6/es/view/view.js","webpack:///./node_modules/@antv/x6/es/view/markup.js","webpack:///./node_modules/@antv/x6/es/view/cache.js","webpack:///./node_modules/@antv/x6/es/view/attr.js","webpack:///./node_modules/@antv/x6/es/view/flag.js","webpack:///./node_modules/@antv/x6/es/view/cell.js","webpack:///./node_modules/@antv/x6/es/view/tool.js","webpack:///./node_modules/@antv/x6/es/registry/connection-strategy/noop.js","webpack:///./node_modules/@antv/x6/es/registry/connection-strategy/pin.js","webpack:///./node_modules/@antv/x6/es/registry/connection-strategy/index.js","webpack:///./node_modules/@antv/x6/es/registry/tool/util.js","webpack:///./node_modules/@antv/x6/es/registry/tool/button.js","webpack:///./node_modules/@antv/x6/es/registry/tool/boundary.js","webpack:///./node_modules/@antv/x6/es/registry/tool/vertices.js","webpack:///./node_modules/@antv/x6/es/registry/tool/segments.js","webpack:///./node_modules/@antv/x6/es/registry/tool/anchor.js","webpack:///./node_modules/@antv/x6/es/registry/tool/arrowhead.js","webpack:///./node_modules/@antv/x6/es/registry/tool/editor.js","webpack:///./node_modules/@antv/x6/es/registry/tool/index.js","webpack:///./node_modules/@antv/x6/es/registry/node-anchor/bbox.js","webpack:///./node_modules/@antv/x6/es/registry/node-anchor/util.js","webpack:///./node_modules/@antv/x6/es/registry/node-anchor/orth.js","webpack:///./node_modules/@antv/x6/es/registry/node-anchor/node-center.js","webpack:///./node_modules/@antv/x6/es/registry/node-anchor/middle-side.js","webpack:///./node_modules/@antv/x6/es/registry/node-anchor/index.js","webpack:///./node_modules/@antv/x6/es/registry/edge-anchor/ratio.js","webpack:///./node_modules/@antv/x6/es/registry/edge-anchor/length.js","webpack:///./node_modules/@antv/x6/es/registry/edge-anchor/closest.js","webpack:///./node_modules/@antv/x6/es/registry/edge-anchor/orth.js","webpack:///./node_modules/@antv/x6/es/registry/edge-anchor/index.js","webpack:///./node_modules/@antv/x6/es/registry/connection-point/util.js","webpack:///./node_modules/@antv/x6/es/registry/connection-point/bbox.js","webpack:///./node_modules/@antv/x6/es/registry/connection-point/rect.js","webpack:///./node_modules/@antv/x6/es/registry/connection-point/boundary.js","webpack:///./node_modules/@antv/x6/es/registry/connection-point/anchor.js","webpack:///./node_modules/@antv/x6/es/registry/connection-point/index.js","webpack:///./node_modules/@antv/x6/es/registry/router/normal.js","webpack:///./node_modules/@antv/x6/es/registry/router/oneside.js","webpack:///./node_modules/@antv/x6/es/registry/router/util.js","webpack:///./node_modules/@antv/x6/es/registry/router/orth.js","webpack:///./node_modules/@antv/x6/es/registry/router/manhattan/options.js","webpack:///./node_modules/@antv/x6/es/registry/router/manhattan/sorted-set.js","webpack:///./node_modules/@antv/x6/es/registry/router/manhattan/obstacle-map.js","webpack:///./node_modules/@antv/x6/es/registry/router/manhattan/util.js","webpack:///./node_modules/@antv/x6/es/registry/router/manhattan/router.js","webpack:///./node_modules/@antv/x6/es/registry/router/manhattan/index.js","webpack:///./node_modules/@antv/x6/es/registry/router/metro.js","webpack:///./node_modules/@antv/x6/es/registry/router/er.js","webpack:///./node_modules/@antv/x6/es/registry/router/loop.js","webpack:///./node_modules/@antv/x6/es/registry/router/index.js","webpack:///./node_modules/@antv/x6/es/registry/connector/normal.js","webpack:///./node_modules/@antv/x6/es/registry/connector/loop.js","webpack:///./node_modules/@antv/x6/es/registry/connector/rounded.js","webpack:///./node_modules/@antv/x6/es/registry/connector/smooth.js","webpack:///./node_modules/@antv/x6/es/registry/connector/jumpover.js","webpack:///./node_modules/@antv/x6/es/registry/connector/index.js","webpack:///./node_modules/@antv/x6/es/model/store.js","webpack:///./node_modules/@antv/x6/es/model/animation.js","webpack:///./node_modules/@antv/x6/es/model/cell.js","webpack:///./node_modules/@antv/x6/es/model/registry.js","webpack:///./node_modules/@antv/x6/es/model/port.js","webpack:///./node_modules/@antv/x6/es/model/node.js","webpack:///./node_modules/@antv/x6/es/model/edge.js","webpack:///./node_modules/@antv/x6/es/model/collection.js","webpack:///./node_modules/@antv/x6/es/model/model.js","webpack:///./node_modules/@antv/x6/es/shape/base.js","webpack:///./node_modules/@antv/x6/es/shape/util.js","webpack:///./node_modules/@antv/x6/es/shape/rect.js","webpack:///./node_modules/@antv/x6/es/shape/edge.js","webpack:///./node_modules/@antv/x6/es/shape/ellipse.js","webpack:///./node_modules/@antv/x6/es/shape/poly.js","webpack:///./node_modules/@antv/x6/es/shape/polygon.js","webpack:///./node_modules/@antv/x6/es/shape/polyline.js","webpack:///./node_modules/@antv/x6/es/shape/path.js","webpack:///./node_modules/@antv/x6/es/shape/text-block.js","webpack:///./node_modules/@antv/x6/es/shape/image.js","webpack:///./node_modules/@antv/x6/es/shape/circle.js","webpack:///./node_modules/@antv/x6/es/view/node.js","webpack:///./node_modules/@antv/x6/es/view/edge.js","webpack:///./node_modules/@antv/x6/es/graph/view.js","webpack:///./node_modules/@antv/x6/es/style/raw.js","webpack:///./node_modules/@antv/x6/es/graph/base.js","webpack:///./node_modules/@antv/x6/es/graph/css.js","webpack:///./node_modules/@antv/x6/es/graph/options.js","webpack:///./node_modules/@antv/x6/es/graph/grid.js","webpack:///./node_modules/@antv/x6/es/graph/transform.js","webpack:///./node_modules/@antv/x6/es/graph/background.js","webpack:///./node_modules/@antv/x6/es/graph/panning.js","webpack:///./node_modules/@antv/x6/es/graph/mousewheel.js","webpack:///./node_modules/@antv/x6/es/graph/virtual-render.js","webpack:///./node_modules/@antv/x6/es/renderer/queueJob.js","webpack:///./node_modules/@antv/x6/es/renderer/scheduler.js","webpack:///./node_modules/@antv/x6/es/renderer/renderer.js","webpack:///./node_modules/@antv/x6/es/graph/defs.js","webpack:///./node_modules/@antv/x6/es/graph/coord.js","webpack:///./node_modules/@antv/x6/es/graph/highlight.js","webpack:///./node_modules/@antv/x6/es/graph/size.js","webpack:///./node_modules/@antv/x6/es/graph/graph.js","webpack:///./node_modules/@antv/x6/es/shape/html.js","webpack:///./node_modules/@antv/x6-plugin-dnd/es/style/raw.js","webpack:///./node_modules/@antv/x6-plugin-dnd/es/index.js","webpack:///./node_modules/@antv/x6-plugin-stencil/es/grid.js","webpack:///./node_modules/@antv/x6-plugin-stencil/es/style/raw.js","webpack:///./node_modules/@antv/x6-plugin-stencil/es/index.js","webpack:///./src/views/flow/hook/UseAntVFlow.ts","webpack:///./node_modules/@antv/x6-plugin-export/es/api.js","webpack:///./node_modules/@antv/x6-plugin-export/es/index.js","webpack:///./src/views/flow/AntVX6.vue?d392","webpack:///./src/views/flow/AntVX6.vue?a441","webpack:///./node_modules/core-js/modules/es.array.map.js","webpack:///./node_modules/lodash-es/_cloneBuffer.js","webpack:///./src/views/flow/AntVX6.vue?7ce9"],"names":["window","NodeList","prototype","forEach","Array","arr","item","Object","hasOwnProperty","call","defineProperty","configurable","enumerable","writable","args","docFrag","document","createDocumentFragment","arg","isNode","Node","appendChild","createTextNode","String","this","Element","Document","DocumentFragment","id","type","exportSVG","exportPng","getShape","Disposable","_disposed","dispose","target","methodName","descriptor","raw","value","proto","__proto__","disposed","DisposableSet","isDisposed","items","Set","clear","has","add","delete","from","set","now","Date","reWhitespace","trimmedEndIndex","string","index","length","test","charAt","reTrimStart","baseTrim","slice","replace","symbolTag","isSymbol","isObjectLike","NAN","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","parseInt","toNumber","isObject","other","valueOf","isBinary","FUNC_ERROR_TEXT","nativeMax","Math","max","nativeMin","min","debounce","func","wait","options","lastArgs","lastThis","maxWait","result","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","TypeError","invokeFunc","time","thisArg","undefined","apply","leadingEdge","setTimeout","timerExpired","remainingWait","timeSinceLastCall","timeSinceLastInvoke","timeWaiting","shouldInvoke","trailingEdge","cancel","clearTimeout","flush","debounced","isInvoking","arguments","throttle","fn","ctx","isAsyncLike","obj","then","isAsync","Promise","toAsyncBoolean","inputs","results","isArray","push","hasAsync","some","res","deferres","map","resolve","all","reduce","memo","every","toDeferredBoolean","ret","list","i","handler","context","params","listeners","name","cache","cb","off","on","names","keys","n","splice","returned","trigger","objectProto","baseHas","object","key","reIsDeepProp","reIsPlainProp","isKey","memoize","resolver","memoized","get","Cache","MAX_MEMOIZE_SIZE","memoizeCapped","size","rePropName","reEscapeChar","stringToPath","charCodeAt","match","number","quote","subString","arrayMap","array","iteratee","INFINITY","symbolProto","symbolToString","toString","baseToString","castPath","toKey","hasPath","path","hasFunc","isLength","isArguments","baseGet","e","baseAssignValue","assignValue","objValue","eq","baseSet","customizer","lastIndex","nested","newValue","basePickBy","paths","predicate","baseHasIn","hasIn","basePick","spreadableSymbol","isConcatSpreadable","isFlattenable","baseFlatten","depth","isStrict","flatten","overRest","start","transform","otherArgs","constant","baseSetToString","identity","HOT_COUNT","HOT_SPAN","nativeNow","shortOut","count","lastCalled","stamp","remaining","setToString","flatRest","pick","assignMergeValue","cloneArrayBuffer","arrayBuffer","constructor","byteLength","cloneTypedArray","typedArray","isDeep","buffer","byteOffset","copyArray","source","objectCreate","create","baseCreate","getPrototype","getPrototypeOf","initCloneObject","isArrayLikeObject","isArrayLike","objectTag","funcProto","Function","funcToString","objectCtorString","isPlainObject","Ctor","safeGet","copyObject","props","isNew","nativeKeysIn","baseKeysIn","isProto","keysIn","toPlainObject","baseMergeDeep","srcIndex","mergeFunc","stack","srcValue","stacked","isCommon","isArr","isBuff","isBuffer","isTyped","isTypedArray","isFunction","baseMerge","baseRest","isIterateeCall","createAssigner","assigner","sources","guard","mapTag","setTag","isEmpty","tag","baseAssign","baseAssignIn","copySymbols","nativeGetSymbols","getOwnPropertySymbols","getSymbolsIn","stubArray","copySymbolsIn","getAllKeysIn","initCloneArray","input","cloneDataView","dataView","reFlags","cloneRegExp","regexp","exec","symbolValueOf","cloneSymbol","symbol","boolTag","dateTag","numberTag","regexpTag","stringTag","arrayBufferTag","dataViewTag","float32Tag","float64Tag","int8Tag","int16Tag","int32Tag","uint8Tag","uint8ClampedTag","uint16Tag","uint32Tag","initCloneByTag","baseIsMap","nodeIsMap","isMap","baseIsSet","nodeIsSet","isSet","CLONE_DEEP_FLAG","CLONE_FLAT_FLAG","CLONE_SYMBOLS_FLAG","argsTag","arrayTag","errorTag","funcTag","genTag","weakMapTag","cloneableTags","baseClone","bitmask","isFlat","isFull","isFunc","subValue","keysFunc","cloneDeep","propsIndex","propsLength","customDefaultsMerge","mergeWith","defaultsDeep","applyMixins","derivedCtor","baseCtors","baseCtor","getOwnPropertyNames","getOwnPropertyDescriptor","extendStatics","setPrototypeOf","d","b","p","cls","base","tmp","A","isNativeClass","createClass","className","ensure","defaultValue","getValue","getNumber","Number","isNaN","isFinite","getBoolean","isMaliciousProp","prop","getByPath","delimiter","split","shift","setByPath","lastKey","pop","diver","unsetByPath","propertyToRemove","parent","delim","stop","val","deep","flatObject","flatKey","Basecoat","baseFindIndex","fromIndex","fromRight","baseIsNaN","strictIndexOf","baseIndexOf","arrayIncludes","arrayIncludesWith","comparator","noop","createSet","values","LARGE_ARRAY_SIZE","baseUniq","includes","seen","outer","computed","seenIndex","uniq","union","arrays","MAX_ARRAY_LENGTH","MAX_ARRAY_INDEX","nativeFloor","floor","baseSortedIndexBy","retHighest","low","high","valIsNaN","valIsNull","valIsSymbol","valIsUndefined","mid","othIsDefined","othIsNull","othIsReflexive","othIsSymbol","setLow","HALF_MAX_ARRAY_LENGTH","baseSortedIndex","sortedIndex","COMPARE_PARTIAL_FLAG","COMPARE_UNORDERED_FLAG","baseIsMatch","matchData","noCustomizer","data","isStrictComparable","getMatchData","matchesStrictComparable","baseMatches","baseMatchesProperty","baseProperty","basePropertyDeep","baseIteratee","sortedIndexBy","baseMap","collection","baseSortBy","comparer","sort","compareAscending","valIsDefined","valIsReflexive","compareMultiple","orders","objCriteria","criteria","othCriteria","ordersLength","order","baseOrderBy","iteratees","sortBy","arrayAggregator","setter","accumulator","baseAggregator","createAggregator","initializer","groupBy","baseDifference","valuesLength","valuesIndex","difference","baseExtremum","current","baseGt","idCounter","uniqueId","prefix","arrayReduce","initAccum","basePropertyOf","deburredLetters","deburrLetter","reLatin","rsComboMarksRange","reComboHalfMarksRange","rsComboSymbolsRange","rsComboRange","rsCombo","reComboMark","RegExp","deburr","reAsciiWord","asciiWords","reHasUnicodeWord","hasUnicodeWord","rsAstralRange","rsDingbatRange","rsLowerRange","rsMathOpRange","rsNonCharRange","rsPunctuationRange","rsSpaceRange","rsUpperRange","rsVarRange","rsBreakRange","rsApos","rsBreak","rsDigits","rsDingbat","rsLower","rsMisc","rsFitz","rsModifier","rsNonAstral","rsRegional","rsSurrPair","rsUpper","rsZWJ","rsMiscLower","rsMiscUpper","rsOptContrLower","rsOptContrUpper","reOptMod","rsOptVar","rsOptJoin","join","rsOrdLower","rsOrdUpper","rsSeq","rsEmoji","reUnicodeWord","unicodeWords","words","pattern","reApos","createCompounder","callback","baseSlice","end","castSlice","reHasUnicode","hasUnicode","asciiToArray","rsAstral","rsSymbol","reUnicode","unicodeToArray","stringToArray","createCaseFirst","strSymbols","chr","upperFirst","startCase","word","capitalize","toLowerCase","camelCase","upperCase","toUpperCase","lowerCase","lowerFirst","cacheStringFunction","str","hit","kebabCase","s","pascalCase","constantCase","dotCase","pathCase","sentenceCase","titleCase","hashcode","hash","isUnicoded","ii","characterCode","unescape","encodeURIComponent","uuid","template","len","r","random","v","getSpellingSuggestion","candidates","getName","maximumLengthDifference","bestCandidate","bestDistance","justCheckExactMatches","nameLowerCase","candidate","candidateName","abs","candidateNameLowerCase","distance","levenshteinWithMax","s1","s2","previous","big","c1","minJ","maxJ","colMin","j","dist","temp","isNumber","baseClamp","lower","upper","clamp","mod","m","normalizePercentage","num","ref","parseFloat","parseCssNumeric","units","getUnit","matches","unit","normalizeSides","box","left","top","right","bottom","vertical","horizontal","_IS_MAC","_IS_IOS","_IS_WINDOWS","_IS_IE","_IS_IE11","_IS_EDGE","_IS_NETSCAPE","_IS_CHROME_APP","_IS_CHROME","_IS_OPERA","_IS_FIREFOX","_IS_SAFARI","_SUPPORT_TOUCH","_SUPPORT_POINTER","_SUPPORT_PASSIVE","_NO_FOREIGNOBJECT","navigator","ua","userAgent","indexOf","createElementNS","chrome","app","runtime","PointerEvent","documentElement","div","createElement","addEventListener","err","Platform","IS_MAC","IS_IOS","IS_WINDOWS","IS_IE","IS_IE11","IS_EDGE","IS_NETSCAPE","IS_CHROME_APP","IS_CHROME","IS_OPERA","IS_FIREFOX","IS_SAFARI","SUPPORT_TOUCH","SUPPORT_POINTER","SUPPORT_PASSIVE","NO_FOREIGNOBJECT","SUPPORT_FOREIGNOBJECT","getHMRStatus","module","hot","status","isApplyingHMR","TAGNAMES","select","change","submit","reset","error","load","abort","isEventSupported","event","elem","eventName","isSupported","setAttribute","rclass","rnotwhite","fillSpaces","getClass","getAttribute","hasClass","selector","classNames","nodeType","addClass","classes","oldValue","trim","removeClass","toggleClass","stateVal","metches","ensureId","isSVGGraphicsElement","getScreenCTM","SVGElement","svg","xmlns","xml","xlink","xhtml","svgVersion","tagName","doc","namespaceURI","createSvgElement","createSvgDocument","content","parseXML","async","setAttributeNS","parser","DOMParser","instance","parseFromString","mimeType","getElementsByTagName","Error","node","lowercase","nodeName","previousSibling","querySelectorAll","findOne","querySelector","findParentByClass","terminator","ownerSVGElement","parentNode","contains","child","bup","compareDocumentPosition","elems","removeChild","empty","firstChild","append","prepend","before","insertBefore","after","nextSibling","appendTo","isElement","x","isHTMLElement","HTMLElement","style","ownerDocument","matched","CASE_SENSITIVE_ATTR","removeAttribute","qualified","qualifyAttr","ns","hasAttributeNS","local","removeAttributeNS","hasAttribute","setAttributes","attrs","attributes","combinedKey","kebablizeAttrs","styleToObject","styleString","styles","section","pair","mergeAttrs","attr","to","so","tt","ss","annotate","t","annotations","opt","offset","compacted","curr","prev","batch","jj","annotation","includeAnnotationIndices","JSON","stringify","findAnnotationsAtIndex","filter","a","findAnnotationsBetweenIndexes","shiftAnnotations","text","DataUri","millimeterSize","isDataUrl","url","substr","imageToDataUri","onError","onLoad","FileReader","xhr","reader","onload","evt","dataUri","onerror","readAsDataURL","response","u8a","CHUNK_SZ","c","fromCharCode","subarray","suffix","meta","bytes","Uint8Array","base64","btoa","XMLHttpRequest","responseType","open","send","dataUriToBlob","dataUrl","uri","decodeURIComponent","dataType","mime","decodedString","atob","ia","Blob","downloadBlob","blob","fileName","msSaveBlob","URL","createObjectURL","link","href","download","body","click","revokeObjectURL","downloadDataUri","parseViewBox","svgToDataUrl","viewBox","getNumberFromViewBox","getNumberFromMatches","reg","w","width","h","height","decoded","header","supportedUnits","Unit","measure","cssWidth","cssHeight","display","position","rect","getBoundingClientRect","toPx","convert","hyphenPattern","camelize","_","char","prefixes","testStyle","getWithPrefix","prefixedName","getVendorPrefixedName","property","capitalizedName","setPrefixedStyle","vendor","defaultView","opener","getComputedStyle","getPropertyValue","hasScrollbars","container","overflow","clearSelection","selection","getSelection","removeAllRanges","numericProps","animationIterationCount","columnCount","flexGrow","flexShrink","fontWeight","gridArea","gridColumn","gridColumnEnd","gridColumnStart","gridRow","gridRowEnd","gridRowStart","lineHeight","opacity","orphans","widows","zIndex","isCSSVariable","computeStyle","isVariable","computeStyleInt","getSuffixedValue","css","setProperty","dataset","WeakMap","getData","setData","datas","propMap","class","contenteditable","for","readonly","maxlength","tabindex","colspan","rowspan","usemap","Symbol","toStringTag","children","isVector","importNode","matrix","tx","ty","angle","cx","cy","sx","sy","toNode","SVGSVGElement","defsNode","cloneNode","toNodes","replaceChild","lastChild","childNodes","vels","nodes","found","matcher","matchesSelector","msMatchesSelector","mozMatchesSelector","webkitMatchesSelector","oMatchesSelector","vel","currentChild","l","eachChild","y","interval","SVGPathElement","Vector","vector","sample","toPath","createVectors","markup","svgDoc","childNode","canvasContext","getContext","createTextPathNode","textPath","defs","annotateTextLine","lineNode","lineAnnotations","eol","baseSize","tspanNode","maxFontSize","fontMetrics","lastJ","fontSize","annotationAttrs","vTSpan","textContent","annotationClass","emRegex","emToPx","em","numerical","calculateDY","alignment","linesMetrics","baseSizePx","lineMetrics","flMaxFont","rLineHeights","lineHeightPx","iLineHeight","llMaxFont","dy","sanitize","verticalAnchor","textVerticalAnchor","namedVerticalAnchor","iai","defaultLineHeight","autoLineHeight","needEmpty","displayEmpty","strFontSize","containerNode","annotatedY","lines","lastI","lineClassName","line","lineNodeStyle","fillOpacity","strokeOpacity","baseVal","rh","firstLine","measureText","font","splitTextByLength","splitWidth","totalWidth","caches","round","frontText","frontWidth","behindText","behindWidth","breakText","textWidth","ceil","maxLines","remainText","remainWidth","ellipsis","ellipsisWidth","isLast","front","behind","KAPPA","getNumbericAttribute","NaN","getTotalLength","samples","getPointAtLength","lineToPathData","polygonToPathData","polygon","points","getPointsFromSvgElement","svgPointsToPath","polylineToPathData","polyline","nodePoints","numberOfItems","getItem","circleToPathData","circle","cd","ellipseToPathData","ellipse","rx","ry","cdx","cdy","rectangleToPathData","rectToPathData","topRx","bottomRx","topRy","bottomRy","toPathData","createSlicePathData","innerRadius","outerRadius","startAngle","endAngle","svgArcMax","PI","r0","r1","a0","a1","da","df","c0","cos","s0","sin","transformRegex","transformSeparatorRegex","transformationListRegex","createSVGPoint","createSVGMatrix","mat","createSVGTransform","DOMMatrix","createSVGTransformFromMatrix","transformStringToMatrix","transformationString","transformationMatch","ctm","scaleNonUniform","translate","rotate","skewX","skewY","f","multiply","matrixToTransformString","parseTransformString","translation","rotation","scale","separator","decomposedMatrix","decomposeMatrix","translateX","translateY","scaleX","scaleY","transformations","translateMatch","rotateMatch","scaleMatch","deltaTransformPoint","point","dx","px","py","atan2","sqrt","matrixToScale","matrixToRotation","deg","matrixToTranslation","absolute","transformList","svgTransform","appendItem","transformAttr","newTx","newTy","newTranslate","newAngle","newOrigin","newRotate","newScale","getTransformToElement","targetCTM","nodeCTM","inverse","getTransformToParentElement","matrixList","nodeMatrix","reverse","toLocalPoint","globalPoint","matrixTransform","globalToLocalMatrix","EventHook","register","hook","unregister","Store","events","remove","Util","stopPropagationCallback","stopPropagation","removeEventListener","returnTrue","returnFalse","rNotHTMLWhite","rNamespace","splitType","types","normalizeType","parts","originType","namespaces","isValidTarget","isValidSelector","seed","ensureHandlerId","getHandlerId","removeHandlerId","setHandlerId","getHandlerQueue","queue","store","bag","handlers","delegateCount","button","disabled","matchedHandlers","matchedSelectors","handleObj","isWindow","adown","isDefaultPrevented","isPropagationStopped","isImmediatePropagationStopped","isSimulated","preventDefault","originalEvent","stopImmediatePropagation","defaultPrevented","currentTarget","relatedTarget","timeStamp","assign","EventObject","addProperty","commonProps","bubbles","cancelable","eventPhase","detail","view","buttons","clientX","clientY","offsetX","offsetY","pageX","pageY","screenX","screenY","toElement","pointerId","pointerType","code","charCode","keyCode","touches","changedTouches","targetTouches","which","altKey","ctrlKey","metaKey","shiftKey","Special","noBubble","returnValue","delegateType","bindType","related","__rest","propertyIsEnumerable","Core","triggered","handlerData","others","mainHandler","dispatch","guid","namespace","setup","mappedTypes","rns","originHandlerCount","teardown","delegateTarget","preDispatch","handlerQueue","k","rnamespace","hookHandle","handle","postDispatch","eventArgs","onlyHandlers","eventObj","ontype","bubbleType","eventPath","last","win","parentWindow","lastElement","currElement","Event","once","Private","originHandler","onWheelCallback","onWheelGuard","animationFrameId","deltaX","deltaY","onWheel","bind","didWheel","passive","changed","requestAnimationFrame","pageYOffset","pageXOffset","isFixed","offsetValue","offsetParent","parentOffset","delay","timer","createSensor","element","sensor","contentDocument","pointerEvents","listener","destroy","unbind","idx","ResizeObserver","observe","disconnect","ModifierKey","Timing","Interp","SizeSensor","PriorityQueue","defaultComparator","heapify","priority","bubbleUp","oldPriority","comp","bubbleDown","peek","minIndex","Dijkstra","run","adjacencyList","weight","u","scanned","Infinity","insert","neighbours","alt","updatePriority","color","g","fromString","amount","rgba","lighten","toArray","arg0","arg1","arg2","arg3","hex","rgba2hsla","ignoreAlpha","rgb","makeGrey","toCSS","Color","fromArray","fromHex","hex2rgb","fromRGBA","hue2rgb","m1","m2","h6","fromHSLA","hsla2rgba","startsWith","preset","named","toFixed","randomHex","letters","randomRGBA","invert","bw","pound","rgb2hex","bits","mask","bgr","pad","amt","lum","darken","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","burntsienna","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","Dictionary","iterator","parse","modifiers","or","and","equals","modifiers1","modifiers2","or1","or2","and1","and2","equal","a2","isMatch","strict","linear","quad","cubic","inout","t2","t3","exponential","pow","bounce","q","decorators","easeInSine","easeOutSine","easeInOutSine","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","t1","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInExpo","easeOutExpo","easeInOutExpo","scaledTime","scaledTime1","easeInCirc","easeOutCirc","easeInOutCirc","easeInBack","magnitude","easeOutBack","easeInOutBack","scaledTime2","easeInElastic","asin","easeOutElastic","easeInOutElastic","easeOutBounce","easeInBounce","easeInOutBounce","ma","mb","pb","aa","bb","precision","ca","ra","rd","ga","gd","ba","bd","cssModules","cssModule","find","loadTimes","styleElement","head","clean","findIndex","Angle","GeometryUtil","toDeg","rad","normalize","toRad","over360","isInteger","mmin","mmax","snapToGrid","gridSize","containsPoint","squaredLength","p1","p2","Geometry","toJSON","super","degree","center","origin","squaredDistance","theta","zero","angleBetween","update","toPolar","clone","lat1","lat2","lon1","lon2","dLon","brng","bearings","move","gx","gy","Point","isPoint","isPointLike","isPointData","fromPolar","org","o","equalPoints","x1","x2","y1","y2","rotateEx","topLeft","topRight","bottomRight","bottomLeft","topCenter","bottomCenter","corner","rightMiddle","leftMiddle","topLine","rightLine","bottomLine","leftLine","st","ct","minX","minY","maxX","maxY","pos","getCenter","getOrigin","getTopRight","p3","getBottomRight","p4","getBottomLeft","limit","ox","oy","sx1","sx2","sx3","sx4","sy1","sy2","sy3","sy4","getMaxScaleToFit","w1","h1","w2","h2","rectLines","dedupeArr","intersectsWithLine","sides","connector","intersection","isIntersectWithRect","myOrigin","myCorner","rOrigin","rCorner","xx","yy","newx","newy","newwidth","newheight","originX","originY","cornerX","cornerY","distLeft","distRight","distTop","distBottom","closest","side","getNearestSideToPoint","adhereToRect","Rectangle","isRectangle","isRectangleLike","fromEllipse","fromSize","fromPositionAndSize","total","isDifferentiable","eRef","sRef","bearing","pointAt","closestPointNormalizedLength","tangentAt","product","dot","normalized","ratio","lerp","fromStart","rate","dividerPoint","pointAtLength","cross","shape","pt1Dir","pt2Dir","det","deltaPt","alpha","beta","determinant","closestPoint","tangentStart","tangentLine","dx1","dy1","dx2","dy2","ccw","serialize","Line","isLine","normalizedDistance","intersections","dir","diff","mDir","mDiff","root","ta","tb","bbox","getNearestPointToPoint","mSquared","aSquared","bSquared","x0","y0","refPointDelta","q1","q3","fromRect","Ellipse","isEllipse","regexSupportedData","draw","initialMove","close","exclude","rounded","arcSize","p0","wp","pt","nx1","ny1","next","nx2","ny2","drawPoints","pts","arcToCurves","r2","largeArcFlag","sweepFlag","cty","cpsi","spsi","rxd","ryd","rxdd","rydd","r1x","r2y","lamda","sds","seif","txd","tyd","dr","sse","seg","segr","cpsir1","cpsir2","spsir1","spsir2","mc","ms","x3","y3","drawArc","startX","startY","xAxisRotation","stopX","stopY","cpLength","closestPointLength","minSqrDistance","lineLength","cpNormalizedLength","cp","sqrDistance","tangentAtLength","startIndex","intersectionCount","endIndex","segment","xDifference","rayEnd","ray","int","lastPoint","lastValidLine","threshold","currentIndex","firstIndex","middleIndex","firstPoint","middlePoint","chord","closestPointDistance","startPoint","sortedRecords","record1","record2","unshift","insidePoints","hullRecords","getKey","record","currentRecord","currentPoint","correctTurnFound","lastHullRecord","lastHullPoint","secondLastHullRecord","secondLastHullPoint","crossProduct","THRESHOLD","lowestHullIndex","indexOfLowestHullIndexRecord","currentHullIndex","hullPointRecordsReordered","newFirstChunk","newSecondChunk","concat","hullPoints","Polyline","isPolyline","svgString","coords","controlPoint1","controlPoint2","PRECISION","tvalues","bounds","b2ac","sqrtb2ac","mt","jlen","X","Y","pointAtT","closestPointT","opts","getOptions","lengthAtT","getPrecision","subdivisions","getDivisions","precisionRatio","investigatedSubdivision","investigatedSubdivisionStartT","investigatedSubdivisionEndT","distFromStart","distFromEnd","chordLength","minSumDist","piece","division","startDist","endDist","sumDist","endpointDistance","startPrecisionRatio","endPrecisionRatio","hasRequiredPrecision","hasMiniStartDistance","hasMiniEndDistance","hasMiniDistance","divided","divide","startDist1","endDist1","sumDist1","startDist2","endDist2","sumDist2","tangentAtT","toPolyline","divideAtT","tAt","tAtLength","dividerPoints","getSkeletonPoints","startControl1","startControlPoint1","startControl2","startControlPoint2","divider","dividerControl1","dividerControlPoint1","dividerControl2","dividerControlPoint2","control1","control2","midpoint1","midpoint2","midpoint3","subControl1","subControl2","divideLine","previousLength","iteration","divisions","subCurve","skeletonPoints","getSubdivisions","baselinePointDistFromStart","baselinePointDistFromEnd","newBaselinePointDistFromStart","newBaselinePointDistFromEnd","baseline1Length","baseline2Length","toPoints","Curve","isCurve","getFirstControlPoints","rhs","getCurveControlPoints","knots","firstControlPoints","secondControlPoints","throughPoints","controlPoints","curves","isVisible","isSegment","isSubpathStart","endPoint","previousSegment","divideAt","closestPointTangent","divideAtLength","LineTo","segments","subpathStartSegment","Close","MoveTo","arg4","arg5","curve","c2","q2c","ax","ay","v13","v23","a2c","recursive","v120","xy","f1","f2","rx2","ry2","f2old","x2old","y2old","hx","hy","m3","m4","newres","pathData","spaces","segmentReg","commandParamReg","paramsCount","z","segmetns","cmd","command","pathString","pathArray","mx","my","bx","by","qx","qy","processPath","pcom","nx","ny","T","Q","fixArc","pp","pi","commands","prevCommand","seglen","normalizePathData","CurveTo","previousObj","appendSegment","createSegment","endX","endY","curveTo","sub","segmentBBox","lastSegment","currentSegment","nextSegment","prepareSegment","fixIndex","removedSegment","updateSubpathStartSegment","replacedSegment","updateSubpathStart","segmentIndexAt","getSegment","segmentIndexAtLength","segmentSubdivisions","lastVisibleIndex","minSquaredDistance","segmentClosestPointT","segmentClosestPoint","segmentIndex","polylines","toPolylines","numIntersections","pathLength","lastVisibleSegment","numSegments","tValue","dividedSegmentIndex","lastValidSegment","lastValidSegmentIndex","pathCopy","replaceSegment","divisionStartIndex","divisionMidIndex","divisionEndIndex","removeSegment","movetoEnd","insertSegment","secondPathSegmentIndexConversion","originalSegment","convertedSegment","firstPath","secondPath","intersect","isValid","getSegmentSubdivisions","partialPoints","otherSegments","Path","isPath","commandRe","argRe","force","entries","exist","onDuplicated","process","entity","onConflict","suggestion","getSpellingSuggestionForName","prefixed","Registry","thickness","fill","fixedDot","mesh","stroke","doubleMesh","factor","patterns","Grid","presets","registry","flipX","img","canvas","drawImage","flipY","flipXY","setTransform","watermark","radians","stepX","stepY","getString","outline","margin","highlight","blur","stdDeviation","dropShadow","grayScale","sepia","saturate","hueRotate","amount2","brightness","contrast","Background","Filter","xlinkHref","xlinkShow","xlinkRole","xlinkType","xlinkArcrole","xlinkTitle","xlinkActuate","xmlSpace","xmlBase","xmlLang","preserveAspectRatio","requiredExtension","requiredFeatures","systemLanguage","externalResourcesRequired","positionWrapper","refDx","refDy","refWidth","setWrapper","refHeight","refRx","refRy","refRInscribed","attrName","widthFn","heightFn","refBBox","refRCircumscribed","percentage","isPercentage","diagonalLength","rValue","refCx","refCy","refDResetOffset","dWrapper","resetOffset","refDKeepOffset","refPointsResetOffset","pointsWrapper","refPointsKeepOffset","refR","refD","refPoints","refX2","refY2","refWidth2","refHeight2","axis","dimension","delta","refOrigin","attrValue","shapeWrapper","shapeConstructor","cacheName","cachedShape","shapeBBox","shapeOrigin","fitScale","pathConstructor","qualify","graph","defineGradient","cell","isEdge","edgeView","sourcePoint","targetPoint","gradientUnits","textWrap","json","textHash","pathNode","info","wrappedText","txt","fontFamily","isTextInUse","title","titleElem","titleNode","xAlign","offsetWrapper","yAlign","html","innerHTML","defineFilter","port","offset1","offset2","block","_a","createClassicMarker","classic","full","localAttrs","moveTo","lineTo","diamond","flip","opened","fliped","radius","circlePlus","radiusX","radiusy","Marker","sourceMarker","marker","createMarker","targetMarker","vertexMarker","manual","def","onNotFound","normalizeAttr","defineMarker","strokeWidth","refX","isEdgeView","connection","_b","_c","_d","stubs","getConnectionLength","getConnection","sourceParts","targetParts","getConnectionPathData","atConnectionLengthKeepGradient","atConnectionWrapper","atConnectionLengthIgnoreGradient","atConnectionRatioKeepGradient","atConnectionRatioIgnoreGradient","atConnectionLength","atConnectionRatio","method","zeroVector","tangent","vectorAngle","Attr","isValidDefinition","Config","prefixCls","autoInsertCSS","useCSSSelector","defaultClassName","cellView","magnet","magnetEl","svgDocument","transformPoint","transformLine","transformPolyline","transformRectangle","corner1","corner2","corner3","corner4","withoutTransformations","getBBox","clientLeft","clientTop","clientWidth","clientHeight","outputBBox","getBoundingOffsetRect","childBBox","offsetLeft","offsetTop","offsetWidth","offsetHeight","toGeometryShape","translateAndAutoOrient","reference","translateToOrigin","setTranslate","rotateAroundOrigin","setRotate","translateFromOrigin","finalPosition","setMatrix","findShapeNode","nextElementSibling","firstElementChild","getBBoxV2","normalizeMarker","defaultOptions","padding","getHighlighterId","hasCache","magnetVel","magnetBBox","isEdgeElement","highlightMatrix","paddingMatrix","removeHandler","removeHighlighter","model","setCache","normalizePoint","toResult","rawArgs","Highlighter","check","highlighter","unhighlight","portsPositionArgs","elemBBox","groupPositionArgs","stepAngle","step","ellipseLayout","ellipseSpread","stepFn","getTopCenter","compensateRotate","tangentTheta","getCorner","lineLayout","getTopLeft","PortLayout","portPosition","outside","outsideLayout","outsideOriented","inside","insideLayout","insideOriented","autoOrient","bboxAngles","getBBoxAngles","textAnchor","orientAngle","tl","bl","br","tr","radial","radialLayout","radialOriented","portCenterOffset","PortLabelLayout","cid","views","flag","removeEventListeners","onRemove","unmount","classList","rootElem","selectors","prevSelector","nth","getSelector","undelegateEvents","splitter","getEventHandler","delegateEvent","getEventNamespace","addEventListeners","fromPoint","elementFromPoint","setEventData","propagationStopped","getEventData","eventData","currentData","normalizeEvent","View","isSvgElement","validSelector","isCSSSelector","normalizedEvent","touchEvt","getView","counter","elemCache","pathCache","boundingRect","Markup","isJSONMarkup","isStringMarkup","parseJSONMarkup","fragment","groups","defines","define","groupSelector","nodeGroups","groupName","createContainer","renderMarkup","parseLabelStringMarkup","getPortContainerMarkup","getPortMarkup","getPortLabelMarkup","getEdgeMarkup","cursor","strokeLinecap","getForeignObjectMarkup","bare","background","getAttrDefinition","normal","specials","definition","getDefinition","normalName","setDefine","offsetDefine","positionDefine","allProcessedAttrs","roProcessedAttrs","cellAttrs","rootNode","selectorCache","merge","unique","selectedLength","sortIndex","reduceRight","processedAttrs","rawAttrs","nodeAttrs","setAttrs","positionAttrs","offsetAttrs","nodeTransform","nodePosition","positioned","ts","offseted","nodeBoundingRect","getBoundingRectOfElement","nodeBBox","nodesAttrs","findAttrs","nodesAllAttrs","specialItems","each","processed","processAttrs","nodeAllAttrs","refSelector","refNode","processedAttributes","bboxCache","rotatableMatrix","unrotatedRefBBox","isRefNodeRotatable","rotatableNode","rootBBox","mergeProcessedAttrs","updateRelativeAttrs","FlagManager","actions","bootstrap","flags","labels","label","getFlag","hasChanged","defaults","mergeActions","arr1","arr2","getDefaults","documentEvents","ensureOptions","setContainer","ensureContainer","init","removeTools","rootSelector","getConstructor","prefixClassName","getContainerTagName","delegateEvents","getContainerAttrs","getContainerStyle","setStyle","getContainerClassName","getBootstrapFlag","hasAction","removeAction","action","additionalRemovedActions","removedFlags","onAttrsChange","getChangedFlag","updated","dirty","toolId","renderer","requestViewUpdate","feature","interacting","getMatrix","getBoundingRect","getMatrixOfElement","rm","getRootRotatedMatrix","tm","getRootTranslatedMatrix","useCellGeometry","getAngle","getBBoxOfElement","coord","localToGraphRect","getPosition","findByAttr","partial","prepareHighlight","notify","edge","isNodeView","portId","findAttr","terminal","hasPort","findPortElem","tools","config","can","isToolsView","mount","hide","show","getTools","addTools","getEventArgs","cachedModelForMouseEvent","startBatch","stopBatch","getEventTarget","findViewByElem","onMouseLeave","onMouseEnter","CellView","Flag","isCellView","confirmUpdate","ctor","svgContainer","htmlContainer","normalizedTools","ToolItem","isToolItem","tool","render","isSVGElement","focusedTool","blurredTool","focus","hasSVG","hasHTML","decorator","ToolsView","visible","toolsView","onRender","focusOpacity","getClassName","toPercentage","pin","relative","strategy","pinEdgeTerminal","pinNodeTerminal","getUnrotatedBBoxOfElement","anchor","totalLength","pinRelative","pinAbsolute","getAnchor","terminalView","terminalMagnet","getViewBBox","quick","ConnectionStrategy","updatePosition","getEdgeMatrix","getNodeMatrix","getTangentAtRatio","getTangentAtLength","onClick","btn","Button","mousedown","touchstart","Remove","ui","moveAndExpand","Boundary","handles","getVertices","addable","updatePath","resetHandles","renderHandles","vertices","updateHandles","stopHandleListening","vertex","createHandle","processHandle","startHandleListening","onHandleChange","onHandleChanging","onHandleChanged","onHandleRemove","sourceAnchor","targetAnchor","getMouseEventArgs","notifyMouseDown","snapVertex","setVertexAt","notifyMouseMove","vertexAdded","removeRedundancies","verticesRemoved","removeRedundantLinearVertices","notifyMouseUp","checkMouseleave","onChanged","snapRadius","neighbors","getNeighborPoints","removable","removeVertexAt","matchModifiers","allowAddVertex","getVertexIndex","insertVertex","onMouseDown","Vertices","Handle","dblclick","delegateDocumentEvents","mousemove","touchmove","mouseup","touchend","touchcancel","emit","undelegateDocumentEvents","pathClassName","nextVertex","renderHandle","updateHandle","removeProp","anchorFn","snapHandle","sourceView","sourceBBox","changeSourceAnchor","deleteSourceAnchor","shiftHandleIndexes","sourceAnchorPosition","sourceMagnet","resetAnchor","sourceAnchorDef","targetView","targetBBox","changeTargetAnchor","deleteTargetAnchor","targetAnchorPosition","targetMagnet","targetAnchorDef","setVertices","segmentLine","Segments","getClosestPoint","toggleArea","getTerminalView","updateAnchor","updateArea","anchorNode","getTerminalAnchor","customAnchor","anchorAttrs","customAnchorAttrs","defaultAnchorAttrs","areaNode","area","terminalCell","getTerminalMagnet","areaPadding","inflate","restrictArea","rewrite","terminalType","clientToLocalPoint","snapFn","snap","pointAtConnection","rotatedCoords","Anchor","toolView","isSource","refIndex","getVertexAt","SourceAnchor","TargetAnchor","getPointAtRatio","prepareArrowheadDragging","onMouseMove","onMouseUp","Arrowhead","SourceArrowhead","TargetArrowhead","labelIndex","dblClick","onCellDblClick","editor","contentEditable","updateNodeEditorTransform","updateEdgeEditorTransform","backgroundColor","getCellText","innerText","setCellText","minWidth","localToGraph","parentElement","isEdgeLabel","labelAddable","clientToLocal","removeElement","updateEditor","autoFocus","selectText","range","createRange","selectNodeContents","addRange","getText","setText","newLabel","appendLabel","removeLabelAt","CellEditor","NodeEditor","EdgeEditor","NodeTool","boundary","inherit","EdgeTool","createBBoxAnchor","refView","refPoint","fixedAt","getPointAtEdge","orthogonal","orth","nodeCenter","endType","getConnectionPoint","middleSide","getLeftMiddle","getRightMiddle","getBottomCenter","direction","midSide","NodeAnchor","OFFSET","getConnectionSubdivisions","vLine","hLine","vIntersections","hIntersections","fallbackAt","parallel","getStrokeWidth","EdgeAnchor","stroked","bboxRaw","lineRaw","setLength","localShape","getShapeOfElement","magnetMatrix","translateMatrix","rotateMatrix","targetMatrix","localMatrix","localLine","localRef","getDataOfElement","insideout","localBBox","pathOptions","extrapolate","sticky","intersectsWithLineFromCenterToPoint","cpOffset","alignLine","coordinate","alignOffset","align","ConnectionPoint","oneSide","dim","getPointBBox","getPaddingBox","getSourceBBox","getTargetBBox","getSourceAnchor","getTargetAnchor","route","isOrthogonal","getBearing","intersectsWithRect","insideNode","nodeToNode","nodeToVertex","isOrthogonalLoop","vertexToNode","vertexToVertex","opposites","N","S","E","W","freeJoin","getBBoxSize","d1","d2","opposite","fromBBox","toBBox","freePoints","freeBearingPoints","fromBorder","toBorder","startRoute","endRoute","reversed","maxLoopCount","maxDirectionChange","perpendicular","excludeTerminals","excludeNodes","excludeShapes","startDirections","endDirections","directionMap","cost","0","45","90","fallbackRouter","draggingRouter","resolveOptions","paddingBox","directions","point1","point2","OPEN","CLOSE","mapGridSize","excludedTerminals","getCell","excludedAncestors","getSourceCellId","getAncestors","getTargetCellId","getNodes","excludedTerminal","excludedShape","excludedNode","excludedAncestor","excluded","rects","getSourceEndpoint","getTargetEndpoint","getDirectionAngle","directionCount","grid","quadrant","angleTheta","fixAngleEnd","normalizedAngle","diffX","diffY","gridStepsX","gridStepsY","distanceX","distanceY","getDirectionChange","angle1","angle2","getGridOffsets","gridOffsetX","gridOffsetY","getGrid","getGridDimension","roundedDiff","remainder","correction","snapGrid","getCost","anchors","manhattanDistance","getRectPoints","directionList","centerVector","rectPoints","ending","intersectionLine","farthestIntersectionDistance","farthestIntersection","reconstructRoute","parents","tailPoint","prevDiff","currentKey","leadPoint","fromDiff","findRoute","sourceEndpoint","targetEndpoint","startPoints","endPoints","isAccessible","openSet","costs","previousRouteDirectionAngle","previousDirectionAngle","isPathBeginning","directionChange","numDirections","endPointsKeys","sameStartEndPoints","loopsRemaining","currentParent","currentCost","isStartPoint","isRouteBeginning","skipEndCheck","directionAngle","neighborPoint","neighborKey","isClose","isEndPoint","endDirectionAngle","endDirectionChange","neighborCost","neighborPenalty","penalties","costFromStart","isOpen","fallbackRoute","first","second","optionsRaw","build","oldVertices","newVertices","partialRoute","isEndingAtPoint","dragFrom","dragTo","console","warn","getGridSize","manhattan","diagonalCost","l1","l2","intersectionPoint","directionFrom","metro","linkView","er","offsetRaw","sourceX","targetX","sourceDelta","targetDelta","sourceY","targetY","rollup","center1","center2","loop","halfHeight","validate","angles","line1","line2","MAX_SAFE_INTEGER","intersects1","intersects2","intersects","Router","routePoints","fix","middle","f13","f23","prevDistance","nextDistance","startMove","endMove","roundedStart","roundedEnd","smooth","controlPointX","controlPointY","CLOSE_PROXIMITY_PADDING","F13","F23","setupUpdating","updateList","_jumpOverUpdateList","createLines","findLineIntersections","crossCheckLines","crossCheckLine","getDistence","createJumps","jumpSize","skippedPoints","lastLine","jumpStart","jumpEnd","nextPoint","endDistance","startDistance","jumpLine","jumppedLines","buildPath","jumpType","xAxisRotate","centerLine","halfLine","xOffset","yOffset","nextLine","buildRoundedSegment","jumpover","ignoreConnectors","allLinks","getEdges","thisIndex","defaultConnector","connecting","edges","getConnector","linkViews","findViewByCell","thisLines","linkLines","jumpingLines","lineIntersections","Connector","__decorate","desc","Reflect","decorate","pending","changing","mutate","unset","silent","changes","isEqual","pendingOptions","subset","pathArrayLength","propertyPath","propertyValue","propertyPathArray","nextKey","isArrayIndex","merged","old","ids","targetValue","startValue","getPropByPath","localOptions","timing","getTiming","interpolate","getInterp","interp","startTime","iterate","getTime","elaspe","progress","duration","currentValue","setPropByPath","getArgs","complete","finish","cancelAnimationFrame","commonArgs","jumpedToEnd","stopArgs","Animation","ShareRegistry","propHooks","attrHooks","metadata","preprocess","animation","postprocess","_model","ignoreIdCheck","applyPropHooks","getProp","removeByPath","_children","_parent","removePropByPath","setProp","getPrevious","getZIndex","removeZIndex","setZIndex","cells","getMaxZIndex","getDescendants","breadthFirst","batchUpdate","getMinZIndex","getMarkup","removeMarkup","setMarkup","getAttrs","removeAttrs","overwrite","hooks","getAttrHooks","prefixAttrPath","getAttrByPath","removeAttrByPath","setAttrByPath","setVisible","removeData","getParent","getChildren","parentId","getParentId","childrenIds","ancestors","ancestor","isChildOf","descendant","isDescendantOf","isAncestorOf","getCommonAncestor","getChildIndex","setParent","setChildren","addTo","isCell","addChild","addCell","insertChild","oldParent","getChildCount","incomings","getIncomingEdges","outgoings","getOutgoingEdges","updateParent","removeChildAt","getChildAt","unembed","removeCell","toolItems","setTools","normalizeTools","nameOrIndex","cellType","defaultAttrs","finalAttrs","defaultAttr","subName","finalProps","keepId","deepClone","execute","removeFromParent","Cell","getCellsBBox","cloneCells","cloneMap","sourceId","targetId","setSource","getSource","setTarget","getTarget","embeds","edgeRegistry","nodeRegistry","setEdgeRegistry","setNodeRegistry","ports","group","getPortsByGroup","getGroup","groupPosition","groupPositionName","layoutFn","portsArgs","groupArgs","layouts","portLayout","portSize","portAttrs","labelSize","labelLayout","getPortLabelLayout","parseGroup","parsePort","getLabel","getPortPosition","createPosition","setDefault","setDefaults","getPortLabelPosition","initPorts","getSize","setSize","resize","currentSize","fixedPoint","imageFixedPoint","atan","setPosition","scaledBBox","currentPosition","parentPosition","translateBy","restrict","translatedPosition","transition","currentAngle","getTerminal","getPort","getPortsPosition","portCenter","fit","setPortContainerMarkup","getDefaultPortContainerMarkup","setPortMarkup","getDefaultPortMarkup","setPortLabelMarkup","getDefaultPortLabelMarkup","getPorts","getPortIndex","getPortsLayoutByGroup","layout","prefixPortPath","getPortProp","removePortProp","setPortProp","removePortAt","portsForRemoval","currentPorts","remainingPorts","updatePortData","processRemovedPort","currentItemsMap","removed","getConnectedEdges","incoming","getTargetPortId","outgoing","getSourcePortId","errors","generatePortId","validatePorts","added","prevPort","curPort","constructorName","sourceCell","sourcePort","targetCell","targetPort","isValidId","onLabelsChanged","onVertexsChanged","setTerminal","getTerminalPoint","getTerminalCell","cellId","getTerminalNode","visited","getRouter","removeRouter","setRouter","removeConnector","setConnector","defaultLabel","getLabels","setLabels","parseLabel","insertLabel","parseStringLabel","label1","label2","vertice","getDefaultMarkup","applyToPoints","worker","getPolyline","getSourcePoint","getTargetPoint","newParent","getSourceCell","getTargetCell","prevParent","embed","getSourceNode","getTargetNode","getFragmentAncestor","Edge","equalTerminals","b1","refY","formated","localIndex","entities","sortable","sortAttr","existing","isSameStore","dryrun","removeCells","unreference","at","notifyCellEvent","batches","addings","sortOnChangeZ","onCellAdded","onCellRemoved","onReset","onEdgeTerminalChanged","disconnectEdges","disconnectConnectedEdges","removeConnectedEdges","terminalId","prepareCell","getCells","v1","v2","createNode","updateCell","createEdge","addCells","maxPosition","newId","newCell","sourceCellId","targetCellId","getCellsFromCache","cellIds","indirect","collect","isOutgoing","descendants","embedsCache","collectSub","enclosed","isOrigin","nodeId","isBoundary","getBoundaryNodes","hasLoop","cell1","cell2","successors","search","matchDistance","predecessors","subgraph","getSubGraph","containsRect","getNodesInArea","getNodesFromPoint","breadthFirstSearch","depthFirstSearch","getNeighbors","neighbor","directed","hasParent","resizeCells","fromJSON","parseJSON","resetCells","Model","isModel","addNode","addEdge","setLabel","removeLabel","Base","bodyAttr","labelAttr","getImageUrlHook","imageUrl","imageWidth","imageHeight","image","createShape","Rect","strokeLinejoin","wrap","getPoints","setPoints","removePoints","pointsToString","Poly","Polygon","bg","TextBlock","textAlign","boxSizing","alignItems","justifyContent","foreignObject","wrapValue","wrapAttrs","Circle","portsCache","removePorts","cleanPortsCache","handleAction","renderPorts","renderTools","updateTools","partialAttrs","cleanCache","updateAttrs","renderJSONMarkup","updateTransform","getTranslationString","rot","getRotationString","portRoot","portContentElement","portSelectors","portContentSelectors","cached","portElement","references","parsedPorts","getParsedPorts","portsGropsByZ","autoZIndexKey","getPortElement","appendPorts","updatePorts","refs","createPortElement","renderResult","portClass","portLabelElement","portLabelSelectors","existLabel","existPortLabel","onPortRendered","labelContainer","labelSelectors","contentContainer","contentSelectors","getParsedGroups","groupList","updatePortGroup","metrics","metric","applyPortTransform","initialAngle","portMarkup","portLabelMarkup","getPortEventArgs","notifyPortEvent","onDblClick","onContextMenu","startNodeDragging","dragMagnet","dragNode","stopMagnetDragging","stopNodeDragging","onMagnetClick","onMouseOver","onMouseOut","updateClassName","onMouseWheel","getMouseMovedCount","clickThreshold","startMagnetDragging","onCustomEvent","localPoint","embedding","findParent","getNodesUnderNode","frontOnly","zIndexMap","maxZIndex","newCandidateView","prevCandidateView","candidateEmbedView","validateEmbeding","findView","childView","parentView","clearEmbedding","candidateParent","candidateView","previousParent","validateMagnet","magnetThreshold","startConnectting","delegateDragEvents","createEdgeFromMagnet","isNewEdge","fallbackAction","getDefaultEdge","getEdgeTerminal","autoScrollGraph","getPlugin","isSelectionMovable","selectedCells","getSelectedCells","translating","getGraphArea","getDelegatedView","notifyUnhandledMouseDown","moving","getRestrictArea","notifyNodeMove","posX","posY","enabled","prepareEmbedding","processEmbedding","finalizeEmbedding","scroller","autoScroll","NodeView","POINT_ROUNDING","sourceDef","targetDef","updateTerminalProperties","onLabelsChange","renderLabels","labelCache","onEdgeLabelRendered","normalizeLabelMarkup","parseLabelMarkup","labelNode","getDefaultLabel","updateLabels","customizeLabels","shouldRerenderLabels","updateLabelPositions","previousLabels","labelMarkup","hasChildNodes","canLabelMove","updateConnection","rawCount","simplify","simplifiedPoints","simplifiedCount","isFragmentDescendantOf","translateConnectionPoints","findAnchors","findRoutePoints","connectionPoints","findConnectionPoints","markerPoints","findMarkerPoints","findPath","firstVertex","lastVertex","findAnchorsOrdered","firstType","secondType","secondPoint","firstAnchor","secondAnchor","firstTerminal","secondTerminal","firstView","secondView","firstMagnet","secondMagnet","firstRef","secondRef","sourceEdgeAnchor","targetEdgeAnchor","edgeAnchor","defaultRouter","router","sourceTerminal","targetTerminal","firstRoutePoint","lastRoutePoint","sourcePointRef","sourceLine","connectionPointDef","connectionPoint","sourceConnectionPoint","targetConnectionPointDef","targetConnectionPoint","targetPointRef","targetLine","getLineWidth","sourceMarkerPoint","targetMarkerPoint","sourceStrokeWidth","targetStrokeWidth","defaultPosition","normalizeLabelPosition","labelPosition","getLabelTransformationMatrix","viewKey","updateTerminalMagnet","getCellById","endView","propName","getMagnetFromEdgeTerminal","getLabelAt","labelPositionArgs","defaultLabelPositionArgs","isOffsetAbsolute","absoluteOffset","isDistanceRelative","absoluteDistance","isDistanceAbsoluteReverse","reverseDistance","labelPoint","labelOffset","labelDistance","pointOffset","labelOffsetDiff","labelAngle","offsetCoord","isKeepGradient","keepGradient","isEnsureLegibility","ensureLegibility","pathOpt","vertexLength","getClosestPointLength","currentVertex","currentLength","startEdgeDragging","dragLabel","dragArrowhead","dragEdge","stopLabelDragging","stopArrowheadDragging","stopEdgeDragging","startLabelDragging","initialMagnet","initialTerminal","getValidateConnectionArgs","createValidateConnectionArgs","beforeArrowheadDragging","toFront","highlightAvailableMagnets","unhighlightAvailableMagnets","candidateTerminal","allowLoop","allowNode","allowEdge","allowPort","allowMulti","validateConnection","valid","doValidate","connectedEdges","allowBlank","allowConnectToBlank","validateEdge","currentMagnet","currentView","findMagnet","findViewsInArea","nodeOnly","edgeViews","findEdgeViewsFromPoint","prevView","closestView","prevMagnet","closestMagnet","minDistance","currentTerminal","previousCell","previousPort","previousView","previousPoint","currentCell","currentPort","previousMagnet","marked","magnets","availableMagnets","snapArrowhead","arrowheadDragging","snapArrowheadEnd","arrowheadDragged","finishEmbedding","notifyConnectionEvent","fallbackConnection","afterArrowheadDragging","positionAngle","getLabelPositionAngle","getLabelPositionArgs","getDefaultLabelPositionArgs","positionArgs","mergeLabelPositionArgs","originLabel","getLabelPosition","setLabelAt","EdgeView","viewport","primer","stage","overlay","restore","snapshoot","guarded","preventDefaultDblClick","preventDefaultContextMenu","isPreventDefaultContextMenu","mouseMovedCount","startPosition","preventDefaultMouseDown","preventDefaultBlankAction","moveThreshold","ev","relatedView","wheelDelta","magnetElem","magnetValue","handleMagnetEvent","onMagnetMouseDown","onMagnetDblClick","onMagnetContextMenu","onLabelMouseDown","GraphView","cloned","contextmenu","mouseover","mouseout","mouseenter","mouseleave","mousewheel","DOMMouseScroll","Options","panning","defaultGrid","booleas","scaling","eventTypes","zoomAtMousePosition","highlighting","default","nodeAvailable","magnetAvailable","edgeLabelMovable","virtual","startListening","backgroundImage","resolveGrid","getInstance","settings","patternUnits","patternElem","XMLSerializer","serializeToString","stopListening","viewportTransformString","viewportMatrix","getCTM","getComputedSize","clampScale","getTranslation","getScale","clientSize","scaleGrid","maxScale","minScale","gridWidth","gridHeight","paddings","border","contentArea","getContentArea","allowNewOrigin","minHeight","maxWidth","maxHeight","sizeChanged","originChanged","scaleContentToFitImpl","contentBBox","contentLocalOrigin","getContentBBox","graphToLocal","minScaleX","maxScaleX","minScaleY","maxScaleY","fittingBox","viewportArea","computedSize","currentTranslate","currentScale","newSX","newSY","newOX","newOY","getAllCellsBBox","centerPoint","zoomToRect","positionCell","positionPoint","positionRect","backgroundSize","backgroundPosition","HTMLImageElement","optionsCache","backgroundRepeat","repeat","quality","HTMLCanvasElement","toDataURL","src","updateBackgroundImage","updateBackgroundOptions","updateBackgroundColor","drawBackgroundImage","widgetOptions","preparePanning","onRightMouseDown","mousewheelHandle","MouseWheelHandle","allowMouseWheel","enable","disable","allowRubberband","allowPanning","startPanning","pannable","pan","stopPanning","graphArea","cumulatedFactor","global","startPos","targetScale","MIN_SAFE_INTEGER","hasScroller","clientToGraph","zoom","JOB_PRIORITY","resetRenderArea","setRenderArea","renderArea","JobQueue","isFlushing","isFlushPending","scheduleId","frameInterval","initialTime","job","PRIOR","findInsertionIndex","scheduleJob","flushJobsSync","cancelScheduleJob","getCurrentTime","queueFlush","log","ins","requestIdleCallback","flushJobs","timeout","cancelIdleCallback","hasPerformanceNow","performance","willRemoveViews","renderViews","onModelReseted","onCellZIndexChanged","onCellVisibleChanged","clearJobs","removeZPivots","resetViews","removeViews","viewItem","FLAG_INSERT","Update","toggleVisible","priorAction","queueJob","renderViewInArea","effectedEdges","getEffectedEdges","flushWaitingViews","state","ViewState","MOUNTED","createCellView","CREATED","getRenderPriority","isUpdatable","updateView","WAITING","RenderEdge","removeView","queueFlushSync","FLAG_REMOVE","insertView","pivot","addZPivot","zPivots","pivots","createComment","neighborZ","currentZ","layer","neighborPivot","createViewHook","isViewMounted","flagLabels","RenderNode","Scheduler","FLAG_RENDER","schedule","getElementById","filterId","isDefined","filterUnits","stops","markerUnits","markerOrient","markerId","pathMarker","orient","getClientOffset","scrollX","scrollY","getClientMatrix","localToGraphPoint","getPageOffset","localRect","graphPoint","clientPoint","pagePoint","graphToLocalPoint","graphRect","clientRect","pageOffset","graphToLocalRect","highlights","onCellHighlight","onCellUnhighlight","resolved","resolveHighlighter","graphOptions","highlighterDef","getScroller","autoResize","getContainer","getSensorTarget","installedPlugins","virtualRender","getRoots","getLeafs","isRoot","isLeaf","isNeighbor","getSuccessors","isSuccessor","getPredecessors","isPredecessor","cloneSubGraph","getShortestPath","updateCellId","findViewsFromPoint","getZoom","zoomToFit","getRotation","fitToContent","scaleContentToFit","centerContent","centerCell","positionContent","pageToLocalRect","pageToLocalPoint","localToPageRect","localToPagePoint","clientToLocalRect","localToClientRect","localToClientPoint","clientToGraphRect","clientToGraphPoint","gradient","setGridSize","onGraph","drawBackground","clearBackground","enableVirtualRender","disableVirtualRender","isMouseWheelEnabled","disableMouseWheel","enableMouseWheel","isPannable","enablePanning","disablePanning","plugin","pluginName","plugins","postPlugins","aboutToChangePlugins","getPlugins","pluginIns","isEnabled","clearCells","Graph","Renderer","MouseWheel","DefsManager","GridManager","CoordManager","TransformManager","HighlightManager","BackgroundManager","isGraph","registerNode","registerEdge","registerView","registerAttr","registerGrid","registerFilter","registerNodeTool","registerEdgeTool","registerBackground","registerHighlighter","registerPortLayout","registerPortLabelLayout","registerMarker","registerRouter","registerConnector","registerAnchor","registerEdgeAnchor","registerConnectionPoint","unregisterNode","unregisterEdge","unregisterView","unregisterAttr","unregisterGrid","unregisterFilter","unregisterNodeTool","unregisterEdgeTool","unregisterBackground","unregisterHighlighter","unregisterPortLayout","unregisterPortLabelLayout","unregisterMarker","unregisterRouter","unregisterConnector","unregisterAnchor","unregisterEdgeAnchor","unregisterConnectionPoint","HTML","shapeMaps","effect","renderHTMLComponent","foContent","fo","GridLayout","targetGraph","snapline","draggingGraph","delegateGraphOptions","targetModel","draggingContainer","sourceNode","prepareDragging","updateNodePosition","isSnaplineEnabled","captureCursorOffset","draggingView","draggingNode","draggingModel","getDragNode","tolerance","scaled","clearDragging","delegateView","geometryBBox","draggingBBox","originOffset","updateGraphPosition","scrollTop","snapped","snapOffset","embeddingMode","isValidArea","isInsideValidArea","snapOnMoving","drop","onDropped","onDropInvalid","targetRect","dndRect","targetScroller","dndContainer","getDropArea","isInsideDndRect","outter","scrollLeft","droppingNode","getDropNode","validateNode","stencil","columns","rows","centre","resizeToFit","marginX","marginY","columnWidths","columnWidth","getNodesInColumn","getMaxDim","columnLefts","accumulate","rowHeights","rowHeight","getNodesInRow","rowTops","rowIndex","columnIndex","calcHeight","calcWidth","Dnd","ClassNames","graphs","dnd","onSearch","initContainer","initSearch","initContent","initGroups","setTitle","loadGroup","isGroupCollapsed","expandGroup","collapseGroup","isGroupCollapsable","initGroup","groupNames","notFoundText","renderSearch","globalGraphOptions","stencilGraphOptions","groupElem","collapsable","collapsed","groupTitle","groupContent","graphOptionsInGroup","graphWidth","stencilGraphWidth","graphHeight","stencilGraphHeight","clearGroups","setCollapsableState","defaultGroupName","placeholder","searchText","onDragStart","getModel","getGraph","graphPadding","stencilGraphPadding","getGroupByNode","nodeMovable","keyword","isCellMatched","filters","ignoreCase","collapseGroups","expandGroups","toggleGroup","allCollapsed","Stencil","layoutOptions","showPorts","visibility","createBlock","imageShapes","r3","r4","r5","r6","toSVG","toPNG","toJPEG","exportPNG","exportJPEG","rawSVG","vSVG","clonedSVG","vStage","preserveDimensions","copyStyles","raws","clones","styleSheetCount","styleSheets","styleSheetsCopy","defaultComputedStyles","computedStyle","defaultComputedStyle","copy","customStyles","customStyle","stylesheet","cDATASection","implementation","createDocument","createCDATASection","format","beforeSerialize","serializeImages","deferrals","vImage","expanding","rawSize","imgDataCanvas","context2D","fillStyle","fillRect","getImageData","Image","magnetAdsorbed","imageNodes","use","exportSvg","warning","success","blocks","blocksSort","__scopeId","$","$map","arrayMethodHasSpeciesSupport","HAS_SPECIES_SUPPORT","forced","callbackfn","freeExports","exports","freeModule","moduleExports","Buffer","allocUnsafe","cloneBuffer"],"mappings":"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","file":"js/chunk-75da8ac2.4b64842e.js","sourcesContent":["// compatible with NodeList.prototype.forEach() before chrome 51\n// https://developer.mozilla.org/en-US/docs/Web/API/NodeList/forEach\nif (typeof window === 'object' &&\n    window.NodeList &&\n    !NodeList.prototype.forEach) {\n    NodeList.prototype.forEach = Array.prototype.forEach;\n}\n// compatible with ParentNode.append() before chrome 54\n// https://github.com/jserz/js_piece/blob/master/DOM/ParentNode/append()/append().md\n;\n(function (arr) {\n    arr.forEach((item) => {\n        if (Object.prototype.hasOwnProperty.call(item, 'append')) {\n            return;\n        }\n        Object.defineProperty(item, 'append', {\n            configurable: true,\n            enumerable: true,\n            writable: true,\n            value(...args) {\n                const docFrag = document.createDocumentFragment();\n                args.forEach((arg) => {\n                    const isNode = arg instanceof Node;\n                    docFrag.appendChild(isNode ? arg : document.createTextNode(String(arg)));\n                });\n                this.appendChild(docFrag);\n            },\n        });\n    });\n})([Element.prototype, Document.prototype, DocumentFragment.prototype]);\n//# sourceMappingURL=index.js.map","<template>\r\n    <div id=\"container\">\r\n        <div id=\"stencil\"></div>\r\n        <div id=\"graph-container\"></div>\r\n    </div>\r\n    <div>\r\n        <el-button type=\"primary\" @click=\"exportSVG\">svg</el-button>\r\n        <el-button type=\"primary\" @click=\"exportPng\">png</el-button>\r\n        <el-button type=\"primary\" @click=\"getShape\"></el-button>\r\n    </div>\r\n</template>\r\n<script lang=\"ts\">\r\n    import {defineComponent, reactive, toRefs, onMounted} from 'vue';\r\n    import {Graph, Shape} from '@antv/x6'\r\n    import {Stencil} from \"@antv/x6-plugin-stencil\"\r\n    import {createBlock, showPorts, block, reverseObject} from './hook/UseAntVFlow'\r\n    import {Export} from '@antv/x6-plugin-export';\r\n    import {ElMessage} from 'element-plus';\r\n    import {uniqBy} from 'lodash'\r\n\r\n\r\n    export default defineComponent({\r\n        name: 'AntVX6',\r\n        setup() {\r\n            const data = reactive({})\r\n            onMounted(() => {\r\n                createBlock()\r\n                init()\r\n            })\r\n\r\n\r\n            let graph;\r\n\r\n            function init() {\r\n                // #region \r\n                graph = new Graph({\r\n                    container: document.getElementById('graph-container')!,\r\n                    grid: true,\r\n                    // resizing: true,\r\n                    // rotating: true,\r\n                    // selecting: {\r\n                    //     enabled: true,\r\n                    //     rubberband: true,\r\n                    //     showNodeSelectionBox: true,\r\n                    // },\r\n                    // snapline: true,\r\n                    // keyboard: true,\r\n                    // clipboard: true,\r\n                    mousewheel: {\r\n                        enabled: true,\r\n                        zoomAtMousePosition: true,\r\n                        modifiers: 'ctrl',\r\n                        minScale: 0.5,\r\n                        maxScale: 3,\r\n                    },\r\n                    connecting: {\r\n                        router: {\r\n                            name: 'manhattan',\r\n                            args: {\r\n                                padding: 1,\r\n                            },\r\n                        },\r\n                        connector: {\r\n                            name: 'rounded',\r\n                            args: {\r\n                                radius: 8,\r\n                            },\r\n                        },\r\n                        anchor: 'center',\r\n                        connectionPoint: 'anchor',\r\n                        allowBlank: false,\r\n                        snap: {\r\n                            radius: 20,\r\n                        },\r\n                        createEdge() {\r\n                            return new Shape.Edge({\r\n                                attrs: {\r\n                                    line: {\r\n                                        stroke: '#A2B1C3',\r\n                                        strokeWidth: 2,\r\n                                        targetMarker: {\r\n                                            name: 'block',\r\n                                            width: 12,\r\n                                            height: 8,\r\n                                        },\r\n                                    },\r\n                                },\r\n                                zIndex: 0,\r\n                            })\r\n                        },\r\n                        validateConnection({targetMagnet}) {\r\n                            return !!targetMagnet\r\n                        },\r\n                    },\r\n                    highlighting: {\r\n                        magnetAdsorbed: {\r\n                            name: 'stroke',\r\n                            args: {\r\n                                attrs: {\r\n                                    fill: '#5F95FF',\r\n                                    stroke: '#5F95FF',\r\n                                },\r\n                            },\r\n                        },\r\n                    },\r\n                })\r\n                // #endregion\r\n                graph.on('node:mouseenter', () => {\r\n                    const container = document.getElementById('graph-container')!\r\n                    const ports = container.querySelectorAll(\r\n                        '.x6-port-body',\r\n                    ) as NodeListOf<SVGElement>\r\n                    showPorts(ports, true)\r\n                })\r\n                graph.on('node:mouseleave', () => {\r\n                    const container = document.getElementById('graph-container')!\r\n                    const ports = container.querySelectorAll(\r\n                        '.x6-port-body',\r\n                    ) as NodeListOf<SVGElement>\r\n                    showPorts(ports, false)\r\n                })\r\n                // #region  stencil\r\n                const stencil = new Stencil({\r\n                    title: '',\r\n                    target: graph,\r\n                    stencilGraphWidth: 200,\r\n                    stencilGraphHeight: 180,\r\n                    collapsable: true,\r\n                    groups: [\r\n                        {\r\n                            title: '',\r\n                            name: 'group1',\r\n                        },\r\n                        {\r\n                            title: '',\r\n                            name: 'group2',\r\n                            graphHeight: 250,\r\n                            layoutOptions: {\r\n                                rowHeight: 70,\r\n                            },\r\n                        },\r\n                    ],\r\n                    layoutOptions: {\r\n                        columns: 2,\r\n                        columnWidth: 80,\r\n                        rowHeight: 55,\r\n                    },\r\n                })\r\n                document.getElementById('stencil')!.appendChild(stencil.container)\r\n\r\n                const {r1, r2, r3, r4, r5, r6, imageShapes} = block(graph)\r\n                stencil.load([r1, r2, r3, r4, r5, r6], 'group1')\r\n                const imageNodes = imageShapes.map((item) =>\r\n                    graph.createNode({\r\n                        shape: 'custom-image',\r\n                        label: item.label,\r\n                        attrs: {\r\n                            image: {\r\n                                'xlink:href': item.image,\r\n                            },\r\n                        },\r\n                    }),\r\n                )\r\n                stencil.load(imageNodes, 'group2')\r\n                graph.use(new Export())\r\n            }\r\n\r\n            function exportPng() {\r\n                graph.exportPNG('chart', {})\r\n            }\r\n\r\n            function exportSvg() {\r\n                ElMessage.warning(\"tmd\")\r\n                graph.exportSVG('chart', {\r\n                    preserveDimensions: true\r\n                })\r\n            }\r\n\r\n            function getShape() {\r\n                ElMessage.success(\"\")\r\n                // console.log(graph)\r\n                console.log('', graph.getCells())\r\n                console.log('', graph.getNodes())\r\n                const line = graph.getCells().filter(item => item.shape === 'edge')\r\n                const blocks = graph.getNodes()\r\n                let blocksSort:any[] = []\r\n                line.forEach(item => {\r\n                    const sourceId = item['source']['cell']\r\n                    const targetId = item['target']['cell']\r\n                    blocks.forEach(b => {\r\n                        if (b.id === sourceId) {\r\n                            blocksSort.push(b)\r\n                        }\r\n                        if (b.id === targetId) {\r\n                            blocksSort.push(b)\r\n                        }\r\n                    })\r\n                })\r\n                console.log(\"\", uniqBy(blocksSort,'id'))\r\n            }\r\n\r\n            return {\r\n                ...toRefs(data),\r\n                exportPng,\r\n                exportSvg,\r\n                getShape\r\n            };\r\n        },\r\n    });\r\n</script>\r\n\r\n<style scoped lang='less'>\r\n    .tool {\r\n        width: 100%;\r\n        overflow: hidden;\r\n    }\r\n\r\n    #container {\r\n        height: 500px;\r\n        border: 1px solid #ddd;\r\n        display: flex;\r\n\r\n        #stencil {\r\n            height: 500px;\r\n            width: 20%;\r\n            position: relative;\r\n        }\r\n\r\n        #graph-container {\r\n            width: 80%;\r\n        }\r\n    }\r\n\r\n</style>\r\n","/* eslint-disable no-underscore-dangle */\nexport class Disposable {\n    get disposed() {\n        return this._disposed === true;\n    }\n    dispose() {\n        this._disposed = true;\n    }\n}\n(function (Disposable) {\n    function dispose() {\n        return (target, methodName, descriptor) => {\n            const raw = descriptor.value;\n            const proto = target.__proto__; // eslint-disable-line\n            descriptor.value = function () {\n                if (this.disposed) {\n                    return;\n                }\n                raw.call(this);\n                proto.dispose.call(this);\n            };\n        };\n    }\n    Disposable.dispose = dispose;\n})(Disposable || (Disposable = {}));\n/**\n * A disposable object which delegates to a callback function.\n */\nexport class DisposableDelegate {\n    /**\n     * Construct a new disposable delegate.\n     *\n     * @param callback - The callback function to invoke on dispose.\n     */\n    constructor(callback) {\n        this.callback = callback;\n    }\n    /**\n     * Test whether the delegate has been disposed.\n     */\n    get disposed() {\n        return !this.callback;\n    }\n    /**\n     * Dispose of the delegate and invoke the callback function.\n     */\n    dispose() {\n        if (!this.callback) {\n            return;\n        }\n        const callback = this.callback;\n        this.callback = null;\n        callback();\n    }\n}\n/**\n * An object which manages a collection of disposable items.\n */\nexport class DisposableSet {\n    constructor() {\n        this.isDisposed = false; // eslint-disable-line:variable-name\n        this.items = new Set();\n    }\n    /**\n     * Test whether the set has been disposed.\n     */\n    get disposed() {\n        return this.isDisposed;\n    }\n    /**\n     * Dispose of the set and the items it contains.\n     *\n     * #### Notes\n     * Items are disposed in the order they are added to the set.\n     */\n    dispose() {\n        if (this.isDisposed) {\n            return;\n        }\n        this.isDisposed = true;\n        this.items.forEach((item) => {\n            item.dispose();\n        });\n        this.items.clear();\n    }\n    /**\n     * Test whether the set contains a specific item.\n     *\n     * @param item - The item of interest.\n     *\n     * @returns `true` if the set contains the item, `false` otherwise.\n     */\n    contains(item) {\n        return this.items.has(item);\n    }\n    /**\n     * Add a disposable item to the set.\n     *\n     * @param item - The item to add to the set.\n     *\n     * #### Notes\n     * If the item is already contained in the set, this is a no-op.\n     */\n    add(item) {\n        this.items.add(item);\n    }\n    /**\n     * Remove a disposable item from the set.\n     *\n     * @param item - The item to remove from the set.\n     *\n     * #### Notes\n     * If the item is not contained in the set, this is a no-op.\n     */\n    remove(item) {\n        this.items.delete(item);\n    }\n    /**\n     * Remove all items from the set.\n     */\n    clear() {\n        this.items.clear();\n    }\n}\n(function (DisposableSet) {\n    /**\n     * Create a disposable set from an iterable of items.\n     *\n     * @param items - The iterable or array-like object of interest.\n     *\n     * @returns A new disposable initialized with the given items.\n     */\n    function from(items) {\n        const set = new DisposableSet();\n        items.forEach((item) => {\n            set.add(item);\n        });\n        return set;\n    }\n    DisposableSet.from = from;\n})(DisposableSet || (DisposableSet = {}));\n//# sourceMappingURL=disposable.js.map","import root from './_root.js';\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nexport default now;\n","/** Used to match a single whitespace character. */\nvar reWhitespace = /\\s/;\n\n/**\n * Used by `_.trim` and `_.trimEnd` to get the index of the last non-whitespace\n * character of `string`.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {number} Returns the index of the last non-whitespace character.\n */\nfunction trimmedEndIndex(string) {\n  var index = string.length;\n\n  while (index-- && reWhitespace.test(string.charAt(index))) {}\n  return index;\n}\n\nexport default trimmedEndIndex;\n","import trimmedEndIndex from './_trimmedEndIndex.js';\n\n/** Used to match leading whitespace. */\nvar reTrimStart = /^\\s+/;\n\n/**\n * The base implementation of `_.trim`.\n *\n * @private\n * @param {string} string The string to trim.\n * @returns {string} Returns the trimmed string.\n */\nfunction baseTrim(string) {\n  return string\n    ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '')\n    : string;\n}\n\nexport default baseTrim;\n","import baseGetTag from './_baseGetTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nexport default isSymbol;\n","import baseTrim from './_baseTrim.js';\nimport isObject from './isObject.js';\nimport isSymbol from './isSymbol.js';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = baseTrim(value);\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nexport default toNumber;\n","import isObject from './isObject.js';\nimport now from './now.js';\nimport toNumber from './toNumber.js';\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nexport default debounce;\n","import debounce from './debounce.js';\nimport isObject from './isObject.js';\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  if (isObject(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n  return debounce(func, wait, {\n    'leading': leading,\n    'maxWait': wait,\n    'trailing': trailing\n  });\n}\n\nexport default throttle;\n","export { debounce, throttle } from 'lodash-es';\nexport function apply(fn, ctx, args) {\n    if (args) {\n        switch (args.length) {\n            case 0:\n                return fn.call(ctx);\n            case 1:\n                return fn.call(ctx, args[0]);\n            case 2:\n                return fn.call(ctx, args[0], args[1]);\n            case 3:\n                return fn.call(ctx, args[0], args[1], args[2]);\n            case 4:\n                return fn.call(ctx, args[0], args[1], args[2], args[3]);\n            case 5:\n                return fn.call(ctx, args[0], args[1], args[2], args[3], args[4]);\n            case 6:\n                return fn.call(ctx, args[0], args[1], args[2], args[3], args[4], args[5]);\n            default:\n                return fn.apply(ctx, args);\n        }\n    }\n    return fn.call(ctx);\n}\nexport function call(fn, ctx, ...args) {\n    return apply(fn, ctx, args);\n}\n//# sourceMappingURL=function.js.map","export function isAsyncLike(obj) {\n    return typeof obj === 'object' && obj.then && typeof obj.then === 'function';\n}\nexport function isAsync(obj) {\n    return obj != null && (obj instanceof Promise || isAsyncLike(obj));\n}\nexport function toAsyncBoolean(...inputs) {\n    const results = [];\n    inputs.forEach((arg) => {\n        if (Array.isArray(arg)) {\n            results.push(...arg);\n        }\n        else {\n            results.push(arg);\n        }\n    });\n    const hasAsync = results.some((res) => isAsync(res));\n    if (hasAsync) {\n        const deferres = results.map((res) => isAsync(res) ? res : Promise.resolve(res !== false));\n        return Promise.all(deferres).then((arr) => arr.reduce((memo, item) => item !== false && memo, true));\n    }\n    return results.every((res) => res !== false);\n}\nexport function toDeferredBoolean(...inputs) {\n    const ret = toAsyncBoolean(inputs);\n    return typeof ret === 'boolean' ? Promise.resolve(ret) : ret;\n}\n//# sourceMappingURL=async.js.map","import { FunctionExt } from '../function';\nexport function call(list, args) {\n    const results = [];\n    for (let i = 0; i < list.length; i += 2) {\n        const handler = list[i];\n        const context = list[i + 1];\n        const params = Array.isArray(args) ? args : [args];\n        const ret = FunctionExt.apply(handler, context, params);\n        results.push(ret);\n    }\n    return FunctionExt.toAsyncBoolean(results);\n}\n//# sourceMappingURL=util.js.map","import { call } from './util';\nimport { FunctionExt } from '../function';\nexport class Events {\n    constructor() {\n        this.listeners = {};\n    }\n    on(name, handler, context) {\n        if (handler == null) {\n            return this;\n        }\n        if (!this.listeners[name]) {\n            this.listeners[name] = [];\n        }\n        const cache = this.listeners[name];\n        cache.push(handler, context);\n        return this;\n    }\n    once(name, handler, context) {\n        const cb = (...args) => {\n            this.off(name, cb);\n            return call([handler, context], args);\n        };\n        return this.on(name, cb, this);\n    }\n    off(name, handler, context) {\n        // remove all events.\n        if (!(name || handler || context)) {\n            this.listeners = {};\n            return this;\n        }\n        const listeners = this.listeners;\n        const names = name ? [name] : Object.keys(listeners);\n        names.forEach((n) => {\n            const cache = listeners[n];\n            if (!cache) {\n                return;\n            }\n            // remove all events with specified name.\n            if (!(handler || context)) {\n                delete listeners[n];\n                return;\n            }\n            for (let i = cache.length - 2; i >= 0; i -= 2) {\n                if (!((handler && cache[i] !== handler) ||\n                    (context && cache[i + 1] !== context))) {\n                    cache.splice(i, 2);\n                }\n            }\n        });\n        return this;\n    }\n    trigger(name, ...args) {\n        let returned = true;\n        if (name !== '*') {\n            const list = this.listeners[name];\n            if (list != null) {\n                returned = call([...list], args);\n            }\n        }\n        const list = this.listeners['*'];\n        if (list != null) {\n            return FunctionExt.toAsyncBoolean([\n                returned,\n                call([...list], [name, ...args]),\n            ]);\n        }\n        return returned;\n    }\n    emit(name, ...args) {\n        return this.trigger(name, ...args);\n    }\n}\n//# sourceMappingURL=events.js.map","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.has` without support for deep paths.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {Array|string} key The key to check.\n * @returns {boolean} Returns `true` if `key` exists, else `false`.\n */\nfunction baseHas(object, key) {\n  return object != null && hasOwnProperty.call(object, key);\n}\n\nexport default baseHas;\n","import isArray from './isArray.js';\nimport isSymbol from './isSymbol.js';\n\n/** Used to match property names within property paths. */\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n    reIsPlainProp = /^\\w*$/;\n\n/**\n * Checks if `value` is a property name and not a property path.\n *\n * @private\n * @param {*} value The value to check.\n * @param {Object} [object] The object to query keys on.\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n */\nfunction isKey(value, object) {\n  if (isArray(value)) {\n    return false;\n  }\n  var type = typeof value;\n  if (type == 'number' || type == 'symbol' || type == 'boolean' ||\n      value == null || isSymbol(value)) {\n    return true;\n  }\n  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n    (object != null && value in Object(object));\n}\n\nexport default isKey;\n","import MapCache from './_MapCache.js';\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a function that memoizes the result of `func`. If `resolver` is\n * provided, it determines the cache key for storing the result based on the\n * arguments provided to the memoized function. By default, the first argument\n * provided to the memoized function is used as the map cache key. The `func`\n * is invoked with the `this` binding of the memoized function.\n *\n * **Note:** The cache is exposed as the `cache` property on the memoized\n * function. Its creation may be customized by replacing the `_.memoize.Cache`\n * constructor with one whose instances implement the\n * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n * method interface of `clear`, `delete`, `get`, `has`, and `set`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to have its output memoized.\n * @param {Function} [resolver] The function to resolve the cache key.\n * @returns {Function} Returns the new memoized function.\n * @example\n *\n * var object = { 'a': 1, 'b': 2 };\n * var other = { 'c': 3, 'd': 4 };\n *\n * var values = _.memoize(_.values);\n * values(object);\n * // => [1, 2]\n *\n * values(other);\n * // => [3, 4]\n *\n * object.a = 2;\n * values(object);\n * // => [1, 2]\n *\n * // Modify the result cache.\n * values.cache.set(object, ['a', 'b']);\n * values(object);\n * // => ['a', 'b']\n *\n * // Replace `_.memoize.Cache`.\n * _.memoize.Cache = WeakMap;\n */\nfunction memoize(func, resolver) {\n  if (typeof func != 'function' || (resolver != null && typeof resolver != 'function')) {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var memoized = function() {\n    var args = arguments,\n        key = resolver ? resolver.apply(this, args) : args[0],\n        cache = memoized.cache;\n\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    memoized.cache = cache.set(key, result) || cache;\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || MapCache);\n  return memoized;\n}\n\n// Expose `MapCache`.\nmemoize.Cache = MapCache;\n\nexport default memoize;\n","import memoize from './memoize.js';\n\n/** Used as the maximum memoize cache size. */\nvar MAX_MEMOIZE_SIZE = 500;\n\n/**\n * A specialized version of `_.memoize` which clears the memoized function's\n * cache when it exceeds `MAX_MEMOIZE_SIZE`.\n *\n * @private\n * @param {Function} func The function to have its output memoized.\n * @returns {Function} Returns the new memoized function.\n */\nfunction memoizeCapped(func) {\n  var result = memoize(func, function(key) {\n    if (cache.size === MAX_MEMOIZE_SIZE) {\n      cache.clear();\n    }\n    return key;\n  });\n\n  var cache = result.cache;\n  return result;\n}\n\nexport default memoizeCapped;\n","import memoizeCapped from './_memoizeCapped.js';\n\n/** Used to match property names within property paths. */\nvar rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n/** Used to match backslashes in property paths. */\nvar reEscapeChar = /\\\\(\\\\)?/g;\n\n/**\n * Converts `string` to a property path array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the property path array.\n */\nvar stringToPath = memoizeCapped(function(string) {\n  var result = [];\n  if (string.charCodeAt(0) === 46 /* . */) {\n    result.push('');\n  }\n  string.replace(rePropName, function(match, number, quote, subString) {\n    result.push(quote ? subString.replace(reEscapeChar, '$1') : (number || match));\n  });\n  return result;\n});\n\nexport default stringToPath;\n","/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nexport default arrayMap;\n","import Symbol from './_Symbol.js';\nimport arrayMap from './_arrayMap.js';\nimport isArray from './isArray.js';\nimport isSymbol from './isSymbol.js';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isArray(value)) {\n    // Recursively convert values (susceptible to call stack limits).\n    return arrayMap(value, baseToString) + '';\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nexport default baseToString;\n","import baseToString from './_baseToString.js';\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\nexport default toString;\n","import isArray from './isArray.js';\nimport isKey from './_isKey.js';\nimport stringToPath from './_stringToPath.js';\nimport toString from './toString.js';\n\n/**\n * Casts `value` to a path array if it's not one.\n *\n * @private\n * @param {*} value The value to inspect.\n * @param {Object} [object] The object to query keys on.\n * @returns {Array} Returns the cast property path array.\n */\nfunction castPath(value, object) {\n  if (isArray(value)) {\n    return value;\n  }\n  return isKey(value, object) ? [value] : stringToPath(toString(value));\n}\n\nexport default castPath;\n","import isSymbol from './isSymbol.js';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nexport default toKey;\n","import castPath from './_castPath.js';\nimport isArguments from './isArguments.js';\nimport isArray from './isArray.js';\nimport isIndex from './_isIndex.js';\nimport isLength from './isLength.js';\nimport toKey from './_toKey.js';\n\n/**\n * Checks if `path` exists on `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @param {Function} hasFunc The function to check properties.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n */\nfunction hasPath(object, path, hasFunc) {\n  path = castPath(path, object);\n\n  var index = -1,\n      length = path.length,\n      result = false;\n\n  while (++index < length) {\n    var key = toKey(path[index]);\n    if (!(result = object != null && hasFunc(object, key))) {\n      break;\n    }\n    object = object[key];\n  }\n  if (result || ++index != length) {\n    return result;\n  }\n  length = object == null ? 0 : object.length;\n  return !!length && isLength(length) && isIndex(key, length) &&\n    (isArray(object) || isArguments(object));\n}\n\nexport default hasPath;\n","import baseHas from './_baseHas.js';\nimport hasPath from './_hasPath.js';\n\n/**\n * Checks if `path` is a direct property of `object`.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n * @example\n *\n * var object = { 'a': { 'b': 2 } };\n * var other = _.create({ 'a': _.create({ 'b': 2 }) });\n *\n * _.has(object, 'a');\n * // => true\n *\n * _.has(object, 'a.b');\n * // => true\n *\n * _.has(object, ['a', 'b']);\n * // => true\n *\n * _.has(other, 'a');\n * // => false\n */\nfunction has(object, path) {\n  return object != null && hasPath(object, path, baseHas);\n}\n\nexport default has;\n","import castPath from './_castPath.js';\nimport toKey from './_toKey.js';\n\n/**\n * The base implementation of `_.get` without support for default values.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @returns {*} Returns the resolved value.\n */\nfunction baseGet(object, path) {\n  path = castPath(path, object);\n\n  var index = 0,\n      length = path.length;\n\n  while (object != null && index < length) {\n    object = object[toKey(path[index++])];\n  }\n  return (index && index == length) ? object : undefined;\n}\n\nexport default baseGet;\n","import getNative from './_getNative.js';\n\nvar defineProperty = (function() {\n  try {\n    var func = getNative(Object, 'defineProperty');\n    func({}, '', {});\n    return func;\n  } catch (e) {}\n}());\n\nexport default defineProperty;\n","import defineProperty from './_defineProperty.js';\n\n/**\n * The base implementation of `assignValue` and `assignMergeValue` without\n * value checks.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction baseAssignValue(object, key, value) {\n  if (key == '__proto__' && defineProperty) {\n    defineProperty(object, key, {\n      'configurable': true,\n      'enumerable': true,\n      'value': value,\n      'writable': true\n    });\n  } else {\n    object[key] = value;\n  }\n}\n\nexport default baseAssignValue;\n","import baseAssignValue from './_baseAssignValue.js';\nimport eq from './eq.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nexport default assignValue;\n","import assignValue from './_assignValue.js';\nimport castPath from './_castPath.js';\nimport isIndex from './_isIndex.js';\nimport isObject from './isObject.js';\nimport toKey from './_toKey.js';\n\n/**\n * The base implementation of `_.set`.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {Array|string} path The path of the property to set.\n * @param {*} value The value to set.\n * @param {Function} [customizer] The function to customize path creation.\n * @returns {Object} Returns `object`.\n */\nfunction baseSet(object, path, value, customizer) {\n  if (!isObject(object)) {\n    return object;\n  }\n  path = castPath(path, object);\n\n  var index = -1,\n      length = path.length,\n      lastIndex = length - 1,\n      nested = object;\n\n  while (nested != null && ++index < length) {\n    var key = toKey(path[index]),\n        newValue = value;\n\n    if (key === '__proto__' || key === 'constructor' || key === 'prototype') {\n      return object;\n    }\n\n    if (index != lastIndex) {\n      var objValue = nested[key];\n      newValue = customizer ? customizer(objValue, key, nested) : undefined;\n      if (newValue === undefined) {\n        newValue = isObject(objValue)\n          ? objValue\n          : (isIndex(path[index + 1]) ? [] : {});\n      }\n    }\n    assignValue(nested, key, newValue);\n    nested = nested[key];\n  }\n  return object;\n}\n\nexport default baseSet;\n","import baseGet from './_baseGet.js';\nimport baseSet from './_baseSet.js';\nimport castPath from './_castPath.js';\n\n/**\n * The base implementation of  `_.pickBy` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The source object.\n * @param {string[]} paths The property paths to pick.\n * @param {Function} predicate The function invoked per property.\n * @returns {Object} Returns the new object.\n */\nfunction basePickBy(object, paths, predicate) {\n  var index = -1,\n      length = paths.length,\n      result = {};\n\n  while (++index < length) {\n    var path = paths[index],\n        value = baseGet(object, path);\n\n    if (predicate(value, path)) {\n      baseSet(result, castPath(path, object), value);\n    }\n  }\n  return result;\n}\n\nexport default basePickBy;\n","/**\n * The base implementation of `_.hasIn` without support for deep paths.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {Array|string} key The key to check.\n * @returns {boolean} Returns `true` if `key` exists, else `false`.\n */\nfunction baseHasIn(object, key) {\n  return object != null && key in Object(object);\n}\n\nexport default baseHasIn;\n","import baseHasIn from './_baseHasIn.js';\nimport hasPath from './_hasPath.js';\n\n/**\n * Checks if `path` is a direct or inherited property of `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n * @example\n *\n * var object = _.create({ 'a': _.create({ 'b': 2 }) });\n *\n * _.hasIn(object, 'a');\n * // => true\n *\n * _.hasIn(object, 'a.b');\n * // => true\n *\n * _.hasIn(object, ['a', 'b']);\n * // => true\n *\n * _.hasIn(object, 'b');\n * // => false\n */\nfunction hasIn(object, path) {\n  return object != null && hasPath(object, path, baseHasIn);\n}\n\nexport default hasIn;\n","import basePickBy from './_basePickBy.js';\nimport hasIn from './hasIn.js';\n\n/**\n * The base implementation of `_.pick` without support for individual\n * property identifiers.\n *\n * @private\n * @param {Object} object The source object.\n * @param {string[]} paths The property paths to pick.\n * @returns {Object} Returns the new object.\n */\nfunction basePick(object, paths) {\n  return basePickBy(object, paths, function(value, path) {\n    return hasIn(object, path);\n  });\n}\n\nexport default basePick;\n","import Symbol from './_Symbol.js';\nimport isArguments from './isArguments.js';\nimport isArray from './isArray.js';\n\n/** Built-in value references. */\nvar spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined;\n\n/**\n * Checks if `value` is a flattenable `arguments` object or array.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.\n */\nfunction isFlattenable(value) {\n  return isArray(value) || isArguments(value) ||\n    !!(spreadableSymbol && value && value[spreadableSymbol]);\n}\n\nexport default isFlattenable;\n","import arrayPush from './_arrayPush.js';\nimport isFlattenable from './_isFlattenable.js';\n\n/**\n * The base implementation of `_.flatten` with support for restricting flattening.\n *\n * @private\n * @param {Array} array The array to flatten.\n * @param {number} depth The maximum recursion depth.\n * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.\n * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.\n * @param {Array} [result=[]] The initial result value.\n * @returns {Array} Returns the new flattened array.\n */\nfunction baseFlatten(array, depth, predicate, isStrict, result) {\n  var index = -1,\n      length = array.length;\n\n  predicate || (predicate = isFlattenable);\n  result || (result = []);\n\n  while (++index < length) {\n    var value = array[index];\n    if (depth > 0 && predicate(value)) {\n      if (depth > 1) {\n        // Recursively flatten arrays (susceptible to call stack limits).\n        baseFlatten(value, depth - 1, predicate, isStrict, result);\n      } else {\n        arrayPush(result, value);\n      }\n    } else if (!isStrict) {\n      result[result.length] = value;\n    }\n  }\n  return result;\n}\n\nexport default baseFlatten;\n","import baseFlatten from './_baseFlatten.js';\n\n/**\n * Flattens `array` a single level deep.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to flatten.\n * @returns {Array} Returns the new flattened array.\n * @example\n *\n * _.flatten([1, [2, [3, [4]], 5]]);\n * // => [1, 2, [3, [4]], 5]\n */\nfunction flatten(array) {\n  var length = array == null ? 0 : array.length;\n  return length ? baseFlatten(array, 1) : [];\n}\n\nexport default flatten;\n","/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\nexport default apply;\n","import apply from './_apply.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * A specialized version of `baseRest` which transforms the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @param {Function} transform The rest array transform.\n * @returns {Function} Returns the new function.\n */\nfunction overRest(func, start, transform) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = transform(array);\n    return apply(func, this, otherArgs);\n  };\n}\n\nexport default overRest;\n","/**\n * Creates a function that returns `value`.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {*} value The value to return from the new function.\n * @returns {Function} Returns the new constant function.\n * @example\n *\n * var objects = _.times(2, _.constant({ 'a': 1 }));\n *\n * console.log(objects);\n * // => [{ 'a': 1 }, { 'a': 1 }]\n *\n * console.log(objects[0] === objects[1]);\n * // => true\n */\nfunction constant(value) {\n  return function() {\n    return value;\n  };\n}\n\nexport default constant;\n","import constant from './constant.js';\nimport defineProperty from './_defineProperty.js';\nimport identity from './identity.js';\n\n/**\n * The base implementation of `setToString` without support for hot loop shorting.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar baseSetToString = !defineProperty ? identity : function(func, string) {\n  return defineProperty(func, 'toString', {\n    'configurable': true,\n    'enumerable': false,\n    'value': constant(string),\n    'writable': true\n  });\n};\n\nexport default baseSetToString;\n","/** Used to detect hot functions by number of calls within a span of milliseconds. */\nvar HOT_COUNT = 800,\n    HOT_SPAN = 16;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeNow = Date.now;\n\n/**\n * Creates a function that'll short out and invoke `identity` instead\n * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`\n * milliseconds.\n *\n * @private\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new shortable function.\n */\nfunction shortOut(func) {\n  var count = 0,\n      lastCalled = 0;\n\n  return function() {\n    var stamp = nativeNow(),\n        remaining = HOT_SPAN - (stamp - lastCalled);\n\n    lastCalled = stamp;\n    if (remaining > 0) {\n      if (++count >= HOT_COUNT) {\n        return arguments[0];\n      }\n    } else {\n      count = 0;\n    }\n    return func.apply(undefined, arguments);\n  };\n}\n\nexport default shortOut;\n","import baseSetToString from './_baseSetToString.js';\nimport shortOut from './_shortOut.js';\n\n/**\n * Sets the `toString` method of `func` to return `string`.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar setToString = shortOut(baseSetToString);\n\nexport default setToString;\n","import flatten from './flatten.js';\nimport overRest from './_overRest.js';\nimport setToString from './_setToString.js';\n\n/**\n * A specialized version of `baseRest` which flattens the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @returns {Function} Returns the new function.\n */\nfunction flatRest(func) {\n  return setToString(overRest(func, undefined, flatten), func + '');\n}\n\nexport default flatRest;\n","import basePick from './_basePick.js';\nimport flatRest from './_flatRest.js';\n\n/**\n * Creates an object composed of the picked `object` properties.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The source object.\n * @param {...(string|string[])} [paths] The property paths to pick.\n * @returns {Object} Returns the new object.\n * @example\n *\n * var object = { 'a': 1, 'b': '2', 'c': 3 };\n *\n * _.pick(object, ['a', 'c']);\n * // => { 'a': 1, 'c': 3 }\n */\nvar pick = flatRest(function(object, paths) {\n  return object == null ? {} : basePick(object, paths);\n});\n\nexport default pick;\n","import baseAssignValue from './_baseAssignValue.js';\nimport eq from './eq.js';\n\n/**\n * This function is like `assignValue` except that it doesn't assign\n * `undefined` values.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignMergeValue(object, key, value) {\n  if ((value !== undefined && !eq(object[key], value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nexport default assignMergeValue;\n","import Uint8Array from './_Uint8Array.js';\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\nexport default cloneArrayBuffer;\n","import cloneArrayBuffer from './_cloneArrayBuffer.js';\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\nexport default cloneTypedArray;\n","/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\nexport default copyArray;\n","import isObject from './isObject.js';\n\n/** Built-in value references. */\nvar objectCreate = Object.create;\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} proto The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nvar baseCreate = (function() {\n  function object() {}\n  return function(proto) {\n    if (!isObject(proto)) {\n      return {};\n    }\n    if (objectCreate) {\n      return objectCreate(proto);\n    }\n    object.prototype = proto;\n    var result = new object;\n    object.prototype = undefined;\n    return result;\n  };\n}());\n\nexport default baseCreate;\n","import overArg from './_overArg.js';\n\n/** Built-in value references. */\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\n\nexport default getPrototype;\n","import baseCreate from './_baseCreate.js';\nimport getPrototype from './_getPrototype.js';\nimport isPrototype from './_isPrototype.js';\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototype(object))\n    : {};\n}\n\nexport default initCloneObject;\n","import isArrayLike from './isArrayLike.js';\nimport isObjectLike from './isObjectLike.js';\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\nexport default isArrayLikeObject;\n","import baseGetTag from './_baseGetTag.js';\nimport getPrototype from './_getPrototype.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to infer the `Object` constructor. */\nvar objectCtorString = funcToString.call(Object);\n\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * @static\n * @memberOf _\n * @since 0.8.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) || baseGetTag(value) != objectTag) {\n    return false;\n  }\n  var proto = getPrototype(value);\n  if (proto === null) {\n    return true;\n  }\n  var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n  return typeof Ctor == 'function' && Ctor instanceof Ctor &&\n    funcToString.call(Ctor) == objectCtorString;\n}\n\nexport default isPlainObject;\n","/**\n * Gets the value at `key`, unless `key` is \"__proto__\" or \"constructor\".\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction safeGet(object, key) {\n  if (key === 'constructor' && typeof object[key] === 'function') {\n    return;\n  }\n\n  if (key == '__proto__') {\n    return;\n  }\n\n  return object[key];\n}\n\nexport default safeGet;\n","import assignValue from './_assignValue.js';\nimport baseAssignValue from './_baseAssignValue.js';\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  var isNew = !object;\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    if (newValue === undefined) {\n      newValue = source[key];\n    }\n    if (isNew) {\n      baseAssignValue(object, key, newValue);\n    } else {\n      assignValue(object, key, newValue);\n    }\n  }\n  return object;\n}\n\nexport default copyObject;\n","/**\n * This function is like\n * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * except that it includes inherited enumerable properties.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction nativeKeysIn(object) {\n  var result = [];\n  if (object != null) {\n    for (var key in Object(object)) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default nativeKeysIn;\n","import isObject from './isObject.js';\nimport isPrototype from './_isPrototype.js';\nimport nativeKeysIn from './_nativeKeysIn.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeysIn(object) {\n  if (!isObject(object)) {\n    return nativeKeysIn(object);\n  }\n  var isProto = isPrototype(object),\n      result = [];\n\n  for (var key in object) {\n    if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default baseKeysIn;\n","import arrayLikeKeys from './_arrayLikeKeys.js';\nimport baseKeysIn from './_baseKeysIn.js';\nimport isArrayLike from './isArrayLike.js';\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n}\n\nexport default keysIn;\n","import copyObject from './_copyObject.js';\nimport keysIn from './keysIn.js';\n\n/**\n * Converts `value` to a plain object flattening inherited enumerable string\n * keyed properties of `value` to own properties of the plain object.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {Object} Returns the converted plain object.\n * @example\n *\n * function Foo() {\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.assign({ 'a': 1 }, new Foo);\n * // => { 'a': 1, 'b': 2 }\n *\n * _.assign({ 'a': 1 }, _.toPlainObject(new Foo));\n * // => { 'a': 1, 'b': 2, 'c': 3 }\n */\nfunction toPlainObject(value) {\n  return copyObject(value, keysIn(value));\n}\n\nexport default toPlainObject;\n","import assignMergeValue from './_assignMergeValue.js';\nimport cloneBuffer from './_cloneBuffer.js';\nimport cloneTypedArray from './_cloneTypedArray.js';\nimport copyArray from './_copyArray.js';\nimport initCloneObject from './_initCloneObject.js';\nimport isArguments from './isArguments.js';\nimport isArray from './isArray.js';\nimport isArrayLikeObject from './isArrayLikeObject.js';\nimport isBuffer from './isBuffer.js';\nimport isFunction from './isFunction.js';\nimport isObject from './isObject.js';\nimport isPlainObject from './isPlainObject.js';\nimport isTypedArray from './isTypedArray.js';\nimport safeGet from './_safeGet.js';\nimport toPlainObject from './toPlainObject.js';\n\n/**\n * A specialized version of `baseMerge` for arrays and objects which performs\n * deep merges and tracks traversed objects enabling objects with circular\n * references to be merged.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {string} key The key of the value to merge.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} mergeFunc The function to merge values.\n * @param {Function} [customizer] The function to customize assigned values.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n */\nfunction baseMergeDeep(object, source, key, srcIndex, mergeFunc, customizer, stack) {\n  var objValue = safeGet(object, key),\n      srcValue = safeGet(source, key),\n      stacked = stack.get(srcValue);\n\n  if (stacked) {\n    assignMergeValue(object, key, stacked);\n    return;\n  }\n  var newValue = customizer\n    ? customizer(objValue, srcValue, (key + ''), object, source, stack)\n    : undefined;\n\n  var isCommon = newValue === undefined;\n\n  if (isCommon) {\n    var isArr = isArray(srcValue),\n        isBuff = !isArr && isBuffer(srcValue),\n        isTyped = !isArr && !isBuff && isTypedArray(srcValue);\n\n    newValue = srcValue;\n    if (isArr || isBuff || isTyped) {\n      if (isArray(objValue)) {\n        newValue = objValue;\n      }\n      else if (isArrayLikeObject(objValue)) {\n        newValue = copyArray(objValue);\n      }\n      else if (isBuff) {\n        isCommon = false;\n        newValue = cloneBuffer(srcValue, true);\n      }\n      else if (isTyped) {\n        isCommon = false;\n        newValue = cloneTypedArray(srcValue, true);\n      }\n      else {\n        newValue = [];\n      }\n    }\n    else if (isPlainObject(srcValue) || isArguments(srcValue)) {\n      newValue = objValue;\n      if (isArguments(objValue)) {\n        newValue = toPlainObject(objValue);\n      }\n      else if (!isObject(objValue) || isFunction(objValue)) {\n        newValue = initCloneObject(srcValue);\n      }\n    }\n    else {\n      isCommon = false;\n    }\n  }\n  if (isCommon) {\n    // Recursively merge objects and arrays (susceptible to call stack limits).\n    stack.set(srcValue, newValue);\n    mergeFunc(newValue, srcValue, srcIndex, customizer, stack);\n    stack['delete'](srcValue);\n  }\n  assignMergeValue(object, key, newValue);\n}\n\nexport default baseMergeDeep;\n","import Stack from './_Stack.js';\nimport assignMergeValue from './_assignMergeValue.js';\nimport baseFor from './_baseFor.js';\nimport baseMergeDeep from './_baseMergeDeep.js';\nimport isObject from './isObject.js';\nimport keysIn from './keysIn.js';\nimport safeGet from './_safeGet.js';\n\n/**\n * The base implementation of `_.merge` without support for multiple sources.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} [customizer] The function to customize merged values.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n */\nfunction baseMerge(object, source, srcIndex, customizer, stack) {\n  if (object === source) {\n    return;\n  }\n  baseFor(source, function(srcValue, key) {\n    stack || (stack = new Stack);\n    if (isObject(srcValue)) {\n      baseMergeDeep(object, source, key, srcIndex, baseMerge, customizer, stack);\n    }\n    else {\n      var newValue = customizer\n        ? customizer(safeGet(object, key), srcValue, (key + ''), object, source, stack)\n        : undefined;\n\n      if (newValue === undefined) {\n        newValue = srcValue;\n      }\n      assignMergeValue(object, key, newValue);\n    }\n  }, keysIn);\n}\n\nexport default baseMerge;\n","import identity from './identity.js';\nimport overRest from './_overRest.js';\nimport setToString from './_setToString.js';\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  return setToString(overRest(func, start, identity), func + '');\n}\n\nexport default baseRest;\n","import eq from './eq.js';\nimport isArrayLike from './isArrayLike.js';\nimport isIndex from './_isIndex.js';\nimport isObject from './isObject.js';\n\n/**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n *  else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n        ? (isArrayLike(object) && isIndex(index, object.length))\n        : (type == 'string' && index in object)\n      ) {\n    return eq(object[index], value);\n  }\n  return false;\n}\n\nexport default isIterateeCall;\n","import baseRest from './_baseRest.js';\nimport isIterateeCall from './_isIterateeCall.js';\n\n/**\n * Creates a function like `_.assign`.\n *\n * @private\n * @param {Function} assigner The function to assign values.\n * @returns {Function} Returns the new assigner function.\n */\nfunction createAssigner(assigner) {\n  return baseRest(function(object, sources) {\n    var index = -1,\n        length = sources.length,\n        customizer = length > 1 ? sources[length - 1] : undefined,\n        guard = length > 2 ? sources[2] : undefined;\n\n    customizer = (assigner.length > 3 && typeof customizer == 'function')\n      ? (length--, customizer)\n      : undefined;\n\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n      customizer = length < 3 ? undefined : customizer;\n      length = 1;\n    }\n    object = Object(object);\n    while (++index < length) {\n      var source = sources[index];\n      if (source) {\n        assigner(object, source, index, customizer);\n      }\n    }\n    return object;\n  });\n}\n\nexport default createAssigner;\n","import baseMerge from './_baseMerge.js';\nimport createAssigner from './_createAssigner.js';\n\n/**\n * This method is like `_.assign` except that it recursively merges own and\n * inherited enumerable string keyed properties of source objects into the\n * destination object. Source properties that resolve to `undefined` are\n * skipped if a destination value exists. Array and plain object properties\n * are merged recursively. Other objects and value types are overridden by\n * assignment. Source objects are applied from left to right. Subsequent\n * sources overwrite property assignments of previous sources.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 0.5.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @example\n *\n * var object = {\n *   'a': [{ 'b': 2 }, { 'd': 4 }]\n * };\n *\n * var other = {\n *   'a': [{ 'c': 3 }, { 'e': 5 }]\n * };\n *\n * _.merge(object, other);\n * // => { 'a': [{ 'b': 2, 'c': 3 }, { 'd': 4, 'e': 5 }] }\n */\nvar merge = createAssigner(function(object, source, srcIndex) {\n  baseMerge(object, source, srcIndex);\n});\n\nexport default merge;\n","import baseKeys from './_baseKeys.js';\nimport getTag from './_getTag.js';\nimport isArguments from './isArguments.js';\nimport isArray from './isArray.js';\nimport isArrayLike from './isArrayLike.js';\nimport isBuffer from './isBuffer.js';\nimport isPrototype from './_isPrototype.js';\nimport isTypedArray from './isTypedArray.js';\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    setTag = '[object Set]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if `value` is an empty object, collection, map, or set.\n *\n * Objects are considered empty if they have no own enumerable string keyed\n * properties.\n *\n * Array-like values such as `arguments` objects, arrays, buffers, strings, or\n * jQuery-like collections are considered empty if they have a `length` of `0`.\n * Similarly, maps and sets are considered empty if they have a `size` of `0`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is empty, else `false`.\n * @example\n *\n * _.isEmpty(null);\n * // => true\n *\n * _.isEmpty(true);\n * // => true\n *\n * _.isEmpty(1);\n * // => true\n *\n * _.isEmpty([1, 2, 3]);\n * // => false\n *\n * _.isEmpty({ 'a': 1 });\n * // => false\n */\nfunction isEmpty(value) {\n  if (value == null) {\n    return true;\n  }\n  if (isArrayLike(value) &&\n      (isArray(value) || typeof value == 'string' || typeof value.splice == 'function' ||\n        isBuffer(value) || isTypedArray(value) || isArguments(value))) {\n    return !value.length;\n  }\n  var tag = getTag(value);\n  if (tag == mapTag || tag == setTag) {\n    return !value.size;\n  }\n  if (isPrototype(value)) {\n    return !baseKeys(value).length;\n  }\n  for (var key in value) {\n    if (hasOwnProperty.call(value, key)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexport default isEmpty;\n","import copyObject from './_copyObject.js';\nimport keys from './keys.js';\n\n/**\n * The base implementation of `_.assign` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return object && copyObject(source, keys(source), object);\n}\n\nexport default baseAssign;\n","import copyObject from './_copyObject.js';\nimport keysIn from './keysIn.js';\n\n/**\n * The base implementation of `_.assignIn` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssignIn(object, source) {\n  return object && copyObject(source, keysIn(source), object);\n}\n\nexport default baseAssignIn;\n","import copyObject from './_copyObject.js';\nimport getSymbols from './_getSymbols.js';\n\n/**\n * Copies own symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbols(source, object) {\n  return copyObject(source, getSymbols(source), object);\n}\n\nexport default copySymbols;\n","import arrayPush from './_arrayPush.js';\nimport getPrototype from './_getPrototype.js';\nimport getSymbols from './_getSymbols.js';\nimport stubArray from './stubArray.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own and inherited enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbolsIn = !nativeGetSymbols ? stubArray : function(object) {\n  var result = [];\n  while (object) {\n    arrayPush(result, getSymbols(object));\n    object = getPrototype(object);\n  }\n  return result;\n};\n\nexport default getSymbolsIn;\n","import copyObject from './_copyObject.js';\nimport getSymbolsIn from './_getSymbolsIn.js';\n\n/**\n * Copies own and inherited symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbolsIn(source, object) {\n  return copyObject(source, getSymbolsIn(source), object);\n}\n\nexport default copySymbolsIn;\n","import baseGetAllKeys from './_baseGetAllKeys.js';\nimport getSymbolsIn from './_getSymbolsIn.js';\nimport keysIn from './keysIn.js';\n\n/**\n * Creates an array of own and inherited enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeysIn(object) {\n  return baseGetAllKeys(object, keysIn, getSymbolsIn);\n}\n\nexport default getAllKeysIn;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = new array.constructor(length);\n\n  // Add properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\nexport default initCloneArray;\n","import cloneArrayBuffer from './_cloneArrayBuffer.js';\n\n/**\n * Creates a clone of `dataView`.\n *\n * @private\n * @param {Object} dataView The data view to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned data view.\n */\nfunction cloneDataView(dataView, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n}\n\nexport default cloneDataView;\n","/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/**\n * Creates a clone of `regexp`.\n *\n * @private\n * @param {Object} regexp The regexp to clone.\n * @returns {Object} Returns the cloned regexp.\n */\nfunction cloneRegExp(regexp) {\n  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n  result.lastIndex = regexp.lastIndex;\n  return result;\n}\n\nexport default cloneRegExp;\n","import Symbol from './_Symbol.js';\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a clone of the `symbol` object.\n *\n * @private\n * @param {Object} symbol The symbol object to clone.\n * @returns {Object} Returns the cloned symbol object.\n */\nfunction cloneSymbol(symbol) {\n  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n}\n\nexport default cloneSymbol;\n","import cloneArrayBuffer from './_cloneArrayBuffer.js';\nimport cloneDataView from './_cloneDataView.js';\nimport cloneRegExp from './_cloneRegExp.js';\nimport cloneSymbol from './_cloneSymbol.js';\nimport cloneTypedArray from './_cloneTypedArray.js';\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Initializes an object clone based on its `toStringTag`.\n *\n * **Note:** This function only supports cloning values with tags of\n * `Boolean`, `Date`, `Error`, `Map`, `Number`, `RegExp`, `Set`, or `String`.\n *\n * @private\n * @param {Object} object The object to clone.\n * @param {string} tag The `toStringTag` of the object to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneByTag(object, tag, isDeep) {\n  var Ctor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag:\n      return cloneArrayBuffer(object);\n\n    case boolTag:\n    case dateTag:\n      return new Ctor(+object);\n\n    case dataViewTag:\n      return cloneDataView(object, isDeep);\n\n    case float32Tag: case float64Tag:\n    case int8Tag: case int16Tag: case int32Tag:\n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n      return cloneTypedArray(object, isDeep);\n\n    case mapTag:\n      return new Ctor;\n\n    case numberTag:\n    case stringTag:\n      return new Ctor(object);\n\n    case regexpTag:\n      return cloneRegExp(object);\n\n    case setTag:\n      return new Ctor;\n\n    case symbolTag:\n      return cloneSymbol(object);\n  }\n}\n\nexport default initCloneByTag;\n","import getTag from './_getTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]';\n\n/**\n * The base implementation of `_.isMap` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n */\nfunction baseIsMap(value) {\n  return isObjectLike(value) && getTag(value) == mapTag;\n}\n\nexport default baseIsMap;\n","import baseIsMap from './_baseIsMap.js';\nimport baseUnary from './_baseUnary.js';\nimport nodeUtil from './_nodeUtil.js';\n\n/* Node.js helper references. */\nvar nodeIsMap = nodeUtil && nodeUtil.isMap;\n\n/**\n * Checks if `value` is classified as a `Map` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n * @example\n *\n * _.isMap(new Map);\n * // => true\n *\n * _.isMap(new WeakMap);\n * // => false\n */\nvar isMap = nodeIsMap ? baseUnary(nodeIsMap) : baseIsMap;\n\nexport default isMap;\n","import getTag from './_getTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar setTag = '[object Set]';\n\n/**\n * The base implementation of `_.isSet` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n */\nfunction baseIsSet(value) {\n  return isObjectLike(value) && getTag(value) == setTag;\n}\n\nexport default baseIsSet;\n","import baseIsSet from './_baseIsSet.js';\nimport baseUnary from './_baseUnary.js';\nimport nodeUtil from './_nodeUtil.js';\n\n/* Node.js helper references. */\nvar nodeIsSet = nodeUtil && nodeUtil.isSet;\n\n/**\n * Checks if `value` is classified as a `Set` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n * @example\n *\n * _.isSet(new Set);\n * // => true\n *\n * _.isSet(new WeakSet);\n * // => false\n */\nvar isSet = nodeIsSet ? baseUnary(nodeIsSet) : baseIsSet;\n\nexport default isSet;\n","import Stack from './_Stack.js';\nimport arrayEach from './_arrayEach.js';\nimport assignValue from './_assignValue.js';\nimport baseAssign from './_baseAssign.js';\nimport baseAssignIn from './_baseAssignIn.js';\nimport cloneBuffer from './_cloneBuffer.js';\nimport copyArray from './_copyArray.js';\nimport copySymbols from './_copySymbols.js';\nimport copySymbolsIn from './_copySymbolsIn.js';\nimport getAllKeys from './_getAllKeys.js';\nimport getAllKeysIn from './_getAllKeysIn.js';\nimport getTag from './_getTag.js';\nimport initCloneArray from './_initCloneArray.js';\nimport initCloneByTag from './_initCloneByTag.js';\nimport initCloneObject from './_initCloneObject.js';\nimport isArray from './isArray.js';\nimport isBuffer from './isBuffer.js';\nimport isMap from './isMap.js';\nimport isObject from './isObject.js';\nimport isSet from './isSet.js';\nimport keys from './keys.js';\nimport keysIn from './keysIn.js';\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_FLAT_FLAG = 2,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\ncloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\ncloneableTags[boolTag] = cloneableTags[dateTag] =\ncloneableTags[float32Tag] = cloneableTags[float64Tag] =\ncloneableTags[int8Tag] = cloneableTags[int16Tag] =\ncloneableTags[int32Tag] = cloneableTags[mapTag] =\ncloneableTags[numberTag] = cloneableTags[objectTag] =\ncloneableTags[regexpTag] = cloneableTags[setTag] =\ncloneableTags[stringTag] = cloneableTags[symbolTag] =\ncloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\ncloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\ncloneableTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n * traversed objects.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Deep clone\n *  2 - Flatten inherited properties\n *  4 - Clone symbols\n * @param {Function} [customizer] The function to customize cloning.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The parent object of `value`.\n * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, bitmask, customizer, key, object, stack) {\n  var result,\n      isDeep = bitmask & CLONE_DEEP_FLAG,\n      isFlat = bitmask & CLONE_FLAT_FLAG,\n      isFull = bitmask & CLONE_SYMBOLS_FLAG;\n\n  if (customizer) {\n    result = object ? customizer(value, key, object, stack) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return copyArray(value, result);\n    }\n  } else {\n    var tag = getTag(value),\n        isFunc = tag == funcTag || tag == genTag;\n\n    if (isBuffer(value)) {\n      return cloneBuffer(value, isDeep);\n    }\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n      result = (isFlat || isFunc) ? {} : initCloneObject(value);\n      if (!isDeep) {\n        return isFlat\n          ? copySymbolsIn(value, baseAssignIn(result, value))\n          : copySymbols(value, baseAssign(result, value));\n      }\n    } else {\n      if (!cloneableTags[tag]) {\n        return object ? value : {};\n      }\n      result = initCloneByTag(value, tag, isDeep);\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stack || (stack = new Stack);\n  var stacked = stack.get(value);\n  if (stacked) {\n    return stacked;\n  }\n  stack.set(value, result);\n\n  if (isSet(value)) {\n    value.forEach(function(subValue) {\n      result.add(baseClone(subValue, bitmask, customizer, subValue, value, stack));\n    });\n  } else if (isMap(value)) {\n    value.forEach(function(subValue, key) {\n      result.set(key, baseClone(subValue, bitmask, customizer, key, value, stack));\n    });\n  }\n\n  var keysFunc = isFull\n    ? (isFlat ? getAllKeysIn : getAllKeys)\n    : (isFlat ? keysIn : keys);\n\n  var props = isArr ? undefined : keysFunc(value);\n  arrayEach(props || value, function(subValue, key) {\n    if (props) {\n      key = subValue;\n      subValue = value[key];\n    }\n    // Recursively populate clone (susceptible to call stack limits).\n    assignValue(result, key, baseClone(subValue, bitmask, customizer, key, value, stack));\n  });\n  return result;\n}\n\nexport default baseClone;\n","import baseClone from './_baseClone.js';\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_SYMBOLS_FLAG = 4;\n\n/**\n * Creates a shallow clone of `value`.\n *\n * **Note:** This method is loosely based on the\n * [structured clone algorithm](https://mdn.io/Structured_clone_algorithm)\n * and supports cloning arrays, array buffers, booleans, date objects, maps,\n * numbers, `Object` objects, regexes, sets, strings, symbols, and typed\n * arrays. The own enumerable properties of `arguments` objects are cloned\n * as plain objects. An empty object is returned for uncloneable values such\n * as error objects, functions, DOM nodes, and WeakMaps.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to clone.\n * @returns {*} Returns the cloned value.\n * @see _.cloneDeep\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var shallow = _.clone(objects);\n * console.log(shallow[0] === objects[0]);\n * // => true\n */\nfunction clone(value) {\n  return baseClone(value, CLONE_SYMBOLS_FLAG);\n}\n\nexport default clone;\n","import baseClone from './_baseClone.js';\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/**\n * This method is like `_.clone` except that it recursively clones `value`.\n *\n * @static\n * @memberOf _\n * @since 1.0.0\n * @category Lang\n * @param {*} value The value to recursively clone.\n * @returns {*} Returns the deep cloned value.\n * @see _.clone\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var deep = _.cloneDeep(objects);\n * console.log(deep[0] === objects[0]);\n * // => false\n */\nfunction cloneDeep(value) {\n  return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG);\n}\n\nexport default cloneDeep;\n","import baseRest from './_baseRest.js';\nimport eq from './eq.js';\nimport isIterateeCall from './_isIterateeCall.js';\nimport keysIn from './keysIn.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns own and inherited enumerable string keyed properties of source\n * objects to the destination object for all destination properties that\n * resolve to `undefined`. Source objects are applied from left to right.\n * Once a property is set, additional values of the same property are ignored.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @see _.defaultsDeep\n * @example\n *\n * _.defaults({ 'a': 1 }, { 'b': 2 }, { 'a': 3 });\n * // => { 'a': 1, 'b': 2 }\n */\nvar defaults = baseRest(function(object, sources) {\n  object = Object(object);\n\n  var index = -1;\n  var length = sources.length;\n  var guard = length > 2 ? sources[2] : undefined;\n\n  if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n    length = 1;\n  }\n\n  while (++index < length) {\n    var source = sources[index];\n    var props = keysIn(source);\n    var propsIndex = -1;\n    var propsLength = props.length;\n\n    while (++propsIndex < propsLength) {\n      var key = props[propsIndex];\n      var value = object[key];\n\n      if (value === undefined ||\n          (eq(value, objectProto[key]) && !hasOwnProperty.call(object, key))) {\n        object[key] = source[key];\n      }\n    }\n  }\n\n  return object;\n});\n\nexport default defaults;\n","import baseMerge from './_baseMerge.js';\nimport isObject from './isObject.js';\n\n/**\n * Used by `_.defaultsDeep` to customize its `_.merge` use to merge source\n * objects into destination objects that are passed thru.\n *\n * @private\n * @param {*} objValue The destination value.\n * @param {*} srcValue The source value.\n * @param {string} key The key of the property to merge.\n * @param {Object} object The parent object of `objValue`.\n * @param {Object} source The parent object of `srcValue`.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n * @returns {*} Returns the value to assign.\n */\nfunction customDefaultsMerge(objValue, srcValue, key, object, source, stack) {\n  if (isObject(objValue) && isObject(srcValue)) {\n    // Recursively merge objects and arrays (susceptible to call stack limits).\n    stack.set(srcValue, objValue);\n    baseMerge(objValue, srcValue, undefined, customDefaultsMerge, stack);\n    stack['delete'](srcValue);\n  }\n  return objValue;\n}\n\nexport default customDefaultsMerge;\n","import baseMerge from './_baseMerge.js';\nimport createAssigner from './_createAssigner.js';\n\n/**\n * This method is like `_.merge` except that it accepts `customizer` which\n * is invoked to produce the merged values of the destination and source\n * properties. If `customizer` returns `undefined`, merging is handled by the\n * method instead. The `customizer` is invoked with six arguments:\n * (objValue, srcValue, key, object, source, stack).\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} sources The source objects.\n * @param {Function} customizer The function to customize assigned values.\n * @returns {Object} Returns `object`.\n * @example\n *\n * function customizer(objValue, srcValue) {\n *   if (_.isArray(objValue)) {\n *     return objValue.concat(srcValue);\n *   }\n * }\n *\n * var object = { 'a': [1], 'b': [2] };\n * var other = { 'a': [3], 'b': [4] };\n *\n * _.mergeWith(object, other, customizer);\n * // => { 'a': [1, 3], 'b': [2, 4] }\n */\nvar mergeWith = createAssigner(function(object, source, srcIndex, customizer) {\n  baseMerge(object, source, srcIndex, customizer);\n});\n\nexport default mergeWith;\n","import apply from './_apply.js';\nimport baseRest from './_baseRest.js';\nimport customDefaultsMerge from './_customDefaultsMerge.js';\nimport mergeWith from './mergeWith.js';\n\n/**\n * This method is like `_.defaults` except that it recursively assigns\n * default properties.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 3.10.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @see _.defaults\n * @example\n *\n * _.defaultsDeep({ 'a': { 'b': 2 } }, { 'a': { 'b': 1, 'c': 3 } });\n * // => { 'a': { 'b': 2, 'c': 3 } }\n */\nvar defaultsDeep = baseRest(function(args) {\n  args.push(undefined, customDefaultsMerge);\n  return apply(mergeWith, undefined, args);\n});\n\nexport default defaultsDeep;\n","/**\n * @see https://www.typescriptlang.org/docs/handbook/mixins.html\n */\nexport function applyMixins(derivedCtor, ...baseCtors) {\n    baseCtors.forEach((baseCtor) => {\n        Object.getOwnPropertyNames(baseCtor.prototype).forEach((name) => {\n            if (name !== 'constructor') {\n                Object.defineProperty(derivedCtor.prototype, name, Object.getOwnPropertyDescriptor(baseCtor.prototype, name));\n            }\n        });\n    });\n}\n//# sourceMappingURL=mixins.js.map","const extendStatics = Object.setPrototypeOf ||\n    ({ __proto__: [] } instanceof Array &&\n        function (d, b) {\n            d.__proto__ = b; // eslint-disable-line no-proto\n        }) ||\n    function (d, b) {\n        // eslint-disable-next-line no-restricted-syntax\n        for (const p in b) {\n            if (Object.prototype.hasOwnProperty.call(b, p)) {\n                d[p] = b[p];\n            }\n        }\n    };\n/**\n * @see https://github.com/microsoft/TypeScript/blob/5c85febb0ce9d6088cbe9b09cb42f73f9ee8ea05/src/compiler/transformers/es2015.ts#L4309\n */\n// eslint-disable-next-line\nexport function inherit(cls, base) {\n    extendStatics(cls, base);\n    function tmp() {\n        this.constructor = cls;\n    }\n    cls.prototype =\n        base === null\n            ? Object.create(base)\n            : ((tmp.prototype = base.prototype), new tmp());\n}\nclass A {\n}\nconst isNativeClass = /^\\s*class\\s+/.test(`${A}`) || /^\\s*class\\s*\\{/.test(`${class {\n}}`);\n/**\n * Extends class with specified class name.\n */\nexport function createClass(className, base) {\n    let cls;\n    if (isNativeClass) {\n        cls = class extends base {\n        };\n    }\n    else {\n        cls = function () {\n            return base.apply(this, arguments); // eslint-disable-line\n        };\n        inherit(cls, base);\n    }\n    Object.defineProperty(cls, 'name', { value: className });\n    return cls;\n}\n//# sourceMappingURL=inherit.js.map","export { has, pick, merge, isEqual, isEmpty, isObject, isPlainObject, clone, cloneDeep, defaults, defaultsDeep, } from 'lodash-es';\nexport * from './mixins';\nexport * from './inherit';\nexport function ensure(value, defaultValue) {\n    return value != null ? value : defaultValue;\n}\nexport function getValue(obj, key, defaultValue) {\n    const value = obj != null ? obj[key] : null;\n    return defaultValue !== undefined ? ensure(value, defaultValue) : value;\n}\nexport function getNumber(obj, key, defaultValue) {\n    let value = obj != null ? obj[key] : null;\n    if (value == null) {\n        return defaultValue;\n    }\n    value = +value;\n    if (Number.isNaN(value) || !Number.isFinite(value)) {\n        return defaultValue;\n    }\n    return value;\n}\nexport function getBoolean(obj, key, defaultValue) {\n    const value = obj != null ? obj[key] : null;\n    if (value == null) {\n        return defaultValue;\n    }\n    return !!value;\n}\nexport function isMaliciousProp(prop) {\n    return prop === '__proto__';\n}\nexport function getByPath(obj, path, delimiter = '/') {\n    let ret;\n    const keys = Array.isArray(path) ? path : path.split(delimiter);\n    if (keys.length) {\n        ret = obj;\n        while (keys.length) {\n            const key = keys.shift();\n            if (Object(ret) === ret && key && key in ret) {\n                ret = ret[key];\n            }\n            else {\n                return undefined;\n            }\n        }\n    }\n    return ret;\n}\nexport function setByPath(obj, path, value, delimiter = '/') {\n    const keys = Array.isArray(path) ? path : path.split(delimiter);\n    const lastKey = keys.pop();\n    if (lastKey && !isMaliciousProp(lastKey)) {\n        let diver = obj;\n        keys.forEach((key) => {\n            if (!isMaliciousProp(key)) {\n                if (diver[key] == null) {\n                    diver[key] = {};\n                }\n                diver = diver[key];\n            }\n        });\n        diver[lastKey] = value;\n    }\n    return obj;\n}\nexport function unsetByPath(obj, path, delimiter = '/') {\n    const keys = Array.isArray(path) ? path.slice() : path.split(delimiter);\n    const propertyToRemove = keys.pop();\n    if (propertyToRemove) {\n        if (keys.length > 0) {\n            const parent = getByPath(obj, keys);\n            if (parent) {\n                delete parent[propertyToRemove];\n            }\n        }\n        else {\n            delete obj[propertyToRemove];\n        }\n    }\n    return obj;\n}\n// eslint-disable-next-line default-param-last\nexport function flatten(obj, delim = '/', stop) {\n    const ret = {};\n    Object.keys(obj).forEach((key) => {\n        const val = obj[key];\n        let deep = typeof val === 'object' || Array.isArray(val);\n        if (deep && stop && stop(val)) {\n            deep = false;\n        }\n        if (deep) {\n            const flatObject = flatten(val, delim, stop);\n            Object.keys(flatObject).forEach((flatKey) => {\n                ret[key + delim + flatKey] = flatObject[flatKey];\n            });\n        }\n        else {\n            ret[key] = val;\n        }\n    });\n    // eslint-disable-next-line no-restricted-syntax\n    for (const key in obj) {\n        if (!Object.prototype.hasOwnProperty.call(obj, key)) {\n            continue;\n        }\n    }\n    return ret;\n}\n//# sourceMappingURL=object.js.map","import { Events } from '../event';\nimport { ObjectExt } from '../object';\nimport { Disposable } from './disposable';\nexport class Basecoat extends Events {\n}\n(function (Basecoat) {\n    Basecoat.dispose = Disposable.dispose;\n})(Basecoat || (Basecoat = {}));\nObjectExt.applyMixins(Basecoat, Disposable);\n//# sourceMappingURL=basecoat.js.map","/**\n * The base implementation of `_.findIndex` and `_.findLastIndex` without\n * support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} predicate The function invoked per iteration.\n * @param {number} fromIndex The index to search from.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseFindIndex(array, predicate, fromIndex, fromRight) {\n  var length = array.length,\n      index = fromIndex + (fromRight ? 1 : -1);\n\n  while ((fromRight ? index-- : ++index < length)) {\n    if (predicate(array[index], index, array)) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nexport default baseFindIndex;\n","/**\n * The base implementation of `_.isNaN` without support for number objects.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.\n */\nfunction baseIsNaN(value) {\n  return value !== value;\n}\n\nexport default baseIsNaN;\n","/**\n * A specialized version of `_.indexOf` which performs strict equality\n * comparisons of values, i.e. `===`.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction strictIndexOf(array, value, fromIndex) {\n  var index = fromIndex - 1,\n      length = array.length;\n\n  while (++index < length) {\n    if (array[index] === value) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nexport default strictIndexOf;\n","import baseFindIndex from './_baseFindIndex.js';\nimport baseIsNaN from './_baseIsNaN.js';\nimport strictIndexOf from './_strictIndexOf.js';\n\n/**\n * The base implementation of `_.indexOf` without `fromIndex` bounds checks.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseIndexOf(array, value, fromIndex) {\n  return value === value\n    ? strictIndexOf(array, value, fromIndex)\n    : baseFindIndex(array, baseIsNaN, fromIndex);\n}\n\nexport default baseIndexOf;\n","import baseIndexOf from './_baseIndexOf.js';\n\n/**\n * A specialized version of `_.includes` for arrays without support for\n * specifying an index to search from.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludes(array, value) {\n  var length = array == null ? 0 : array.length;\n  return !!length && baseIndexOf(array, value, 0) > -1;\n}\n\nexport default arrayIncludes;\n","/**\n * This function is like `arrayIncludes` except that it accepts a comparator.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @param {Function} comparator The comparator invoked per element.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludesWith(array, value, comparator) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (comparator(value, array[index])) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport default arrayIncludesWith;\n","/**\n * This method returns `undefined`.\n *\n * @static\n * @memberOf _\n * @since 2.3.0\n * @category Util\n * @example\n *\n * _.times(2, _.noop);\n * // => [undefined, undefined]\n */\nfunction noop() {\n  // No operation performed.\n}\n\nexport default noop;\n","import Set from './_Set.js';\nimport noop from './noop.js';\nimport setToArray from './_setToArray.js';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Creates a set object of `values`.\n *\n * @private\n * @param {Array} values The values to add to the set.\n * @returns {Object} Returns the new set.\n */\nvar createSet = !(Set && (1 / setToArray(new Set([,-0]))[1]) == INFINITY) ? noop : function(values) {\n  return new Set(values);\n};\n\nexport default createSet;\n","import SetCache from './_SetCache.js';\nimport arrayIncludes from './_arrayIncludes.js';\nimport arrayIncludesWith from './_arrayIncludesWith.js';\nimport cacheHas from './_cacheHas.js';\nimport createSet from './_createSet.js';\nimport setToArray from './_setToArray.js';\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * The base implementation of `_.uniqBy` without support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new duplicate free array.\n */\nfunction baseUniq(array, iteratee, comparator) {\n  var index = -1,\n      includes = arrayIncludes,\n      length = array.length,\n      isCommon = true,\n      result = [],\n      seen = result;\n\n  if (comparator) {\n    isCommon = false;\n    includes = arrayIncludesWith;\n  }\n  else if (length >= LARGE_ARRAY_SIZE) {\n    var set = iteratee ? null : createSet(array);\n    if (set) {\n      return setToArray(set);\n    }\n    isCommon = false;\n    includes = cacheHas;\n    seen = new SetCache;\n  }\n  else {\n    seen = iteratee ? [] : result;\n  }\n  outer:\n  while (++index < length) {\n    var value = array[index],\n        computed = iteratee ? iteratee(value) : value;\n\n    value = (comparator || value !== 0) ? value : 0;\n    if (isCommon && computed === computed) {\n      var seenIndex = seen.length;\n      while (seenIndex--) {\n        if (seen[seenIndex] === computed) {\n          continue outer;\n        }\n      }\n      if (iteratee) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n    else if (!includes(seen, computed, comparator)) {\n      if (seen !== result) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n  }\n  return result;\n}\n\nexport default baseUniq;\n","import baseUniq from './_baseUniq.js';\n\n/**\n * Creates a duplicate-free version of an array, using\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons, in which only the first occurrence of each element\n * is kept. The order of result values is determined by the order they occur\n * in the array.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @returns {Array} Returns the new duplicate free array.\n * @example\n *\n * _.uniq([2, 1, 2]);\n * // => [2, 1]\n */\nfunction uniq(array) {\n  return (array && array.length) ? baseUniq(array) : [];\n}\n\nexport default uniq;\n","import baseFlatten from './_baseFlatten.js';\nimport baseRest from './_baseRest.js';\nimport baseUniq from './_baseUniq.js';\nimport isArrayLikeObject from './isArrayLikeObject.js';\n\n/**\n * Creates an array of unique values, in order, from all given arrays using\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {...Array} [arrays] The arrays to inspect.\n * @returns {Array} Returns the new array of combined values.\n * @example\n *\n * _.union([2], [1, 2]);\n * // => [2, 1]\n */\nvar union = baseRest(function(arrays) {\n  return baseUniq(baseFlatten(arrays, 1, isArrayLikeObject, true));\n});\n\nexport default union;\n","import isSymbol from './isSymbol.js';\n\n/** Used as references for the maximum length and index of an array. */\nvar MAX_ARRAY_LENGTH = 4294967295,\n    MAX_ARRAY_INDEX = MAX_ARRAY_LENGTH - 1;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeFloor = Math.floor,\n    nativeMin = Math.min;\n\n/**\n * The base implementation of `_.sortedIndexBy` and `_.sortedLastIndexBy`\n * which invokes `iteratee` for `value` and each element of `array` to compute\n * their sort ranking. The iteratee is invoked with one argument; (value).\n *\n * @private\n * @param {Array} array The sorted array to inspect.\n * @param {*} value The value to evaluate.\n * @param {Function} iteratee The iteratee invoked per element.\n * @param {boolean} [retHighest] Specify returning the highest qualified index.\n * @returns {number} Returns the index at which `value` should be inserted\n *  into `array`.\n */\nfunction baseSortedIndexBy(array, value, iteratee, retHighest) {\n  var low = 0,\n      high = array == null ? 0 : array.length;\n  if (high === 0) {\n    return 0;\n  }\n\n  value = iteratee(value);\n  var valIsNaN = value !== value,\n      valIsNull = value === null,\n      valIsSymbol = isSymbol(value),\n      valIsUndefined = value === undefined;\n\n  while (low < high) {\n    var mid = nativeFloor((low + high) / 2),\n        computed = iteratee(array[mid]),\n        othIsDefined = computed !== undefined,\n        othIsNull = computed === null,\n        othIsReflexive = computed === computed,\n        othIsSymbol = isSymbol(computed);\n\n    if (valIsNaN) {\n      var setLow = retHighest || othIsReflexive;\n    } else if (valIsUndefined) {\n      setLow = othIsReflexive && (retHighest || othIsDefined);\n    } else if (valIsNull) {\n      setLow = othIsReflexive && othIsDefined && (retHighest || !othIsNull);\n    } else if (valIsSymbol) {\n      setLow = othIsReflexive && othIsDefined && !othIsNull && (retHighest || !othIsSymbol);\n    } else if (othIsNull || othIsSymbol) {\n      setLow = false;\n    } else {\n      setLow = retHighest ? (computed <= value) : (computed < value);\n    }\n    if (setLow) {\n      low = mid + 1;\n    } else {\n      high = mid;\n    }\n  }\n  return nativeMin(high, MAX_ARRAY_INDEX);\n}\n\nexport default baseSortedIndexBy;\n","import baseSortedIndexBy from './_baseSortedIndexBy.js';\nimport identity from './identity.js';\nimport isSymbol from './isSymbol.js';\n\n/** Used as references for the maximum length and index of an array. */\nvar MAX_ARRAY_LENGTH = 4294967295,\n    HALF_MAX_ARRAY_LENGTH = MAX_ARRAY_LENGTH >>> 1;\n\n/**\n * The base implementation of `_.sortedIndex` and `_.sortedLastIndex` which\n * performs a binary search of `array` to determine the index at which `value`\n * should be inserted into `array` in order to maintain its sort order.\n *\n * @private\n * @param {Array} array The sorted array to inspect.\n * @param {*} value The value to evaluate.\n * @param {boolean} [retHighest] Specify returning the highest qualified index.\n * @returns {number} Returns the index at which `value` should be inserted\n *  into `array`.\n */\nfunction baseSortedIndex(array, value, retHighest) {\n  var low = 0,\n      high = array == null ? low : array.length;\n\n  if (typeof value == 'number' && value === value && high <= HALF_MAX_ARRAY_LENGTH) {\n    while (low < high) {\n      var mid = (low + high) >>> 1,\n          computed = array[mid];\n\n      if (computed !== null && !isSymbol(computed) &&\n          (retHighest ? (computed <= value) : (computed < value))) {\n        low = mid + 1;\n      } else {\n        high = mid;\n      }\n    }\n    return high;\n  }\n  return baseSortedIndexBy(array, value, identity, retHighest);\n}\n\nexport default baseSortedIndex;\n","import baseSortedIndex from './_baseSortedIndex.js';\n\n/**\n * Uses a binary search to determine the lowest index at which `value`\n * should be inserted into `array` in order to maintain its sort order.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The sorted array to inspect.\n * @param {*} value The value to evaluate.\n * @returns {number} Returns the index at which `value` should be inserted\n *  into `array`.\n * @example\n *\n * _.sortedIndex([30, 50], 40);\n * // => 1\n */\nfunction sortedIndex(array, value) {\n  return baseSortedIndex(array, value);\n}\n\nexport default sortedIndex;\n","import Stack from './_Stack.js';\nimport baseIsEqual from './_baseIsEqual.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * The base implementation of `_.isMatch` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to inspect.\n * @param {Object} source The object of property values to match.\n * @param {Array} matchData The property names, values, and compare flags to match.\n * @param {Function} [customizer] The function to customize comparisons.\n * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n */\nfunction baseIsMatch(object, source, matchData, customizer) {\n  var index = matchData.length,\n      length = index,\n      noCustomizer = !customizer;\n\n  if (object == null) {\n    return !length;\n  }\n  object = Object(object);\n  while (index--) {\n    var data = matchData[index];\n    if ((noCustomizer && data[2])\n          ? data[1] !== object[data[0]]\n          : !(data[0] in object)\n        ) {\n      return false;\n    }\n  }\n  while (++index < length) {\n    data = matchData[index];\n    var key = data[0],\n        objValue = object[key],\n        srcValue = data[1];\n\n    if (noCustomizer && data[2]) {\n      if (objValue === undefined && !(key in object)) {\n        return false;\n      }\n    } else {\n      var stack = new Stack;\n      if (customizer) {\n        var result = customizer(objValue, srcValue, key, object, source, stack);\n      }\n      if (!(result === undefined\n            ? baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG, customizer, stack)\n            : result\n          )) {\n        return false;\n      }\n    }\n  }\n  return true;\n}\n\nexport default baseIsMatch;\n","import isObject from './isObject.js';\n\n/**\n * Checks if `value` is suitable for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` if suitable for strict\n *  equality comparisons, else `false`.\n */\nfunction isStrictComparable(value) {\n  return value === value && !isObject(value);\n}\n\nexport default isStrictComparable;\n","import isStrictComparable from './_isStrictComparable.js';\nimport keys from './keys.js';\n\n/**\n * Gets the property names, values, and compare flags of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the match data of `object`.\n */\nfunction getMatchData(object) {\n  var result = keys(object),\n      length = result.length;\n\n  while (length--) {\n    var key = result[length],\n        value = object[key];\n\n    result[length] = [key, value, isStrictComparable(value)];\n  }\n  return result;\n}\n\nexport default getMatchData;\n","/**\n * A specialized version of `matchesProperty` for source values suitable\n * for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction matchesStrictComparable(key, srcValue) {\n  return function(object) {\n    if (object == null) {\n      return false;\n    }\n    return object[key] === srcValue &&\n      (srcValue !== undefined || (key in Object(object)));\n  };\n}\n\nexport default matchesStrictComparable;\n","import baseIsMatch from './_baseIsMatch.js';\nimport getMatchData from './_getMatchData.js';\nimport matchesStrictComparable from './_matchesStrictComparable.js';\n\n/**\n * The base implementation of `_.matches` which doesn't clone `source`.\n *\n * @private\n * @param {Object} source The object of property values to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatches(source) {\n  var matchData = getMatchData(source);\n  if (matchData.length == 1 && matchData[0][2]) {\n    return matchesStrictComparable(matchData[0][0], matchData[0][1]);\n  }\n  return function(object) {\n    return object === source || baseIsMatch(object, source, matchData);\n  };\n}\n\nexport default baseMatches;\n","import baseGet from './_baseGet.js';\n\n/**\n * Gets the value at `path` of `object`. If the resolved value is\n * `undefined`, the `defaultValue` is returned in its place.\n *\n * @static\n * @memberOf _\n * @since 3.7.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n * @returns {*} Returns the resolved value.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.get(object, 'a[0].b.c');\n * // => 3\n *\n * _.get(object, ['a', '0', 'b', 'c']);\n * // => 3\n *\n * _.get(object, 'a.b.c', 'default');\n * // => 'default'\n */\nfunction get(object, path, defaultValue) {\n  var result = object == null ? undefined : baseGet(object, path);\n  return result === undefined ? defaultValue : result;\n}\n\nexport default get;\n","import baseIsEqual from './_baseIsEqual.js';\nimport get from './get.js';\nimport hasIn from './hasIn.js';\nimport isKey from './_isKey.js';\nimport isStrictComparable from './_isStrictComparable.js';\nimport matchesStrictComparable from './_matchesStrictComparable.js';\nimport toKey from './_toKey.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * The base implementation of `_.matchesProperty` which doesn't clone `srcValue`.\n *\n * @private\n * @param {string} path The path of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatchesProperty(path, srcValue) {\n  if (isKey(path) && isStrictComparable(srcValue)) {\n    return matchesStrictComparable(toKey(path), srcValue);\n  }\n  return function(object) {\n    var objValue = get(object, path);\n    return (objValue === undefined && objValue === srcValue)\n      ? hasIn(object, path)\n      : baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG);\n  };\n}\n\nexport default baseMatchesProperty;\n","/**\n * The base implementation of `_.property` without support for deep paths.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction baseProperty(key) {\n  return function(object) {\n    return object == null ? undefined : object[key];\n  };\n}\n\nexport default baseProperty;\n","import baseGet from './_baseGet.js';\n\n/**\n * A specialized version of `baseProperty` which supports deep paths.\n *\n * @private\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction basePropertyDeep(path) {\n  return function(object) {\n    return baseGet(object, path);\n  };\n}\n\nexport default basePropertyDeep;\n","import baseProperty from './_baseProperty.js';\nimport basePropertyDeep from './_basePropertyDeep.js';\nimport isKey from './_isKey.js';\nimport toKey from './_toKey.js';\n\n/**\n * Creates a function that returns the value at `path` of a given object.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n * @example\n *\n * var objects = [\n *   { 'a': { 'b': 2 } },\n *   { 'a': { 'b': 1 } }\n * ];\n *\n * _.map(objects, _.property('a.b'));\n * // => [2, 1]\n *\n * _.map(_.sortBy(objects, _.property(['a', 'b'])), 'a.b');\n * // => [1, 2]\n */\nfunction property(path) {\n  return isKey(path) ? baseProperty(toKey(path)) : basePropertyDeep(path);\n}\n\nexport default property;\n","import baseMatches from './_baseMatches.js';\nimport baseMatchesProperty from './_baseMatchesProperty.js';\nimport identity from './identity.js';\nimport isArray from './isArray.js';\nimport property from './property.js';\n\n/**\n * The base implementation of `_.iteratee`.\n *\n * @private\n * @param {*} [value=_.identity] The value to convert to an iteratee.\n * @returns {Function} Returns the iteratee.\n */\nfunction baseIteratee(value) {\n  // Don't store the `typeof` result in a variable to avoid a JIT bug in Safari 9.\n  // See https://bugs.webkit.org/show_bug.cgi?id=156034 for more details.\n  if (typeof value == 'function') {\n    return value;\n  }\n  if (value == null) {\n    return identity;\n  }\n  if (typeof value == 'object') {\n    return isArray(value)\n      ? baseMatchesProperty(value[0], value[1])\n      : baseMatches(value);\n  }\n  return property(value);\n}\n\nexport default baseIteratee;\n","import baseIteratee from './_baseIteratee.js';\nimport baseSortedIndexBy from './_baseSortedIndexBy.js';\n\n/**\n * This method is like `_.sortedIndex` except that it accepts `iteratee`\n * which is invoked for `value` and each element of `array` to compute their\n * sort ranking. The iteratee is invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Array\n * @param {Array} array The sorted array to inspect.\n * @param {*} value The value to evaluate.\n * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n * @returns {number} Returns the index at which `value` should be inserted\n *  into `array`.\n * @example\n *\n * var objects = [{ 'x': 4 }, { 'x': 5 }];\n *\n * _.sortedIndexBy(objects, { 'x': 4 }, function(o) { return o.x; });\n * // => 0\n *\n * // The `_.property` iteratee shorthand.\n * _.sortedIndexBy(objects, { 'x': 4 }, 'x');\n * // => 0\n */\nfunction sortedIndexBy(array, value, iteratee) {\n  return baseSortedIndexBy(array, value, baseIteratee(iteratee, 2));\n}\n\nexport default sortedIndexBy;\n","import baseEach from './_baseEach.js';\nimport isArrayLike from './isArrayLike.js';\n\n/**\n * The base implementation of `_.map` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction baseMap(collection, iteratee) {\n  var index = -1,\n      result = isArrayLike(collection) ? Array(collection.length) : [];\n\n  baseEach(collection, function(value, key, collection) {\n    result[++index] = iteratee(value, key, collection);\n  });\n  return result;\n}\n\nexport default baseMap;\n","/**\n * The base implementation of `_.sortBy` which uses `comparer` to define the\n * sort order of `array` and replaces criteria objects with their corresponding\n * values.\n *\n * @private\n * @param {Array} array The array to sort.\n * @param {Function} comparer The function to define sort order.\n * @returns {Array} Returns `array`.\n */\nfunction baseSortBy(array, comparer) {\n  var length = array.length;\n\n  array.sort(comparer);\n  while (length--) {\n    array[length] = array[length].value;\n  }\n  return array;\n}\n\nexport default baseSortBy;\n","import isSymbol from './isSymbol.js';\n\n/**\n * Compares values to sort them in ascending order.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {number} Returns the sort order indicator for `value`.\n */\nfunction compareAscending(value, other) {\n  if (value !== other) {\n    var valIsDefined = value !== undefined,\n        valIsNull = value === null,\n        valIsReflexive = value === value,\n        valIsSymbol = isSymbol(value);\n\n    var othIsDefined = other !== undefined,\n        othIsNull = other === null,\n        othIsReflexive = other === other,\n        othIsSymbol = isSymbol(other);\n\n    if ((!othIsNull && !othIsSymbol && !valIsSymbol && value > other) ||\n        (valIsSymbol && othIsDefined && othIsReflexive && !othIsNull && !othIsSymbol) ||\n        (valIsNull && othIsDefined && othIsReflexive) ||\n        (!valIsDefined && othIsReflexive) ||\n        !valIsReflexive) {\n      return 1;\n    }\n    if ((!valIsNull && !valIsSymbol && !othIsSymbol && value < other) ||\n        (othIsSymbol && valIsDefined && valIsReflexive && !valIsNull && !valIsSymbol) ||\n        (othIsNull && valIsDefined && valIsReflexive) ||\n        (!othIsDefined && valIsReflexive) ||\n        !othIsReflexive) {\n      return -1;\n    }\n  }\n  return 0;\n}\n\nexport default compareAscending;\n","import compareAscending from './_compareAscending.js';\n\n/**\n * Used by `_.orderBy` to compare multiple properties of a value to another\n * and stable sort them.\n *\n * If `orders` is unspecified, all values are sorted in ascending order. Otherwise,\n * specify an order of \"desc\" for descending or \"asc\" for ascending sort order\n * of corresponding values.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {boolean[]|string[]} orders The order to sort by for each property.\n * @returns {number} Returns the sort order indicator for `object`.\n */\nfunction compareMultiple(object, other, orders) {\n  var index = -1,\n      objCriteria = object.criteria,\n      othCriteria = other.criteria,\n      length = objCriteria.length,\n      ordersLength = orders.length;\n\n  while (++index < length) {\n    var result = compareAscending(objCriteria[index], othCriteria[index]);\n    if (result) {\n      if (index >= ordersLength) {\n        return result;\n      }\n      var order = orders[index];\n      return result * (order == 'desc' ? -1 : 1);\n    }\n  }\n  // Fixes an `Array#sort` bug in the JS engine embedded in Adobe applications\n  // that causes it, under certain circumstances, to provide the same value for\n  // `object` and `other`. See https://github.com/jashkenas/underscore/pull/1247\n  // for more details.\n  //\n  // This also ensures a stable sort in V8 and other engines.\n  // See https://bugs.chromium.org/p/v8/issues/detail?id=90 for more details.\n  return object.index - other.index;\n}\n\nexport default compareMultiple;\n","import arrayMap from './_arrayMap.js';\nimport baseGet from './_baseGet.js';\nimport baseIteratee from './_baseIteratee.js';\nimport baseMap from './_baseMap.js';\nimport baseSortBy from './_baseSortBy.js';\nimport baseUnary from './_baseUnary.js';\nimport compareMultiple from './_compareMultiple.js';\nimport identity from './identity.js';\nimport isArray from './isArray.js';\n\n/**\n * The base implementation of `_.orderBy` without param guards.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function[]|Object[]|string[]} iteratees The iteratees to sort by.\n * @param {string[]} orders The sort orders of `iteratees`.\n * @returns {Array} Returns the new sorted array.\n */\nfunction baseOrderBy(collection, iteratees, orders) {\n  if (iteratees.length) {\n    iteratees = arrayMap(iteratees, function(iteratee) {\n      if (isArray(iteratee)) {\n        return function(value) {\n          return baseGet(value, iteratee.length === 1 ? iteratee[0] : iteratee);\n        }\n      }\n      return iteratee;\n    });\n  } else {\n    iteratees = [identity];\n  }\n\n  var index = -1;\n  iteratees = arrayMap(iteratees, baseUnary(baseIteratee));\n\n  var result = baseMap(collection, function(value, key, collection) {\n    var criteria = arrayMap(iteratees, function(iteratee) {\n      return iteratee(value);\n    });\n    return { 'criteria': criteria, 'index': ++index, 'value': value };\n  });\n\n  return baseSortBy(result, function(object, other) {\n    return compareMultiple(object, other, orders);\n  });\n}\n\nexport default baseOrderBy;\n","import baseFlatten from './_baseFlatten.js';\nimport baseOrderBy from './_baseOrderBy.js';\nimport baseRest from './_baseRest.js';\nimport isIterateeCall from './_isIterateeCall.js';\n\n/**\n * Creates an array of elements, sorted in ascending order by the results of\n * running each element in a collection thru each iteratee. This method\n * performs a stable sort, that is, it preserves the original sort order of\n * equal elements. The iteratees are invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {...(Function|Function[])} [iteratees=[_.identity]]\n *  The iteratees to sort by.\n * @returns {Array} Returns the new sorted array.\n * @example\n *\n * var users = [\n *   { 'user': 'fred',   'age': 48 },\n *   { 'user': 'barney', 'age': 36 },\n *   { 'user': 'fred',   'age': 30 },\n *   { 'user': 'barney', 'age': 34 }\n * ];\n *\n * _.sortBy(users, [function(o) { return o.user; }]);\n * // => objects for [['barney', 36], ['barney', 34], ['fred', 48], ['fred', 30]]\n *\n * _.sortBy(users, ['user', 'age']);\n * // => objects for [['barney', 34], ['barney', 36], ['fred', 30], ['fred', 48]]\n */\nvar sortBy = baseRest(function(collection, iteratees) {\n  if (collection == null) {\n    return [];\n  }\n  var length = iteratees.length;\n  if (length > 1 && isIterateeCall(collection, iteratees[0], iteratees[1])) {\n    iteratees = [];\n  } else if (length > 2 && isIterateeCall(iteratees[0], iteratees[1], iteratees[2])) {\n    iteratees = [iteratees[0]];\n  }\n  return baseOrderBy(collection, baseFlatten(iteratees, 1), []);\n});\n\nexport default sortBy;\n","/**\n * A specialized version of `baseAggregator` for arrays.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} setter The function to set `accumulator` values.\n * @param {Function} iteratee The iteratee to transform keys.\n * @param {Object} accumulator The initial aggregated object.\n * @returns {Function} Returns `accumulator`.\n */\nfunction arrayAggregator(array, setter, iteratee, accumulator) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    var value = array[index];\n    setter(accumulator, value, iteratee(value), array);\n  }\n  return accumulator;\n}\n\nexport default arrayAggregator;\n","import baseEach from './_baseEach.js';\n\n/**\n * Aggregates elements of `collection` on `accumulator` with keys transformed\n * by `iteratee` and values set by `setter`.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} setter The function to set `accumulator` values.\n * @param {Function} iteratee The iteratee to transform keys.\n * @param {Object} accumulator The initial aggregated object.\n * @returns {Function} Returns `accumulator`.\n */\nfunction baseAggregator(collection, setter, iteratee, accumulator) {\n  baseEach(collection, function(value, key, collection) {\n    setter(accumulator, value, iteratee(value), collection);\n  });\n  return accumulator;\n}\n\nexport default baseAggregator;\n","import arrayAggregator from './_arrayAggregator.js';\nimport baseAggregator from './_baseAggregator.js';\nimport baseIteratee from './_baseIteratee.js';\nimport isArray from './isArray.js';\n\n/**\n * Creates a function like `_.groupBy`.\n *\n * @private\n * @param {Function} setter The function to set accumulator values.\n * @param {Function} [initializer] The accumulator object initializer.\n * @returns {Function} Returns the new aggregator function.\n */\nfunction createAggregator(setter, initializer) {\n  return function(collection, iteratee) {\n    var func = isArray(collection) ? arrayAggregator : baseAggregator,\n        accumulator = initializer ? initializer() : {};\n\n    return func(collection, setter, baseIteratee(iteratee, 2), accumulator);\n  };\n}\n\nexport default createAggregator;\n","import baseAssignValue from './_baseAssignValue.js';\nimport createAggregator from './_createAggregator.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an object composed of keys generated from the results of running\n * each element of `collection` thru `iteratee`. The order of grouped values\n * is determined by the order they occur in `collection`. The corresponding\n * value of each key is an array of elements responsible for generating the\n * key. The iteratee is invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The iteratee to transform keys.\n * @returns {Object} Returns the composed aggregate object.\n * @example\n *\n * _.groupBy([6.1, 4.2, 6.3], Math.floor);\n * // => { '4': [4.2], '6': [6.1, 6.3] }\n *\n * // The `_.property` iteratee shorthand.\n * _.groupBy(['one', 'two', 'three'], 'length');\n * // => { '3': ['one', 'two'], '5': ['three'] }\n */\nvar groupBy = createAggregator(function(result, value, key) {\n  if (hasOwnProperty.call(result, key)) {\n    result[key].push(value);\n  } else {\n    baseAssignValue(result, key, [value]);\n  }\n});\n\nexport default groupBy;\n","import SetCache from './_SetCache.js';\nimport arrayIncludes from './_arrayIncludes.js';\nimport arrayIncludesWith from './_arrayIncludesWith.js';\nimport arrayMap from './_arrayMap.js';\nimport baseUnary from './_baseUnary.js';\nimport cacheHas from './_cacheHas.js';\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * The base implementation of methods like `_.difference` without support\n * for excluding multiple arrays or iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Array} values The values to exclude.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new array of filtered values.\n */\nfunction baseDifference(array, values, iteratee, comparator) {\n  var index = -1,\n      includes = arrayIncludes,\n      isCommon = true,\n      length = array.length,\n      result = [],\n      valuesLength = values.length;\n\n  if (!length) {\n    return result;\n  }\n  if (iteratee) {\n    values = arrayMap(values, baseUnary(iteratee));\n  }\n  if (comparator) {\n    includes = arrayIncludesWith;\n    isCommon = false;\n  }\n  else if (values.length >= LARGE_ARRAY_SIZE) {\n    includes = cacheHas;\n    isCommon = false;\n    values = new SetCache(values);\n  }\n  outer:\n  while (++index < length) {\n    var value = array[index],\n        computed = iteratee == null ? value : iteratee(value);\n\n    value = (comparator || value !== 0) ? value : 0;\n    if (isCommon && computed === computed) {\n      var valuesIndex = valuesLength;\n      while (valuesIndex--) {\n        if (values[valuesIndex] === computed) {\n          continue outer;\n        }\n      }\n      result.push(value);\n    }\n    else if (!includes(values, computed, comparator)) {\n      result.push(value);\n    }\n  }\n  return result;\n}\n\nexport default baseDifference;\n","import baseDifference from './_baseDifference.js';\nimport baseFlatten from './_baseFlatten.js';\nimport baseRest from './_baseRest.js';\nimport isArrayLikeObject from './isArrayLikeObject.js';\n\n/**\n * Creates an array of `array` values not included in the other given arrays\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons. The order and references of result values are\n * determined by the first array.\n *\n * **Note:** Unlike `_.pullAll`, this method returns a new array.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @param {...Array} [values] The values to exclude.\n * @returns {Array} Returns the new array of filtered values.\n * @see _.without, _.xor\n * @example\n *\n * _.difference([2, 1], [2, 3]);\n * // => [1]\n */\nvar difference = baseRest(function(array, values) {\n  return isArrayLikeObject(array)\n    ? baseDifference(array, baseFlatten(values, 1, isArrayLikeObject, true))\n    : [];\n});\n\nexport default difference;\n","import isSymbol from './isSymbol.js';\n\n/**\n * The base implementation of methods like `_.max` and `_.min` which accepts a\n * `comparator` to determine the extremum value.\n *\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} iteratee The iteratee invoked per iteration.\n * @param {Function} comparator The comparator used to compare values.\n * @returns {*} Returns the extremum value.\n */\nfunction baseExtremum(array, iteratee, comparator) {\n  var index = -1,\n      length = array.length;\n\n  while (++index < length) {\n    var value = array[index],\n        current = iteratee(value);\n\n    if (current != null && (computed === undefined\n          ? (current === current && !isSymbol(current))\n          : comparator(current, computed)\n        )) {\n      var computed = current,\n          result = value;\n    }\n  }\n  return result;\n}\n\nexport default baseExtremum;\n","/**\n * The base implementation of `_.gt` which doesn't coerce arguments.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if `value` is greater than `other`,\n *  else `false`.\n */\nfunction baseGt(value, other) {\n  return value > other;\n}\n\nexport default baseGt;\n","import baseExtremum from './_baseExtremum.js';\nimport baseGt from './_baseGt.js';\nimport identity from './identity.js';\n\n/**\n * Computes the maximum value of `array`. If `array` is empty or falsey,\n * `undefined` is returned.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Math\n * @param {Array} array The array to iterate over.\n * @returns {*} Returns the maximum value.\n * @example\n *\n * _.max([4, 2, 8, 6]);\n * // => 8\n *\n * _.max([]);\n * // => undefined\n */\nfunction max(array) {\n  return (array && array.length)\n    ? baseExtremum(array, identity, baseGt)\n    : undefined;\n}\n\nexport default max;\n","import toString from './toString.js';\n\n/** Used to generate unique IDs. */\nvar idCounter = 0;\n\n/**\n * Generates a unique ID. If `prefix` is given, the ID is appended to it.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {string} [prefix=''] The value to prefix the ID with.\n * @returns {string} Returns the unique ID.\n * @example\n *\n * _.uniqueId('contact_');\n * // => 'contact_104'\n *\n * _.uniqueId();\n * // => '105'\n */\nfunction uniqueId(prefix) {\n  var id = ++idCounter;\n  return toString(prefix) + id;\n}\n\nexport default uniqueId;\n","/**\n * A specialized version of `_.reduce` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {*} [accumulator] The initial value.\n * @param {boolean} [initAccum] Specify using the first element of `array` as\n *  the initial value.\n * @returns {*} Returns the accumulated value.\n */\nfunction arrayReduce(array, iteratee, accumulator, initAccum) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  if (initAccum && length) {\n    accumulator = array[++index];\n  }\n  while (++index < length) {\n    accumulator = iteratee(accumulator, array[index], index, array);\n  }\n  return accumulator;\n}\n\nexport default arrayReduce;\n","/**\n * The base implementation of `_.propertyOf` without support for deep paths.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Function} Returns the new accessor function.\n */\nfunction basePropertyOf(object) {\n  return function(key) {\n    return object == null ? undefined : object[key];\n  };\n}\n\nexport default basePropertyOf;\n","import basePropertyOf from './_basePropertyOf.js';\n\n/** Used to map Latin Unicode letters to basic Latin letters. */\nvar deburredLetters = {\n  // Latin-1 Supplement block.\n  '\\xc0': 'A',  '\\xc1': 'A', '\\xc2': 'A', '\\xc3': 'A', '\\xc4': 'A', '\\xc5': 'A',\n  '\\xe0': 'a',  '\\xe1': 'a', '\\xe2': 'a', '\\xe3': 'a', '\\xe4': 'a', '\\xe5': 'a',\n  '\\xc7': 'C',  '\\xe7': 'c',\n  '\\xd0': 'D',  '\\xf0': 'd',\n  '\\xc8': 'E',  '\\xc9': 'E', '\\xca': 'E', '\\xcb': 'E',\n  '\\xe8': 'e',  '\\xe9': 'e', '\\xea': 'e', '\\xeb': 'e',\n  '\\xcc': 'I',  '\\xcd': 'I', '\\xce': 'I', '\\xcf': 'I',\n  '\\xec': 'i',  '\\xed': 'i', '\\xee': 'i', '\\xef': 'i',\n  '\\xd1': 'N',  '\\xf1': 'n',\n  '\\xd2': 'O',  '\\xd3': 'O', '\\xd4': 'O', '\\xd5': 'O', '\\xd6': 'O', '\\xd8': 'O',\n  '\\xf2': 'o',  '\\xf3': 'o', '\\xf4': 'o', '\\xf5': 'o', '\\xf6': 'o', '\\xf8': 'o',\n  '\\xd9': 'U',  '\\xda': 'U', '\\xdb': 'U', '\\xdc': 'U',\n  '\\xf9': 'u',  '\\xfa': 'u', '\\xfb': 'u', '\\xfc': 'u',\n  '\\xdd': 'Y',  '\\xfd': 'y', '\\xff': 'y',\n  '\\xc6': 'Ae', '\\xe6': 'ae',\n  '\\xde': 'Th', '\\xfe': 'th',\n  '\\xdf': 'ss',\n  // Latin Extended-A block.\n  '\\u0100': 'A',  '\\u0102': 'A', '\\u0104': 'A',\n  '\\u0101': 'a',  '\\u0103': 'a', '\\u0105': 'a',\n  '\\u0106': 'C',  '\\u0108': 'C', '\\u010a': 'C', '\\u010c': 'C',\n  '\\u0107': 'c',  '\\u0109': 'c', '\\u010b': 'c', '\\u010d': 'c',\n  '\\u010e': 'D',  '\\u0110': 'D', '\\u010f': 'd', '\\u0111': 'd',\n  '\\u0112': 'E',  '\\u0114': 'E', '\\u0116': 'E', '\\u0118': 'E', '\\u011a': 'E',\n  '\\u0113': 'e',  '\\u0115': 'e', '\\u0117': 'e', '\\u0119': 'e', '\\u011b': 'e',\n  '\\u011c': 'G',  '\\u011e': 'G', '\\u0120': 'G', '\\u0122': 'G',\n  '\\u011d': 'g',  '\\u011f': 'g', '\\u0121': 'g', '\\u0123': 'g',\n  '\\u0124': 'H',  '\\u0126': 'H', '\\u0125': 'h', '\\u0127': 'h',\n  '\\u0128': 'I',  '\\u012a': 'I', '\\u012c': 'I', '\\u012e': 'I', '\\u0130': 'I',\n  '\\u0129': 'i',  '\\u012b': 'i', '\\u012d': 'i', '\\u012f': 'i', '\\u0131': 'i',\n  '\\u0134': 'J',  '\\u0135': 'j',\n  '\\u0136': 'K',  '\\u0137': 'k', '\\u0138': 'k',\n  '\\u0139': 'L',  '\\u013b': 'L', '\\u013d': 'L', '\\u013f': 'L', '\\u0141': 'L',\n  '\\u013a': 'l',  '\\u013c': 'l', '\\u013e': 'l', '\\u0140': 'l', '\\u0142': 'l',\n  '\\u0143': 'N',  '\\u0145': 'N', '\\u0147': 'N', '\\u014a': 'N',\n  '\\u0144': 'n',  '\\u0146': 'n', '\\u0148': 'n', '\\u014b': 'n',\n  '\\u014c': 'O',  '\\u014e': 'O', '\\u0150': 'O',\n  '\\u014d': 'o',  '\\u014f': 'o', '\\u0151': 'o',\n  '\\u0154': 'R',  '\\u0156': 'R', '\\u0158': 'R',\n  '\\u0155': 'r',  '\\u0157': 'r', '\\u0159': 'r',\n  '\\u015a': 'S',  '\\u015c': 'S', '\\u015e': 'S', '\\u0160': 'S',\n  '\\u015b': 's',  '\\u015d': 's', '\\u015f': 's', '\\u0161': 's',\n  '\\u0162': 'T',  '\\u0164': 'T', '\\u0166': 'T',\n  '\\u0163': 't',  '\\u0165': 't', '\\u0167': 't',\n  '\\u0168': 'U',  '\\u016a': 'U', '\\u016c': 'U', '\\u016e': 'U', '\\u0170': 'U', '\\u0172': 'U',\n  '\\u0169': 'u',  '\\u016b': 'u', '\\u016d': 'u', '\\u016f': 'u', '\\u0171': 'u', '\\u0173': 'u',\n  '\\u0174': 'W',  '\\u0175': 'w',\n  '\\u0176': 'Y',  '\\u0177': 'y', '\\u0178': 'Y',\n  '\\u0179': 'Z',  '\\u017b': 'Z', '\\u017d': 'Z',\n  '\\u017a': 'z',  '\\u017c': 'z', '\\u017e': 'z',\n  '\\u0132': 'IJ', '\\u0133': 'ij',\n  '\\u0152': 'Oe', '\\u0153': 'oe',\n  '\\u0149': \"'n\", '\\u017f': 's'\n};\n\n/**\n * Used by `_.deburr` to convert Latin-1 Supplement and Latin Extended-A\n * letters to basic Latin letters.\n *\n * @private\n * @param {string} letter The matched letter to deburr.\n * @returns {string} Returns the deburred letter.\n */\nvar deburrLetter = basePropertyOf(deburredLetters);\n\nexport default deburrLetter;\n","import deburrLetter from './_deburrLetter.js';\nimport toString from './toString.js';\n\n/** Used to match Latin Unicode letters (excluding mathematical operators). */\nvar reLatin = /[\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\xff\\u0100-\\u017f]/g;\n\n/** Used to compose unicode character classes. */\nvar rsComboMarksRange = '\\\\u0300-\\\\u036f',\n    reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n    rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n    rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange;\n\n/** Used to compose unicode capture groups. */\nvar rsCombo = '[' + rsComboRange + ']';\n\n/**\n * Used to match [combining diacritical marks](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks) and\n * [combining diacritical marks for symbols](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks_for_Symbols).\n */\nvar reComboMark = RegExp(rsCombo, 'g');\n\n/**\n * Deburrs `string` by converting\n * [Latin-1 Supplement](https://en.wikipedia.org/wiki/Latin-1_Supplement_(Unicode_block)#Character_table)\n * and [Latin Extended-A](https://en.wikipedia.org/wiki/Latin_Extended-A)\n * letters to basic Latin letters and removing\n * [combining diacritical marks](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks).\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category String\n * @param {string} [string=''] The string to deburr.\n * @returns {string} Returns the deburred string.\n * @example\n *\n * _.deburr('dj vu');\n * // => 'deja vu'\n */\nfunction deburr(string) {\n  string = toString(string);\n  return string && string.replace(reLatin, deburrLetter).replace(reComboMark, '');\n}\n\nexport default deburr;\n","/** Used to match words composed of alphanumeric characters. */\nvar reAsciiWord = /[^\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\x7f]+/g;\n\n/**\n * Splits an ASCII `string` into an array of its words.\n *\n * @private\n * @param {string} The string to inspect.\n * @returns {Array} Returns the words of `string`.\n */\nfunction asciiWords(string) {\n  return string.match(reAsciiWord) || [];\n}\n\nexport default asciiWords;\n","/** Used to detect strings that need a more robust regexp to match words. */\nvar reHasUnicodeWord = /[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;\n\n/**\n * Checks if `string` contains a word composed of Unicode symbols.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {boolean} Returns `true` if a word is found, else `false`.\n */\nfunction hasUnicodeWord(string) {\n  return reHasUnicodeWord.test(string);\n}\n\nexport default hasUnicodeWord;\n","/** Used to compose unicode character classes. */\nvar rsAstralRange = '\\\\ud800-\\\\udfff',\n    rsComboMarksRange = '\\\\u0300-\\\\u036f',\n    reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n    rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n    rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,\n    rsDingbatRange = '\\\\u2700-\\\\u27bf',\n    rsLowerRange = 'a-z\\\\xdf-\\\\xf6\\\\xf8-\\\\xff',\n    rsMathOpRange = '\\\\xac\\\\xb1\\\\xd7\\\\xf7',\n    rsNonCharRange = '\\\\x00-\\\\x2f\\\\x3a-\\\\x40\\\\x5b-\\\\x60\\\\x7b-\\\\xbf',\n    rsPunctuationRange = '\\\\u2000-\\\\u206f',\n    rsSpaceRange = ' \\\\t\\\\x0b\\\\f\\\\xa0\\\\ufeff\\\\n\\\\r\\\\u2028\\\\u2029\\\\u1680\\\\u180e\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200a\\\\u202f\\\\u205f\\\\u3000',\n    rsUpperRange = 'A-Z\\\\xc0-\\\\xd6\\\\xd8-\\\\xde',\n    rsVarRange = '\\\\ufe0e\\\\ufe0f',\n    rsBreakRange = rsMathOpRange + rsNonCharRange + rsPunctuationRange + rsSpaceRange;\n\n/** Used to compose unicode capture groups. */\nvar rsApos = \"['\\u2019]\",\n    rsBreak = '[' + rsBreakRange + ']',\n    rsCombo = '[' + rsComboRange + ']',\n    rsDigits = '\\\\d+',\n    rsDingbat = '[' + rsDingbatRange + ']',\n    rsLower = '[' + rsLowerRange + ']',\n    rsMisc = '[^' + rsAstralRange + rsBreakRange + rsDigits + rsDingbatRange + rsLowerRange + rsUpperRange + ']',\n    rsFitz = '\\\\ud83c[\\\\udffb-\\\\udfff]',\n    rsModifier = '(?:' + rsCombo + '|' + rsFitz + ')',\n    rsNonAstral = '[^' + rsAstralRange + ']',\n    rsRegional = '(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}',\n    rsSurrPair = '[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]',\n    rsUpper = '[' + rsUpperRange + ']',\n    rsZWJ = '\\\\u200d';\n\n/** Used to compose unicode regexes. */\nvar rsMiscLower = '(?:' + rsLower + '|' + rsMisc + ')',\n    rsMiscUpper = '(?:' + rsUpper + '|' + rsMisc + ')',\n    rsOptContrLower = '(?:' + rsApos + '(?:d|ll|m|re|s|t|ve))?',\n    rsOptContrUpper = '(?:' + rsApos + '(?:D|LL|M|RE|S|T|VE))?',\n    reOptMod = rsModifier + '?',\n    rsOptVar = '[' + rsVarRange + ']?',\n    rsOptJoin = '(?:' + rsZWJ + '(?:' + [rsNonAstral, rsRegional, rsSurrPair].join('|') + ')' + rsOptVar + reOptMod + ')*',\n    rsOrdLower = '\\\\d*(?:1st|2nd|3rd|(?![123])\\\\dth)(?=\\\\b|[A-Z_])',\n    rsOrdUpper = '\\\\d*(?:1ST|2ND|3RD|(?![123])\\\\dTH)(?=\\\\b|[a-z_])',\n    rsSeq = rsOptVar + reOptMod + rsOptJoin,\n    rsEmoji = '(?:' + [rsDingbat, rsRegional, rsSurrPair].join('|') + ')' + rsSeq;\n\n/** Used to match complex or compound words. */\nvar reUnicodeWord = RegExp([\n  rsUpper + '?' + rsLower + '+' + rsOptContrLower + '(?=' + [rsBreak, rsUpper, '$'].join('|') + ')',\n  rsMiscUpper + '+' + rsOptContrUpper + '(?=' + [rsBreak, rsUpper + rsMiscLower, '$'].join('|') + ')',\n  rsUpper + '?' + rsMiscLower + '+' + rsOptContrLower,\n  rsUpper + '+' + rsOptContrUpper,\n  rsOrdUpper,\n  rsOrdLower,\n  rsDigits,\n  rsEmoji\n].join('|'), 'g');\n\n/**\n * Splits a Unicode `string` into an array of its words.\n *\n * @private\n * @param {string} The string to inspect.\n * @returns {Array} Returns the words of `string`.\n */\nfunction unicodeWords(string) {\n  return string.match(reUnicodeWord) || [];\n}\n\nexport default unicodeWords;\n","import asciiWords from './_asciiWords.js';\nimport hasUnicodeWord from './_hasUnicodeWord.js';\nimport toString from './toString.js';\nimport unicodeWords from './_unicodeWords.js';\n\n/**\n * Splits `string` into an array of its words.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category String\n * @param {string} [string=''] The string to inspect.\n * @param {RegExp|string} [pattern] The pattern to match words.\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n * @returns {Array} Returns the words of `string`.\n * @example\n *\n * _.words('fred, barney, & pebbles');\n * // => ['fred', 'barney', 'pebbles']\n *\n * _.words('fred, barney, & pebbles', /[^, ]+/g);\n * // => ['fred', 'barney', '&', 'pebbles']\n */\nfunction words(string, pattern, guard) {\n  string = toString(string);\n  pattern = guard ? undefined : pattern;\n\n  if (pattern === undefined) {\n    return hasUnicodeWord(string) ? unicodeWords(string) : asciiWords(string);\n  }\n  return string.match(pattern) || [];\n}\n\nexport default words;\n","import arrayReduce from './_arrayReduce.js';\nimport deburr from './deburr.js';\nimport words from './words.js';\n\n/** Used to compose unicode capture groups. */\nvar rsApos = \"['\\u2019]\";\n\n/** Used to match apostrophes. */\nvar reApos = RegExp(rsApos, 'g');\n\n/**\n * Creates a function like `_.camelCase`.\n *\n * @private\n * @param {Function} callback The function to combine each word.\n * @returns {Function} Returns the new compounder function.\n */\nfunction createCompounder(callback) {\n  return function(string) {\n    return arrayReduce(words(deburr(string).replace(reApos, '')), callback, '');\n  };\n}\n\nexport default createCompounder;\n","/**\n * The base implementation of `_.slice` without an iteratee call guard.\n *\n * @private\n * @param {Array} array The array to slice.\n * @param {number} [start=0] The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the slice of `array`.\n */\nfunction baseSlice(array, start, end) {\n  var index = -1,\n      length = array.length;\n\n  if (start < 0) {\n    start = -start > length ? 0 : (length + start);\n  }\n  end = end > length ? length : end;\n  if (end < 0) {\n    end += length;\n  }\n  length = start > end ? 0 : ((end - start) >>> 0);\n  start >>>= 0;\n\n  var result = Array(length);\n  while (++index < length) {\n    result[index] = array[index + start];\n  }\n  return result;\n}\n\nexport default baseSlice;\n","import baseSlice from './_baseSlice.js';\n\n/**\n * Casts `array` to a slice if it's needed.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {number} start The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the cast slice.\n */\nfunction castSlice(array, start, end) {\n  var length = array.length;\n  end = end === undefined ? length : end;\n  return (!start && end >= length) ? array : baseSlice(array, start, end);\n}\n\nexport default castSlice;\n","/** Used to compose unicode character classes. */\nvar rsAstralRange = '\\\\ud800-\\\\udfff',\n    rsComboMarksRange = '\\\\u0300-\\\\u036f',\n    reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n    rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n    rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,\n    rsVarRange = '\\\\ufe0e\\\\ufe0f';\n\n/** Used to compose unicode capture groups. */\nvar rsZWJ = '\\\\u200d';\n\n/** Used to detect strings with [zero-width joiners or code points from the astral planes](http://eev.ee/blog/2015/09/12/dark-corners-of-unicode/). */\nvar reHasUnicode = RegExp('[' + rsZWJ + rsAstralRange  + rsComboRange + rsVarRange + ']');\n\n/**\n * Checks if `string` contains Unicode symbols.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {boolean} Returns `true` if a symbol is found, else `false`.\n */\nfunction hasUnicode(string) {\n  return reHasUnicode.test(string);\n}\n\nexport default hasUnicode;\n","/**\n * Converts an ASCII `string` to an array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction asciiToArray(string) {\n  return string.split('');\n}\n\nexport default asciiToArray;\n","/** Used to compose unicode character classes. */\nvar rsAstralRange = '\\\\ud800-\\\\udfff',\n    rsComboMarksRange = '\\\\u0300-\\\\u036f',\n    reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n    rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n    rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,\n    rsVarRange = '\\\\ufe0e\\\\ufe0f';\n\n/** Used to compose unicode capture groups. */\nvar rsAstral = '[' + rsAstralRange + ']',\n    rsCombo = '[' + rsComboRange + ']',\n    rsFitz = '\\\\ud83c[\\\\udffb-\\\\udfff]',\n    rsModifier = '(?:' + rsCombo + '|' + rsFitz + ')',\n    rsNonAstral = '[^' + rsAstralRange + ']',\n    rsRegional = '(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}',\n    rsSurrPair = '[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]',\n    rsZWJ = '\\\\u200d';\n\n/** Used to compose unicode regexes. */\nvar reOptMod = rsModifier + '?',\n    rsOptVar = '[' + rsVarRange + ']?',\n    rsOptJoin = '(?:' + rsZWJ + '(?:' + [rsNonAstral, rsRegional, rsSurrPair].join('|') + ')' + rsOptVar + reOptMod + ')*',\n    rsSeq = rsOptVar + reOptMod + rsOptJoin,\n    rsSymbol = '(?:' + [rsNonAstral + rsCombo + '?', rsCombo, rsRegional, rsSurrPair, rsAstral].join('|') + ')';\n\n/** Used to match [string symbols](https://mathiasbynens.be/notes/javascript-unicode). */\nvar reUnicode = RegExp(rsFitz + '(?=' + rsFitz + ')|' + rsSymbol + rsSeq, 'g');\n\n/**\n * Converts a Unicode `string` to an array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction unicodeToArray(string) {\n  return string.match(reUnicode) || [];\n}\n\nexport default unicodeToArray;\n","import asciiToArray from './_asciiToArray.js';\nimport hasUnicode from './_hasUnicode.js';\nimport unicodeToArray from './_unicodeToArray.js';\n\n/**\n * Converts `string` to an array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction stringToArray(string) {\n  return hasUnicode(string)\n    ? unicodeToArray(string)\n    : asciiToArray(string);\n}\n\nexport default stringToArray;\n","import castSlice from './_castSlice.js';\nimport hasUnicode from './_hasUnicode.js';\nimport stringToArray from './_stringToArray.js';\nimport toString from './toString.js';\n\n/**\n * Creates a function like `_.lowerFirst`.\n *\n * @private\n * @param {string} methodName The name of the `String` case method to use.\n * @returns {Function} Returns the new case function.\n */\nfunction createCaseFirst(methodName) {\n  return function(string) {\n    string = toString(string);\n\n    var strSymbols = hasUnicode(string)\n      ? stringToArray(string)\n      : undefined;\n\n    var chr = strSymbols\n      ? strSymbols[0]\n      : string.charAt(0);\n\n    var trailing = strSymbols\n      ? castSlice(strSymbols, 1).join('')\n      : string.slice(1);\n\n    return chr[methodName]() + trailing;\n  };\n}\n\nexport default createCaseFirst;\n","import createCaseFirst from './_createCaseFirst.js';\n\n/**\n * Converts the first character of `string` to upper case.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category String\n * @param {string} [string=''] The string to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.upperFirst('fred');\n * // => 'Fred'\n *\n * _.upperFirst('FRED');\n * // => 'FRED'\n */\nvar upperFirst = createCaseFirst('toUpperCase');\n\nexport default upperFirst;\n","import createCompounder from './_createCompounder.js';\nimport upperFirst from './upperFirst.js';\n\n/**\n * Converts `string` to\n * [start case](https://en.wikipedia.org/wiki/Letter_case#Stylistic_or_specialised_usage).\n *\n * @static\n * @memberOf _\n * @since 3.1.0\n * @category String\n * @param {string} [string=''] The string to convert.\n * @returns {string} Returns the start cased string.\n * @example\n *\n * _.startCase('--foo-bar--');\n * // => 'Foo Bar'\n *\n * _.startCase('fooBar');\n * // => 'Foo Bar'\n *\n * _.startCase('__FOO_BAR__');\n * // => 'FOO BAR'\n */\nvar startCase = createCompounder(function(result, word, index) {\n  return result + (index ? ' ' : '') + upperFirst(word);\n});\n\nexport default startCase;\n","import toString from './toString.js';\nimport upperFirst from './upperFirst.js';\n\n/**\n * Converts the first character of `string` to upper case and the remaining\n * to lower case.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category String\n * @param {string} [string=''] The string to capitalize.\n * @returns {string} Returns the capitalized string.\n * @example\n *\n * _.capitalize('FRED');\n * // => 'Fred'\n */\nfunction capitalize(string) {\n  return upperFirst(toString(string).toLowerCase());\n}\n\nexport default capitalize;\n","import capitalize from './capitalize.js';\nimport createCompounder from './_createCompounder.js';\n\n/**\n * Converts `string` to [camel case](https://en.wikipedia.org/wiki/CamelCase).\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category String\n * @param {string} [string=''] The string to convert.\n * @returns {string} Returns the camel cased string.\n * @example\n *\n * _.camelCase('Foo Bar');\n * // => 'fooBar'\n *\n * _.camelCase('--foo-bar--');\n * // => 'fooBar'\n *\n * _.camelCase('__FOO_BAR__');\n * // => 'fooBar'\n */\nvar camelCase = createCompounder(function(result, word, index) {\n  word = word.toLowerCase();\n  return result + (index ? capitalize(word) : word);\n});\n\nexport default camelCase;\n","import createCompounder from './_createCompounder.js';\n\n/**\n * Converts `string`, as space separated words, to upper case.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category String\n * @param {string} [string=''] The string to convert.\n * @returns {string} Returns the upper cased string.\n * @example\n *\n * _.upperCase('--foo-bar');\n * // => 'FOO BAR'\n *\n * _.upperCase('fooBar');\n * // => 'FOO BAR'\n *\n * _.upperCase('__foo_bar__');\n * // => 'FOO BAR'\n */\nvar upperCase = createCompounder(function(result, word, index) {\n  return result + (index ? ' ' : '') + word.toUpperCase();\n});\n\nexport default upperCase;\n","import createCompounder from './_createCompounder.js';\n\n/**\n * Converts `string`, as space separated words, to lower case.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category String\n * @param {string} [string=''] The string to convert.\n * @returns {string} Returns the lower cased string.\n * @example\n *\n * _.lowerCase('--Foo-Bar--');\n * // => 'foo bar'\n *\n * _.lowerCase('fooBar');\n * // => 'foo bar'\n *\n * _.lowerCase('__FOO_BAR__');\n * // => 'foo bar'\n */\nvar lowerCase = createCompounder(function(result, word, index) {\n  return result + (index ? ' ' : '') + word.toLowerCase();\n});\n\nexport default lowerCase;\n","import createCaseFirst from './_createCaseFirst.js';\n\n/**\n * Converts the first character of `string` to lower case.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category String\n * @param {string} [string=''] The string to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.lowerFirst('Fred');\n * // => 'fred'\n *\n * _.lowerFirst('FRED');\n * // => 'fRED'\n */\nvar lowerFirst = createCaseFirst('toLowerCase');\n\nexport default lowerFirst;\n","import { camelCase, startCase, upperCase, lowerCase, upperFirst, } from 'lodash-es';\nexport { lowerFirst, upperFirst, camelCase } from 'lodash-es';\n// @see: https://medium.com/@robertsavian/javascript-case-converters-using-lodash-4f2f964091cc\nconst cacheStringFunction = (fn) => {\n    const cache = Object.create(null);\n    return ((str) => {\n        const hit = cache[str];\n        return hit || (cache[str] = fn(str));\n    });\n};\nexport const kebabCase = cacheStringFunction((s) => s.replace(/\\B([A-Z])/g, '-$1').toLowerCase());\nexport const pascalCase = cacheStringFunction((s) => startCase(camelCase(s)).replace(/ /g, ''));\nexport const constantCase = cacheStringFunction((s) => upperCase(s).replace(/ /g, '_'));\nexport const dotCase = cacheStringFunction((s) => lowerCase(s).replace(/ /g, '.'));\nexport const pathCase = cacheStringFunction((s) => lowerCase(s).replace(/ /g, '/'));\nexport const sentenceCase = cacheStringFunction((s) => upperFirst(lowerCase(s)));\nexport const titleCase = cacheStringFunction((s) => startCase(camelCase(s)));\n//# sourceMappingURL=format.js.map","/* eslint-disable no-bitwise */\n/**\n * Return a simple hash code from a string.\n * Source from: https://github.com/sindresorhus/fnv1a/blob/master/index.js#L25\n */\nexport function hashcode(str) {\n    let hash = 2166136261;\n    let isUnicoded = false;\n    let string = str;\n    for (let i = 0, ii = string.length; i < ii; i += 1) {\n        let characterCode = string.charCodeAt(i);\n        // Non-ASCII characters trigger the Unicode escape logic\n        if (characterCode > 0x7f && !isUnicoded) {\n            string = unescape(encodeURIComponent(string));\n            characterCode = string.charCodeAt(i);\n            isUnicoded = true;\n        }\n        hash ^= characterCode;\n        hash += (hash << 1) + (hash << 4) + (hash << 7) + (hash << 8) + (hash << 24);\n    }\n    return hash >>> 0;\n}\n//# sourceMappingURL=hashcode.js.map","/* eslint-disable no-bitwise */\nexport function uuid() {\n    // credit: http://stackoverflow.com/posts/2117523/revisions\n    // return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c) => {\n    //   const r = (Math.random() * 16) | 0\n    //   const v = c === 'x' ? r : (r & 0x3) | 0x8\n    //   return v.toString(16)\n    // })\n    let res = '';\n    const template = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx';\n    for (let i = 0, len = template.length; i < len; i += 1) {\n        const s = template[i];\n        const r = (Math.random() * 16) | 0;\n        const v = s === 'x' ? r : s === 'y' ? (r & 0x3) | 0x8 : s;\n        res += v.toString(16);\n    }\n    return res;\n}\n//# sourceMappingURL=uuid.js.map","// @see: https://github.com/microsoft/TypeScript/blob/master/src/compiler/checker.ts\n/**\n * Given a name and a list of names that are not equal to the name, return a\n * spelling suggestion if there is one that is close enough. Names less than\n * length 3 only check for case-insensitive equality, not Levenshtein distance.\n *\n * - If there is a candidate that's the same except for case, return that.\n * - If there is a candidate that's within one edit of the name, return that.\n * - Otherwise, return the candidate with the smallest Levenshtein distance,\n *     except for candidates:\n *       * With no name\n *       * Whose length differs from the target name by more than 0.34 of the\n *         length of the name.\n *       * Whose levenshtein distance is more than 0.4 of the length of the\n *         name (0.4 allows 1 substitution/transposition for every 5 characters,\n *         and 1 insertion/deletion at 3 characters)\n */\nexport function getSpellingSuggestion(name, candidates, getName) {\n    const maximumLengthDifference = Math.min(2, Math.floor(name.length * 0.34));\n    // If the best result isn't better than this, don't bother.\n    let bestDistance = Math.floor(name.length * 0.4) + 1;\n    let bestCandidate;\n    let justCheckExactMatches = false;\n    const nameLowerCase = name.toLowerCase();\n    // eslint-disable-next-line\n    for (const candidate of candidates) {\n        const candidateName = getName(candidate);\n        if (candidateName !== undefined &&\n            Math.abs(candidateName.length - nameLowerCase.length) <=\n                maximumLengthDifference) {\n            const candidateNameLowerCase = candidateName.toLowerCase();\n            if (candidateNameLowerCase === nameLowerCase) {\n                if (candidateName === name) {\n                    continue;\n                }\n                return candidate;\n            }\n            if (justCheckExactMatches) {\n                continue;\n            }\n            if (candidateName.length < 3) {\n                // Don't bother, user would have noticed a\n                // 2-character name having an extra character.\n                continue;\n            }\n            // Only care about a result better than the best so far.\n            const distance = levenshteinWithMax(nameLowerCase, candidateNameLowerCase, bestDistance - 1);\n            if (distance === undefined) {\n                continue;\n            }\n            if (distance < 3) {\n                justCheckExactMatches = true;\n                bestCandidate = candidate;\n            }\n            else {\n                // Debug.assert(distance < bestDistance)\n                bestDistance = distance;\n                bestCandidate = candidate;\n            }\n        }\n    }\n    return bestCandidate;\n}\nfunction levenshteinWithMax(s1, s2, max) {\n    let previous = new Array(s2.length + 1); // eslint-disable-line\n    let current = new Array(s2.length + 1); // eslint-disable-line\n    /** Represents any value > max. We don't care about the particular value. */\n    const big = max + 1;\n    for (let i = 0; i <= s2.length; i += 1) {\n        previous[i] = i;\n    }\n    for (let i = 1; i <= s1.length; i += 1) {\n        const c1 = s1.charCodeAt(i - 1);\n        const minJ = i > max ? i - max : 1;\n        const maxJ = s2.length > max + i ? max + i : s2.length;\n        current[0] = i;\n        /** Smallest value of the matrix in the ith column. */\n        let colMin = i;\n        for (let j = 1; j < minJ; j += 1) {\n            current[j] = big;\n        }\n        for (let j = minJ; j <= maxJ; j += 1) {\n            const dist = c1 === s2.charCodeAt(j - 1)\n                ? previous[j - 1]\n                : Math.min(\n                /* delete */ previous[j] + 1, \n                /* insert */ current[j - 1] + 1, \n                /* substitute */ previous[j - 1] + 2);\n            current[j] = dist;\n            colMin = Math.min(colMin, dist);\n        }\n        for (let j = maxJ + 1; j <= s2.length; j += 1) {\n            current[j] = big;\n        }\n        if (colMin > max) {\n            // Give up -- everything in this column is > max\n            // and it can't get better in future columns.\n            return undefined;\n        }\n        const temp = previous;\n        previous = current;\n        current = temp;\n    }\n    const res = previous[s2.length];\n    return res > max ? undefined : res;\n}\n//# sourceMappingURL=suggestion.js.map","import baseGetTag from './_baseGetTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar numberTag = '[object Number]';\n\n/**\n * Checks if `value` is classified as a `Number` primitive or object.\n *\n * **Note:** To exclude `Infinity`, `-Infinity`, and `NaN`, which are\n * classified as numbers, use the `_.isFinite` method.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a number, else `false`.\n * @example\n *\n * _.isNumber(3);\n * // => true\n *\n * _.isNumber(Number.MIN_VALUE);\n * // => true\n *\n * _.isNumber(Infinity);\n * // => true\n *\n * _.isNumber('3');\n * // => false\n */\nfunction isNumber(value) {\n  return typeof value == 'number' ||\n    (isObjectLike(value) && baseGetTag(value) == numberTag);\n}\n\nexport default isNumber;\n","/**\n * The base implementation of `_.clamp` which doesn't coerce arguments.\n *\n * @private\n * @param {number} number The number to clamp.\n * @param {number} [lower] The lower bound.\n * @param {number} upper The upper bound.\n * @returns {number} Returns the clamped number.\n */\nfunction baseClamp(number, lower, upper) {\n  if (number === number) {\n    if (upper !== undefined) {\n      number = number <= upper ? number : upper;\n    }\n    if (lower !== undefined) {\n      number = number >= lower ? number : lower;\n    }\n  }\n  return number;\n}\n\nexport default baseClamp;\n","import baseClamp from './_baseClamp.js';\nimport toNumber from './toNumber.js';\n\n/**\n * Clamps `number` within the inclusive `lower` and `upper` bounds.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Number\n * @param {number} number The number to clamp.\n * @param {number} [lower] The lower bound.\n * @param {number} upper The upper bound.\n * @returns {number} Returns the clamped number.\n * @example\n *\n * _.clamp(-10, -5, 5);\n * // => -5\n *\n * _.clamp(10, -5, 5);\n * // => 5\n */\nfunction clamp(number, lower, upper) {\n  if (upper === undefined) {\n    upper = lower;\n    lower = undefined;\n  }\n  if (upper !== undefined) {\n    upper = toNumber(upper);\n    upper = upper === upper ? upper : 0;\n  }\n  if (lower !== undefined) {\n    lower = toNumber(lower);\n    lower = lower === lower ? lower : 0;\n  }\n  return baseClamp(toNumber(number), lower, upper);\n}\n\nexport default clamp;\n","export { isNumber, clamp } from 'lodash-es';\n/**\n * Returns the remainder of division of `n` by `m`. You should use this\n * instead of the built-in operation as the built-in operation does not\n * properly handle negative numbers.\n */\nexport function mod(n, m) {\n    return ((n % m) + m) % m;\n}\nexport function random(lower, upper) {\n    if (upper == null) {\n        upper = lower == null ? 1 : lower; // eslint-disable-line\n        lower = 0; // eslint-disable-line\n    }\n    else if (upper < lower) {\n        const tmp = lower;\n        lower = upper; // eslint-disable-line\n        upper = tmp; // eslint-disable-line\n    }\n    return Math.floor(Math.random() * (upper - lower + 1) + lower);\n}\nexport function isPercentage(val) {\n    return typeof val === 'string' && val.slice(-1) === '%';\n}\nexport function normalizePercentage(num, ref) {\n    if (num == null) {\n        return 0;\n    }\n    let raw;\n    if (typeof num === 'string') {\n        raw = parseFloat(num);\n        if (isPercentage(num)) {\n            raw /= 100;\n            if (Number.isFinite(raw)) {\n                return raw * ref;\n            }\n        }\n    }\n    else {\n        raw = num;\n    }\n    if (!Number.isFinite(raw)) {\n        return 0;\n    }\n    if (raw > 0 && raw < 1) {\n        return raw * ref;\n    }\n    return raw;\n}\nexport function parseCssNumeric(val, units) {\n    function getUnit(regexp) {\n        const matches = new RegExp(`(?:\\\\d+(?:\\\\.\\\\d+)*)(${regexp})$`).exec(val);\n        if (!matches) {\n            return null;\n        }\n        return matches[1];\n    }\n    const number = parseFloat(val);\n    if (Number.isNaN(number)) {\n        return null;\n    }\n    // determine the unit\n    let regexp;\n    if (units == null) {\n        // accept any unit, as well as no unit\n        regexp = '[A-Za-z]*';\n    }\n    else if (Array.isArray(units)) {\n        if (units.length === 0) {\n            return null;\n        }\n        regexp = units.join('|');\n    }\n    else if (typeof units === 'string') {\n        regexp = units;\n    }\n    const unit = getUnit(regexp);\n    if (unit === null) {\n        return null;\n    }\n    return {\n        unit,\n        value: number,\n    };\n}\nexport function normalizeSides(box) {\n    if (typeof box === 'object') {\n        let left = 0;\n        let top = 0;\n        let right = 0;\n        let bottom = 0;\n        if (box.vertical != null && Number.isFinite(box.vertical)) {\n            top = bottom = box.vertical;\n        }\n        if (box.horizontal != null && Number.isFinite(box.horizontal)) {\n            right = left = box.horizontal;\n        }\n        if (box.left != null && Number.isFinite(box.left))\n            left = box.left;\n        if (box.top != null && Number.isFinite(box.top))\n            top = box.top;\n        if (box.right != null && Number.isFinite(box.right))\n            right = box.right;\n        if (box.bottom != null && Number.isFinite(box.bottom))\n            bottom = box.bottom;\n        return { top, right, bottom, left };\n    }\n    let val = 0;\n    if (box != null && Number.isFinite(box)) {\n        val = box;\n    }\n    return { top: val, right: val, bottom: val, left: val };\n}\n//# sourceMappingURL=number.js.map","/* eslint-disable no-underscore-dangle */\nlet _IS_MAC = false;\nlet _IS_IOS = false;\nlet _IS_WINDOWS = false;\nlet _IS_IE = false;\nlet _IS_IE11 = false;\nlet _IS_EDGE = false;\nlet _IS_NETSCAPE = false;\nlet _IS_CHROME_APP = false;\nlet _IS_CHROME = false;\nlet _IS_OPERA = false;\nlet _IS_FIREFOX = false;\nlet _IS_SAFARI = false;\nlet _SUPPORT_TOUCH = false;\nlet _SUPPORT_POINTER = false;\nlet _SUPPORT_PASSIVE = false;\nlet _NO_FOREIGNOBJECT = false;\nif (typeof navigator === 'object') {\n    const ua = navigator.userAgent;\n    _IS_MAC = ua.indexOf('Macintosh') >= 0;\n    _IS_IOS = !!ua.match(/(iPad|iPhone|iPod)/g);\n    _IS_WINDOWS = ua.indexOf('Windows') >= 0;\n    _IS_IE = ua.indexOf('MSIE') >= 0;\n    _IS_IE11 = !!ua.match(/Trident\\/7\\./);\n    _IS_EDGE = !!ua.match(/Edge\\//);\n    _IS_NETSCAPE =\n        ua.indexOf('Mozilla/') >= 0 &&\n            ua.indexOf('MSIE') < 0 &&\n            ua.indexOf('Edge/') < 0;\n    _IS_CHROME = ua.indexOf('Chrome/') >= 0 && ua.indexOf('Edge/') < 0;\n    _IS_OPERA = ua.indexOf('Opera/') >= 0 || ua.indexOf('OPR/') >= 0;\n    _IS_FIREFOX = ua.indexOf('Firefox/') >= 0;\n    _IS_SAFARI =\n        ua.indexOf('AppleWebKit/') >= 0 &&\n            ua.indexOf('Chrome/') < 0 &&\n            ua.indexOf('Edge/') < 0;\n    if (typeof document === 'object') {\n        _NO_FOREIGNOBJECT =\n            !document.createElementNS ||\n                `${document.createElementNS('http://www.w3.org/2000/svg', 'foreignObject')}` !== '[object SVGForeignObjectElement]' ||\n                ua.indexOf('Opera/') >= 0;\n    }\n}\nif (typeof window === 'object') {\n    _IS_CHROME_APP =\n        window.chrome != null &&\n            window.chrome.app != null &&\n            window.chrome.app.runtime != null;\n    _SUPPORT_POINTER = window.PointerEvent != null && !_IS_MAC;\n}\nif (typeof document === 'object') {\n    _SUPPORT_TOUCH = 'ontouchstart' in document.documentElement;\n    try {\n        const options = Object.defineProperty({}, 'passive', {\n            get() {\n                _SUPPORT_PASSIVE = true;\n            },\n        });\n        const div = document.createElement('div');\n        if (div.addEventListener) {\n            div.addEventListener('click', () => { }, options);\n        }\n    }\n    catch (err) {\n        // pass\n    }\n}\nexport var Platform;\n(function (Platform) {\n    Platform.IS_MAC = _IS_MAC;\n    Platform.IS_IOS = _IS_IOS;\n    Platform.IS_WINDOWS = _IS_WINDOWS;\n    Platform.IS_IE = _IS_IE;\n    Platform.IS_IE11 = _IS_IE11;\n    Platform.IS_EDGE = _IS_EDGE;\n    /**\n     * A flag indicating whether the browser is Netscape (including Firefox).\n     */\n    Platform.IS_NETSCAPE = _IS_NETSCAPE;\n    /**\n     * A flag indicating whether the the this is running inside a Chrome App.\n     */\n    Platform.IS_CHROME_APP = _IS_CHROME_APP;\n    Platform.IS_CHROME = _IS_CHROME;\n    Platform.IS_OPERA = _IS_OPERA;\n    Platform.IS_FIREFOX = _IS_FIREFOX;\n    Platform.IS_SAFARI = _IS_SAFARI;\n    /**\n     * A flag indicating whether this device supports touchstart/-move/-end\n     * events (Apple iOS, Android, Chromebook and Chrome Browser on touch-enabled\n     * devices).\n     */\n    Platform.SUPPORT_TOUCH = _SUPPORT_TOUCH;\n    /**\n     * A flag indicating whether this device supports Microsoft pointer events.\n     */\n    Platform.SUPPORT_POINTER = _SUPPORT_POINTER;\n    Platform.SUPPORT_PASSIVE = _SUPPORT_PASSIVE;\n    /**\n     * A flag indicating whether foreignObject support is not available. This\n     * is the case for Opera, older SVG-based browsers and all versions of IE.\n     */\n    Platform.NO_FOREIGNOBJECT = _NO_FOREIGNOBJECT;\n    Platform.SUPPORT_FOREIGNOBJECT = !Platform.NO_FOREIGNOBJECT;\n})(Platform || (Platform = {}));\n(function (Platform) {\n    function getHMRStatus() {\n        const mod = window.module;\n        if (mod != null && mod.hot != null && mod.hot.status != null) {\n            return mod.hot.status();\n        }\n        return 'unkonwn';\n    }\n    Platform.getHMRStatus = getHMRStatus;\n    function isApplyingHMR() {\n        return getHMRStatus() === 'apply';\n    }\n    Platform.isApplyingHMR = isApplyingHMR;\n    // This function checks if the specified event is supported by the browser.\n    // Source: http://perfectionkills.com/detecting-event-support-without-browser-sniffing/\n    const TAGNAMES = {\n        select: 'input',\n        change: 'input',\n        submit: 'form',\n        reset: 'form',\n        error: 'img',\n        load: 'img',\n        abort: 'img',\n    };\n    function isEventSupported(event) {\n        const elem = document.createElement(TAGNAMES[event] || 'div');\n        const eventName = `on${event}`;\n        let isSupported = eventName in elem;\n        if (!isSupported) {\n            elem.setAttribute(eventName, 'return;');\n            isSupported = typeof elem[eventName] === 'function';\n        }\n        return isSupported;\n    }\n    Platform.isEventSupported = isEventSupported;\n})(Platform || (Platform = {}));\n//# sourceMappingURL=index.js.map","const rclass = /[\\t\\r\\n\\f]/g;\nconst rnotwhite = /\\S+/g;\nconst fillSpaces = (str) => ` ${str} `;\nexport function getClass(elem) {\n    return (elem && elem.getAttribute && elem.getAttribute('class')) || '';\n}\nexport function hasClass(elem, selector) {\n    if (elem == null || selector == null) {\n        return false;\n    }\n    const classNames = fillSpaces(getClass(elem));\n    const className = fillSpaces(selector);\n    return elem.nodeType === 1\n        ? classNames.replace(rclass, ' ').includes(className)\n        : false;\n}\nexport function addClass(elem, selector) {\n    if (elem == null || selector == null) {\n        return;\n    }\n    if (typeof selector === 'function') {\n        return addClass(elem, selector(getClass(elem)));\n    }\n    if (typeof selector === 'string' && elem.nodeType === 1) {\n        const classes = selector.match(rnotwhite) || [];\n        const oldValue = fillSpaces(getClass(elem)).replace(rclass, ' ');\n        let newValue = classes.reduce((memo, cls) => {\n            if (memo.indexOf(fillSpaces(cls)) < 0) {\n                return `${memo}${cls} `;\n            }\n            return memo;\n        }, oldValue);\n        newValue = newValue.trim();\n        if (oldValue !== newValue) {\n            elem.setAttribute('class', newValue);\n        }\n    }\n}\nexport function removeClass(elem, selector) {\n    if (elem == null) {\n        return;\n    }\n    if (typeof selector === 'function') {\n        return removeClass(elem, selector(getClass(elem)));\n    }\n    if ((!selector || typeof selector === 'string') && elem.nodeType === 1) {\n        const classes = (selector || '').match(rnotwhite) || [];\n        const oldValue = fillSpaces(getClass(elem)).replace(rclass, ' ');\n        let newValue = classes.reduce((memo, cls) => {\n            const className = fillSpaces(cls);\n            if (memo.indexOf(className) > -1) {\n                return memo.replace(className, ' ');\n            }\n            return memo;\n        }, oldValue);\n        newValue = selector ? newValue.trim() : '';\n        if (oldValue !== newValue) {\n            elem.setAttribute('class', newValue);\n        }\n    }\n}\nexport function toggleClass(elem, selector, stateVal) {\n    if (elem == null || selector == null) {\n        return;\n    }\n    if (stateVal != null && typeof selector === 'string') {\n        stateVal ? addClass(elem, selector) : removeClass(elem, selector);\n        return;\n    }\n    if (typeof selector === 'function') {\n        return toggleClass(elem, selector(getClass(elem), stateVal), stateVal);\n    }\n    if (typeof selector === 'string') {\n        const metches = selector.match(rnotwhite) || [];\n        metches.forEach((cls) => {\n            hasClass(elem, cls) ? removeClass(elem, cls) : addClass(elem, cls);\n        });\n    }\n}\n//# sourceMappingURL=class.js.map","import { hasClass } from './class';\nlet idCounter = 0;\nexport function uniqueId() {\n    idCounter += 1;\n    return `v${idCounter}`;\n}\nexport function ensureId(elem) {\n    if (elem.id == null || elem.id === '') {\n        elem.id = uniqueId();\n    }\n    return elem.id;\n}\n/**\n * Returns true if object is an instance of SVGGraphicsElement.\n * @see https://developer.mozilla.org/en-US/docs/Web/API/SVGGraphicsElement\n */\nexport function isSVGGraphicsElement(elem) {\n    if (elem == null) {\n        return false;\n    }\n    return typeof elem.getScreenCTM === 'function' && elem instanceof SVGElement;\n}\nexport const ns = {\n    svg: 'http://www.w3.org/2000/svg',\n    xmlns: 'http://www.w3.org/2000/xmlns/',\n    xml: 'http://www.w3.org/XML/1998/namespace',\n    xlink: 'http://www.w3.org/1999/xlink',\n    xhtml: 'http://www.w3.org/1999/xhtml',\n};\nexport const svgVersion = '1.1';\nexport function createElement(tagName, doc = document) {\n    return doc.createElement(tagName);\n}\nexport function createElementNS(tagName, namespaceURI = ns.xhtml, doc = document) {\n    return doc.createElementNS(namespaceURI, tagName);\n}\nexport function createSvgElement(tagName, doc = document) {\n    return createElementNS(tagName, ns.svg, doc);\n}\nexport function createSvgDocument(content) {\n    if (content) {\n        const xml = `<svg xmlns=\"${ns.svg}\" xmlns:xlink=\"${ns.xlink}\" version=\"${svgVersion}\">${content}</svg>`; // lgtm[js/html-constructed-from-input]\n        const { documentElement } = parseXML(xml, { async: false });\n        return documentElement;\n    }\n    const svg = document.createElementNS(ns.svg, 'svg');\n    svg.setAttributeNS(ns.xmlns, 'xmlns:xlink', ns.xlink);\n    svg.setAttribute('version', svgVersion);\n    return svg;\n}\nexport function parseXML(data, options = {}) {\n    let xml;\n    try {\n        const parser = new DOMParser();\n        if (options.async != null) {\n            const instance = parser;\n            instance.async = options.async;\n        }\n        xml = parser.parseFromString(data, options.mimeType || 'text/xml');\n    }\n    catch (error) {\n        xml = undefined;\n    }\n    if (!xml || xml.getElementsByTagName('parsererror').length) {\n        throw new Error(`Invalid XML: ${data}`);\n    }\n    return xml;\n}\nexport function tagName(node, lowercase = true) {\n    const nodeName = node.nodeName;\n    return lowercase ? nodeName.toLowerCase() : nodeName.toUpperCase();\n}\nexport function index(elem) {\n    let index = 0;\n    let node = elem.previousSibling;\n    while (node) {\n        if (node.nodeType === 1) {\n            index += 1;\n        }\n        node = node.previousSibling;\n    }\n    return index;\n}\nexport function find(elem, selector) {\n    return elem.querySelectorAll(selector);\n}\nexport function findOne(elem, selector) {\n    return elem.querySelector(selector);\n}\nexport function findParentByClass(elem, className, terminator) {\n    const ownerSVGElement = elem.ownerSVGElement;\n    let node = elem.parentNode;\n    while (node && node !== terminator && node !== ownerSVGElement) {\n        if (hasClass(node, className)) {\n            return node;\n        }\n        node = node.parentNode;\n    }\n    return null;\n}\nexport function contains(parent, child) {\n    const bup = child && child.parentNode;\n    return (parent === bup ||\n        !!(bup && bup.nodeType === 1 && parent.compareDocumentPosition(bup) & 16) // eslint-disable-line no-bitwise\n    );\n}\nexport function remove(elem) {\n    if (elem) {\n        const elems = Array.isArray(elem) ? elem : [elem];\n        elems.forEach((item) => {\n            if (item.parentNode) {\n                item.parentNode.removeChild(item);\n            }\n        });\n    }\n}\nexport function empty(elem) {\n    while (elem.firstChild) {\n        elem.removeChild(elem.firstChild);\n    }\n}\nexport function append(elem, elems) {\n    const arr = Array.isArray(elems) ? elems : [elems];\n    arr.forEach((child) => {\n        if (child != null) {\n            elem.appendChild(child);\n        }\n    });\n}\nexport function prepend(elem, elems) {\n    const child = elem.firstChild;\n    return child ? before(child, elems) : append(elem, elems);\n}\nexport function before(elem, elems) {\n    const parent = elem.parentNode;\n    if (parent) {\n        const arr = Array.isArray(elems) ? elems : [elems];\n        arr.forEach((child) => {\n            if (child != null) {\n                parent.insertBefore(child, elem);\n            }\n        });\n    }\n}\nexport function after(elem, elems) {\n    const parent = elem.parentNode;\n    if (parent) {\n        const arr = Array.isArray(elems) ? elems : [elems];\n        arr.forEach((child) => {\n            if (child != null) {\n                parent.insertBefore(child, elem.nextSibling);\n            }\n        });\n    }\n}\nexport function appendTo(elem, target) {\n    if (target != null) {\n        target.appendChild(elem);\n    }\n}\nexport function isElement(x) {\n    return !!x && x.nodeType === 1;\n}\n// Determines whether a node is an HTML node\nexport function isHTMLElement(elem) {\n    try {\n        // Using W3 DOM2 (works for FF, Opera and Chrome)\n        return elem instanceof HTMLElement;\n    }\n    catch (e) {\n        // Browsers not supporting W3 DOM2 don't have HTMLElement and\n        // an exception is thrown and we end up here. Testing some\n        // properties that all elements have (works on IE7)\n        return (typeof elem === 'object' &&\n            elem.nodeType === 1 &&\n            typeof elem.style === 'object' &&\n            typeof elem.ownerDocument === 'object');\n    }\n}\nexport function children(parent, className) {\n    const matched = [];\n    let elem = parent.firstChild;\n    for (; elem; elem = elem.nextSibling) {\n        if (elem.nodeType === 1) {\n            if (!className || hasClass(elem, className)) {\n                matched.push(elem);\n            }\n        }\n    }\n    return matched;\n}\n//# sourceMappingURL=elem.js.map","import { ns } from './elem';\nimport { kebabCase } from '../string/format';\nexport const CASE_SENSITIVE_ATTR = [\n    'viewBox',\n    'attributeName',\n    'attributeType',\n    'repeatCount',\n    'textLength',\n    'lengthAdjust',\n];\nexport function getAttribute(elem, name) {\n    return elem.getAttribute(name);\n}\nexport function removeAttribute(elem, name) {\n    const qualified = qualifyAttr(name);\n    if (qualified.ns) {\n        if (elem.hasAttributeNS(qualified.ns, qualified.local)) {\n            elem.removeAttributeNS(qualified.ns, qualified.local);\n        }\n    }\n    else if (elem.hasAttribute(name)) {\n        elem.removeAttribute(name);\n    }\n}\nexport function setAttribute(elem, name, value) {\n    if (value == null) {\n        return removeAttribute(elem, name);\n    }\n    const qualified = qualifyAttr(name);\n    if (qualified.ns && typeof value === 'string') {\n        elem.setAttributeNS(qualified.ns, name, value);\n    }\n    else if (name === 'id') {\n        elem.id = `${value}`;\n    }\n    else {\n        elem.setAttribute(name, `${value}`);\n    }\n}\nexport function setAttributes(elem, attrs) {\n    Object.keys(attrs).forEach((name) => {\n        setAttribute(elem, name, attrs[name]);\n    });\n}\nexport function attr(elem, name, value) {\n    if (name == null) {\n        const attrs = elem.attributes;\n        const ret = {};\n        for (let i = 0; i < attrs.length; i += 1) {\n            ret[attrs[i].name] = attrs[i].value;\n        }\n        return ret;\n    }\n    if (typeof name === 'string' && value === undefined) {\n        return elem.getAttribute(name);\n    }\n    if (typeof name === 'object') {\n        setAttributes(elem, name);\n    }\n    else {\n        setAttribute(elem, name, value);\n    }\n}\nexport function qualifyAttr(name) {\n    if (name.indexOf(':') !== -1) {\n        const combinedKey = name.split(':');\n        return {\n            ns: ns[combinedKey[0]],\n            local: combinedKey[1],\n        };\n    }\n    return {\n        ns: null,\n        local: name,\n    };\n}\nexport function kebablizeAttrs(attrs) {\n    const result = {};\n    Object.keys(attrs).forEach((key) => {\n        const name = CASE_SENSITIVE_ATTR.includes(key) ? key : kebabCase(key);\n        result[name] = attrs[key];\n    });\n    return result;\n}\nexport function styleToObject(styleString) {\n    const ret = {};\n    const styles = styleString.split(';');\n    styles.forEach((item) => {\n        const section = item.trim();\n        if (section) {\n            const pair = section.split('=');\n            if (pair.length) {\n                ret[pair[0].trim()] = pair[1] ? pair[1].trim() : '';\n            }\n        }\n    });\n    return ret;\n}\nexport function mergeAttrs(target, source) {\n    Object.keys(source).forEach((attr) => {\n        if (attr === 'class') {\n            target[attr] = target[attr]\n                ? `${target[attr]} ${source[attr]}`\n                : source[attr];\n        }\n        else if (attr === 'style') {\n            const to = typeof target[attr] === 'object';\n            const so = typeof source[attr] === 'object';\n            let tt;\n            let ss;\n            if (to && so) {\n                tt = target[attr];\n                ss = source[attr];\n            }\n            else if (to) {\n                tt = target[attr];\n                ss = styleToObject(source[attr]);\n            }\n            else if (so) {\n                tt = styleToObject(target[attr]);\n                ss = source[attr];\n            }\n            else {\n                tt = styleToObject(target[attr]);\n                ss = styleToObject(source[attr]);\n            }\n            target[attr] = mergeAttrs(tt, ss);\n        }\n        else {\n            target[attr] = source[attr];\n        }\n    });\n    return target;\n}\n//# sourceMappingURL=attr.js.map","import { ObjectExt } from '../object';\nimport { mergeAttrs } from '../dom/attr';\nexport function annotate(t, annotations, opt = {}) {\n    const offset = opt.offset || 0;\n    const compacted = [];\n    const ret = [];\n    let curr;\n    let prev;\n    let batch = null;\n    for (let i = 0; i < t.length; i += 1) {\n        curr = ret[i] = t[i];\n        for (let j = 0, jj = annotations.length; j < jj; j += 1) {\n            const annotation = annotations[j];\n            const start = annotation.start + offset;\n            const end = annotation.end + offset;\n            if (i >= start && i < end) {\n                if (typeof curr === 'string') {\n                    curr = ret[i] = {\n                        t: t[i],\n                        attrs: annotation.attrs,\n                    };\n                }\n                else {\n                    curr.attrs = mergeAttrs(mergeAttrs({}, curr.attrs), annotation.attrs);\n                }\n                if (opt.includeAnnotationIndices) {\n                    if (curr.annotations == null) {\n                        curr.annotations = [];\n                    }\n                    curr.annotations.push(j);\n                }\n            }\n        }\n        prev = ret[i - 1];\n        if (!prev) {\n            batch = curr;\n        }\n        else if (ObjectExt.isObject(curr) && ObjectExt.isObject(prev)) {\n            batch = batch;\n            // Both previous item and the current one are annotations.\n            // If the attributes didn't change, merge the text.\n            if (JSON.stringify(curr.attrs) === JSON.stringify(prev.attrs)) {\n                batch.t += curr.t;\n            }\n            else {\n                compacted.push(batch);\n                batch = curr;\n            }\n        }\n        else if (ObjectExt.isObject(curr)) {\n            // Previous item was a string, current item is an annotation.\n            batch = batch;\n            compacted.push(batch);\n            batch = curr;\n        }\n        else if (ObjectExt.isObject(prev)) {\n            // Previous item was an annotation, current item is a string.\n            batch = batch;\n            compacted.push(batch);\n            batch = curr;\n        }\n        else {\n            // Both previous and current item are strings.\n            batch = (batch || '') + curr;\n        }\n    }\n    if (batch != null) {\n        compacted.push(batch);\n    }\n    return compacted;\n}\nexport function findAnnotationsAtIndex(annotations, index) {\n    return annotations\n        ? annotations.filter((a) => a.start < index && index <= a.end)\n        : [];\n}\nexport function findAnnotationsBetweenIndexes(annotations, start, end) {\n    return annotations\n        ? annotations.filter((a) => (start >= a.start && start < a.end) ||\n            (end > a.start && end <= a.end) ||\n            (a.start >= start && a.end < end))\n        : [];\n}\nexport function shiftAnnotations(annotations, index, offset) {\n    if (annotations) {\n        annotations.forEach((a) => {\n            if (a.start < index && a.end >= index) {\n                a.end += offset;\n            }\n            else if (a.start >= index) {\n                a.start += offset;\n                a.end += offset;\n            }\n        });\n    }\n    return annotations;\n}\n//# sourceMappingURL=annotate.js.map","/**\n * Replaces all spaces with the Unicode No-break space.\n * ref: http://www.fileformat.info/info/unicode/char/a0/index.htm\n *\n * IE would otherwise collapse all spaces into one. This is useful\n * e.g. in tests when you want to compare the actual DOM text content\n * without having to add the unicode character in the place of all spaces.\n */\nexport function sanitize(text) {\n    return text.replace(/ /g, '\\u00A0');\n}\n//# sourceMappingURL=sanitize.js.map","export var DataUri;\n(function (DataUri) {\n    function isDataUrl(url) {\n        const prefix = 'data:';\n        return url.substr(0, prefix.length) === prefix;\n    }\n    DataUri.isDataUrl = isDataUrl;\n    /**\n     * Converts an image at `url` to base64-encoded data uri.\n     * The mime type of the image is inferred from the `url` file extension.\n     */\n    function imageToDataUri(url, callback) {\n        // No need to convert to data uri if it is already in data uri.\n        if (!url || isDataUrl(url)) {\n            // Keep the async nature of the function.\n            setTimeout(() => callback(null, url));\n            return;\n        }\n        const onError = () => {\n            callback(new Error(`Failed to load image: ${url}`));\n        };\n        const onLoad = window.FileReader\n            ? // chrome, IE10+\n                (xhr) => {\n                    if (xhr.status === 200) {\n                        const reader = new FileReader();\n                        reader.onload = (evt) => {\n                            const dataUri = evt.target.result;\n                            callback(null, dataUri);\n                        };\n                        reader.onerror = onError;\n                        reader.readAsDataURL(xhr.response);\n                    }\n                    else {\n                        onError();\n                    }\n                }\n            : (xhr) => {\n                const toString = (u8a) => {\n                    const CHUNK_SZ = 0x8000;\n                    const c = [];\n                    for (let i = 0; i < u8a.length; i += CHUNK_SZ) {\n                        c.push(String.fromCharCode.apply(null, u8a.subarray(i, i + CHUNK_SZ)));\n                    }\n                    return c.join('');\n                };\n                if (xhr.status === 200) {\n                    let suffix = url.split('.').pop() || 'png';\n                    if (suffix === 'svg') {\n                        suffix = 'svg+xml';\n                    }\n                    const meta = `data:image/${suffix};base64,`;\n                    const bytes = new Uint8Array(xhr.response);\n                    const base64 = meta + btoa(toString(bytes));\n                    callback(null, base64);\n                }\n                else {\n                    onError();\n                }\n            };\n        const xhr = new XMLHttpRequest();\n        xhr.responseType = window.FileReader ? 'blob' : 'arraybuffer';\n        xhr.open('GET', url, true);\n        xhr.addEventListener('error', onError);\n        xhr.addEventListener('load', () => onLoad(xhr));\n        xhr.send();\n    }\n    DataUri.imageToDataUri = imageToDataUri;\n    function dataUriToBlob(dataUrl) {\n        let uri = dataUrl.replace(/\\s/g, '');\n        uri = decodeURIComponent(uri);\n        const index = uri.indexOf(',');\n        const dataType = uri.slice(0, index); // e.g. 'data:image/jpeg;base64'\n        const mime = dataType.split(':')[1].split(';')[0]; // e.g. 'image/jpeg'\n        const data = uri.slice(index + 1);\n        let decodedString;\n        if (dataType.indexOf('base64') >= 0) {\n            // data may be encoded in base64\n            decodedString = atob(data);\n        }\n        else {\n            // convert the decoded string to UTF-8\n            decodedString = unescape(encodeURIComponent(data));\n        }\n        // write the bytes of the string to a typed array\n        const ia = new Uint8Array(decodedString.length);\n        for (let i = 0; i < decodedString.length; i += 1) {\n            ia[i] = decodedString.charCodeAt(i);\n        }\n        return new Blob([ia], { type: mime });\n    }\n    DataUri.dataUriToBlob = dataUriToBlob;\n    function downloadBlob(blob, fileName) {\n        const msSaveBlob = window.navigator.msSaveBlob;\n        if (msSaveBlob) {\n            // requires IE 10+\n            // pulls up a save dialog\n            msSaveBlob(blob, fileName);\n        }\n        else {\n            // other browsers\n            // downloads directly in Chrome and Safari\n            // presents a save/open dialog in Firefox\n            // Firefox bug: `from` field in save dialog always shows `from:blob:`\n            // https://bugzilla.mozilla.org/show_bug.cgi?id=1053327\n            const url = window.URL.createObjectURL(blob);\n            const link = document.createElement('a');\n            link.href = url;\n            link.download = fileName;\n            document.body.appendChild(link);\n            link.click();\n            document.body.removeChild(link);\n            // mark the url for garbage collection\n            window.URL.revokeObjectURL(url);\n        }\n    }\n    DataUri.downloadBlob = downloadBlob;\n    function downloadDataUri(dataUrl, fileName) {\n        const blob = dataUriToBlob(dataUrl);\n        downloadBlob(blob, fileName);\n    }\n    DataUri.downloadDataUri = downloadDataUri;\n    function parseViewBox(svg) {\n        const matches = svg.match(/<svg[^>]*viewBox\\s*=\\s*([\"']?)(.+?)\\1[^>]*>/i);\n        if (matches && matches[2]) {\n            return matches[2].replace(/\\s+/, ' ').split(' ');\n        }\n        return null;\n    }\n    function getNumber(str) {\n        const ret = parseFloat(str);\n        return Number.isNaN(ret) ? null : ret;\n    }\n    function svgToDataUrl(svg, options = {}) {\n        let viewBox = null;\n        const getNumberFromViewBox = (index) => {\n            if (viewBox == null) {\n                viewBox = parseViewBox(svg);\n            }\n            if (viewBox != null) {\n                return getNumber(viewBox[index]);\n            }\n            return null;\n        };\n        const getNumberFromMatches = (reg) => {\n            const matches = svg.match(reg);\n            if (matches && matches[2]) {\n                return getNumber(matches[2]);\n            }\n            return null;\n        };\n        let w = options.width;\n        if (w == null) {\n            w = getNumberFromMatches(/<svg[^>]*width\\s*=\\s*([\"']?)(.+?)\\1[^>]*>/i);\n        }\n        if (w == null) {\n            w = getNumberFromViewBox(2);\n        }\n        if (w == null) {\n            throw new Error('Can not parse width from svg string');\n        }\n        let h = options.height;\n        if (h == null) {\n            h = getNumberFromMatches(/<svg[^>]*height\\s*=\\s*([\"']?)(.+?)\\1[^>]*>/i);\n        }\n        if (h == null) {\n            h = getNumberFromViewBox(3);\n        }\n        if (h == null) {\n            throw new Error('Can not parse height from svg string');\n        }\n        const decoded = encodeURIComponent(svg)\n            .replace(/'/g, '%27')\n            .replace(/\"/g, '%22');\n        const header = 'data:image/svg+xml';\n        const dataUrl = `${header},${decoded}`;\n        return dataUrl;\n    }\n    DataUri.svgToDataUrl = svgToDataUrl;\n})(DataUri || (DataUri = {}));\n//# sourceMappingURL=index.js.map","let millimeterSize;\nconst supportedUnits = {\n    px(val) {\n        return val;\n    },\n    mm(val) {\n        return millimeterSize * val;\n    },\n    cm(val) {\n        return millimeterSize * val * 10;\n    },\n    in(val) {\n        return millimeterSize * val * 25.4;\n    },\n    pt(val) {\n        return millimeterSize * ((25.4 * val) / 72);\n    },\n    pc(val) {\n        return millimeterSize * ((25.4 * val) / 6);\n    },\n};\n// eslint-disable-next-line\nexport var Unit;\n(function (Unit) {\n    function measure(cssWidth, cssHeight, unit) {\n        const div = document.createElement('div');\n        const style = div.style;\n        style.display = 'inline-block';\n        style.position = 'absolute';\n        style.left = '-15000px';\n        style.top = '-15000px';\n        style.width = cssWidth + (unit || 'px');\n        style.height = cssHeight + (unit || 'px');\n        document.body.appendChild(div);\n        const rect = div.getBoundingClientRect();\n        const size = {\n            width: rect.width || 0,\n            height: rect.height || 0,\n        };\n        document.body.removeChild(div);\n        return size;\n    }\n    Unit.measure = measure;\n    function toPx(val, unit) {\n        if (millimeterSize == null) {\n            millimeterSize = measure('1', '1', 'mm').width;\n        }\n        const convert = unit ? supportedUnits[unit] : null;\n        if (convert) {\n            return convert(val);\n        }\n        return val;\n    }\n    Unit.toPx = toPx;\n})(Unit || (Unit = {}));\n//# sourceMappingURL=index.js.map","const hyphenPattern = /-(.)/g;\nfunction camelize(str) {\n    return str.replace(hyphenPattern, (_, char) => char.toUpperCase());\n}\nconst memoized = {};\nconst prefixes = ['webkit', 'ms', 'moz', 'o'];\nconst testStyle = document ? document.createElement('div').style : {};\nfunction getWithPrefix(name) {\n    for (let i = 0; i < prefixes.length; i += 1) {\n        const prefixedName = prefixes[i] + name;\n        if (prefixedName in testStyle) {\n            return prefixedName;\n        }\n    }\n    return null;\n}\nexport function getVendorPrefixedName(property) {\n    const name = camelize(property);\n    if (memoized[name] == null) {\n        const capitalizedName = name.charAt(0).toUpperCase() + name.slice(1);\n        memoized[name] = name in testStyle ? name : getWithPrefix(capitalizedName);\n    }\n    return memoized[name];\n}\n//# sourceMappingURL=prefix.js.map","import { getVendorPrefixedName } from './prefix';\nexport function setPrefixedStyle(style, name, value) {\n    const vendor = getVendorPrefixedName(name);\n    if (vendor != null) {\n        style[vendor] = value;\n    }\n    style[name] = value;\n}\nexport function getComputedStyle(elem, name) {\n    // IE9+\n    const computed = elem.ownerDocument &&\n        elem.ownerDocument.defaultView &&\n        elem.ownerDocument.defaultView.opener\n        ? elem.ownerDocument.defaultView.getComputedStyle(elem, null)\n        : window.getComputedStyle(elem, null);\n    if (computed && name) {\n        return computed.getPropertyValue(name) || computed[name];\n    }\n    return computed;\n}\nexport function hasScrollbars(container) {\n    const style = getComputedStyle(container);\n    return (style != null && (style.overflow === 'scroll' || style.overflow === 'auto'));\n}\n//# sourceMappingURL=style.js.map","export const clearSelection = (function () {\n    const doc = document;\n    if (doc.selection) {\n        return function () {\n            doc.selection.empty();\n        };\n    }\n    if (window.getSelection) {\n        return function () {\n            const selection = window.getSelection();\n            if (selection) {\n                if (selection.empty) {\n                    selection.empty();\n                }\n                else if (selection.removeAllRanges) {\n                    selection.removeAllRanges();\n                }\n            }\n        };\n    }\n    return function () { };\n})();\n//# sourceMappingURL=selection.js.map","import { getVendorPrefixedName } from './prefix';\nconst numericProps = {\n    animationIterationCount: true,\n    columnCount: true,\n    flexGrow: true,\n    flexShrink: true,\n    fontWeight: true,\n    gridArea: true,\n    gridColumn: true,\n    gridColumnEnd: true,\n    gridColumnStart: true,\n    gridRow: true,\n    gridRowEnd: true,\n    gridRowStart: true,\n    lineHeight: true,\n    opacity: true,\n    order: true,\n    orphans: true,\n    widows: true,\n    zIndex: true,\n};\nexport function isCSSVariable(prop) {\n    return /^--/.test(prop);\n}\nexport function computeStyle(elem, prop, isVariable) {\n    const style = window.getComputedStyle(elem, null);\n    return isVariable\n        ? style.getPropertyValue(prop) || undefined\n        : style[prop] || elem.style[prop];\n}\nexport function computeStyleInt(elem, prop) {\n    return parseInt(computeStyle(elem, prop), 10) || 0;\n}\nfunction getSuffixedValue(prop, value) {\n    return !numericProps[prop] && typeof value === 'number' ? `${value}px` : value;\n}\nexport function css(elem, prop, value) {\n    if (typeof prop === 'string') {\n        const isVariable = isCSSVariable(prop);\n        if (!isVariable) {\n            prop = getVendorPrefixedName(prop); // eslint-disable-line\n        }\n        if (value === undefined) {\n            return computeStyle(elem, prop, isVariable);\n        }\n        if (!isVariable) {\n            value = getSuffixedValue(prop, value); // eslint-disable-line\n        }\n        const style = elem.style;\n        if (isVariable) {\n            style.setProperty(prop, value);\n        }\n        else {\n            style[prop] = value;\n        }\n        return;\n    }\n    // eslint-disable-next-line\n    for (const key in prop) {\n        css(elem, key, prop[key]);\n    }\n}\n//# sourceMappingURL=css.js.map","import { StringExt } from '../string';\nconst dataset = new WeakMap();\nexport function getData(elem, name) {\n    const key = StringExt.camelCase(name);\n    const cache = dataset.get(elem);\n    if (cache) {\n        return cache[key];\n    }\n}\nexport function setData(elem, name, value) {\n    const key = StringExt.camelCase(name);\n    const cache = dataset.get(elem);\n    if (cache) {\n        cache[key] = value;\n    }\n    else {\n        dataset.set(elem, {\n            [key]: value,\n        });\n    }\n}\nexport function data(elem, name, value) {\n    if (!name) {\n        const datas = {};\n        Object.keys(dataset).forEach((key) => {\n            datas[key] = getData(elem, key);\n        });\n        return datas;\n    }\n    if (typeof name === 'string') {\n        if (value === undefined) {\n            return getData(elem, name);\n        }\n        setData(elem, name, value);\n        return;\n    }\n    // eslint-disable-next-line\n    for (const key in name) {\n        data(elem, key, name[key]);\n    }\n}\n//# sourceMappingURL=data.js.map","const propMap = {\n    /* GENERAL */\n    class: 'className',\n    contenteditable: 'contentEditable',\n    /* LABEL */\n    for: 'htmlFor',\n    /* INPUT */\n    readonly: 'readOnly',\n    maxlength: 'maxLength',\n    tabindex: 'tabIndex',\n    /* TABLE */\n    colspan: 'colSpan',\n    rowspan: 'rowSpan',\n    /* IMAGE */\n    usemap: 'useMap',\n};\nexport function prop(elem, props, value) {\n    if (!props) {\n        return;\n    }\n    if (typeof props === 'string') {\n        props = propMap[props] || props; // eslint-disable-line\n        if (arguments.length < 3) {\n            return elem[props];\n        }\n        ;\n        elem[props] = value;\n        return;\n    }\n    // eslint-disable-next-line\n    for (const key in props) {\n        prop(elem, key, props[key]);\n    }\n}\n//# sourceMappingURL=prop.js.map","import * as Dom from '../dom/main';\nexport class Vector {\n    get [Symbol.toStringTag]() {\n        return Vector.toStringTag;\n    }\n    get type() {\n        return this.node.nodeName;\n    }\n    get id() {\n        return this.node.id;\n    }\n    set id(id) {\n        this.node.id = id;\n    }\n    constructor(elem, attrs, children) {\n        if (!elem) {\n            throw new TypeError('Invalid element to create vector');\n        }\n        let node;\n        if (Vector.isVector(elem)) {\n            node = elem.node;\n        }\n        else if (typeof elem === 'string') {\n            if (elem.toLowerCase() === 'svg') {\n                node = Dom.createSvgDocument();\n            }\n            else if (elem[0] === '<') {\n                const doc = Dom.createSvgDocument(elem);\n                // only import the first child\n                node = document.importNode(doc.firstChild, true);\n            }\n            else {\n                node = document.createElementNS(Dom.ns.svg, elem);\n            }\n        }\n        else {\n            node = elem;\n        }\n        this.node = node;\n        if (attrs) {\n            this.setAttributes(attrs);\n        }\n        if (children) {\n            this.append(children);\n        }\n    }\n    transform(matrix, options) {\n        if (matrix == null) {\n            return Dom.transform(this.node);\n        }\n        Dom.transform(this.node, matrix, options);\n        return this;\n    }\n    translate(tx, ty = 0, options = {}) {\n        if (tx == null) {\n            return Dom.translate(this.node);\n        }\n        Dom.translate(this.node, tx, ty, options);\n        return this;\n    }\n    rotate(angle, cx, cy, options = {}) {\n        if (angle == null) {\n            return Dom.rotate(this.node);\n        }\n        Dom.rotate(this.node, angle, cx, cy, options);\n        return this;\n    }\n    scale(sx, sy) {\n        if (sx == null) {\n            return Dom.scale(this.node);\n        }\n        Dom.scale(this.node, sx, sy);\n        return this;\n    }\n    /**\n     * Returns an SVGMatrix that specifies the transformation necessary\n     * to convert this coordinate system into `target` coordinate system.\n     */\n    getTransformToElement(target) {\n        const ref = Vector.toNode(target);\n        return Dom.getTransformToElement(this.node, ref);\n    }\n    removeAttribute(name) {\n        Dom.removeAttribute(this.node, name);\n        return this;\n    }\n    getAttribute(name) {\n        return Dom.getAttribute(this.node, name);\n    }\n    setAttribute(name, value) {\n        Dom.setAttribute(this.node, name, value);\n        return this;\n    }\n    setAttributes(attrs) {\n        Dom.setAttributes(this.node, attrs);\n        return this;\n    }\n    attr(name, value) {\n        if (name == null) {\n            return Dom.attr(this.node);\n        }\n        if (typeof name === 'string' && value === undefined) {\n            return Dom.attr(this.node, name);\n        }\n        if (typeof name === 'object') {\n            Dom.attr(this.node, name);\n        }\n        else {\n            Dom.attr(this.node, name, value);\n        }\n        return this;\n    }\n    svg() {\n        return this.node instanceof SVGSVGElement\n            ? this\n            : Vector.create(this.node.ownerSVGElement);\n    }\n    defs() {\n        const context = this.svg() || this;\n        const defsNode = context.node.getElementsByTagName('defs')[0];\n        if (defsNode) {\n            return Vector.create(defsNode);\n        }\n        return Vector.create('defs').appendTo(context);\n    }\n    text(content, options = {}) {\n        Dom.text(this.node, content, options);\n        return this;\n    }\n    tagName() {\n        return Dom.tagName(this.node);\n    }\n    clone() {\n        return Vector.create(this.node.cloneNode(true));\n    }\n    remove() {\n        Dom.remove(this.node);\n        return this;\n    }\n    empty() {\n        Dom.empty(this.node);\n        return this;\n    }\n    append(elems) {\n        Dom.append(this.node, Vector.toNodes(elems));\n        return this;\n    }\n    appendTo(target) {\n        Dom.appendTo(this.node, Vector.isVector(target) ? target.node : target);\n        return this;\n    }\n    prepend(elems) {\n        Dom.prepend(this.node, Vector.toNodes(elems));\n        return this;\n    }\n    before(elems) {\n        Dom.before(this.node, Vector.toNodes(elems));\n        return this;\n    }\n    replace(elem) {\n        if (this.node.parentNode) {\n            this.node.parentNode.replaceChild(Vector.toNode(elem), this.node);\n        }\n        return Vector.create(elem);\n    }\n    first() {\n        return this.node.firstChild\n            ? Vector.create(this.node.firstChild)\n            : null;\n    }\n    last() {\n        return this.node.lastChild\n            ? Vector.create(this.node.lastChild)\n            : null;\n    }\n    get(index) {\n        const child = this.node.childNodes[index];\n        return child ? Vector.create(child) : null;\n    }\n    indexOf(elem) {\n        const children = Array.prototype.slice.call(this.node.childNodes);\n        return children.indexOf(Vector.toNode(elem));\n    }\n    find(selector) {\n        const vels = [];\n        const nodes = Dom.find(this.node, selector);\n        if (nodes) {\n            for (let i = 0, ii = nodes.length; i < ii; i += 1) {\n                vels.push(Vector.create(nodes[i]));\n            }\n        }\n        return vels;\n    }\n    findOne(selector) {\n        const found = Dom.findOne(this.node, selector);\n        return found ? Vector.create(found) : null;\n    }\n    findParentByClass(className, terminator) {\n        const node = Dom.findParentByClass(this.node, className, terminator);\n        return node ? Vector.create(node) : null;\n    }\n    matches(selector) {\n        const node = this.node;\n        const matches = this.node.matches;\n        const matcher = node.matches ||\n            node.matchesSelector ||\n            node.msMatchesSelector ||\n            node.mozMatchesSelector ||\n            node.webkitMatchesSelector ||\n            node.oMatchesSelector ||\n            null;\n        return matcher && matcher.call(node, selector);\n    }\n    contains(child) {\n        return Dom.contains(this.node, Vector.isVector(child) ? child.node : child);\n    }\n    wrap(node) {\n        const vel = Vector.create(node);\n        const parentNode = this.node.parentNode;\n        if (parentNode != null) {\n            parentNode.insertBefore(vel.node, this.node);\n        }\n        return vel.append(this);\n    }\n    parent(type) {\n        let parent = this; // eslint-disable-line @typescript-eslint/no-this-alias\n        // check for parent\n        if (parent.node.parentNode == null) {\n            return null;\n        }\n        // get parent element\n        parent = Vector.create(parent.node.parentNode);\n        if (type == null) {\n            return parent;\n        }\n        // loop trough ancestors if type is given\n        do {\n            if (typeof type === 'string' ? parent.matches(type) : parent instanceof type) {\n                return parent;\n            }\n        } while ((parent = Vector.create(parent.node.parentNode)));\n        return parent;\n    }\n    children() {\n        const children = this.node.childNodes;\n        const vels = [];\n        for (let i = 0; i < children.length; i += 1) {\n            const currentChild = children[i];\n            if (currentChild.nodeType === 1) {\n                vels.push(Vector.create(children[i]));\n            }\n        }\n        return vels;\n    }\n    eachChild(fn, deep) {\n        const children = this.children();\n        for (let i = 0, l = children.length; i < l; i += 1) {\n            fn.call(children[i], children[i], i, children);\n            if (deep) {\n                children[i].eachChild(fn, deep);\n            }\n        }\n        return this;\n    }\n    index() {\n        return Dom.index(this.node);\n    }\n    hasClass(className) {\n        return Dom.hasClass(this.node, className);\n    }\n    addClass(className) {\n        Dom.addClass(this.node, className);\n        return this;\n    }\n    removeClass(className) {\n        Dom.removeClass(this.node, className);\n        return this;\n    }\n    toggleClass(className, stateVal) {\n        Dom.toggleClass(this.node, className, stateVal);\n        return this;\n    }\n    toLocalPoint(x, y) {\n        return Dom.toLocalPoint(this.node, x, y);\n    }\n    /**\n     * Samples the underlying SVG element (it currently works only on\n     * paths - where it is most useful anyway). Returns an array of objects\n     * of the form `{ x: Number, y: Number, distance: Number }`. Each of these\n     * objects represent a point on the path. This basically creates a discrete\n     * representation of the path (which is possible a curve). The sampling\n     * interval defines the accuracy of the sampling. In other words, we travel\n     * from the beginning of the path to the end by interval distance (on the\n     * path, not between the resulting points) and collect the discrete points\n     * on the path. This is very useful in many situations. For example, SVG\n     * does not provide a built-in mechanism to find intersections between two\n     * paths. Using sampling, we can just generate bunch of points for each of\n     * the path and find the closest ones from each set.\n     */\n    sample(interval = 1) {\n        if (this.node instanceof SVGPathElement) {\n            return Dom.sample(this.node, interval);\n        }\n        return [];\n    }\n    toPath() {\n        return Vector.create(Dom.toPath(this.node));\n    }\n    toPathData() {\n        return Dom.toPathData(this.node);\n    }\n}\n(function (Vector) {\n    Vector.toStringTag = `X6.${Vector.name}`;\n    function isVector(instance) {\n        if (instance == null) {\n            return false;\n        }\n        if (instance instanceof Vector) {\n            return true;\n        }\n        const tag = instance[Symbol.toStringTag];\n        const vector = instance;\n        if ((tag == null || tag === Vector.toStringTag) &&\n            vector.node instanceof SVGElement &&\n            typeof vector.sample === 'function' &&\n            typeof vector.toPath === 'function') {\n            return true;\n        }\n        return false;\n    }\n    Vector.isVector = isVector;\n    function create(elem, attrs, children) {\n        return new Vector(elem, attrs, children);\n    }\n    Vector.create = create;\n    function createVectors(markup) {\n        if (markup[0] === '<') {\n            const svgDoc = Dom.createSvgDocument(markup);\n            const vels = [];\n            for (let i = 0, ii = svgDoc.childNodes.length; i < ii; i += 1) {\n                const childNode = svgDoc.childNodes[i];\n                vels.push(create(document.importNode(childNode, true)));\n            }\n            return vels;\n        }\n        return [create(markup)];\n    }\n    Vector.createVectors = createVectors;\n    function toNode(elem) {\n        if (isVector(elem)) {\n            return elem.node;\n        }\n        return elem;\n    }\n    Vector.toNode = toNode;\n    function toNodes(elems) {\n        if (Array.isArray(elems)) {\n            return elems.map((elem) => toNode(elem));\n        }\n        return [toNode(elems)];\n    }\n    Vector.toNodes = toNodes;\n})(Vector || (Vector = {}));\n//# sourceMappingURL=index.js.map","/* eslint-disable no-control-regex */\nimport { Text } from '../text';\nimport { attr } from './attr';\nimport { Vector } from '../vector';\nimport { createSvgElement, empty } from './elem';\nconst canvasContext = document.createElement('canvas').getContext('2d');\nfunction createTextPathNode(attrs, elem) {\n    const vel = Vector.create(elem);\n    const textPath = Vector.create('textPath');\n    const d = attrs.d;\n    if (d && attrs['xlink:href'] === undefined) {\n        const path = Vector.create('path').attr('d', d).appendTo(vel.defs());\n        textPath.attr('xlink:href', `#${path.id}`);\n    }\n    if (typeof attrs === 'object') {\n        textPath.attr(attrs);\n    }\n    return textPath.node;\n}\nfunction annotateTextLine(lineNode, lineAnnotations, options) {\n    const eol = options.eol;\n    const baseSize = options.baseSize;\n    const lineHeight = options.lineHeight;\n    let maxFontSize = 0;\n    let tspanNode;\n    const fontMetrics = {};\n    const lastJ = lineAnnotations.length - 1;\n    for (let j = 0; j <= lastJ; j += 1) {\n        let annotation = lineAnnotations[j];\n        let fontSize = null;\n        if (typeof annotation === 'object') {\n            const annotationAttrs = annotation.attrs;\n            const vTSpan = Vector.create('tspan', annotationAttrs);\n            tspanNode = vTSpan.node;\n            let t = annotation.t;\n            if (eol && j === lastJ) {\n                t += eol;\n            }\n            tspanNode.textContent = t;\n            // Per annotation className\n            const annotationClass = annotationAttrs.class;\n            if (annotationClass) {\n                vTSpan.addClass(annotationClass);\n            }\n            // set the list of indices of all the applied annotations\n            // in the `annotations` attribute. This list is a comma\n            // separated list of indices.\n            if (options.includeAnnotationIndices) {\n                vTSpan.attr('annotations', annotation.annotations.join(','));\n            }\n            // Check for max font size\n            fontSize = parseFloat(annotationAttrs['font-size']);\n            if (fontSize === undefined)\n                fontSize = baseSize;\n            if (fontSize && fontSize > maxFontSize)\n                maxFontSize = fontSize;\n        }\n        else {\n            if (eol && j === lastJ) {\n                annotation += eol;\n            }\n            tspanNode = document.createTextNode(annotation || ' ');\n            if (baseSize && baseSize > maxFontSize) {\n                maxFontSize = baseSize;\n            }\n        }\n        lineNode.appendChild(tspanNode);\n    }\n    if (maxFontSize) {\n        fontMetrics.maxFontSize = maxFontSize;\n    }\n    if (lineHeight) {\n        fontMetrics.lineHeight = lineHeight;\n    }\n    else if (maxFontSize) {\n        fontMetrics.lineHeight = maxFontSize * 1.2;\n    }\n    return fontMetrics;\n}\nconst emRegex = /em$/;\nfunction emToPx(em, fontSize) {\n    const numerical = parseFloat(em);\n    if (emRegex.test(em)) {\n        return numerical * fontSize;\n    }\n    return numerical;\n}\nfunction calculateDY(alignment, linesMetrics, baseSizePx, lineHeight) {\n    if (!Array.isArray(linesMetrics)) {\n        return 0;\n    }\n    const n = linesMetrics.length;\n    if (!n)\n        return 0;\n    let lineMetrics = linesMetrics[0];\n    const flMaxFont = emToPx(lineMetrics.maxFontSize, baseSizePx) || baseSizePx;\n    let rLineHeights = 0;\n    const lineHeightPx = emToPx(lineHeight, baseSizePx);\n    for (let i = 1; i < n; i += 1) {\n        lineMetrics = linesMetrics[i];\n        const iLineHeight = emToPx(lineMetrics.lineHeight, baseSizePx) || lineHeightPx;\n        rLineHeights += iLineHeight;\n    }\n    const llMaxFont = emToPx(lineMetrics.maxFontSize, baseSizePx) || baseSizePx;\n    let dy;\n    switch (alignment) {\n        case 'middle':\n            dy = flMaxFont / 2 - 0.15 * llMaxFont - rLineHeights / 2;\n            break;\n        case 'bottom':\n            dy = -(0.25 * llMaxFont) - rLineHeights;\n            break;\n        case 'top':\n        default:\n            dy = 0.8 * flMaxFont;\n            break;\n    }\n    return dy;\n}\nexport function text(elem, content, options = {}) {\n    content = Text.sanitize(content); // eslint-disable-line\n    const eol = options.eol;\n    let textPath = options.textPath;\n    const verticalAnchor = options.textVerticalAnchor;\n    const namedVerticalAnchor = verticalAnchor === 'middle' ||\n        verticalAnchor === 'bottom' ||\n        verticalAnchor === 'top';\n    // Horizontal shift applied to all the lines but the first.\n    let x = options.x;\n    if (x === undefined) {\n        x = elem.getAttribute('x') || 0;\n    }\n    // Annotations\n    const iai = options.includeAnnotationIndices;\n    let annotations = options.annotations;\n    if (annotations && !Array.isArray(annotations)) {\n        annotations = [annotations];\n    }\n    // Shift all the <tspan> but first by one line (`1em`)\n    const defaultLineHeight = options.lineHeight;\n    const autoLineHeight = defaultLineHeight === 'auto';\n    const lineHeight = autoLineHeight ? '1.5em' : defaultLineHeight || '1em';\n    let needEmpty = true;\n    const childNodes = elem.childNodes;\n    if (childNodes.length === 1) {\n        const node = childNodes[0];\n        if (node && node.tagName.toUpperCase() === 'TITLE') {\n            needEmpty = false;\n        }\n    }\n    if (needEmpty) {\n        empty(elem);\n    }\n    attr(elem, {\n        // Preserve spaces, do not consecutive spaces to get collapsed to one.\n        'xml:space': 'preserve',\n        // An empty text gets rendered into the DOM in webkit-based browsers.\n        // In order to unify this behaviour across all browsers\n        // we rather hide the text element when it's empty.\n        display: content || options.displayEmpty ? null : 'none',\n    });\n    // Set default font-size if none\n    const strFontSize = attr(elem, 'font-size');\n    let fontSize = parseFloat(strFontSize);\n    if (!fontSize) {\n        fontSize = 16;\n        if ((namedVerticalAnchor || annotations) && !strFontSize) {\n            attr(elem, 'font-size', `${fontSize}`);\n        }\n    }\n    let containerNode;\n    if (textPath) {\n        // Now all the `<tspan>`s will be inside the `<textPath>`.\n        if (typeof textPath === 'string') {\n            textPath = { d: textPath };\n        }\n        containerNode = createTextPathNode(textPath, elem);\n    }\n    else {\n        containerNode = document.createDocumentFragment();\n    }\n    let dy;\n    let offset = 0;\n    let annotatedY;\n    const lines = content.split('\\n');\n    const linesMetrics = [];\n    const lastI = lines.length - 1;\n    for (let i = 0; i <= lastI; i += 1) {\n        dy = lineHeight;\n        let lineClassName = 'v-line';\n        const lineNode = createSvgElement('tspan');\n        let lineMetrics;\n        let line = lines[i];\n        if (line) {\n            if (annotations) {\n                // Find the *compacted* annotations for this line.\n                const lineAnnotations = Text.annotate(line, annotations, {\n                    offset: -offset,\n                    includeAnnotationIndices: iai,\n                });\n                lineMetrics = annotateTextLine(lineNode, lineAnnotations, {\n                    eol: i !== lastI && eol,\n                    baseSize: fontSize,\n                    lineHeight: autoLineHeight ? null : lineHeight,\n                    includeAnnotationIndices: iai,\n                });\n                // Get the line height based on the biggest font size\n                // in the annotations for this line.\n                const iLineHeight = lineMetrics.lineHeight;\n                if (iLineHeight && autoLineHeight && i !== 0) {\n                    dy = iLineHeight;\n                }\n                if (i === 0) {\n                    annotatedY = lineMetrics.maxFontSize * 0.8;\n                }\n            }\n            else {\n                if (eol && i !== lastI) {\n                    line += eol;\n                }\n                lineNode.textContent = line;\n            }\n        }\n        else {\n            // Make sure the textContent is never empty. If it is, add a dummy\n            // character and make it invisible, making the following lines correctly\n            // relatively positioned. `dy=1em` won't work with empty lines otherwise.\n            lineNode.textContent = '-';\n            lineClassName += ' v-empty-line';\n            const lineNodeStyle = lineNode.style;\n            lineNodeStyle.fillOpacity = 0;\n            lineNodeStyle.strokeOpacity = 0;\n            if (annotations) {\n                lineMetrics = {};\n            }\n        }\n        if (lineMetrics) {\n            linesMetrics.push(lineMetrics);\n        }\n        if (i > 0) {\n            lineNode.setAttribute('dy', dy);\n        }\n        // Firefox requires 'x' to be set on the first line\n        if (i > 0 || textPath) {\n            lineNode.setAttribute('x', x);\n        }\n        lineNode.className.baseVal = lineClassName;\n        containerNode.appendChild(lineNode);\n        offset += line.length + 1; // + 1 = newline character.\n    }\n    // Y Alignment calculation\n    if (namedVerticalAnchor) {\n        if (annotations) {\n            dy = calculateDY(verticalAnchor, linesMetrics, fontSize, lineHeight);\n        }\n        else if (verticalAnchor === 'top') {\n            // A shortcut for top alignment. It does not depend on font-size nor line-height\n            dy = '0.8em';\n        }\n        else {\n            let rh; // remaining height\n            if (lastI > 0) {\n                rh = parseFloat(lineHeight) || 1;\n                rh *= lastI;\n                if (!emRegex.test(lineHeight))\n                    rh /= fontSize;\n            }\n            else {\n                // Single-line text\n                rh = 0;\n            }\n            switch (verticalAnchor) {\n                case 'middle':\n                    dy = `${0.3 - rh / 2}em`;\n                    break;\n                case 'bottom':\n                    dy = `${-rh - 0.3}em`;\n                    break;\n                default:\n                    break;\n            }\n        }\n    }\n    else if (verticalAnchor === 0) {\n        dy = '0em';\n    }\n    else if (verticalAnchor) {\n        dy = verticalAnchor;\n    }\n    else {\n        // No vertical anchor is defined\n        dy = 0;\n        // Backwards compatibility - we change the `y` attribute instead of `dy`.\n        if (elem.getAttribute('y') == null) {\n            elem.setAttribute('y', `${annotatedY || '0.8em'}`);\n        }\n    }\n    const firstLine = containerNode.firstChild;\n    firstLine.setAttribute('dy', dy);\n    elem.appendChild(containerNode);\n}\nexport function measureText(text, styles = {}) {\n    if (!text) {\n        return { width: 0 };\n    }\n    const font = [];\n    const fontSize = styles['font-size']\n        ? `${parseFloat(styles['font-size'])}px`\n        : '14px';\n    font.push(styles['font-style'] || 'normal');\n    font.push(styles['font-variant'] || 'normal');\n    font.push(styles['font-weight'] || 400);\n    font.push(fontSize);\n    font.push(styles['font-family'] || 'sans-serif');\n    canvasContext.font = font.join(' ');\n    return canvasContext.measureText(text);\n}\nexport function splitTextByLength(text, splitWidth, totalWidth, style = {}) {\n    if (splitWidth >= totalWidth) {\n        return [text, ''];\n    }\n    const length = text.length;\n    const caches = {};\n    let index = Math.round((splitWidth / totalWidth) * length - 1);\n    if (index < 0) {\n        index = 0;\n    }\n    // eslint-disable-next-line\n    while (index >= 0 && index < length) {\n        const frontText = text.slice(0, index);\n        const frontWidth = caches[frontText] || measureText(frontText, style).width;\n        const behindText = text.slice(0, index + 1);\n        const behindWidth = caches[behindText] || measureText(behindText, style).width;\n        caches[frontText] = frontWidth;\n        caches[behindText] = behindWidth;\n        if (frontWidth > splitWidth) {\n            index -= 1;\n        }\n        else if (behindWidth <= splitWidth) {\n            index += 1;\n        }\n        else {\n            break;\n        }\n    }\n    return [text.slice(0, index), text.slice(index)];\n}\nexport function breakText(text, size, styles = {}, options = {}) {\n    const width = size.width;\n    const height = size.height;\n    const eol = options.eol || '\\n';\n    const { width: textWidth } = measureText(text, styles);\n    if (textWidth < width) {\n        return text;\n    }\n    const lines = [];\n    const fontSize = styles.fontSize || 14;\n    const lineHeight = styles.lineHeight\n        ? parseFloat(styles.lineHeight)\n        : Math.ceil(fontSize * 1.4);\n    const maxLines = Math.floor(height / lineHeight);\n    let remainText = text;\n    let remainWidth = textWidth;\n    let ellipsis = options.ellipsis;\n    let ellipsisWidth = 0;\n    if (ellipsis) {\n        if (typeof ellipsis !== 'string') {\n            ellipsis = '\\u2026';\n        }\n        ellipsisWidth = measureText(ellipsis, styles).width;\n    }\n    for (let i = 0; i < maxLines; i += 1) {\n        if (remainWidth > width) {\n            const isLast = i === maxLines - 1;\n            if (isLast) {\n                const [front] = splitTextByLength(remainText, width - ellipsisWidth, remainWidth, styles);\n                lines.push(ellipsis ? `${front}${ellipsis}` : front);\n            }\n            else {\n                const [front, behind] = splitTextByLength(remainText, width, remainWidth, styles);\n                lines.push(front);\n                remainText = behind;\n                remainWidth = measureText(remainText, styles).width;\n            }\n        }\n        else {\n            lines.push(remainText);\n            break;\n        }\n    }\n    return lines.join(eol);\n}\n//# sourceMappingURL=text.js.map","import { attr } from './attr';\nimport { createSvgElement } from './elem';\nexport const KAPPA = 0.551784;\nfunction getNumbericAttribute(elem, attr, defaultValue = NaN) {\n    const v = elem.getAttribute(attr);\n    if (v == null) {\n        return defaultValue;\n    }\n    const n = parseFloat(v);\n    return Number.isNaN(n) ? defaultValue : n;\n}\nexport function sample(elem, interval = 1) {\n    const length = elem.getTotalLength();\n    const samples = [];\n    let distance = 0;\n    let sample;\n    while (distance < length) {\n        sample = elem.getPointAtLength(distance);\n        samples.push({ distance, x: sample.x, y: sample.y });\n        distance += interval;\n    }\n    return samples;\n}\nexport function lineToPathData(line) {\n    return [\n        'M',\n        getNumbericAttribute(line, 'x1'),\n        getNumbericAttribute(line, 'y1'),\n        'L',\n        getNumbericAttribute(line, 'x2'),\n        getNumbericAttribute(line, 'y2'),\n    ].join(' ');\n}\nexport function polygonToPathData(polygon) {\n    const points = getPointsFromSvgElement(polygon);\n    if (points.length === 0) {\n        return null;\n    }\n    return `${svgPointsToPath(points)} Z`;\n}\nexport function polylineToPathData(polyline) {\n    const points = getPointsFromSvgElement(polyline);\n    if (points.length === 0) {\n        return null;\n    }\n    return svgPointsToPath(points);\n}\nfunction svgPointsToPath(points) {\n    const arr = points.map((p) => `${p.x} ${p.y}`);\n    return `M ${arr.join(' L')}`;\n}\nexport function getPointsFromSvgElement(elem) {\n    const points = [];\n    const nodePoints = elem.points;\n    if (nodePoints) {\n        for (let i = 0, ii = nodePoints.numberOfItems; i < ii; i += 1) {\n            points.push(nodePoints.getItem(i));\n        }\n    }\n    return points;\n}\nexport function circleToPathData(circle) {\n    const cx = getNumbericAttribute(circle, 'cx', 0);\n    const cy = getNumbericAttribute(circle, 'cy', 0);\n    const r = getNumbericAttribute(circle, 'r');\n    const cd = r * KAPPA; // Control distance.\n    return [\n        'M',\n        cx,\n        cy - r,\n        'C',\n        cx + cd,\n        cy - r,\n        cx + r,\n        cy - cd,\n        cx + r,\n        cy,\n        'C',\n        cx + r,\n        cy + cd,\n        cx + cd,\n        cy + r,\n        cx,\n        cy + r,\n        'C',\n        cx - cd,\n        cy + r,\n        cx - r,\n        cy + cd,\n        cx - r,\n        cy,\n        'C',\n        cx - r,\n        cy - cd,\n        cx - cd,\n        cy - r,\n        cx,\n        cy - r,\n        'Z',\n    ].join(' ');\n}\nexport function ellipseToPathData(ellipse) {\n    const cx = getNumbericAttribute(ellipse, 'cx', 0);\n    const cy = getNumbericAttribute(ellipse, 'cy', 0);\n    const rx = getNumbericAttribute(ellipse, 'rx');\n    const ry = getNumbericAttribute(ellipse, 'ry') || rx;\n    const cdx = rx * KAPPA; // Control distance x.\n    const cdy = ry * KAPPA; // Control distance y.\n    const d = [\n        'M',\n        cx,\n        cy - ry,\n        'C',\n        cx + cdx,\n        cy - ry,\n        cx + rx,\n        cy - cdy,\n        cx + rx,\n        cy,\n        'C',\n        cx + rx,\n        cy + cdy,\n        cx + cdx,\n        cy + ry,\n        cx,\n        cy + ry,\n        'C',\n        cx - cdx,\n        cy + ry,\n        cx - rx,\n        cy + cdy,\n        cx - rx,\n        cy,\n        'C',\n        cx - rx,\n        cy - cdy,\n        cx - cdx,\n        cy - ry,\n        cx,\n        cy - ry,\n        'Z',\n    ].join(' ');\n    return d;\n}\nexport function rectangleToPathData(rect) {\n    return rectToPathData({\n        x: getNumbericAttribute(rect, 'x', 0),\n        y: getNumbericAttribute(rect, 'y', 0),\n        width: getNumbericAttribute(rect, 'width', 0),\n        height: getNumbericAttribute(rect, 'height', 0),\n        rx: getNumbericAttribute(rect, 'rx', 0),\n        ry: getNumbericAttribute(rect, 'ry', 0),\n    });\n}\nexport function rectToPathData(r) {\n    let d;\n    const x = r.x;\n    const y = r.y;\n    const width = r.width;\n    const height = r.height;\n    const topRx = Math.min(r.rx || r['top-rx'] || 0, width / 2);\n    const bottomRx = Math.min(r.rx || r['bottom-rx'] || 0, width / 2);\n    const topRy = Math.min(r.ry || r['top-ry'] || 0, height / 2);\n    const bottomRy = Math.min(r.ry || r['bottom-ry'] || 0, height / 2);\n    if (topRx || bottomRx || topRy || bottomRy) {\n        d = [\n            'M',\n            x,\n            y + topRy,\n            'v',\n            height - topRy - bottomRy,\n            'a',\n            bottomRx,\n            bottomRy,\n            0,\n            0,\n            0,\n            bottomRx,\n            bottomRy,\n            'h',\n            width - 2 * bottomRx,\n            'a',\n            bottomRx,\n            bottomRy,\n            0,\n            0,\n            0,\n            bottomRx,\n            -bottomRy,\n            'v',\n            -(height - bottomRy - topRy),\n            'a',\n            topRx,\n            topRy,\n            0,\n            0,\n            0,\n            -topRx,\n            -topRy,\n            'h',\n            -(width - 2 * topRx),\n            'a',\n            topRx,\n            topRy,\n            0,\n            0,\n            0,\n            -topRx,\n            topRy,\n            'Z',\n        ];\n    }\n    else {\n        d = ['M', x, y, 'H', x + width, 'V', y + height, 'H', x, 'V', y, 'Z'];\n    }\n    return d.join(' ');\n}\nexport function toPath(elem) {\n    const path = createSvgElement('path');\n    attr(path, attr(elem));\n    const d = toPathData(elem);\n    if (d) {\n        path.setAttribute('d', d);\n    }\n    return path;\n}\nexport function toPathData(elem) {\n    const tagName = elem.tagName.toLowerCase();\n    switch (tagName) {\n        case 'path':\n            return elem.getAttribute('d');\n        case 'line':\n            return lineToPathData(elem);\n        case 'polygon':\n            return polygonToPathData(elem);\n        case 'polyline':\n            return polylineToPathData(elem);\n        case 'ellipse':\n            return ellipseToPathData(elem);\n        case 'circle':\n            return circleToPathData(elem);\n        case 'rect':\n            return rectangleToPathData(elem);\n        default:\n            break;\n    }\n    throw new Error(`\"${tagName}\" cannot be converted to svg path element.`);\n}\n// Inspired by d3.js https://github.com/mbostock/d3/blob/master/src/svg/arc.js\nexport function createSlicePathData(innerRadius, outerRadius, startAngle, endAngle) {\n    const svgArcMax = 2 * Math.PI - 1e-6;\n    const r0 = innerRadius;\n    const r1 = outerRadius;\n    let a0 = startAngle;\n    let a1 = endAngle;\n    if (a1 < a0) {\n        const tmp = a0;\n        a0 = a1;\n        a1 = tmp;\n    }\n    const da = a1 - a0;\n    const df = da < Math.PI ? '0' : '1';\n    const c0 = Math.cos(a0);\n    const s0 = Math.sin(a0);\n    const c1 = Math.cos(a1);\n    const s1 = Math.sin(a1);\n    return da >= svgArcMax\n        ? r0\n            ? // eslint-disable-next-line\n                `M0,${r1}A${r1},${r1} 0 1,1 0,${-r1}A${r1},${r1} 0 1,1 0,${r1}M0,${r0}A${r0},${r0} 0 1,0 0,${-r0}A${r0},${r0} 0 1,0 0,${r0}Z`\n            : // eslint-disable-next-line\n                `M0,${r1}A${r1},${r1} 0 1,1 0,${-r1}A${r1},${r1} 0 1,1 0,${r1}Z`\n        : r0\n            ? // eslint-disable-next-line\n                `M${r1 * c0},${r1 * s0}A${r1},${r1} 0 ${df},1 ${r1 * c1},${r1 * s1}L${r0 * c1},${r0 * s1}A${r0},${r0} 0 ${df},0 ${r0 * c0},${r0 * s0}Z`\n            : // eslint-disable-next-line\n                `M${r1 * c0},${r1 * s0}A${r1},${r1} 0 ${df},1 ${r1 * c1},${r1 * s1}L0,0` +\n                    `Z`;\n}\n//# sourceMappingURL=path.js.map","import { createSvgElement } from './elem';\nconst svgDocument = createSvgElement('svg');\nconst transformRegex = /(\\w+)\\(([^,)]+),?([^)]+)?\\)/gi;\nconst transformSeparatorRegex = /[ ,]+/;\nconst transformationListRegex = /^(\\w+)\\((.*)\\)/;\n/**\n * Returns a SVG point object initialized with the `x` and `y` coordinates.\n * @see https://developer.mozilla.org/en/docs/Web/API/SVGPoint\n */\nexport function createSVGPoint(x, y) {\n    const p = svgDocument.createSVGPoint();\n    p.x = x;\n    p.y = y;\n    return p;\n}\n/**\n * Returns the SVG transformation matrix initialized with the given matrix.\n *\n * The given matrix is an object of the form:\n * {\n *   a: number\n *   b: number\n *   c: number\n *   d: number\n *   e: number\n *   f: number\n * }\n *\n * @see https://developer.mozilla.org/en/docs/Web/API/SVGMatrix\n */\nexport function createSVGMatrix(matrix) {\n    const mat = svgDocument.createSVGMatrix();\n    if (matrix != null) {\n        const source = matrix;\n        const target = mat;\n        // eslint-disable-next-line\n        for (const key in source) {\n            target[key] = source[key];\n        }\n    }\n    return mat;\n}\n/**\n * Returns a SVG transform object.\n * @see https://developer.mozilla.org/en/docs/Web/API/SVGTransform\n */\nexport function createSVGTransform(matrix) {\n    if (matrix != null) {\n        if (!(matrix instanceof DOMMatrix)) {\n            matrix = createSVGMatrix(matrix); // eslint-disable-line\n        }\n        return svgDocument.createSVGTransformFromMatrix(matrix);\n    }\n    return svgDocument.createSVGTransform();\n}\n/**\n * Returns the SVG transformation matrix built from the `transformString`.\n *\n * E.g. 'translate(10,10) scale(2,2)' will result in matrix:\n * `{ a: 2, b: 0, c: 0, d: 2, e: 10, f: 10}`\n */\nexport function transformStringToMatrix(transform) {\n    let mat = createSVGMatrix();\n    const matches = transform != null && transform.match(transformRegex);\n    if (!matches) {\n        return mat;\n    }\n    for (let i = 0, n = matches.length; i < n; i += 1) {\n        const transformationString = matches[i];\n        const transformationMatch = transformationString.match(transformationListRegex);\n        if (transformationMatch) {\n            let sx;\n            let sy;\n            let tx;\n            let ty;\n            let angle;\n            let ctm = createSVGMatrix();\n            const args = transformationMatch[2].split(transformSeparatorRegex);\n            switch (transformationMatch[1].toLowerCase()) {\n                case 'scale':\n                    sx = parseFloat(args[0]);\n                    sy = args[1] === undefined ? sx : parseFloat(args[1]);\n                    ctm = ctm.scaleNonUniform(sx, sy);\n                    break;\n                case 'translate':\n                    tx = parseFloat(args[0]);\n                    ty = parseFloat(args[1]);\n                    ctm = ctm.translate(tx, ty);\n                    break;\n                case 'rotate':\n                    angle = parseFloat(args[0]);\n                    tx = parseFloat(args[1]) || 0;\n                    ty = parseFloat(args[2]) || 0;\n                    if (tx !== 0 || ty !== 0) {\n                        ctm = ctm.translate(tx, ty).rotate(angle).translate(-tx, -ty);\n                    }\n                    else {\n                        ctm = ctm.rotate(angle);\n                    }\n                    break;\n                case 'skewx':\n                    angle = parseFloat(args[0]);\n                    ctm = ctm.skewX(angle);\n                    break;\n                case 'skewy':\n                    angle = parseFloat(args[0]);\n                    ctm = ctm.skewY(angle);\n                    break;\n                case 'matrix':\n                    ctm.a = parseFloat(args[0]);\n                    ctm.b = parseFloat(args[1]);\n                    ctm.c = parseFloat(args[2]);\n                    ctm.d = parseFloat(args[3]);\n                    ctm.e = parseFloat(args[4]);\n                    ctm.f = parseFloat(args[5]);\n                    break;\n                default:\n                    continue;\n            }\n            mat = mat.multiply(ctm);\n        }\n    }\n    return mat;\n}\nexport function matrixToTransformString(matrix) {\n    const m = matrix || {};\n    const a = m.a != null ? m.a : 1;\n    const b = m.b != null ? m.b : 0;\n    const c = m.c != null ? m.c : 0;\n    const d = m.d != null ? m.d : 1;\n    const e = m.e != null ? m.e : 0;\n    const f = m.f != null ? m.f : 0;\n    return `matrix(${a},${b},${c},${d},${e},${f})`;\n}\nexport function parseTransformString(transform) {\n    let translation;\n    let rotation;\n    let scale;\n    if (transform) {\n        const separator = transformSeparatorRegex;\n        // Allow reading transform string with a single matrix\n        if (transform.trim().indexOf('matrix') >= 0) {\n            const matrix = transformStringToMatrix(transform);\n            const decomposedMatrix = decomposeMatrix(matrix);\n            translation = [decomposedMatrix.translateX, decomposedMatrix.translateY];\n            rotation = [decomposedMatrix.rotation];\n            scale = [decomposedMatrix.scaleX, decomposedMatrix.scaleY];\n            const transformations = [];\n            if (translation[0] !== 0 || translation[1] !== 0) {\n                transformations.push(`translate(${translation.join(',')})`);\n            }\n            if (scale[0] !== 1 || scale[1] !== 1) {\n                transformations.push(`scale(${scale.join(',')})`);\n            }\n            if (rotation[0] !== 0) {\n                transformations.push(`rotate(${rotation[0]})`);\n            }\n            transform = transformations.join(' '); // eslint-disable-line\n        }\n        else {\n            const translateMatch = transform.match(/translate\\((.*?)\\)/);\n            if (translateMatch) {\n                translation = translateMatch[1].split(separator);\n            }\n            const rotateMatch = transform.match(/rotate\\((.*?)\\)/);\n            if (rotateMatch) {\n                rotation = rotateMatch[1].split(separator);\n            }\n            const scaleMatch = transform.match(/scale\\((.*?)\\)/);\n            if (scaleMatch) {\n                scale = scaleMatch[1].split(separator);\n            }\n        }\n    }\n    const sx = scale && scale[0] ? parseFloat(scale[0]) : 1;\n    return {\n        raw: transform || '',\n        translation: {\n            tx: translation && translation[0]\n                ? parseInt(translation[0], 10)\n                : 0,\n            ty: translation && translation[1]\n                ? parseInt(translation[1], 10)\n                : 0,\n        },\n        rotation: {\n            angle: rotation && rotation[0] ? parseInt(rotation[0], 10) : 0,\n            cx: rotation && rotation[1]\n                ? parseInt(rotation[1], 10)\n                : undefined,\n            cy: rotation && rotation[2]\n                ? parseInt(rotation[2], 10)\n                : undefined,\n        },\n        scale: {\n            sx,\n            sy: scale && scale[1] ? parseFloat(scale[1]) : sx,\n        },\n    };\n}\nfunction deltaTransformPoint(matrix, point) {\n    const dx = point.x * matrix.a + point.y * matrix.c + 0;\n    const dy = point.x * matrix.b + point.y * matrix.d + 0;\n    return { x: dx, y: dy };\n}\n/**\n * Decomposes the SVG transformation matrix into separate transformations.\n *\n * Returns an object of the form:\n * {\n *   translateX: number\n *   translateY: number\n *   scaleX: number\n *   scaleY: number\n *   skewX: number\n *   skewY: number\n *   rotation: number\n * }\n *\n * @see https://developer.mozilla.org/en/docs/Web/API/SVGMatrix\n */\nexport function decomposeMatrix(matrix) {\n    // @see https://gist.github.com/2052247\n    const px = deltaTransformPoint(matrix, { x: 0, y: 1 });\n    const py = deltaTransformPoint(matrix, { x: 1, y: 0 });\n    const skewX = (180 / Math.PI) * Math.atan2(px.y, px.x) - 90;\n    const skewY = (180 / Math.PI) * Math.atan2(py.y, py.x);\n    return {\n        skewX,\n        skewY,\n        translateX: matrix.e,\n        translateY: matrix.f,\n        scaleX: Math.sqrt(matrix.a * matrix.a + matrix.b * matrix.b),\n        scaleY: Math.sqrt(matrix.c * matrix.c + matrix.d * matrix.d),\n        rotation: skewX,\n    };\n}\nexport function matrixToScale(matrix) {\n    let a;\n    let b;\n    let c;\n    let d;\n    if (matrix) {\n        a = matrix.a == null ? 1 : matrix.a;\n        d = matrix.d == null ? 1 : matrix.d;\n        b = matrix.b;\n        c = matrix.c;\n    }\n    else {\n        a = d = 1;\n    }\n    return {\n        sx: b ? Math.sqrt(a * a + b * b) : a,\n        sy: c ? Math.sqrt(c * c + d * d) : d,\n    };\n}\nexport function matrixToRotation(matrix) {\n    let p = { x: 0, y: 1 };\n    if (matrix) {\n        p = deltaTransformPoint(matrix, p);\n    }\n    const deg = (((180 * Math.atan2(p.y, p.x)) / Math.PI) % 360) - 90;\n    const angle = (deg % 360) + (deg < 0 ? 360 : 0);\n    return {\n        angle,\n    };\n}\nexport function matrixToTranslation(matrix) {\n    return {\n        tx: (matrix && matrix.e) || 0,\n        ty: (matrix && matrix.f) || 0,\n    };\n}\n//# sourceMappingURL=matrix.js.map","import { attr } from './attr';\nimport { isSVGGraphicsElement } from './elem';\nimport { createSVGTransform, parseTransformString, transformStringToMatrix, matrixToTransformString, createSVGMatrix, } from './matrix';\nexport function transform(elem, matrix, options = {}) {\n    if (matrix == null) {\n        return transformStringToMatrix(attr(elem, 'transform'));\n    }\n    if (options.absolute) {\n        elem.setAttribute('transform', matrixToTransformString(matrix));\n        return;\n    }\n    const transformList = elem.transform;\n    const svgTransform = createSVGTransform(matrix);\n    transformList.baseVal.appendItem(svgTransform);\n}\nexport function translate(elem, tx, ty = 0, options = {}) {\n    let transformAttr = attr(elem, 'transform');\n    const transform = parseTransformString(transformAttr);\n    if (tx == null) {\n        return transform.translation;\n    }\n    transformAttr = transform.raw;\n    transformAttr = transformAttr.replace(/translate\\([^)]*\\)/g, '').trim();\n    const newTx = options.absolute ? tx : transform.translation.tx + tx;\n    const newTy = options.absolute ? ty : transform.translation.ty + ty;\n    const newTranslate = `translate(${newTx},${newTy})`;\n    // Note that `translate()` is always the first transformation. This is\n    // usually the desired case.\n    elem.setAttribute('transform', `${newTranslate} ${transformAttr}`.trim());\n}\nexport function rotate(elem, angle, cx, cy, options = {}) {\n    let transformAttr = attr(elem, 'transform');\n    const transform = parseTransformString(transformAttr);\n    if (angle == null) {\n        return transform.rotation;\n    }\n    transformAttr = transform.raw;\n    transformAttr = transformAttr.replace(/rotate\\([^)]*\\)/g, '').trim();\n    angle %= 360; // eslint-disable-line\n    const newAngle = options.absolute ? angle : transform.rotation.angle + angle;\n    const newOrigin = cx != null && cy != null ? `,${cx},${cy}` : '';\n    const newRotate = `rotate(${newAngle}${newOrigin})`;\n    elem.setAttribute('transform', `${transformAttr} ${newRotate}`.trim());\n}\nexport function scale(elem, sx, sy) {\n    let transformAttr = attr(elem, 'transform');\n    const transform = parseTransformString(transformAttr);\n    if (sx == null) {\n        return transform.scale;\n    }\n    sy = sy == null ? sx : sy; // eslint-disable-line\n    transformAttr = transform.raw;\n    transformAttr = transformAttr.replace(/scale\\([^)]*\\)/g, '').trim();\n    const newScale = `scale(${sx},${sy})`;\n    elem.setAttribute('transform', `${transformAttr} ${newScale}`.trim());\n}\n/**\n * Returns an DOMMatrix that specifies the transformation necessary\n * to convert `elem` coordinate system into `target` coordinate system.\n */\nexport function getTransformToElement(elem, target) {\n    if (isSVGGraphicsElement(target) && isSVGGraphicsElement(elem)) {\n        const targetCTM = target.getScreenCTM();\n        const nodeCTM = elem.getScreenCTM();\n        if (targetCTM && nodeCTM) {\n            return targetCTM.inverse().multiply(nodeCTM);\n        }\n    }\n    // Could not get actual transformation matrix\n    return createSVGMatrix();\n}\n/**\n * Returns an DOMMatrix that specifies the transformation necessary\n * to convert `elem` coordinate system into `target` coordinate system.\n * Unlike getTransformToElement, elem is child of target,Because of the reduction in DOM API calls,\n * there is a significant performance improvement.\n */\nexport function getTransformToParentElement(elem, target) {\n    let matrix = createSVGMatrix();\n    if (isSVGGraphicsElement(target) && isSVGGraphicsElement(elem)) {\n        let node = elem;\n        const matrixList = [];\n        while (node && node !== target) {\n            const transform = node.getAttribute('transform') || null;\n            const nodeMatrix = transformStringToMatrix(transform);\n            matrixList.push(nodeMatrix);\n            node = node.parentNode;\n        }\n        matrixList.reverse().forEach((m) => {\n            matrix = matrix.multiply(m);\n        });\n    }\n    return matrix;\n}\n/**\n * Converts a global point with coordinates `x` and `y` into the\n * coordinate space of the element.\n */\nexport function toLocalPoint(elem, x, y) {\n    const svg = elem instanceof SVGSVGElement\n        ? elem\n        : elem.ownerSVGElement;\n    const p = svg.createSVGPoint();\n    p.x = x;\n    p.y = y;\n    try {\n        const ctm = svg.getScreenCTM();\n        const globalPoint = p.matrixTransform(ctm.inverse());\n        const globalToLocalMatrix = getTransformToElement(elem, svg).inverse();\n        return globalPoint.matrixTransform(globalToLocalMatrix);\n    }\n    catch (e) {\n        return p;\n    }\n}\n//# sourceMappingURL=transform.js.map","export var EventHook;\n(function (EventHook) {\n    const cache = {};\n    function get(type) {\n        return cache[type] || {};\n    }\n    EventHook.get = get;\n    function register(type, hook) {\n        cache[type] = hook;\n    }\n    EventHook.register = register;\n    function unregister(type) {\n        delete cache[type];\n    }\n    EventHook.unregister = unregister;\n})(EventHook || (EventHook = {}));\n//# sourceMappingURL=hook.js.map","export var Store;\n(function (Store) {\n    const cache = new WeakMap();\n    function ensure(target) {\n        if (!cache.has(target)) {\n            cache.set(target, { events: Object.create(null) });\n        }\n        return cache.get(target);\n    }\n    Store.ensure = ensure;\n    function get(target) {\n        return cache.get(target);\n    }\n    Store.get = get;\n    function remove(target) {\n        return cache.delete(target);\n    }\n    Store.remove = remove;\n})(Store || (Store = {}));\n//# sourceMappingURL=store.js.map","import { Store } from './store';\nexport var Util;\n(function (Util) {\n    Util.returnTrue = () => true;\n    Util.returnFalse = () => false;\n    function stopPropagationCallback(e) {\n        e.stopPropagation();\n    }\n    Util.stopPropagationCallback = stopPropagationCallback;\n    function addEventListener(elem, type, handler) {\n        if (elem.addEventListener != null) {\n            elem.addEventListener(type, handler);\n        }\n    }\n    Util.addEventListener = addEventListener;\n    function removeEventListener(elem, type, handler) {\n        if (elem.removeEventListener != null) {\n            elem.removeEventListener(type, handler);\n        }\n    }\n    Util.removeEventListener = removeEventListener;\n})(Util || (Util = {}));\n(function (Util) {\n    const rNotHTMLWhite = /[^\\x20\\t\\r\\n\\f]+/g;\n    const rNamespace = /^([^.]*)(?:\\.(.+)|)/;\n    function splitType(types) {\n        return (types || '').match(rNotHTMLWhite) || [''];\n    }\n    Util.splitType = splitType;\n    function normalizeType(type) {\n        const parts = rNamespace.exec(type) || [];\n        return {\n            originType: parts[1] ? parts[1].trim() : parts[1],\n            namespaces: parts[2]\n                ? parts[2]\n                    .split('.')\n                    .map((ns) => ns.trim())\n                    .sort()\n                : [],\n        };\n    }\n    Util.normalizeType = normalizeType;\n    function isValidTarget(target) {\n        // Accepts only:\n        //  - Node\n        //    - Node.ELEMENT_NODE\n        //    - Node.DOCUMENT_NODE\n        //  - Object\n        //    - Any\n        return target.nodeType === 1 || target.nodeType === 9 || !+target.nodeType;\n    }\n    Util.isValidTarget = isValidTarget;\n    function isValidSelector(elem, selector) {\n        if (selector) {\n            const node = elem;\n            return node.querySelector != null && node.querySelector(selector) != null;\n        }\n        return true;\n    }\n    Util.isValidSelector = isValidSelector;\n})(Util || (Util = {}));\n(function (Util) {\n    let seed = 0;\n    const cache = new WeakMap();\n    function ensureHandlerId(handler) {\n        if (!cache.has(handler)) {\n            cache.set(handler, seed);\n            seed += 1;\n        }\n        return cache.get(handler);\n    }\n    Util.ensureHandlerId = ensureHandlerId;\n    function getHandlerId(handler) {\n        return cache.get(handler);\n    }\n    Util.getHandlerId = getHandlerId;\n    function removeHandlerId(handler) {\n        return cache.delete(handler);\n    }\n    Util.removeHandlerId = removeHandlerId;\n    function setHandlerId(handler, id) {\n        return cache.set(handler, id);\n    }\n    Util.setHandlerId = setHandlerId;\n})(Util || (Util = {}));\n(function (Util) {\n    function getHandlerQueue(elem, event) {\n        const queue = [];\n        const store = Store.get(elem);\n        const bag = store && store.events && store.events[event.type];\n        const handlers = (bag && bag.handlers) || [];\n        const delegateCount = bag ? bag.delegateCount : 0;\n        if (delegateCount > 0 &&\n            // Support: Firefox <=42 - 66+\n            // Suppress spec-violating clicks indicating a non-primary pointer button (trac-3861)\n            // https://www.w3.org/TR/DOM-Level-3-Events/#event-type-click\n            // Support: IE 11+\n            // ...but not arrow key \"clicks\" of radio inputs, which can have `button` -1 (gh-2343)\n            !(event.type === 'click' &&\n                typeof event.button === 'number' &&\n                event.button >= 1)) {\n            for (let curr = event.target; curr !== elem; curr = curr.parentNode || elem) {\n                // Don't check non-elements\n                // Don't process clicks on disabled elements\n                if (curr.nodeType === 1 &&\n                    !(event.type === 'click' && curr.disabled === true)) {\n                    const matchedHandlers = [];\n                    const matchedSelectors = {};\n                    for (let i = 0; i < delegateCount; i += 1) {\n                        const handleObj = handlers[i];\n                        const selector = handleObj.selector;\n                        if (selector != null && matchedSelectors[selector] == null) {\n                            const node = elem;\n                            const nodes = [];\n                            node.querySelectorAll(selector).forEach((child) => {\n                                nodes.push(child);\n                            });\n                            matchedSelectors[selector] = nodes.includes(curr);\n                        }\n                        if (matchedSelectors[selector]) {\n                            matchedHandlers.push(handleObj);\n                        }\n                    }\n                    if (matchedHandlers.length) {\n                        queue.push({ elem: curr, handlers: matchedHandlers });\n                    }\n                }\n            }\n        }\n        // Add the remaining (directly-bound) handlers\n        if (delegateCount < handlers.length) {\n            queue.push({ elem, handlers: handlers.slice(delegateCount) });\n        }\n        return queue;\n    }\n    Util.getHandlerQueue = getHandlerQueue;\n})(Util || (Util = {}));\n(function (Util) {\n    function isWindow(obj) {\n        return obj != null && obj === obj.window;\n    }\n    Util.isWindow = isWindow;\n})(Util || (Util = {}));\n(function (Util) {\n    function contains(a, b) {\n        const adown = a.nodeType === 9 ? a.documentElement : a;\n        const bup = b && b.parentNode;\n        return (a === bup ||\n            !!(bup &&\n                bup.nodeType === 1 &&\n                // Support: IE 9 - 11+\n                // IE doesn't have `contains` on SVG.\n                (adown.contains\n                    ? adown.contains(bup)\n                    : a.compareDocumentPosition && a.compareDocumentPosition(bup) & 16)));\n    }\n    Util.contains = contains;\n})(Util || (Util = {}));\n//# sourceMappingURL=util.js.map","import { EventHook } from './hook';\nimport { Util } from './util';\n// Prevent triggered image.load events from bubbling to window.load\nexport var Special;\n(function (Special) {\n    EventHook.register('load', {\n        noBubble: true,\n    });\n})(Special || (Special = {}));\n// Support: Chrome <=73+\n// Chrome doesn't alert on `event.preventDefault()`\n// as the standard mandates.\n(function (Special) {\n    EventHook.register('beforeunload', {\n        postDispatch(elem, event) {\n            if (event.result !== undefined && event.originalEvent) {\n                event.originalEvent.returnValue = event.result;\n            }\n        },\n    });\n})(Special || (Special = {}));\n// For mouseenter/leave call the handler if related is outside the target.\n// NB: No relatedTarget if the mouse left/entered the browser window\n(function (Special) {\n    EventHook.register('mouseenter', {\n        delegateType: 'mouseover',\n        bindType: 'mouseover',\n        handle(target, event) {\n            let ret;\n            const related = event.relatedTarget;\n            const handleObj = event.handleObj;\n            if (!related || (related !== target && !Util.contains(target, related))) {\n                event.type = handleObj.originType;\n                ret = handleObj.handler.call(target, event);\n                event.type = 'mouseover';\n            }\n            return ret;\n        },\n    });\n    EventHook.register('mouseleave', {\n        delegateType: 'mouseout',\n        bindType: 'mouseout',\n        handle(target, event) {\n            let ret;\n            const related = event.relatedTarget;\n            const handleObj = event.handleObj;\n            if (!related || (related !== target && !Util.contains(target, related))) {\n                event.type = handleObj.originType;\n                ret = handleObj.handler.call(target, event);\n                event.type = 'mouseout';\n            }\n            return ret;\n        },\n    });\n})(Special || (Special = {}));\n//# sourceMappingURL=special.js.map","import { Util } from './util';\nexport class EventObject {\n    constructor(e, props) {\n        this.isDefaultPrevented = Util.returnFalse;\n        this.isPropagationStopped = Util.returnFalse;\n        this.isImmediatePropagationStopped = Util.returnFalse;\n        this.isSimulated = false;\n        this.preventDefault = () => {\n            const e = this.originalEvent;\n            this.isDefaultPrevented = Util.returnTrue;\n            if (e && !this.isSimulated) {\n                e.preventDefault();\n            }\n        };\n        this.stopPropagation = () => {\n            const e = this.originalEvent;\n            this.isPropagationStopped = Util.returnTrue;\n            if (e && !this.isSimulated) {\n                e.stopPropagation();\n            }\n        };\n        this.stopImmediatePropagation = () => {\n            const e = this.originalEvent;\n            this.isImmediatePropagationStopped = Util.returnTrue;\n            if (e && !this.isSimulated) {\n                e.stopImmediatePropagation();\n            }\n            this.stopPropagation();\n        };\n        if (typeof e === 'string') {\n            this.type = e;\n        }\n        else if (e.type) {\n            this.originalEvent = e;\n            this.type = e.type;\n            // Events bubbling up the document may have been marked as prevented\n            // by a handler lower down the tree; reflect the correct value.\n            this.isDefaultPrevented = e.defaultPrevented\n                ? Util.returnTrue\n                : Util.returnFalse;\n            // Create target properties\n            this.target = e.target;\n            this.currentTarget = e.currentTarget;\n            this.relatedTarget = e.relatedTarget;\n            this.timeStamp = e.timeStamp;\n        }\n        // Put explicitly provided properties onto the event object\n        if (props) {\n            Object.assign(this, props);\n        }\n        // Create a timestamp if incoming event doesn't have one\n        if (!this.timeStamp) {\n            this.timeStamp = Date.now();\n        }\n    }\n}\n(function (EventObject) {\n    function create(originalEvent) {\n        return originalEvent instanceof EventObject\n            ? originalEvent\n            : new EventObject(originalEvent);\n    }\n    EventObject.create = create;\n})(EventObject || (EventObject = {}));\n(function (EventObject) {\n    function addProperty(name, hook) {\n        Object.defineProperty(EventObject.prototype, name, {\n            enumerable: true,\n            configurable: true,\n            get: typeof hook === 'function'\n                ? // eslint-disable-next-line\n                    function () {\n                        if (this.originalEvent) {\n                            return hook(this.originalEvent);\n                        }\n                    }\n                : // eslint-disable-next-line\n                    function () {\n                        if (this.originalEvent) {\n                            return this.originalEvent[name];\n                        }\n                    },\n            set(value) {\n                Object.defineProperty(this, name, {\n                    enumerable: true,\n                    configurable: true,\n                    writable: true,\n                    value,\n                });\n            },\n        });\n    }\n    EventObject.addProperty = addProperty;\n})(EventObject || (EventObject = {}));\n(function (EventObject) {\n    // Common event props including KeyEvent and MouseEvent specific props.\n    const commonProps = {\n        bubbles: true,\n        cancelable: true,\n        eventPhase: true,\n        detail: true,\n        view: true,\n        button: true,\n        buttons: true,\n        clientX: true,\n        clientY: true,\n        offsetX: true,\n        offsetY: true,\n        pageX: true,\n        pageY: true,\n        screenX: true,\n        screenY: true,\n        toElement: true,\n        pointerId: true,\n        pointerType: true,\n        char: true,\n        code: true,\n        charCode: true,\n        key: true,\n        keyCode: true,\n        touches: true,\n        changedTouches: true,\n        targetTouches: true,\n        which: true,\n        altKey: true,\n        ctrlKey: true,\n        metaKey: true,\n        shiftKey: true,\n    };\n    Object.keys(commonProps).forEach((name) => EventObject.addProperty(name, commonProps[name]));\n})(EventObject || (EventObject = {}));\n//# sourceMappingURL=object.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Util } from './util';\nimport { EventHook } from './hook';\nimport { Store } from './store';\nimport { EventObject } from './object';\nimport './special';\nexport var Core;\n(function (Core) {\n    let triggered;\n    function on(elem, types, handler, data, selector) {\n        if (!Util.isValidTarget(elem)) {\n            return;\n        }\n        // Caller can pass in an object of custom data in lieu of the handler\n        let handlerData;\n        if (typeof handler !== 'function') {\n            const { handler: h, selector: s } = handler, others = __rest(handler, [\"handler\", \"selector\"]);\n            handler = h; // eslint-disable-line\n            selector = s; // eslint-disable-line\n            handlerData = others;\n        }\n        // Ensure that invalid selectors throw exceptions at attach time\n        // if (!Util.isValidSelector(elem, selector)) {\n        //   throw new Error('Delegate event with invalid selector.')\n        // }\n        const store = Store.ensure(elem);\n        // Ensure the main handle\n        let mainHandler = store.handler;\n        if (mainHandler == null) {\n            mainHandler = store.handler = function (e, ...args) {\n                return triggered !== e.type ? dispatch(elem, e, ...args) : undefined;\n            };\n        }\n        // Make sure that the handler has a unique ID, used to find/remove it later\n        const guid = Util.ensureHandlerId(handler);\n        // Handle multiple events separated by a space\n        Util.splitType(types).forEach((item) => {\n            const { originType, namespaces } = Util.normalizeType(item);\n            // There *must* be a type, no attaching namespace-only handlers\n            if (!originType) {\n                return;\n            }\n            let type = originType;\n            let hook = EventHook.get(type);\n            // If selector defined, determine special event type, otherwise given type\n            type = (selector ? hook.delegateType : hook.bindType) || type;\n            // Update hook based on newly reset type\n            hook = EventHook.get(type);\n            // handleObj is passed to all event handlers\n            const handleObj = Object.assign({ type,\n                originType,\n                data,\n                selector,\n                guid, handler: handler, namespace: namespaces.join('.') }, handlerData);\n            // Init the event handler queue if we're the first\n            const events = store.events;\n            let bag = events[type];\n            if (!bag) {\n                bag = events[type] = { handlers: [], delegateCount: 0 };\n                // Only use addEventListener if the `hook.steup` returns false\n                if (!hook.setup ||\n                    hook.setup(elem, data, namespaces, mainHandler) === false) {\n                    Util.addEventListener(elem, type, mainHandler);\n                }\n            }\n            if (hook.add) {\n                Util.removeHandlerId(handleObj.handler);\n                hook.add(elem, handleObj);\n                Util.setHandlerId(handleObj.handler, guid);\n            }\n            // Add to the element's handler list, delegates in front\n            if (selector) {\n                bag.handlers.splice(bag.delegateCount, 0, handleObj);\n                bag.delegateCount += 1;\n            }\n            else {\n                bag.handlers.push(handleObj);\n            }\n        });\n    }\n    Core.on = on;\n    function off(elem, types, handler, selector, mappedTypes) {\n        const store = Store.get(elem);\n        if (!store) {\n            return;\n        }\n        const events = store.events;\n        if (!events) {\n            return;\n        }\n        // Once for each type.namespace in types; type may be omitted\n        Util.splitType(types).forEach((item) => {\n            const { originType, namespaces } = Util.normalizeType(item);\n            // Unbind all events (on this namespace, if provided) for the element\n            if (!originType) {\n                Object.keys(events).forEach((key) => {\n                    off(elem, key + item, handler, selector, true);\n                });\n                return;\n            }\n            let type = originType;\n            const hook = EventHook.get(type);\n            type = (selector ? hook.delegateType : hook.bindType) || type;\n            const bag = events[type] || {};\n            const rns = namespaces.length > 0\n                ? new RegExp(`(^|\\\\.)${namespaces.join('\\\\.(?:.*\\\\.|)')}(\\\\.|$)`)\n                : null;\n            // Remove matching events\n            const originHandlerCount = bag.handlers.length;\n            for (let i = bag.handlers.length - 1; i >= 0; i -= 1) {\n                const handleObj = bag.handlers[i];\n                if ((mappedTypes || originType === handleObj.originType) &&\n                    (!handler || Util.getHandlerId(handler) === handleObj.guid) &&\n                    (rns == null ||\n                        (handleObj.namespace && rns.test(handleObj.namespace))) &&\n                    (selector == null ||\n                        selector === handleObj.selector ||\n                        (selector === '**' && handleObj.selector))) {\n                    bag.handlers.splice(i, 1);\n                    if (handleObj.selector) {\n                        bag.delegateCount -= 1;\n                    }\n                    if (hook.remove) {\n                        hook.remove(elem, handleObj);\n                    }\n                }\n            }\n            if (originHandlerCount && bag.handlers.length === 0) {\n                if (!hook.teardown ||\n                    hook.teardown(elem, namespaces, store.handler) === false) {\n                    Util.removeEventListener(elem, type, store.handler);\n                }\n                delete events[type];\n            }\n        });\n        // Remove data and the expando if it's no longer used\n        if (Object.keys(events).length === 0) {\n            Store.remove(elem);\n        }\n    }\n    Core.off = off;\n    function dispatch(elem, evt, ...args) {\n        const event = EventObject.create(evt);\n        event.delegateTarget = elem;\n        const hook = EventHook.get(event.type);\n        if (hook.preDispatch && hook.preDispatch(elem, event) === false) {\n            return;\n        }\n        const handlerQueue = Util.getHandlerQueue(elem, event);\n        // Run delegates first; they may want to stop propagation beneath us\n        for (let i = 0, l = handlerQueue.length; i < l && !event.isPropagationStopped(); i += 1) {\n            const matched = handlerQueue[i];\n            event.currentTarget = matched.elem;\n            for (let j = 0, k = matched.handlers.length; j < k && !event.isImmediatePropagationStopped(); j += 1) {\n                const handleObj = matched.handlers[j];\n                // If event is namespaced, then each handler is only invoked if it is\n                // specially universal or its namespaces are a superset of the event's.\n                if (event.rnamespace == null ||\n                    (handleObj.namespace && event.rnamespace.test(handleObj.namespace))) {\n                    event.handleObj = handleObj;\n                    event.data = handleObj.data;\n                    const hookHandle = EventHook.get(handleObj.originType).handle;\n                    const result = hookHandle\n                        ? hookHandle(matched.elem, event, ...args)\n                        : handleObj.handler.call(matched.elem, event, ...args);\n                    if (result !== undefined) {\n                        event.result = result;\n                        if (result === false) {\n                            event.preventDefault();\n                            event.stopPropagation();\n                        }\n                    }\n                }\n            }\n        }\n        // Call the postDispatch hook for the mapped type\n        if (hook.postDispatch) {\n            hook.postDispatch(elem, event);\n        }\n        return event.result;\n    }\n    Core.dispatch = dispatch;\n    function trigger(event, eventArgs, elem, onlyHandlers) {\n        let eventObj = event;\n        let type = typeof event === 'string' ? event : event.type;\n        let namespaces = typeof event === 'string' || eventObj.namespace == null\n            ? []\n            : eventObj.namespace.split('.');\n        const node = elem;\n        // Don't do events on text and comment nodes\n        if (node.nodeType === 3 || node.nodeType === 8) {\n            return;\n        }\n        if (type.indexOf('.') > -1) {\n            // Namespaced trigger; create a regexp to match event type in handle()\n            namespaces = type.split('.');\n            type = namespaces.shift();\n            namespaces.sort();\n        }\n        const ontype = type.indexOf(':') < 0 && `on${type}`;\n        // Caller can pass in a EventObject, Object, or just an event type string\n        eventObj =\n            event instanceof EventObject\n                ? event\n                : new EventObject(type, typeof event === 'object' ? event : null);\n        eventObj.namespace = namespaces.join('.');\n        eventObj.rnamespace = eventObj.namespace\n            ? new RegExp(`(^|\\\\.)${namespaces.join('\\\\.(?:.*\\\\.|)')}(\\\\.|$)`)\n            : null;\n        // Clean up the event in case it is being reused\n        eventObj.result = undefined;\n        if (!eventObj.target) {\n            eventObj.target = node;\n        }\n        const args = [eventObj];\n        if (Array.isArray(eventArgs)) {\n            args.push(...eventArgs);\n        }\n        else {\n            args.push(eventArgs);\n        }\n        const hook = EventHook.get(type);\n        if (!onlyHandlers &&\n            hook.trigger &&\n            hook.trigger(node, eventObj, eventArgs) === false) {\n            return;\n        }\n        let bubbleType;\n        // Determine event propagation path in advance, per W3C events spec.\n        // Bubble up to document, then to window; watch for a global ownerDocument\n        const eventPath = [node];\n        if (!onlyHandlers && !hook.noBubble && !Util.isWindow(node)) {\n            bubbleType = hook.delegateType || type;\n            let last = node;\n            let curr = node.parentNode;\n            while (curr != null) {\n                eventPath.push(curr);\n                last = curr;\n                curr = curr.parentNode;\n            }\n            // Only add window if we got to document\n            const doc = node.ownerDocument || document;\n            if (last === doc) {\n                const win = last.defaultView || last.parentWindow || window;\n                eventPath.push(win);\n            }\n        }\n        let lastElement = node;\n        // Fire handlers on the event path\n        for (let i = 0, l = eventPath.length; i < l && !eventObj.isPropagationStopped(); i += 1) {\n            const currElement = eventPath[i];\n            lastElement = currElement;\n            eventObj.type = i > 1 ? bubbleType : hook.bindType || type;\n            // Custom handler\n            const store = Store.get(currElement);\n            if (store) {\n                if (store.events[eventObj.type] && store.handler) {\n                    store.handler.call(currElement, ...args);\n                }\n            }\n            // Native handler\n            const handle = (ontype && currElement[ontype]) || null;\n            if (handle && Util.isValidTarget(currElement)) {\n                eventObj.result = handle.call(currElement, ...args);\n                if (eventObj.result === false) {\n                    eventObj.preventDefault();\n                }\n            }\n        }\n        eventObj.type = type;\n        // If nobody prevented the default action, do it now\n        if (!onlyHandlers && !eventObj.isDefaultPrevented()) {\n            const preventDefault = hook.preventDefault;\n            if ((preventDefault == null ||\n                preventDefault(eventPath.pop(), eventObj, eventArgs) === false) &&\n                Util.isValidTarget(node)) {\n                // Call a native DOM method on the target with the same name as the\n                // event. Don't do default actions on window.\n                if (ontype &&\n                    typeof node[type] === 'function' &&\n                    !Util.isWindow(node)) {\n                    // Don't re-trigger an onFOO event when we call its FOO() method\n                    const tmp = node[ontype];\n                    if (tmp) {\n                        node[ontype] = null;\n                    }\n                    // Prevent re-triggering of the same event, since we already bubbled it above\n                    triggered = type;\n                    if (eventObj.isPropagationStopped()) {\n                        lastElement.addEventListener(type, Util.stopPropagationCallback);\n                    }\n                    node[type]();\n                    if (eventObj.isPropagationStopped()) {\n                        lastElement.removeEventListener(type, Util.stopPropagationCallback);\n                    }\n                    triggered = undefined;\n                    if (tmp) {\n                        node[ontype] = tmp;\n                    }\n                }\n            }\n        }\n        return eventObj.result;\n    }\n    Core.trigger = trigger;\n})(Core || (Core = {}));\n//# sourceMappingURL=core.js.map","/* eslint-disable no-param-reassign */\nimport { Core } from './core';\nimport { Util } from './util';\nexport var Event;\n(function (Event) {\n    function on(elem, events, selector, data, handler) {\n        Private.on(elem, events, selector, data, handler);\n        return elem;\n    }\n    Event.on = on;\n    function once(elem, events, selector, data, handler) {\n        Private.on(elem, events, selector, data, handler, true);\n        return elem;\n    }\n    Event.once = once;\n    function off(elem, events, selector, handler) {\n        Private.off(elem, events, selector, handler);\n        return elem;\n    }\n    Event.off = off;\n    function trigger(elem, event, args, \n    /**\n     * When onlyHandlers is `true`\n     * - Will not call `.event()` on the element it is triggered on. This means\n     *   `.trigger('submit', [], true)` on a form will not call `.submit()` on\n     *   the form.\n     * - Events will not bubble up the DOM hierarchy; if they are not handled\n     *   by the target element directly, they do nothing.\n     */\n    onlyHandlers) {\n        Core.trigger(event, args, elem, onlyHandlers);\n        return elem;\n    }\n    Event.trigger = trigger;\n})(Event || (Event = {}));\nvar Private;\n(function (Private) {\n    function on(elem, types, selector, data, fn, once) {\n        // Types can be a map of types/handlers\n        if (typeof types === 'object') {\n            // ( types-Object, selector, data )\n            if (typeof selector !== 'string') {\n                // ( types-Object, data )\n                data = data || selector;\n                selector = undefined;\n            }\n            Object.keys(types).forEach((type) => on(elem, type, selector, data, types[type], once));\n            return;\n        }\n        if (data == null && fn == null) {\n            // ( types, fn )\n            fn = selector;\n            data = selector = undefined;\n        }\n        else if (fn == null) {\n            if (typeof selector === 'string') {\n                // ( types, selector, fn )\n                fn = data;\n                data = undefined;\n            }\n            else {\n                // ( types, data, fn )\n                fn = data;\n                data = selector;\n                selector = undefined;\n            }\n        }\n        if (fn === false) {\n            fn = Util.returnFalse;\n        }\n        else if (!fn) {\n            return;\n        }\n        if (once) {\n            const originHandler = fn;\n            fn = function (event, ...args) {\n                // Can use an empty set, since event contains the info\n                Private.off(elem, event);\n                return originHandler.call(this, event, ...args);\n            };\n            // Use same guid so caller can remove using origFn\n            Util.setHandlerId(fn, Util.ensureHandlerId(originHandler));\n        }\n        Core.on(elem, types, fn, data, selector);\n    }\n    Private.on = on;\n    function off(elem, events, selector, fn) {\n        const evt = events;\n        if (evt && evt.preventDefault != null && evt.handleObj != null) {\n            const obj = evt.handleObj;\n            off(evt.delegateTarget, obj.namespace ? `${obj.originType}.${obj.namespace}` : obj.originType, obj.selector, obj.handler);\n            return;\n        }\n        if (typeof events === 'object') {\n            // ( types-object [, selector] )\n            const types = events;\n            Object.keys(types).forEach((type) => off(elem, type, selector, types[type]));\n            return;\n        }\n        if (selector === false || typeof selector === 'function') {\n            // ( types [, fn] )\n            fn = selector;\n            selector = undefined;\n        }\n        if (fn === false) {\n            fn = Util.returnFalse;\n        }\n        Core.off(elem, events, fn, selector);\n    }\n    Private.off = off;\n})(Private || (Private = {}));\n//# sourceMappingURL=main.js.map","import { Platform } from '../platform';\nexport class MouseWheelHandle {\n    constructor(target, onWheelCallback, onWheelGuard) {\n        this.animationFrameId = 0;\n        this.deltaX = 0;\n        this.deltaY = 0;\n        this.eventName = Platform.isEventSupported('wheel')\n            ? 'wheel'\n            : 'mousewheel';\n        this.target = target;\n        this.onWheelCallback = onWheelCallback;\n        this.onWheelGuard = onWheelGuard;\n        this.onWheel = this.onWheel.bind(this);\n        this.didWheel = this.didWheel.bind(this);\n    }\n    enable() {\n        this.target.addEventListener(this.eventName, this.onWheel, {\n            passive: false,\n        });\n    }\n    disable() {\n        this.target.removeEventListener(this.eventName, this.onWheel);\n    }\n    onWheel(e) {\n        if (this.onWheelGuard != null && !this.onWheelGuard(e)) {\n            return;\n        }\n        this.deltaX += e.deltaX;\n        this.deltaY += e.deltaY;\n        e.preventDefault();\n        let changed;\n        if (this.deltaX !== 0 || this.deltaY !== 0) {\n            e.stopPropagation();\n            changed = true;\n        }\n        if (changed === true && this.animationFrameId === 0) {\n            this.animationFrameId = requestAnimationFrame(() => {\n                this.didWheel(e);\n            });\n        }\n    }\n    didWheel(e) {\n        this.animationFrameId = 0;\n        this.onWheelCallback(e, this.deltaX, this.deltaY);\n        this.deltaX = 0;\n        this.deltaY = 0;\n    }\n}\n//# sourceMappingURL=mousewheel.js.map","import { computeStyle, computeStyleInt } from './css';\nimport { isElement } from './elem';\nexport function offset(elem) {\n    const rect = elem.getBoundingClientRect();\n    const win = elem.ownerDocument.defaultView;\n    return {\n        top: rect.top + win.pageYOffset,\n        left: rect.left + win.pageXOffset,\n    };\n}\nexport function width(elem) {\n    const rect = elem.getBoundingClientRect();\n    return rect.width;\n}\nexport function height(elem) {\n    const rect = elem.getBoundingClientRect();\n    return rect.height;\n}\nexport function position(elem) {\n    const isFixed = computeStyle(elem, 'position') === 'fixed';\n    let offsetValue;\n    if (isFixed) {\n        const rect = elem.getBoundingClientRect();\n        offsetValue = { left: rect.left, top: rect.top };\n    }\n    else {\n        offsetValue = offset(elem);\n    }\n    if (!isFixed) {\n        const doc = elem.ownerDocument;\n        let offsetParent = elem.offsetParent || doc.documentElement;\n        while ((offsetParent === doc.body || offsetParent === doc.documentElement) &&\n            computeStyle(offsetParent, 'position') === 'static') {\n            offsetParent = offsetParent.parentNode;\n        }\n        if (offsetParent !== elem && isElement(offsetParent)) {\n            const parentOffset = offset(offsetParent);\n            offsetValue.top -=\n                parentOffset.top + computeStyleInt(offsetParent, 'borderTopWidth');\n            offsetValue.left -=\n                parentOffset.left + computeStyleInt(offsetParent, 'borderLeftWidth');\n        }\n    }\n    return {\n        top: offsetValue.top - computeStyleInt(elem, 'marginTop'),\n        left: offsetValue.left - computeStyleInt(elem, 'marginLeft'),\n    };\n}\n//# sourceMappingURL=position.js.map","export function debounce(fn, delay = 60) {\n    let timer = null;\n    return (...args) => {\n        if (timer) {\n            clearTimeout(timer);\n        }\n        timer = window.setTimeout(() => {\n            fn.apply(this, args);\n        }, delay);\n    };\n}\n//# sourceMappingURL=util.js.map","import { debounce } from './util';\nexport function createSensor(element) {\n    let sensor = null;\n    let listeners = [];\n    const create = () => {\n        if (getComputedStyle(element).position === 'static') {\n            const style = element.style;\n            style.position = 'relative';\n        }\n        const obj = document.createElement('object');\n        obj.onload = () => {\n            obj.contentDocument.defaultView.addEventListener('resize', trigger);\n            trigger();\n        };\n        obj.style.display = 'block';\n        obj.style.position = 'absolute';\n        obj.style.top = '0';\n        obj.style.left = '0';\n        obj.style.height = '100%';\n        obj.style.width = '100%';\n        obj.style.overflow = 'hidden';\n        obj.style.pointerEvents = 'none';\n        obj.style.zIndex = '-1';\n        obj.style.opacity = '0';\n        obj.setAttribute('tabindex', '-1');\n        obj.type = 'text/html';\n        element.appendChild(obj);\n        // for ie, should set data attribute delay, or will be white screen\n        obj.data = 'about:blank';\n        return obj;\n    };\n    const trigger = debounce(() => {\n        listeners.forEach((listener) => listener(element));\n    });\n    const bind = (listener) => {\n        if (!sensor) {\n            sensor = create();\n        }\n        if (listeners.indexOf(listener) === -1) {\n            listeners.push(listener);\n        }\n    };\n    const destroy = () => {\n        if (sensor && sensor.parentNode) {\n            if (sensor.contentDocument) {\n                sensor.contentDocument.defaultView.removeEventListener('resize', trigger);\n            }\n            sensor.parentNode.removeChild(sensor);\n            sensor = null;\n            listeners = [];\n        }\n    };\n    const unbind = (listener) => {\n        const idx = listeners.indexOf(listener);\n        if (idx !== -1) {\n            listeners.splice(idx, 1);\n        }\n        // no listener, and sensor is exist then destroy the sensor\n        if (listeners.length === 0 && sensor) {\n            destroy();\n        }\n    };\n    return {\n        element,\n        bind,\n        destroy,\n        unbind,\n    };\n}\n//# sourceMappingURL=object.js.map","import { debounce } from './util';\nexport function createSensor(element) {\n    let sensor = null;\n    let listeners = [];\n    const trigger = debounce(() => {\n        listeners.forEach((listener) => {\n            listener(element);\n        });\n    });\n    const create = () => {\n        const s = new ResizeObserver(trigger);\n        s.observe(element);\n        trigger();\n        return s;\n    };\n    const bind = (listener) => {\n        if (!sensor) {\n            sensor = create();\n        }\n        if (listeners.indexOf(listener) === -1) {\n            listeners.push(listener);\n        }\n    };\n    const destroy = () => {\n        if (sensor) {\n            sensor.disconnect();\n            listeners = [];\n            sensor = null;\n        }\n    };\n    const unbind = (listener) => {\n        const idx = listeners.indexOf(listener);\n        if (idx !== -1) {\n            listeners.splice(idx, 1);\n        }\n        // no listener, and sensor is exist then destroy the sensor\n        if (listeners.length === 0 && sensor) {\n            destroy();\n        }\n    };\n    return {\n        element,\n        bind,\n        destroy,\n        unbind,\n    };\n}\n//# sourceMappingURL=observer.js.map","import { createSensor as createObjectSensor } from './object';\nimport { createSensor as createResizeObserverSensor } from './observer';\nexport const createSensor = typeof ResizeObserver !== 'undefined'\n    ? createResizeObserverSensor\n    : createObjectSensor;\n//# sourceMappingURL=index.js.map","import { createSensor } from './sensors';\nexport var SizeSensor;\n(function (SizeSensor) {\n    const cache = new WeakMap();\n    function get(element) {\n        let sensor = cache.get(element);\n        if (sensor) {\n            return sensor;\n        }\n        sensor = createSensor(element);\n        cache.set(element, sensor);\n        return sensor;\n    }\n    function remove(sensor) {\n        sensor.destroy();\n        cache.delete(sensor.element);\n    }\n    SizeSensor.bind = (element, cb) => {\n        const sensor = get(element);\n        sensor.bind(cb);\n        return () => sensor.unbind(cb);\n    };\n    SizeSensor.clear = (element) => {\n        const sensor = get(element);\n        remove(sensor);\n    };\n})(SizeSensor || (SizeSensor = {}));\n//# sourceMappingURL=index.js.map","import { PriorityQueue } from './priorityqueue';\nexport var Dijkstra;\n(function (Dijkstra) {\n    function run(adjacencyList, source, weight = (u, v) => 1) {\n        const dist = {};\n        const previous = {};\n        const scanned = {};\n        const queue = new PriorityQueue();\n        dist[source] = 0;\n        Object.keys(adjacencyList).forEach((v) => {\n            if (v !== source) {\n                dist[v] = Infinity;\n            }\n            queue.insert(dist[v], v, v);\n        });\n        while (!queue.isEmpty()) {\n            const u = queue.remove();\n            scanned[u] = true;\n            const neighbours = adjacencyList[u] || [];\n            for (let i = 0; i < neighbours.length; i += 1) {\n                const v = neighbours[i];\n                if (!scanned[v]) {\n                    const alt = dist[u] + weight(u, v);\n                    if (alt < dist[v]) {\n                        dist[v] = alt;\n                        previous[v] = u;\n                        queue.updatePriority(v, alt);\n                    }\n                }\n            }\n        }\n        return previous;\n    }\n    Dijkstra.run = run;\n})(Dijkstra || (Dijkstra = {}));\n//# sourceMappingURL=dijkstra.js.map","// eslint-disable-next-line\nexport var ModifierKey;\n(function (ModifierKey) {\n    function parse(modifiers) {\n        const or = [];\n        const and = [];\n        if (Array.isArray(modifiers)) {\n            or.push(...modifiers);\n        }\n        else {\n            modifiers.split('|').forEach((item) => {\n                if (item.indexOf('&') === -1) {\n                    or.push(item);\n                }\n                else {\n                    and.push(...item.split('&'));\n                }\n            });\n        }\n        return { or, and };\n    }\n    ModifierKey.parse = parse;\n    function equals(modifiers1, modifiers2) {\n        if (modifiers1 != null && modifiers2 != null) {\n            const m1 = parse(modifiers1);\n            const m2 = parse(modifiers2);\n            const or1 = m1.or.sort();\n            const or2 = m2.or.sort();\n            const and1 = m1.and.sort();\n            const and2 = m2.and.sort();\n            const equal = (a1, a2) => {\n                return (a1.length === a2.length &&\n                    (a1.length === 0 || a1.every((a, i) => a === a2[i])));\n            };\n            return equal(or1, or2) && equal(and1, and2);\n        }\n        if (modifiers1 == null && modifiers2 == null) {\n            return true;\n        }\n        return false;\n    }\n    ModifierKey.equals = equals;\n    function isMatch(e, modifiers, strict) {\n        if (modifiers == null ||\n            (Array.isArray(modifiers) && modifiers.length === 0)) {\n            return strict\n                ? e.altKey !== true &&\n                    e.ctrlKey !== true &&\n                    e.metaKey !== true &&\n                    e.shiftKey !== true\n                : true;\n        }\n        const { or, and } = parse(modifiers);\n        const match = (key) => {\n            const name = `${key.toLowerCase()}Key`;\n            return e[name] === true;\n        };\n        return or.some((key) => match(key)) && and.every((key) => match(key));\n    }\n    ModifierKey.isMatch = isMatch;\n})(ModifierKey || (ModifierKey = {}));\n//# sourceMappingURL=index.js.map","export var Timing;\n(function (Timing) {\n    Timing.linear = (t) => t;\n    Timing.quad = (t) => t * t;\n    Timing.cubic = (t) => t * t * t;\n    Timing.inout = (t) => {\n        if (t <= 0) {\n            return 0;\n        }\n        if (t >= 1) {\n            return 1;\n        }\n        const t2 = t * t;\n        const t3 = t2 * t;\n        return 4 * (t < 0.5 ? t3 : 3 * (t - t2) + t3 - 0.75);\n    };\n    Timing.exponential = (t) => {\n        return Math.pow(2, 10 * (t - 1)); // eslint-disable-line\n    };\n    Timing.bounce = ((t) => {\n        // eslint-disable-next-line\n        for (let a = 0, b = 1; 1; a += b, b /= 2) {\n            if (t >= (7 - 4 * a) / 11) {\n                const q = (11 - 6 * a - 11 * t) / 4;\n                return -q * q + b * b;\n            }\n        }\n    });\n})(Timing || (Timing = {}));\n(function (Timing) {\n    Timing.decorators = {\n        reverse(f) {\n            return (t) => 1 - f(1 - t);\n        },\n        reflect(f) {\n            return (t) => 0.5 * (t < 0.5 ? f(2 * t) : 2 - f(2 - 2 * t));\n        },\n        clamp(f, n = 0, x = 1) {\n            return (t) => {\n                const r = f(t);\n                return r < n ? n : r > x ? x : r;\n            };\n        },\n        back(s = 1.70158) {\n            return (t) => t * t * ((s + 1) * t - s);\n        },\n        elastic(x = 1.5) {\n            return (t) => Math.pow(2, 10 * (t - 1)) * Math.cos(((20 * Math.PI * x) / 3) * t); // eslint-disable-line\n        },\n    };\n})(Timing || (Timing = {}));\n(function (Timing) {\n    // Slight acceleration from zero to full speed\n    function easeInSine(t) {\n        return -1 * Math.cos(t * (Math.PI / 2)) + 1;\n    }\n    Timing.easeInSine = easeInSine;\n    // Slight deceleration at the end\n    function easeOutSine(t) {\n        return Math.sin(t * (Math.PI / 2));\n    }\n    Timing.easeOutSine = easeOutSine;\n    // Slight acceleration at beginning and slight deceleration at end\n    function easeInOutSine(t) {\n        return -0.5 * (Math.cos(Math.PI * t) - 1);\n    }\n    Timing.easeInOutSine = easeInOutSine;\n    // Accelerating from zero velocity\n    function easeInQuad(t) {\n        return t * t;\n    }\n    Timing.easeInQuad = easeInQuad;\n    // Decelerating to zero velocity\n    function easeOutQuad(t) {\n        return t * (2 - t);\n    }\n    Timing.easeOutQuad = easeOutQuad;\n    // Acceleration until halfway, then deceleration\n    function easeInOutQuad(t) {\n        return t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\n    }\n    Timing.easeInOutQuad = easeInOutQuad;\n    // Accelerating from zero velocity\n    function easeInCubic(t) {\n        return t * t * t;\n    }\n    Timing.easeInCubic = easeInCubic;\n    // Decelerating to zero velocity\n    function easeOutCubic(t) {\n        const t1 = t - 1;\n        return t1 * t1 * t1 + 1;\n    }\n    Timing.easeOutCubic = easeOutCubic;\n    // Acceleration until halfway, then deceleration\n    function easeInOutCubic(t) {\n        return t < 0.5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;\n    }\n    Timing.easeInOutCubic = easeInOutCubic;\n    // Accelerating from zero velocity\n    function easeInQuart(t) {\n        return t * t * t * t;\n    }\n    Timing.easeInQuart = easeInQuart;\n    // Decelerating to zero velocity\n    function easeOutQuart(t) {\n        const t1 = t - 1;\n        return 1 - t1 * t1 * t1 * t1;\n    }\n    Timing.easeOutQuart = easeOutQuart;\n    // Acceleration until halfway, then deceleration\n    function easeInOutQuart(t) {\n        const t1 = t - 1;\n        return t < 0.5 ? 8 * t * t * t * t : 1 - 8 * t1 * t1 * t1 * t1;\n    }\n    Timing.easeInOutQuart = easeInOutQuart;\n    // Accelerating from zero velocity\n    function easeInQuint(t) {\n        return t * t * t * t * t;\n    }\n    Timing.easeInQuint = easeInQuint;\n    // Decelerating to zero velocity\n    function easeOutQuint(t) {\n        const t1 = t - 1;\n        return 1 + t1 * t1 * t1 * t1 * t1;\n    }\n    Timing.easeOutQuint = easeOutQuint;\n    // Acceleration until halfway, then deceleration\n    function easeInOutQuint(t) {\n        const t1 = t - 1;\n        return t < 0.5 ? 16 * t * t * t * t * t : 1 + 16 * t1 * t1 * t1 * t1 * t1;\n    }\n    Timing.easeInOutQuint = easeInOutQuint;\n    // Accelerate exponentially until finish\n    function easeInExpo(t) {\n        if (t === 0) {\n            return 0;\n        }\n        return Math.pow(2, 10 * (t - 1)); // eslint-disable-line\n    }\n    Timing.easeInExpo = easeInExpo;\n    // Initial exponential acceleration slowing to stop\n    function easeOutExpo(t) {\n        if (t === 1) {\n            return 1;\n        }\n        return -Math.pow(2, -10 * t) + 1; // eslint-disable-line\n    }\n    Timing.easeOutExpo = easeOutExpo;\n    // Exponential acceleration and deceleration\n    function easeInOutExpo(t) {\n        if (t === 0 || t === 1) {\n            return t;\n        }\n        const scaledTime = t * 2;\n        const scaledTime1 = scaledTime - 1;\n        if (scaledTime < 1) {\n            return 0.5 * Math.pow(2, 10 * scaledTime1); // eslint-disable-line\n        }\n        return 0.5 * (-Math.pow(2, -10 * scaledTime1) + 2); // eslint-disable-line\n    }\n    Timing.easeInOutExpo = easeInOutExpo;\n    // Increasing velocity until stop\n    function easeInCirc(t) {\n        const scaledTime = t / 1;\n        return -1 * (Math.sqrt(1 - scaledTime * t) - 1);\n    }\n    Timing.easeInCirc = easeInCirc;\n    // Start fast, decreasing velocity until stop\n    function easeOutCirc(t) {\n        const t1 = t - 1;\n        return Math.sqrt(1 - t1 * t1);\n    }\n    Timing.easeOutCirc = easeOutCirc;\n    // Fast increase in velocity, fast decrease in velocity\n    function easeInOutCirc(t) {\n        const scaledTime = t * 2;\n        const scaledTime1 = scaledTime - 2;\n        if (scaledTime < 1) {\n            return -0.5 * (Math.sqrt(1 - scaledTime * scaledTime) - 1);\n        }\n        return 0.5 * (Math.sqrt(1 - scaledTime1 * scaledTime1) + 1);\n    }\n    Timing.easeInOutCirc = easeInOutCirc;\n    // Slow movement backwards then fast snap to finish\n    function easeInBack(t, magnitude = 1.70158) {\n        return t * t * ((magnitude + 1) * t - magnitude);\n    }\n    Timing.easeInBack = easeInBack;\n    // Fast snap to backwards point then slow resolve to finish\n    function easeOutBack(t, magnitude = 1.70158) {\n        const scaledTime = t / 1 - 1;\n        return (scaledTime * scaledTime * ((magnitude + 1) * scaledTime + magnitude) + 1);\n    }\n    Timing.easeOutBack = easeOutBack;\n    // Slow movement backwards, fast snap to past finish, slow resolve to finish\n    function easeInOutBack(t, magnitude = 1.70158) {\n        const scaledTime = t * 2;\n        const scaledTime2 = scaledTime - 2;\n        const s = magnitude * 1.525;\n        if (scaledTime < 1) {\n            return 0.5 * scaledTime * scaledTime * ((s + 1) * scaledTime - s);\n        }\n        return 0.5 * (scaledTime2 * scaledTime2 * ((s + 1) * scaledTime2 + s) + 2);\n    }\n    Timing.easeInOutBack = easeInOutBack;\n    // Bounces slowly then quickly to finish\n    function easeInElastic(t, magnitude = 0.7) {\n        if (t === 0 || t === 1) {\n            return t;\n        }\n        const scaledTime = t / 1;\n        const scaledTime1 = scaledTime - 1;\n        const p = 1 - magnitude;\n        const s = (p / (2 * Math.PI)) * Math.asin(1);\n        return -(Math.pow(2, 10 * scaledTime1) * // eslint-disable-line\n            Math.sin(((scaledTime1 - s) * (2 * Math.PI)) / p));\n    }\n    Timing.easeInElastic = easeInElastic;\n    // Fast acceleration, bounces to zero\n    function easeOutElastic(t, magnitude = 0.7) {\n        const p = 1 - magnitude;\n        const scaledTime = t * 2;\n        if (t === 0 || t === 1) {\n            return t;\n        }\n        const s = (p / (2 * Math.PI)) * Math.asin(1);\n        return (Math.pow(2, -10 * scaledTime) * // eslint-disable-line\n            Math.sin(((scaledTime - s) * (2 * Math.PI)) / p) +\n            1);\n    }\n    Timing.easeOutElastic = easeOutElastic;\n    // Slow start and end, two bounces sandwich a fast motion\n    function easeInOutElastic(t, magnitude = 0.65) {\n        const p = 1 - magnitude;\n        if (t === 0 || t === 1) {\n            return t;\n        }\n        const scaledTime = t * 2;\n        const scaledTime1 = scaledTime - 1;\n        const s = (p / (2 * Math.PI)) * Math.asin(1);\n        if (scaledTime < 1) {\n            return (-0.5 *\n                (Math.pow(2, 10 * scaledTime1) * // eslint-disable-line\n                    Math.sin(((scaledTime1 - s) * (2 * Math.PI)) / p)));\n        }\n        return (Math.pow(2, -10 * scaledTime1) * // eslint-disable-line\n            Math.sin(((scaledTime1 - s) * (2 * Math.PI)) / p) *\n            0.5 +\n            1);\n    }\n    Timing.easeInOutElastic = easeInOutElastic;\n    // Bounce to completion\n    function easeOutBounce(t) {\n        const scaledTime = t / 1;\n        if (scaledTime < 1 / 2.75) {\n            return 7.5625 * scaledTime * scaledTime;\n        }\n        if (scaledTime < 2 / 2.75) {\n            const scaledTime2 = scaledTime - 1.5 / 2.75;\n            return 7.5625 * scaledTime2 * scaledTime2 + 0.75;\n        }\n        if (scaledTime < 2.5 / 2.75) {\n            const scaledTime2 = scaledTime - 2.25 / 2.75;\n            return 7.5625 * scaledTime2 * scaledTime2 + 0.9375;\n        }\n        {\n            const scaledTime2 = scaledTime - 2.625 / 2.75;\n            return 7.5625 * scaledTime2 * scaledTime2 + 0.984375;\n        }\n    }\n    Timing.easeOutBounce = easeOutBounce;\n    // Bounce increasing in velocity until completion\n    function easeInBounce(t) {\n        return 1 - easeOutBounce(1 - t);\n    }\n    Timing.easeInBounce = easeInBounce;\n    // Bounce in and bounce out\n    function easeInOutBounce(t) {\n        if (t < 0.5) {\n            return easeInBounce(t * 2) * 0.5;\n        }\n        return easeOutBounce(t * 2 - 1) * 0.5 + 0.5;\n    }\n    Timing.easeInOutBounce = easeInOutBounce;\n})(Timing || (Timing = {}));\n//# sourceMappingURL=timing.js.map","export var Interp;\n(function (Interp) {\n    Interp.number = (a, b) => {\n        const d = b - a;\n        return (t) => {\n            return a + d * t;\n        };\n    };\n    Interp.object = (a, b) => {\n        const keys = Object.keys(a);\n        return (t) => {\n            const ret = {};\n            for (let i = keys.length - 1; i !== -1; i -= 1) {\n                const key = keys[i];\n                ret[key] = a[key] + (b[key] - a[key]) * t;\n            }\n            return ret;\n        };\n    };\n    Interp.unit = (a, b) => {\n        const reg = /(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/;\n        const ma = reg.exec(a);\n        const mb = reg.exec(b);\n        const pb = mb ? mb[1] : '';\n        const aa = ma ? +ma[1] : 0;\n        const bb = mb ? +mb[1] : 0;\n        const index = pb.indexOf('.');\n        const precision = index > 0 ? pb[1].length - index - 1 : 0;\n        const d = bb - aa;\n        const u = ma ? ma[2] : '';\n        return (t) => {\n            return (aa + d * t).toFixed(precision) + u;\n        };\n    };\n    Interp.color = (a, b) => {\n        const ca = parseInt(a.slice(1), 16);\n        const cb = parseInt(b.slice(1), 16);\n        const ra = ca & 0x0000ff;\n        const rd = (cb & 0x0000ff) - ra;\n        const ga = ca & 0x00ff00;\n        const gd = (cb & 0x00ff00) - ga;\n        const ba = ca & 0xff0000;\n        const bd = (cb & 0xff0000) - ba;\n        return (t) => {\n            const r = (ra + rd * t) & 0x000000ff;\n            const g = (ga + gd * t) & 0x0000ff00;\n            const b = (ba + bd * t) & 0x00ff0000;\n            return `#${((1 << 24) | r | g | b).toString(16).slice(1)}`;\n        };\n    };\n})(Interp || (Interp = {}));\n//# sourceMappingURL=interp.js.map","/**\n * An implementation of the Priority Queue abstract data type.\n *\n * @see: http://en.wikipedia.org/wiki/Priority_queue\n *\n * It is like a normal stack or queue, but where each item has assigned a\n * priority (a number). Items with higher priority are served before items\n * with lower priority. This implementation uses binary heap as an internal\n * representation of the queue. The time complexity of all the methods is as\n * follows:\n *\n * - create: `O(n)`\n * - insert: `O(log n)`\n * - remove: `O(log n)`\n * - peek: `O(1)`\n * - isEmpty: `O(1)`\n * - peekPriority: `O(1)`\n */\nexport class PriorityQueue {\n    constructor(options = {}) {\n        this.comparator = options.comparator || PriorityQueue.defaultComparator;\n        this.index = {};\n        this.data = options.data || [];\n        this.heapify();\n    }\n    /**\n     * Returns `true` if the priority queue is empty, `false` otherwise.\n     */\n    isEmpty() {\n        return this.data.length === 0;\n    }\n    /**\n     * Inserts a value with priority to the queue. Optionally pass a unique\n     * id of this item. Passing unique IDs for each item you insert allows\n     * you to use the `updatePriority()` operation.\n     * @param priority\n     * @param value\n     * @param id\n     */\n    insert(priority, value, id) {\n        const item = { priority, value };\n        const index = this.data.length;\n        if (id) {\n            item.id = id;\n            this.index[id] = index;\n        }\n        this.data.push(item);\n        this.bubbleUp(index);\n        return this;\n    }\n    /**\n     * Returns the value of an item with the highest priority.\n     */\n    peek() {\n        return this.data[0] ? this.data[0].value : null;\n    }\n    /**\n     * Returns the highest priority in the queue.\n     */\n    peekPriority() {\n        return this.data[0] ? this.data[0].priority : null;\n    }\n    updatePriority(id, priority) {\n        const index = this.index[id];\n        if (typeof index === 'undefined') {\n            throw new Error(`Node with id '${id}' was not found in the heap.`);\n        }\n        const data = this.data;\n        const oldPriority = data[index].priority;\n        const comp = this.comparator(priority, oldPriority);\n        if (comp < 0) {\n            data[index].priority = priority;\n            this.bubbleUp(index);\n        }\n        else if (comp > 0) {\n            data[index].priority = priority;\n            this.bubbleDown(index);\n        }\n    }\n    /**\n     * Removes the item with the highest priority from the queue\n     *\n     * @returns The value of the removed item.\n     */\n    remove() {\n        const data = this.data;\n        const peek = data[0];\n        const last = data.pop();\n        if (peek.id) {\n            delete this.index[peek.id];\n        }\n        if (data.length > 0) {\n            data[0] = last;\n            if (last.id) {\n                this.index[last.id] = 0;\n            }\n            this.bubbleDown(0);\n        }\n        return peek ? peek.value : null;\n    }\n    heapify() {\n        for (let i = 0; i < this.data.length; i += 1) {\n            this.bubbleUp(i);\n        }\n    }\n    bubbleUp(index) {\n        const data = this.data;\n        let tmp;\n        let parent;\n        let current = index;\n        while (current > 0) {\n            parent = (current - 1) >>> 1;\n            if (this.comparator(data[current].priority, data[parent].priority) < 0) {\n                tmp = data[parent];\n                data[parent] = data[current];\n                let id = data[current].id;\n                if (id != null) {\n                    this.index[id] = parent;\n                }\n                data[current] = tmp;\n                id = data[current].id;\n                if (id != null) {\n                    this.index[id] = current;\n                }\n                current = parent;\n            }\n            else {\n                break;\n            }\n        }\n    }\n    bubbleDown(index) {\n        const data = this.data;\n        const last = data.length - 1;\n        let current = index;\n        // eslint-disable-next-line\n        while (true) {\n            const left = (current << 1) + 1;\n            const right = left + 1;\n            let minIndex = current;\n            if (left <= last &&\n                this.comparator(data[left].priority, data[minIndex].priority) < 0) {\n                minIndex = left;\n            }\n            if (right <= last &&\n                this.comparator(data[right].priority, data[minIndex].priority) < 0) {\n                minIndex = right;\n            }\n            if (minIndex !== current) {\n                const tmp = data[minIndex];\n                data[minIndex] = data[current];\n                let id = data[current].id;\n                if (id != null) {\n                    this.index[id] = minIndex;\n                }\n                data[current] = tmp;\n                id = data[current].id;\n                if (id != null) {\n                    this.index[id] = current;\n                }\n                current = minIndex;\n            }\n            else {\n                break;\n            }\n        }\n    }\n}\n(function (PriorityQueue) {\n    PriorityQueue.defaultComparator = (a, b) => a - b;\n})(PriorityQueue || (PriorityQueue = {}));\n//# sourceMappingURL=priorityqueue.js.map","/* eslint-disable no-constructor-return */\nimport { NumberExt } from '../number';\nexport class Color {\n    constructor(color, g, b, a) {\n        if (color == null) {\n            return this.set(255, 255, 255, 1);\n        }\n        if (typeof color === 'number') {\n            return this.set(color, g, b, a);\n        }\n        if (typeof color === 'string') {\n            return Color.fromString(color) || this;\n        }\n        if (Array.isArray(color)) {\n            return this.set(color);\n        }\n        this.set(color.r, color.g, color.b, color.a == null ? 1 : color.a);\n    }\n    blend(start, end, weight) {\n        this.set(start.r + (end.r - start.r) * weight, start.g + (end.g - start.g) * weight, start.b + (end.b - start.b) * weight, start.a + (end.a - start.a) * weight);\n    }\n    lighten(amount) {\n        const rgba = Color.lighten(this.toArray(), amount);\n        this.r = rgba[0];\n        this.g = rgba[1];\n        this.b = rgba[2];\n        this.a = rgba[3];\n    }\n    darken(amount) {\n        this.lighten(-amount);\n    }\n    set(arg0, arg1, arg2, arg3) {\n        const r = Array.isArray(arg0) ? arg0[0] : arg0;\n        const g = Array.isArray(arg0) ? arg0[1] : arg1;\n        const b = Array.isArray(arg0) ? arg0[2] : arg2;\n        const a = Array.isArray(arg0) ? arg0[3] : arg3;\n        this.r = Math.round(NumberExt.clamp(r, 0, 255));\n        this.g = Math.round(NumberExt.clamp(g, 0, 255));\n        this.b = Math.round(NumberExt.clamp(b, 0, 255));\n        this.a = a == null ? 1 : NumberExt.clamp(a, 0, 1);\n        return this;\n    }\n    toHex() {\n        const hex = ['r', 'g', 'b'].map((key) => {\n            const str = this[key].toString(16);\n            return str.length < 2 ? `0${str}` : str;\n        });\n        return `#${hex.join('')}`;\n    }\n    toRGBA() {\n        return this.toArray();\n    }\n    toHSLA() {\n        return Color.rgba2hsla(this.r, this.g, this.b, this.a);\n    }\n    toCSS(ignoreAlpha) {\n        const rgb = `${this.r},${this.g},${this.b},`;\n        return ignoreAlpha ? `rgb(${rgb})` : `rgba(${rgb},${this.a})`;\n    }\n    toGrey() {\n        return Color.makeGrey(Math.round((this.r + this.g + this.b) / 3), this.a);\n    }\n    toArray() {\n        return [this.r, this.g, this.b, this.a];\n    }\n    toString() {\n        return this.toCSS();\n    }\n}\n(function (Color) {\n    function fromArray(arr) {\n        return new Color(arr);\n    }\n    Color.fromArray = fromArray;\n    function fromHex(color) {\n        return new Color([...hex2rgb(color), 1]);\n    }\n    Color.fromHex = fromHex;\n    function fromRGBA(color) {\n        const matches = color.toLowerCase().match(/^rgba?\\(([\\s.,0-9]+)\\)/);\n        if (matches) {\n            const arr = matches[1].split(/\\s*,\\s*/).map((v) => parseInt(v, 10));\n            return new Color(arr);\n        }\n        return null;\n    }\n    Color.fromRGBA = fromRGBA;\n    function hue2rgb(m1, m2, h) {\n        if (h < 0) {\n            ++h; // eslint-disable-line\n        }\n        if (h > 1) {\n            --h; // eslint-disable-line\n        }\n        const h6 = 6 * h;\n        if (h6 < 1) {\n            return m1 + (m2 - m1) * h6;\n        }\n        if (2 * h < 1) {\n            return m2;\n        }\n        if (3 * h < 2) {\n            return m1 + (m2 - m1) * (2 / 3 - h) * 6;\n        }\n        return m1;\n    }\n    function fromHSLA(color) {\n        const matches = color.toLowerCase().match(/^hsla?\\(([\\s.,0-9]+)\\)/);\n        if (matches) {\n            const arr = matches[2].split(/\\s*,\\s*/);\n            const h = (((parseFloat(arr[0]) % 360) + 360) % 360) / 360;\n            const s = parseFloat(arr[1]) / 100;\n            const l = parseFloat(arr[2]) / 100;\n            const a = arr[3] == null ? 1 : parseInt(arr[3], 10);\n            return new Color(hsla2rgba(h, s, l, a));\n        }\n        return null;\n    }\n    Color.fromHSLA = fromHSLA;\n    function fromString(color) {\n        if (color.startsWith('#')) {\n            return fromHex(color);\n        }\n        if (color.startsWith('rgb')) {\n            return fromRGBA(color);\n        }\n        const preset = Color.named[color];\n        if (preset) {\n            return fromHex(preset);\n        }\n        return fromHSLA(color);\n    }\n    Color.fromString = fromString;\n    function makeGrey(g, a) {\n        return Color.fromArray([g, g, g, a]);\n    }\n    Color.makeGrey = makeGrey;\n    function rgba2hsla(arg0, arg1, arg2, arg3) {\n        const r = Array.isArray(arg0) ? arg0[0] : arg0;\n        const g = Array.isArray(arg0) ? arg0[1] : arg1;\n        const b = Array.isArray(arg0) ? arg0[2] : arg2;\n        const a = Array.isArray(arg0) ? arg0[3] : arg3;\n        const max = Math.max(r, g, b);\n        const min = Math.min(r, g, b);\n        const l = (max + min) / 2;\n        let h = 0;\n        let s = 0;\n        if (min !== max) {\n            const d = max - min;\n            s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n            switch (max) {\n                case r:\n                    h = (g - b) / d + (g < b ? 6 : 0);\n                    break;\n                case g:\n                    h = (b - r) / d + 2;\n                    break;\n                case b:\n                    h = (r - g) / d + 4;\n                    break;\n                default:\n                    break;\n            }\n            h /= 6;\n        }\n        return [h, s, l, a == null ? 1 : a];\n    }\n    Color.rgba2hsla = rgba2hsla;\n    function hsla2rgba(arg0, arg1, arg2, arg3) {\n        const h = Array.isArray(arg0) ? arg0[0] : arg0;\n        const s = Array.isArray(arg0) ? arg0[1] : arg1;\n        const l = Array.isArray(arg0) ? arg0[2] : arg2;\n        const a = Array.isArray(arg0) ? arg0[3] : arg3;\n        const m2 = l <= 0.5 ? l * (s + 1) : l + s - l * s;\n        const m1 = 2 * l - m2;\n        return [\n            hue2rgb(m1, m2, h + 1 / 3) * 256,\n            hue2rgb(m1, m2, h) * 256,\n            hue2rgb(m1, m2, h - 1 / 3) * 256,\n            a == null ? 1 : a,\n        ];\n    }\n    Color.hsla2rgba = hsla2rgba;\n    function random(ignoreAlpha) {\n        return new Color(Math.round(Math.random() * 256), Math.round(Math.random() * 256), Math.round(Math.random() * 256), ignoreAlpha ? undefined : parseFloat(Math.random().toFixed(2)));\n    }\n    Color.random = random;\n    function randomHex() {\n        const letters = '0123456789ABCDEF';\n        let color = '#';\n        for (let i = 0; i < 6; i += 1) {\n            color += letters[Math.floor(Math.random() * 16)];\n        }\n        return color;\n    }\n    Color.randomHex = randomHex;\n    function randomRGBA(ignoreAlpha) {\n        return random(ignoreAlpha).toString();\n    }\n    Color.randomRGBA = randomRGBA;\n    function invert(color, bw) {\n        if (typeof color === 'string') {\n            const pound = color[0] === '#';\n            const [r, g, b] = hex2rgb(color);\n            if (bw) {\n                // http://stackoverflow.com/a/3943023/112731\n                return r * 0.299 + g * 0.587 + b * 0.114 > 186 ? '#000000' : '#ffffff';\n            }\n            return `${pound ? '#' : ''}${rgb2hex(255 - r, 255 - g, 255 - b)}`;\n        }\n        const r = color[0];\n        const g = color[1];\n        const b = color[2];\n        const a = color[3];\n        if (bw) {\n            return r * 0.299 + g * 0.587 + b * 0.114 > 186\n                ? [0, 0, 0, a]\n                : [255, 255, 255, a];\n        }\n        return [255 - r, 255 - g, 255 - b, a];\n    }\n    Color.invert = invert;\n    function hex2rgb(hex) {\n        const color = hex.indexOf('#') === 0 ? hex : `#${hex}`;\n        let val = Number(`0x${color.substr(1)}`);\n        if (!(color.length === 4 || color.length === 7) || Number.isNaN(val)) {\n            throw new Error('Invalid hex color.');\n        }\n        const bits = color.length === 4 ? 4 : 8;\n        const mask = (1 << bits) - 1;\n        const bgr = ['b', 'g', 'r'].map(() => {\n            const c = val & mask;\n            val >>= bits;\n            return bits === 4 ? 17 * c : c;\n        });\n        return [bgr[2], bgr[1], bgr[0]];\n    }\n    function rgb2hex(r, g, b) {\n        const pad = (hex) => (hex.length < 2 ? `0${hex}` : hex);\n        return `${pad(r.toString(16))}${pad(g.toString(16))}${pad(b.toString(16))}`;\n    }\n    function lighten(color, amt) {\n        return lum(color, amt);\n    }\n    Color.lighten = lighten;\n    function darken(color, amt) {\n        return lum(color, -amt);\n    }\n    Color.darken = darken;\n    function lum(color, amt) {\n        if (typeof color === 'string') {\n            const pound = color[0] === '#';\n            const num = parseInt(pound ? color.substr(1) : color, 16);\n            const r = NumberExt.clamp((num >> 16) + amt, 0, 255);\n            const g = NumberExt.clamp(((num >> 8) & 0x00ff) + amt, 0, 255);\n            const b = NumberExt.clamp((num & 0x0000ff) + amt, 0, 255);\n            return `${pound ? '#' : ''}${(b | (g << 8) | (r << 16)).toString(16)}`;\n        }\n        const hex = rgb2hex(color[0], color[1], color[2]);\n        const arr = hex2rgb(lum(hex, amt));\n        return [arr[0], arr[1], arr[2], color[3]];\n    }\n})(Color || (Color = {}));\n(function (Color) {\n    Color.named = {\n        aliceblue: '#f0f8ff',\n        antiquewhite: '#faebd7',\n        aqua: '#00ffff',\n        aquamarine: '#7fffd4',\n        azure: '#f0ffff',\n        beige: '#f5f5dc',\n        bisque: '#ffe4c4',\n        black: '#000000',\n        blanchedalmond: '#ffebcd',\n        blue: '#0000ff',\n        blueviolet: '#8a2be2',\n        brown: '#a52a2a',\n        burlywood: '#deb887',\n        burntsienna: '#ea7e5d',\n        cadetblue: '#5f9ea0',\n        chartreuse: '#7fff00',\n        chocolate: '#d2691e',\n        coral: '#ff7f50',\n        cornflowerblue: '#6495ed',\n        cornsilk: '#fff8dc',\n        crimson: '#dc143c',\n        cyan: '#00ffff',\n        darkblue: '#00008b',\n        darkcyan: '#008b8b',\n        darkgoldenrod: '#b8860b',\n        darkgray: '#a9a9a9',\n        darkgreen: '#006400',\n        darkgrey: '#a9a9a9',\n        darkkhaki: '#bdb76b',\n        darkmagenta: '#8b008b',\n        darkolivegreen: '#556b2f',\n        darkorange: '#ff8c00',\n        darkorchid: '#9932cc',\n        darkred: '#8b0000',\n        darksalmon: '#e9967a',\n        darkseagreen: '#8fbc8f',\n        darkslateblue: '#483d8b',\n        darkslategray: '#2f4f4f',\n        darkslategrey: '#2f4f4f',\n        darkturquoise: '#00ced1',\n        darkviolet: '#9400d3',\n        deeppink: '#ff1493',\n        deepskyblue: '#00bfff',\n        dimgray: '#696969',\n        dimgrey: '#696969',\n        dodgerblue: '#1e90ff',\n        firebrick: '#b22222',\n        floralwhite: '#fffaf0',\n        forestgreen: '#228b22',\n        fuchsia: '#ff00ff',\n        gainsboro: '#dcdcdc',\n        ghostwhite: '#f8f8ff',\n        gold: '#ffd700',\n        goldenrod: '#daa520',\n        gray: '#808080',\n        green: '#008000',\n        greenyellow: '#adff2f',\n        grey: '#808080',\n        honeydew: '#f0fff0',\n        hotpink: '#ff69b4',\n        indianred: '#cd5c5c',\n        indigo: '#4b0082',\n        ivory: '#fffff0',\n        khaki: '#f0e68c',\n        lavender: '#e6e6fa',\n        lavenderblush: '#fff0f5',\n        lawngreen: '#7cfc00',\n        lemonchiffon: '#fffacd',\n        lightblue: '#add8e6',\n        lightcoral: '#f08080',\n        lightcyan: '#e0ffff',\n        lightgoldenrodyellow: '#fafad2',\n        lightgray: '#d3d3d3',\n        lightgreen: '#90ee90',\n        lightgrey: '#d3d3d3',\n        lightpink: '#ffb6c1',\n        lightsalmon: '#ffa07a',\n        lightseagreen: '#20b2aa',\n        lightskyblue: '#87cefa',\n        lightslategray: '#778899',\n        lightslategrey: '#778899',\n        lightsteelblue: '#b0c4de',\n        lightyellow: '#ffffe0',\n        lime: '#00ff00',\n        limegreen: '#32cd32',\n        linen: '#faf0e6',\n        magenta: '#ff00ff',\n        maroon: '#800000',\n        mediumaquamarine: '#66cdaa',\n        mediumblue: '#0000cd',\n        mediumorchid: '#ba55d3',\n        mediumpurple: '#9370db',\n        mediumseagreen: '#3cb371',\n        mediumslateblue: '#7b68ee',\n        mediumspringgreen: '#00fa9a',\n        mediumturquoise: '#48d1cc',\n        mediumvioletred: '#c71585',\n        midnightblue: '#191970',\n        mintcream: '#f5fffa',\n        mistyrose: '#ffe4e1',\n        moccasin: '#ffe4b5',\n        navajowhite: '#ffdead',\n        navy: '#000080',\n        oldlace: '#fdf5e6',\n        olive: '#808000',\n        olivedrab: '#6b8e23',\n        orange: '#ffa500',\n        orangered: '#ff4500',\n        orchid: '#da70d6',\n        palegoldenrod: '#eee8aa',\n        palegreen: '#98fb98',\n        paleturquoise: '#afeeee',\n        palevioletred: '#db7093',\n        papayawhip: '#ffefd5',\n        peachpuff: '#ffdab9',\n        peru: '#cd853f',\n        pink: '#ffc0cb',\n        plum: '#dda0dd',\n        powderblue: '#b0e0e6',\n        purple: '#800080',\n        rebeccapurple: '#663399',\n        red: '#ff0000',\n        rosybrown: '#bc8f8f',\n        royalblue: '#4169e1',\n        saddlebrown: '#8b4513',\n        salmon: '#fa8072',\n        sandybrown: '#f4a460',\n        seagreen: '#2e8b57',\n        seashell: '#fff5ee',\n        sienna: '#a0522d',\n        silver: '#c0c0c0',\n        skyblue: '#87ceeb',\n        slateblue: '#6a5acd',\n        slategray: '#708090',\n        slategrey: '#708090',\n        snow: '#fffafa',\n        springgreen: '#00ff7f',\n        steelblue: '#4682b4',\n        tan: '#d2b48c',\n        teal: '#008080',\n        thistle: '#d8bfd8',\n        tomato: '#ff6347',\n        turquoise: '#40e0d0',\n        violet: '#ee82ee',\n        wheat: '#f5deb3',\n        white: '#ffffff',\n        whitesmoke: '#f5f5f5',\n        yellow: '#ffff00',\n        yellowgreen: '#9acd32',\n    };\n})(Color || (Color = {}));\n//# sourceMappingURL=index.js.map","export class Dictionary {\n    constructor() {\n        this.clear();\n    }\n    clear() {\n        this.map = new WeakMap();\n        this.arr = [];\n    }\n    has(key) {\n        return this.map.has(key);\n    }\n    get(key) {\n        return this.map.get(key);\n    }\n    set(key, value) {\n        this.map.set(key, value);\n        this.arr.push(key);\n    }\n    delete(key) {\n        const index = this.arr.indexOf(key);\n        if (index >= 0) {\n            this.arr.splice(index, 1);\n        }\n        const ret = this.map.get(key);\n        this.map.delete(key);\n        return ret;\n    }\n    each(iterator) {\n        this.arr.forEach((key) => {\n            const value = this.map.get(key);\n            iterator(value, key);\n        });\n    }\n    dispose() {\n        this.clear();\n    }\n}\n//# sourceMappingURL=dictionary.js.map","import { Platform } from '../platform';\nconst cssModules = [];\nexport function ensure(name, content) {\n    const cssModule = cssModules.find((m) => m.name === name);\n    if (cssModule) {\n        cssModule.loadTimes += 1;\n        if (cssModule.loadTimes > 1) {\n            return;\n        }\n    }\n    if (!Platform.isApplyingHMR()) {\n        const styleElement = document.createElement('style');\n        styleElement.setAttribute('type', 'text/css');\n        styleElement.textContent = content;\n        const head = document.querySelector('head');\n        if (head) {\n            head.insertBefore(styleElement, head.firstChild);\n        }\n        cssModules.push({\n            name,\n            loadTimes: 1,\n            styleElement,\n        });\n    }\n}\nexport function clean(name) {\n    const index = cssModules.findIndex((m) => m.name === name);\n    if (index > -1) {\n        const cssModule = cssModules[index];\n        cssModule.loadTimes -= 1;\n        if (cssModule.loadTimes > 0) {\n            return;\n        }\n        let styleElement = cssModule.styleElement;\n        if (styleElement && styleElement.parentNode) {\n            styleElement.parentNode.removeChild(styleElement);\n        }\n        styleElement = null;\n        cssModules.splice(index, 1);\n    }\n}\n//# sourceMappingURL=loader.js.map","export var Angle;\n(function (Angle) {\n    /**\n     * Converts radian angle to degree angle.\n     * @param rad The radians to convert.\n     */\n    function toDeg(rad) {\n        return ((180 * rad) / Math.PI) % 360;\n    }\n    Angle.toDeg = toDeg;\n    /**\n     * Converts degree angle to radian angle.\n     * @param deg The degree angle to convert.\n     * @param over360\n     */\n    Angle.toRad = function (deg, over360 = false) {\n        const d = over360 ? deg : deg % 360;\n        return (d * Math.PI) / 180;\n    };\n    /**\n     * Returns the angle in degrees and clamps its value between `0` and `360`.\n     */\n    function normalize(angle) {\n        return (angle % 360) + (angle < 0 ? 360 : 0);\n    }\n    Angle.normalize = normalize;\n})(Angle || (Angle = {}));\n//# sourceMappingURL=angle.js.map","export var GeometryUtil;\n(function (GeometryUtil) {\n    function round(num, precision = 0) {\n        return Number.isInteger(num) ? num : +num.toFixed(precision);\n    }\n    GeometryUtil.round = round;\n    function random(min, max) {\n        let mmin;\n        let mmax;\n        if (max == null) {\n            mmax = min == null ? 1 : min;\n            mmin = 0;\n        }\n        else {\n            mmax = max;\n            mmin = min == null ? 0 : min;\n        }\n        if (mmax < mmin) {\n            const temp = mmin;\n            mmin = mmax;\n            mmax = temp;\n        }\n        return Math.floor(Math.random() * (mmax - mmin + 1) + mmin);\n    }\n    GeometryUtil.random = random;\n    function clamp(value, min, max) {\n        if (Number.isNaN(value)) {\n            return NaN;\n        }\n        if (Number.isNaN(min) || Number.isNaN(max)) {\n            return 0;\n        }\n        return min < max\n            ? value < min\n                ? min\n                : value > max\n                    ? max\n                    : value\n            : value < max\n                ? max\n                : value > min\n                    ? min\n                    : value;\n    }\n    GeometryUtil.clamp = clamp;\n    function snapToGrid(value, gridSize) {\n        return gridSize * Math.round(value / gridSize);\n    }\n    GeometryUtil.snapToGrid = snapToGrid;\n    function containsPoint(rect, point) {\n        return (point != null &&\n            rect != null &&\n            point.x >= rect.x &&\n            point.x <= rect.x + rect.width &&\n            point.y >= rect.y &&\n            point.y <= rect.y + rect.height);\n    }\n    GeometryUtil.containsPoint = containsPoint;\n    function squaredLength(p1, p2) {\n        const dx = p1.x - p2.x;\n        const dy = p1.y - p2.y;\n        return dx * dx + dy * dy;\n    }\n    GeometryUtil.squaredLength = squaredLength;\n})(GeometryUtil || (GeometryUtil = {}));\n//# sourceMappingURL=util.js.map","export class Geometry {\n    valueOf() {\n        return this.toJSON();\n    }\n    toString() {\n        return JSON.stringify(this.toJSON());\n    }\n}\n//# sourceMappingURL=geometry.js.map","import { GeometryUtil } from './util';\nimport { Angle } from './angle';\nimport { Geometry } from './geometry';\nexport class Point extends Geometry {\n    constructor(x, y) {\n        super();\n        this.x = x == null ? 0 : x;\n        this.y = y == null ? 0 : y;\n    }\n    /**\n     * Rounds the point to the given precision.\n     */\n    round(precision = 0) {\n        this.x = GeometryUtil.round(this.x, precision);\n        this.y = GeometryUtil.round(this.y, precision);\n        return this;\n    }\n    add(x, y) {\n        const p = Point.create(x, y);\n        this.x += p.x;\n        this.y += p.y;\n        return this;\n    }\n    update(x, y) {\n        const p = Point.create(x, y);\n        this.x = p.x;\n        this.y = p.y;\n        return this;\n    }\n    translate(dx, dy) {\n        const t = Point.create(dx, dy);\n        this.x += t.x;\n        this.y += t.y;\n        return this;\n    }\n    /**\n     * Rotate the point by `degree` around `center`.\n     */\n    rotate(degree, center) {\n        const p = Point.rotate(this, degree, center);\n        this.x = p.x;\n        this.y = p.y;\n        return this;\n    }\n    /**\n     * Scale point by `sx` and `sy` around the given `origin`. If origin is\n     * not specified, the point is scaled around `0, 0`.\n     */\n    scale(sx, sy, origin = new Point()) {\n        const ref = Point.create(origin);\n        this.x = ref.x + sx * (this.x - ref.x);\n        this.y = ref.y + sy * (this.y - ref.y);\n        return this;\n    }\n    /**\n     * Chooses the point closest to this point from among `points`. If `points`\n     * is an empty array, `null` is returned.\n     */\n    closest(points) {\n        if (points.length === 1) {\n            return Point.create(points[0]);\n        }\n        let ret = null;\n        let min = Infinity;\n        points.forEach((p) => {\n            const dist = this.squaredDistance(p);\n            if (dist < min) {\n                ret = p;\n                min = dist;\n            }\n        });\n        return ret ? Point.create(ret) : null;\n    }\n    /**\n     * Returns the distance between the point and another point `p`.\n     */\n    distance(p) {\n        return Math.sqrt(this.squaredDistance(p));\n    }\n    /**\n     * Returns the squared distance between the point and another point `p`.\n     *\n     * Useful for distance comparisons in which real distance is not necessary\n     * (saves one `Math.sqrt()` operation).\n     */\n    squaredDistance(p) {\n        const ref = Point.create(p);\n        const dx = this.x - ref.x;\n        const dy = this.y - ref.y;\n        return dx * dx + dy * dy;\n    }\n    manhattanDistance(p) {\n        const ref = Point.create(p);\n        return Math.abs(ref.x - this.x) + Math.abs(ref.y - this.y);\n    }\n    /**\n     * Returns the magnitude of the point vector.\n     *\n     * @see http://en.wikipedia.org/wiki/Magnitude_(mathematics)\n     */\n    magnitude() {\n        return Math.sqrt(this.x * this.x + this.y * this.y) || 0.01;\n    }\n    /**\n     * Returns the angle(in degrees) between vector from this point to `p` and\n     * the x-axis.\n     */\n    theta(p = new Point()) {\n        const ref = Point.create(p);\n        const y = -(ref.y - this.y); // invert the y-axis.\n        const x = ref.x - this.x;\n        let rad = Math.atan2(y, x);\n        // Correction for III. and IV. quadrant.\n        if (rad < 0) {\n            rad = 2 * Math.PI + rad;\n        }\n        return (180 * rad) / Math.PI;\n    }\n    /**\n     * Returns the angle(in degrees) between vector from this point to `p1` and\n     * the vector from this point to `p2`.\n     *\n     * The ordering of points `p1` and `p2` is important.\n     *\n     * The function returns a value between `0` and `180` when the angle (in the\n     * direction from `p1` to `p2`) is clockwise, and a value between `180` and\n     * `360` when the angle is counterclockwise.\n     *\n     * Returns `NaN` if either of the points `p1` and `p2` is equal with this point.\n     */\n    angleBetween(p1, p2) {\n        if (this.equals(p1) || this.equals(p2)) {\n            return NaN;\n        }\n        let angle = this.theta(p2) - this.theta(p1);\n        if (angle < 0) {\n            angle += 360;\n        }\n        return angle;\n    }\n    /**\n     * Returns the angle(in degrees) between the line from `(0,0)` and this point\n     * and the line from `(0,0)` to `p`.\n     *\n     * The function returns a value between `0` and `180` when the angle (in the\n     * direction from this point to `p`) is clockwise, and a value between `180`\n     * and `360` when the angle is counterclockwise. Returns `NaN` if called from\n     * point `(0,0)` or if `p` is `(0,0)`.\n     */\n    vectorAngle(p) {\n        const zero = new Point(0, 0);\n        return zero.angleBetween(this, p);\n    }\n    /**\n     * Converts rectangular to polar coordinates.\n     */\n    toPolar(origin) {\n        this.update(Point.toPolar(this, origin));\n        return this;\n    }\n    /**\n     * Returns the change in angle(in degrees) that is the result of moving the\n     * point from its previous position to its current position.\n     *\n     * More specifically, this function computes the angle between the line from\n     * the ref point to the previous position of this point(i.e. current position\n     * `-dx`, `-dy`) and the line from the `ref` point to the current position of\n     * this point.\n     *\n     * The function returns a positive value between `0` and `180` when the angle\n     * (in the direction from previous position of this point to its current\n     * position) is clockwise, and a negative value between `0` and `-180` when\n     * the angle is counterclockwise.\n     *\n     * The function returns `0` if the previous and current positions of this\n     * point are the same (i.e. both `dx` and `dy` are `0`).\n     */\n    changeInAngle(dx, dy, ref = new Point()) {\n        // Revert the translation and measure the change in angle around x-axis.\n        return this.clone().translate(-dx, -dy).theta(ref) - this.theta(ref);\n    }\n    /**\n     * If the point lies outside the rectangle `rect`, adjust the point so that\n     * it becomes the nearest point on the boundary of `rect`.\n     */\n    adhereToRect(rect) {\n        if (!GeometryUtil.containsPoint(rect, this)) {\n            this.x = Math.min(Math.max(this.x, rect.x), rect.x + rect.width);\n            this.y = Math.min(Math.max(this.y, rect.y), rect.y + rect.height);\n        }\n        return this;\n    }\n    /**\n     * Returns the bearing(cardinal direction) between me and the given point.\n     *\n     * @see https://en.wikipedia.org/wiki/Cardinal_direction\n     */\n    bearing(p) {\n        const ref = Point.create(p);\n        const lat1 = Angle.toRad(this.y);\n        const lat2 = Angle.toRad(ref.y);\n        const lon1 = this.x;\n        const lon2 = ref.x;\n        const dLon = Angle.toRad(lon2 - lon1);\n        const y = Math.sin(dLon) * Math.cos(lat2);\n        const x = Math.cos(lat1) * Math.sin(lat2) -\n            Math.sin(lat1) * Math.cos(lat2) * Math.cos(dLon);\n        const brng = Angle.toDeg(Math.atan2(y, x));\n        const bearings = ['NE', 'E', 'SE', 'S', 'SW', 'W', 'NW', 'N'];\n        let index = brng - 22.5;\n        if (index < 0) {\n            index += 360;\n        }\n        index = parseInt((index / 45), 10);\n        return bearings[index];\n    }\n    /**\n     * Returns the cross product of the vector from me to `p1` and the vector\n     * from me to `p2`.\n     *\n     * The left-hand rule is used because the coordinate system is left-handed.\n     */\n    cross(p1, p2) {\n        if (p1 != null && p2 != null) {\n            const a = Point.create(p1);\n            const b = Point.create(p2);\n            return (b.x - this.x) * (a.y - this.y) - (b.y - this.y) * (a.x - this.x);\n        }\n        return NaN;\n    }\n    /**\n     * Returns the dot product of this point with given other point.\n     */\n    dot(p) {\n        const ref = Point.create(p);\n        return this.x * ref.x + this.y * ref.y;\n    }\n    diff(dx, dy) {\n        if (typeof dx === 'number') {\n            return new Point(this.x - dx, this.y - dy);\n        }\n        const p = Point.create(dx);\n        return new Point(this.x - p.x, this.y - p.y);\n    }\n    /**\n     * Returns an interpolation between me and point `p` for a parametert in\n     * the closed interval `[0, 1]`.\n     */\n    lerp(p, t) {\n        const ref = Point.create(p);\n        return new Point((1 - t) * this.x + t * ref.x, (1 - t) * this.y + t * ref.y);\n    }\n    /**\n     * Normalize the point vector, scale the line segment between `(0, 0)`\n     * and the point in order for it to have the given length. If length is\n     * not specified, it is considered to be `1`; in that case, a unit vector\n     * is computed.\n     */\n    normalize(length = 1) {\n        const scale = length / this.magnitude();\n        return this.scale(scale, scale);\n    }\n    /**\n     * Moves this point along the line starting from `ref` to this point by a\n     * certain `distance`.\n     */\n    move(ref, distance) {\n        const p = Point.create(ref);\n        const rad = Angle.toRad(p.theta(this));\n        return this.translate(Math.cos(rad) * distance, -Math.sin(rad) * distance);\n    }\n    /**\n     * Returns a point that is the reflection of me with the center of inversion\n     * in `ref` point.\n     */\n    reflection(ref) {\n        return Point.create(ref).move(this, this.distance(ref));\n    }\n    snapToGrid(gx, gy) {\n        this.x = GeometryUtil.snapToGrid(this.x, gx);\n        this.y = GeometryUtil.snapToGrid(this.y, gy == null ? gx : gy);\n        return this;\n    }\n    equals(p) {\n        const ref = Point.create(p);\n        return ref != null && ref.x === this.x && ref.y === this.y;\n    }\n    clone() {\n        return Point.clone(this);\n    }\n    /**\n     * Returns the point as a simple JSON object. For example: `{ x: 0, y: 0 }`.\n     */\n    toJSON() {\n        return Point.toJSON(this);\n    }\n    serialize() {\n        return `${this.x} ${this.y}`;\n    }\n}\n(function (Point) {\n    function isPoint(instance) {\n        return instance != null && instance instanceof Point;\n    }\n    Point.isPoint = isPoint;\n})(Point || (Point = {}));\n(function (Point) {\n    function isPointLike(p) {\n        return (p != null &&\n            typeof p === 'object' &&\n            typeof p.x === 'number' &&\n            typeof p.y === 'number');\n    }\n    Point.isPointLike = isPointLike;\n    function isPointData(p) {\n        return (p != null &&\n            Array.isArray(p) &&\n            p.length === 2 &&\n            typeof p[0] === 'number' &&\n            typeof p[1] === 'number');\n    }\n    Point.isPointData = isPointData;\n})(Point || (Point = {}));\n(function (Point) {\n    function create(x, y) {\n        if (x == null || typeof x === 'number') {\n            return new Point(x, y);\n        }\n        return clone(x);\n    }\n    Point.create = create;\n    function clone(p) {\n        if (Point.isPoint(p)) {\n            return new Point(p.x, p.y);\n        }\n        if (Array.isArray(p)) {\n            return new Point(p[0], p[1]);\n        }\n        return new Point(p.x, p.y);\n    }\n    Point.clone = clone;\n    function toJSON(p) {\n        if (Point.isPoint(p)) {\n            return { x: p.x, y: p.y };\n        }\n        if (Array.isArray(p)) {\n            return { x: p[0], y: p[1] };\n        }\n        return { x: p.x, y: p.y };\n    }\n    Point.toJSON = toJSON;\n    /**\n     * Returns a new Point object from the given polar coordinates.\n     * @see http://en.wikipedia.org/wiki/Polar_coordinate_system\n     */\n    function fromPolar(r, rad, origin = new Point()) {\n        let x = Math.abs(r * Math.cos(rad));\n        let y = Math.abs(r * Math.sin(rad));\n        const org = clone(origin);\n        const deg = Angle.normalize(Angle.toDeg(rad));\n        if (deg < 90) {\n            y = -y;\n        }\n        else if (deg < 180) {\n            x = -x;\n            y = -y;\n        }\n        else if (deg < 270) {\n            x = -x;\n        }\n        return new Point(org.x + x, org.y + y);\n    }\n    Point.fromPolar = fromPolar;\n    /**\n     * Converts rectangular to polar coordinates.\n     */\n    function toPolar(point, origin = new Point()) {\n        const p = clone(point);\n        const o = clone(origin);\n        const dx = p.x - o.x;\n        const dy = p.y - o.y;\n        return new Point(Math.sqrt(dx * dx + dy * dy), // r\n        Angle.toRad(o.theta(p)));\n    }\n    Point.toPolar = toPolar;\n    function equals(p1, p2) {\n        if (p1 === p2) {\n            return true;\n        }\n        if (p1 != null && p2 != null) {\n            return p1.x === p2.x && p1.y === p2.y;\n        }\n        return false;\n    }\n    Point.equals = equals;\n    function equalPoints(p1, p2) {\n        if ((p1 == null && p2 != null) ||\n            (p1 != null && p2 == null) ||\n            (p1 != null && p2 != null && p1.length !== p2.length)) {\n            return false;\n        }\n        if (p1 != null && p2 != null) {\n            for (let i = 0, ii = p1.length; i < ii; i += 1) {\n                if (!equals(p1[i], p2[i])) {\n                    return false;\n                }\n            }\n        }\n        return true;\n    }\n    Point.equalPoints = equalPoints;\n    /**\n     * Returns a point with random coordinates that fall within the range\n     * `[x1, x2]` and `[y1, y2]`.\n     */\n    function random(x1, x2, y1, y2) {\n        return new Point(GeometryUtil.random(x1, x2), GeometryUtil.random(y1, y2));\n    }\n    Point.random = random;\n    function rotate(point, angle, center) {\n        const rad = Angle.toRad(Angle.normalize(-angle));\n        const sin = Math.sin(rad);\n        const cos = Math.cos(rad);\n        return rotateEx(point, cos, sin, center);\n    }\n    Point.rotate = rotate;\n    function rotateEx(point, cos, sin, center = new Point()) {\n        const source = clone(point);\n        const origin = clone(center);\n        const dx = source.x - origin.x;\n        const dy = source.y - origin.y;\n        const x1 = dx * cos - dy * sin;\n        const y1 = dy * cos + dx * sin;\n        return new Point(x1 + origin.x, y1 + origin.y);\n    }\n    Point.rotateEx = rotateEx;\n})(Point || (Point = {}));\n//# sourceMappingURL=point.js.map","import { GeometryUtil } from './util';\nimport { Angle } from './angle';\nimport { Line } from './line';\nimport { Point } from './point';\nimport { Geometry } from './geometry';\nexport class Rectangle extends Geometry {\n    get left() {\n        return this.x;\n    }\n    get top() {\n        return this.y;\n    }\n    get right() {\n        return this.x + this.width;\n    }\n    get bottom() {\n        return this.y + this.height;\n    }\n    get origin() {\n        return new Point(this.x, this.y);\n    }\n    get topLeft() {\n        return new Point(this.x, this.y);\n    }\n    get topCenter() {\n        return new Point(this.x + this.width / 2, this.y);\n    }\n    get topRight() {\n        return new Point(this.x + this.width, this.y);\n    }\n    get center() {\n        return new Point(this.x + this.width / 2, this.y + this.height / 2);\n    }\n    get bottomLeft() {\n        return new Point(this.x, this.y + this.height);\n    }\n    get bottomCenter() {\n        return new Point(this.x + this.width / 2, this.y + this.height);\n    }\n    get bottomRight() {\n        return new Point(this.x + this.width, this.y + this.height);\n    }\n    get corner() {\n        return new Point(this.x + this.width, this.y + this.height);\n    }\n    get rightMiddle() {\n        return new Point(this.x + this.width, this.y + this.height / 2);\n    }\n    get leftMiddle() {\n        return new Point(this.x, this.y + this.height / 2);\n    }\n    get topLine() {\n        return new Line(this.topLeft, this.topRight);\n    }\n    get rightLine() {\n        return new Line(this.topRight, this.bottomRight);\n    }\n    get bottomLine() {\n        return new Line(this.bottomLeft, this.bottomRight);\n    }\n    get leftLine() {\n        return new Line(this.topLeft, this.bottomLeft);\n    }\n    constructor(x, y, width, height) {\n        super();\n        this.x = x == null ? 0 : x;\n        this.y = y == null ? 0 : y;\n        this.width = width == null ? 0 : width;\n        this.height = height == null ? 0 : height;\n    }\n    getOrigin() {\n        return this.origin;\n    }\n    getTopLeft() {\n        return this.topLeft;\n    }\n    getTopCenter() {\n        return this.topCenter;\n    }\n    getTopRight() {\n        return this.topRight;\n    }\n    getCenter() {\n        return this.center;\n    }\n    getCenterX() {\n        return this.x + this.width / 2;\n    }\n    getCenterY() {\n        return this.y + this.height / 2;\n    }\n    getBottomLeft() {\n        return this.bottomLeft;\n    }\n    getBottomCenter() {\n        return this.bottomCenter;\n    }\n    getBottomRight() {\n        return this.bottomRight;\n    }\n    getCorner() {\n        return this.corner;\n    }\n    getRightMiddle() {\n        return this.rightMiddle;\n    }\n    getLeftMiddle() {\n        return this.leftMiddle;\n    }\n    getTopLine() {\n        return this.topLine;\n    }\n    getRightLine() {\n        return this.rightLine;\n    }\n    getBottomLine() {\n        return this.bottomLine;\n    }\n    getLeftLine() {\n        return this.leftLine;\n    }\n    /**\n     * Returns a rectangle that is the bounding box of the rectangle.\n     *\n     * If `angle` is specified, the bounding box calculation will take into\n     * account the rotation of the rectangle by angle degrees around its center.\n     */\n    bbox(angle) {\n        if (!angle) {\n            return this.clone();\n        }\n        const rad = Angle.toRad(angle);\n        const st = Math.abs(Math.sin(rad));\n        const ct = Math.abs(Math.cos(rad));\n        const w = this.width * ct + this.height * st;\n        const h = this.width * st + this.height * ct;\n        return new Rectangle(this.x + (this.width - w) / 2, this.y + (this.height - h) / 2, w, h);\n    }\n    round(precision = 0) {\n        this.x = GeometryUtil.round(this.x, precision);\n        this.y = GeometryUtil.round(this.y, precision);\n        this.width = GeometryUtil.round(this.width, precision);\n        this.height = GeometryUtil.round(this.height, precision);\n        return this;\n    }\n    add(x, y, width, height) {\n        const rect = Rectangle.create(x, y, width, height);\n        const minX = Math.min(this.x, rect.x);\n        const minY = Math.min(this.y, rect.y);\n        const maxX = Math.max(this.x + this.width, rect.x + rect.width);\n        const maxY = Math.max(this.y + this.height, rect.y + rect.height);\n        this.x = minX;\n        this.y = minY;\n        this.width = maxX - minX;\n        this.height = maxY - minY;\n        return this;\n    }\n    update(x, y, width, height) {\n        const rect = Rectangle.create(x, y, width, height);\n        this.x = rect.x;\n        this.y = rect.y;\n        this.width = rect.width;\n        this.height = rect.height;\n        return this;\n    }\n    inflate(dx, dy) {\n        const w = dx;\n        const h = dy != null ? dy : dx;\n        this.x -= w;\n        this.y -= h;\n        this.width += 2 * w;\n        this.height += 2 * h;\n        return this;\n    }\n    snapToGrid(gx, gy) {\n        const origin = this.origin.snapToGrid(gx, gy);\n        const corner = this.corner.snapToGrid(gx, gy);\n        this.x = origin.x;\n        this.y = origin.y;\n        this.width = corner.x - origin.x;\n        this.height = corner.y - origin.y;\n        return this;\n    }\n    translate(tx, ty) {\n        const p = Point.create(tx, ty);\n        this.x += p.x;\n        this.y += p.y;\n        return this;\n    }\n    scale(sx, sy, origin = new Point()) {\n        const pos = this.origin.scale(sx, sy, origin);\n        this.x = pos.x;\n        this.y = pos.y;\n        this.width *= sx;\n        this.height *= sy;\n        return this;\n    }\n    rotate(degree, center = this.getCenter()) {\n        if (degree !== 0) {\n            const rad = Angle.toRad(degree);\n            const cos = Math.cos(rad);\n            const sin = Math.sin(rad);\n            let p1 = this.getOrigin();\n            let p2 = this.getTopRight();\n            let p3 = this.getBottomRight();\n            let p4 = this.getBottomLeft();\n            p1 = Point.rotateEx(p1, cos, sin, center);\n            p2 = Point.rotateEx(p2, cos, sin, center);\n            p3 = Point.rotateEx(p3, cos, sin, center);\n            p4 = Point.rotateEx(p4, cos, sin, center);\n            const rect = new Rectangle(p1.x, p1.y, 0, 0);\n            rect.add(p2.x, p2.y, 0, 0);\n            rect.add(p3.x, p3.y, 0, 0);\n            rect.add(p4.x, p4.y, 0, 0);\n            this.update(rect);\n        }\n        return this;\n    }\n    rotate90() {\n        const t = (this.width - this.height) / 2;\n        this.x += t;\n        this.y -= t;\n        const tmp = this.width;\n        this.width = this.height;\n        this.height = tmp;\n        return this;\n    }\n    /**\n     * Translates the rectangle by `rect.x` and `rect.y` and expand it by\n     * `rect.width` and `rect.height`.\n     */\n    moveAndExpand(rect) {\n        const ref = Rectangle.clone(rect);\n        this.x += ref.x || 0;\n        this.y += ref.y || 0;\n        this.width += ref.width || 0;\n        this.height += ref.height || 0;\n        return this;\n    }\n    /**\n     * Returns an object where `sx` and `sy` give the maximum scaling that can be\n     * applied to the rectangle so that it would still fit into `limit`. If\n     * `origin` is specified, the rectangle is scaled around it; otherwise, it is\n     * scaled around its center.\n     */\n    getMaxScaleToFit(limit, origin = this.center) {\n        const rect = Rectangle.clone(limit);\n        const ox = origin.x;\n        const oy = origin.y;\n        // Find the maximal possible scale for all corners, so when the scale\n        // is applied the point is still inside the rectangle.\n        let sx1 = Infinity;\n        let sx2 = Infinity;\n        let sx3 = Infinity;\n        let sx4 = Infinity;\n        let sy1 = Infinity;\n        let sy2 = Infinity;\n        let sy3 = Infinity;\n        let sy4 = Infinity;\n        // Top Left\n        const p1 = rect.topLeft;\n        if (p1.x < ox) {\n            sx1 = (this.x - ox) / (p1.x - ox);\n        }\n        if (p1.y < oy) {\n            sy1 = (this.y - oy) / (p1.y - oy);\n        }\n        // Bottom Right\n        const p2 = rect.bottomRight;\n        if (p2.x > ox) {\n            sx2 = (this.x + this.width - ox) / (p2.x - ox);\n        }\n        if (p2.y > oy) {\n            sy2 = (this.y + this.height - oy) / (p2.y - oy);\n        }\n        // Top Right\n        const p3 = rect.topRight;\n        if (p3.x > ox) {\n            sx3 = (this.x + this.width - ox) / (p3.x - ox);\n        }\n        if (p3.y < oy) {\n            sy3 = (this.y - oy) / (p3.y - oy);\n        }\n        // Bottom Left\n        const p4 = rect.bottomLeft;\n        if (p4.x < ox) {\n            sx4 = (this.x - ox) / (p4.x - ox);\n        }\n        if (p4.y > oy) {\n            sy4 = (this.y + this.height - oy) / (p4.y - oy);\n        }\n        return {\n            sx: Math.min(sx1, sx2, sx3, sx4),\n            sy: Math.min(sy1, sy2, sy3, sy4),\n        };\n    }\n    /**\n     * Returns a number that specifies the maximum scaling that can be applied to\n     * the rectangle along both axes so that it would still fit into `limit`. If\n     * `origin` is specified, the rectangle is scaled around it; otherwise, it is\n     * scaled around its center.\n     */\n    getMaxUniformScaleToFit(limit, origin = this.center) {\n        const scale = this.getMaxScaleToFit(limit, origin);\n        return Math.min(scale.sx, scale.sy);\n    }\n    containsPoint(x, y) {\n        return GeometryUtil.containsPoint(this, Point.create(x, y));\n    }\n    containsRect(x, y, width, height) {\n        const b = Rectangle.create(x, y, width, height);\n        const x1 = this.x;\n        const y1 = this.y;\n        const w1 = this.width;\n        const h1 = this.height;\n        const x2 = b.x;\n        const y2 = b.y;\n        const w2 = b.width;\n        const h2 = b.height;\n        // one of the dimensions is 0\n        if (w1 === 0 || h1 === 0 || w2 === 0 || h2 === 0) {\n            return false;\n        }\n        return x2 >= x1 && y2 >= y1 && x2 + w2 <= x1 + w1 && y2 + h2 <= y1 + h1;\n    }\n    /**\n     * Returns an array of the intersection points of the rectangle and the line.\n     * Return `null` if no intersection exists.\n     */\n    intersectsWithLine(line) {\n        const rectLines = [\n            this.topLine,\n            this.rightLine,\n            this.bottomLine,\n            this.leftLine,\n        ];\n        const points = [];\n        const dedupeArr = [];\n        rectLines.forEach((l) => {\n            const p = line.intersectsWithLine(l);\n            if (p !== null && dedupeArr.indexOf(p.toString()) < 0) {\n                points.push(p);\n                dedupeArr.push(p.toString());\n            }\n        });\n        return points.length > 0 ? points : null;\n    }\n    /**\n     * Returns the point on the boundary of the rectangle that is the intersection\n     * of the rectangle with a line starting in the center the rectangle ending in\n     * the point `p`.\n     *\n     * If `angle` is specified, the intersection will take into account the\n     * rotation of the rectangle by `angle` degrees around its center.\n     */\n    intersectsWithLineFromCenterToPoint(p, angle) {\n        const ref = Point.clone(p);\n        const center = this.center;\n        let result = null;\n        if (angle != null && angle !== 0) {\n            ref.rotate(angle, center);\n        }\n        const sides = [this.topLine, this.rightLine, this.bottomLine, this.leftLine];\n        const connector = new Line(center, ref);\n        for (let i = sides.length - 1; i >= 0; i -= 1) {\n            const intersection = sides[i].intersectsWithLine(connector);\n            if (intersection !== null) {\n                result = intersection;\n                break;\n            }\n        }\n        if (result && angle != null && angle !== 0) {\n            result.rotate(-angle, center);\n        }\n        return result;\n    }\n    intersectsWithRect(x, y, width, height) {\n        const ref = Rectangle.create(x, y, width, height);\n        // no intersection\n        if (!this.isIntersectWithRect(ref)) {\n            return null;\n        }\n        const myOrigin = this.origin;\n        const myCorner = this.corner;\n        const rOrigin = ref.origin;\n        const rCorner = ref.corner;\n        const xx = Math.max(myOrigin.x, rOrigin.x);\n        const yy = Math.max(myOrigin.y, rOrigin.y);\n        return new Rectangle(xx, yy, Math.min(myCorner.x, rCorner.x) - xx, Math.min(myCorner.y, rCorner.y) - yy);\n    }\n    isIntersectWithRect(x, y, width, height) {\n        const ref = Rectangle.create(x, y, width, height);\n        const myOrigin = this.origin;\n        const myCorner = this.corner;\n        const rOrigin = ref.origin;\n        const rCorner = ref.corner;\n        if (rCorner.x <= myOrigin.x ||\n            rCorner.y <= myOrigin.y ||\n            rOrigin.x >= myCorner.x ||\n            rOrigin.y >= myCorner.y) {\n            return false;\n        }\n        return true;\n    }\n    /**\n     * Normalize the rectangle, i.e. make it so that it has non-negative\n     * width and height. If width is less than `0`, the function swaps left and\n     * right corners and if height is less than `0`, the top and bottom corners\n     * are swapped.\n     */\n    normalize() {\n        let newx = this.x;\n        let newy = this.y;\n        let newwidth = this.width;\n        let newheight = this.height;\n        if (this.width < 0) {\n            newx = this.x + this.width;\n            newwidth = -this.width;\n        }\n        if (this.height < 0) {\n            newy = this.y + this.height;\n            newheight = -this.height;\n        }\n        this.x = newx;\n        this.y = newy;\n        this.width = newwidth;\n        this.height = newheight;\n        return this;\n    }\n    /**\n     * Returns a rectangle that is a union of this rectangle and rectangle `rect`.\n     */\n    union(rect) {\n        const ref = Rectangle.clone(rect);\n        const myOrigin = this.origin;\n        const myCorner = this.corner;\n        const rOrigin = ref.origin;\n        const rCorner = ref.corner;\n        const originX = Math.min(myOrigin.x, rOrigin.x);\n        const originY = Math.min(myOrigin.y, rOrigin.y);\n        const cornerX = Math.max(myCorner.x, rCorner.x);\n        const cornerY = Math.max(myCorner.y, rCorner.y);\n        return new Rectangle(originX, originY, cornerX - originX, cornerY - originY);\n    }\n    /**\n     * Returns a string (\"top\", \"left\", \"right\" or \"bottom\") denoting the side of\n     * the rectangle which is nearest to the point `p`.\n     */\n    getNearestSideToPoint(p) {\n        const ref = Point.clone(p);\n        const distLeft = ref.x - this.x;\n        const distRight = this.x + this.width - ref.x;\n        const distTop = ref.y - this.y;\n        const distBottom = this.y + this.height - ref.y;\n        let closest = distLeft;\n        let side = 'left';\n        if (distRight < closest) {\n            closest = distRight;\n            side = 'right';\n        }\n        if (distTop < closest) {\n            closest = distTop;\n            side = 'top';\n        }\n        if (distBottom < closest) {\n            side = 'bottom';\n        }\n        return side;\n    }\n    /**\n     * Returns a point on the boundary of the rectangle nearest to the point `p`.\n     */\n    getNearestPointToPoint(p) {\n        const ref = Point.clone(p);\n        if (this.containsPoint(ref)) {\n            const side = this.getNearestSideToPoint(ref);\n            if (side === 'left') {\n                return new Point(this.x, ref.y);\n            }\n            if (side === 'top') {\n                return new Point(ref.x, this.y);\n            }\n            if (side === 'right') {\n                return new Point(this.x + this.width, ref.y);\n            }\n            if (side === 'bottom') {\n                return new Point(ref.x, this.y + this.height);\n            }\n        }\n        return ref.adhereToRect(this);\n    }\n    equals(rect) {\n        return (rect != null &&\n            rect.x === this.x &&\n            rect.y === this.y &&\n            rect.width === this.width &&\n            rect.height === this.height);\n    }\n    clone() {\n        return new Rectangle(this.x, this.y, this.width, this.height);\n    }\n    toJSON() {\n        return { x: this.x, y: this.y, width: this.width, height: this.height };\n    }\n    serialize() {\n        return `${this.x} ${this.y} ${this.width} ${this.height}`;\n    }\n}\n(function (Rectangle) {\n    function isRectangle(instance) {\n        return instance != null && instance instanceof Rectangle;\n    }\n    Rectangle.isRectangle = isRectangle;\n})(Rectangle || (Rectangle = {}));\n(function (Rectangle) {\n    function isRectangleLike(o) {\n        return (o != null &&\n            typeof o === 'object' &&\n            typeof o.x === 'number' &&\n            typeof o.y === 'number' &&\n            typeof o.width === 'number' &&\n            typeof o.height === 'number');\n    }\n    Rectangle.isRectangleLike = isRectangleLike;\n})(Rectangle || (Rectangle = {}));\n(function (Rectangle) {\n    function create(x, y, width, height) {\n        if (x == null || typeof x === 'number') {\n            return new Rectangle(x, y, width, height);\n        }\n        return clone(x);\n    }\n    Rectangle.create = create;\n    function clone(rect) {\n        if (Rectangle.isRectangle(rect)) {\n            return rect.clone();\n        }\n        if (Array.isArray(rect)) {\n            return new Rectangle(rect[0], rect[1], rect[2], rect[3]);\n        }\n        return new Rectangle(rect.x, rect.y, rect.width, rect.height);\n    }\n    Rectangle.clone = clone;\n    /**\n     * Returns a new rectangle from the given ellipse.\n     */\n    function fromEllipse(ellipse) {\n        return new Rectangle(ellipse.x - ellipse.a, ellipse.y - ellipse.b, 2 * ellipse.a, 2 * ellipse.b);\n    }\n    Rectangle.fromEllipse = fromEllipse;\n    function fromSize(size) {\n        return new Rectangle(0, 0, size.width, size.height);\n    }\n    Rectangle.fromSize = fromSize;\n    function fromPositionAndSize(pos, size) {\n        return new Rectangle(pos.x, pos.y, size.width, size.height);\n    }\n    Rectangle.fromPositionAndSize = fromPositionAndSize;\n})(Rectangle || (Rectangle = {}));\n//# sourceMappingURL=rectangle.js.map","import { Point } from './point';\nimport { Geometry } from './geometry';\nimport { Rectangle } from './rectangle';\nexport class Line extends Geometry {\n    get center() {\n        return new Point((this.start.x + this.end.x) / 2, (this.start.y + this.end.y) / 2);\n    }\n    constructor(x1, y1, x2, y2) {\n        super();\n        if (typeof x1 === 'number' && typeof y1 === 'number') {\n            this.start = new Point(x1, y1);\n            this.end = new Point(x2, y2);\n        }\n        else {\n            this.start = Point.create(x1);\n            this.end = Point.create(y1);\n        }\n    }\n    getCenter() {\n        return this.center;\n    }\n    /**\n     * Rounds the line to the given `precision`.\n     */\n    round(precision = 0) {\n        this.start.round(precision);\n        this.end.round(precision);\n        return this;\n    }\n    translate(tx, ty) {\n        if (typeof tx === 'number') {\n            this.start.translate(tx, ty);\n            this.end.translate(tx, ty);\n        }\n        else {\n            this.start.translate(tx);\n            this.end.translate(tx);\n        }\n        return this;\n    }\n    /**\n     * Rotate the line by `angle` around `origin`.\n     */\n    rotate(angle, origin) {\n        this.start.rotate(angle, origin);\n        this.end.rotate(angle, origin);\n        return this;\n    }\n    /**\n     * Scale the line by `sx` and `sy` about the given `origin`. If origin is not\n     * specified, the line is scaled around `0,0`.\n     */\n    scale(sx, sy, origin) {\n        this.start.scale(sx, sy, origin);\n        this.end.scale(sx, sy, origin);\n        return this;\n    }\n    /**\n     * Returns the length of the line.\n     */\n    length() {\n        return Math.sqrt(this.squaredLength());\n    }\n    /**\n     * Useful for distance comparisons in which real length is not necessary\n     * (saves one `Math.sqrt()` operation).\n     */\n    squaredLength() {\n        const dx = this.start.x - this.end.x;\n        const dy = this.start.y - this.end.y;\n        return dx * dx + dy * dy;\n    }\n    /**\n     * Scale the line so that it has the requested length. The start point of\n     * the line is preserved.\n     */\n    setLength(length) {\n        const total = this.length();\n        if (!total) {\n            return this;\n        }\n        const scale = length / total;\n        return this.scale(scale, scale, this.start);\n    }\n    parallel(distance) {\n        const line = this.clone();\n        if (!line.isDifferentiable()) {\n            return line;\n        }\n        const { start, end } = line;\n        const eRef = start.clone().rotate(270, end);\n        const sRef = end.clone().rotate(90, start);\n        start.move(sRef, distance);\n        end.move(eRef, distance);\n        return line;\n    }\n    /**\n     * Returns the vector of the line with length equal to length of the line.\n     */\n    vector() {\n        return new Point(this.end.x - this.start.x, this.end.y - this.start.y);\n    }\n    /**\n     * Returns the angle of incline of the line.\n     *\n     * The function returns `NaN` if the start and end endpoints of the line\n     * both lie at the same coordinates(it is impossible to determine the angle\n     * of incline of a line that appears to be a point). The\n     * `line.isDifferentiable()` function may be used in advance to determine\n     * whether the angle of incline can be computed for a given line.\n     */\n    angle() {\n        const ref = new Point(this.start.x + 1, this.start.y);\n        return this.start.angleBetween(this.end, ref);\n    }\n    /**\n     * Returns a rectangle that is the bounding box of the line.\n     */\n    bbox() {\n        const left = Math.min(this.start.x, this.end.x);\n        const top = Math.min(this.start.y, this.end.y);\n        const right = Math.max(this.start.x, this.end.x);\n        const bottom = Math.max(this.start.y, this.end.y);\n        return new Rectangle(left, top, right - left, bottom - top);\n    }\n    /**\n     * Returns the bearing (cardinal direction) of the line.\n     *\n     * The return value is one of the following strings:\n     * 'NE', 'E', 'SE', 'S', 'SW', 'W', 'NW' and 'N'.\n     *\n     * The function returns 'N' if the two endpoints of the line are coincident.\n     */\n    bearing() {\n        return this.start.bearing(this.end);\n    }\n    /**\n     * Returns the point on the line that lies closest to point `p`.\n     */\n    closestPoint(p) {\n        return this.pointAt(this.closestPointNormalizedLength(p));\n    }\n    /**\n     * Returns the length of the line up to the point that lies closest to point `p`.\n     */\n    closestPointLength(p) {\n        return this.closestPointNormalizedLength(p) * this.length();\n    }\n    /**\n     * Returns a line that is tangent to the line at the point that lies closest\n     * to point `p`.\n     */\n    closestPointTangent(p) {\n        return this.tangentAt(this.closestPointNormalizedLength(p));\n    }\n    /**\n     * Returns the normalized length (distance from the start of the line / total\n     * line length) of the line up to the point that lies closest to point.\n     */\n    closestPointNormalizedLength(p) {\n        const product = this.vector().dot(new Line(this.start, p).vector());\n        const normalized = Math.min(1, Math.max(0, product / this.squaredLength()));\n        // normalized returns `NaN` if this line has zero length\n        if (Number.isNaN(normalized)) {\n            return 0;\n        }\n        return normalized;\n    }\n    /**\n     * Returns a point on the line that lies `rate` (normalized length) away from\n     * the beginning of the line.\n     */\n    pointAt(ratio) {\n        const start = this.start;\n        const end = this.end;\n        if (ratio <= 0) {\n            return start.clone();\n        }\n        if (ratio >= 1) {\n            return end.clone();\n        }\n        return start.lerp(end, ratio);\n    }\n    /**\n     * Returns a point on the line that lies length away from the beginning of\n     * the line.\n     */\n    pointAtLength(length) {\n        const start = this.start;\n        const end = this.end;\n        let fromStart = true;\n        if (length < 0) {\n            fromStart = false; // start calculation from end point\n            length = -length; // eslint-disable-line\n        }\n        const total = this.length();\n        if (length >= total) {\n            return fromStart ? end.clone() : start.clone();\n        }\n        const rate = (fromStart ? length : total - length) / total;\n        return this.pointAt(rate);\n    }\n    /**\n     * Divides the line into two lines at the point that lies `rate` (normalized\n     * length) away from the beginning of the line.\n     */\n    divideAt(ratio) {\n        const dividerPoint = this.pointAt(ratio);\n        return [\n            new Line(this.start, dividerPoint),\n            new Line(dividerPoint, this.end),\n        ];\n    }\n    /**\n     * Divides the line into two lines at the point that lies length away from\n     * the beginning of the line.\n     */\n    divideAtLength(length) {\n        const dividerPoint = this.pointAtLength(length);\n        return [\n            new Line(this.start, dividerPoint),\n            new Line(dividerPoint, this.end),\n        ];\n    }\n    /**\n     * Returns `true` if the point `p` lies on the line. Return `false` otherwise.\n     */\n    containsPoint(p) {\n        const start = this.start;\n        const end = this.end;\n        // cross product of 0 indicates that this line and\n        // the vector to `p` are collinear.\n        if (start.cross(p, end) !== 0) {\n            return false;\n        }\n        const length = this.length();\n        if (new Line(start, p).length() > length) {\n            return false;\n        }\n        if (new Line(p, end).length() > length) {\n            return false;\n        }\n        return true;\n    }\n    intersect(shape, options) {\n        const ret = shape.intersectsWithLine(this, options);\n        if (ret) {\n            return Array.isArray(ret) ? ret : [ret];\n        }\n        return null;\n    }\n    /**\n     * Returns the intersection point of the line with another line. Returns\n     * `null` if no intersection exists.\n     */\n    intersectsWithLine(line) {\n        const pt1Dir = new Point(this.end.x - this.start.x, this.end.y - this.start.y);\n        const pt2Dir = new Point(line.end.x - line.start.x, line.end.y - line.start.y);\n        const det = pt1Dir.x * pt2Dir.y - pt1Dir.y * pt2Dir.x;\n        const deltaPt = new Point(line.start.x - this.start.x, line.start.y - this.start.y);\n        const alpha = deltaPt.x * pt2Dir.y - deltaPt.y * pt2Dir.x;\n        const beta = deltaPt.x * pt1Dir.y - deltaPt.y * pt1Dir.x;\n        if (det === 0 || alpha * det < 0 || beta * det < 0) {\n            return null;\n        }\n        if (det > 0) {\n            if (alpha > det || beta > det) {\n                return null;\n            }\n        }\n        else if (alpha < det || beta < det) {\n            return null;\n        }\n        return new Point(this.start.x + (alpha * pt1Dir.x) / det, this.start.y + (alpha * pt1Dir.y) / det);\n    }\n    /**\n     * Returns `true` if a tangent line can be found for the line.\n     *\n     * Tangents cannot be found if both of the line endpoints are coincident\n     * (the line appears to be a point).\n     */\n    isDifferentiable() {\n        return !this.start.equals(this.end);\n    }\n    /**\n     * Returns the perpendicular distance between the line and point. The\n     * distance is positive if the point lies to the right of the line, negative\n     * if the point lies to the left of the line, and `0` if the point lies on\n     * the line.\n     */\n    pointOffset(p) {\n        const ref = Point.clone(p);\n        const start = this.start;\n        const end = this.end;\n        const determinant = (end.x - start.x) * (ref.y - start.y) -\n            (end.y - start.y) * (ref.x - start.x);\n        return determinant / this.length();\n    }\n    pointSquaredDistance(x, y) {\n        const p = Point.create(x, y);\n        return this.closestPoint(p).squaredDistance(p);\n    }\n    pointDistance(x, y) {\n        const p = Point.create(x, y);\n        return this.closestPoint(p).distance(p);\n    }\n    /**\n     * Returns a line tangent to the line at point that lies `rate` (normalized\n     * length) away from the beginning of the line.\n     */\n    tangentAt(ratio) {\n        if (!this.isDifferentiable()) {\n            return null;\n        }\n        const start = this.start;\n        const end = this.end;\n        const tangentStart = this.pointAt(ratio);\n        const tangentLine = new Line(start, end);\n        tangentLine.translate(tangentStart.x - start.x, tangentStart.y - start.y);\n        return tangentLine;\n    }\n    /**\n     * Returns a line tangent to the line at point that lies `length` away from\n     * the beginning of the line.\n     */\n    tangentAtLength(length) {\n        if (!this.isDifferentiable()) {\n            return null;\n        }\n        const start = this.start;\n        const end = this.end;\n        const tangentStart = this.pointAtLength(length);\n        const tangentLine = new Line(start, end);\n        tangentLine.translate(tangentStart.x - start.x, tangentStart.y - start.y);\n        return tangentLine;\n    }\n    relativeCcw(x, y) {\n        const ref = Point.create(x, y);\n        let dx1 = ref.x - this.start.x;\n        let dy1 = ref.y - this.start.y;\n        const dx2 = this.end.x - this.start.x;\n        const dy2 = this.end.y - this.start.y;\n        let ccw = dx1 * dy2 - dy1 * dx2;\n        if (ccw === 0) {\n            ccw = dx1 * dx2 + dy1 * dy2;\n            if (ccw > 0.0) {\n                dx1 -= dx2;\n                dy1 -= dy2;\n                ccw = dx1 * dx2 + dy1 * dy2;\n                if (ccw < 0.0) {\n                    ccw = 0.0;\n                }\n            }\n        }\n        return ccw < 0.0 ? -1 : ccw > 0.0 ? 1 : 0;\n    }\n    /**\n     * Return `true` if the line equals the other line.\n     */\n    equals(l) {\n        return (l != null &&\n            this.start.x === l.start.x &&\n            this.start.y === l.start.y &&\n            this.end.x === l.end.x &&\n            this.end.y === l.end.y);\n    }\n    /**\n     * Returns another line which is a clone of the line.\n     */\n    clone() {\n        return new Line(this.start, this.end);\n    }\n    toJSON() {\n        return { start: this.start.toJSON(), end: this.end.toJSON() };\n    }\n    serialize() {\n        return [this.start.serialize(), this.end.serialize()].join(' ');\n    }\n}\n(function (Line) {\n    function isLine(instance) {\n        return instance != null && instance instanceof Line;\n    }\n    Line.isLine = isLine;\n})(Line || (Line = {}));\n//# sourceMappingURL=line.js.map","import { Point } from './point';\nimport { Rectangle } from './rectangle';\nimport { Geometry } from './geometry';\nexport class Ellipse extends Geometry {\n    get center() {\n        return new Point(this.x, this.y);\n    }\n    constructor(x, y, a, b) {\n        super();\n        this.x = x == null ? 0 : x;\n        this.y = y == null ? 0 : y;\n        this.a = a == null ? 0 : a;\n        this.b = b == null ? 0 : b;\n    }\n    /**\n     * Returns a rectangle that is the bounding box of the ellipse.\n     */\n    bbox() {\n        return Rectangle.fromEllipse(this);\n    }\n    /**\n     * Returns a point that is the center of the ellipse.\n     */\n    getCenter() {\n        return this.center;\n    }\n    inflate(dx, dy) {\n        const w = dx;\n        const h = dy != null ? dy : dx;\n        this.a += 2 * w;\n        this.b += 2 * h;\n        return this;\n    }\n    normalizedDistance(x, y) {\n        const ref = Point.create(x, y);\n        const dx = ref.x - this.x;\n        const dy = ref.y - this.y;\n        const a = this.a;\n        const b = this.b;\n        return (dx * dx) / (a * a) + (dy * dy) / (b * b);\n    }\n    containsPoint(x, y) {\n        return this.normalizedDistance(x, y) <= 1;\n    }\n    /**\n     * Returns an array of the intersection points of the ellipse and the line.\n     * Returns `null` if no intersection exists.\n     */\n    intersectsWithLine(line) {\n        const intersections = [];\n        const rx = this.a;\n        const ry = this.b;\n        const a1 = line.start;\n        const a2 = line.end;\n        const dir = line.vector();\n        const diff = a1.diff(new Point(this.x, this.y));\n        const mDir = new Point(dir.x / (rx * rx), dir.y / (ry * ry));\n        const mDiff = new Point(diff.x / (rx * rx), diff.y / (ry * ry));\n        const a = dir.dot(mDir);\n        const b = dir.dot(mDiff);\n        const c = diff.dot(mDiff) - 1.0;\n        const d = b * b - a * c;\n        if (d < 0) {\n            return null;\n        }\n        if (d > 0) {\n            const root = Math.sqrt(d);\n            const ta = (-b - root) / a;\n            const tb = (-b + root) / a;\n            if ((ta < 0 || ta > 1) && (tb < 0 || tb > 1)) {\n                // outside\n                return null;\n            }\n            if (ta >= 0 && ta <= 1) {\n                intersections.push(a1.lerp(a2, ta));\n            }\n            if (tb >= 0 && tb <= 1) {\n                intersections.push(a1.lerp(a2, tb));\n            }\n        }\n        else {\n            const t = -b / a;\n            if (t >= 0 && t <= 1) {\n                intersections.push(a1.lerp(a2, t));\n            }\n            else {\n                // outside\n                return null;\n            }\n        }\n        return intersections;\n    }\n    /**\n     * Returns the point on the boundary of the ellipse that is the\n     * intersection of the ellipse with a line starting in the center\n     * of the ellipse ending in the point `p`.\n     *\n     * If angle is specified, the intersection will take into account\n     * the rotation of the ellipse by angle degrees around its center.\n     */\n    intersectsWithLineFromCenterToPoint(p, angle = 0) {\n        const ref = Point.clone(p);\n        if (angle) {\n            ref.rotate(angle, this.getCenter());\n        }\n        const dx = ref.x - this.x;\n        const dy = ref.y - this.y;\n        let result;\n        if (dx === 0) {\n            result = this.bbox().getNearestPointToPoint(ref);\n            if (angle) {\n                return result.rotate(-angle, this.getCenter());\n            }\n            return result;\n        }\n        const m = dy / dx;\n        const mSquared = m * m;\n        const aSquared = this.a * this.a;\n        const bSquared = this.b * this.b;\n        let x = Math.sqrt(1 / (1 / aSquared + mSquared / bSquared));\n        x = dx < 0 ? -x : x;\n        const y = m * x;\n        result = new Point(this.x + x, this.y + y);\n        if (angle) {\n            return result.rotate(-angle, this.getCenter());\n        }\n        return result;\n    }\n    /**\n     * Returns the angle between the x-axis and the tangent from a point. It is\n     * valid for points lying on the ellipse boundary only.\n     */\n    tangentTheta(p) {\n        const ref = Point.clone(p);\n        const x0 = ref.x;\n        const y0 = ref.y;\n        const a = this.a;\n        const b = this.b;\n        const center = this.bbox().center;\n        const cx = center.x;\n        const cy = center.y;\n        const refPointDelta = 30;\n        const q1 = x0 > center.x + a / 2;\n        const q3 = x0 < center.x - a / 2;\n        let x;\n        let y;\n        if (q1 || q3) {\n            y = x0 > center.x ? y0 - refPointDelta : y0 + refPointDelta;\n            x =\n                (a * a) / (x0 - cx) -\n                    (a * a * (y0 - cy) * (y - cy)) / (b * b * (x0 - cx)) +\n                    cx;\n        }\n        else {\n            x = y0 > center.y ? x0 + refPointDelta : x0 - refPointDelta;\n            y =\n                (b * b) / (y0 - cy) -\n                    (b * b * (x0 - cx) * (x - cx)) / (a * a * (y0 - cy)) +\n                    cy;\n        }\n        return new Point(x, y).theta(ref);\n    }\n    scale(sx, sy) {\n        this.a *= sx;\n        this.b *= sy;\n        return this;\n    }\n    rotate(angle, origin) {\n        const rect = Rectangle.fromEllipse(this);\n        rect.rotate(angle, origin);\n        const ellipse = Ellipse.fromRect(rect);\n        this.a = ellipse.a;\n        this.b = ellipse.b;\n        this.x = ellipse.x;\n        this.y = ellipse.y;\n        return this;\n    }\n    translate(dx, dy) {\n        const p = Point.create(dx, dy);\n        this.x += p.x;\n        this.y += p.y;\n        return this;\n    }\n    equals(ellipse) {\n        return (ellipse != null &&\n            ellipse.x === this.x &&\n            ellipse.y === this.y &&\n            ellipse.a === this.a &&\n            ellipse.b === this.b);\n    }\n    clone() {\n        return new Ellipse(this.x, this.y, this.a, this.b);\n    }\n    toJSON() {\n        return { x: this.x, y: this.y, a: this.a, b: this.b };\n    }\n    serialize() {\n        return `${this.x} ${this.y} ${this.a} ${this.b}`;\n    }\n}\n(function (Ellipse) {\n    function isEllipse(instance) {\n        return instance != null && instance instanceof Ellipse;\n    }\n    Ellipse.isEllipse = isEllipse;\n})(Ellipse || (Ellipse = {}));\n(function (Ellipse) {\n    function create(x, y, a, b) {\n        if (x == null || typeof x === 'number') {\n            return new Ellipse(x, y, a, b);\n        }\n        return parse(x);\n    }\n    Ellipse.create = create;\n    function parse(e) {\n        if (Ellipse.isEllipse(e)) {\n            return e.clone();\n        }\n        if (Array.isArray(e)) {\n            return new Ellipse(e[0], e[1], e[2], e[3]);\n        }\n        return new Ellipse(e.x, e.y, e.a, e.b);\n    }\n    Ellipse.parse = parse;\n    function fromRect(rect) {\n        const center = rect.center;\n        return new Ellipse(center.x, center.y, rect.width / 2, rect.height / 2);\n    }\n    Ellipse.fromRect = fromRect;\n})(Ellipse || (Ellipse = {}));\n//# sourceMappingURL=ellipse.js.map","/* eslint-disable default-param-last */\nimport { Point } from '../point';\nconst regexSupportedData = new RegExp(`^[\\\\s\\\\dLMCZz,.]*$`); // eslint-disable-line prefer-regex-literals\nexport function isValid(data) {\n    if (typeof data !== 'string') {\n        return false;\n    }\n    return regexSupportedData.test(data);\n}\n/**\n * Returns the remainder of division of `n` by `m`. You should use this\n * instead of the built-in operation as the built-in operation does not\n * properly handle negative numbers.\n */\nfunction mod(n, m) {\n    return ((n % m) + m) % m;\n}\nfunction draw(points, round, initialMove, close, exclude) {\n    const data = [];\n    const end = points[points.length - 1];\n    const rounded = round != null && round > 0;\n    const arcSize = round || 0;\n    // Adds virtual waypoint in the center between start and end point\n    if (close && rounded) {\n        points = points.slice(); // eslint-disable-line\n        const p0 = points[0];\n        const wp = new Point(end.x + (p0.x - end.x) / 2, end.y + (p0.y - end.y) / 2);\n        points.splice(0, 0, wp);\n    }\n    let pt = points[0];\n    let i = 1;\n    // Draws the line segments\n    if (initialMove) {\n        data.push('M', pt.x, pt.y);\n    }\n    else {\n        data.push('L', pt.x, pt.y);\n    }\n    while (i < (close ? points.length : points.length - 1)) {\n        let tmp = points[mod(i, points.length)];\n        let dx = pt.x - tmp.x;\n        let dy = pt.y - tmp.y;\n        if (rounded &&\n            (dx !== 0 || dy !== 0) &&\n            (exclude == null || exclude.indexOf(i - 1) < 0)) {\n            // Draws a line from the last point to the current\n            // point with a spacing of size off the current point\n            // into direction of the last point\n            let dist = Math.sqrt(dx * dx + dy * dy);\n            const nx1 = (dx * Math.min(arcSize, dist / 2)) / dist;\n            const ny1 = (dy * Math.min(arcSize, dist / 2)) / dist;\n            const x1 = tmp.x + nx1;\n            const y1 = tmp.y + ny1;\n            data.push('L', x1, y1);\n            // Draws a curve from the last point to the current\n            // point with a spacing of size off the current point\n            // into direction of the next point\n            let next = points[mod(i + 1, points.length)];\n            // Uses next non-overlapping point\n            while (i < points.length - 2 &&\n                Math.round(next.x - tmp.x) === 0 &&\n                Math.round(next.y - tmp.y) === 0) {\n                next = points[mod(i + 2, points.length)];\n                i += 1;\n            }\n            dx = next.x - tmp.x;\n            dy = next.y - tmp.y;\n            dist = Math.max(1, Math.sqrt(dx * dx + dy * dy));\n            const nx2 = (dx * Math.min(arcSize, dist / 2)) / dist;\n            const ny2 = (dy * Math.min(arcSize, dist / 2)) / dist;\n            const x2 = tmp.x + nx2;\n            const y2 = tmp.y + ny2;\n            data.push('Q', tmp.x, tmp.y, x2, y2);\n            tmp = new Point(x2, y2);\n        }\n        else {\n            data.push('L', tmp.x, tmp.y);\n        }\n        pt = tmp;\n        i += 1;\n    }\n    if (close) {\n        data.push('Z');\n    }\n    else {\n        data.push('L', end.x, end.y);\n    }\n    return data.map((v) => (typeof v === 'string' ? v : +v.toFixed(3))).join(' ');\n}\nexport function drawPoints(points, options = {}) {\n    const pts = [];\n    if (points && points.length) {\n        points.forEach((p) => {\n            if (Array.isArray(p)) {\n                pts.push({ x: p[0], y: p[1] });\n            }\n            else {\n                pts.push({ x: p.x, y: p.y });\n            }\n        });\n    }\n    return draw(pts, options.round, options.initialMove == null || options.initialMove, options.close, options.exclude);\n}\n/**\n * Converts the given arc to a series of curves.\n */\nexport function arcToCurves(x0, y0, r1, r2, angle = 0, largeArcFlag = 0, sweepFlag = 0, x, y) {\n    if (r1 === 0 || r2 === 0) {\n        return [];\n    }\n    x -= x0; // eslint-disable-line\n    y -= y0; // eslint-disable-line\n    r1 = Math.abs(r1); // eslint-disable-line\n    r2 = Math.abs(r2); // eslint-disable-line\n    const ctx = -x / 2;\n    const cty = -y / 2;\n    const cpsi = Math.cos((angle * Math.PI) / 180);\n    const spsi = Math.sin((angle * Math.PI) / 180);\n    const rxd = cpsi * ctx + spsi * cty;\n    const ryd = -1 * spsi * ctx + cpsi * cty;\n    const rxdd = rxd * rxd;\n    const rydd = ryd * ryd;\n    const r1x = r1 * r1;\n    const r2y = r2 * r2;\n    const lamda = rxdd / r1x + rydd / r2y;\n    let sds;\n    if (lamda > 1) {\n        r1 = Math.sqrt(lamda) * r1; // eslint-disable-line\n        r2 = Math.sqrt(lamda) * r2; // eslint-disable-line\n        sds = 0;\n    }\n    else {\n        let seif = 1;\n        if (largeArcFlag === sweepFlag) {\n            seif = -1;\n        }\n        sds =\n            seif *\n                Math.sqrt((r1x * r2y - r1x * rydd - r2y * rxdd) / (r1x * rydd + r2y * rxdd));\n    }\n    const txd = (sds * r1 * ryd) / r2;\n    const tyd = (-1 * sds * r2 * rxd) / r1;\n    const tx = cpsi * txd - spsi * tyd + x / 2;\n    const ty = spsi * txd + cpsi * tyd + y / 2;\n    let rad = Math.atan2((ryd - tyd) / r2, (rxd - txd) / r1) - Math.atan2(0, 1);\n    let s1 = rad >= 0 ? rad : 2 * Math.PI + rad;\n    rad =\n        Math.atan2((-ryd - tyd) / r2, (-rxd - txd) / r1) -\n            Math.atan2((ryd - tyd) / r2, (rxd - txd) / r1);\n    let dr = rad >= 0 ? rad : 2 * Math.PI + rad;\n    if (sweepFlag === 0 && dr > 0) {\n        dr -= 2 * Math.PI;\n    }\n    else if (sweepFlag !== 0 && dr < 0) {\n        dr += 2 * Math.PI;\n    }\n    const sse = (dr * 2) / Math.PI;\n    const seg = Math.ceil(sse < 0 ? -1 * sse : sse);\n    const segr = dr / seg;\n    const t = ((8 / 3) * Math.sin(segr / 4) * Math.sin(segr / 4)) / Math.sin(segr / 2);\n    const cpsir1 = cpsi * r1;\n    const cpsir2 = cpsi * r2;\n    const spsir1 = spsi * r1;\n    const spsir2 = spsi * r2;\n    let mc = Math.cos(s1);\n    let ms = Math.sin(s1);\n    let x2 = -t * (cpsir1 * ms + spsir2 * mc);\n    let y2 = -t * (spsir1 * ms - cpsir2 * mc);\n    let x3 = 0;\n    let y3 = 0;\n    const result = [];\n    for (let n = 0; n < seg; n += 1) {\n        s1 += segr;\n        mc = Math.cos(s1);\n        ms = Math.sin(s1);\n        x3 = cpsir1 * mc - spsir2 * ms + tx;\n        y3 = spsir1 * mc + cpsir2 * ms + ty;\n        const dx = -t * (cpsir1 * ms + spsir2 * mc);\n        const dy = -t * (spsir1 * ms - cpsir2 * mc);\n        // CurveTo updates x0, y0 so need to restore it\n        const index = n * 6;\n        result[index] = Number(x2 + x0);\n        result[index + 1] = Number(y2 + y0);\n        result[index + 2] = Number(x3 - dx + x0);\n        result[index + 3] = Number(y3 - dy + y0);\n        result[index + 4] = Number(x3 + x0);\n        result[index + 5] = Number(y3 + y0);\n        x2 = x3 + dx;\n        y2 = y3 + dy;\n    }\n    return result.map((num) => +num.toFixed(2));\n}\nexport function drawArc(startX, startY, rx, ry, xAxisRotation = 0, largeArcFlag = 0, sweepFlag = 0, stopX, stopY) {\n    const data = [];\n    const points = arcToCurves(startX, startY, rx, ry, xAxisRotation, largeArcFlag, sweepFlag, stopX, stopY);\n    if (points != null) {\n        for (let i = 0, ii = points.length; i < ii; i += 6) {\n            data.push('C', points[i], points[i + 1], points[i + 2], points[i + 3], points[i + 4], points[i + 5]);\n        }\n    }\n    return data.join(' ');\n}\n//# sourceMappingURL=util.js.map","/* eslint-disable no-constructor-return */\nimport { Line } from './line';\nimport { Point } from './point';\nimport { Rectangle } from './rectangle';\nimport { Geometry } from './geometry';\nexport class Polyline extends Geometry {\n    get start() {\n        return this.points[0] || null;\n    }\n    get end() {\n        return this.points[this.points.length - 1] || null;\n    }\n    constructor(points) {\n        super();\n        if (points != null) {\n            if (typeof points === 'string') {\n                return Polyline.parse(points);\n            }\n            this.points = points.map((p) => Point.create(p));\n        }\n        else {\n            this.points = [];\n        }\n    }\n    scale(sx, sy, origin = new Point()) {\n        this.points.forEach((p) => p.scale(sx, sy, origin));\n        return this;\n    }\n    rotate(angle, origin) {\n        this.points.forEach((p) => p.rotate(angle, origin));\n        return this;\n    }\n    translate(dx, dy) {\n        const t = Point.create(dx, dy);\n        this.points.forEach((p) => p.translate(t.x, t.y));\n        return this;\n    }\n    round(precision = 0) {\n        this.points.forEach((p) => p.round(precision));\n        return this;\n    }\n    bbox() {\n        if (this.points.length === 0) {\n            return new Rectangle();\n        }\n        let x1 = Infinity;\n        let x2 = -Infinity;\n        let y1 = Infinity;\n        let y2 = -Infinity;\n        const points = this.points;\n        for (let i = 0, ii = points.length; i < ii; i += 1) {\n            const point = points[i];\n            const x = point.x;\n            const y = point.y;\n            if (x < x1)\n                x1 = x;\n            if (x > x2)\n                x2 = x;\n            if (y < y1)\n                y1 = y;\n            if (y > y2)\n                y2 = y;\n        }\n        return new Rectangle(x1, y1, x2 - x1, y2 - y1);\n    }\n    closestPoint(p) {\n        const cpLength = this.closestPointLength(p);\n        return this.pointAtLength(cpLength);\n    }\n    closestPointLength(p) {\n        const points = this.points;\n        const count = points.length;\n        if (count === 0 || count === 1) {\n            return 0;\n        }\n        let length = 0;\n        let cpLength = 0;\n        let minSqrDistance = Infinity;\n        for (let i = 0, ii = count - 1; i < ii; i += 1) {\n            const line = new Line(points[i], points[i + 1]);\n            const lineLength = line.length();\n            const cpNormalizedLength = line.closestPointNormalizedLength(p);\n            const cp = line.pointAt(cpNormalizedLength);\n            const sqrDistance = cp.squaredDistance(p);\n            if (sqrDistance < minSqrDistance) {\n                minSqrDistance = sqrDistance;\n                cpLength = length + cpNormalizedLength * lineLength;\n            }\n            length += lineLength;\n        }\n        return cpLength;\n    }\n    closestPointNormalizedLength(p) {\n        const length = this.length();\n        if (length === 0) {\n            return 0;\n        }\n        const cpLength = this.closestPointLength(p);\n        return cpLength / length;\n    }\n    closestPointTangent(p) {\n        const cpLength = this.closestPointLength(p);\n        return this.tangentAtLength(cpLength);\n    }\n    containsPoint(p) {\n        if (this.points.length === 0) {\n            return false;\n        }\n        const ref = Point.clone(p);\n        const x = ref.x;\n        const y = ref.y;\n        const points = this.points;\n        const count = points.length;\n        let startIndex = count - 1;\n        let intersectionCount = 0;\n        for (let endIndex = 0; endIndex < count; endIndex += 1) {\n            const start = points[startIndex];\n            const end = points[endIndex];\n            if (ref.equals(start)) {\n                return true;\n            }\n            const segment = new Line(start, end);\n            if (segment.containsPoint(p)) {\n                return true;\n            }\n            // do we have an intersection?\n            if ((y <= start.y && y > end.y) || (y > start.y && y <= end.y)) {\n                // this conditional branch IS NOT entered when `segment` is collinear/coincident with `ray`\n                // (when `y === start.y === end.y`)\n                // this conditional branch IS entered when `segment` touches `ray` at only one point\n                // (e.g. when `y === start.y !== end.y`)\n                // since this branch is entered again for the following segment, the two touches cancel out\n                const xDifference = start.x - x > end.x - x ? start.x - x : end.x - x;\n                if (xDifference >= 0) {\n                    // segment lies at least partially to the right of `p`\n                    const rayEnd = new Point(x + xDifference, y); // right\n                    const ray = new Line(p, rayEnd);\n                    if (segment.intersectsWithLine(ray)) {\n                        // an intersection was detected to the right of `p`\n                        intersectionCount += 1;\n                    }\n                } // else: `segment` lies completely to the left of `p` (i.e. no intersection to the right)\n            }\n            // move to check the next polyline segment\n            startIndex = endIndex;\n        }\n        // returns `true` for odd numbers of intersections (even-odd algorithm)\n        return intersectionCount % 2 === 1;\n    }\n    intersectsWithLine(line) {\n        const intersections = [];\n        for (let i = 0, n = this.points.length - 1; i < n; i += 1) {\n            const a = this.points[i];\n            const b = this.points[i + 1];\n            const int = line.intersectsWithLine(new Line(a, b));\n            if (int) {\n                intersections.push(int);\n            }\n        }\n        return intersections.length > 0 ? intersections : null;\n    }\n    isDifferentiable() {\n        for (let i = 0, ii = this.points.length - 1; i < ii; i += 1) {\n            const a = this.points[i];\n            const b = this.points[i + 1];\n            const line = new Line(a, b);\n            if (line.isDifferentiable()) {\n                return true;\n            }\n        }\n        return false;\n    }\n    length() {\n        let len = 0;\n        for (let i = 0, ii = this.points.length - 1; i < ii; i += 1) {\n            const a = this.points[i];\n            const b = this.points[i + 1];\n            len += a.distance(b);\n        }\n        return len;\n    }\n    pointAt(ratio) {\n        const points = this.points;\n        const count = points.length;\n        if (count === 0) {\n            return null;\n        }\n        if (count === 1) {\n            return points[0].clone();\n        }\n        if (ratio <= 0) {\n            return points[0].clone();\n        }\n        if (ratio >= 1) {\n            return points[count - 1].clone();\n        }\n        const total = this.length();\n        const length = total * ratio;\n        return this.pointAtLength(length);\n    }\n    pointAtLength(length) {\n        const points = this.points;\n        const count = points.length;\n        if (count === 0) {\n            return null;\n        }\n        if (count === 1) {\n            return points[0].clone();\n        }\n        let fromStart = true;\n        if (length < 0) {\n            fromStart = false;\n            length = -length; // eslint-disable-line\n        }\n        let tmp = 0;\n        for (let i = 0, ii = count - 1; i < ii; i += 1) {\n            const index = fromStart ? i : ii - 1 - i;\n            const a = points[index];\n            const b = points[index + 1];\n            const l = new Line(a, b);\n            const d = a.distance(b);\n            if (length <= tmp + d) {\n                return l.pointAtLength((fromStart ? 1 : -1) * (length - tmp));\n            }\n            tmp += d;\n        }\n        const lastPoint = fromStart ? points[count - 1] : points[0];\n        return lastPoint.clone();\n    }\n    tangentAt(ratio) {\n        const points = this.points;\n        const count = points.length;\n        if (count === 0 || count === 1) {\n            return null;\n        }\n        if (ratio < 0) {\n            ratio = 0; // eslint-disable-line\n        }\n        if (ratio > 1) {\n            ratio = 1; // eslint-disable-line\n        }\n        const total = this.length();\n        const length = total * ratio;\n        return this.tangentAtLength(length);\n    }\n    tangentAtLength(length) {\n        const points = this.points;\n        const count = points.length;\n        if (count === 0 || count === 1) {\n            return null;\n        }\n        let fromStart = true;\n        if (length < 0) {\n            fromStart = false;\n            length = -length; // eslint-disable-line\n        }\n        let lastValidLine;\n        let tmp = 0;\n        for (let i = 0, ii = count - 1; i < ii; i += 1) {\n            const index = fromStart ? i : ii - 1 - i;\n            const a = points[index];\n            const b = points[index + 1];\n            const l = new Line(a, b);\n            const d = a.distance(b);\n            if (l.isDifferentiable()) {\n                // has a tangent line (line length is not 0)\n                if (length <= tmp + d) {\n                    return l.tangentAtLength((fromStart ? 1 : -1) * (length - tmp));\n                }\n                lastValidLine = l;\n            }\n            tmp += d;\n        }\n        if (lastValidLine) {\n            const ratio = fromStart ? 1 : 0;\n            return lastValidLine.tangentAt(ratio);\n        }\n        return null;\n    }\n    simplify(\n    // TODO: Accept startIndex and endIndex to specify where to start and end simplification\n    options = {}) {\n        const points = this.points;\n        // we need at least 3 points\n        if (points.length < 3) {\n            return this;\n        }\n        const threshold = options.threshold || 0;\n        // start at the beginning of the polyline and go forward\n        let currentIndex = 0;\n        // we need at least one intermediate point (3 points) in every iteration\n        // as soon as that stops being true, we know we reached the end of the polyline\n        while (points[currentIndex + 2]) {\n            const firstIndex = currentIndex;\n            const middleIndex = currentIndex + 1;\n            const lastIndex = currentIndex + 2;\n            const firstPoint = points[firstIndex];\n            const middlePoint = points[middleIndex];\n            const lastPoint = points[lastIndex];\n            const chord = new Line(firstPoint, lastPoint); // = connection between first and last point\n            const closestPoint = chord.closestPoint(middlePoint); // = closest point on chord from middle point\n            const closestPointDistance = closestPoint.distance(middlePoint);\n            if (closestPointDistance <= threshold) {\n                // middle point is close enough to the chord = simplify\n                // 1) remove middle point:\n                points.splice(middleIndex, 1);\n                // 2) in next iteration, investigate the newly-created triplet of points\n                //    - do not change `currentIndex`\n                //    = (first point stays, point after removed point becomes middle point)\n            }\n            else {\n                // middle point is far from the chord\n                // 1) preserve middle point\n                // 2) in next iteration, move `currentIndex` by one step:\n                currentIndex += 1;\n                //    = (point after first point becomes first point)\n            }\n        }\n        // `points` array was modified in-place\n        return this;\n    }\n    toHull() {\n        const points = this.points;\n        const count = points.length;\n        if (count === 0) {\n            return new Polyline();\n        }\n        // Step 1: find the starting point -- point with\n        // the lowest y (if equality, highest x).\n        let startPoint = points[0];\n        for (let i = 1; i < count; i += 1) {\n            if (points[i].y < startPoint.y) {\n                startPoint = points[i];\n            }\n            else if (points[i].y === startPoint.y && points[i].x > startPoint.x) {\n                startPoint = points[i];\n            }\n        }\n        // Step 2: sort the list of points by angle between line\n        // from start point to current point and the x-axis (theta).\n        // Step 2a: create the point records = [point, originalIndex, angle]\n        const sortedRecords = [];\n        for (let i = 0; i < count; i += 1) {\n            let angle = startPoint.theta(points[i]);\n            if (angle === 0) {\n                // Give highest angle to start point.\n                // The start point will end up at end of sorted list.\n                // The start point will end up at beginning of hull points list.\n                angle = 360;\n            }\n            sortedRecords.push([points[i], i, angle]);\n        }\n        // Step 2b: sort the list in place\n        sortedRecords.sort((record1, record2) => {\n            let ret = record1[2] - record2[2];\n            if (ret === 0) {\n                ret = record2[1] - record1[1];\n            }\n            return ret;\n        });\n        // Step 2c: duplicate start record from the top of\n        // the stack to the bottom of the stack.\n        if (sortedRecords.length > 2) {\n            const startPoint = sortedRecords[sortedRecords.length - 1];\n            sortedRecords.unshift(startPoint);\n        }\n        // Step 3\n        // ------\n        // Step 3a: go through sorted points in order and find those with\n        // right turns, and we want to get our results in clockwise order.\n        // Dictionary of points with left turns - cannot be on the hull.\n        const insidePoints = {};\n        // Stack of records with right turns - hull point candidates.\n        const hullRecords = [];\n        const getKey = (record) => `${record[0].toString()}@${record[1]}`;\n        while (sortedRecords.length !== 0) {\n            const currentRecord = sortedRecords.pop();\n            const currentPoint = currentRecord[0];\n            // Check if point has already been discarded.\n            if (insidePoints[getKey(currentRecord)]) {\n                continue;\n            }\n            let correctTurnFound = false;\n            while (!correctTurnFound) {\n                if (hullRecords.length < 2) {\n                    // Not enough points for comparison, just add current point.\n                    hullRecords.push(currentRecord);\n                    correctTurnFound = true;\n                }\n                else {\n                    const lastHullRecord = hullRecords.pop();\n                    const lastHullPoint = lastHullRecord[0];\n                    const secondLastHullRecord = hullRecords.pop();\n                    const secondLastHullPoint = secondLastHullRecord[0];\n                    const crossProduct = secondLastHullPoint.cross(lastHullPoint, currentPoint);\n                    if (crossProduct < 0) {\n                        // Found a right turn.\n                        hullRecords.push(secondLastHullRecord);\n                        hullRecords.push(lastHullRecord);\n                        hullRecords.push(currentRecord);\n                        correctTurnFound = true;\n                    }\n                    else if (crossProduct === 0) {\n                        // the three points are collinear\n                        // three options:\n                        // there may be a 180 or 0 degree angle at lastHullPoint\n                        // or two of the three points are coincident\n                        // we have to take rounding errors into account\n                        const THRESHOLD = 1e-10;\n                        const angleBetween = lastHullPoint.angleBetween(secondLastHullPoint, currentPoint);\n                        if (Math.abs(angleBetween - 180) < THRESHOLD) {\n                            // rouding around 180 to 180\n                            // if the cross product is 0 because the angle is 180 degrees\n                            // discard last hull point (add to insidePoints)\n                            // insidePoints.unshift(lastHullPoint);\n                            insidePoints[getKey(lastHullRecord)] = lastHullPoint;\n                            // reenter second-to-last hull point (will be last at next iter)\n                            hullRecords.push(secondLastHullRecord);\n                            // do not do anything with current point\n                            // correct turn not found\n                        }\n                        else if (lastHullPoint.equals(currentPoint) ||\n                            secondLastHullPoint.equals(lastHullPoint)) {\n                            // if the cross product is 0 because two points are the same\n                            // discard last hull point (add to insidePoints)\n                            // insidePoints.unshift(lastHullPoint);\n                            insidePoints[getKey(lastHullRecord)] = lastHullPoint;\n                            // reenter second-to-last hull point (will be last at next iter)\n                            hullRecords.push(secondLastHullRecord);\n                            // do not do anything with current point\n                            // correct turn not found\n                        }\n                        else if (Math.abs(((angleBetween + 1) % 360) - 1) < THRESHOLD) {\n                            // rounding around 0 and 360 to 0\n                            // if the cross product is 0 because the angle is 0 degrees\n                            // remove last hull point from hull BUT do not discard it\n                            // reenter second-to-last hull point (will be last at next iter)\n                            hullRecords.push(secondLastHullRecord);\n                            // put last hull point back into the sorted point records list\n                            sortedRecords.push(lastHullRecord);\n                            // we are switching the order of the 0deg and 180deg points\n                            // correct turn not found\n                        }\n                    }\n                    else {\n                        // found a left turn\n                        // discard last hull point (add to insidePoints)\n                        // insidePoints.unshift(lastHullPoint);\n                        insidePoints[getKey(lastHullRecord)] = lastHullPoint;\n                        // reenter second-to-last hull point (will be last at next iter of loop)\n                        hullRecords.push(secondLastHullRecord);\n                        // do not do anything with current point\n                        // correct turn not found\n                    }\n                }\n            }\n        }\n        // At this point, hullPointRecords contains the output points in clockwise order\n        // the points start with lowest-y,highest-x startPoint, and end at the same point\n        // Step 3b: remove duplicated startPointRecord from the end of the array\n        if (hullRecords.length > 2) {\n            hullRecords.pop();\n        }\n        // Step 4: find the lowest originalIndex record and put it at the beginning of hull\n        let lowestHullIndex; // the lowest originalIndex on the hull\n        let indexOfLowestHullIndexRecord = -1; // the index of the record with lowestHullIndex\n        for (let i = 0, n = hullRecords.length; i < n; i += 1) {\n            const currentHullIndex = hullRecords[i][1];\n            if (lowestHullIndex === undefined || currentHullIndex < lowestHullIndex) {\n                lowestHullIndex = currentHullIndex;\n                indexOfLowestHullIndexRecord = i;\n            }\n        }\n        let hullPointRecordsReordered = [];\n        if (indexOfLowestHullIndexRecord > 0) {\n            const newFirstChunk = hullRecords.slice(indexOfLowestHullIndexRecord);\n            const newSecondChunk = hullRecords.slice(0, indexOfLowestHullIndexRecord);\n            hullPointRecordsReordered = newFirstChunk.concat(newSecondChunk);\n        }\n        else {\n            hullPointRecordsReordered = hullRecords;\n        }\n        const hullPoints = [];\n        for (let i = 0, n = hullPointRecordsReordered.length; i < n; i += 1) {\n            hullPoints.push(hullPointRecordsReordered[i][0]);\n        }\n        return new Polyline(hullPoints);\n    }\n    equals(p) {\n        if (p == null) {\n            return false;\n        }\n        if (p.points.length !== this.points.length) {\n            return false;\n        }\n        return p.points.every((a, i) => a.equals(this.points[i]));\n    }\n    clone() {\n        return new Polyline(this.points.map((p) => p.clone()));\n    }\n    toJSON() {\n        return this.points.map((p) => p.toJSON());\n    }\n    serialize() {\n        return this.points.map((p) => `${p.serialize()}`).join(' ');\n    }\n}\n(function (Polyline) {\n    function isPolyline(instance) {\n        return instance != null && instance instanceof Polyline;\n    }\n    Polyline.isPolyline = isPolyline;\n})(Polyline || (Polyline = {}));\n(function (Polyline) {\n    function parse(svgString) {\n        const str = svgString.trim();\n        if (str === '') {\n            return new Polyline();\n        }\n        const points = [];\n        const coords = str.split(/\\s*,\\s*|\\s+/);\n        for (let i = 0, ii = coords.length; i < ii; i += 2) {\n            points.push({ x: +coords[i], y: +coords[i + 1] });\n        }\n        return new Polyline(points);\n    }\n    Polyline.parse = parse;\n})(Polyline || (Polyline = {}));\n//# sourceMappingURL=polyline.js.map","import { Line } from './line';\nimport { Point } from './point';\nimport { Polyline } from './polyline';\nimport { Rectangle } from './rectangle';\nimport { Geometry } from './geometry';\nexport class Curve extends Geometry {\n    constructor(start, controlPoint1, controlPoint2, end) {\n        super();\n        this.PRECISION = 3;\n        this.start = Point.create(start);\n        this.controlPoint1 = Point.create(controlPoint1);\n        this.controlPoint2 = Point.create(controlPoint2);\n        this.end = Point.create(end);\n    }\n    bbox() {\n        const start = this.start;\n        const controlPoint1 = this.controlPoint1;\n        const controlPoint2 = this.controlPoint2;\n        const end = this.end;\n        const x0 = start.x;\n        const y0 = start.y;\n        const x1 = controlPoint1.x;\n        const y1 = controlPoint1.y;\n        const x2 = controlPoint2.x;\n        const y2 = controlPoint2.y;\n        const x3 = end.x;\n        const y3 = end.y;\n        const points = []; // local extremes\n        const tvalues = []; // t values of local extremes\n        const bounds = [[], []];\n        let a;\n        let b;\n        let c;\n        let t;\n        let t1;\n        let t2;\n        let b2ac;\n        let sqrtb2ac;\n        for (let i = 0; i < 2; i += 1) {\n            if (i === 0) {\n                b = 6 * x0 - 12 * x1 + 6 * x2;\n                a = -3 * x0 + 9 * x1 - 9 * x2 + 3 * x3;\n                c = 3 * x1 - 3 * x0;\n            }\n            else {\n                b = 6 * y0 - 12 * y1 + 6 * y2;\n                a = -3 * y0 + 9 * y1 - 9 * y2 + 3 * y3;\n                c = 3 * y1 - 3 * y0;\n            }\n            if (Math.abs(a) < 1e-12) {\n                if (Math.abs(b) < 1e-12) {\n                    continue;\n                }\n                t = -c / b;\n                if (t > 0 && t < 1)\n                    tvalues.push(t);\n                continue;\n            }\n            b2ac = b * b - 4 * c * a;\n            sqrtb2ac = Math.sqrt(b2ac);\n            if (b2ac < 0)\n                continue;\n            t1 = (-b + sqrtb2ac) / (2 * a);\n            if (t1 > 0 && t1 < 1)\n                tvalues.push(t1);\n            t2 = (-b - sqrtb2ac) / (2 * a);\n            if (t2 > 0 && t2 < 1)\n                tvalues.push(t2);\n        }\n        let x;\n        let y;\n        let mt;\n        let j = tvalues.length;\n        const jlen = j;\n        while (j) {\n            j -= 1;\n            t = tvalues[j];\n            mt = 1 - t;\n            x =\n                mt * mt * mt * x0 +\n                    3 * mt * mt * t * x1 +\n                    3 * mt * t * t * x2 +\n                    t * t * t * x3;\n            bounds[0][j] = x;\n            y =\n                mt * mt * mt * y0 +\n                    3 * mt * mt * t * y1 +\n                    3 * mt * t * t * y2 +\n                    t * t * t * y3;\n            bounds[1][j] = y;\n            points[j] = { X: x, Y: y };\n        }\n        tvalues[jlen] = 0;\n        tvalues[jlen + 1] = 1;\n        points[jlen] = { X: x0, Y: y0 };\n        points[jlen + 1] = { X: x3, Y: y3 };\n        bounds[0][jlen] = x0;\n        bounds[1][jlen] = y0;\n        bounds[0][jlen + 1] = x3;\n        bounds[1][jlen + 1] = y3;\n        tvalues.length = jlen + 2;\n        bounds[0].length = jlen + 2;\n        bounds[1].length = jlen + 2;\n        points.length = jlen + 2;\n        const left = Math.min.apply(null, bounds[0]);\n        const top = Math.min.apply(null, bounds[1]);\n        const right = Math.max.apply(null, bounds[0]);\n        const bottom = Math.max.apply(null, bounds[1]);\n        return new Rectangle(left, top, right - left, bottom - top);\n    }\n    closestPoint(p, options = {}) {\n        return this.pointAtT(this.closestPointT(p, options));\n    }\n    closestPointLength(p, options = {}) {\n        const opts = this.getOptions(options);\n        return this.lengthAtT(this.closestPointT(p, opts), opts);\n    }\n    closestPointNormalizedLength(p, options = {}) {\n        const opts = this.getOptions(options);\n        const cpLength = this.closestPointLength(p, opts);\n        if (!cpLength) {\n            return 0;\n        }\n        const length = this.length(opts);\n        if (length === 0) {\n            return 0;\n        }\n        return cpLength / length;\n    }\n    closestPointT(p, options = {}) {\n        const precision = this.getPrecision(options);\n        const subdivisions = this.getDivisions(options);\n        const precisionRatio = Math.pow(10, -precision); // eslint-disable-line\n        let investigatedSubdivision = null;\n        let investigatedSubdivisionStartT = 0;\n        let investigatedSubdivisionEndT = 0;\n        let distFromStart = 0;\n        let distFromEnd = 0;\n        let chordLength = 0;\n        let minSumDist = null;\n        const count = subdivisions.length;\n        let piece = count > 0 ? 1 / count : 0;\n        subdivisions.forEach((division, i) => {\n            const startDist = division.start.distance(p);\n            const endDist = division.end.distance(p);\n            const sumDist = startDist + endDist;\n            if (minSumDist == null || sumDist < minSumDist) {\n                investigatedSubdivision = division;\n                investigatedSubdivisionStartT = i * piece;\n                investigatedSubdivisionEndT = (i + 1) * piece;\n                distFromStart = startDist;\n                distFromEnd = endDist;\n                minSumDist = sumDist;\n                chordLength = division.endpointDistance();\n            }\n        });\n        // Recursively divide investigated subdivision, until distance between\n        // baselinePoint and closest path endpoint is within `10^(-precision)`,\n        // then return the closest endpoint of that final subdivision.\n        // eslint-disable-next-line\n        while (true) {\n            // check if we have reached at least one required observed precision\n            // - calculated as: the difference in distances from point to start and end divided by the distance\n            // - note that this function is not monotonic = it doesn't converge stably but has \"teeth\"\n            // - the function decreases while one of the endpoints is fixed but \"jumps\" whenever we switch\n            // - this criterion works well for points lying far away from the curve\n            const startPrecisionRatio = distFromStart\n                ? Math.abs(distFromStart - distFromEnd) / distFromStart\n                : 0;\n            const endPrecisionRatio = distFromEnd != null\n                ? Math.abs(distFromStart - distFromEnd) / distFromEnd\n                : 0;\n            const hasRequiredPrecision = startPrecisionRatio < precisionRatio ||\n                endPrecisionRatio < precisionRatio;\n            // check if we have reached at least one required minimal distance\n            // - calculated as: the subdivision chord length multiplied by precisionRatio\n            // - calculation is relative so it will work for arbitrarily large/small curves and their subdivisions\n            // - this is a backup criterion that works well for points lying \"almost at\" the curve\n            const hasMiniStartDistance = distFromStart\n                ? distFromStart < chordLength * precisionRatio\n                : true;\n            const hasMiniEndDistance = distFromEnd\n                ? distFromEnd < chordLength * precisionRatio\n                : true;\n            const hasMiniDistance = hasMiniStartDistance || hasMiniEndDistance;\n            if (hasRequiredPrecision || hasMiniDistance) {\n                return distFromStart <= distFromEnd\n                    ? investigatedSubdivisionStartT\n                    : investigatedSubdivisionEndT;\n            }\n            // otherwise, set up for next iteration\n            const divided = investigatedSubdivision.divide(0.5);\n            piece /= 2;\n            const startDist1 = divided[0].start.distance(p);\n            const endDist1 = divided[0].end.distance(p);\n            const sumDist1 = startDist1 + endDist1;\n            const startDist2 = divided[1].start.distance(p);\n            const endDist2 = divided[1].end.distance(p);\n            const sumDist2 = startDist2 + endDist2;\n            if (sumDist1 <= sumDist2) {\n                investigatedSubdivision = divided[0];\n                investigatedSubdivisionEndT -= piece;\n                distFromStart = startDist1;\n                distFromEnd = endDist1;\n            }\n            else {\n                investigatedSubdivision = divided[1];\n                investigatedSubdivisionStartT += piece;\n                distFromStart = startDist2;\n                distFromEnd = endDist2;\n            }\n        }\n    }\n    closestPointTangent(p, options = {}) {\n        return this.tangentAtT(this.closestPointT(p, options));\n    }\n    containsPoint(p, options = {}) {\n        const polyline = this.toPolyline(options);\n        return polyline.containsPoint(p);\n    }\n    divideAt(ratio, options = {}) {\n        if (ratio <= 0) {\n            return this.divideAtT(0);\n        }\n        if (ratio >= 1) {\n            return this.divideAtT(1);\n        }\n        const t = this.tAt(ratio, options);\n        return this.divideAtT(t);\n    }\n    divideAtLength(length, options = {}) {\n        const t = this.tAtLength(length, options);\n        return this.divideAtT(t);\n    }\n    divide(t) {\n        return this.divideAtT(t);\n    }\n    divideAtT(t) {\n        const start = this.start;\n        const controlPoint1 = this.controlPoint1;\n        const controlPoint2 = this.controlPoint2;\n        const end = this.end;\n        if (t <= 0) {\n            return [\n                new Curve(start, start, start, start),\n                new Curve(start, controlPoint1, controlPoint2, end),\n            ];\n        }\n        if (t >= 1) {\n            return [\n                new Curve(start, controlPoint1, controlPoint2, end),\n                new Curve(end, end, end, end),\n            ];\n        }\n        const dividerPoints = this.getSkeletonPoints(t);\n        const startControl1 = dividerPoints.startControlPoint1;\n        const startControl2 = dividerPoints.startControlPoint2;\n        const divider = dividerPoints.divider;\n        const dividerControl1 = dividerPoints.dividerControlPoint1;\n        const dividerControl2 = dividerPoints.dividerControlPoint2;\n        return [\n            new Curve(start, startControl1, startControl2, divider),\n            new Curve(divider, dividerControl1, dividerControl2, end),\n        ];\n    }\n    endpointDistance() {\n        return this.start.distance(this.end);\n    }\n    getSkeletonPoints(t) {\n        const start = this.start;\n        const control1 = this.controlPoint1;\n        const control2 = this.controlPoint2;\n        const end = this.end;\n        // shortcuts for `t` values that are out of range\n        if (t <= 0) {\n            return {\n                startControlPoint1: start.clone(),\n                startControlPoint2: start.clone(),\n                divider: start.clone(),\n                dividerControlPoint1: control1.clone(),\n                dividerControlPoint2: control2.clone(),\n            };\n        }\n        if (t >= 1) {\n            return {\n                startControlPoint1: control1.clone(),\n                startControlPoint2: control2.clone(),\n                divider: end.clone(),\n                dividerControlPoint1: end.clone(),\n                dividerControlPoint2: end.clone(),\n            };\n        }\n        const midpoint1 = new Line(start, control1).pointAt(t);\n        const midpoint2 = new Line(control1, control2).pointAt(t);\n        const midpoint3 = new Line(control2, end).pointAt(t);\n        const subControl1 = new Line(midpoint1, midpoint2).pointAt(t);\n        const subControl2 = new Line(midpoint2, midpoint3).pointAt(t);\n        const divideLine = new Line(subControl1, subControl2).pointAt(t);\n        return {\n            startControlPoint1: midpoint1,\n            startControlPoint2: subControl1,\n            divider: divideLine,\n            dividerControlPoint1: subControl2,\n            dividerControlPoint2: midpoint3,\n        };\n    }\n    getSubdivisions(options = {}) {\n        const precision = this.getPrecision(options);\n        let subdivisions = [\n            new Curve(this.start, this.controlPoint1, this.controlPoint2, this.end),\n        ];\n        if (precision === 0) {\n            return subdivisions;\n        }\n        let previousLength = this.endpointDistance();\n        const precisionRatio = Math.pow(10, -precision); // eslint-disable-line\n        // Recursively divide curve at `t = 0.5`, until the difference between\n        // observed length at subsequent iterations is lower than precision.\n        let iteration = 0;\n        // eslint-disable-next-line\n        while (true) {\n            iteration += 1;\n            const divisions = [];\n            subdivisions.forEach((c) => {\n                // dividing at t = 0.5 (not at middle length!)\n                const divided = c.divide(0.5);\n                divisions.push(divided[0], divided[1]);\n            });\n            // measure new length\n            const length = divisions.reduce((memo, c) => memo + c.endpointDistance(), 0);\n            // check if we have reached required observed precision\n            // sine-like curves may have the same observed length in iteration 0 and 1 - skip iteration 1\n            // not a problem for further iterations because cubic curves cannot have more than two local extrema\n            // (i.e. cubic curves cannot intersect the baseline more than once)\n            // therefore two subsequent iterations cannot produce sampling with equal length\n            const ratio = length !== 0 ? (length - previousLength) / length : 0;\n            if (iteration > 1 && ratio < precisionRatio) {\n                return divisions;\n            }\n            subdivisions = divisions;\n            previousLength = length;\n        }\n    }\n    length(options = {}) {\n        const divisions = this.getDivisions(options);\n        return divisions.reduce((memo, c) => {\n            return memo + c.endpointDistance();\n        }, 0);\n    }\n    lengthAtT(t, options = {}) {\n        if (t <= 0) {\n            return 0;\n        }\n        const precision = options.precision === undefined ? this.PRECISION : options.precision;\n        const subCurve = this.divide(t)[0];\n        return subCurve.length({ precision });\n    }\n    pointAt(ratio, options = {}) {\n        if (ratio <= 0) {\n            return this.start.clone();\n        }\n        if (ratio >= 1) {\n            return this.end.clone();\n        }\n        const t = this.tAt(ratio, options);\n        return this.pointAtT(t);\n    }\n    pointAtLength(length, options = {}) {\n        const t = this.tAtLength(length, options);\n        return this.pointAtT(t);\n    }\n    pointAtT(t) {\n        if (t <= 0) {\n            return this.start.clone();\n        }\n        if (t >= 1) {\n            return this.end.clone();\n        }\n        return this.getSkeletonPoints(t).divider;\n    }\n    isDifferentiable() {\n        const start = this.start;\n        const control1 = this.controlPoint1;\n        const control2 = this.controlPoint2;\n        const end = this.end;\n        return !(start.equals(control1) &&\n            control1.equals(control2) &&\n            control2.equals(end));\n    }\n    tangentAt(ratio, options = {}) {\n        if (!this.isDifferentiable())\n            return null;\n        if (ratio < 0) {\n            ratio = 0; // eslint-disable-line\n        }\n        else if (ratio > 1) {\n            ratio = 1; // eslint-disable-line\n        }\n        const t = this.tAt(ratio, options);\n        return this.tangentAtT(t);\n    }\n    tangentAtLength(length, options = {}) {\n        if (!this.isDifferentiable()) {\n            return null;\n        }\n        const t = this.tAtLength(length, options);\n        return this.tangentAtT(t);\n    }\n    tangentAtT(t) {\n        if (!this.isDifferentiable()) {\n            return null;\n        }\n        if (t < 0) {\n            t = 0; // eslint-disable-line\n        }\n        if (t > 1) {\n            t = 1; // eslint-disable-line\n        }\n        const skeletonPoints = this.getSkeletonPoints(t);\n        const p1 = skeletonPoints.startControlPoint2;\n        const p2 = skeletonPoints.dividerControlPoint1;\n        const tangentStart = skeletonPoints.divider;\n        const tangentLine = new Line(p1, p2);\n        // move so that tangent line starts at the point requested\n        tangentLine.translate(tangentStart.x - p1.x, tangentStart.y - p1.y);\n        return tangentLine;\n    }\n    getPrecision(options = {}) {\n        return options.precision == null ? this.PRECISION : options.precision;\n    }\n    getDivisions(options = {}) {\n        if (options.subdivisions != null) {\n            return options.subdivisions;\n        }\n        const precision = this.getPrecision(options);\n        return this.getSubdivisions({ precision });\n    }\n    getOptions(options = {}) {\n        const precision = this.getPrecision(options);\n        const subdivisions = this.getDivisions(options);\n        return { precision, subdivisions };\n    }\n    tAt(ratio, options = {}) {\n        if (ratio <= 0) {\n            return 0;\n        }\n        if (ratio >= 1) {\n            return 1;\n        }\n        const opts = this.getOptions(options);\n        const total = this.length(opts);\n        const length = total * ratio;\n        return this.tAtLength(length, opts);\n    }\n    tAtLength(length, options = {}) {\n        let fromStart = true;\n        if (length < 0) {\n            fromStart = false;\n            length = -length; // eslint-disable-line\n        }\n        const precision = this.getPrecision(options);\n        const subdivisions = this.getDivisions(options);\n        const opts = { precision, subdivisions };\n        let investigatedSubdivision = null;\n        let investigatedSubdivisionStartT;\n        let investigatedSubdivisionEndT;\n        let baselinePointDistFromStart = 0;\n        let baselinePointDistFromEnd = 0;\n        let memo = 0;\n        const count = subdivisions.length;\n        let piece = count > 0 ? 1 / count : 0;\n        for (let i = 0; i < count; i += 1) {\n            const index = fromStart ? i : count - 1 - i;\n            const division = subdivisions[i];\n            const dist = division.endpointDistance();\n            if (length <= memo + dist) {\n                investigatedSubdivision = division;\n                investigatedSubdivisionStartT = index * piece;\n                investigatedSubdivisionEndT = (index + 1) * piece;\n                baselinePointDistFromStart = fromStart\n                    ? length - memo\n                    : dist + memo - length;\n                baselinePointDistFromEnd = fromStart\n                    ? dist + memo - length\n                    : length - memo;\n                break;\n            }\n            memo += dist;\n        }\n        if (investigatedSubdivision == null) {\n            return fromStart ? 1 : 0;\n        }\n        // note that precision affects what length is recorded\n        // (imprecise measurements underestimate length by up to 10^(-precision) of the precise length)\n        // e.g. at precision 1, the length may be underestimated by up to 10% and cause this function to return 1\n        const total = this.length(opts);\n        const precisionRatio = Math.pow(10, -precision); // eslint-disable-line\n        // recursively divide investigated subdivision:\n        // until distance between baselinePoint and closest path endpoint is within 10^(-precision)\n        // then return the closest endpoint of that final subdivision\n        // eslint-disable-next-line\n        while (true) {\n            let ratio;\n            ratio = total !== 0 ? baselinePointDistFromStart / total : 0;\n            if (ratio < precisionRatio) {\n                return investigatedSubdivisionStartT;\n            }\n            ratio = total !== 0 ? baselinePointDistFromEnd / total : 0;\n            if (ratio < precisionRatio) {\n                return investigatedSubdivisionEndT;\n            }\n            // otherwise, set up for next iteration\n            let newBaselinePointDistFromStart;\n            let newBaselinePointDistFromEnd;\n            const divided = investigatedSubdivision.divide(0.5);\n            piece /= 2;\n            const baseline1Length = divided[0].endpointDistance();\n            const baseline2Length = divided[1].endpointDistance();\n            if (baselinePointDistFromStart <= baseline1Length) {\n                investigatedSubdivision = divided[0];\n                investigatedSubdivisionEndT -= piece;\n                newBaselinePointDistFromStart = baselinePointDistFromStart;\n                newBaselinePointDistFromEnd =\n                    baseline1Length - newBaselinePointDistFromStart;\n            }\n            else {\n                investigatedSubdivision = divided[1];\n                investigatedSubdivisionStartT += piece;\n                newBaselinePointDistFromStart =\n                    baselinePointDistFromStart - baseline1Length;\n                newBaselinePointDistFromEnd =\n                    baseline2Length - newBaselinePointDistFromStart;\n            }\n            baselinePointDistFromStart = newBaselinePointDistFromStart;\n            baselinePointDistFromEnd = newBaselinePointDistFromEnd;\n        }\n    }\n    toPoints(options = {}) {\n        const subdivisions = this.getDivisions(options);\n        const points = [subdivisions[0].start.clone()];\n        subdivisions.forEach((c) => points.push(c.end.clone()));\n        return points;\n    }\n    toPolyline(options = {}) {\n        return new Polyline(this.toPoints(options));\n    }\n    scale(sx, sy, origin) {\n        this.start.scale(sx, sy, origin);\n        this.controlPoint1.scale(sx, sy, origin);\n        this.controlPoint2.scale(sx, sy, origin);\n        this.end.scale(sx, sy, origin);\n        return this;\n    }\n    rotate(angle, origin) {\n        this.start.rotate(angle, origin);\n        this.controlPoint1.rotate(angle, origin);\n        this.controlPoint2.rotate(angle, origin);\n        this.end.rotate(angle, origin);\n        return this;\n    }\n    translate(tx, ty) {\n        if (typeof tx === 'number') {\n            this.start.translate(tx, ty);\n            this.controlPoint1.translate(tx, ty);\n            this.controlPoint2.translate(tx, ty);\n            this.end.translate(tx, ty);\n        }\n        else {\n            this.start.translate(tx);\n            this.controlPoint1.translate(tx);\n            this.controlPoint2.translate(tx);\n            this.end.translate(tx);\n        }\n        return this;\n    }\n    equals(c) {\n        return (c != null &&\n            this.start.equals(c.start) &&\n            this.controlPoint1.equals(c.controlPoint1) &&\n            this.controlPoint2.equals(c.controlPoint2) &&\n            this.end.equals(c.end));\n    }\n    clone() {\n        return new Curve(this.start, this.controlPoint1, this.controlPoint2, this.end);\n    }\n    toJSON() {\n        return {\n            start: this.start.toJSON(),\n            controlPoint1: this.controlPoint1.toJSON(),\n            controlPoint2: this.controlPoint2.toJSON(),\n            end: this.end.toJSON(),\n        };\n    }\n    serialize() {\n        return [\n            this.start.serialize(),\n            this.controlPoint1.serialize(),\n            this.controlPoint2.serialize(),\n            this.end.serialize(),\n        ].join(' ');\n    }\n}\n(function (Curve) {\n    function isCurve(instance) {\n        return instance != null && instance instanceof Curve;\n    }\n    Curve.isCurve = isCurve;\n})(Curve || (Curve = {}));\n(function (Curve) {\n    function getFirstControlPoints(rhs) {\n        const n = rhs.length;\n        const x = []; // `x` is a solution vector.\n        const tmp = [];\n        let b = 2.0;\n        x[0] = rhs[0] / b;\n        // Decomposition and forward substitution.\n        for (let i = 1; i < n; i += 1) {\n            tmp[i] = 1 / b;\n            b = (i < n - 1 ? 4.0 : 3.5) - tmp[i];\n            x[i] = (rhs[i] - x[i - 1]) / b;\n        }\n        for (let i = 1; i < n; i += 1) {\n            // Backsubstitution.\n            x[n - i - 1] -= tmp[n - i] * x[n - i];\n        }\n        return x;\n    }\n    function getCurveControlPoints(points) {\n        const knots = points.map((p) => Point.clone(p));\n        const firstControlPoints = [];\n        const secondControlPoints = [];\n        const n = knots.length - 1;\n        // Special case: Bezier curve should be a straight line.\n        if (n === 1) {\n            // 3P1 = 2P0 + P3\n            firstControlPoints[0] = new Point((2 * knots[0].x + knots[1].x) / 3, (2 * knots[0].y + knots[1].y) / 3);\n            // P2 = 2P1  P0\n            secondControlPoints[0] = new Point(2 * firstControlPoints[0].x - knots[0].x, 2 * firstControlPoints[0].y - knots[0].y);\n            return [firstControlPoints, secondControlPoints];\n        }\n        // Calculate first Bezier control points.\n        // Right hand side vector.\n        const rhs = [];\n        // Set right hand side X values.\n        for (let i = 1; i < n - 1; i += 1) {\n            rhs[i] = 4 * knots[i].x + 2 * knots[i + 1].x;\n        }\n        rhs[0] = knots[0].x + 2 * knots[1].x;\n        rhs[n - 1] = (8 * knots[n - 1].x + knots[n].x) / 2.0;\n        // Get first control points X-values.\n        const x = getFirstControlPoints(rhs);\n        // Set right hand side Y values.\n        for (let i = 1; i < n - 1; i += 1) {\n            rhs[i] = 4 * knots[i].y + 2 * knots[i + 1].y;\n        }\n        rhs[0] = knots[0].y + 2 * knots[1].y;\n        rhs[n - 1] = (8 * knots[n - 1].y + knots[n].y) / 2.0;\n        // Get first control points Y-values.\n        const y = getFirstControlPoints(rhs);\n        // Fill output arrays.\n        for (let i = 0; i < n; i += 1) {\n            // First control point.\n            firstControlPoints.push(new Point(x[i], y[i]));\n            // Second control point.\n            if (i < n - 1) {\n                secondControlPoints.push(new Point(2 * knots[i + 1].x - x[i + 1], 2 * knots[i + 1].y - y[i + 1]));\n            }\n            else {\n                secondControlPoints.push(new Point((knots[n].x + x[n - 1]) / 2, (knots[n].y + y[n - 1]) / 2));\n            }\n        }\n        return [firstControlPoints, secondControlPoints];\n    }\n    function throughPoints(points) {\n        if (points == null || (Array.isArray(points) && points.length < 2)) {\n            throw new Error('At least 2 points are required');\n        }\n        const controlPoints = getCurveControlPoints(points);\n        const curves = [];\n        for (let i = 0, ii = controlPoints[0].length; i < ii; i += 1) {\n            const controlPoint1 = new Point(controlPoints[0][i].x, controlPoints[0][i].y);\n            const controlPoint2 = new Point(controlPoints[1][i].x, controlPoints[1][i].y);\n            curves.push(new Curve(points[i], controlPoint1, controlPoint2, points[i + 1]));\n        }\n        return curves;\n    }\n    Curve.throughPoints = throughPoints;\n})(Curve || (Curve = {}));\n//# sourceMappingURL=curve.js.map","import { Geometry } from '../geometry';\nexport class Segment extends Geometry {\n    constructor() {\n        super(...arguments);\n        this.isVisible = true;\n        this.isSegment = true;\n        this.isSubpathStart = false;\n    }\n    get end() {\n        return this.endPoint;\n    }\n    get start() {\n        if (this.previousSegment == null) {\n            throw new Error('Missing previous segment. (This segment cannot be the ' +\n                'first segment of a path, or segment has not yet been ' +\n                'added to a path.)');\n        }\n        return this.previousSegment.end;\n    }\n    closestPointT(p, options) {\n        if (this.closestPointNormalizedLength) {\n            return this.closestPointNormalizedLength(p);\n        }\n        throw new Error('Neither `closestPointT` nor `closestPointNormalizedLength` method is implemented.');\n    }\n    // eslint-disable-next-line\n    lengthAtT(t, options) {\n        if (t <= 0) {\n            return 0;\n        }\n        const length = this.length();\n        if (t >= 1) {\n            return length;\n        }\n        return length * t;\n    }\n    divideAtT(t) {\n        if (this.divideAt) {\n            return this.divideAt(t);\n        }\n        throw new Error('Neither `divideAtT` nor `divideAt` method is implemented.');\n    }\n    pointAtT(t) {\n        if (this.pointAt) {\n            return this.pointAt(t);\n        }\n        throw new Error('Neither `pointAtT` nor `pointAt` method is implemented.');\n    }\n    tangentAtT(t) {\n        if (this.tangentAt) {\n            return this.tangentAt(t);\n        }\n        throw new Error('Neither `tangentAtT` nor `tangentAt` method is implemented.');\n    }\n}\n//# sourceMappingURL=segment.js.map","import { Line } from '../line';\nimport { Point } from '../point';\nimport { Segment } from './segment';\nexport class LineTo extends Segment {\n    constructor(x, y) {\n        super();\n        if (Line.isLine(x)) {\n            this.endPoint = x.end.clone().round(2);\n        }\n        else {\n            this.endPoint = Point.create(x, y).round(2);\n        }\n    }\n    get type() {\n        return 'L';\n    }\n    get line() {\n        return new Line(this.start, this.end);\n    }\n    bbox() {\n        return this.line.bbox();\n    }\n    closestPoint(p) {\n        return this.line.closestPoint(p);\n    }\n    closestPointLength(p) {\n        return this.line.closestPointLength(p);\n    }\n    closestPointNormalizedLength(p) {\n        return this.line.closestPointNormalizedLength(p);\n    }\n    closestPointTangent(p) {\n        return this.line.closestPointTangent(p);\n    }\n    length() {\n        return this.line.length();\n    }\n    divideAt(ratio) {\n        const divided = this.line.divideAt(ratio);\n        return [new LineTo(divided[0]), new LineTo(divided[1])];\n    }\n    divideAtLength(length) {\n        const divided = this.line.divideAtLength(length);\n        return [new LineTo(divided[0]), new LineTo(divided[1])];\n    }\n    getSubdivisions() {\n        return [];\n    }\n    pointAt(ratio) {\n        return this.line.pointAt(ratio);\n    }\n    pointAtLength(length) {\n        return this.line.pointAtLength(length);\n    }\n    tangentAt(ratio) {\n        return this.line.tangentAt(ratio);\n    }\n    tangentAtLength(length) {\n        return this.line.tangentAtLength(length);\n    }\n    isDifferentiable() {\n        if (this.previousSegment == null) {\n            return false;\n        }\n        return !this.start.equals(this.end);\n    }\n    clone() {\n        return new LineTo(this.end);\n    }\n    scale(sx, sy, origin) {\n        this.end.scale(sx, sy, origin);\n        return this;\n    }\n    rotate(angle, origin) {\n        this.end.rotate(angle, origin);\n        return this;\n    }\n    translate(tx, ty) {\n        if (typeof tx === 'number') {\n            this.end.translate(tx, ty);\n        }\n        else {\n            this.end.translate(tx);\n        }\n        return this;\n    }\n    equals(s) {\n        return (this.type === s.type &&\n            this.start.equals(s.start) &&\n            this.end.equals(s.end));\n    }\n    toJSON() {\n        return {\n            type: this.type,\n            start: this.start.toJSON(),\n            end: this.end.toJSON(),\n        };\n    }\n    serialize() {\n        const end = this.end;\n        return `${this.type} ${end.x} ${end.y}`;\n    }\n}\n(function (LineTo) {\n    function create(...args) {\n        const len = args.length;\n        const arg0 = args[0];\n        // line provided\n        if (Line.isLine(arg0)) {\n            return new LineTo(arg0);\n        }\n        // points provided\n        if (Point.isPointLike(arg0)) {\n            if (len === 1) {\n                return new LineTo(arg0);\n            }\n            // poly-line segment\n            return args.map((arg) => new LineTo(arg));\n        }\n        // coordinates provided\n        if (len === 2) {\n            return new LineTo(+args[0], +args[1]);\n        }\n        // poly-line segment\n        const segments = [];\n        for (let i = 0; i < len; i += 2) {\n            const x = +args[i];\n            const y = +args[i + 1];\n            segments.push(new LineTo(x, y));\n        }\n        return segments;\n    }\n    LineTo.create = create;\n})(LineTo || (LineTo = {}));\n//# sourceMappingURL=lineto.js.map","import { Line } from '../line';\nimport { LineTo } from './lineto';\nimport { Segment } from './segment';\nexport class Close extends Segment {\n    get end() {\n        if (!this.subpathStartSegment) {\n            throw new Error('Missing subpath start segment. (This segment needs a subpath ' +\n                'start segment (e.g. MoveTo), or segment has not yet been added' +\n                ' to a path.)');\n        }\n        return this.subpathStartSegment.end;\n    }\n    get type() {\n        return 'Z';\n    }\n    get line() {\n        return new Line(this.start, this.end);\n    }\n    bbox() {\n        return this.line.bbox();\n    }\n    closestPoint(p) {\n        return this.line.closestPoint(p);\n    }\n    closestPointLength(p) {\n        return this.line.closestPointLength(p);\n    }\n    closestPointNormalizedLength(p) {\n        return this.line.closestPointNormalizedLength(p);\n    }\n    closestPointTangent(p) {\n        return this.line.closestPointTangent(p);\n    }\n    length() {\n        return this.line.length();\n    }\n    divideAt(ratio) {\n        const divided = this.line.divideAt(ratio);\n        return [\n            // do not actually cut into the segment, first divided part can stay as Z\n            divided[1].isDifferentiable() ? new LineTo(divided[0]) : this.clone(),\n            new LineTo(divided[1]),\n        ];\n    }\n    divideAtLength(length) {\n        const divided = this.line.divideAtLength(length);\n        return [\n            divided[1].isDifferentiable() ? new LineTo(divided[0]) : this.clone(),\n            new LineTo(divided[1]),\n        ];\n    }\n    getSubdivisions() {\n        return [];\n    }\n    pointAt(ratio) {\n        return this.line.pointAt(ratio);\n    }\n    pointAtLength(length) {\n        return this.line.pointAtLength(length);\n    }\n    tangentAt(ratio) {\n        return this.line.tangentAt(ratio);\n    }\n    tangentAtLength(length) {\n        return this.line.tangentAtLength(length);\n    }\n    isDifferentiable() {\n        if (!this.previousSegment || !this.subpathStartSegment) {\n            return false;\n        }\n        return !this.start.equals(this.end);\n    }\n    scale() {\n        return this;\n    }\n    rotate() {\n        return this;\n    }\n    translate() {\n        return this;\n    }\n    equals(s) {\n        return (this.type === s.type &&\n            this.start.equals(s.start) &&\n            this.end.equals(s.end));\n    }\n    clone() {\n        return new Close();\n    }\n    toJSON() {\n        return {\n            type: this.type,\n            start: this.start.toJSON(),\n            end: this.end.toJSON(),\n        };\n    }\n    serialize() {\n        return this.type;\n    }\n}\n(function (Close) {\n    function create() {\n        return new Close();\n    }\n    Close.create = create;\n})(Close || (Close = {}));\n//# sourceMappingURL=close.js.map","import { Line } from '../line';\nimport { Curve } from '../curve';\nimport { Point } from '../point';\nimport { LineTo } from './lineto';\nimport { Segment } from './segment';\nexport class MoveTo extends Segment {\n    constructor(x, y) {\n        super();\n        this.isVisible = false;\n        this.isSubpathStart = true;\n        if (Line.isLine(x) || Curve.isCurve(x)) {\n            this.endPoint = x.end.clone().round(2);\n        }\n        else {\n            this.endPoint = Point.create(x, y).round(2);\n        }\n    }\n    get start() {\n        throw new Error('Illegal access. Moveto segments should not need a start property.');\n    }\n    get type() {\n        return 'M';\n    }\n    bbox() {\n        return null;\n    }\n    closestPoint() {\n        return this.end.clone();\n    }\n    closestPointLength() {\n        return 0;\n    }\n    closestPointNormalizedLength() {\n        return 0;\n    }\n    closestPointT() {\n        return 1;\n    }\n    closestPointTangent() {\n        return null;\n    }\n    length() {\n        return 0;\n    }\n    lengthAtT() {\n        return 0;\n    }\n    divideAt() {\n        return [this.clone(), this.clone()];\n    }\n    divideAtLength() {\n        return [this.clone(), this.clone()];\n    }\n    getSubdivisions() {\n        return [];\n    }\n    pointAt() {\n        return this.end.clone();\n    }\n    pointAtLength() {\n        return this.end.clone();\n    }\n    pointAtT() {\n        return this.end.clone();\n    }\n    tangentAt() {\n        return null;\n    }\n    tangentAtLength() {\n        return null;\n    }\n    tangentAtT() {\n        return null;\n    }\n    isDifferentiable() {\n        return false;\n    }\n    scale(sx, sy, origin) {\n        this.end.scale(sx, sy, origin);\n        return this;\n    }\n    rotate(angle, origin) {\n        this.end.rotate(angle, origin);\n        return this;\n    }\n    translate(tx, ty) {\n        if (typeof tx === 'number') {\n            this.end.translate(tx, ty);\n        }\n        else {\n            this.end.translate(tx);\n        }\n        return this;\n    }\n    clone() {\n        return new MoveTo(this.end);\n    }\n    equals(s) {\n        return this.type === s.type && this.end.equals(s.end);\n    }\n    toJSON() {\n        return {\n            type: this.type,\n            end: this.end.toJSON(),\n        };\n    }\n    serialize() {\n        const end = this.end;\n        return `${this.type} ${end.x} ${end.y}`;\n    }\n}\n(function (MoveTo) {\n    function create(...args) {\n        const len = args.length;\n        const arg0 = args[0];\n        // line provided\n        if (Line.isLine(arg0)) {\n            return new MoveTo(arg0);\n        }\n        // curve provided\n        if (Curve.isCurve(arg0)) {\n            return new MoveTo(arg0);\n        }\n        // points provided\n        if (Point.isPointLike(arg0)) {\n            if (len === 1) {\n                return new MoveTo(arg0);\n            }\n            // this is a moveto-with-subsequent-poly-line segment\n            const segments = [];\n            // points come one by one\n            for (let i = 0; i < len; i += 1) {\n                if (i === 0) {\n                    segments.push(new MoveTo(args[i]));\n                }\n                else {\n                    segments.push(new LineTo(args[i]));\n                }\n            }\n            return segments;\n        }\n        // coordinates provided\n        if (len === 2) {\n            return new MoveTo(+args[0], +args[1]);\n        }\n        // this is a moveto-with-subsequent-poly-line segment\n        const segments = [];\n        for (let i = 0; i < len; i += 2) {\n            const x = +args[i];\n            const y = +args[i + 1];\n            if (i === 0) {\n                segments.push(new MoveTo(x, y));\n            }\n            else {\n                segments.push(new LineTo(x, y));\n            }\n        }\n        return segments;\n    }\n    MoveTo.create = create;\n})(MoveTo || (MoveTo = {}));\n//# sourceMappingURL=moveto.js.map","import { Curve } from '../curve';\nimport { Point } from '../point';\nimport { Segment } from './segment';\nexport class CurveTo extends Segment {\n    constructor(arg0, arg1, arg2, arg3, arg4, arg5) {\n        super();\n        if (Curve.isCurve(arg0)) {\n            this.controlPoint1 = arg0.controlPoint1.clone().round(2);\n            this.controlPoint2 = arg0.controlPoint2.clone().round(2);\n            this.endPoint = arg0.end.clone().round(2);\n        }\n        else if (typeof arg0 === 'number') {\n            this.controlPoint1 = new Point(arg0, arg1).round(2);\n            this.controlPoint2 = new Point(arg2, arg3).round(2);\n            this.endPoint = new Point(arg4, arg5).round(2);\n        }\n        else {\n            this.controlPoint1 = Point.create(arg0).round(2);\n            this.controlPoint2 = Point.create(arg1).round(2);\n            this.endPoint = Point.create(arg2).round(2);\n        }\n    }\n    get type() {\n        return 'C';\n    }\n    get curve() {\n        return new Curve(this.start, this.controlPoint1, this.controlPoint2, this.end);\n    }\n    bbox() {\n        return this.curve.bbox();\n    }\n    closestPoint(p) {\n        return this.curve.closestPoint(p);\n    }\n    closestPointLength(p) {\n        return this.curve.closestPointLength(p);\n    }\n    closestPointNormalizedLength(p) {\n        return this.curve.closestPointNormalizedLength(p);\n    }\n    closestPointTangent(p) {\n        return this.curve.closestPointTangent(p);\n    }\n    length() {\n        return this.curve.length();\n    }\n    divideAt(ratio, options = {}) {\n        // TODO: fix options\n        const divided = this.curve.divideAt(ratio, options);\n        return [new CurveTo(divided[0]), new CurveTo(divided[1])];\n    }\n    divideAtLength(length, options = {}) {\n        // TODO: fix options\n        const divided = this.curve.divideAtLength(length, options);\n        return [new CurveTo(divided[0]), new CurveTo(divided[1])];\n    }\n    divideAtT(t) {\n        const divided = this.curve.divideAtT(t);\n        return [new CurveTo(divided[0]), new CurveTo(divided[1])];\n    }\n    getSubdivisions() {\n        return [];\n    }\n    pointAt(ratio) {\n        return this.curve.pointAt(ratio);\n    }\n    pointAtLength(length) {\n        return this.curve.pointAtLength(length);\n    }\n    tangentAt(ratio) {\n        return this.curve.tangentAt(ratio);\n    }\n    tangentAtLength(length) {\n        return this.curve.tangentAtLength(length);\n    }\n    isDifferentiable() {\n        if (!this.previousSegment) {\n            return false;\n        }\n        const start = this.start;\n        const control1 = this.controlPoint1;\n        const control2 = this.controlPoint2;\n        const end = this.end;\n        return !(start.equals(control1) &&\n            control1.equals(control2) &&\n            control2.equals(end));\n    }\n    scale(sx, sy, origin) {\n        this.controlPoint1.scale(sx, sy, origin);\n        this.controlPoint2.scale(sx, sy, origin);\n        this.end.scale(sx, sy, origin);\n        return this;\n    }\n    rotate(angle, origin) {\n        this.controlPoint1.rotate(angle, origin);\n        this.controlPoint2.rotate(angle, origin);\n        this.end.rotate(angle, origin);\n        return this;\n    }\n    translate(tx, ty) {\n        if (typeof tx === 'number') {\n            this.controlPoint1.translate(tx, ty);\n            this.controlPoint2.translate(tx, ty);\n            this.end.translate(tx, ty);\n        }\n        else {\n            this.controlPoint1.translate(tx);\n            this.controlPoint2.translate(tx);\n            this.end.translate(tx);\n        }\n        return this;\n    }\n    equals(s) {\n        return (this.start.equals(s.start) &&\n            this.end.equals(s.end) &&\n            this.controlPoint1.equals(s.controlPoint1) &&\n            this.controlPoint2.equals(s.controlPoint2));\n    }\n    clone() {\n        return new CurveTo(this.controlPoint1, this.controlPoint2, this.end);\n    }\n    toJSON() {\n        return {\n            type: this.type,\n            start: this.start.toJSON(),\n            controlPoint1: this.controlPoint1.toJSON(),\n            controlPoint2: this.controlPoint2.toJSON(),\n            end: this.end.toJSON(),\n        };\n    }\n    serialize() {\n        const c1 = this.controlPoint1;\n        const c2 = this.controlPoint2;\n        const end = this.end;\n        return [this.type, c1.x, c1.y, c2.x, c2.y, end.x, end.y].join(' ');\n    }\n}\n(function (CurveTo) {\n    function create(...args) {\n        const len = args.length;\n        const arg0 = args[0];\n        // curve provided\n        if (Curve.isCurve(arg0)) {\n            return new CurveTo(arg0);\n        }\n        // points provided\n        if (Point.isPointLike(arg0)) {\n            if (len === 3) {\n                return new CurveTo(args[0], args[1], args[2]);\n            }\n            // this is a poly-bezier segment\n            const segments = [];\n            for (let i = 0; i < len; i += 3) {\n                segments.push(new CurveTo(args[i], args[i + 1], args[i + 2]));\n            }\n            return segments;\n        }\n        // coordinates provided\n        if (len === 6) {\n            return new CurveTo(args[0], args[1], args[2], args[3], args[4], args[5]);\n        }\n        // this is a poly-bezier segment\n        const segments = [];\n        for (let i = 0; i < len; i += 6) {\n            segments.push(new CurveTo(args[i], args[i + 1], args[i + 2], args[i + 3], args[i + 4], args[i + 5]));\n        }\n        return segments;\n    }\n    CurveTo.create = create;\n})(CurveTo || (CurveTo = {}));\n//# sourceMappingURL=curveto.js.map","import { GeometryUtil } from '../util';\nfunction rotate(x, y, rad) {\n    return {\n        x: x * Math.cos(rad) - y * Math.sin(rad),\n        y: x * Math.sin(rad) + y * Math.cos(rad),\n    };\n}\nfunction q2c(x1, y1, ax, ay, x2, y2) {\n    const v13 = 1 / 3;\n    const v23 = 2 / 3;\n    return [\n        v13 * x1 + v23 * ax,\n        v13 * y1 + v23 * ay,\n        v13 * x2 + v23 * ax,\n        v13 * y2 + v23 * ay,\n        x2,\n        y2,\n    ];\n}\nfunction a2c(x1, y1, rx, ry, angle, largeArcFlag, sweepFlag, x2, y2, recursive) {\n    // for more information of where this math came from visit:\n    // http://www.w3.org/TR/SVG11/implnote.html#ArcImplementationNotes\n    const v120 = (Math.PI * 120) / 180;\n    const rad = (Math.PI / 180) * (+angle || 0);\n    let res = [];\n    let xy;\n    let f1;\n    let f2;\n    let cx;\n    let cy;\n    if (!recursive) {\n        xy = rotate(x1, y1, -rad);\n        x1 = xy.x; // eslint-disable-line\n        y1 = xy.y; // eslint-disable-line\n        xy = rotate(x2, y2, -rad);\n        x2 = xy.x; // eslint-disable-line\n        y2 = xy.y; // eslint-disable-line\n        const x = (x1 - x2) / 2;\n        const y = (y1 - y2) / 2;\n        let h = (x * x) / (rx * rx) + (y * y) / (ry * ry);\n        if (h > 1) {\n            h = Math.sqrt(h);\n            rx = h * rx; // eslint-disable-line\n            ry = h * ry; // eslint-disable-line\n        }\n        const rx2 = rx * rx;\n        const ry2 = ry * ry;\n        const k = (largeArcFlag === sweepFlag ? -1 : 1) *\n            Math.sqrt(Math.abs((rx2 * ry2 - rx2 * y * y - ry2 * x * x) / (rx2 * y * y + ry2 * x * x)));\n        cx = (k * rx * y) / ry + (x1 + x2) / 2;\n        cy = (k * -ry * x) / rx + (y1 + y2) / 2;\n        f1 = Math.asin((y1 - cy) / ry);\n        f2 = Math.asin((y2 - cy) / ry);\n        f1 = x1 < cx ? Math.PI - f1 : f1;\n        f2 = x2 < cx ? Math.PI - f2 : f2;\n        if (f1 < 0) {\n            f1 = Math.PI * 2 + f1;\n        }\n        if (f2 < 0) {\n            f2 = Math.PI * 2 + f2;\n        }\n        if (sweepFlag && f1 > f2) {\n            f1 -= Math.PI * 2;\n        }\n        if (!sweepFlag && f2 > f1) {\n            f2 -= Math.PI * 2;\n        }\n    }\n    else {\n        f1 = recursive[0];\n        f2 = recursive[1];\n        cx = recursive[2];\n        cy = recursive[3];\n    }\n    let df = f2 - f1;\n    if (Math.abs(df) > v120) {\n        const f2old = f2;\n        const x2old = x2;\n        const y2old = y2;\n        f2 = f1 + v120 * (sweepFlag && f2 > f1 ? 1 : -1);\n        x2 = cx + rx * Math.cos(f2); // eslint-disable-line\n        y2 = cy + ry * Math.sin(f2); // eslint-disable-line\n        res = a2c(x2, y2, rx, ry, angle, 0, sweepFlag, x2old, y2old, [\n            f2,\n            f2old,\n            cx,\n            cy,\n        ]);\n    }\n    df = f2 - f1;\n    const c1 = Math.cos(f1);\n    const s1 = Math.sin(f1);\n    const c2 = Math.cos(f2);\n    const s2 = Math.sin(f2);\n    const t = Math.tan(df / 4);\n    const hx = (4 / 3) * (rx * t);\n    const hy = (4 / 3) * (ry * t);\n    const m1 = [x1, y1];\n    const m2 = [x1 + hx * s1, y1 - hy * c1];\n    const m3 = [x2 + hx * s2, y2 - hy * c2];\n    const m4 = [x2, y2];\n    m2[0] = 2 * m1[0] - m2[0];\n    m2[1] = 2 * m1[1] - m2[1];\n    if (recursive) {\n        return [m2, m3, m4].concat(res);\n    }\n    {\n        res = [m2, m3, m4].concat(res).join().split(',');\n        const newres = [];\n        const ii = res.length;\n        for (let i = 0; i < ii; i += 1) {\n            newres[i] =\n                i % 2\n                    ? rotate(+res[i - 1], +res[i], rad).y\n                    : rotate(+res[i], +res[i + 1], rad).x;\n        }\n        return newres;\n    }\n}\nfunction parse(pathData) {\n    if (!pathData) {\n        return null;\n    }\n    const spaces = '\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029';\n    // https://regexper.com/#%28%5Ba-z%5D%29%5B%5Cs%2C%5D*%28%28-%3F%5Cd*%5C.%3F%5C%5Cd*%28%3F%3Ae%5B%5C-%2B%5D%3F%5Cd%2B%29%3F%5B%5Cs%5D*%2C%3F%5B%5Cs%5D*%29%2B%29\n    const segmentReg = new RegExp(`([a-z])[${spaces},]*((-?\\\\d*\\\\.?\\\\d*(?:e[\\\\-+]?\\\\d+)?[${spaces}]*,?[${spaces}]*)+)`, // eslint-disable-line\n    'ig');\n    // https://regexper.com/#%28-%3F%5Cd*%5C.%3F%5Cd*%28%3F%3Ae%5B%5C-%2B%5D%3F%5Cd%2B%29%3F%29%5B%5Cs%5D*%2C%3F%5B%5Cs%5D*\n    const commandParamReg = new RegExp(\n    // eslint-disable-next-line\n    `(-?\\\\d*\\\\.?\\\\d*(?:e[\\\\-+]?\\\\d+)?)[${spaces}]*,?[${spaces}]*`, 'ig');\n    const paramsCount = {\n        a: 7,\n        c: 6,\n        h: 1,\n        l: 2,\n        m: 2,\n        q: 4,\n        s: 4,\n        t: 2,\n        v: 1,\n        z: 0,\n    };\n    const segmetns = [];\n    pathData.replace(segmentReg, (input, cmd, args) => {\n        const params = [];\n        let command = cmd.toLowerCase();\n        args.replace(commandParamReg, (a, b) => {\n            if (b) {\n                params.push(+b);\n            }\n            return a;\n        });\n        if (command === 'm' && params.length > 2) {\n            segmetns.push([cmd, ...params.splice(0, 2)]);\n            command = 'l';\n            cmd = cmd === 'm' ? 'l' : 'L'; // eslint-disable-line\n        }\n        const count = paramsCount[command];\n        while (params.length >= count) {\n            segmetns.push([cmd, ...params.splice(0, count)]);\n            if (!count) {\n                break;\n            }\n        }\n        return input;\n    });\n    return segmetns;\n}\nfunction abs(pathString) {\n    const pathArray = parse(pathString);\n    // if invalid string, return 'M 0 0'\n    if (!pathArray || !pathArray.length) {\n        return [['M', 0, 0]];\n    }\n    let x = 0;\n    let y = 0;\n    let mx = 0;\n    let my = 0;\n    const segments = [];\n    for (let i = 0, ii = pathArray.length; i < ii; i += 1) {\n        const r = [];\n        segments.push(r);\n        const segment = pathArray[i];\n        const command = segment[0];\n        if (command !== command.toUpperCase()) {\n            r[0] = command.toUpperCase();\n            switch (r[0]) {\n                case 'A':\n                    r[1] = segment[1];\n                    r[2] = segment[2];\n                    r[3] = segment[3];\n                    r[4] = segment[4];\n                    r[5] = segment[5];\n                    r[6] = +segment[6] + x;\n                    r[7] = +segment[7] + y;\n                    break;\n                case 'V':\n                    r[1] = +segment[1] + y;\n                    break;\n                case 'H':\n                    r[1] = +segment[1] + x;\n                    break;\n                case 'M':\n                    mx = +segment[1] + x;\n                    my = +segment[2] + y;\n                    for (let j = 1, jj = segment.length; j < jj; j += 1) {\n                        r[j] = +segment[j] + (j % 2 ? x : y);\n                    }\n                    break;\n                default:\n                    for (let j = 1, jj = segment.length; j < jj; j += 1) {\n                        r[j] = +segment[j] + (j % 2 ? x : y);\n                    }\n                    break;\n            }\n        }\n        else {\n            for (let j = 0, jj = segment.length; j < jj; j += 1) {\n                r[j] = segment[j];\n            }\n        }\n        switch (r[0]) {\n            case 'Z':\n                x = +mx;\n                y = +my;\n                break;\n            case 'H':\n                x = r[1];\n                break;\n            case 'V':\n                y = r[1];\n                break;\n            case 'M':\n                mx = r[r.length - 2];\n                my = r[r.length - 1];\n                x = r[r.length - 2];\n                y = r[r.length - 1];\n                break;\n            default:\n                x = r[r.length - 2];\n                y = r[r.length - 1];\n                break;\n        }\n    }\n    return segments;\n}\nfunction normalize(path) {\n    const pathArray = abs(path);\n    const attrs = { x: 0, y: 0, bx: 0, by: 0, X: 0, Y: 0, qx: null, qy: null };\n    function processPath(path, d, pcom) {\n        let nx;\n        let ny;\n        if (!path) {\n            return ['C', d.x, d.y, d.x, d.y, d.x, d.y];\n        }\n        if (!(path[0] in { T: 1, Q: 1 })) {\n            d.qx = null;\n            d.qy = null;\n        }\n        switch (path[0]) {\n            case 'M':\n                d.X = path[1];\n                d.Y = path[2];\n                break;\n            case 'A':\n                if (parseFloat(path[1]) === 0 || parseFloat(path[2]) === 0) {\n                    // https://www.w3.org/TR/SVG/paths.html#ArcOutOfRangeParameters\n                    // \"If either rx or ry is 0, then this arc is treated as a\n                    // straight line segment (a \"lineto\") joining the endpoints.\"\n                    return ['L', path[6], path[7]];\n                }\n                return ['C'].concat(a2c.apply(0, [d.x, d.y].concat(path.slice(1))));\n            case 'S':\n                if (pcom === 'C' || pcom === 'S') {\n                    // In 'S' case we have to take into account, if the previous command is C/S.\n                    nx = d.x * 2 - d.bx; // And reflect the previous\n                    ny = d.y * 2 - d.by; // command's control point relative to the current point.\n                }\n                else {\n                    // or some else or nothing\n                    nx = d.x;\n                    ny = d.y;\n                }\n                return ['C', nx, ny].concat(path.slice(1));\n            case 'T':\n                if (pcom === 'Q' || pcom === 'T') {\n                    // In 'T' case we have to take into account, if the previous command is Q/T.\n                    d.qx = d.x * 2 - d.qx; // And make a reflection similar\n                    d.qy = d.y * 2 - d.qy; // to case 'S'.\n                }\n                else {\n                    // or something else or nothing\n                    d.qx = d.x;\n                    d.qy = d.y;\n                }\n                return ['C'].concat(q2c(d.x, d.y, d.qx, d.qy, path[1], path[2]));\n            case 'Q':\n                d.qx = path[1];\n                d.qy = path[2];\n                return ['C'].concat(q2c(d.x, d.y, path[1], path[2], path[3], path[4]));\n            case 'H':\n                return ['L'].concat(path[1], d.y);\n            case 'V':\n                return ['L'].concat(d.x, path[1]);\n            case 'L':\n                break;\n            case 'Z':\n                break;\n            default:\n                break;\n        }\n        return path;\n    }\n    function fixArc(pp, i) {\n        if (pp[i].length > 7) {\n            pp[i].shift();\n            const pi = pp[i];\n            while (pi.length) {\n                // if created multiple 'C's, their original seg is saved\n                commands[i] = 'A';\n                i += 1; // eslint-disable-line\n                pp.splice(i, 0, ['C'].concat(pi.splice(0, 6)));\n            }\n            pp.splice(i, 1);\n            ii = pathArray.length;\n        }\n    }\n    const commands = []; // path commands of original path p\n    let prevCommand = ''; // holder for previous path command of original path\n    let ii = pathArray.length;\n    for (let i = 0; i < ii; i += 1) {\n        let command = ''; // temporary holder for original path command\n        if (pathArray[i]) {\n            command = pathArray[i][0]; // save current path command\n        }\n        if (command !== 'C') {\n            // C is not saved yet, because it may be result of conversion\n            commands[i] = command; // Save current path command\n            if (i > 0) {\n                prevCommand = commands[i - 1]; // Get previous path command pcom\n            }\n        }\n        // Previous path command is inputted to processPath\n        pathArray[i] = processPath(pathArray[i], attrs, prevCommand);\n        if (commands[i] !== 'A' && command === 'C') {\n            commands[i] = 'C'; // 'A' is the only command\n        }\n        // which may produce multiple 'C's\n        // so we have to make sure that 'C' is also 'C' in original path\n        fixArc(pathArray, i); // fixArc adds also the right amount of 'A's to pcoms\n        const seg = pathArray[i];\n        const seglen = seg.length;\n        attrs.x = seg[seglen - 2];\n        attrs.y = seg[seglen - 1];\n        attrs.bx = parseFloat(seg[seglen - 4]) || attrs.x;\n        attrs.by = parseFloat(seg[seglen - 3]) || attrs.y;\n    }\n    // make sure normalized path data string starts with an M segment\n    if (!pathArray[0][0] || pathArray[0][0] !== 'M') {\n        pathArray.unshift(['M', 0, 0]);\n    }\n    return pathArray;\n}\n/**\n * Converts provided SVG path data string into a normalized path data string.\n *\n * The normalization uses a restricted subset of path commands; all segments\n * are translated into lineto, curveto, moveto, and closepath segments.\n *\n * Relative path commands are changed into their absolute counterparts,\n * and chaining of coordinates is disallowed.\n *\n * The function will always return a valid path data string; if an input\n * string cannot be normalized, 'M 0 0' is returned.\n */\nexport function normalizePathData(pathData) {\n    return normalize(pathData)\n        .map((segment) => segment.map((item) => typeof item === 'string' ? item : GeometryUtil.round(item, 2)))\n        .join(',')\n        .split(',')\n        .join(' ');\n}\n//# sourceMappingURL=normalize.js.map","import { GeometryUtil } from '../util';\nimport * as PathUtil from './util';\nimport { Line } from '../line';\nimport { Point } from '../point';\nimport { Curve } from '../curve';\nimport { Polyline } from '../polyline';\nimport { Rectangle } from '../rectangle';\nimport { Geometry } from '../geometry';\nimport { Close } from './close';\nimport { LineTo } from './lineto';\nimport { MoveTo } from './moveto';\nimport { CurveTo } from './curveto';\nimport { normalizePathData } from './normalize';\nexport class Path extends Geometry {\n    constructor(args) {\n        super();\n        this.PRECISION = 3;\n        this.segments = [];\n        if (Array.isArray(args)) {\n            if (Line.isLine(args[0]) || Curve.isCurve(args[0])) {\n                let previousObj = null;\n                const arr = args;\n                arr.forEach((o, i) => {\n                    if (i === 0) {\n                        this.appendSegment(Path.createSegment('M', o.start));\n                    }\n                    if (previousObj != null && !previousObj.end.equals(o.start)) {\n                        this.appendSegment(Path.createSegment('M', o.start));\n                    }\n                    if (Line.isLine(o)) {\n                        this.appendSegment(Path.createSegment('L', o.end));\n                    }\n                    else if (Curve.isCurve(o)) {\n                        this.appendSegment(Path.createSegment('C', o.controlPoint1, o.controlPoint2, o.end));\n                    }\n                    previousObj = o;\n                });\n            }\n            else {\n                const arr = args;\n                arr.forEach((s) => {\n                    if (s.isSegment) {\n                        this.appendSegment(s);\n                    }\n                });\n            }\n        }\n        else if (args != null) {\n            if (Line.isLine(args)) {\n                this.appendSegment(Path.createSegment('M', args.start));\n                this.appendSegment(Path.createSegment('L', args.end));\n            }\n            else if (Curve.isCurve(args)) {\n                this.appendSegment(Path.createSegment('M', args.start));\n                this.appendSegment(Path.createSegment('C', args.controlPoint1, args.controlPoint2, args.end));\n            }\n            else if (Polyline.isPolyline(args)) {\n                if (args.points && args.points.length) {\n                    args.points.forEach((point, index) => {\n                        const segment = index === 0\n                            ? Path.createSegment('M', point)\n                            : Path.createSegment('L', point);\n                        this.appendSegment(segment);\n                    });\n                }\n            }\n            else if (args.isSegment) {\n                this.appendSegment(args);\n            }\n        }\n    }\n    get start() {\n        const segments = this.segments;\n        const count = segments.length;\n        if (count === 0) {\n            return null;\n        }\n        for (let i = 0; i < count; i += 1) {\n            const segment = segments[i];\n            if (segment.isVisible) {\n                return segment.start;\n            }\n        }\n        // if no visible segment, return last segment end point\n        return segments[count - 1].end;\n    }\n    get end() {\n        const segments = this.segments;\n        const count = segments.length;\n        if (count === 0) {\n            return null;\n        }\n        for (let i = count - 1; i >= 0; i -= 1) {\n            const segment = segments[i];\n            if (segment.isVisible) {\n                return segment.end;\n            }\n        }\n        // if no visible segment, return last segment end point\n        return segments[count - 1].end;\n    }\n    moveTo(...args) {\n        return this.appendSegment(MoveTo.create.call(null, ...args));\n    }\n    lineTo(...args) {\n        return this.appendSegment(LineTo.create.call(null, ...args));\n    }\n    curveTo(...args) {\n        return this.appendSegment(CurveTo.create.call(null, ...args));\n    }\n    arcTo(rx, ry, xAxisRotation, largeArcFlag, sweepFlag, endX, endY) {\n        const start = this.end || new Point();\n        const points = typeof endX === 'number'\n            ? PathUtil.arcToCurves(start.x, start.y, rx, ry, xAxisRotation, largeArcFlag, sweepFlag, endX, endY)\n            : PathUtil.arcToCurves(start.x, start.y, rx, ry, xAxisRotation, largeArcFlag, sweepFlag, endX.x, endX.y);\n        if (points != null) {\n            for (let i = 0, ii = points.length; i < ii; i += 6) {\n                this.curveTo(points[i], points[i + 1], points[i + 2], points[i + 3], points[i + 4], points[i + 5]);\n            }\n        }\n        return this;\n    }\n    quadTo(x1, y1, x, y) {\n        const start = this.end || new Point();\n        const data = ['M', start.x, start.y];\n        if (typeof x1 === 'number') {\n            data.push('Q', x1, y1, x, y);\n        }\n        else {\n            const p = y1;\n            data.push(`Q`, x1.x, x1.y, p.x, p.y);\n        }\n        const path = Path.parse(data.join(' '));\n        this.appendSegment(path.segments.slice(1));\n        return this;\n    }\n    close() {\n        return this.appendSegment(Close.create());\n    }\n    drawPoints(points, options = {}) {\n        const raw = PathUtil.drawPoints(points, options);\n        const sub = Path.parse(raw);\n        if (sub && sub.segments) {\n            this.appendSegment(sub.segments);\n        }\n    }\n    bbox() {\n        const segments = this.segments;\n        const count = segments.length;\n        if (count === 0) {\n            return null;\n        }\n        let bbox;\n        for (let i = 0; i < count; i += 1) {\n            const segment = segments[i];\n            if (segment.isVisible) {\n                const segmentBBox = segment.bbox();\n                if (segmentBBox != null) {\n                    bbox = bbox ? bbox.union(segmentBBox) : segmentBBox;\n                }\n            }\n        }\n        if (bbox != null) {\n            return bbox;\n        }\n        // if the path has only invisible elements, return end point of last segment\n        const lastSegment = segments[count - 1];\n        return new Rectangle(lastSegment.end.x, lastSegment.end.y, 0, 0);\n    }\n    appendSegment(seg) {\n        const count = this.segments.length;\n        let previousSegment = count !== 0 ? this.segments[count - 1] : null;\n        let currentSegment;\n        const nextSegment = null;\n        if (Array.isArray(seg)) {\n            for (let i = 0, ii = seg.length; i < ii; i += 1) {\n                const segment = seg[i];\n                currentSegment = this.prepareSegment(segment, previousSegment, nextSegment);\n                this.segments.push(currentSegment);\n                previousSegment = currentSegment;\n            }\n        }\n        else if (seg != null && seg.isSegment) {\n            currentSegment = this.prepareSegment(seg, previousSegment, nextSegment);\n            this.segments.push(currentSegment);\n        }\n        return this;\n    }\n    insertSegment(index, seg) {\n        const count = this.segments.length;\n        if (index < 0) {\n            index = count + index + 1; // eslint-disable-line\n        }\n        if (index > count || index < 0) {\n            throw new Error('Index out of range.');\n        }\n        let currentSegment;\n        let previousSegment = null;\n        let nextSegment = null;\n        if (count !== 0) {\n            if (index >= 1) {\n                previousSegment = this.segments[index - 1];\n                nextSegment = previousSegment.nextSegment;\n            }\n            else {\n                previousSegment = null;\n                nextSegment = this.segments[0];\n            }\n        }\n        if (!Array.isArray(seg)) {\n            currentSegment = this.prepareSegment(seg, previousSegment, nextSegment);\n            this.segments.splice(index, 0, currentSegment);\n        }\n        else {\n            for (let i = 0, ii = seg.length; i < ii; i += 1) {\n                const segment = seg[i];\n                currentSegment = this.prepareSegment(segment, previousSegment, nextSegment);\n                this.segments.splice(index + i, 0, currentSegment);\n                previousSegment = currentSegment;\n            }\n        }\n        return this;\n    }\n    removeSegment(index) {\n        const idx = this.fixIndex(index);\n        const removedSegment = this.segments.splice(idx, 1)[0];\n        const previousSegment = removedSegment.previousSegment;\n        const nextSegment = removedSegment.nextSegment;\n        // link the previous and next segments together (if present)\n        if (previousSegment) {\n            previousSegment.nextSegment = nextSegment;\n        }\n        if (nextSegment) {\n            nextSegment.previousSegment = previousSegment;\n        }\n        if (removedSegment.isSubpathStart && nextSegment) {\n            this.updateSubpathStartSegment(nextSegment);\n        }\n        return removedSegment;\n    }\n    replaceSegment(index, seg) {\n        const idx = this.fixIndex(index);\n        let currentSegment;\n        const replacedSegment = this.segments[idx];\n        let previousSegment = replacedSegment.previousSegment;\n        const nextSegment = replacedSegment.nextSegment;\n        let updateSubpathStart = replacedSegment.isSubpathStart;\n        if (!Array.isArray(seg)) {\n            currentSegment = this.prepareSegment(seg, previousSegment, nextSegment);\n            this.segments.splice(idx, 1, currentSegment);\n            if (updateSubpathStart && currentSegment.isSubpathStart) {\n                // already updated by `prepareSegment`\n                updateSubpathStart = false;\n            }\n        }\n        else {\n            this.segments.splice(index, 1);\n            for (let i = 0, ii = seg.length; i < ii; i += 1) {\n                const segment = seg[i];\n                currentSegment = this.prepareSegment(segment, previousSegment, nextSegment);\n                this.segments.splice(index + i, 0, currentSegment);\n                previousSegment = currentSegment;\n                if (updateSubpathStart && currentSegment.isSubpathStart) {\n                    updateSubpathStart = false;\n                }\n            }\n        }\n        if (updateSubpathStart && nextSegment) {\n            this.updateSubpathStartSegment(nextSegment);\n        }\n    }\n    getSegment(index) {\n        const idx = this.fixIndex(index);\n        return this.segments[idx];\n    }\n    fixIndex(index) {\n        const length = this.segments.length;\n        if (length === 0) {\n            throw new Error('Path has no segments.');\n        }\n        let i = index;\n        while (i < 0) {\n            i = length + i;\n        }\n        if (i >= length || i < 0) {\n            throw new Error('Index out of range.');\n        }\n        return i;\n    }\n    segmentAt(ratio, options = {}) {\n        const index = this.segmentIndexAt(ratio, options);\n        if (!index) {\n            return null;\n        }\n        return this.getSegment(index);\n    }\n    segmentAtLength(length, options = {}) {\n        const index = this.segmentIndexAtLength(length, options);\n        if (!index)\n            return null;\n        return this.getSegment(index);\n    }\n    segmentIndexAt(ratio, options = {}) {\n        if (this.segments.length === 0) {\n            return null;\n        }\n        const rate = GeometryUtil.clamp(ratio, 0, 1);\n        const opt = this.getOptions(options);\n        const len = this.length(opt);\n        const length = len * rate;\n        return this.segmentIndexAtLength(length, opt);\n    }\n    segmentIndexAtLength(length, options = {}) {\n        const count = this.segments.length;\n        if (count === 0) {\n            return null;\n        }\n        let fromStart = true;\n        if (length < 0) {\n            fromStart = false;\n            length = -length; // eslint-disable-line\n        }\n        const precision = this.getPrecision(options);\n        const segmentSubdivisions = this.getSubdivisions(options);\n        let memo = 0;\n        let lastVisibleIndex = null;\n        for (let i = 0; i < count; i += 1) {\n            const index = fromStart ? i : count - 1 - i;\n            const segment = this.segments[index];\n            const subdivisions = segmentSubdivisions[index];\n            const len = segment.length({ precision, subdivisions });\n            if (segment.isVisible) {\n                if (length <= memo + len) {\n                    return index;\n                }\n                lastVisibleIndex = index;\n            }\n            memo += len;\n        }\n        // If length requested is higher than the length of the path, return\n        // last visible segment index. If no visible segment, return null.\n        return lastVisibleIndex;\n    }\n    getSegmentSubdivisions(options = {}) {\n        const precision = this.getPrecision(options);\n        const segmentSubdivisions = [];\n        for (let i = 0, ii = this.segments.length; i < ii; i += 1) {\n            const segment = this.segments[i];\n            const subdivisions = segment.getSubdivisions({ precision });\n            segmentSubdivisions.push(subdivisions);\n        }\n        return segmentSubdivisions;\n    }\n    updateSubpathStartSegment(segment) {\n        let previous = segment.previousSegment;\n        let current = segment;\n        while (current && !current.isSubpathStart) {\n            // assign previous segment's subpath start segment to this segment\n            if (previous != null) {\n                current.subpathStartSegment = previous.subpathStartSegment;\n            }\n            else {\n                current.subpathStartSegment = null;\n            }\n            previous = current;\n            current = current.nextSegment;\n        }\n    }\n    prepareSegment(segment, previousSegment, nextSegment) {\n        segment.previousSegment = previousSegment;\n        segment.nextSegment = nextSegment;\n        if (previousSegment != null) {\n            previousSegment.nextSegment = segment;\n        }\n        if (nextSegment != null) {\n            nextSegment.previousSegment = segment;\n        }\n        let updateSubpathStart = segment;\n        if (segment.isSubpathStart) {\n            // move to\n            segment.subpathStartSegment = segment;\n            updateSubpathStart = nextSegment;\n        }\n        // assign previous segment's subpath start (or self if it is a subpath start) to subsequent segments\n        if (updateSubpathStart != null) {\n            this.updateSubpathStartSegment(updateSubpathStart);\n        }\n        return segment;\n    }\n    closestPoint(p, options = {}) {\n        const t = this.closestPointT(p, options);\n        if (!t) {\n            return null;\n        }\n        return this.pointAtT(t);\n    }\n    closestPointLength(p, options = {}) {\n        const opts = this.getOptions(options);\n        const t = this.closestPointT(p, opts);\n        if (!t) {\n            return 0;\n        }\n        return this.lengthAtT(t, opts);\n    }\n    closestPointNormalizedLength(p, options = {}) {\n        const opts = this.getOptions(options);\n        const cpLength = this.closestPointLength(p, opts);\n        if (cpLength === 0) {\n            return 0;\n        }\n        const length = this.length(opts);\n        if (length === 0) {\n            return 0;\n        }\n        return cpLength / length;\n    }\n    closestPointT(p, options = {}) {\n        if (this.segments.length === 0) {\n            return null;\n        }\n        const precision = this.getPrecision(options);\n        const segmentSubdivisions = this.getSubdivisions(options);\n        let closestPointT;\n        let minSquaredDistance = Infinity;\n        for (let i = 0, ii = this.segments.length; i < ii; i += 1) {\n            const segment = this.segments[i];\n            const subdivisions = segmentSubdivisions[i];\n            if (segment.isVisible) {\n                const segmentClosestPointT = segment.closestPointT(p, {\n                    precision,\n                    subdivisions,\n                });\n                const segmentClosestPoint = segment.pointAtT(segmentClosestPointT);\n                const squaredDistance = GeometryUtil.squaredLength(segmentClosestPoint, p);\n                if (squaredDistance < minSquaredDistance) {\n                    closestPointT = { segmentIndex: i, value: segmentClosestPointT };\n                    minSquaredDistance = squaredDistance;\n                }\n            }\n        }\n        if (closestPointT) {\n            return closestPointT;\n        }\n        return { segmentIndex: this.segments.length - 1, value: 1 };\n    }\n    closestPointTangent(p, options = {}) {\n        if (this.segments.length === 0) {\n            return null;\n        }\n        const precision = this.getPrecision(options);\n        const segmentSubdivisions = this.getSubdivisions(options);\n        let closestPointTangent;\n        let minSquaredDistance = Infinity;\n        for (let i = 0, ii = this.segments.length; i < ii; i += 1) {\n            const segment = this.segments[i];\n            const subdivisions = segmentSubdivisions[i];\n            if (segment.isDifferentiable()) {\n                const segmentClosestPointT = segment.closestPointT(p, {\n                    precision,\n                    subdivisions,\n                });\n                const segmentClosestPoint = segment.pointAtT(segmentClosestPointT);\n                const squaredDistance = GeometryUtil.squaredLength(segmentClosestPoint, p);\n                if (squaredDistance < minSquaredDistance) {\n                    closestPointTangent = segment.tangentAtT(segmentClosestPointT);\n                    minSquaredDistance = squaredDistance;\n                }\n            }\n        }\n        if (closestPointTangent) {\n            return closestPointTangent;\n        }\n        return null;\n    }\n    containsPoint(p, options = {}) {\n        const polylines = this.toPolylines(options);\n        if (!polylines) {\n            return false;\n        }\n        let numIntersections = 0;\n        for (let i = 0, ii = polylines.length; i < ii; i += 1) {\n            const polyline = polylines[i];\n            if (polyline.containsPoint(p)) {\n                numIntersections += 1;\n            }\n        }\n        // returns `true` for odd numbers of intersections (even-odd algorithm)\n        return numIntersections % 2 === 1;\n    }\n    pointAt(ratio, options = {}) {\n        if (this.segments.length === 0) {\n            return null;\n        }\n        if (ratio <= 0) {\n            return this.start.clone();\n        }\n        if (ratio >= 1) {\n            return this.end.clone();\n        }\n        const opts = this.getOptions(options);\n        const pathLength = this.length(opts);\n        const length = pathLength * ratio;\n        return this.pointAtLength(length, opts);\n    }\n    pointAtLength(length, options = {}) {\n        if (this.segments.length === 0) {\n            return null;\n        }\n        if (length === 0) {\n            return this.start.clone();\n        }\n        let fromStart = true;\n        if (length < 0) {\n            fromStart = false;\n            length = -length; // eslint-disable-line\n        }\n        const precision = this.getPrecision(options);\n        const segmentSubdivisions = this.getSubdivisions(options);\n        let lastVisibleSegment;\n        let memo = 0;\n        for (let i = 0, ii = this.segments.length; i < ii; i += 1) {\n            const index = fromStart ? i : ii - 1 - i;\n            const segment = this.segments[index];\n            const subdivisions = segmentSubdivisions[index];\n            const d = segment.length({\n                precision,\n                subdivisions,\n            });\n            if (segment.isVisible) {\n                if (length <= memo + d) {\n                    return segment.pointAtLength((fromStart ? 1 : -1) * (length - memo), {\n                        precision,\n                        subdivisions,\n                    });\n                }\n                lastVisibleSegment = segment;\n            }\n            memo += d;\n        }\n        // if length requested is higher than the length of the path,\n        // return last visible segment endpoint\n        if (lastVisibleSegment) {\n            return fromStart ? lastVisibleSegment.end : lastVisibleSegment.start;\n        }\n        // if no visible segment, return last segment end point\n        const lastSegment = this.segments[this.segments.length - 1];\n        return lastSegment.end.clone();\n    }\n    pointAtT(t) {\n        const segments = this.segments;\n        const numSegments = segments.length;\n        if (numSegments === 0)\n            return null; // if segments is an empty array\n        const segmentIndex = t.segmentIndex;\n        if (segmentIndex < 0)\n            return segments[0].pointAtT(0);\n        if (segmentIndex >= numSegments) {\n            return segments[numSegments - 1].pointAtT(1);\n        }\n        const tValue = GeometryUtil.clamp(t.value, 0, 1);\n        return segments[segmentIndex].pointAtT(tValue);\n    }\n    divideAt(ratio, options = {}) {\n        if (this.segments.length === 0) {\n            return null;\n        }\n        const rate = GeometryUtil.clamp(ratio, 0, 1);\n        const opts = this.getOptions(options);\n        const len = this.length(opts);\n        const length = len * rate;\n        return this.divideAtLength(length, opts);\n    }\n    divideAtLength(length, options = {}) {\n        if (this.segments.length === 0) {\n            return null;\n        }\n        let fromStart = true;\n        if (length < 0) {\n            fromStart = false;\n            length = -length; // eslint-disable-line\n        }\n        const precision = this.getPrecision(options);\n        const segmentSubdivisions = this.getSubdivisions(options);\n        let memo = 0;\n        let divided;\n        let dividedSegmentIndex;\n        let lastValidSegment;\n        let lastValidSegmentIndex;\n        let t;\n        for (let i = 0, ii = this.segments.length; i < ii; i += 1) {\n            const index = fromStart ? i : ii - 1 - i;\n            const segment = this.getSegment(index);\n            const subdivisions = segmentSubdivisions[index];\n            const opts = { precision, subdivisions };\n            const len = segment.length(opts);\n            if (segment.isDifferentiable()) {\n                lastValidSegment = segment;\n                lastValidSegmentIndex = index;\n                if (length <= memo + len) {\n                    dividedSegmentIndex = index;\n                    divided = segment.divideAtLength((fromStart ? 1 : -1) * (length - memo), opts);\n                    break;\n                }\n            }\n            memo += len;\n        }\n        if (!lastValidSegment) {\n            return null;\n        }\n        if (!divided) {\n            dividedSegmentIndex = lastValidSegmentIndex;\n            t = fromStart ? 1 : 0;\n            divided = lastValidSegment.divideAtT(t);\n        }\n        // create a copy of this path and replace the identified segment with its two divided parts:\n        const pathCopy = this.clone();\n        const index = dividedSegmentIndex;\n        pathCopy.replaceSegment(index, divided);\n        const divisionStartIndex = index;\n        let divisionMidIndex = index + 1;\n        let divisionEndIndex = index + 2;\n        // do not insert the part if it looks like a point\n        if (!divided[0].isDifferentiable()) {\n            pathCopy.removeSegment(divisionStartIndex);\n            divisionMidIndex -= 1;\n            divisionEndIndex -= 1;\n        }\n        // insert a Moveto segment to ensure secondPath will be valid:\n        const movetoEnd = pathCopy.getSegment(divisionMidIndex).start;\n        pathCopy.insertSegment(divisionMidIndex, Path.createSegment('M', movetoEnd));\n        divisionEndIndex += 1;\n        // do not insert the part if it looks like a point\n        if (!divided[1].isDifferentiable()) {\n            pathCopy.removeSegment(divisionEndIndex - 1);\n            divisionEndIndex -= 1;\n        }\n        // ensure that Closepath segments in secondPath will be assigned correct subpathStartSegment:\n        const secondPathSegmentIndexConversion = divisionEndIndex - divisionStartIndex - 1;\n        for (let i = divisionEndIndex, ii = pathCopy.segments.length; i < ii; i += 1) {\n            const originalSegment = this.getSegment(i - secondPathSegmentIndexConversion);\n            const segment = pathCopy.getSegment(i);\n            if (segment.type === 'Z' &&\n                !originalSegment.subpathStartSegment.end.equals(segment.subpathStartSegment.end)) {\n                // pathCopy segment's subpathStartSegment is different from original segment's one\n                // convert this Closepath segment to a Lineto and replace it in pathCopy\n                const convertedSegment = Path.createSegment('L', originalSegment.end);\n                pathCopy.replaceSegment(i, convertedSegment);\n            }\n        }\n        // distribute pathCopy segments into two paths and return those:\n        const firstPath = new Path(pathCopy.segments.slice(0, divisionMidIndex));\n        const secondPath = new Path(pathCopy.segments.slice(divisionMidIndex));\n        return [firstPath, secondPath];\n    }\n    intersectsWithLine(line, options = {}) {\n        const polylines = this.toPolylines(options);\n        if (polylines == null) {\n            return null;\n        }\n        let intersections = null;\n        for (let i = 0, ii = polylines.length; i < ii; i += 1) {\n            const polyline = polylines[i];\n            const intersection = line.intersect(polyline);\n            if (intersection) {\n                if (intersections == null) {\n                    intersections = [];\n                }\n                if (Array.isArray(intersection)) {\n                    intersections.push(...intersection);\n                }\n                else {\n                    intersections.push(intersection);\n                }\n            }\n        }\n        return intersections;\n    }\n    isDifferentiable() {\n        for (let i = 0, ii = this.segments.length; i < ii; i += 1) {\n            const segment = this.segments[i];\n            if (segment.isDifferentiable()) {\n                return true;\n            }\n        }\n        return false;\n    }\n    isValid() {\n        const segments = this.segments;\n        const isValid = segments.length === 0 || segments[0].type === 'M';\n        return isValid;\n    }\n    length(options = {}) {\n        if (this.segments.length === 0) {\n            return 0;\n        }\n        const segmentSubdivisions = this.getSubdivisions(options);\n        let length = 0;\n        for (let i = 0, ii = this.segments.length; i < ii; i += 1) {\n            const segment = this.segments[i];\n            const subdivisions = segmentSubdivisions[i];\n            length += segment.length({ subdivisions });\n        }\n        return length;\n    }\n    lengthAtT(t, options = {}) {\n        const count = this.segments.length;\n        if (count === 0) {\n            return 0;\n        }\n        let segmentIndex = t.segmentIndex;\n        if (segmentIndex < 0) {\n            return 0;\n        }\n        let tValue = GeometryUtil.clamp(t.value, 0, 1);\n        if (segmentIndex >= count) {\n            segmentIndex = count - 1;\n            tValue = 1;\n        }\n        const precision = this.getPrecision(options);\n        const segmentSubdivisions = this.getSubdivisions(options);\n        let length = 0;\n        for (let i = 0; i < segmentIndex; i += 1) {\n            const segment = this.segments[i];\n            const subdivisions = segmentSubdivisions[i];\n            length += segment.length({ precision, subdivisions });\n        }\n        const segment = this.segments[segmentIndex];\n        const subdivisions = segmentSubdivisions[segmentIndex];\n        length += segment.lengthAtT(tValue, { precision, subdivisions });\n        return length;\n    }\n    tangentAt(ratio, options = {}) {\n        if (this.segments.length === 0) {\n            return null;\n        }\n        const rate = GeometryUtil.clamp(ratio, 0, 1);\n        const opts = this.getOptions(options);\n        const len = this.length(opts);\n        const length = len * rate;\n        return this.tangentAtLength(length, opts);\n    }\n    tangentAtLength(length, options = {}) {\n        if (this.segments.length === 0) {\n            return null;\n        }\n        let fromStart = true;\n        if (length < 0) {\n            fromStart = false;\n            length = -length; // eslint-disable-line\n        }\n        const precision = this.getPrecision(options);\n        const segmentSubdivisions = this.getSubdivisions(options);\n        let lastValidSegment;\n        let memo = 0;\n        for (let i = 0, ii = this.segments.length; i < ii; i += 1) {\n            const index = fromStart ? i : ii - 1 - i;\n            const segment = this.segments[index];\n            const subdivisions = segmentSubdivisions[index];\n            const len = segment.length({ precision, subdivisions });\n            if (segment.isDifferentiable()) {\n                if (length <= memo + len) {\n                    return segment.tangentAtLength((fromStart ? 1 : -1) * (length - memo), {\n                        precision,\n                        subdivisions,\n                    });\n                }\n                lastValidSegment = segment;\n            }\n            memo += len;\n        }\n        // if length requested is higher than the length of the path, return tangent of endpoint of last valid segment\n        if (lastValidSegment) {\n            const t = fromStart ? 1 : 0;\n            return lastValidSegment.tangentAtT(t);\n        }\n        // if no valid segment, return null\n        return null;\n    }\n    tangentAtT(t) {\n        const count = this.segments.length;\n        if (count === 0) {\n            return null;\n        }\n        const segmentIndex = t.segmentIndex;\n        if (segmentIndex < 0) {\n            return this.segments[0].tangentAtT(0);\n        }\n        if (segmentIndex >= count) {\n            return this.segments[count - 1].tangentAtT(1);\n        }\n        const tValue = GeometryUtil.clamp(t.value, 0, 1);\n        return this.segments[segmentIndex].tangentAtT(tValue);\n    }\n    getPrecision(options = {}) {\n        return options.precision == null ? this.PRECISION : options.precision;\n    }\n    getSubdivisions(options = {}) {\n        if (options.segmentSubdivisions == null) {\n            const precision = this.getPrecision(options);\n            return this.getSegmentSubdivisions({ precision });\n        }\n        return options.segmentSubdivisions;\n    }\n    getOptions(options = {}) {\n        const precision = this.getPrecision(options);\n        const segmentSubdivisions = this.getSubdivisions(options);\n        return { precision, segmentSubdivisions };\n    }\n    toPoints(options = {}) {\n        const segments = this.segments;\n        const count = segments.length;\n        if (count === 0) {\n            return null;\n        }\n        const segmentSubdivisions = this.getSubdivisions(options);\n        const points = [];\n        let partialPoints = [];\n        for (let i = 0; i < count; i += 1) {\n            const segment = segments[i];\n            if (segment.isVisible) {\n                const divisions = segmentSubdivisions[i];\n                if (divisions.length > 0) {\n                    // eslint-disable-next-line no-loop-func\n                    divisions.forEach((c) => partialPoints.push(c.start));\n                }\n                else {\n                    partialPoints.push(segment.start);\n                }\n            }\n            else if (partialPoints.length > 0) {\n                partialPoints.push(segments[i - 1].end);\n                points.push(partialPoints);\n                partialPoints = [];\n            }\n        }\n        if (partialPoints.length > 0) {\n            partialPoints.push(this.end);\n            points.push(partialPoints);\n        }\n        return points;\n    }\n    toPolylines(options = {}) {\n        const points = this.toPoints(options);\n        if (!points) {\n            return null;\n        }\n        return points.map((arr) => new Polyline(arr));\n    }\n    scale(sx, sy, origin) {\n        this.segments.forEach((s) => s.scale(sx, sy, origin));\n        return this;\n    }\n    rotate(angle, origin) {\n        this.segments.forEach((segment) => segment.rotate(angle, origin));\n        return this;\n    }\n    translate(tx, ty) {\n        if (typeof tx === 'number') {\n            this.segments.forEach((s) => s.translate(tx, ty));\n        }\n        else {\n            this.segments.forEach((s) => s.translate(tx));\n        }\n        return this;\n    }\n    clone() {\n        const path = new Path();\n        this.segments.forEach((s) => path.appendSegment(s.clone()));\n        return path;\n    }\n    equals(p) {\n        if (p == null) {\n            return false;\n        }\n        const segments = this.segments;\n        const otherSegments = p.segments;\n        const count = segments.length;\n        if (otherSegments.length !== count) {\n            return false;\n        }\n        for (let i = 0; i < count; i += 1) {\n            const a = segments[i];\n            const b = otherSegments[i];\n            if (a.type !== b.type || !a.equals(b)) {\n                return false;\n            }\n        }\n        return true;\n    }\n    toJSON() {\n        return this.segments.map((s) => s.toJSON());\n    }\n    serialize() {\n        if (!this.isValid()) {\n            throw new Error('Invalid path segments.');\n        }\n        return this.segments.map((s) => s.serialize()).join(' ');\n    }\n    toString() {\n        return this.serialize();\n    }\n}\n(function (Path) {\n    function isPath(instance) {\n        return instance != null && instance instanceof Path;\n    }\n    Path.isPath = isPath;\n})(Path || (Path = {}));\n(function (Path) {\n    function parse(pathData) {\n        if (!pathData) {\n            return new Path();\n        }\n        const path = new Path();\n        const commandRe = /(?:[a-zA-Z] *)(?:(?:-?\\d+(?:\\.\\d+)?(?:e[-+]?\\d+)? *,? *)|(?:-?\\.\\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\\d|-|\\.)/g;\n        const commands = Path.normalize(pathData).match(commandRe);\n        if (commands != null) {\n            for (let i = 0, ii = commands.length; i < ii; i += 1) {\n                const command = commands[i];\n                const argRe = /(?:[a-zA-Z])|(?:(?:-?\\d+(?:\\.\\d+)?(?:e[-+]?\\d+)?))|(?:(?:-?\\.\\d+))/g;\n                const args = command.match(argRe); // [type, coordinate1, coordinate2...]\n                if (args != null) {\n                    const type = args[0];\n                    const coords = args.slice(1).map((a) => +a);\n                    const segment = createSegment.call(null, type, ...coords);\n                    path.appendSegment(segment);\n                }\n            }\n        }\n        return path;\n    }\n    Path.parse = parse;\n    function createSegment(type, ...args) {\n        if (type === 'M') {\n            return MoveTo.create.call(null, ...args);\n        }\n        if (type === 'L') {\n            return LineTo.create.call(null, ...args);\n        }\n        if (type === 'C') {\n            return CurveTo.create.call(null, ...args);\n        }\n        if (type === 'z' || type === 'Z') {\n            return Close.create();\n        }\n        throw new Error(`Invalid path segment type \"${type}\"`);\n    }\n    Path.createSegment = createSegment;\n})(Path || (Path = {}));\n(function (Path) {\n    Path.normalize = normalizePathData;\n    Path.isValid = PathUtil.isValid;\n    Path.drawArc = PathUtil.drawArc;\n    Path.drawPoints = PathUtil.drawPoints;\n    Path.arcToCurves = PathUtil.arcToCurves;\n})(Path || (Path = {}));\n//# sourceMappingURL=path.js.map","import { StringExt, FunctionExt, Platform } from '@antv/x6-common';\nexport class Registry {\n    constructor(options) {\n        this.options = Object.assign({}, options);\n        this.data = this.options.data || {};\n        this.register = this.register.bind(this);\n        this.unregister = this.unregister.bind(this);\n    }\n    get names() {\n        return Object.keys(this.data);\n    }\n    register(name, options, force = false) {\n        if (typeof name === 'object') {\n            Object.entries(name).forEach(([key, val]) => {\n                this.register(key, val, options);\n            });\n            return;\n        }\n        if (this.exist(name) && !force && !Platform.isApplyingHMR()) {\n            this.onDuplicated(name);\n        }\n        const process = this.options.process;\n        const entity = process\n            ? FunctionExt.call(process, this, name, options)\n            : options;\n        this.data[name] = entity;\n        return entity;\n    }\n    unregister(name) {\n        const entity = name ? this.data[name] : null;\n        delete this.data[name];\n        return entity;\n    }\n    get(name) {\n        return name ? this.data[name] : null;\n    }\n    exist(name) {\n        return name ? this.data[name] != null : false;\n    }\n    onDuplicated(name) {\n        // eslint-disable-next-line no-useless-catch\n        try {\n            // race\n            if (this.options.onConflict) {\n                FunctionExt.call(this.options.onConflict, this, name);\n            }\n            throw new Error(`${StringExt.upperFirst(this.options.type)} with name '${name}' already registered.`);\n        }\n        catch (err) {\n            throw err;\n        }\n    }\n    onNotFound(name, prefix) {\n        throw new Error(this.getSpellingSuggestion(name, prefix));\n    }\n    getSpellingSuggestion(name, prefix) {\n        const suggestion = this.getSpellingSuggestionForName(name);\n        const prefixed = prefix\n            ? `${prefix} ${StringExt.lowerFirst(this.options.type)}`\n            : this.options.type;\n        return (\n        // eslint-disable-next-line\n        `${StringExt.upperFirst(prefixed)} with name '${name}' does not exist.${suggestion ? ` Did you mean '${suggestion}'?` : ''}`);\n    }\n    getSpellingSuggestionForName(name) {\n        return StringExt.getSpellingSuggestion(name, Object.keys(this.data), (candidate) => candidate);\n    }\n}\n(function (Registry) {\n    function create(options) {\n        return new Registry(options);\n    }\n    Registry.create = create;\n})(Registry || (Registry = {}));\n//# sourceMappingURL=registry.js.map","import { Dom } from '@antv/x6-common';\nexport const dot = {\n    color: '#aaaaaa',\n    thickness: 1,\n    markup: 'rect',\n    update(elem, options) {\n        const width = options.thickness * options.sx;\n        const height = options.thickness * options.sy;\n        Dom.attr(elem, {\n            width,\n            height,\n            rx: width,\n            ry: height,\n            fill: options.color,\n        });\n    },\n};\n//# sourceMappingURL=dot.js.map","import { Dom } from '@antv/x6-common';\nexport const fixedDot = {\n    color: '#aaaaaa',\n    thickness: 1,\n    markup: 'rect',\n    update(elem, options) {\n        const size = options.sx <= 1 ? options.thickness * options.sx : options.thickness;\n        Dom.attr(elem, {\n            width: size,\n            height: size,\n            rx: size,\n            ry: size,\n            fill: options.color,\n        });\n    },\n};\n//# sourceMappingURL=fixed-dot.js.map","import { Dom } from '@antv/x6-common';\nexport const mesh = {\n    color: 'rgba(224,224,224,1)',\n    thickness: 1,\n    markup: 'path',\n    update(elem, options) {\n        let d;\n        const width = options.width;\n        const height = options.height;\n        const thickness = options.thickness;\n        if (width - thickness >= 0 && height - thickness >= 0) {\n            d = ['M', width, 0, 'H0 M0 0 V0', height].join(' ');\n        }\n        else {\n            d = 'M 0 0 0 0';\n        }\n        Dom.attr(elem, {\n            d,\n            stroke: options.color,\n            'stroke-width': options.thickness,\n        });\n    },\n};\n//# sourceMappingURL=mesh.js.map","import { Dom } from '@antv/x6-common';\nexport const doubleMesh = [\n    {\n        color: 'rgba(224,224,224,1)',\n        thickness: 1,\n        markup: 'path',\n        update(elem, options) {\n            let d;\n            const width = options.width;\n            const height = options.height;\n            const thickness = options.thickness;\n            if (width - thickness >= 0 && height - thickness >= 0) {\n                d = ['M', width, 0, 'H0 M0 0 V0', height].join(' ');\n            }\n            else {\n                d = 'M 0 0 0 0';\n            }\n            Dom.attr(elem, {\n                d,\n                stroke: options.color,\n                'stroke-width': options.thickness,\n            });\n        },\n    },\n    {\n        color: 'rgba(224,224,224,0.2)',\n        thickness: 3,\n        factor: 4,\n        markup: 'path',\n        update(elem, options) {\n            let d;\n            const factor = options.factor || 1;\n            const width = options.width * factor;\n            const height = options.height * factor;\n            const thickness = options.thickness;\n            if (width - thickness >= 0 && height - thickness >= 0) {\n                d = ['M', width, 0, 'H0 M0 0 V0', height].join(' ');\n            }\n            else {\n                d = 'M 0 0 0 0';\n            }\n            // update wrapper size\n            options.width = width;\n            options.height = height;\n            Dom.attr(elem, {\n                d,\n                stroke: options.color,\n                'stroke-width': options.thickness,\n            });\n        },\n    },\n];\n//# sourceMappingURL=double-mesh.js.map","import { Dom, Vector } from '@antv/x6-common';\nimport { Registry } from '../registry';\nimport * as patterns from './main';\nexport class Grid {\n    constructor() {\n        this.patterns = {};\n        this.root = Vector.create(Dom.createSvgDocument(), {\n            width: '100%',\n            height: '100%',\n        }, [Dom.createSvgElement('defs')]).node;\n    }\n    add(id, elem) {\n        const firstChild = this.root.childNodes[0];\n        if (firstChild) {\n            firstChild.appendChild(elem);\n        }\n        this.patterns[id] = elem;\n        Vector.create('rect', {\n            width: '100%',\n            height: '100%',\n            fill: `url(#${id})`,\n        }).appendTo(this.root);\n    }\n    get(id) {\n        return this.patterns[id];\n    }\n    has(id) {\n        return this.patterns[id] != null;\n    }\n}\n(function (Grid) {\n    Grid.presets = patterns;\n    Grid.registry = Registry.create({\n        type: 'grid',\n    });\n    Grid.registry.register(Grid.presets, true);\n})(Grid || (Grid = {}));\n//# sourceMappingURL=index.js.map","export const flipX = function (img) {\n    // d b\n    // d b\n    const canvas = document.createElement('canvas');\n    const width = img.width;\n    const height = img.height;\n    canvas.width = width * 2;\n    canvas.height = height;\n    const ctx = canvas.getContext('2d');\n    // left image\n    ctx.drawImage(img, 0, 0, width, height);\n    // flipped right image\n    ctx.translate(2 * width, 0);\n    ctx.scale(-1, 1);\n    ctx.drawImage(img, 0, 0, width, height);\n    return canvas;\n};\n//# sourceMappingURL=flip-x.js.map","export const flipY = function (img) {\n    // d d\n    // q q\n    const canvas = document.createElement('canvas');\n    const width = img.width;\n    const height = img.height;\n    canvas.width = width;\n    canvas.height = height * 2;\n    const ctx = canvas.getContext('2d');\n    // top image\n    ctx.drawImage(img, 0, 0, width, height);\n    // flipped bottom image\n    ctx.translate(0, 2 * height);\n    ctx.scale(1, -1);\n    ctx.drawImage(img, 0, 0, width, height);\n    return canvas;\n};\n//# sourceMappingURL=flip-y.js.map","export const flipXY = function (img) {\n    // d b\n    // q p\n    const canvas = document.createElement('canvas');\n    const width = img.width;\n    const height = img.height;\n    canvas.width = 2 * width;\n    canvas.height = 2 * height;\n    const ctx = canvas.getContext('2d');\n    // top-left image\n    ctx.drawImage(img, 0, 0, width, height);\n    // xy-flipped bottom-right image\n    ctx.setTransform(-1, 0, 0, -1, canvas.width, canvas.height);\n    ctx.drawImage(img, 0, 0, width, height);\n    // x-flipped top-right image\n    ctx.setTransform(-1, 0, 0, 1, canvas.width, 0);\n    ctx.drawImage(img, 0, 0, width, height);\n    // y-flipped bottom-left image\n    ctx.setTransform(1, 0, 0, -1, 0, canvas.height);\n    ctx.drawImage(img, 0, 0, width, height);\n    return canvas;\n};\n//# sourceMappingURL=flip-xy.js.map","import { Angle } from '@antv/x6-geometry';\nexport const watermark = function (img, options) {\n    const width = img.width;\n    const height = img.height;\n    const canvas = document.createElement('canvas');\n    canvas.width = width * 3;\n    canvas.height = height * 3;\n    const ctx = canvas.getContext('2d');\n    const angle = options.angle != null ? -options.angle : -20;\n    const radians = Angle.toRad(angle);\n    const stepX = canvas.width / 4;\n    const stepY = canvas.height / 4;\n    for (let i = 0; i < 4; i += 1) {\n        for (let j = 0; j < 4; j += 1) {\n            if ((i + j) % 2 > 0) {\n                ctx.setTransform(1, 0, 0, 1, (2 * i - 1) * stepX, (2 * j - 1) * stepY);\n                ctx.rotate(radians);\n                ctx.drawImage(img, -width / 2, -height / 2, width, height);\n            }\n        }\n    }\n    return canvas;\n};\n//# sourceMappingURL=watermark.js.map","/* eslint-disable @typescript-eslint/ban-types */\nimport { Registry } from '../registry';\nimport * as patterns from './main';\nexport var Background;\n(function (Background) {\n    Background.presets = Object.assign({}, patterns);\n    Background.presets['flip-x'] = patterns.flipX;\n    Background.presets['flip-y'] = patterns.flipY;\n    Background.presets['flip-xy'] = patterns.flipXY;\n    Background.registry = Registry.create({\n        type: 'background pattern',\n    });\n    Background.registry.register(Background.presets, true);\n})(Background || (Background = {}));\n//# sourceMappingURL=index.js.map","import { Registry } from '../registry';\nimport * as filters from './main';\nexport var Filter;\n(function (Filter) {\n    Filter.presets = filters;\n    Filter.registry = Registry.create({\n        type: 'filter',\n    });\n    Filter.registry.register(Filter.presets, true);\n})(Filter || (Filter = {}));\n//# sourceMappingURL=index.js.map","export function getString(value, defaultValue) {\n    return value != null ? value : defaultValue;\n}\nexport function getNumber(num, defaultValue) {\n    return num != null && Number.isFinite(num) ? num : defaultValue;\n}\n//# sourceMappingURL=util.js.map","import { getString, getNumber } from './util';\nexport function outline(args = {}) {\n    const color = getString(args.color, 'blue');\n    const width = getNumber(args.width, 1);\n    const margin = getNumber(args.margin, 2);\n    const opacity = getNumber(args.opacity, 1);\n    const innerRadius = margin;\n    const outerRadius = margin + width;\n    return `\n    <filter>\n      <feFlood flood-color=\"${color}\" flood-opacity=\"${opacity}\" result=\"colored\"/>\n      <feMorphology in=\"SourceAlpha\" result=\"morphedOuter\" operator=\"dilate\" radius=\"${outerRadius}\" />\n      <feMorphology in=\"SourceAlpha\" result=\"morphedInner\" operator=\"dilate\" radius=\"${innerRadius}\" />\n      <feComposite result=\"morphedOuterColored\" in=\"colored\" in2=\"morphedOuter\" operator=\"in\"/>\n      <feComposite operator=\"xor\" in=\"morphedOuterColored\" in2=\"morphedInner\" result=\"outline\"/>\n      <feMerge>\n        <feMergeNode in=\"outline\"/>\n        <feMergeNode in=\"SourceGraphic\"/>\n      </feMerge>\n    </filter>\n  `.trim();\n}\n//# sourceMappingURL=outline.js.map","import { getString, getNumber } from './util';\nexport function highlight(args = {}) {\n    const color = getString(args.color, 'red');\n    const blur = getNumber(args.blur, 0);\n    const width = getNumber(args.width, 1);\n    const opacity = getNumber(args.opacity, 1);\n    return `\n      <filter>\n        <feFlood flood-color=\"${color}\" flood-opacity=\"${opacity}\" result=\"colored\"/>\n        <feMorphology result=\"morphed\" in=\"SourceGraphic\" operator=\"dilate\" radius=\"${width}\"/>\n        <feComposite result=\"composed\" in=\"colored\" in2=\"morphed\" operator=\"in\"/>\n        <feGaussianBlur result=\"blured\" in=\"composed\" stdDeviation=\"${blur}\"/>\n        <feBlend in=\"SourceGraphic\" in2=\"blured\" mode=\"normal\"/>\n      </filter>\n    `.trim();\n}\n//# sourceMappingURL=highlight.js.map","import { getNumber } from './util';\nexport function blur(args = {}) {\n    const x = getNumber(args.x, 2);\n    const stdDeviation = args.y != null && Number.isFinite(args.y) ? [x, args.y] : x;\n    return `\n    <filter>\n      <feGaussianBlur stdDeviation=\"${stdDeviation}\"/>\n    </filter>\n  `.trim();\n}\n//# sourceMappingURL=blur.js.map","import { getString, getNumber } from './util';\nexport function dropShadow(args = {}) {\n    const dx = getNumber(args.dx, 0);\n    const dy = getNumber(args.dy, 0);\n    const color = getString(args.color, 'black');\n    const blur = getNumber(args.blur, 4);\n    const opacity = getNumber(args.opacity, 1);\n    return 'SVGFEDropShadowElement' in window\n        ? `<filter>\n         <feDropShadow stdDeviation=\"${blur}\" dx=\"${dx}\" dy=\"${dy}\" flood-color=\"${color}\" flood-opacity=\"${opacity}\" />\n       </filter>`.trim()\n        : `<filter>\n         <feGaussianBlur in=\"SourceAlpha\" stdDeviation=\"${blur}\" />\n         <feOffset dx=\"${dx}\" dy=\"${dy}\" result=\"offsetblur\" />\n         <feFlood flood-color=\"${color}\" />\n         <feComposite in2=\"offsetblur\" operator=\"in\" />\n         <feComponentTransfer>\n           <feFuncA type=\"linear\" slope=\"${opacity}\" />\n         </feComponentTransfer>\n         <feMerge>\n           <feMergeNode/>\n           <feMergeNode in=\"SourceGraphic\"/>\n         </feMerge>\n       </filter>`.trim();\n}\n//# sourceMappingURL=drop-shadow.js.map","import { getNumber } from './util';\nexport function grayScale(args = {}) {\n    const amount = getNumber(args.amount, 1);\n    const a = 0.2126 + 0.7874 * (1 - amount);\n    const b = 0.7152 - 0.7152 * (1 - amount);\n    const c = 0.0722 - 0.0722 * (1 - amount);\n    const d = 0.2126 - 0.2126 * (1 - amount);\n    const e = 0.7152 + 0.2848 * (1 - amount);\n    const f = 0.0722 - 0.0722 * (1 - amount);\n    const g = 0.2126 - 0.2126 * (1 - amount);\n    const h = 0.0722 + 0.9278 * (1 - amount);\n    return `\n    <filter>\n      <feColorMatrix type=\"matrix\" values=\"${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${b} ${h} 0 0 0 0 0 1 0\"/>\n    </filter>\n  `.trim();\n}\n//# sourceMappingURL=gray-scale.js.map","import { getNumber } from './util';\nexport function sepia(args = {}) {\n    const amount = getNumber(args.amount, 1);\n    const a = 0.393 + 0.607 * (1 - amount);\n    const b = 0.769 - 0.769 * (1 - amount);\n    const c = 0.189 - 0.189 * (1 - amount);\n    const d = 0.349 - 0.349 * (1 - amount);\n    const e = 0.686 + 0.314 * (1 - amount);\n    const f = 0.168 - 0.168 * (1 - amount);\n    const g = 0.272 - 0.272 * (1 - amount);\n    const h = 0.534 - 0.534 * (1 - amount);\n    const i = 0.131 + 0.869 * (1 - amount);\n    return `\n      <filter>\n        <feColorMatrix type=\"matrix\" values=\"${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${h} ${i} 0 0 0 0 0 1 0\"/>\n      </filter>\n    `.trim();\n}\n//# sourceMappingURL=sepia.js.map","import { getNumber } from './util';\nexport function saturate(args = {}) {\n    const amount = getNumber(args.amount, 1);\n    return `\n      <filter>\n        <feColorMatrix type=\"saturate\" values=\"${1 - amount}\"/>\n      </filter>\n    `.trim();\n}\n//# sourceMappingURL=saturate.js.map","import { getNumber } from './util';\nexport function hueRotate(args = {}) {\n    const angle = getNumber(args.angle, 0);\n    return `\n      <filter>\n        <feColorMatrix type=\"hueRotate\" values=\"${angle}\"/>\n      </filter>\n    `.trim();\n}\n//# sourceMappingURL=hue-rotate.js.map","import { getNumber } from './util';\nexport function invert(args = {}) {\n    const amount = getNumber(args.amount, 1);\n    const amount2 = 1 - amount;\n    return `\n      <filter>\n        <feComponentTransfer>\n          <feFuncR type=\"table\" tableValues=\"${amount} ${amount2}\"/>\n          <feFuncG type=\"table\" tableValues=\"${amount} ${amount2}\"/>\n          <feFuncB type=\"table\" tableValues=\"${amount} ${amount2}\"/>\n        </feComponentTransfer>\n      </filter>\n    `.trim();\n}\n//# sourceMappingURL=invert.js.map","import { getNumber } from './util';\nexport function brightness(args = {}) {\n    const amount = getNumber(args.amount, 1);\n    return `\n    <filter>\n      <feComponentTransfer>\n        <feFuncR type=\"linear\" slope=\"${amount}\"/>\n        <feFuncG type=\"linear\" slope=\"${amount}\"/>\n        <feFuncB type=\"linear\" slope=\"${amount}\"/>\n      </feComponentTransfer>\n    </filter>\n  `.trim();\n}\n//# sourceMappingURL=brightness.js.map","import { getNumber } from './util';\nexport function contrast(args = {}) {\n    const amount = getNumber(args.amount, 1);\n    const amount2 = 0.5 - amount / 2;\n    return `\n    <filter>\n     <feComponentTransfer>\n        <feFuncR type=\"linear\" slope=\"${amount}\" intercept=\"${amount2}\"/>\n        <feFuncG type=\"linear\" slope=\"${amount}\" intercept=\"${amount2}\"/>\n        <feFuncB type=\"linear\" slope=\"${amount}\" intercept=\"${amount2}\"/>\n      </feComponentTransfer>\n    </filter>\n  `.trim();\n}\n//# sourceMappingURL=contrast.js.map","export const raw = {\n    xlinkHref: 'xlink:href',\n    xlinkShow: 'xlink:show',\n    xlinkRole: 'xlink:role',\n    xlinkType: 'xlink:type',\n    xlinkArcrole: 'xlink:arcrole',\n    xlinkTitle: 'xlink:title',\n    xlinkActuate: 'xlink:actuate',\n    xmlSpace: 'xml:space',\n    xmlBase: 'xml:base',\n    xmlLang: 'xml:lang',\n    preserveAspectRatio: 'preserveAspectRatio',\n    requiredExtension: 'requiredExtension',\n    requiredFeatures: 'requiredFeatures',\n    systemLanguage: 'systemLanguage',\n    externalResourcesRequired: 'externalResourceRequired',\n};\n//# sourceMappingURL=raw.js.map","import { Point, Path, Polyline } from '@antv/x6-geometry';\nimport { NumberExt, FunctionExt, Dom } from '@antv/x6-common';\nexport const ref = {\n// We do not set `ref` attribute directly on an element.\n// The attribute itself does not qualify for relative positioning.\n};\n// if `refX` is in [0, 1] then `refX` is a fraction of bounding box width\n// if `refX` is < 0 then `refX`'s absolute values is the right coordinate of the bounding box\n// otherwise, `refX` is the left coordinate of the bounding box\nexport const refX = {\n    position: positionWrapper('x', 'width', 'origin'),\n};\nexport const refY = {\n    position: positionWrapper('y', 'height', 'origin'),\n};\n// `ref-dx` and `ref-dy` define the offset of the subelement relative to the right and/or bottom\n// coordinate of the reference element.\nexport const refDx = {\n    position: positionWrapper('x', 'width', 'corner'),\n};\nexport const refDy = {\n    position: positionWrapper('y', 'height', 'corner'),\n};\n// 'ref-width'/'ref-height' defines the width/height of the subelement relatively to\n// the reference element size\n// val in 0..1         ref-width = 0.75 sets the width to 75% of the ref. el. width\n// val < 0 || val > 1  ref-height = -20 sets the height to the ref. el. height shorter by 20\nexport const refWidth = {\n    set: setWrapper('width', 'width'),\n};\nexport const refHeight = {\n    set: setWrapper('height', 'height'),\n};\nexport const refRx = {\n    set: setWrapper('rx', 'width'),\n};\nexport const refRy = {\n    set: setWrapper('ry', 'height'),\n};\nexport const refRInscribed = {\n    set: ((attrName) => {\n        const widthFn = setWrapper(attrName, 'width');\n        const heightFn = setWrapper(attrName, 'height');\n        return function (value, options) {\n            const refBBox = options.refBBox;\n            const fn = refBBox.height > refBBox.width ? widthFn : heightFn;\n            return FunctionExt.call(fn, this, value, options);\n        };\n    })('r'),\n};\nexport const refRCircumscribed = {\n    set(val, { refBBox }) {\n        let value = parseFloat(val);\n        const percentage = NumberExt.isPercentage(val);\n        if (percentage) {\n            value /= 100;\n        }\n        const diagonalLength = Math.sqrt(refBBox.height * refBBox.height + refBBox.width * refBBox.width);\n        let rValue;\n        if (Number.isFinite(value)) {\n            if (percentage || (value >= 0 && value <= 1)) {\n                rValue = value * diagonalLength;\n            }\n            else {\n                rValue = Math.max(value + diagonalLength, 0);\n            }\n        }\n        return { r: rValue };\n    },\n};\nexport const refCx = {\n    set: setWrapper('cx', 'width'),\n};\nexport const refCy = {\n    set: setWrapper('cy', 'height'),\n};\nexport const refDResetOffset = {\n    set: dWrapper({ resetOffset: true }),\n};\nexport const refDKeepOffset = {\n    set: dWrapper({ resetOffset: false }),\n};\nexport const refPointsResetOffset = {\n    set: pointsWrapper({ resetOffset: true }),\n};\nexport const refPointsKeepOffset = {\n    set: pointsWrapper({ resetOffset: false }),\n};\n// aliases\n// -------\nexport const refR = refRInscribed;\nexport const refD = refDResetOffset;\nexport const refPoints = refPointsResetOffset;\n// Allows to combine both absolute and relative positioning\n// refX: 50%, refX2: 20\nexport const refX2 = refX;\nexport const refY2 = refY;\nexport const refWidth2 = refWidth;\nexport const refHeight2 = refHeight;\n// utils\n// -----\nfunction positionWrapper(axis, dimension, origin) {\n    return (val, { refBBox }) => {\n        if (val == null) {\n            return null;\n        }\n        let value = parseFloat(val);\n        const percentage = NumberExt.isPercentage(val);\n        if (percentage) {\n            value /= 100;\n        }\n        let delta;\n        if (Number.isFinite(value)) {\n            const refOrigin = refBBox[origin];\n            if (percentage || (value > 0 && value < 1)) {\n                delta = refOrigin[axis] + refBBox[dimension] * value;\n            }\n            else {\n                delta = refOrigin[axis] + value;\n            }\n        }\n        const point = new Point();\n        point[axis] = delta || 0;\n        return point;\n    };\n}\nfunction setWrapper(attrName, dimension) {\n    return function (val, { refBBox }) {\n        let value = parseFloat(val);\n        const percentage = NumberExt.isPercentage(val);\n        if (percentage) {\n            value /= 100;\n        }\n        const attrs = {};\n        if (Number.isFinite(value)) {\n            const attrValue = percentage || (value >= 0 && value <= 1)\n                ? value * refBBox[dimension]\n                : Math.max(value + refBBox[dimension], 0);\n            attrs[attrName] = attrValue;\n        }\n        return attrs;\n    };\n}\nfunction shapeWrapper(shapeConstructor, options) {\n    const cacheName = 'x6-shape';\n    const resetOffset = options && options.resetOffset;\n    return function (value, { elem, refBBox }) {\n        let cache = Dom.data(elem, cacheName);\n        if (!cache || cache.value !== value) {\n            // only recalculate if value has changed\n            const cachedShape = shapeConstructor(value);\n            cache = {\n                value,\n                shape: cachedShape,\n                shapeBBox: cachedShape.bbox(),\n            };\n            Dom.data(elem, cacheName, cache);\n        }\n        const shape = cache.shape.clone();\n        const shapeBBox = cache.shapeBBox.clone();\n        const shapeOrigin = shapeBBox.getOrigin();\n        const refOrigin = refBBox.getOrigin();\n        shapeBBox.x = refOrigin.x;\n        shapeBBox.y = refOrigin.y;\n        const fitScale = refBBox.getMaxScaleToFit(shapeBBox, refOrigin);\n        // `maxRectScaleToFit` can give Infinity if width or height is 0\n        const sx = shapeBBox.width === 0 || refBBox.width === 0 ? 1 : fitScale.sx;\n        const sy = shapeBBox.height === 0 || refBBox.height === 0 ? 1 : fitScale.sy;\n        shape.scale(sx, sy, shapeOrigin);\n        if (resetOffset) {\n            shape.translate(-shapeOrigin.x, -shapeOrigin.y);\n        }\n        return shape;\n    };\n}\n// `d` attribute for SVGPaths\nfunction dWrapper(options) {\n    function pathConstructor(value) {\n        return Path.parse(value);\n    }\n    const shape = shapeWrapper(pathConstructor, options);\n    return (value, args) => {\n        const path = shape(value, args);\n        return {\n            d: path.serialize(),\n        };\n    };\n}\n// `points` attribute for SVGPolylines and SVGPolygons\nfunction pointsWrapper(options) {\n    const shape = shapeWrapper((points) => new Polyline(points), options);\n    return (value, args) => {\n        const polyline = shape(value, args);\n        return {\n            points: polyline.serialize(),\n        };\n    };\n}\n//# sourceMappingURL=ref.js.map","import { ObjectExt } from '@antv/x6-common';\nexport const fill = {\n    qualify: ObjectExt.isPlainObject,\n    set(fill, { view }) {\n        return `url(#${view.graph.defineGradient(fill)})`;\n    },\n};\n//# sourceMappingURL=fill.js.map","import { ObjectExt } from '@antv/x6-common';\nexport const stroke = {\n    qualify: ObjectExt.isPlainObject,\n    set(stroke, { view }) {\n        const cell = view.cell;\n        const options = Object.assign({}, stroke);\n        if (cell.isEdge() && options.type === 'linearGradient') {\n            const edgeView = view;\n            const source = edgeView.sourcePoint;\n            const target = edgeView.targetPoint;\n            options.id = `gradient-${options.type}-${cell.id}`;\n            options.attrs = Object.assign(Object.assign({}, options.attrs), { x1: source.x, y1: source.y, x2: target.x, y2: target.y, gradientUnits: 'userSpaceOnUse' });\n            view.graph.defs.remove(options.id);\n        }\n        return `url(#${view.graph.defineGradient(options)})`;\n    },\n};\n//# sourceMappingURL=stroke.js.map","import { ObjectExt, NumberExt, Dom, FunctionExt, } from '@antv/x6-common';\nexport const text = {\n    qualify(text, { attrs }) {\n        return attrs.textWrap == null || !ObjectExt.isPlainObject(attrs.textWrap);\n    },\n    set(text, { view, elem, attrs }) {\n        const cacheName = 'x6-text';\n        const cache = Dom.data(elem, cacheName);\n        const json = (str) => {\n            try {\n                return JSON.parse(str);\n            }\n            catch (error) {\n                return str;\n            }\n        };\n        const options = {\n            x: attrs.x,\n            eol: attrs.eol,\n            annotations: json(attrs.annotations),\n            textPath: json(attrs['text-path'] || attrs.textPath),\n            textVerticalAnchor: (attrs['text-vertical-anchor'] ||\n                attrs.textVerticalAnchor),\n            displayEmpty: (attrs['display-empty'] || attrs.displayEmpty) === 'true',\n            lineHeight: (attrs['line-height'] || attrs.lineHeight),\n        };\n        const fontSize = (attrs['font-size'] || attrs.fontSize);\n        const textHash = JSON.stringify([text, options]);\n        if (fontSize) {\n            elem.setAttribute('font-size', fontSize);\n        }\n        // Updates the text only if there was a change in the string\n        // or any of its attributes.\n        if (cache == null || cache !== textHash) {\n            // Text Along Path Selector\n            const textPath = options.textPath;\n            if (textPath != null && typeof textPath === 'object') {\n                const selector = textPath.selector;\n                if (typeof selector === 'string') {\n                    const pathNode = view.find(selector)[0];\n                    if (pathNode instanceof SVGPathElement) {\n                        Dom.ensureId(pathNode);\n                        options.textPath = Object.assign({ 'xlink:href': `#${pathNode.id}` }, textPath);\n                    }\n                }\n            }\n            Dom.text(elem, `${text}`, options);\n            Dom.data(elem, cacheName, textHash);\n        }\n    },\n};\nexport const textWrap = {\n    qualify: ObjectExt.isPlainObject,\n    set(val, { view, elem, attrs, refBBox }) {\n        const info = val;\n        // option `width`\n        const width = info.width || 0;\n        if (NumberExt.isPercentage(width)) {\n            refBBox.width *= parseFloat(width) / 100;\n        }\n        else if (width <= 0) {\n            refBBox.width += width;\n        }\n        else {\n            refBBox.width = width;\n        }\n        // option `height`\n        const height = info.height || 0;\n        if (NumberExt.isPercentage(height)) {\n            refBBox.height *= parseFloat(height) / 100;\n        }\n        else if (height <= 0) {\n            refBBox.height += height;\n        }\n        else {\n            refBBox.height = height;\n        }\n        // option `text`\n        let wrappedText;\n        let txt = info.text;\n        if (txt == null) {\n            txt = attrs.text;\n        }\n        if (txt != null) {\n            wrappedText = Dom.breakText(`${txt}`, refBBox, {\n                'font-weight': attrs['font-weight'] || attrs.fontWeight,\n                'font-size': attrs['font-size'] || attrs.fontSize,\n                'font-family': attrs['font-family'] || attrs.fontFamily,\n                lineHeight: attrs.lineHeight,\n            }, {\n                // svgDocument: view.graph.view.svg,\n                ellipsis: info.ellipsis,\n                // hyphen: info.hyphen as string,\n                // breakWord: info.breakWord as boolean,\n            });\n        }\n        else {\n            wrappedText = '';\n        }\n        FunctionExt.call(text.set, this, wrappedText, {\n            view,\n            elem,\n            attrs,\n            refBBox,\n            cell: view.cell,\n        });\n    },\n};\nconst isTextInUse = (val, { attrs }) => {\n    return attrs.text !== undefined;\n};\nexport const lineHeight = {\n    qualify: isTextInUse,\n};\nexport const textVerticalAnchor = {\n    qualify: isTextInUse,\n};\nexport const textPath = {\n    qualify: isTextInUse,\n};\nexport const annotations = {\n    qualify: isTextInUse,\n};\nexport const eol = {\n    qualify: isTextInUse,\n};\nexport const displayEmpty = {\n    qualify: isTextInUse,\n};\n//# sourceMappingURL=text.js.map","import { Dom } from '@antv/x6-common';\nexport const title = {\n    qualify(title, { elem }) {\n        // HTMLElement title is specified via an attribute (i.e. not an element)\n        return elem instanceof SVGElement;\n    },\n    set(val, { elem }) {\n        const cacheName = 'x6-title';\n        const title = `${val}`;\n        const cache = Dom.data(elem, cacheName);\n        if (cache == null || cache !== title) {\n            Dom.data(elem, cacheName, title);\n            // Generally SVGTitleElement should be the first child\n            // element of its parent.\n            const firstChild = elem.firstChild;\n            if (firstChild && firstChild.tagName.toUpperCase() === 'TITLE') {\n                // Update an existing title\n                const titleElem = firstChild;\n                titleElem.textContent = title;\n            }\n            else {\n                // Create a new title\n                const titleNode = document.createElementNS(elem.namespaceURI, 'title');\n                titleNode.textContent = title;\n                elem.insertBefore(titleNode, firstChild);\n            }\n        }\n    },\n};\n//# sourceMappingURL=title.js.map","import { NumberExt } from '@antv/x6-common';\nimport { Point } from '@antv/x6-geometry';\n// `x-align` when set to `middle` causes centering of the subelement around its new x coordinate.\n// `x-align` when set to `right` uses the x coordinate as referenced to the right of the bbox.\nexport const xAlign = {\n    offset: offsetWrapper('x', 'width', 'right'),\n};\n// `y-align` when set to `middle` causes centering of the subelement around its new y coordinate.\n// `y-align` when set to `bottom` uses the y coordinate as referenced to the bottom of the bbox.\nexport const yAlign = {\n    offset: offsetWrapper('y', 'height', 'bottom'),\n};\nexport const resetOffset = {\n    offset(val, { refBBox }) {\n        return val ? { x: -refBBox.x, y: -refBBox.y } : { x: 0, y: 0 };\n    },\n};\nfunction offsetWrapper(axis, dimension, corner) {\n    return (value, { refBBox }) => {\n        const point = new Point();\n        let delta;\n        if (value === 'middle') {\n            delta = refBBox[dimension] / 2;\n        }\n        else if (value === corner) {\n            delta = refBBox[dimension];\n        }\n        else if (typeof value === 'number' && Number.isFinite(value)) {\n            delta = value > -1 && value < 1 ? -refBBox[dimension] * value : -value;\n        }\n        else if (NumberExt.isPercentage(value)) {\n            delta = (refBBox[dimension] * parseFloat(value)) / 100;\n        }\n        else {\n            delta = 0;\n        }\n        point[axis] = -(refBBox[axis] + delta);\n        return point;\n    };\n}\n//# sourceMappingURL=align.js.map","import { ObjectExt, Dom } from '@antv/x6-common';\nexport const style = {\n    qualify: ObjectExt.isPlainObject,\n    set(styles, { elem }) {\n        Dom.css(elem, styles);\n    },\n};\n//# sourceMappingURL=style.js.map","export const html = {\n    set(html, { elem }) {\n        elem.innerHTML = `${html}`;\n    },\n};\n//# sourceMappingURL=html.js.map","import { ObjectExt } from '@antv/x6-common';\nexport const filter = {\n    qualify: ObjectExt.isPlainObject,\n    set(filter, { view }) {\n        return `url(#${view.graph.defineFilter(filter)})`;\n    },\n};\n//# sourceMappingURL=filter.js.map","export const port = {\n    set(port) {\n        if (port != null && typeof port === 'object' && port.id) {\n            return port.id;\n        }\n        return port;\n    },\n};\n//# sourceMappingURL=port.js.map","import { Path } from '@antv/x6-geometry';\nexport function normalize(d, offset1, offset2) {\n    let offsetX;\n    let offsetY;\n    if (typeof offset1 === 'object') {\n        offsetX = offset1.x;\n        offsetY = offset1.y;\n    }\n    else {\n        offsetX = offset1;\n        offsetY = offset2;\n    }\n    const path = Path.parse(d);\n    const bbox = path.bbox();\n    if (bbox) {\n        let ty = -bbox.height / 2 - bbox.y;\n        let tx = -bbox.width / 2 - bbox.x;\n        if (typeof offsetX === 'number') {\n            tx -= offsetX;\n        }\n        if (typeof offsetY === 'number') {\n            ty -= offsetY;\n        }\n        path.translate(tx, ty);\n    }\n    return path.serialize();\n}\n//# sourceMappingURL=util.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Path } from '@antv/x6-geometry';\nimport { NumberExt } from '@antv/x6-common';\nimport { normalize } from './util';\nexport const block = (_a) => {\n    var { size, width, height, offset, open } = _a, attrs = __rest(_a, [\"size\", \"width\", \"height\", \"offset\", \"open\"]);\n    return createClassicMarker({ size, width, height, offset }, open === true, true, undefined, attrs);\n};\nexport const classic = (_a) => {\n    var { size, width, height, offset, factor } = _a, attrs = __rest(_a, [\"size\", \"width\", \"height\", \"offset\", \"factor\"]);\n    return createClassicMarker({ size, width, height, offset }, false, false, factor, attrs);\n};\nfunction createClassicMarker(options, open, full, factor = 3 / 4, attrs = {}) {\n    const size = options.size || 10;\n    const width = options.width || size;\n    const height = options.height || size;\n    const path = new Path();\n    const localAttrs = {};\n    if (open) {\n        path\n            .moveTo(width, 0)\n            .lineTo(0, height / 2)\n            .lineTo(width, height);\n        localAttrs.fill = 'none';\n    }\n    else {\n        path.moveTo(0, height / 2);\n        path.lineTo(width, 0);\n        if (!full) {\n            const f = NumberExt.clamp(factor, 0, 1);\n            path.lineTo(width * f, height / 2);\n        }\n        path.lineTo(width, height);\n        path.close();\n    }\n    return Object.assign(Object.assign(Object.assign({}, localAttrs), attrs), { tagName: 'path', d: normalize(path.serialize(), {\n            x: options.offset != null ? options.offset : -width / 2,\n        }) });\n}\n//# sourceMappingURL=classic.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Path } from '@antv/x6-geometry';\nimport { normalize } from './util';\nexport const diamond = (_a) => {\n    var { size, width, height, offset } = _a, attrs = __rest(_a, [\"size\", \"width\", \"height\", \"offset\"]);\n    const s = size || 10;\n    const w = width || s;\n    const h = height || s;\n    const path = new Path();\n    path\n        .moveTo(0, h / 2)\n        .lineTo(w / 2, 0)\n        .lineTo(w, h / 2)\n        .lineTo(w / 2, h)\n        .close();\n    return Object.assign(Object.assign({}, attrs), { tagName: 'path', d: normalize(path.serialize(), offset == null ? -w / 2 : offset) });\n};\n//# sourceMappingURL=diamond.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { normalize } from './util';\nexport const path = (_a) => {\n    var { d, offsetX, offsetY } = _a, attrs = __rest(_a, [\"d\", \"offsetX\", \"offsetY\"]);\n    return Object.assign(Object.assign({}, attrs), { tagName: 'path', d: normalize(d, offsetX, offsetY) });\n};\n//# sourceMappingURL=path.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Path } from '@antv/x6-geometry';\nimport { normalize } from './util';\nexport const cross = (_a) => {\n    var { size, width, height, offset } = _a, attrs = __rest(_a, [\"size\", \"width\", \"height\", \"offset\"]);\n    const s = size || 10;\n    const w = width || s;\n    const h = height || s;\n    const path = new Path();\n    path.moveTo(0, 0).lineTo(w, h).moveTo(0, h).lineTo(w, 0);\n    return Object.assign(Object.assign({}, attrs), { tagName: 'path', fill: 'none', d: normalize(path.serialize(), offset || -w / 2) });\n};\n//# sourceMappingURL=cross.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Path } from '@antv/x6-geometry';\nimport { normalize } from './util';\nexport const async = (_a) => {\n    var { width, height, offset, open, flip } = _a, attrs = __rest(_a, [\"width\", \"height\", \"offset\", \"open\", \"flip\"]);\n    let h = height || 6;\n    const w = width || 10;\n    const opened = open === true;\n    const fliped = flip === true;\n    const result = Object.assign(Object.assign({}, attrs), { tagName: 'path' });\n    if (fliped) {\n        h = -h;\n    }\n    const path = new Path();\n    path.moveTo(0, h).lineTo(w, 0);\n    if (!opened) {\n        path.lineTo(w, h);\n        path.close();\n    }\n    else {\n        result.fill = 'none';\n    }\n    result.d = normalize(path.serialize(), {\n        x: offset || -w / 2,\n        y: h / 2,\n    });\n    return result;\n};\n//# sourceMappingURL=async.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Path } from '@antv/x6-geometry';\nimport { normalize } from './util';\nexport const circle = (_a) => {\n    var { r } = _a, attrs = __rest(_a, [\"r\"]);\n    const radius = r || 5;\n    return Object.assign(Object.assign({ cx: radius }, attrs), { tagName: 'circle', r: radius });\n};\nexport const circlePlus = (_a) => {\n    var { r } = _a, attrs = __rest(_a, [\"r\"]);\n    const radius = r || 5;\n    const path = new Path();\n    path.moveTo(radius, 0).lineTo(radius, radius * 2);\n    path.moveTo(0, radius).lineTo(radius * 2, radius);\n    return {\n        children: [\n            Object.assign(Object.assign({}, circle({ r: radius })), { fill: 'none' }),\n            Object.assign(Object.assign({}, attrs), { tagName: 'path', d: normalize(path.serialize(), -radius) }),\n        ],\n    };\n};\n//# sourceMappingURL=circle.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nexport const ellipse = (_a) => {\n    var { rx, ry } = _a, attrs = __rest(_a, [\"rx\", \"ry\"]);\n    const radiusX = rx || 5;\n    const radiusy = ry || 5;\n    return Object.assign(Object.assign({ cx: radiusX }, attrs), { tagName: 'ellipse', rx: radiusX, ry: radiusy });\n};\n//# sourceMappingURL=ellipse.js.map","import { Registry } from '../registry';\nimport * as markers from './main';\nimport { normalize as normalizeMarker } from './util';\nexport var Marker;\n(function (Marker) {\n    Marker.presets = markers;\n    Marker.registry = Registry.create({\n        type: 'marker',\n    });\n    Marker.registry.register(Marker.presets, true);\n})(Marker || (Marker = {}));\n(function (Marker) {\n    Marker.normalize = normalizeMarker;\n})(Marker || (Marker = {}));\n//# sourceMappingURL=index.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { ObjectExt } from '@antv/x6-common';\nimport { Marker } from '../marker';\nfunction qualify(value) {\n    return typeof value === 'string' || ObjectExt.isPlainObject(value);\n}\nexport const sourceMarker = {\n    qualify,\n    set(marker, { view, attrs }) {\n        return createMarker('marker-start', marker, view, attrs);\n    },\n};\nexport const targetMarker = {\n    qualify,\n    set(marker, { view, attrs }) {\n        return createMarker('marker-end', marker, view, attrs, {\n            transform: 'rotate(180)',\n        });\n    },\n};\nexport const vertexMarker = {\n    qualify,\n    set(marker, { view, attrs }) {\n        return createMarker('marker-mid', marker, view, attrs);\n    },\n};\nfunction createMarker(type, marker, view, attrs, manual = {}) {\n    const def = typeof marker === 'string' ? { name: marker } : marker;\n    const { name, args } = def, others = __rest(def, [\"name\", \"args\"]);\n    let preset = others;\n    if (name && typeof name === 'string') {\n        const fn = Marker.registry.get(name);\n        if (fn) {\n            preset = fn(Object.assign(Object.assign({}, others), args));\n        }\n        else {\n            return Marker.registry.onNotFound(name);\n        }\n    }\n    const options = Object.assign(Object.assign(Object.assign({}, normalizeAttr(attrs, type)), manual), preset);\n    return {\n        [type]: `url(#${view.graph.defineMarker(options)})`,\n    };\n}\nfunction normalizeAttr(attr, type) {\n    const result = {};\n    // The context 'fill' is disregared here. The usual case is to use the\n    // marker with a connection(for which 'fill' attribute is set to 'none').\n    const stroke = attr.stroke;\n    if (typeof stroke === 'string') {\n        result.stroke = stroke;\n        result.fill = stroke;\n    }\n    // Again the context 'fill-opacity' is ignored.\n    let strokeOpacity = attr.strokeOpacity;\n    if (strokeOpacity == null) {\n        strokeOpacity = attr['stroke-opacity'];\n    }\n    if (strokeOpacity == null) {\n        strokeOpacity = attr.opacity;\n    }\n    if (strokeOpacity != null) {\n        result['stroke-opacity'] = strokeOpacity;\n        result['fill-opacity'] = strokeOpacity;\n    }\n    if (type !== 'marker-mid') {\n        const strokeWidth = parseFloat((attr.strokeWidth || attr['stroke-width']));\n        if (Number.isFinite(strokeWidth) && strokeWidth > 1) {\n            const offset = Math.ceil(strokeWidth / 2);\n            result.refX = type === 'marker-start' ? offset : -offset;\n        }\n    }\n    return result;\n}\n//# sourceMappingURL=marker.js.map","const isEdgeView = (val, { view }) => {\n    return view.cell.isEdge();\n};\nexport const connection = {\n    qualify: isEdgeView,\n    set(val, args) {\n        var _a, _b, _c, _d;\n        const view = args.view;\n        const reverse = (val.reverse || false);\n        const stubs = (val.stubs || 0);\n        let d;\n        if (Number.isFinite(stubs) && stubs !== 0) {\n            if (!reverse) {\n                let offset;\n                if (stubs < 0) {\n                    const len = view.getConnectionLength() || 0;\n                    offset = (len + stubs) / 2;\n                }\n                else {\n                    offset = stubs;\n                }\n                const path = view.getConnection();\n                if (path) {\n                    const sourceParts = path.divideAtLength(offset);\n                    const targetParts = path.divideAtLength(-offset);\n                    if (sourceParts && targetParts) {\n                        d = `${sourceParts[0].serialize()} ${targetParts[1].serialize()}`;\n                    }\n                }\n            }\n            else {\n                let offset;\n                let length;\n                const len = view.getConnectionLength() || 0;\n                if (stubs < 0) {\n                    offset = (len + stubs) / 2;\n                    length = -stubs;\n                }\n                else {\n                    offset = stubs;\n                    length = len - stubs * 2;\n                }\n                const path = view.getConnection();\n                d = (_d = (_c = (_b = (_a = path === null || path === void 0 ? void 0 : path.divideAtLength(offset)) === null || _a === void 0 ? void 0 : _a[1]) === null || _b === void 0 ? void 0 : _b.divideAtLength(length)) === null || _c === void 0 ? void 0 : _c[0]) === null || _d === void 0 ? void 0 : _d.serialize();\n            }\n        }\n        return { d: d || view.getConnectionPathData() };\n    },\n};\nexport const atConnectionLengthKeepGradient = {\n    qualify: isEdgeView,\n    set: atConnectionWrapper('getTangentAtLength', { rotate: true }),\n};\nexport const atConnectionLengthIgnoreGradient = {\n    qualify: isEdgeView,\n    set: atConnectionWrapper('getTangentAtLength', { rotate: false }),\n};\nexport const atConnectionRatioKeepGradient = {\n    qualify: isEdgeView,\n    set: atConnectionWrapper('getTangentAtRatio', { rotate: true }),\n};\nexport const atConnectionRatioIgnoreGradient = {\n    qualify: isEdgeView,\n    set: atConnectionWrapper('getTangentAtRatio', { rotate: false }),\n};\n// aliases\n// -------\nexport const atConnectionLength = atConnectionLengthKeepGradient;\nexport const atConnectionRatio = atConnectionRatioKeepGradient;\n// utils\n// -----\nfunction atConnectionWrapper(method, options) {\n    const zeroVector = { x: 1, y: 0 };\n    return (value, args) => {\n        let p;\n        let angle;\n        const view = args.view;\n        const tangent = view[method](Number(value));\n        if (tangent) {\n            angle = options.rotate ? tangent.vector().vectorAngle(zeroVector) : 0;\n            p = tangent.start;\n        }\n        else {\n            p = view.path.start;\n            angle = 0;\n        }\n        if (angle === 0) {\n            return { transform: `translate(${p.x},${p.y}')` };\n        }\n        return {\n            transform: `translate(${p.x},${p.y}') rotate(${angle})`,\n        };\n    };\n}\n//# sourceMappingURL=connection.js.map","import { FunctionExt } from '@antv/x6-common';\nimport { Registry } from '../registry';\nimport { raw } from './raw';\nimport * as attrs from './main';\nexport var Attr;\n(function (Attr) {\n    function isValidDefinition(def, val, options) {\n        if (def != null) {\n            if (typeof def === 'string') {\n                return true;\n            }\n            if (typeof def.qualify !== 'function' ||\n                FunctionExt.call(def.qualify, this, val, options)) {\n                return true;\n            }\n        }\n        return false;\n    }\n    Attr.isValidDefinition = isValidDefinition;\n})(Attr || (Attr = {}));\n(function (Attr) {\n    Attr.presets = Object.assign(Object.assign({}, raw), attrs);\n    Attr.registry = Registry.create({\n        type: 'attribute definition',\n    });\n    Attr.registry.register(Attr.presets, true);\n})(Attr || (Attr = {}));\n//# sourceMappingURL=index.js.map","export const Config = {\n    prefixCls: 'x6',\n    autoInsertCSS: true,\n    useCSSSelector: true,\n    prefix(suffix) {\n        return `${Config.prefixCls}-${suffix}`;\n    },\n};\n//# sourceMappingURL=index.js.map","import { Dom } from '@antv/x6-common';\nimport { Config } from '../../config';\nconst defaultClassName = Config.prefix('highlighted');\nexport const className = {\n    highlight(cellView, magnet, options) {\n        const cls = (options && options.className) || defaultClassName;\n        Dom.addClass(magnet, cls);\n    },\n    unhighlight(cellView, magnet, options) {\n        const cls = (options && options.className) || defaultClassName;\n        Dom.removeClass(magnet, cls);\n    },\n};\n//# sourceMappingURL=class.js.map","import { Dom } from '@antv/x6-common';\nimport { Config } from '../../config';\nconst className = Config.prefix('highlight-opacity');\nexport const opacity = {\n    highlight(cellView, magnet) {\n        Dom.addClass(magnet, className);\n    },\n    unhighlight(cellView, magnetEl) {\n        Dom.removeClass(magnetEl, className);\n    },\n};\n//# sourceMappingURL=opacity.js.map","import { Point, Line, Rectangle, Polyline, Ellipse, Path, } from '@antv/x6-geometry';\nimport { Dom } from '@antv/x6-common';\nimport { normalize } from '../registry/marker/util';\nexport var Util;\n(function (Util) {\n    const svgDocument = Dom.createSvgElement('svg');\n    Util.normalizeMarker = normalize;\n    /**\n     * Transforms point by an SVG transformation represented by `matrix`.\n     */\n    function transformPoint(point, matrix) {\n        const ret = Dom.createSVGPoint(point.x, point.y).matrixTransform(matrix);\n        return new Point(ret.x, ret.y);\n    }\n    Util.transformPoint = transformPoint;\n    /**\n     * Transforms line by an SVG transformation represented by `matrix`.\n     */\n    function transformLine(line, matrix) {\n        return new Line(transformPoint(line.start, matrix), transformPoint(line.end, matrix));\n    }\n    Util.transformLine = transformLine;\n    /**\n     * Transforms polyline by an SVG transformation represented by `matrix`.\n     */\n    function transformPolyline(polyline, matrix) {\n        let points = polyline instanceof Polyline ? polyline.points : polyline;\n        if (!Array.isArray(points)) {\n            points = [];\n        }\n        return new Polyline(points.map((p) => transformPoint(p, matrix)));\n    }\n    Util.transformPolyline = transformPolyline;\n    function transformRectangle(rect, matrix) {\n        const p = svgDocument.createSVGPoint();\n        p.x = rect.x;\n        p.y = rect.y;\n        const corner1 = p.matrixTransform(matrix);\n        p.x = rect.x + rect.width;\n        p.y = rect.y;\n        const corner2 = p.matrixTransform(matrix);\n        p.x = rect.x + rect.width;\n        p.y = rect.y + rect.height;\n        const corner3 = p.matrixTransform(matrix);\n        p.x = rect.x;\n        p.y = rect.y + rect.height;\n        const corner4 = p.matrixTransform(matrix);\n        const minX = Math.min(corner1.x, corner2.x, corner3.x, corner4.x);\n        const maxX = Math.max(corner1.x, corner2.x, corner3.x, corner4.x);\n        const minY = Math.min(corner1.y, corner2.y, corner3.y, corner4.y);\n        const maxY = Math.max(corner1.y, corner2.y, corner3.y, corner4.y);\n        return new Rectangle(minX, minY, maxX - minX, maxY - minY);\n    }\n    Util.transformRectangle = transformRectangle;\n    /**\n     * Returns the bounding box of the element after transformations are\n     * applied. If `withoutTransformations` is `true`, transformations of\n     * the element will not be considered when computing the bounding box.\n     * If `target` is specified, bounding box will be computed relatively\n     * to the `target` element.\n     */\n    function bbox(elem, withoutTransformations, target) {\n        let box;\n        const ownerSVGElement = elem.ownerSVGElement;\n        // If the element is not in the live DOM, it does not have a bounding\n        // box defined and so fall back to 'zero' dimension element.\n        if (!ownerSVGElement) {\n            return new Rectangle(0, 0, 0, 0);\n        }\n        try {\n            box = elem.getBBox();\n        }\n        catch (e) {\n            // Fallback for IE.\n            box = {\n                x: elem.clientLeft,\n                y: elem.clientTop,\n                width: elem.clientWidth,\n                height: elem.clientHeight,\n            };\n        }\n        if (withoutTransformations) {\n            return Rectangle.create(box);\n        }\n        const matrix = Dom.getTransformToElement(elem, target || ownerSVGElement);\n        return transformRectangle(box, matrix);\n    }\n    Util.bbox = bbox;\n    /**\n     * Returns the bounding box of the element after transformations are\n     * applied. Unlike `bbox()`, this function fixes a browser implementation\n     * bug to return the correct bounding box if this elemenent is a group of\n     * svg elements (if `options.recursive` is specified).\n     */\n    function getBBox(elem, options = {}) {\n        let outputBBox;\n        const ownerSVGElement = elem.ownerSVGElement;\n        // If the element is not in the live DOM, it does not have a bounding box\n        // defined and so fall back to 'zero' dimension element.\n        // If the element is not an SVGGraphicsElement, we could not measure the\n        // bounding box either\n        if (!ownerSVGElement || !Dom.isSVGGraphicsElement(elem)) {\n            if (Dom.isHTMLElement(elem)) {\n                // If the element is a HTMLElement, return the position relative to the body\n                const { left, top, width, height } = getBoundingOffsetRect(elem);\n                return new Rectangle(left, top, width, height);\n            }\n            return new Rectangle(0, 0, 0, 0);\n        }\n        let target = options.target;\n        const recursive = options.recursive;\n        if (!recursive) {\n            try {\n                outputBBox = elem.getBBox();\n            }\n            catch (e) {\n                outputBBox = {\n                    x: elem.clientLeft,\n                    y: elem.clientTop,\n                    width: elem.clientWidth,\n                    height: elem.clientHeight,\n                };\n            }\n            if (!target) {\n                return Rectangle.create(outputBBox);\n            }\n            // transform like target\n            const matrix = Dom.getTransformToElement(elem, target);\n            return transformRectangle(outputBBox, matrix);\n        }\n        // recursive\n        {\n            const children = elem.childNodes;\n            const n = children.length;\n            if (n === 0) {\n                return getBBox(elem, {\n                    target,\n                });\n            }\n            if (!target) {\n                target = elem; // eslint-disable-line\n            }\n            for (let i = 0; i < n; i += 1) {\n                const child = children[i];\n                let childBBox;\n                if (child.childNodes.length === 0) {\n                    childBBox = getBBox(child, {\n                        target,\n                    });\n                }\n                else {\n                    // if child is a group element, enter it with a recursive call\n                    childBBox = getBBox(child, {\n                        target,\n                        recursive: true,\n                    });\n                }\n                if (!outputBBox) {\n                    outputBBox = childBBox;\n                }\n                else {\n                    outputBBox = outputBBox.union(childBBox);\n                }\n            }\n            return outputBBox;\n        }\n    }\n    Util.getBBox = getBBox;\n    function getBoundingOffsetRect(elem) {\n        let left = 0;\n        let top = 0;\n        let width = 0;\n        let height = 0;\n        if (elem) {\n            let current = elem;\n            while (current) {\n                left += current.offsetLeft;\n                top += current.offsetTop;\n                current = current.offsetParent;\n                if (current) {\n                    left += parseInt(Dom.getComputedStyle(current, 'borderLeft'), 10);\n                    top += parseInt(Dom.getComputedStyle(current, 'borderTop'), 10);\n                }\n            }\n            width = elem.offsetWidth;\n            height = elem.offsetHeight;\n        }\n        return {\n            left,\n            top,\n            width,\n            height,\n        };\n    }\n    Util.getBoundingOffsetRect = getBoundingOffsetRect;\n    /**\n     * Convert the SVGElement to an equivalent geometric shape. The element's\n     * transformations are not taken into account.\n     *\n     * SVGRectElement      => Rectangle\n     *\n     * SVGLineElement      => Line\n     *\n     * SVGCircleElement    => Ellipse\n     *\n     * SVGEllipseElement   => Ellipse\n     *\n     * SVGPolygonElement   => Polyline\n     *\n     * SVGPolylineElement  => Polyline\n     *\n     * SVGPathElement      => Path\n     *\n     * others              => Rectangle\n     */\n    function toGeometryShape(elem) {\n        const attr = (name) => {\n            const s = elem.getAttribute(name);\n            const v = s ? parseFloat(s) : 0;\n            return Number.isNaN(v) ? 0 : v;\n        };\n        switch (elem instanceof SVGElement && elem.nodeName.toLowerCase()) {\n            case 'rect':\n                return new Rectangle(attr('x'), attr('y'), attr('width'), attr('height'));\n            case 'circle':\n                return new Ellipse(attr('cx'), attr('cy'), attr('r'), attr('r'));\n            case 'ellipse':\n                return new Ellipse(attr('cx'), attr('cy'), attr('rx'), attr('ry'));\n            case 'polyline': {\n                const points = Dom.getPointsFromSvgElement(elem);\n                return new Polyline(points);\n            }\n            case 'polygon': {\n                const points = Dom.getPointsFromSvgElement(elem);\n                if (points.length > 1) {\n                    points.push(points[0]);\n                }\n                return new Polyline(points);\n            }\n            case 'path': {\n                let d = elem.getAttribute('d');\n                if (!Path.isValid(d)) {\n                    d = Path.normalize(d);\n                }\n                return Path.parse(d);\n            }\n            case 'line': {\n                return new Line(attr('x1'), attr('y1'), attr('x2'), attr('y2'));\n            }\n            default:\n                break;\n        }\n        // Anything else is a rectangle\n        return getBBox(elem);\n    }\n    Util.toGeometryShape = toGeometryShape;\n    function translateAndAutoOrient(elem, position, reference, target) {\n        const pos = Point.create(position);\n        const ref = Point.create(reference);\n        if (!target) {\n            const svg = elem instanceof SVGSVGElement ? elem : elem.ownerSVGElement;\n            target = svg; // eslint-disable-line\n        }\n        // Clean-up previously set transformations except the scale.\n        // If we didn't clean up the previous transformations then they'd\n        // add up with the old ones. Scale is an exception as it doesn't\n        // add up, consider: `this.scale(2).scale(2).scale(2)`. The result\n        // is that the element is scaled by the factor 2, not 8.\n        const s = Dom.scale(elem);\n        elem.setAttribute('transform', '');\n        const bbox = getBBox(elem, {\n            target,\n        }).scale(s.sx, s.sy);\n        // 1. Translate to origin.\n        const translateToOrigin = Dom.createSVGTransform();\n        translateToOrigin.setTranslate(-bbox.x - bbox.width / 2, -bbox.y - bbox.height / 2);\n        // 2. Rotate around origin.\n        const rotateAroundOrigin = Dom.createSVGTransform();\n        const angle = pos.angleBetween(ref, pos.clone().translate(1, 0));\n        if (angle)\n            rotateAroundOrigin.setRotate(angle, 0, 0);\n        // 3. Translate to the `position` + the offset (half my width)\n        //    towards the `reference` point.\n        const translateFromOrigin = Dom.createSVGTransform();\n        const finalPosition = pos.clone().move(ref, bbox.width / 2);\n        translateFromOrigin.setTranslate(2 * pos.x - finalPosition.x, 2 * pos.y - finalPosition.y);\n        // 4. Get the current transformation matrix of this node\n        const ctm = Dom.getTransformToElement(elem, target);\n        // 5. Apply transformations and the scale\n        const transform = Dom.createSVGTransform();\n        transform.setMatrix(translateFromOrigin.matrix.multiply(rotateAroundOrigin.matrix.multiply(translateToOrigin.matrix.multiply(ctm.scale(s.sx, s.sy)))));\n        elem.setAttribute('transform', Dom.matrixToTransformString(transform.matrix));\n    }\n    Util.translateAndAutoOrient = translateAndAutoOrient;\n    function findShapeNode(magnet) {\n        if (magnet == null) {\n            return null;\n        }\n        let node = magnet;\n        do {\n            let tagName = node.tagName;\n            if (typeof tagName !== 'string')\n                return null;\n            tagName = tagName.toUpperCase();\n            if (Dom.hasClass(node, 'x6-port')) {\n                node = node.nextElementSibling;\n            }\n            else if (tagName === 'G') {\n                node = node.firstElementChild;\n            }\n            else if (tagName === 'TITLE') {\n                node = node.nextElementSibling;\n            }\n            else\n                break;\n        } while (node);\n        return node;\n    }\n    Util.findShapeNode = findShapeNode;\n    // BBox is calculated by the attribute and shape of the node.\n    // Because of the reduction in DOM API calls, there is a significant performance improvement.\n    function getBBoxV2(elem) {\n        const node = findShapeNode(elem);\n        if (!Dom.isSVGGraphicsElement(node)) {\n            if (Dom.isHTMLElement(elem)) {\n                const { left, top, width, height } = getBoundingOffsetRect(elem);\n                return new Rectangle(left, top, width, height);\n            }\n            return new Rectangle(0, 0, 0, 0);\n        }\n        const shape = toGeometryShape(node);\n        const bbox = shape.bbox() || Rectangle.create();\n        const transform = node.getAttribute('transform');\n        if (transform) {\n            const nodeMatrix = Dom.transformStringToMatrix(transform);\n            return transformRectangle(bbox, nodeMatrix);\n        }\n        return bbox;\n    }\n    Util.getBBoxV2 = getBBoxV2;\n})(Util || (Util = {}));\n//# sourceMappingURL=index.js.map","import { ObjectExt, Dom, Vector } from '@antv/x6-common';\nimport { Config } from '../../config';\nimport { Util } from '../../util';\nconst defaultOptions = {\n    padding: 3,\n    rx: 0,\n    ry: 0,\n    attrs: {\n        'stroke-width': 3,\n        stroke: '#FEB663',\n    },\n};\nexport const stroke = {\n    highlight(cellView, magnet, options) {\n        const id = Private.getHighlighterId(magnet, options);\n        if (Private.hasCache(id)) {\n            return;\n        }\n        // eslint-disable-next-line\n        options = ObjectExt.defaultsDeep({}, options, defaultOptions);\n        const magnetVel = Vector.create(magnet);\n        let pathData;\n        let magnetBBox;\n        try {\n            pathData = magnetVel.toPathData();\n        }\n        catch (error) {\n            // Failed to get path data from magnet element.\n            // Draw a rectangle around the entire cell view instead.\n            magnetBBox = Util.bbox(magnetVel.node, true);\n            pathData = Dom.rectToPathData(Object.assign(Object.assign({}, options), magnetBBox));\n        }\n        const path = Dom.createSvgElement('path');\n        Dom.attr(path, Object.assign({ d: pathData, 'pointer-events': 'none', 'vector-effect': 'non-scaling-stroke', fill: 'none' }, (options.attrs ? Dom.kebablizeAttrs(options.attrs) : null)));\n        // const highlightVel = v.create('path').attr()\n        if (cellView.isEdgeElement(magnet)) {\n            Dom.attr(path, 'd', cellView.getConnectionPathData());\n        }\n        else {\n            let highlightMatrix = magnetVel.getTransformToElement(cellView.container);\n            // Add padding to the highlight element.\n            const padding = options.padding;\n            if (padding) {\n                if (magnetBBox == null) {\n                    magnetBBox = Util.bbox(magnetVel.node, true);\n                }\n                const cx = magnetBBox.x + magnetBBox.width / 2;\n                const cy = magnetBBox.y + magnetBBox.height / 2;\n                magnetBBox = Util.transformRectangle(magnetBBox, highlightMatrix);\n                const width = Math.max(magnetBBox.width, 1);\n                const height = Math.max(magnetBBox.height, 1);\n                const sx = (width + padding) / width;\n                const sy = (height + padding) / height;\n                const paddingMatrix = Dom.createSVGMatrix({\n                    a: sx,\n                    b: 0,\n                    c: 0,\n                    d: sy,\n                    e: cx - sx * cx,\n                    f: cy - sy * cy,\n                });\n                highlightMatrix = highlightMatrix.multiply(paddingMatrix);\n            }\n            Dom.transform(path, highlightMatrix);\n        }\n        Dom.addClass(path, Config.prefix('highlight-stroke'));\n        const cell = cellView.cell;\n        const removeHandler = () => Private.removeHighlighter(id);\n        cell.on('removed', removeHandler);\n        if (cell.model) {\n            cell.model.on('reseted', removeHandler);\n        }\n        cellView.container.appendChild(path);\n        Private.setCache(id, path);\n    },\n    unhighlight(cellView, magnet, opt) {\n        Private.removeHighlighter(Private.getHighlighterId(magnet, opt));\n    },\n};\nvar Private;\n(function (Private) {\n    function getHighlighterId(magnet, options) {\n        Dom.ensureId(magnet);\n        return magnet.id + JSON.stringify(options);\n    }\n    Private.getHighlighterId = getHighlighterId;\n    const cache = {};\n    function setCache(id, elem) {\n        cache[id] = elem;\n    }\n    Private.setCache = setCache;\n    function hasCache(id) {\n        return cache[id] != null;\n    }\n    Private.hasCache = hasCache;\n    function removeHighlighter(id) {\n        const elem = cache[id];\n        if (elem) {\n            Dom.remove(elem);\n            delete cache[id];\n        }\n    }\n    Private.removeHighlighter = removeHighlighter;\n})(Private || (Private = {}));\n//# sourceMappingURL=stroke.js.map","import { Registry } from '../registry';\nimport * as highlighters from './main';\nexport var Highlighter;\n(function (Highlighter) {\n    function check(name, highlighter) {\n        if (typeof highlighter.highlight !== 'function') {\n            throw new Error(`Highlighter '${name}' is missing required \\`highlight()\\` method`);\n        }\n        if (typeof highlighter.unhighlight !== 'function') {\n            throw new Error(`Highlighter '${name}' is missing required \\`unhighlight()\\` method`);\n        }\n    }\n    Highlighter.check = check;\n})(Highlighter || (Highlighter = {}));\n(function (Highlighter) {\n    Highlighter.presets = highlighters;\n    Highlighter.registry = Registry.create({\n        type: 'highlighter',\n    });\n    Highlighter.registry.register(Highlighter.presets, true);\n})(Highlighter || (Highlighter = {}));\n//# sourceMappingURL=index.js.map","import { NumberExt } from '@antv/x6-common';\nimport { Point } from '@antv/x6-geometry';\nexport function normalizePoint(bbox, args = {}) {\n    return new Point(NumberExt.normalizePercentage(args.x, bbox.width), NumberExt.normalizePercentage(args.y, bbox.height));\n}\nexport function toResult(point, angle, rawArgs) {\n    return Object.assign({ angle, position: point.toJSON() }, rawArgs);\n}\n//# sourceMappingURL=util.js.map","import { normalizePoint, toResult } from './util';\nexport const absolute = (portsPositionArgs, elemBBox) => {\n    return portsPositionArgs.map(({ x, y, angle }) => toResult(normalizePoint(elemBBox, { x, y }), angle || 0));\n};\n//# sourceMappingURL=absolute.js.map","import { Ellipse } from '@antv/x6-geometry';\nimport { toResult } from './util';\nexport const ellipse = (portsPositionArgs, elemBBox, groupPositionArgs) => {\n    const startAngle = groupPositionArgs.start || 0;\n    const stepAngle = groupPositionArgs.step || 20;\n    return ellipseLayout(portsPositionArgs, elemBBox, startAngle, (index, count) => (index + 0.5 - count / 2) * stepAngle);\n};\nexport const ellipseSpread = (portsPositionArgs, elemBBox, groupPositionArgs) => {\n    const startAngle = groupPositionArgs.start || 0;\n    const stepAngle = groupPositionArgs.step || 360 / portsPositionArgs.length;\n    return ellipseLayout(portsPositionArgs, elemBBox, startAngle, (index) => {\n        return index * stepAngle;\n    });\n};\nfunction ellipseLayout(portsPositionArgs, elemBBox, startAngle, stepFn) {\n    const center = elemBBox.getCenter();\n    const start = elemBBox.getTopCenter();\n    const ratio = elemBBox.width / elemBBox.height;\n    const ellipse = Ellipse.fromRect(elemBBox);\n    const count = portsPositionArgs.length;\n    return portsPositionArgs.map((item, index) => {\n        const angle = startAngle + stepFn(index, count);\n        const p = start.clone().rotate(-angle, center).scale(ratio, 1, center);\n        const theta = item.compensateRotate ? -ellipse.tangentTheta(p) : 0;\n        if (item.dx || item.dy) {\n            p.translate(item.dx || 0, item.dy || 0);\n        }\n        if (item.dr) {\n            p.move(center, item.dr);\n        }\n        return toResult(p.round(), theta, item);\n    });\n}\n//# sourceMappingURL=ellipse.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Line } from '@antv/x6-geometry';\nimport { normalizePoint, toResult } from './util';\nexport const line = (portsPositionArgs, elemBBox, groupPositionArgs) => {\n    const start = normalizePoint(elemBBox, groupPositionArgs.start || elemBBox.getOrigin());\n    const end = normalizePoint(elemBBox, groupPositionArgs.end || elemBBox.getCorner());\n    return lineLayout(portsPositionArgs, start, end, groupPositionArgs);\n};\nexport const left = (portsPositionArgs, elemBBox, groupPositionArgs) => {\n    return lineLayout(portsPositionArgs, elemBBox.getTopLeft(), elemBBox.getBottomLeft(), groupPositionArgs);\n};\nexport const right = (portsPositionArgs, elemBBox, groupPositionArgs) => {\n    return lineLayout(portsPositionArgs, elemBBox.getTopRight(), elemBBox.getBottomRight(), groupPositionArgs);\n};\nexport const top = (portsPositionArgs, elemBBox, groupPositionArgs) => {\n    return lineLayout(portsPositionArgs, elemBBox.getTopLeft(), elemBBox.getTopRight(), groupPositionArgs);\n};\nexport const bottom = (portsPositionArgs, elemBBox, groupPositionArgs) => {\n    return lineLayout(portsPositionArgs, elemBBox.getBottomLeft(), elemBBox.getBottomRight(), groupPositionArgs);\n};\nfunction lineLayout(portsPositionArgs, p1, p2, groupPositionArgs) {\n    const line = new Line(p1, p2);\n    const length = portsPositionArgs.length;\n    return portsPositionArgs.map((_a, index) => {\n        var { strict } = _a, offset = __rest(_a, [\"strict\"]);\n        const ratio = strict || groupPositionArgs.strict\n            ? (index + 1) / (length + 1)\n            : (index + 0.5) / length;\n        const p = line.pointAt(ratio);\n        if (offset.dx || offset.dy) {\n            p.translate(offset.dx || 0, offset.dy || 0);\n        }\n        return toResult(p.round(), 0, offset);\n    });\n}\n//# sourceMappingURL=line.js.map","import { Registry } from '../registry';\nimport * as layouts from './main';\nexport var PortLayout;\n(function (PortLayout) {\n    PortLayout.presets = layouts;\n    PortLayout.registry = Registry.create({\n        type: 'port layout',\n    });\n    PortLayout.registry.register(PortLayout.presets, true);\n})(PortLayout || (PortLayout = {}));\n//# sourceMappingURL=index.js.map","import { ObjectExt } from '@antv/x6-common';\nconst defaults = {\n    position: { x: 0, y: 0 },\n    angle: 0,\n    attrs: {\n        '.': {\n            y: '0',\n            'text-anchor': 'start',\n        },\n    },\n};\nexport function toResult(preset, args) {\n    const { x, y, angle, attrs } = args || {};\n    return ObjectExt.defaultsDeep({}, { angle, attrs, position: { x, y } }, preset, defaults);\n}\n//# sourceMappingURL=util.js.map","import { toResult } from './util';\nexport const manual = (portPosition, elemBBox, args) => toResult({ position: elemBBox.getTopLeft() }, args);\nexport const left = (portPosition, elemBBox, args) => toResult({\n    position: { x: -15, y: 0 },\n    attrs: { '.': { y: '.3em', 'text-anchor': 'end' } },\n}, args);\nexport const right = (portPosition, elemBBox, args) => toResult({\n    position: { x: 15, y: 0 },\n    attrs: { '.': { y: '.3em', 'text-anchor': 'start' } },\n}, args);\nexport const top = (portPosition, elemBBox, args) => toResult({\n    position: { x: 0, y: -15 },\n    attrs: { '.': { 'text-anchor': 'middle' } },\n}, args);\nexport const bottom = (portPosition, elemBBox, args) => toResult({\n    position: { x: 0, y: 15 },\n    attrs: { '.': { y: '.6em', 'text-anchor': 'middle' } },\n}, args);\n//# sourceMappingURL=side.js.map","import { toResult } from './util';\nexport const outside = (portPosition, elemBBox, args) => outsideLayout(portPosition, elemBBox, false, args);\nexport const outsideOriented = (portPosition, elemBBox, args) => outsideLayout(portPosition, elemBBox, true, args);\nexport const inside = (portPosition, elemBBox, args) => insideLayout(portPosition, elemBBox, false, args);\nexport const insideOriented = (portPosition, elemBBox, args) => insideLayout(portPosition, elemBBox, true, args);\nfunction outsideLayout(portPosition, elemBBox, autoOrient, args) {\n    const offset = args.offset != null ? args.offset : 15;\n    const angle = elemBBox.getCenter().theta(portPosition);\n    const bboxAngles = getBBoxAngles(elemBBox);\n    let y;\n    let tx;\n    let ty;\n    let textAnchor;\n    let orientAngle = 0;\n    if (angle < bboxAngles[1] || angle > bboxAngles[2]) {\n        y = '.3em';\n        tx = offset;\n        ty = 0;\n        textAnchor = 'start';\n    }\n    else if (angle < bboxAngles[0]) {\n        y = '0';\n        tx = 0;\n        ty = -offset;\n        if (autoOrient) {\n            orientAngle = -90;\n            textAnchor = 'start';\n        }\n        else {\n            textAnchor = 'middle';\n        }\n    }\n    else if (angle < bboxAngles[3]) {\n        y = '.3em';\n        tx = -offset;\n        ty = 0;\n        textAnchor = 'end';\n    }\n    else {\n        y = '.6em';\n        tx = 0;\n        ty = offset;\n        if (autoOrient) {\n            orientAngle = 90;\n            textAnchor = 'start';\n        }\n        else {\n            textAnchor = 'middle';\n        }\n    }\n    return toResult({\n        position: {\n            x: Math.round(tx),\n            y: Math.round(ty),\n        },\n        angle: orientAngle,\n        attrs: {\n            '.': {\n                y,\n                'text-anchor': textAnchor,\n            },\n        },\n    }, args);\n}\nfunction insideLayout(portPosition, elemBBox, autoOrient, args) {\n    const offset = args.offset != null ? args.offset : 15;\n    const angle = elemBBox.getCenter().theta(portPosition);\n    const bboxAngles = getBBoxAngles(elemBBox);\n    let y;\n    let tx;\n    let ty;\n    let textAnchor;\n    let orientAngle = 0;\n    if (angle < bboxAngles[1] || angle > bboxAngles[2]) {\n        y = '.3em';\n        tx = -offset;\n        ty = 0;\n        textAnchor = 'end';\n    }\n    else if (angle < bboxAngles[0]) {\n        y = '.6em';\n        tx = 0;\n        ty = offset;\n        if (autoOrient) {\n            orientAngle = 90;\n            textAnchor = 'start';\n        }\n        else {\n            textAnchor = 'middle';\n        }\n    }\n    else if (angle < bboxAngles[3]) {\n        y = '.3em';\n        tx = offset;\n        ty = 0;\n        textAnchor = 'start';\n    }\n    else {\n        y = '0em';\n        tx = 0;\n        ty = -offset;\n        if (autoOrient) {\n            orientAngle = -90;\n            textAnchor = 'start';\n        }\n        else {\n            textAnchor = 'middle';\n        }\n    }\n    return toResult({\n        position: {\n            x: Math.round(tx),\n            y: Math.round(ty),\n        },\n        angle: orientAngle,\n        attrs: {\n            '.': {\n                y,\n                'text-anchor': textAnchor,\n            },\n        },\n    }, args);\n}\nfunction getBBoxAngles(elemBBox) {\n    const center = elemBBox.getCenter();\n    const tl = center.theta(elemBBox.getTopLeft());\n    const bl = center.theta(elemBBox.getBottomLeft());\n    const br = center.theta(elemBBox.getBottomRight());\n    const tr = center.theta(elemBBox.getTopRight());\n    return [tl, tr, br, bl];\n}\n//# sourceMappingURL=inout.js.map","import { Point } from '@antv/x6-geometry';\nimport { toResult } from './util';\nexport const radial = (portPosition, elemBBox, args) => radialLayout(portPosition.diff(elemBBox.getCenter()), false, args);\nexport const radialOriented = (portPosition, elemBBox, args) => radialLayout(portPosition.diff(elemBBox.getCenter()), true, args);\nfunction radialLayout(portCenterOffset, autoOrient, args) {\n    const offset = args.offset != null ? args.offset : 20;\n    const origin = new Point(0, 0);\n    const angle = -portCenterOffset.theta(origin);\n    const pos = portCenterOffset\n        .clone()\n        .move(origin, offset)\n        .diff(portCenterOffset)\n        .round();\n    let y = '.3em';\n    let textAnchor;\n    let orientAngle = angle;\n    if ((angle + 90) % 180 === 0) {\n        textAnchor = autoOrient ? 'end' : 'middle';\n        if (!autoOrient && angle === -270) {\n            y = '0em';\n        }\n    }\n    else if (angle > -270 && angle < -90) {\n        textAnchor = 'start';\n        orientAngle = angle - 180;\n    }\n    else {\n        textAnchor = 'end';\n    }\n    return toResult({\n        position: pos.round().toJSON(),\n        angle: autoOrient ? orientAngle : 0,\n        attrs: {\n            '.': {\n                y,\n                'text-anchor': textAnchor,\n            },\n        },\n    }, args);\n}\n//# sourceMappingURL=radial.js.map","import { Registry } from '../registry';\nimport * as layouts from './main';\nexport var PortLabelLayout;\n(function (PortLabelLayout) {\n    PortLabelLayout.presets = layouts;\n    PortLabelLayout.registry = Registry.create({\n        type: 'port label layout',\n    });\n    PortLabelLayout.registry.register(PortLabelLayout.presets, true);\n})(PortLabelLayout || (PortLabelLayout = {}));\n//# sourceMappingURL=index.js.map","import { Dom, Basecoat } from '@antv/x6-common';\nimport { Config } from '../config';\nexport class View extends Basecoat {\n    get priority() {\n        return 2;\n    }\n    constructor() {\n        super();\n        this.cid = Private.uniqueId();\n        View.views[this.cid] = this;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    confirmUpdate(flag, options) {\n        return 0;\n    }\n    empty(elem = this.container) {\n        Dom.empty(elem);\n        return this;\n    }\n    unmount(elem = this.container) {\n        Dom.remove(elem);\n        return this;\n    }\n    remove(elem = this.container) {\n        if (elem === this.container) {\n            this.removeEventListeners(document);\n            this.onRemove();\n            delete View.views[this.cid];\n        }\n        this.unmount(elem);\n        return this;\n    }\n    onRemove() { }\n    setClass(className, elem = this.container) {\n        elem.classList.value = Array.isArray(className)\n            ? className.join(' ')\n            : className;\n    }\n    addClass(className, elem = this.container) {\n        Dom.addClass(elem, Array.isArray(className) ? className.join(' ') : className);\n        return this;\n    }\n    removeClass(className, elem = this.container) {\n        Dom.removeClass(elem, Array.isArray(className) ? className.join(' ') : className);\n        return this;\n    }\n    setStyle(style, elem = this.container) {\n        Dom.css(elem, style);\n        return this;\n    }\n    setAttrs(attrs, elem = this.container) {\n        if (attrs != null && elem != null) {\n            Dom.attr(elem, attrs);\n        }\n        return this;\n    }\n    /**\n     * Returns the value of the specified attribute of `node`.\n     *\n     * If the node does not set a value for attribute, start recursing up\n     * the DOM tree from node to lookup for attribute at the ancestors of\n     * node. If the recursion reaches CellView's root node and attribute\n     * is not found even there, return `null`.\n     */\n    findAttr(attrName, elem = this.container) {\n        let current = elem;\n        while (current && current.nodeType === 1) {\n            const value = current.getAttribute(attrName);\n            if (value != null) {\n                return value;\n            }\n            if (current === this.container) {\n                return null;\n            }\n            current = current.parentNode;\n        }\n        return null;\n    }\n    find(selector, rootElem = this.container, selectors = this.selectors) {\n        return View.find(selector, rootElem, selectors).elems;\n    }\n    findOne(selector, rootElem = this.container, selectors = this.selectors) {\n        const nodes = this.find(selector, rootElem, selectors);\n        return nodes.length > 0 ? nodes[0] : null;\n    }\n    findByAttr(attrName, elem = this.container) {\n        let node = elem;\n        while (node && node.getAttribute) {\n            const val = node.getAttribute(attrName);\n            if ((val != null || node === this.container) && val !== 'false') {\n                return node;\n            }\n            node = node.parentNode;\n        }\n        // If the overall cell has set `magnet === false`, then returns\n        // `null` to announce there is no magnet found for this cell.\n        // This is especially useful to set on cells that have 'ports'.\n        // In this case, only the ports have set `magnet === true` and the\n        // overall element has `magnet === false`.\n        return null;\n    }\n    getSelector(elem, prevSelector) {\n        let selector;\n        if (elem === this.container) {\n            if (typeof prevSelector === 'string') {\n                selector = `> ${prevSelector}`;\n            }\n            return selector;\n        }\n        if (elem) {\n            const nth = Dom.index(elem) + 1;\n            selector = `${elem.tagName.toLowerCase()}:nth-child(${nth})`;\n            if (prevSelector) {\n                selector += ` > ${prevSelector}`;\n            }\n            selector = this.getSelector(elem.parentNode, selector);\n        }\n        return selector;\n    }\n    prefixClassName(className) {\n        return Config.prefix(className);\n    }\n    delegateEvents(events, append) {\n        if (events == null) {\n            return this;\n        }\n        if (!append) {\n            this.undelegateEvents();\n        }\n        const splitter = /^(\\S+)\\s*(.*)$/;\n        Object.keys(events).forEach((key) => {\n            const match = key.match(splitter);\n            if (match == null) {\n                return;\n            }\n            const method = this.getEventHandler(events[key]);\n            if (typeof method === 'function') {\n                this.delegateEvent(match[1], match[2], method);\n            }\n        });\n        return this;\n    }\n    undelegateEvents() {\n        Dom.Event.off(this.container, this.getEventNamespace());\n        return this;\n    }\n    delegateDocumentEvents(events, data) {\n        this.addEventListeners(document, events, data);\n        return this;\n    }\n    undelegateDocumentEvents() {\n        this.removeEventListeners(document);\n        return this;\n    }\n    delegateEvent(eventName, selector, listener) {\n        Dom.Event.on(this.container, eventName + this.getEventNamespace(), selector, listener);\n        return this;\n    }\n    undelegateEvent(eventName, selector, listener) {\n        const name = eventName + this.getEventNamespace();\n        if (selector == null) {\n            Dom.Event.off(this.container, name);\n        }\n        else if (typeof selector === 'string') {\n            Dom.Event.off(this.container, name, selector, listener);\n        }\n        else {\n            Dom.Event.off(this.container, name, selector);\n        }\n        return this;\n    }\n    addEventListeners(elem, events, data) {\n        if (events == null) {\n            return this;\n        }\n        const ns = this.getEventNamespace();\n        Object.keys(events).forEach((eventName) => {\n            const method = this.getEventHandler(events[eventName]);\n            if (typeof method === 'function') {\n                Dom.Event.on(elem, eventName + ns, data, method);\n            }\n        });\n        return this;\n    }\n    removeEventListeners(elem) {\n        if (elem != null) {\n            Dom.Event.off(elem, this.getEventNamespace());\n        }\n        return this;\n    }\n    getEventNamespace() {\n        return `.${Config.prefixCls}-event-${this.cid}`;\n    }\n    // eslint-disable-next-line\n    getEventHandler(handler) {\n        // eslint-disable-next-line\n        let method;\n        if (typeof handler === 'string') {\n            const fn = this[handler];\n            if (typeof fn === 'function') {\n                method = (...args) => fn.call(this, ...args);\n            }\n        }\n        else {\n            method = (...args) => handler.call(this, ...args);\n        }\n        return method;\n    }\n    getEventTarget(e, options = {}) {\n        // Touchmove/Touchend event's target is not reflecting the element\n        // under the coordinates as mousemove does.\n        // It holds the element when a touchstart triggered.\n        const { target, type, clientX = 0, clientY = 0 } = e;\n        if (options.fromPoint || type === 'touchmove' || type === 'touchend') {\n            return document.elementFromPoint(clientX, clientY);\n        }\n        return target;\n    }\n    stopPropagation(e) {\n        this.setEventData(e, { propagationStopped: true });\n        return this;\n    }\n    isPropagationStopped(e) {\n        return this.getEventData(e).propagationStopped === true;\n    }\n    getEventData(e) {\n        return this.eventData(e);\n    }\n    setEventData(e, data) {\n        return this.eventData(e, data);\n    }\n    eventData(e, data) {\n        if (e == null) {\n            throw new TypeError('Event object required');\n        }\n        let currentData = e.data;\n        const key = `__${this.cid}__`;\n        // get\n        if (data == null) {\n            if (currentData == null) {\n                return {};\n            }\n            return currentData[key] || {};\n        }\n        // set\n        if (currentData == null) {\n            currentData = e.data = {};\n        }\n        if (currentData[key] == null) {\n            currentData[key] = Object.assign({}, data);\n        }\n        else {\n            currentData[key] = Object.assign(Object.assign({}, currentData[key]), data);\n        }\n        return currentData[key];\n    }\n    normalizeEvent(evt) {\n        return View.normalizeEvent(evt);\n    }\n}\n(function (View) {\n    function createElement(tagName, isSvgElement) {\n        return isSvgElement\n            ? Dom.createSvgElement(tagName || 'g')\n            : Dom.createElementNS(tagName || 'div');\n    }\n    View.createElement = createElement;\n    function find(selector, rootElem, selectors) {\n        if (!selector || selector === '.') {\n            return { elems: [rootElem] };\n        }\n        if (selectors) {\n            const nodes = selectors[selector];\n            if (nodes) {\n                return { elems: Array.isArray(nodes) ? nodes : [nodes] };\n            }\n        }\n        if (Config.useCSSSelector) {\n            const validSelector = selector.includes('>')\n                ? `:scope ${selector}`\n                : selector;\n            return {\n                isCSSSelector: true,\n                // $(rootElem).find(selector).toArray() as Element[]\n                elems: Array.prototype.slice.call(rootElem.querySelectorAll(validSelector)),\n            };\n        }\n        return { elems: [] };\n    }\n    View.find = find;\n    function normalizeEvent(evt) {\n        let normalizedEvent = evt;\n        const originalEvent = evt.originalEvent;\n        const touchEvt = originalEvent &&\n            originalEvent.changedTouches &&\n            originalEvent.changedTouches[0];\n        if (touchEvt) {\n            // eslint-disable-next-line no-restricted-syntax\n            for (const key in evt) {\n                if (touchEvt[key] === undefined) {\n                    touchEvt[key] = evt[key];\n                }\n            }\n            normalizedEvent = touchEvt;\n        }\n        return normalizedEvent;\n    }\n    View.normalizeEvent = normalizeEvent;\n})(View || (View = {}));\n(function (View) {\n    View.views = {};\n    function getView(cid) {\n        return View.views[cid] || null;\n    }\n    View.getView = getView;\n})(View || (View = {}));\nvar Private;\n(function (Private) {\n    let counter = 0;\n    function uniqueId() {\n        const id = `v${counter}`;\n        counter += 1;\n        return id;\n    }\n    Private.uniqueId = uniqueId;\n})(Private || (Private = {}));\n//# sourceMappingURL=view.js.map","import { ObjectExt, Dom, Vector } from '@antv/x6-common';\n// eslint-disable-next-line\nexport var Markup;\n(function (Markup) {\n    function isJSONMarkup(markup) {\n        return markup != null && !isStringMarkup(markup);\n    }\n    Markup.isJSONMarkup = isJSONMarkup;\n    function isStringMarkup(markup) {\n        return markup != null && typeof markup === 'string';\n    }\n    Markup.isStringMarkup = isStringMarkup;\n    function clone(markup) {\n        return markup == null || isStringMarkup(markup)\n            ? markup\n            : ObjectExt.cloneDeep(markup);\n    }\n    Markup.clone = clone;\n    /**\n     * Removes blank space in markup to prevent create empty text node.\n     */\n    function sanitize(markup) {\n        return `${markup}`\n            .trim()\n            .replace(/[\\r|\\n]/g, ' ')\n            .replace(/>\\s+</g, '><');\n    }\n    Markup.sanitize = sanitize;\n    function parseJSONMarkup(markup, options = { ns: Dom.ns.svg }) {\n        const fragment = document.createDocumentFragment();\n        const groups = {};\n        const selectors = {};\n        const queue = [\n            {\n                markup: Array.isArray(markup) ? markup : [markup],\n                parent: fragment,\n                ns: options.ns,\n            },\n        ];\n        while (queue.length > 0) {\n            const item = queue.pop();\n            let ns = item.ns || Dom.ns.svg;\n            const defines = item.markup;\n            const parentNode = item.parent;\n            defines.forEach((define) => {\n                // tagName\n                const tagName = define.tagName;\n                if (!tagName) {\n                    throw new TypeError('Invalid tagName');\n                }\n                // ns\n                if (define.ns) {\n                    ns = define.ns;\n                }\n                const node = ns\n                    ? Dom.createElementNS(tagName, ns)\n                    : Dom.createElement(tagName);\n                // attrs\n                const attrs = define.attrs;\n                if (attrs) {\n                    Dom.attr(node, Dom.kebablizeAttrs(attrs));\n                }\n                // style\n                const style = define.style;\n                if (style) {\n                    Dom.css(node, style);\n                }\n                // classname\n                const className = define.className;\n                if (className != null) {\n                    node.setAttribute('class', Array.isArray(className) ? className.join(' ') : className);\n                }\n                // textContent\n                if (define.textContent) {\n                    node.textContent = define.textContent;\n                }\n                // selector\n                const selector = define.selector;\n                if (selector != null) {\n                    if (selectors[selector]) {\n                        throw new TypeError('Selector must be unique');\n                    }\n                    selectors[selector] = node;\n                }\n                // group\n                if (define.groupSelector) {\n                    let nodeGroups = define.groupSelector;\n                    if (!Array.isArray(nodeGroups)) {\n                        nodeGroups = [nodeGroups];\n                    }\n                    nodeGroups.forEach((name) => {\n                        if (!groups[name]) {\n                            groups[name] = [];\n                        }\n                        groups[name].push(node);\n                    });\n                }\n                parentNode.appendChild(node);\n                // children\n                const children = define.children;\n                if (Array.isArray(children)) {\n                    queue.push({ ns, markup: children, parent: node });\n                }\n            });\n        }\n        Object.keys(groups).forEach((groupName) => {\n            if (selectors[groupName]) {\n                throw new Error('Ambiguous group selector');\n            }\n            selectors[groupName] = groups[groupName];\n        });\n        return { fragment, selectors, groups };\n    }\n    Markup.parseJSONMarkup = parseJSONMarkup;\n    function createContainer(firstChild) {\n        return firstChild instanceof SVGElement\n            ? Dom.createSvgElement('g')\n            : Dom.createElement('div');\n    }\n    function renderMarkup(markup) {\n        if (isStringMarkup(markup)) {\n            const nodes = Vector.createVectors(markup);\n            const count = nodes.length;\n            if (count === 1) {\n                return {\n                    elem: nodes[0].node,\n                };\n            }\n            if (count > 1) {\n                const elem = createContainer(nodes[0].node);\n                nodes.forEach((node) => {\n                    elem.appendChild(node.node);\n                });\n                return { elem };\n            }\n            return {};\n        }\n        const result = parseJSONMarkup(markup);\n        const fragment = result.fragment;\n        let elem = null;\n        if (fragment.childNodes.length > 1) {\n            elem = createContainer(fragment.firstChild);\n            elem.appendChild(fragment);\n        }\n        else {\n            elem = fragment.firstChild;\n        }\n        return { elem, selectors: result.selectors };\n    }\n    Markup.renderMarkup = renderMarkup;\n    function parseLabelStringMarkup(markup) {\n        const children = Vector.createVectors(markup);\n        const fragment = document.createDocumentFragment();\n        for (let i = 0, n = children.length; i < n; i += 1) {\n            const currentChild = children[i].node;\n            fragment.appendChild(currentChild);\n        }\n        return { fragment, selectors: {} };\n    }\n    Markup.parseLabelStringMarkup = parseLabelStringMarkup;\n})(Markup || (Markup = {}));\n// eslint-disable-next-line\n(function (Markup) {\n    function getSelector(elem, stop, prev) {\n        if (elem != null) {\n            let selector;\n            const tagName = elem.tagName.toLowerCase();\n            if (elem === stop) {\n                if (typeof prev === 'string') {\n                    selector = `> ${tagName} > ${prev}`;\n                }\n                else {\n                    selector = `> ${tagName}`;\n                }\n                return selector;\n            }\n            const parent = elem.parentNode;\n            if (parent && parent.childNodes.length > 1) {\n                const nth = Dom.index(elem) + 1;\n                selector = `${tagName}:nth-child(${nth})`;\n            }\n            else {\n                selector = tagName;\n            }\n            if (prev) {\n                selector += ` > ${prev}`;\n            }\n            return getSelector(elem.parentNode, stop, selector);\n        }\n        return prev;\n    }\n    Markup.getSelector = getSelector;\n})(Markup || (Markup = {}));\n// eslint-disable-next-line\n(function (Markup) {\n    function getPortContainerMarkup() {\n        return 'g';\n    }\n    Markup.getPortContainerMarkup = getPortContainerMarkup;\n    function getPortMarkup() {\n        return {\n            tagName: 'circle',\n            selector: 'circle',\n            attrs: {\n                r: 10,\n                fill: '#FFFFFF',\n                stroke: '#000000',\n            },\n        };\n    }\n    Markup.getPortMarkup = getPortMarkup;\n    function getPortLabelMarkup() {\n        return {\n            tagName: 'text',\n            selector: 'text',\n            attrs: {\n                fill: '#000000',\n            },\n        };\n    }\n    Markup.getPortLabelMarkup = getPortLabelMarkup;\n})(Markup || (Markup = {}));\n// eslint-disable-next-line\n(function (Markup) {\n    function getEdgeMarkup() {\n        return [\n            {\n                tagName: 'path',\n                selector: 'wrap',\n                groupSelector: 'lines',\n                attrs: {\n                    fill: 'none',\n                    cursor: 'pointer',\n                    stroke: 'transparent',\n                    strokeLinecap: 'round',\n                },\n            },\n            {\n                tagName: 'path',\n                selector: 'line',\n                groupSelector: 'lines',\n                attrs: {\n                    fill: 'none',\n                    pointerEvents: 'none',\n                },\n            },\n        ];\n    }\n    Markup.getEdgeMarkup = getEdgeMarkup;\n})(Markup || (Markup = {}));\n// eslint-disable-next-line\n(function (Markup) {\n    function getForeignObjectMarkup(bare = false) {\n        return {\n            tagName: 'foreignObject',\n            selector: 'fo',\n            children: [\n                {\n                    ns: Dom.ns.xhtml,\n                    tagName: 'body',\n                    selector: 'foBody',\n                    attrs: {\n                        xmlns: Dom.ns.xhtml,\n                    },\n                    style: {\n                        width: '100%',\n                        height: '100%',\n                        background: 'transparent',\n                    },\n                    children: bare\n                        ? []\n                        : [\n                            {\n                                tagName: 'div',\n                                selector: 'foContent',\n                                style: {\n                                    width: '100%',\n                                    height: '100%',\n                                },\n                            },\n                        ],\n                },\n            ],\n        };\n    }\n    Markup.getForeignObjectMarkup = getForeignObjectMarkup;\n})(Markup || (Markup = {}));\n//# sourceMappingURL=markup.js.map","import { Dictionary, Dom } from '@antv/x6-common';\nimport { Util } from '../util';\nexport class Cache {\n    constructor(view) {\n        this.view = view;\n        this.clean();\n    }\n    clean() {\n        if (this.elemCache) {\n            this.elemCache.dispose();\n        }\n        this.elemCache = new Dictionary();\n        this.pathCache = {};\n    }\n    get(elem) {\n        const cache = this.elemCache;\n        if (!cache.has(elem)) {\n            this.elemCache.set(elem, {});\n        }\n        return this.elemCache.get(elem);\n    }\n    getData(elem) {\n        const meta = this.get(elem);\n        if (!meta.data) {\n            meta.data = {};\n        }\n        return meta.data;\n    }\n    getMatrix(elem) {\n        const meta = this.get(elem);\n        if (meta.matrix == null) {\n            const target = this.view.container;\n            meta.matrix = Dom.getTransformToParentElement(elem, target);\n        }\n        return Dom.createSVGMatrix(meta.matrix);\n    }\n    getShape(elem) {\n        const meta = this.get(elem);\n        if (meta.shape == null) {\n            meta.shape = Util.toGeometryShape(elem);\n        }\n        return meta.shape.clone();\n    }\n    getBoundingRect(elem) {\n        const meta = this.get(elem);\n        if (meta.boundingRect == null) {\n            meta.boundingRect = Util.getBBoxV2(elem);\n        }\n        return meta.boundingRect.clone();\n    }\n}\n//# sourceMappingURL=cache.js.map","import { ObjectExt, ArrayExt, Dom, FunctionExt, Dictionary, StringExt, } from '@antv/x6-common';\nimport { Point } from '@antv/x6-geometry';\nimport { Attr } from '../registry/attr';\nimport { View } from './view';\nimport { Util } from '../util';\nexport class AttrManager {\n    constructor(view) {\n        this.view = view;\n    }\n    get cell() {\n        return this.view.cell;\n    }\n    getDefinition(attrName) {\n        return this.cell.getAttrDefinition(attrName);\n    }\n    processAttrs(elem, raw) {\n        let normal;\n        let set;\n        let offset;\n        let position;\n        const specials = [];\n        // divide the attributes between normal and special\n        Object.keys(raw).forEach((name) => {\n            const val = raw[name];\n            const definition = this.getDefinition(name);\n            const isValid = FunctionExt.call(Attr.isValidDefinition, this.view, definition, val, {\n                elem,\n                attrs: raw,\n                cell: this.cell,\n                view: this.view,\n            });\n            if (definition && isValid) {\n                if (typeof definition === 'string') {\n                    if (normal == null) {\n                        normal = {};\n                    }\n                    normal[definition] = val;\n                }\n                else if (val !== null) {\n                    specials.push({ name, definition });\n                }\n            }\n            else {\n                if (normal == null) {\n                    normal = {};\n                }\n                const normalName = Dom.CASE_SENSITIVE_ATTR.includes(name)\n                    ? name\n                    : StringExt.kebabCase(name);\n                normal[normalName] = val;\n            }\n        });\n        specials.forEach(({ name, definition }) => {\n            const val = raw[name];\n            const setDefine = definition;\n            if (typeof setDefine.set === 'function') {\n                if (set == null) {\n                    set = {};\n                }\n                set[name] = val;\n            }\n            const offsetDefine = definition;\n            if (typeof offsetDefine.offset === 'function') {\n                if (offset == null) {\n                    offset = {};\n                }\n                offset[name] = val;\n            }\n            const positionDefine = definition;\n            if (typeof positionDefine.position === 'function') {\n                if (position == null) {\n                    position = {};\n                }\n                position[name] = val;\n            }\n        });\n        return {\n            raw,\n            normal,\n            set,\n            offset,\n            position,\n        };\n    }\n    mergeProcessedAttrs(allProcessedAttrs, roProcessedAttrs) {\n        allProcessedAttrs.set = Object.assign(Object.assign({}, allProcessedAttrs.set), roProcessedAttrs.set);\n        allProcessedAttrs.position = Object.assign(Object.assign({}, allProcessedAttrs.position), roProcessedAttrs.position);\n        allProcessedAttrs.offset = Object.assign(Object.assign({}, allProcessedAttrs.offset), roProcessedAttrs.offset);\n        // Handle also the special transform property.\n        const transform = allProcessedAttrs.normal && allProcessedAttrs.normal.transform;\n        if (transform != null && roProcessedAttrs.normal) {\n            roProcessedAttrs.normal.transform = transform;\n        }\n        allProcessedAttrs.normal = roProcessedAttrs.normal;\n    }\n    findAttrs(cellAttrs, rootNode, selectorCache, selectors) {\n        const merge = [];\n        const result = new Dictionary();\n        Object.keys(cellAttrs).forEach((selector) => {\n            const attrs = cellAttrs[selector];\n            if (!ObjectExt.isPlainObject(attrs)) {\n                return;\n            }\n            const { isCSSSelector, elems } = View.find(selector, rootNode, selectors);\n            selectorCache[selector] = elems;\n            for (let i = 0, l = elems.length; i < l; i += 1) {\n                const elem = elems[i];\n                const unique = selectors && selectors[selector] === elem;\n                const prev = result.get(elem);\n                if (prev) {\n                    if (!prev.array) {\n                        merge.push(elem);\n                        prev.array = true;\n                        prev.attrs = [prev.attrs];\n                        prev.priority = [prev.priority];\n                    }\n                    const attributes = prev.attrs;\n                    const selectedLength = prev.priority;\n                    if (unique) {\n                        // node referenced by `selector`\n                        attributes.unshift(attrs);\n                        selectedLength.unshift(-1);\n                    }\n                    else {\n                        // node referenced by `groupSelector` or CSSSelector\n                        const sortIndex = ArrayExt.sortedIndex(selectedLength, isCSSSelector ? -1 : l);\n                        attributes.splice(sortIndex, 0, attrs);\n                        selectedLength.splice(sortIndex, 0, l);\n                    }\n                }\n                else {\n                    result.set(elem, {\n                        elem,\n                        attrs,\n                        priority: unique ? -1 : l,\n                        array: false,\n                    });\n                }\n            }\n        });\n        merge.forEach((node) => {\n            const item = result.get(node);\n            const arr = item.attrs;\n            item.attrs = arr.reduceRight((memo, attrs) => ObjectExt.merge(memo, attrs), {});\n        });\n        return result;\n    }\n    updateRelativeAttrs(elem, processedAttrs, refBBox) {\n        const rawAttrs = processedAttrs.raw || {};\n        let nodeAttrs = processedAttrs.normal || {};\n        const setAttrs = processedAttrs.set;\n        const positionAttrs = processedAttrs.position;\n        const offsetAttrs = processedAttrs.offset;\n        const getOptions = () => ({\n            elem,\n            cell: this.cell,\n            view: this.view,\n            attrs: rawAttrs,\n            refBBox: refBBox.clone(),\n        });\n        if (setAttrs != null) {\n            Object.keys(setAttrs).forEach((name) => {\n                const val = setAttrs[name];\n                const def = this.getDefinition(name);\n                if (def != null) {\n                    const ret = FunctionExt.call(def.set, this.view, val, getOptions());\n                    if (typeof ret === 'object') {\n                        nodeAttrs = Object.assign(Object.assign({}, nodeAttrs), ret);\n                    }\n                    else if (ret != null) {\n                        nodeAttrs[name] = ret;\n                    }\n                }\n            });\n        }\n        if (elem instanceof HTMLElement) {\n            // TODO: setting the `transform` attribute on HTMLElements\n            // via `node.style.transform = 'matrix(...)';` would introduce\n            // a breaking change (e.g. basic.TextBlock).\n            this.view.setAttrs(nodeAttrs, elem);\n            return;\n        }\n        // The final translation of the subelement.\n        const nodeTransform = nodeAttrs.transform;\n        const transform = nodeTransform ? `${nodeTransform}` : null;\n        const nodeMatrix = Dom.transformStringToMatrix(transform);\n        const nodePosition = new Point(nodeMatrix.e, nodeMatrix.f);\n        if (nodeTransform) {\n            delete nodeAttrs.transform;\n            nodeMatrix.e = 0;\n            nodeMatrix.f = 0;\n        }\n        let positioned = false;\n        if (positionAttrs != null) {\n            Object.keys(positionAttrs).forEach((name) => {\n                const val = positionAttrs[name];\n                const def = this.getDefinition(name);\n                if (def != null) {\n                    const ts = FunctionExt.call(def.position, this.view, val, getOptions());\n                    if (ts != null) {\n                        positioned = true;\n                        nodePosition.translate(Point.create(ts));\n                    }\n                }\n            });\n        }\n        // The node bounding box could depend on the `size`\n        // set from the previous loop.\n        this.view.setAttrs(nodeAttrs, elem);\n        let offseted = false;\n        if (offsetAttrs != null) {\n            // Check if the node is visible\n            const nodeBoundingRect = this.view.getBoundingRectOfElement(elem);\n            if (nodeBoundingRect.width > 0 && nodeBoundingRect.height > 0) {\n                const nodeBBox = Util.transformRectangle(nodeBoundingRect, nodeMatrix);\n                Object.keys(offsetAttrs).forEach((name) => {\n                    const val = offsetAttrs[name];\n                    const def = this.getDefinition(name);\n                    if (def != null) {\n                        const ts = FunctionExt.call(def.offset, this.view, val, {\n                            elem,\n                            cell: this.cell,\n                            view: this.view,\n                            attrs: rawAttrs,\n                            refBBox: nodeBBox,\n                        });\n                        if (ts != null) {\n                            offseted = true;\n                            nodePosition.translate(Point.create(ts));\n                        }\n                    }\n                });\n            }\n        }\n        if (nodeTransform != null || positioned || offseted) {\n            nodePosition.round(1);\n            nodeMatrix.e = nodePosition.x;\n            nodeMatrix.f = nodePosition.y;\n            elem.setAttribute('transform', Dom.matrixToTransformString(nodeMatrix));\n        }\n    }\n    update(rootNode, attrs, options) {\n        const selectorCache = {};\n        const nodesAttrs = this.findAttrs(options.attrs || attrs, rootNode, selectorCache, options.selectors);\n        // `nodesAttrs` are different from all attributes, when\n        // rendering only attributes sent to this method.\n        const nodesAllAttrs = options.attrs\n            ? this.findAttrs(attrs, rootNode, selectorCache, options.selectors)\n            : nodesAttrs;\n        const specialItems = [];\n        nodesAttrs.each((data) => {\n            const node = data.elem;\n            const nodeAttrs = data.attrs;\n            const processed = this.processAttrs(node, nodeAttrs);\n            if (processed.set == null &&\n                processed.position == null &&\n                processed.offset == null) {\n                this.view.setAttrs(processed.normal, node);\n            }\n            else {\n                const data = nodesAllAttrs.get(node);\n                const nodeAllAttrs = data ? data.attrs : null;\n                const refSelector = nodeAllAttrs && nodeAttrs.ref == null\n                    ? nodeAllAttrs.ref\n                    : nodeAttrs.ref;\n                let refNode;\n                if (refSelector) {\n                    refNode = (selectorCache[refSelector] ||\n                        this.view.find(refSelector, rootNode, options.selectors))[0];\n                    if (!refNode) {\n                        throw new Error(`\"${refSelector}\" reference does not exist.`);\n                    }\n                }\n                else {\n                    refNode = null;\n                }\n                const item = {\n                    node,\n                    refNode,\n                    attributes: nodeAllAttrs,\n                    processedAttributes: processed,\n                };\n                // If an element in the list is positioned relative to this one, then\n                // we want to insert this one before it in the list.\n                const index = specialItems.findIndex((item) => item.refNode === node);\n                if (index > -1) {\n                    specialItems.splice(index, 0, item);\n                }\n                else {\n                    specialItems.push(item);\n                }\n            }\n        });\n        const bboxCache = new Dictionary();\n        let rotatableMatrix;\n        specialItems.forEach((item) => {\n            const node = item.node;\n            const refNode = item.refNode;\n            let unrotatedRefBBox;\n            const isRefNodeRotatable = refNode != null &&\n                options.rotatableNode != null &&\n                Dom.contains(options.rotatableNode, refNode);\n            // Find the reference element bounding box. If no reference was\n            // provided, we use the optional bounding box.\n            if (refNode) {\n                unrotatedRefBBox = bboxCache.get(refNode);\n            }\n            if (!unrotatedRefBBox) {\n                const target = (isRefNodeRotatable ? options.rotatableNode : rootNode);\n                unrotatedRefBBox = refNode\n                    ? Util.getBBox(refNode, { target })\n                    : options.rootBBox;\n                if (refNode) {\n                    bboxCache.set(refNode, unrotatedRefBBox);\n                }\n            }\n            let processedAttrs;\n            if (options.attrs && item.attributes) {\n                // If there was a special attribute affecting the position amongst\n                // passed-in attributes we have to merge it with the rest of the\n                // element's attributes as they are necessary to update the position\n                // relatively (i.e `ref-x` && 'ref-dx').\n                processedAttrs = this.processAttrs(node, item.attributes);\n                this.mergeProcessedAttrs(processedAttrs, item.processedAttributes);\n            }\n            else {\n                processedAttrs = item.processedAttributes;\n            }\n            let refBBox = unrotatedRefBBox;\n            if (isRefNodeRotatable &&\n                options.rotatableNode != null &&\n                !options.rotatableNode.contains(node)) {\n                // If the referenced node is inside the rotatable group while the\n                // updated node is outside, we need to take the rotatable node\n                // transformation into account.\n                if (!rotatableMatrix) {\n                    rotatableMatrix = Dom.transformStringToMatrix(Dom.attr(options.rotatableNode, 'transform'));\n                }\n                refBBox = Util.transformRectangle(unrotatedRefBBox, rotatableMatrix);\n            }\n            this.updateRelativeAttrs(node, processedAttrs, refBBox);\n        });\n    }\n}\n//# sourceMappingURL=attr.js.map","/* eslint-disable no-bitwise */\nexport class FlagManager {\n    get cell() {\n        return this.view.cell;\n    }\n    constructor(view, actions, bootstrap = []) {\n        this.view = view;\n        const flags = {};\n        const attrs = {};\n        let shift = 0;\n        Object.keys(actions).forEach((attr) => {\n            let labels = actions[attr];\n            if (!Array.isArray(labels)) {\n                labels = [labels];\n            }\n            labels.forEach((label) => {\n                let flag = flags[label];\n                if (!flag) {\n                    shift += 1;\n                    flag = flags[label] = 1 << shift;\n                }\n                attrs[attr] |= flag;\n            });\n        });\n        let labels = bootstrap;\n        if (!Array.isArray(labels)) {\n            labels = [labels];\n        }\n        labels.forEach((label) => {\n            if (!flags[label]) {\n                shift += 1;\n                flags[label] = 1 << shift;\n            }\n        });\n        // 26 - 30 are reserved for paper flags\n        // 31+ overflows maximal number\n        if (shift > 25) {\n            throw new Error('Maximum number of flags exceeded.');\n        }\n        this.flags = flags;\n        this.attrs = attrs;\n        this.bootstrap = bootstrap;\n    }\n    getFlag(label) {\n        const flags = this.flags;\n        if (flags == null) {\n            return 0;\n        }\n        if (Array.isArray(label)) {\n            return label.reduce((memo, key) => memo | flags[key], 0);\n        }\n        return flags[label] | 0;\n    }\n    hasAction(flag, label) {\n        return flag & this.getFlag(label);\n    }\n    removeAction(flag, label) {\n        return flag ^ (flag & this.getFlag(label));\n    }\n    getBootstrapFlag() {\n        return this.getFlag(this.bootstrap);\n    }\n    getChangedFlag() {\n        let flag = 0;\n        if (!this.attrs) {\n            return flag;\n        }\n        Object.keys(this.attrs).forEach((attr) => {\n            if (this.cell.hasChanged(attr)) {\n                flag |= this.attrs[attr];\n            }\n        });\n        return flag;\n    }\n}\n//# sourceMappingURL=flag.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\n/* eslint-disable @typescript-eslint/no-unused-vars */\nimport { Rectangle } from '@antv/x6-geometry';\nimport { ArrayExt, ObjectExt, Dom, FunctionExt, } from '@antv/x6-common';\nimport { Registry } from '../registry/registry';\nimport { View } from './view';\nimport { Cache } from './cache';\nimport { Markup } from './markup';\nimport { ToolsView } from './tool';\nimport { AttrManager } from './attr';\nimport { FlagManager } from './flag';\nimport { Util } from '../util';\nexport class CellView extends View {\n    static getDefaults() {\n        return this.defaults;\n    }\n    static config(options) {\n        this.defaults = this.getOptions(options);\n    }\n    static getOptions(options) {\n        const mergeActions = (arr1, arr2) => {\n            if (arr2 != null) {\n                return ArrayExt.uniq([\n                    ...(Array.isArray(arr1) ? arr1 : [arr1]),\n                    ...(Array.isArray(arr2) ? arr2 : [arr2]),\n                ]);\n            }\n            return Array.isArray(arr1) ? [...arr1] : [arr1];\n        };\n        const ret = ObjectExt.cloneDeep(this.getDefaults());\n        const { bootstrap, actions, events, documentEvents } = options, others = __rest(options, [\"bootstrap\", \"actions\", \"events\", \"documentEvents\"]);\n        if (bootstrap) {\n            ret.bootstrap = mergeActions(ret.bootstrap, bootstrap);\n        }\n        if (actions) {\n            Object.entries(actions).forEach(([key, val]) => {\n                const raw = ret.actions[key];\n                if (val && raw) {\n                    ret.actions[key] = mergeActions(raw, val);\n                }\n                else if (val) {\n                    ret.actions[key] = mergeActions(val);\n                }\n            });\n        }\n        if (events) {\n            ret.events = Object.assign(Object.assign({}, ret.events), events);\n        }\n        if (options.documentEvents) {\n            ret.documentEvents = Object.assign(Object.assign({}, ret.documentEvents), documentEvents);\n        }\n        return ObjectExt.merge(ret, others);\n    }\n    get [Symbol.toStringTag]() {\n        return CellView.toStringTag;\n    }\n    constructor(cell, options = {}) {\n        super();\n        this.cell = cell;\n        this.options = this.ensureOptions(options);\n        this.graph = this.options.graph;\n        this.attr = new AttrManager(this);\n        this.flag = new FlagManager(this, this.options.actions, this.options.bootstrap);\n        this.cache = new Cache(this);\n        this.setContainer(this.ensureContainer());\n        this.setup();\n        this.init();\n    }\n    init() { }\n    onRemove() {\n        this.removeTools();\n    }\n    get priority() {\n        return this.options.priority;\n    }\n    get rootSelector() {\n        return this.options.rootSelector;\n    }\n    getConstructor() {\n        return this.constructor;\n    }\n    ensureOptions(options) {\n        return this.getConstructor().getOptions(options);\n    }\n    getContainerTagName() {\n        return this.options.isSvgElement ? 'g' : 'div';\n    }\n    getContainerStyle() { }\n    getContainerAttrs() {\n        return {\n            'data-cell-id': this.cell.id,\n            'data-shape': this.cell.shape,\n        };\n    }\n    getContainerClassName() {\n        return this.prefixClassName('cell');\n    }\n    ensureContainer() {\n        return View.createElement(this.getContainerTagName(), this.options.isSvgElement);\n    }\n    setContainer(container) {\n        if (this.container !== container) {\n            this.undelegateEvents();\n            this.container = container;\n            if (this.options.events != null) {\n                this.delegateEvents(this.options.events);\n            }\n            const attrs = this.getContainerAttrs();\n            if (attrs != null) {\n                this.setAttrs(attrs, container);\n            }\n            const style = this.getContainerStyle();\n            if (style != null) {\n                this.setStyle(style, container);\n            }\n            const className = this.getContainerClassName();\n            if (className != null) {\n                this.addClass(className, container);\n            }\n        }\n        return this;\n    }\n    isNodeView() {\n        return false;\n    }\n    isEdgeView() {\n        return false;\n    }\n    render() {\n        return this;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    confirmUpdate(flag, options = {}) {\n        return 0;\n    }\n    getBootstrapFlag() {\n        return this.flag.getBootstrapFlag();\n    }\n    getFlag(actions) {\n        return this.flag.getFlag(actions);\n    }\n    hasAction(flag, actions) {\n        return this.flag.hasAction(flag, actions);\n    }\n    removeAction(flag, actions) {\n        return this.flag.removeAction(flag, actions);\n    }\n    handleAction(flag, action, handle, additionalRemovedActions) {\n        if (this.hasAction(flag, action)) {\n            handle();\n            const removedFlags = [action];\n            if (additionalRemovedActions) {\n                if (typeof additionalRemovedActions === 'string') {\n                    removedFlags.push(additionalRemovedActions);\n                }\n                else {\n                    removedFlags.push(...additionalRemovedActions);\n                }\n            }\n            return this.removeAction(flag, removedFlags);\n        }\n        return flag;\n    }\n    setup() {\n        this.cell.on('changed', ({ options }) => this.onAttrsChange(options));\n    }\n    onAttrsChange(options) {\n        let flag = this.flag.getChangedFlag();\n        if (options.updated || !flag) {\n            return;\n        }\n        if (options.dirty && this.hasAction(flag, 'update')) {\n            flag |= this.getFlag('render'); // eslint-disable-line no-bitwise\n        }\n        // tool changes should be sync render\n        if (options.toolId) {\n            options.async = false;\n        }\n        if (this.graph != null) {\n            this.graph.renderer.requestViewUpdate(this, flag, options);\n        }\n    }\n    parseJSONMarkup(markup, rootElem) {\n        const result = Markup.parseJSONMarkup(markup);\n        const selectors = result.selectors;\n        const rootSelector = this.rootSelector;\n        if (rootElem && rootSelector) {\n            if (selectors[rootSelector]) {\n                throw new Error('Invalid root selector');\n            }\n            selectors[rootSelector] = rootElem;\n        }\n        return result;\n    }\n    can(feature) {\n        let interacting = this.graph.options.interacting;\n        if (typeof interacting === 'function') {\n            interacting = FunctionExt.call(interacting, this.graph, this);\n        }\n        if (typeof interacting === 'object') {\n            let val = interacting[feature];\n            if (typeof val === 'function') {\n                val = FunctionExt.call(val, this.graph, this);\n            }\n            return val !== false;\n        }\n        if (typeof interacting === 'boolean') {\n            return interacting;\n        }\n        return false;\n    }\n    cleanCache() {\n        this.cache.clean();\n        return this;\n    }\n    getCache(elem) {\n        return this.cache.get(elem);\n    }\n    getDataOfElement(elem) {\n        return this.cache.getData(elem);\n    }\n    getMatrixOfElement(elem) {\n        return this.cache.getMatrix(elem);\n    }\n    getShapeOfElement(elem) {\n        return this.cache.getShape(elem);\n    }\n    getBoundingRectOfElement(elem) {\n        return this.cache.getBoundingRect(elem);\n    }\n    getBBoxOfElement(elem) {\n        const rect = this.getBoundingRectOfElement(elem);\n        const matrix = this.getMatrixOfElement(elem);\n        const rm = this.getRootRotatedMatrix();\n        const tm = this.getRootTranslatedMatrix();\n        return Util.transformRectangle(rect, tm.multiply(rm).multiply(matrix));\n    }\n    getUnrotatedBBoxOfElement(elem) {\n        const rect = this.getBoundingRectOfElement(elem);\n        const matrix = this.getMatrixOfElement(elem);\n        const tm = this.getRootTranslatedMatrix();\n        return Util.transformRectangle(rect, tm.multiply(matrix));\n    }\n    getBBox(options = {}) {\n        let bbox;\n        if (options.useCellGeometry) {\n            const cell = this.cell;\n            const angle = cell.isNode() ? cell.getAngle() : 0;\n            bbox = cell.getBBox().bbox(angle);\n        }\n        else {\n            bbox = this.getBBoxOfElement(this.container);\n        }\n        return this.graph.coord.localToGraphRect(bbox);\n    }\n    getRootTranslatedMatrix() {\n        const cell = this.cell;\n        const pos = cell.isNode() ? cell.getPosition() : { x: 0, y: 0 };\n        return Dom.createSVGMatrix().translate(pos.x, pos.y);\n    }\n    getRootRotatedMatrix() {\n        let matrix = Dom.createSVGMatrix();\n        const cell = this.cell;\n        const angle = cell.isNode() ? cell.getAngle() : 0;\n        if (angle) {\n            const bbox = cell.getBBox();\n            const cx = bbox.width / 2;\n            const cy = bbox.height / 2;\n            matrix = matrix.translate(cx, cy).rotate(angle).translate(-cx, -cy);\n        }\n        return matrix;\n    }\n    findMagnet(elem = this.container) {\n        return this.findByAttr('magnet', elem);\n    }\n    updateAttrs(rootNode, attrs, options = {}) {\n        if (options.rootBBox == null) {\n            options.rootBBox = new Rectangle();\n        }\n        if (options.selectors == null) {\n            options.selectors = this.selectors;\n        }\n        this.attr.update(rootNode, attrs, options);\n    }\n    isEdgeElement(magnet) {\n        return this.cell.isEdge() && (magnet == null || magnet === this.container);\n    }\n    // #region highlight\n    prepareHighlight(elem, options = {}) {\n        const magnet = elem || this.container;\n        options.partial = magnet === this.container;\n        return magnet;\n    }\n    highlight(elem, options = {}) {\n        const magnet = this.prepareHighlight(elem, options);\n        this.notify('cell:highlight', {\n            magnet,\n            options,\n            view: this,\n            cell: this.cell,\n        });\n        if (this.isEdgeView()) {\n            this.notify('edge:highlight', {\n                magnet,\n                options,\n                view: this,\n                edge: this.cell,\n                cell: this.cell,\n            });\n        }\n        else if (this.isNodeView()) {\n            this.notify('node:highlight', {\n                magnet,\n                options,\n                view: this,\n                node: this.cell,\n                cell: this.cell,\n            });\n        }\n        return this;\n    }\n    unhighlight(elem, options = {}) {\n        const magnet = this.prepareHighlight(elem, options);\n        this.notify('cell:unhighlight', {\n            magnet,\n            options,\n            view: this,\n            cell: this.cell,\n        });\n        if (this.isNodeView()) {\n            this.notify('node:unhighlight', {\n                magnet,\n                options,\n                view: this,\n                node: this.cell,\n                cell: this.cell,\n            });\n        }\n        else if (this.isEdgeView()) {\n            this.notify('edge:unhighlight', {\n                magnet,\n                options,\n                view: this,\n                edge: this.cell,\n                cell: this.cell,\n            });\n        }\n        return this;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    notifyUnhighlight(magnet, options) { }\n    // #endregion\n    getEdgeTerminal(magnet, x, y, edge, type) {\n        const cell = this.cell;\n        const portId = this.findAttr('port', magnet);\n        const selector = magnet.getAttribute('data-selector');\n        const terminal = { cell: cell.id };\n        if (selector != null) {\n            terminal.magnet = selector;\n        }\n        if (portId != null) {\n            terminal.port = portId;\n            if (cell.isNode()) {\n                if (!cell.hasPort(portId) && selector == null) {\n                    // port created via the `port` attribute (not API)\n                    terminal.selector = this.getSelector(magnet);\n                }\n            }\n        }\n        else if (selector == null && this.container !== magnet) {\n            terminal.selector = this.getSelector(magnet);\n        }\n        return terminal;\n    }\n    getMagnetFromEdgeTerminal(terminal) {\n        const cell = this.cell;\n        const root = this.container;\n        const portId = terminal.port;\n        let selector = terminal.magnet;\n        let magnet;\n        if (portId != null && cell.isNode() && cell.hasPort(portId)) {\n            magnet = this.findPortElem(portId, selector) || root;\n        }\n        else {\n            if (!selector) {\n                selector = terminal.selector;\n            }\n            if (!selector && portId != null) {\n                selector = `[port=\"${portId}\"]`;\n            }\n            magnet = this.findOne(selector, root, this.selectors);\n        }\n        return magnet;\n    }\n    hasTools(name) {\n        const tools = this.tools;\n        if (tools == null) {\n            return false;\n        }\n        if (name == null) {\n            return true;\n        }\n        return tools.name === name;\n    }\n    addTools(config) {\n        if (!this.can('toolsAddable')) {\n            return this;\n        }\n        this.removeTools();\n        if (config) {\n            const tools = ToolsView.isToolsView(config)\n                ? config\n                : new ToolsView(config);\n            this.tools = tools;\n            tools.config({ view: this });\n            tools.mount();\n        }\n        return this;\n    }\n    updateTools(options = {}) {\n        if (this.tools) {\n            this.tools.update(options);\n        }\n        return this;\n    }\n    removeTools() {\n        if (this.tools) {\n            this.tools.remove();\n            this.tools = null;\n        }\n        return this;\n    }\n    hideTools() {\n        if (this.tools) {\n            this.tools.hide();\n        }\n        return this;\n    }\n    showTools() {\n        if (this.tools) {\n            this.tools.show();\n        }\n        return this;\n    }\n    renderTools() {\n        const tools = this.cell.getTools();\n        this.addTools(tools);\n        return this;\n    }\n    notify(name, args) {\n        this.trigger(name, args);\n        this.graph.trigger(name, args);\n        return this;\n    }\n    getEventArgs(e, x, y) {\n        const view = this; // eslint-disable-line @typescript-eslint/no-this-alias\n        const cell = view.cell;\n        if (x == null || y == null) {\n            return { e, view, cell };\n        }\n        return { e, x, y, view, cell };\n    }\n    onClick(e, x, y) {\n        this.notify('cell:click', this.getEventArgs(e, x, y));\n    }\n    onDblClick(e, x, y) {\n        this.notify('cell:dblclick', this.getEventArgs(e, x, y));\n    }\n    onContextMenu(e, x, y) {\n        this.notify('cell:contextmenu', this.getEventArgs(e, x, y));\n    }\n    onMouseDown(e, x, y) {\n        if (this.cell.model) {\n            this.cachedModelForMouseEvent = this.cell.model;\n            this.cachedModelForMouseEvent.startBatch('mouse');\n        }\n        this.notify('cell:mousedown', this.getEventArgs(e, x, y));\n    }\n    onMouseUp(e, x, y) {\n        this.notify('cell:mouseup', this.getEventArgs(e, x, y));\n        if (this.cachedModelForMouseEvent) {\n            this.cachedModelForMouseEvent.stopBatch('mouse', { cell: this.cell });\n            this.cachedModelForMouseEvent = null;\n        }\n    }\n    onMouseMove(e, x, y) {\n        this.notify('cell:mousemove', this.getEventArgs(e, x, y));\n    }\n    onMouseOver(e) {\n        this.notify('cell:mouseover', this.getEventArgs(e));\n    }\n    onMouseOut(e) {\n        this.notify('cell:mouseout', this.getEventArgs(e));\n    }\n    onMouseEnter(e) {\n        this.notify('cell:mouseenter', this.getEventArgs(e));\n    }\n    onMouseLeave(e) {\n        this.notify('cell:mouseleave', this.getEventArgs(e));\n    }\n    onMouseWheel(e, x, y, delta) {\n        this.notify('cell:mousewheel', Object.assign({ delta }, this.getEventArgs(e, x, y)));\n    }\n    onCustomEvent(e, name, x, y) {\n        this.notify('cell:customevent', Object.assign({ name }, this.getEventArgs(e, x, y)));\n        this.notify(name, Object.assign({}, this.getEventArgs(e, x, y)));\n    }\n    onMagnetMouseDown(e, magnet, x, y) { }\n    onMagnetDblClick(e, magnet, x, y) { }\n    onMagnetContextMenu(e, magnet, x, y) { }\n    onLabelMouseDown(e, x, y) { }\n    checkMouseleave(e) {\n        const target = this.getEventTarget(e, { fromPoint: true });\n        const view = this.graph.findViewByElem(target);\n        if (view === this) {\n            return;\n        }\n        // Leaving the current view\n        this.onMouseLeave(e);\n        if (!view) {\n            return;\n        }\n        // Entering another view\n        view.onMouseEnter(e);\n    }\n}\nCellView.defaults = {\n    isSvgElement: true,\n    rootSelector: 'root',\n    priority: 0,\n    bootstrap: [],\n    actions: {},\n};\n(function (CellView) {\n    CellView.Flag = FlagManager;\n    CellView.Attr = AttrManager;\n})(CellView || (CellView = {}));\n(function (CellView) {\n    CellView.toStringTag = `X6.${CellView.name}`;\n    function isCellView(instance) {\n        if (instance == null) {\n            return false;\n        }\n        if (instance instanceof CellView) {\n            return true;\n        }\n        const tag = instance[Symbol.toStringTag];\n        const view = instance;\n        if ((tag == null || tag === CellView.toStringTag) &&\n            typeof view.isNodeView === 'function' &&\n            typeof view.isEdgeView === 'function' &&\n            typeof view.confirmUpdate === 'function') {\n            return true;\n        }\n        return false;\n    }\n    CellView.isCellView = isCellView;\n})(CellView || (CellView = {}));\n// decorators\n// ----\n(function (CellView) {\n    function priority(value) {\n        return function (ctor) {\n            ctor.config({ priority: value });\n        };\n    }\n    CellView.priority = priority;\n    function bootstrap(actions) {\n        return function (ctor) {\n            ctor.config({ bootstrap: actions });\n        };\n    }\n    CellView.bootstrap = bootstrap;\n})(CellView || (CellView = {}));\n(function (CellView) {\n    CellView.registry = Registry.create({\n        type: 'view',\n    });\n})(CellView || (CellView = {}));\n//# sourceMappingURL=cell.js.map","import { Dom, ObjectExt, StringExt } from '@antv/x6-common';\nimport { NodeTool, EdgeTool } from '../registry/tool';\nimport { View } from './view';\nimport { CellView } from './cell';\nimport { Markup } from './markup';\nexport class ToolsView extends View {\n    get name() {\n        return this.options.name;\n    }\n    get graph() {\n        return this.cellView.graph;\n    }\n    get cell() {\n        return this.cellView.cell;\n    }\n    get [Symbol.toStringTag]() {\n        return ToolsView.toStringTag;\n    }\n    constructor(options = {}) {\n        super();\n        this.svgContainer = this.createContainer(true, options);\n        this.htmlContainer = this.createContainer(false, options);\n        this.config(options);\n    }\n    createContainer(svg, options) {\n        const container = svg\n            ? View.createElement('g', true)\n            : View.createElement('div', false);\n        Dom.addClass(container, this.prefixClassName('cell-tools'));\n        if (options.className) {\n            Dom.addClass(container, options.className);\n        }\n        return container;\n    }\n    config(options) {\n        this.options = Object.assign(Object.assign({}, this.options), options);\n        if (!CellView.isCellView(options.view) || options.view === this.cellView) {\n            return this;\n        }\n        this.cellView = options.view;\n        if (this.cell.isEdge()) {\n            Dom.addClass(this.svgContainer, this.prefixClassName('edge-tools'));\n            Dom.addClass(this.htmlContainer, this.prefixClassName('edge-tools'));\n        }\n        else if (this.cell.isNode()) {\n            Dom.addClass(this.svgContainer, this.prefixClassName('node-tools'));\n            Dom.addClass(this.htmlContainer, this.prefixClassName('node-tools'));\n        }\n        this.svgContainer.setAttribute('data-cell-id', this.cell.id);\n        this.htmlContainer.setAttribute('data-cell-id', this.cell.id);\n        if (this.name) {\n            this.svgContainer.setAttribute('data-tools-name', this.name);\n            this.htmlContainer.setAttribute('data-tools-name', this.name);\n        }\n        const tools = this.options.items;\n        if (!Array.isArray(tools)) {\n            return this;\n        }\n        this.tools = [];\n        const normalizedTools = [];\n        tools.forEach((meta) => {\n            if (ToolsView.ToolItem.isToolItem(meta)) {\n                if (meta.name === 'vertices') {\n                    normalizedTools.unshift(meta);\n                }\n                else {\n                    normalizedTools.push(meta);\n                }\n            }\n            else {\n                const name = typeof meta === 'object' ? meta.name : meta;\n                if (name === 'vertices') {\n                    normalizedTools.unshift(meta);\n                }\n                else {\n                    normalizedTools.push(meta);\n                }\n            }\n        });\n        for (let i = 0; i < normalizedTools.length; i += 1) {\n            const meta = normalizedTools[i];\n            let tool;\n            if (ToolsView.ToolItem.isToolItem(meta)) {\n                tool = meta;\n            }\n            else {\n                const name = typeof meta === 'object' ? meta.name : meta;\n                const args = typeof meta === 'object' ? meta.args || {} : {};\n                if (name) {\n                    if (this.cell.isNode()) {\n                        const ctor = NodeTool.registry.get(name);\n                        if (ctor) {\n                            tool = new ctor(args); // eslint-disable-line\n                        }\n                        else {\n                            return NodeTool.registry.onNotFound(name);\n                        }\n                    }\n                    else if (this.cell.isEdge()) {\n                        const ctor = EdgeTool.registry.get(name);\n                        if (ctor) {\n                            tool = new ctor(args); // eslint-disable-line\n                        }\n                        else {\n                            return EdgeTool.registry.onNotFound(name);\n                        }\n                    }\n                }\n            }\n            if (tool) {\n                tool.config(this.cellView, this);\n                tool.render();\n                const container = tool.options.isSVGElement !== false\n                    ? this.svgContainer\n                    : this.htmlContainer;\n                container.appendChild(tool.container);\n                this.tools.push(tool);\n            }\n        }\n        return this;\n    }\n    update(options = {}) {\n        const tools = this.tools;\n        if (tools) {\n            tools.forEach((tool) => {\n                if (options.toolId !== tool.cid && tool.isVisible()) {\n                    tool.update();\n                }\n            });\n        }\n        return this;\n    }\n    focus(focusedTool) {\n        const tools = this.tools;\n        if (tools) {\n            tools.forEach((tool) => {\n                if (focusedTool === tool) {\n                    tool.show();\n                }\n                else {\n                    tool.hide();\n                }\n            });\n        }\n        return this;\n    }\n    blur(blurredTool) {\n        const tools = this.tools;\n        if (tools) {\n            tools.forEach((tool) => {\n                if (tool !== blurredTool && !tool.isVisible()) {\n                    tool.show();\n                    tool.update();\n                }\n            });\n        }\n        return this;\n    }\n    hide() {\n        return this.focus(null);\n    }\n    show() {\n        return this.blur(null);\n    }\n    remove() {\n        const tools = this.tools;\n        if (tools) {\n            tools.forEach((tool) => tool.remove());\n            this.tools = null;\n        }\n        Dom.remove(this.svgContainer);\n        Dom.remove(this.htmlContainer);\n        return super.remove();\n    }\n    mount() {\n        const tools = this.tools;\n        const cellView = this.cellView;\n        if (cellView && tools) {\n            const hasSVG = tools.some((tool) => tool.options.isSVGElement !== false);\n            const hasHTML = tools.some((tool) => tool.options.isSVGElement === false);\n            if (hasSVG) {\n                const parent = this.options.local\n                    ? cellView.container\n                    : cellView.graph.view.decorator;\n                parent.appendChild(this.svgContainer);\n            }\n            if (hasHTML) {\n                this.graph.container.appendChild(this.htmlContainer);\n            }\n        }\n        return this;\n    }\n}\n(function (ToolsView) {\n    ToolsView.toStringTag = `X6.${ToolsView.name}`;\n    function isToolsView(instance) {\n        if (instance == null) {\n            return false;\n        }\n        if (instance instanceof ToolsView) {\n            return true;\n        }\n        const tag = instance[Symbol.toStringTag];\n        const view = instance;\n        if ((tag == null || tag === ToolsView.toStringTag) &&\n            view.graph != null &&\n            view.cell != null &&\n            typeof view.config === 'function' &&\n            typeof view.update === 'function' &&\n            typeof view.focus === 'function' &&\n            typeof view.blur === 'function' &&\n            typeof view.show === 'function' &&\n            typeof view.hide === 'function') {\n            return true;\n        }\n        return false;\n    }\n    ToolsView.isToolsView = isToolsView;\n})(ToolsView || (ToolsView = {}));\n(function (ToolsView) {\n    class ToolItem extends View {\n        static getDefaults() {\n            return this.defaults;\n        }\n        static config(options) {\n            this.defaults = this.getOptions(options);\n        }\n        static getOptions(options) {\n            return ObjectExt.merge(ObjectExt.cloneDeep(this.getDefaults()), options);\n        }\n        get graph() {\n            return this.cellView.graph;\n        }\n        get cell() {\n            return this.cellView.cell;\n        }\n        get name() {\n            return this.options.name;\n        }\n        get [Symbol.toStringTag]() {\n            return ToolItem.toStringTag;\n        }\n        constructor(options = {}) {\n            super();\n            this.visible = true;\n            this.options = this.getOptions(options);\n            this.container = View.createElement(this.options.tagName || 'g', this.options.isSVGElement !== false);\n            Dom.addClass(this.container, this.prefixClassName('cell-tool'));\n            if (typeof this.options.className === 'string') {\n                Dom.addClass(this.container, this.options.className);\n            }\n            this.init();\n        }\n        init() { }\n        getOptions(options) {\n            const ctor = this.constructor;\n            return ctor.getOptions(options);\n        }\n        delegateEvents() {\n            if (this.options.events) {\n                super.delegateEvents(this.options.events);\n            }\n            return this;\n        }\n        config(view, toolsView) {\n            this.cellView = view;\n            this.parent = toolsView;\n            this.stamp(this.container);\n            if (this.cell.isEdge()) {\n                Dom.addClass(this.container, this.prefixClassName('edge-tool'));\n            }\n            else if (this.cell.isNode()) {\n                Dom.addClass(this.container, this.prefixClassName('node-tool'));\n            }\n            if (this.name) {\n                this.container.setAttribute('data-tool-name', this.name);\n            }\n            this.delegateEvents();\n            return this;\n        }\n        render() {\n            this.empty();\n            const markup = this.options.markup;\n            if (markup) {\n                const meta = Markup.parseJSONMarkup(markup);\n                this.container.appendChild(meta.fragment);\n                this.childNodes = meta.selectors;\n            }\n            this.onRender();\n            return this;\n        }\n        onRender() { }\n        update() {\n            return this;\n        }\n        stamp(elem) {\n            if (elem) {\n                elem.setAttribute('data-cell-id', this.cellView.cell.id);\n            }\n        }\n        show() {\n            this.container.style.display = '';\n            this.visible = true;\n            return this;\n        }\n        hide() {\n            this.container.style.display = 'none';\n            this.visible = false;\n            return this;\n        }\n        isVisible() {\n            return this.visible;\n        }\n        focus() {\n            const opacity = this.options.focusOpacity;\n            if (opacity != null && Number.isFinite(opacity)) {\n                this.container.style.opacity = `${opacity}`;\n            }\n            this.parent.focus(this);\n            return this;\n        }\n        blur() {\n            this.container.style.opacity = '';\n            this.parent.blur(this);\n            return this;\n        }\n        guard(evt) {\n            if (this.graph == null || this.cellView == null) {\n                return true;\n            }\n            return this.graph.view.guard(evt, this.cellView);\n        }\n    }\n    // #region static\n    ToolItem.defaults = {\n        isSVGElement: true,\n        tagName: 'g',\n    };\n    ToolsView.ToolItem = ToolItem;\n    (function (ToolItem) {\n        let counter = 0;\n        function getClassName(name) {\n            if (name) {\n                return StringExt.pascalCase(name);\n            }\n            counter += 1;\n            return `CustomTool${counter}`;\n        }\n        function define(options) {\n            const tool = ObjectExt.createClass(getClassName(options.name), this);\n            tool.config(options);\n            return tool;\n        }\n        ToolItem.define = define;\n    })(ToolItem = ToolsView.ToolItem || (ToolsView.ToolItem = {}));\n    (function (ToolItem) {\n        ToolItem.toStringTag = `X6.${ToolItem.name}`;\n        function isToolItem(instance) {\n            if (instance == null) {\n                return false;\n            }\n            if (instance instanceof ToolItem) {\n                return true;\n            }\n            const tag = instance[Symbol.toStringTag];\n            const view = instance;\n            if ((tag == null || tag === ToolItem.toStringTag) &&\n                view.graph != null &&\n                view.cell != null &&\n                typeof view.config === 'function' &&\n                typeof view.update === 'function' &&\n                typeof view.focus === 'function' &&\n                typeof view.blur === 'function' &&\n                typeof view.show === 'function' &&\n                typeof view.hide === 'function' &&\n                typeof view.isVisible === 'function') {\n                return true;\n            }\n            return false;\n        }\n        ToolItem.isToolItem = isToolItem;\n    })(ToolItem = ToolsView.ToolItem || (ToolsView.ToolItem = {}));\n})(ToolsView || (ToolsView = {}));\n//# sourceMappingURL=tool.js.map","export const noop = (terminal) => terminal;\n//# sourceMappingURL=noop.js.map","import { Point } from '@antv/x6-geometry';\nfunction toPercentage(value, max) {\n    if (max === 0) {\n        return '0%';\n    }\n    return `${Math.round((value / max) * 100)}%`;\n}\nfunction pin(relative) {\n    const strategy = (terminal, view, magnet, coords) => {\n        return view.isEdgeElement(magnet)\n            ? pinEdgeTerminal(relative, terminal, view, magnet, coords)\n            : pinNodeTerminal(relative, terminal, view, magnet, coords);\n    };\n    return strategy;\n}\nfunction pinNodeTerminal(relative, data, view, magnet, coords) {\n    const node = view.cell;\n    const angle = node.getAngle();\n    const bbox = view.getUnrotatedBBoxOfElement(magnet);\n    const center = node.getBBox().getCenter();\n    const pos = Point.create(coords).rotate(angle, center);\n    let dx = pos.x - bbox.x;\n    let dy = pos.y - bbox.y;\n    if (relative) {\n        dx = toPercentage(dx, bbox.width);\n        dy = toPercentage(dy, bbox.height);\n    }\n    data.anchor = {\n        name: 'topLeft',\n        args: {\n            dx,\n            dy,\n            rotate: true,\n        },\n    };\n    return data;\n}\nfunction pinEdgeTerminal(relative, end, view, magnet, coords) {\n    const connection = view.getConnection();\n    if (!connection) {\n        return end;\n    }\n    const length = connection.closestPointLength(coords);\n    if (relative) {\n        const totalLength = connection.length();\n        end.anchor = {\n            name: 'ratio',\n            args: {\n                ratio: length / totalLength,\n            },\n        };\n    }\n    else {\n        end.anchor = {\n            name: 'length',\n            args: {\n                length,\n            },\n        };\n    }\n    return end;\n}\nexport const pinRelative = pin(true);\nexport const pinAbsolute = pin(false);\n//# sourceMappingURL=pin.js.map","import { Registry } from '../registry';\nimport * as strategies from './main';\nexport var ConnectionStrategy;\n(function (ConnectionStrategy) {\n    ConnectionStrategy.presets = strategies;\n    ConnectionStrategy.registry = Registry.create({\n        type: 'connection strategy',\n    });\n    ConnectionStrategy.registry.register(ConnectionStrategy.presets, true);\n})(ConnectionStrategy || (ConnectionStrategy = {}));\n//# sourceMappingURL=index.js.map","import { FunctionExt } from '@antv/x6-common';\nimport { ConnectionStrategy } from '../connection-strategy';\nexport function getAnchor(pos, terminalView, terminalMagnet, type) {\n    const end = FunctionExt.call(ConnectionStrategy.presets.pinRelative, this.graph, {}, terminalView, terminalMagnet, pos, this.cell, type, {});\n    return end.anchor;\n}\nexport function getViewBBox(view, quick) {\n    if (quick) {\n        return view.cell.getBBox();\n    }\n    return view.cell.isEdge()\n        ? view.getConnection().bbox()\n        : view.getUnrotatedBBoxOfElement(view.container);\n}\n//# sourceMappingURL=util.js.map","import { Point } from '@antv/x6-geometry';\nimport { Dom, NumberExt, FunctionExt } from '@antv/x6-common';\nimport { ToolsView } from '../../view/tool';\nimport * as Util from './util';\nexport class Button extends ToolsView.ToolItem {\n    onRender() {\n        Dom.addClass(this.container, this.prefixClassName('cell-tool-button'));\n        this.update();\n    }\n    update() {\n        this.updatePosition();\n        return this;\n    }\n    updatePosition() {\n        const view = this.cellView;\n        const matrix = view.cell.isEdge()\n            ? this.getEdgeMatrix()\n            : this.getNodeMatrix();\n        Dom.transform(this.container, matrix, { absolute: true });\n    }\n    getNodeMatrix() {\n        const view = this.cellView;\n        const options = this.options;\n        let { x = 0, y = 0 } = options;\n        const { offset, useCellGeometry, rotate } = options;\n        let bbox = Util.getViewBBox(view, useCellGeometry);\n        const angle = view.cell.getAngle();\n        if (!rotate) {\n            bbox = bbox.bbox(angle);\n        }\n        let offsetX = 0;\n        let offsetY = 0;\n        if (typeof offset === 'number') {\n            offsetX = offset;\n            offsetY = offset;\n        }\n        else if (typeof offset === 'object') {\n            offsetX = offset.x;\n            offsetY = offset.y;\n        }\n        x = NumberExt.normalizePercentage(x, bbox.width);\n        y = NumberExt.normalizePercentage(y, bbox.height);\n        let matrix = Dom.createSVGMatrix().translate(bbox.x + bbox.width / 2, bbox.y + bbox.height / 2);\n        if (rotate) {\n            matrix = matrix.rotate(angle);\n        }\n        matrix = matrix.translate(x + offsetX - bbox.width / 2, y + offsetY - bbox.height / 2);\n        return matrix;\n    }\n    getEdgeMatrix() {\n        const view = this.cellView;\n        const options = this.options;\n        const { offset = 0, distance = 0, rotate } = options;\n        let tangent;\n        let position;\n        let angle;\n        const d = NumberExt.normalizePercentage(distance, 1);\n        if (d >= 0 && d <= 1) {\n            tangent = view.getTangentAtRatio(d);\n        }\n        else {\n            tangent = view.getTangentAtLength(d);\n        }\n        if (tangent) {\n            position = tangent.start;\n            angle = tangent.vector().vectorAngle(new Point(1, 0)) || 0;\n        }\n        else {\n            position = view.getConnection().start;\n            angle = 0;\n        }\n        let matrix = Dom.createSVGMatrix()\n            .translate(position.x, position.y)\n            .rotate(angle);\n        if (typeof offset === 'object') {\n            matrix = matrix.translate(offset.x || 0, offset.y || 0);\n        }\n        else {\n            matrix = matrix.translate(0, offset);\n        }\n        if (!rotate) {\n            matrix = matrix.rotate(-angle);\n        }\n        return matrix;\n    }\n    onMouseDown(e) {\n        if (this.guard(e)) {\n            return;\n        }\n        e.stopPropagation();\n        e.preventDefault();\n        const onClick = this.options.onClick;\n        if (typeof onClick === 'function') {\n            FunctionExt.call(onClick, this.cellView, {\n                e,\n                view: this.cellView,\n                cell: this.cellView.cell,\n                btn: this,\n            });\n        }\n    }\n}\n(function (Button) {\n    Button.config({\n        name: 'button',\n        useCellGeometry: true,\n        events: {\n            mousedown: 'onMouseDown',\n            touchstart: 'onMouseDown',\n        },\n    });\n})(Button || (Button = {}));\n(function (Button) {\n    Button.Remove = Button.define({\n        name: 'button-remove',\n        markup: [\n            {\n                tagName: 'circle',\n                selector: 'button',\n                attrs: {\n                    r: 7,\n                    fill: '#FF1D00',\n                    cursor: 'pointer',\n                },\n            },\n            {\n                tagName: 'path',\n                selector: 'icon',\n                attrs: {\n                    d: 'M -3 -3 3 3 M -3 3 3 -3',\n                    fill: 'none',\n                    stroke: '#FFFFFF',\n                    'stroke-width': 2,\n                    'pointer-events': 'none',\n                },\n            },\n        ],\n        distance: 60,\n        offset: 0,\n        useCellGeometry: true,\n        onClick({ view, btn }) {\n            btn.parent.remove();\n            view.cell.remove({ ui: true, toolId: btn.cid });\n        },\n    });\n})(Button || (Button = {}));\n//# sourceMappingURL=button.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { NumberExt, Dom } from '@antv/x6-common';\nimport { ToolsView } from '../../view/tool';\nimport * as Util from './util';\nexport class Boundary extends ToolsView.ToolItem {\n    onRender() {\n        Dom.addClass(this.container, this.prefixClassName('cell-tool-boundary'));\n        if (this.options.attrs) {\n            const _a = this.options.attrs, { class: className } = _a, attrs = __rest(_a, [\"class\"]);\n            Dom.attr(this.container, Dom.kebablizeAttrs(attrs));\n            if (className) {\n                Dom.addClass(this.container, className);\n            }\n        }\n        this.update();\n    }\n    update() {\n        const view = this.cellView;\n        const options = this.options;\n        const { useCellGeometry, rotate } = options;\n        const padding = NumberExt.normalizeSides(options.padding);\n        let bbox = Util.getViewBBox(view, useCellGeometry).moveAndExpand({\n            x: -padding.left,\n            y: -padding.top,\n            width: padding.left + padding.right,\n            height: padding.top + padding.bottom,\n        });\n        const cell = view.cell;\n        if (cell.isNode()) {\n            const angle = cell.getAngle();\n            if (angle) {\n                if (rotate) {\n                    const origin = cell.getBBox().getCenter();\n                    Dom.rotate(this.container, angle, origin.x, origin.y, {\n                        absolute: true,\n                    });\n                }\n                else {\n                    bbox = bbox.bbox(angle);\n                }\n            }\n        }\n        Dom.attr(this.container, bbox.toJSON());\n        return this;\n    }\n}\n(function (Boundary) {\n    Boundary.config({\n        name: 'boundary',\n        tagName: 'rect',\n        padding: 10,\n        useCellGeometry: true,\n        attrs: {\n            fill: 'none',\n            stroke: '#333',\n            'stroke-width': 0.5,\n            'stroke-dasharray': '5, 5',\n            'pointer-events': 'none',\n        },\n    });\n})(Boundary || (Boundary = {}));\n//# sourceMappingURL=boundary.js.map","import { Point } from '@antv/x6-geometry';\nimport { ModifierKey } from '@antv/x6-common';\nimport { Config } from '../../config';\nimport { View } from '../../view/view';\nimport { ToolsView } from '../../view/tool';\nexport class Vertices extends ToolsView.ToolItem {\n    constructor() {\n        super(...arguments);\n        this.handles = [];\n    }\n    get vertices() {\n        return this.cellView.cell.getVertices();\n    }\n    onRender() {\n        this.addClass(this.prefixClassName('edge-tool-vertices'));\n        if (this.options.addable) {\n            this.updatePath();\n        }\n        this.resetHandles();\n        this.renderHandles();\n        return this;\n    }\n    update() {\n        const vertices = this.vertices;\n        if (vertices.length === this.handles.length) {\n            this.updateHandles();\n        }\n        else {\n            this.resetHandles();\n            this.renderHandles();\n        }\n        if (this.options.addable) {\n            this.updatePath();\n        }\n        return this;\n    }\n    resetHandles() {\n        const handles = this.handles;\n        this.handles = [];\n        if (handles) {\n            handles.forEach((handle) => {\n                this.stopHandleListening(handle);\n                handle.remove();\n            });\n        }\n    }\n    renderHandles() {\n        const vertices = this.vertices;\n        for (let i = 0, l = vertices.length; i < l; i += 1) {\n            const vertex = vertices[i];\n            const createHandle = this.options.createHandle;\n            const processHandle = this.options.processHandle;\n            const handle = createHandle({\n                index: i,\n                graph: this.graph,\n                guard: (evt) => this.guard(evt),\n                attrs: this.options.attrs || {},\n            });\n            if (processHandle) {\n                processHandle(handle);\n            }\n            handle.updatePosition(vertex.x, vertex.y);\n            this.stamp(handle.container);\n            this.container.appendChild(handle.container);\n            this.handles.push(handle);\n            this.startHandleListening(handle);\n        }\n    }\n    updateHandles() {\n        const vertices = this.vertices;\n        for (let i = 0, l = vertices.length; i < l; i += 1) {\n            const vertex = vertices[i];\n            const handle = this.handles[i];\n            if (handle) {\n                handle.updatePosition(vertex.x, vertex.y);\n            }\n        }\n    }\n    updatePath() {\n        const connection = this.childNodes.connection;\n        if (connection) {\n            connection.setAttribute('d', this.cellView.getConnectionPathData());\n        }\n    }\n    startHandleListening(handle) {\n        const edgeView = this.cellView;\n        if (edgeView.can('vertexMovable')) {\n            handle.on('change', this.onHandleChange, this);\n            handle.on('changing', this.onHandleChanging, this);\n            handle.on('changed', this.onHandleChanged, this);\n        }\n        if (edgeView.can('vertexDeletable')) {\n            handle.on('remove', this.onHandleRemove, this);\n        }\n    }\n    stopHandleListening(handle) {\n        const edgeView = this.cellView;\n        if (edgeView.can('vertexMovable')) {\n            handle.off('change', this.onHandleChange, this);\n            handle.off('changing', this.onHandleChanging, this);\n            handle.off('changed', this.onHandleChanged, this);\n        }\n        if (edgeView.can('vertexDeletable')) {\n            handle.off('remove', this.onHandleRemove, this);\n        }\n    }\n    getNeighborPoints(index) {\n        const edgeView = this.cellView;\n        const vertices = this.vertices;\n        const prev = index > 0 ? vertices[index - 1] : edgeView.sourceAnchor;\n        const next = index < vertices.length - 1 ? vertices[index + 1] : edgeView.targetAnchor;\n        return {\n            prev: Point.create(prev),\n            next: Point.create(next),\n        };\n    }\n    getMouseEventArgs(evt) {\n        const e = this.normalizeEvent(evt);\n        const { x, y } = this.graph.snapToGrid(e.clientX, e.clientY);\n        return { e, x, y };\n    }\n    onHandleChange({ e }) {\n        this.focus();\n        const edgeView = this.cellView;\n        edgeView.cell.startBatch('move-vertex', { ui: true, toolId: this.cid });\n        if (!this.options.stopPropagation) {\n            const { e: evt, x, y } = this.getMouseEventArgs(e);\n            edgeView.notifyMouseDown(evt, x, y);\n        }\n    }\n    onHandleChanging({ handle, e, }) {\n        const edgeView = this.cellView;\n        const index = handle.options.index;\n        const { e: evt, x, y } = this.getMouseEventArgs(e);\n        const vertex = { x, y };\n        this.snapVertex(vertex, index);\n        edgeView.cell.setVertexAt(index, vertex, { ui: true, toolId: this.cid });\n        handle.updatePosition(vertex.x, vertex.y);\n        if (!this.options.stopPropagation) {\n            edgeView.notifyMouseMove(evt, x, y);\n        }\n    }\n    stopBatch(vertexAdded) {\n        this.cell.stopBatch('move-vertex', { ui: true, toolId: this.cid });\n        if (vertexAdded) {\n            this.cell.stopBatch('add-vertex', { ui: true, toolId: this.cid });\n        }\n    }\n    onHandleChanged({ e }) {\n        const options = this.options;\n        const edgeView = this.cellView;\n        if (options.addable) {\n            this.updatePath();\n        }\n        if (!options.removeRedundancies) {\n            this.stopBatch(this.eventData(e).vertexAdded);\n            return;\n        }\n        const verticesRemoved = edgeView.removeRedundantLinearVertices({\n            ui: true,\n            toolId: this.cid,\n        });\n        if (verticesRemoved) {\n            this.render();\n        }\n        this.blur();\n        this.stopBatch(this.eventData(e).vertexAdded);\n        const { e: evt, x, y } = this.getMouseEventArgs(e);\n        if (!this.options.stopPropagation) {\n            edgeView.notifyMouseUp(evt, x, y);\n        }\n        edgeView.checkMouseleave(evt);\n        options.onChanged && options.onChanged({ edge: edgeView.cell, edgeView });\n    }\n    snapVertex(vertex, index) {\n        const snapRadius = this.options.snapRadius || 0;\n        if (snapRadius > 0) {\n            const neighbors = this.getNeighborPoints(index);\n            const prev = neighbors.prev;\n            const next = neighbors.next;\n            if (Math.abs(vertex.x - prev.x) < snapRadius) {\n                vertex.x = prev.x;\n            }\n            else if (Math.abs(vertex.x - next.x) < snapRadius) {\n                vertex.x = next.x;\n            }\n            if (Math.abs(vertex.y - prev.y) < snapRadius) {\n                vertex.y = neighbors.prev.y;\n            }\n            else if (Math.abs(vertex.y - next.y) < snapRadius) {\n                vertex.y = next.y;\n            }\n        }\n    }\n    onHandleRemove({ handle, e }) {\n        if (this.options.removable) {\n            const index = handle.options.index;\n            const edgeView = this.cellView;\n            edgeView.cell.removeVertexAt(index, { ui: true });\n            if (this.options.addable) {\n                this.updatePath();\n            }\n            edgeView.checkMouseleave(this.normalizeEvent(e));\n        }\n    }\n    allowAddVertex(e) {\n        const guard = this.guard(e);\n        const addable = this.options.addable && this.cellView.can('vertexAddable');\n        const matchModifiers = this.options.modifiers\n            ? ModifierKey.isMatch(e, this.options.modifiers)\n            : true;\n        return !guard && addable && matchModifiers;\n    }\n    onPathMouseDown(evt) {\n        const edgeView = this.cellView;\n        if (!this.allowAddVertex(evt)) {\n            return;\n        }\n        evt.stopPropagation();\n        evt.preventDefault();\n        const e = this.normalizeEvent(evt);\n        const vertex = this.graph.snapToGrid(e.clientX, e.clientY).toJSON();\n        edgeView.cell.startBatch('add-vertex', { ui: true, toolId: this.cid });\n        const index = edgeView.getVertexIndex(vertex.x, vertex.y);\n        this.snapVertex(vertex, index);\n        edgeView.cell.insertVertex(vertex, index, {\n            ui: true,\n            toolId: this.cid,\n        });\n        this.render();\n        const handle = this.handles[index];\n        this.eventData(e, { vertexAdded: true });\n        handle.onMouseDown(e);\n    }\n    onRemove() {\n        this.resetHandles();\n    }\n}\n(function (Vertices) {\n    class Handle extends View {\n        get graph() {\n            return this.options.graph;\n        }\n        constructor(options) {\n            super();\n            this.options = options;\n            this.render();\n            this.delegateEvents({\n                mousedown: 'onMouseDown',\n                touchstart: 'onMouseDown',\n                dblclick: 'onDoubleClick',\n            });\n        }\n        render() {\n            this.container = View.createElement('circle', true);\n            const attrs = this.options.attrs;\n            if (typeof attrs === 'function') {\n                const defaults = Vertices.getDefaults();\n                this.setAttrs(Object.assign(Object.assign({}, defaults.attrs), attrs(this)));\n            }\n            else {\n                this.setAttrs(attrs);\n            }\n            this.addClass(this.prefixClassName('edge-tool-vertex'));\n        }\n        updatePosition(x, y) {\n            this.setAttrs({ cx: x, cy: y });\n        }\n        onMouseDown(evt) {\n            if (this.options.guard(evt)) {\n                return;\n            }\n            evt.stopPropagation();\n            evt.preventDefault();\n            this.graph.view.undelegateEvents();\n            this.delegateDocumentEvents({\n                mousemove: 'onMouseMove',\n                touchmove: 'onMouseMove',\n                mouseup: 'onMouseUp',\n                touchend: 'onMouseUp',\n                touchcancel: 'onMouseUp',\n            }, evt.data);\n            this.emit('change', { e: evt, handle: this });\n        }\n        onMouseMove(evt) {\n            this.emit('changing', { e: evt, handle: this });\n        }\n        onMouseUp(evt) {\n            this.emit('changed', { e: evt, handle: this });\n            this.undelegateDocumentEvents();\n            this.graph.view.delegateEvents();\n        }\n        onDoubleClick(evt) {\n            this.emit('remove', { e: evt, handle: this });\n        }\n    }\n    Vertices.Handle = Handle;\n})(Vertices || (Vertices = {}));\n(function (Vertices) {\n    const pathClassName = Config.prefix('edge-tool-vertex-path');\n    Vertices.config({\n        name: 'vertices',\n        snapRadius: 20,\n        addable: true,\n        removable: true,\n        removeRedundancies: true,\n        stopPropagation: true,\n        attrs: {\n            r: 6,\n            fill: '#333',\n            stroke: '#fff',\n            cursor: 'move',\n            'stroke-width': 2,\n        },\n        createHandle: (options) => new Vertices.Handle(options),\n        markup: [\n            {\n                tagName: 'path',\n                selector: 'connection',\n                className: pathClassName,\n                attrs: {\n                    fill: 'none',\n                    stroke: 'transparent',\n                    'stroke-width': 10,\n                    cursor: 'pointer',\n                },\n            },\n        ],\n        events: {\n            [`mousedown .${pathClassName}`]: 'onPathMouseDown',\n            [`touchstart .${pathClassName}`]: 'onPathMouseDown',\n        },\n    });\n})(Vertices || (Vertices = {}));\n//# sourceMappingURL=vertices.js.map","import { Dom, ObjectExt, FunctionExt } from '@antv/x6-common';\nimport { Point, Line } from '@antv/x6-geometry';\nimport { View } from '../../view/view';\nimport { ToolsView } from '../../view/tool';\nimport * as Util from './util';\nexport class Segments extends ToolsView.ToolItem {\n    constructor() {\n        super(...arguments);\n        this.handles = [];\n    }\n    get vertices() {\n        return this.cellView.cell.getVertices();\n    }\n    update() {\n        this.render();\n        return this;\n    }\n    onRender() {\n        Dom.addClass(this.container, this.prefixClassName('edge-tool-segments'));\n        this.resetHandles();\n        const edgeView = this.cellView;\n        const vertices = [...this.vertices];\n        vertices.unshift(edgeView.sourcePoint);\n        vertices.push(edgeView.targetPoint);\n        for (let i = 0, l = vertices.length; i < l - 1; i += 1) {\n            const vertex = vertices[i];\n            const nextVertex = vertices[i + 1];\n            const handle = this.renderHandle(vertex, nextVertex, i);\n            this.stamp(handle.container);\n            this.handles.push(handle);\n        }\n        return this;\n    }\n    renderHandle(vertex, nextVertex, index) {\n        const handle = this.options.createHandle({\n            index,\n            graph: this.graph,\n            guard: (evt) => this.guard(evt),\n            attrs: this.options.attrs || {},\n        });\n        if (this.options.processHandle) {\n            this.options.processHandle(handle);\n        }\n        this.updateHandle(handle, vertex, nextVertex);\n        this.container.appendChild(handle.container);\n        this.startHandleListening(handle);\n        return handle;\n    }\n    startHandleListening(handle) {\n        handle.on('change', this.onHandleChange, this);\n        handle.on('changing', this.onHandleChanging, this);\n        handle.on('changed', this.onHandleChanged, this);\n    }\n    stopHandleListening(handle) {\n        handle.off('change', this.onHandleChange, this);\n        handle.off('changing', this.onHandleChanging, this);\n        handle.off('changed', this.onHandleChanged, this);\n    }\n    resetHandles() {\n        const handles = this.handles;\n        this.handles = [];\n        if (handles) {\n            handles.forEach((handle) => {\n                this.stopHandleListening(handle);\n                handle.remove();\n            });\n        }\n    }\n    shiftHandleIndexes(delta) {\n        const handles = this.handles;\n        for (let i = 0, n = handles.length; i < n; i += 1) {\n            handles[i].options.index += delta;\n        }\n    }\n    resetAnchor(type, anchor) {\n        const edge = this.cellView.cell;\n        const options = {\n            ui: true,\n            toolId: this.cid,\n        };\n        if (anchor) {\n            edge.prop([type, 'anchor'], anchor, options);\n        }\n        else {\n            edge.removeProp([type, 'anchor'], options);\n        }\n    }\n    snapHandle(handle, position, data) {\n        const axis = handle.options.axis;\n        const index = handle.options.index;\n        const edgeView = this.cellView;\n        const edge = edgeView.cell;\n        const vertices = edge.getVertices();\n        const prev = vertices[index - 2] || data.sourceAnchor;\n        const next = vertices[index + 1] || data.targetAnchor;\n        const snapRadius = this.options.snapRadius;\n        if (Math.abs(position[axis] - prev[axis]) < snapRadius) {\n            position[axis] = prev[axis];\n        }\n        else if (Math.abs(position[axis] - next[axis]) < snapRadius) {\n            position[axis] = next[axis];\n        }\n        return position;\n    }\n    onHandleChanging({ handle, e, }) {\n        const graph = this.graph;\n        const options = this.options;\n        const edgeView = this.cellView;\n        const anchorFn = options.anchor;\n        const axis = handle.options.axis;\n        const index = handle.options.index - 1;\n        const data = this.getEventData(e);\n        const evt = this.normalizeEvent(e);\n        const coords = graph.snapToGrid(evt.clientX, evt.clientY);\n        const position = this.snapHandle(handle, coords.clone(), data);\n        const vertices = ObjectExt.cloneDeep(this.vertices);\n        let vertex = vertices[index];\n        let nextVertex = vertices[index + 1];\n        // First Segment\n        const sourceView = edgeView.sourceView;\n        const sourceBBox = edgeView.sourceBBox;\n        let changeSourceAnchor = false;\n        let deleteSourceAnchor = false;\n        if (!vertex) {\n            vertex = edgeView.sourceAnchor.toJSON();\n            vertex[axis] = position[axis];\n            if (sourceBBox.containsPoint(vertex)) {\n                changeSourceAnchor = true;\n            }\n            else {\n                vertices.unshift(vertex);\n                this.shiftHandleIndexes(1);\n                deleteSourceAnchor = true;\n            }\n        }\n        else if (index === 0) {\n            if (sourceBBox.containsPoint(vertex)) {\n                vertices.shift();\n                this.shiftHandleIndexes(-1);\n                changeSourceAnchor = true;\n            }\n            else {\n                vertex[axis] = position[axis];\n                deleteSourceAnchor = true;\n            }\n        }\n        else {\n            vertex[axis] = position[axis];\n        }\n        if (typeof anchorFn === 'function' && sourceView) {\n            if (changeSourceAnchor) {\n                const sourceAnchorPosition = data.sourceAnchor.clone();\n                sourceAnchorPosition[axis] = position[axis];\n                const sourceAnchor = FunctionExt.call(anchorFn, edgeView, sourceAnchorPosition, sourceView, edgeView.sourceMagnet || sourceView.container, 'source', edgeView, this);\n                this.resetAnchor('source', sourceAnchor);\n            }\n            if (deleteSourceAnchor) {\n                this.resetAnchor('source', data.sourceAnchorDef);\n            }\n        }\n        // Last segment\n        const targetView = edgeView.targetView;\n        const targetBBox = edgeView.targetBBox;\n        let changeTargetAnchor = false;\n        let deleteTargetAnchor = false;\n        if (!nextVertex) {\n            nextVertex = edgeView.targetAnchor.toJSON();\n            nextVertex[axis] = position[axis];\n            if (targetBBox.containsPoint(nextVertex)) {\n                changeTargetAnchor = true;\n            }\n            else {\n                vertices.push(nextVertex);\n                deleteTargetAnchor = true;\n            }\n        }\n        else if (index === vertices.length - 2) {\n            if (targetBBox.containsPoint(nextVertex)) {\n                vertices.pop();\n                changeTargetAnchor = true;\n            }\n            else {\n                nextVertex[axis] = position[axis];\n                deleteTargetAnchor = true;\n            }\n        }\n        else {\n            nextVertex[axis] = position[axis];\n        }\n        if (typeof anchorFn === 'function' && targetView) {\n            if (changeTargetAnchor) {\n                const targetAnchorPosition = data.targetAnchor.clone();\n                targetAnchorPosition[axis] = position[axis];\n                const targetAnchor = FunctionExt.call(anchorFn, edgeView, targetAnchorPosition, targetView, edgeView.targetMagnet || targetView.container, 'target', edgeView, this);\n                this.resetAnchor('target', targetAnchor);\n            }\n            if (deleteTargetAnchor) {\n                this.resetAnchor('target', data.targetAnchorDef);\n            }\n        }\n        if (!Point.equalPoints(vertices, this.vertices)) {\n            this.cellView.cell.setVertices(vertices, { ui: true, toolId: this.cid });\n        }\n        this.updateHandle(handle, vertex, nextVertex, 0);\n        if (!options.stopPropagation) {\n            edgeView.notifyMouseMove(evt, coords.x, coords.y);\n        }\n    }\n    onHandleChange({ handle, e }) {\n        const options = this.options;\n        const handles = this.handles;\n        const edgeView = this.cellView;\n        const index = handle.options.index;\n        if (!Array.isArray(handles)) {\n            return;\n        }\n        for (let i = 0, n = handles.length; i < n; i += 1) {\n            if (i !== index) {\n                handles[i].hide();\n            }\n        }\n        this.focus();\n        this.setEventData(e, {\n            sourceAnchor: edgeView.sourceAnchor.clone(),\n            targetAnchor: edgeView.targetAnchor.clone(),\n            sourceAnchorDef: ObjectExt.cloneDeep(this.cell.prop(['source', 'anchor'])),\n            targetAnchorDef: ObjectExt.cloneDeep(this.cell.prop(['target', 'anchor'])),\n        });\n        this.cell.startBatch('move-segment', { ui: true, toolId: this.cid });\n        if (!options.stopPropagation) {\n            const normalizedEvent = this.normalizeEvent(e);\n            const coords = this.graph.snapToGrid(normalizedEvent.clientX, normalizedEvent.clientY);\n            edgeView.notifyMouseDown(normalizedEvent, coords.x, coords.y);\n        }\n    }\n    onHandleChanged({ e }) {\n        const options = this.options;\n        const edgeView = this.cellView;\n        if (options.removeRedundancies) {\n            edgeView.removeRedundantLinearVertices({ ui: true, toolId: this.cid });\n        }\n        const normalizedEvent = this.normalizeEvent(e);\n        const coords = this.graph.snapToGrid(normalizedEvent.clientX, normalizedEvent.clientY);\n        this.render();\n        this.blur();\n        this.cell.stopBatch('move-segment', { ui: true, toolId: this.cid });\n        if (!options.stopPropagation) {\n            edgeView.notifyMouseUp(normalizedEvent, coords.x, coords.y);\n        }\n        edgeView.checkMouseleave(normalizedEvent);\n        options.onChanged && options.onChanged({ edge: edgeView.cell, edgeView });\n    }\n    updateHandle(handle, vertex, nextVertex, offset = 0) {\n        const precision = this.options.precision || 0;\n        const vertical = Math.abs(vertex.x - nextVertex.x) < precision;\n        const horizontal = Math.abs(vertex.y - nextVertex.y) < precision;\n        if (vertical || horizontal) {\n            const segmentLine = new Line(vertex, nextVertex);\n            const length = segmentLine.length();\n            if (length < this.options.threshold) {\n                handle.hide();\n            }\n            else {\n                const position = segmentLine.getCenter();\n                const axis = vertical ? 'x' : 'y';\n                position[axis] += offset || 0;\n                const angle = segmentLine.vector().vectorAngle(new Point(1, 0));\n                handle.updatePosition(position.x, position.y, angle, this.cellView);\n                handle.show();\n                handle.options.axis = axis;\n            }\n        }\n        else {\n            handle.hide();\n        }\n    }\n    onRemove() {\n        this.resetHandles();\n    }\n}\n(function (Segments) {\n    class Handle extends View {\n        constructor(options) {\n            super();\n            this.options = options;\n            this.render();\n            this.delegateEvents({\n                mousedown: 'onMouseDown',\n                touchstart: 'onMouseDown',\n            });\n        }\n        render() {\n            this.container = View.createElement('rect', true);\n            const attrs = this.options.attrs;\n            if (typeof attrs === 'function') {\n                const defaults = Segments.getDefaults();\n                this.setAttrs(Object.assign(Object.assign({}, defaults.attrs), attrs(this)));\n            }\n            else {\n                this.setAttrs(attrs);\n            }\n            this.addClass(this.prefixClassName('edge-tool-segment'));\n        }\n        updatePosition(x, y, angle, view) {\n            const p = view.getClosestPoint(new Point(x, y)) || new Point(x, y);\n            let matrix = Dom.createSVGMatrix().translate(p.x, p.y);\n            if (!p.equals({ x, y })) {\n                const line = new Line(x, y, p.x, p.y);\n                let deg = line.vector().vectorAngle(new Point(1, 0));\n                if (deg !== 0) {\n                    deg += 90;\n                }\n                matrix = matrix.rotate(deg);\n            }\n            else {\n                matrix = matrix.rotate(angle);\n            }\n            this.setAttrs({\n                transform: Dom.matrixToTransformString(matrix),\n                cursor: angle % 180 === 0 ? 'row-resize' : 'col-resize',\n            });\n        }\n        onMouseDown(evt) {\n            if (this.options.guard(evt)) {\n                return;\n            }\n            this.trigger('change', { e: evt, handle: this });\n            evt.stopPropagation();\n            evt.preventDefault();\n            this.options.graph.view.undelegateEvents();\n            this.delegateDocumentEvents({\n                mousemove: 'onMouseMove',\n                touchmove: 'onMouseMove',\n                mouseup: 'onMouseUp',\n                touchend: 'onMouseUp',\n                touchcancel: 'onMouseUp',\n            }, evt.data);\n        }\n        onMouseMove(evt) {\n            this.emit('changing', { e: evt, handle: this });\n        }\n        onMouseUp(evt) {\n            this.emit('changed', { e: evt, handle: this });\n            this.undelegateDocumentEvents();\n            this.options.graph.view.delegateEvents();\n        }\n        show() {\n            this.container.style.display = '';\n        }\n        hide() {\n            this.container.style.display = 'none';\n        }\n    }\n    Segments.Handle = Handle;\n})(Segments || (Segments = {}));\n(function (Segments) {\n    Segments.config({\n        name: 'segments',\n        precision: 0.5,\n        threshold: 40,\n        snapRadius: 10,\n        stopPropagation: true,\n        removeRedundancies: true,\n        attrs: {\n            width: 20,\n            height: 8,\n            x: -10,\n            y: -4,\n            rx: 4,\n            ry: 4,\n            fill: '#333',\n            stroke: '#fff',\n            'stroke-width': 2,\n        },\n        createHandle: (options) => new Segments.Handle(options),\n        anchor: Util.getAnchor,\n    });\n})(Segments || (Segments = {}));\n//# sourceMappingURL=segments.js.map","import { Dom, FunctionExt } from '@antv/x6-common';\nimport { Point } from '@antv/x6-geometry';\nimport { ToolsView } from '../../view/tool';\nimport * as Util from './util';\nclass Anchor extends ToolsView.ToolItem {\n    get type() {\n        return this.options.type;\n    }\n    onRender() {\n        Dom.addClass(this.container, this.prefixClassName(`edge-tool-${this.type}-anchor`));\n        this.toggleArea(false);\n        this.update();\n    }\n    update() {\n        const type = this.type;\n        const edgeView = this.cellView;\n        const terminalView = edgeView.getTerminalView(type);\n        if (terminalView) {\n            this.updateAnchor();\n            this.updateArea();\n            this.container.style.display = '';\n        }\n        else {\n            this.container.style.display = 'none';\n        }\n        return this;\n    }\n    updateAnchor() {\n        const childNodes = this.childNodes;\n        if (!childNodes) {\n            return;\n        }\n        const anchorNode = childNodes.anchor;\n        if (!anchorNode) {\n            return;\n        }\n        const type = this.type;\n        const edgeView = this.cellView;\n        const options = this.options;\n        const position = edgeView.getTerminalAnchor(type);\n        const customAnchor = edgeView.cell.prop([type, 'anchor']);\n        anchorNode.setAttribute('transform', `translate(${position.x}, ${position.y})`);\n        const anchorAttrs = customAnchor\n            ? options.customAnchorAttrs\n            : options.defaultAnchorAttrs;\n        if (anchorAttrs) {\n            Object.keys(anchorAttrs).forEach((attrName) => {\n                anchorNode.setAttribute(attrName, anchorAttrs[attrName]);\n            });\n        }\n    }\n    updateArea() {\n        const childNodes = this.childNodes;\n        if (!childNodes) {\n            return;\n        }\n        const areaNode = childNodes.area;\n        if (!areaNode) {\n            return;\n        }\n        const type = this.type;\n        const edgeView = this.cellView;\n        const terminalView = edgeView.getTerminalView(type);\n        if (terminalView) {\n            const terminalCell = terminalView.cell;\n            const magnet = edgeView.getTerminalMagnet(type);\n            let padding = this.options.areaPadding || 0;\n            if (!Number.isFinite(padding)) {\n                padding = 0;\n            }\n            let bbox;\n            let angle;\n            let center;\n            if (terminalView.isEdgeElement(magnet)) {\n                bbox = terminalView.getBBox();\n                angle = 0;\n                center = bbox.getCenter();\n            }\n            else {\n                bbox = terminalView.getUnrotatedBBoxOfElement(magnet);\n                angle = terminalCell.getAngle();\n                center = bbox.getCenter();\n                if (angle) {\n                    center.rotate(-angle, terminalCell.getBBox().getCenter());\n                }\n            }\n            bbox.inflate(padding);\n            Dom.attr(areaNode, {\n                x: -bbox.width / 2,\n                y: -bbox.height / 2,\n                width: bbox.width,\n                height: bbox.height,\n                transform: `translate(${center.x}, ${center.y}) rotate(${angle})`,\n            });\n        }\n    }\n    toggleArea(visible) {\n        if (this.childNodes) {\n            const elem = this.childNodes.area;\n            if (elem) {\n                elem.style.display = visible ? '' : 'none';\n            }\n        }\n    }\n    onMouseDown(evt) {\n        if (this.guard(evt)) {\n            return;\n        }\n        evt.stopPropagation();\n        evt.preventDefault();\n        this.graph.view.undelegateEvents();\n        if (this.options.documentEvents) {\n            this.delegateDocumentEvents(this.options.documentEvents);\n        }\n        this.focus();\n        this.toggleArea(this.options.restrictArea);\n        this.cell.startBatch('move-anchor', {\n            ui: true,\n            toolId: this.cid,\n        });\n    }\n    resetAnchor(anchor) {\n        const type = this.type;\n        const cell = this.cell;\n        if (anchor) {\n            cell.prop([type, 'anchor'], anchor, {\n                rewrite: true,\n                ui: true,\n                toolId: this.cid,\n            });\n        }\n        else {\n            cell.removeProp([type, 'anchor'], {\n                ui: true,\n                toolId: this.cid,\n            });\n        }\n    }\n    onMouseMove(evt) {\n        const terminalType = this.type;\n        const edgeView = this.cellView;\n        const terminalView = edgeView.getTerminalView(terminalType);\n        if (terminalView == null) {\n            return;\n        }\n        const e = this.normalizeEvent(evt);\n        const terminalCell = terminalView.cell;\n        const terminalMagnet = edgeView.getTerminalMagnet(terminalType);\n        let coords = this.graph.coord.clientToLocalPoint(e.clientX, e.clientY);\n        const snapFn = this.options.snap;\n        if (typeof snapFn === 'function') {\n            const tmp = FunctionExt.call(snapFn, edgeView, coords, terminalView, terminalMagnet, terminalType, edgeView, this);\n            coords = Point.create(tmp);\n        }\n        if (this.options.restrictArea) {\n            if (terminalView.isEdgeElement(terminalMagnet)) {\n                const pointAtConnection = terminalView.getClosestPoint(coords);\n                if (pointAtConnection) {\n                    coords = pointAtConnection;\n                }\n            }\n            else {\n                const bbox = terminalView.getUnrotatedBBoxOfElement(terminalMagnet);\n                const angle = terminalCell.getAngle();\n                const origin = terminalCell.getBBox().getCenter();\n                const rotatedCoords = coords.clone().rotate(angle, origin);\n                if (!bbox.containsPoint(rotatedCoords)) {\n                    coords = bbox\n                        .getNearestPointToPoint(rotatedCoords)\n                        .rotate(-angle, origin);\n                }\n            }\n        }\n        let anchor;\n        const anchorFn = this.options.anchor;\n        if (typeof anchorFn === 'function') {\n            anchor = FunctionExt.call(anchorFn, edgeView, coords, terminalView, terminalMagnet, terminalType, edgeView, this);\n        }\n        this.resetAnchor(anchor);\n        this.update();\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    onMouseUp(evt) {\n        this.graph.view.delegateEvents();\n        this.undelegateDocumentEvents();\n        this.blur();\n        this.toggleArea(false);\n        const edgeView = this.cellView;\n        if (this.options.removeRedundancies) {\n            edgeView.removeRedundantLinearVertices({ ui: true, toolId: this.cid });\n        }\n        this.cell.stopBatch('move-anchor', { ui: true, toolId: this.cid });\n    }\n    onDblClick() {\n        const anchor = this.options.resetAnchor;\n        if (anchor) {\n            this.resetAnchor(anchor === true ? undefined : anchor);\n        }\n        this.update();\n    }\n}\n(function (Anchor) {\n    Anchor.config({\n        tagName: 'g',\n        markup: [\n            {\n                tagName: 'circle',\n                selector: 'anchor',\n                attrs: {\n                    cursor: 'pointer',\n                },\n            },\n            {\n                tagName: 'rect',\n                selector: 'area',\n                attrs: {\n                    'pointer-events': 'none',\n                    fill: 'none',\n                    stroke: '#33334F',\n                    'stroke-dasharray': '2,4',\n                    rx: 5,\n                    ry: 5,\n                },\n            },\n        ],\n        events: {\n            mousedown: 'onMouseDown',\n            touchstart: 'onMouseDown',\n            dblclick: 'onDblClick',\n        },\n        documentEvents: {\n            mousemove: 'onMouseMove',\n            touchmove: 'onMouseMove',\n            mouseup: 'onMouseUp',\n            touchend: 'onMouseUp',\n            touchcancel: 'onMouseUp',\n        },\n        customAnchorAttrs: {\n            'stroke-width': 4,\n            stroke: '#33334F',\n            fill: '#FFFFFF',\n            r: 5,\n        },\n        defaultAnchorAttrs: {\n            'stroke-width': 2,\n            stroke: '#FFFFFF',\n            fill: '#33334F',\n            r: 6,\n        },\n        areaPadding: 6,\n        snapRadius: 10,\n        resetAnchor: true,\n        restrictArea: true,\n        removeRedundancies: true,\n        anchor: Util.getAnchor,\n        snap(pos, terminalView, terminalMagnet, terminalType, edgeView, toolView) {\n            const snapRadius = toolView.options.snapRadius || 0;\n            const isSource = terminalType === 'source';\n            const refIndex = isSource ? 0 : -1;\n            const ref = this.cell.getVertexAt(refIndex) ||\n                this.getTerminalAnchor(isSource ? 'target' : 'source');\n            if (ref) {\n                if (Math.abs(ref.x - pos.x) < snapRadius)\n                    pos.x = ref.x;\n                if (Math.abs(ref.y - pos.y) < snapRadius)\n                    pos.y = ref.y;\n            }\n            return pos;\n        },\n    });\n})(Anchor || (Anchor = {}));\nexport const SourceAnchor = Anchor.define({\n    name: 'source-anchor',\n    type: 'source',\n});\nexport const TargetAnchor = Anchor.define({\n    name: 'target-anchor',\n    type: 'target',\n});\n//# sourceMappingURL=anchor.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Dom } from '@antv/x6-common';\nimport { Point } from '@antv/x6-geometry';\nimport { ToolsView } from '../../view/tool';\nclass Arrowhead extends ToolsView.ToolItem {\n    get type() {\n        return this.options.type;\n    }\n    get ratio() {\n        return this.options.ratio;\n    }\n    init() {\n        if (this.options.attrs) {\n            const _a = this.options.attrs, { class: className } = _a, attrs = __rest(_a, [\"class\"]);\n            this.setAttrs(attrs, this.container);\n            if (className) {\n                Dom.addClass(this.container, className);\n            }\n        }\n    }\n    onRender() {\n        Dom.addClass(this.container, this.prefixClassName(`edge-tool-${this.type}-arrowhead`));\n        this.update();\n    }\n    update() {\n        const ratio = this.ratio;\n        const edgeView = this.cellView;\n        const tangent = edgeView.getTangentAtRatio(ratio);\n        const position = tangent ? tangent.start : edgeView.getPointAtRatio(ratio);\n        const angle = (tangent && tangent.vector().vectorAngle(new Point(1, 0))) || 0;\n        if (!position) {\n            return this;\n        }\n        const matrix = Dom.createSVGMatrix()\n            .translate(position.x, position.y)\n            .rotate(angle);\n        Dom.transform(this.container, matrix, { absolute: true });\n        return this;\n    }\n    onMouseDown(evt) {\n        if (this.guard(evt)) {\n            return;\n        }\n        evt.stopPropagation();\n        evt.preventDefault();\n        const edgeView = this.cellView;\n        if (edgeView.can('arrowheadMovable')) {\n            edgeView.cell.startBatch('move-arrowhead', {\n                ui: true,\n                toolId: this.cid,\n            });\n            const coords = this.graph.snapToGrid(evt.clientX, evt.clientY);\n            const data = edgeView.prepareArrowheadDragging(this.type, {\n                x: coords.x,\n                y: coords.y,\n                options: Object.assign(Object.assign({}, this.options), { toolId: this.cid }),\n            });\n            this.cellView.setEventData(evt, data);\n            this.delegateDocumentEvents(this.options.documentEvents, evt.data);\n            edgeView.graph.view.undelegateEvents();\n            this.container.style.pointerEvents = 'none';\n        }\n        this.focus();\n    }\n    onMouseMove(evt) {\n        const e = this.normalizeEvent(evt);\n        const coords = this.graph.snapToGrid(e.clientX, e.clientY);\n        this.cellView.onMouseMove(e, coords.x, coords.y);\n        this.update();\n    }\n    onMouseUp(evt) {\n        this.undelegateDocumentEvents();\n        const e = this.normalizeEvent(evt);\n        const edgeView = this.cellView;\n        const coords = this.graph.snapToGrid(e.clientX, e.clientY);\n        edgeView.onMouseUp(e, coords.x, coords.y);\n        this.graph.view.delegateEvents();\n        this.blur();\n        this.container.style.pointerEvents = '';\n        edgeView.cell.stopBatch('move-arrowhead', {\n            ui: true,\n            toolId: this.cid,\n        });\n    }\n}\n(function (Arrowhead) {\n    Arrowhead.config({\n        tagName: 'path',\n        isSVGElement: true,\n        events: {\n            mousedown: 'onMouseDown',\n            touchstart: 'onMouseDown',\n        },\n        documentEvents: {\n            mousemove: 'onMouseMove',\n            touchmove: 'onMouseMove',\n            mouseup: 'onMouseUp',\n            touchend: 'onMouseUp',\n            touchcancel: 'onMouseUp',\n        },\n    });\n})(Arrowhead || (Arrowhead = {}));\nexport const SourceArrowhead = Arrowhead.define({\n    name: 'source-arrowhead',\n    type: 'source',\n    ratio: 0,\n    attrs: {\n        d: 'M 10 -8 -10 0 10 8 Z',\n        fill: '#333',\n        stroke: '#fff',\n        'stroke-width': 2,\n        cursor: 'move',\n    },\n});\nexport const TargetArrowhead = Arrowhead.define({\n    name: 'target-arrowhead',\n    type: 'target',\n    ratio: 1,\n    attrs: {\n        d: 'M -10 -8 10 0 -10 8 Z',\n        fill: '#333',\n        stroke: '#fff',\n        'stroke-width': 2,\n        cursor: 'move',\n    },\n});\n//# sourceMappingURL=arrowhead.js.map","import { Point } from '@antv/x6-geometry';\nimport { Dom, FunctionExt, NumberExt, ObjectExt } from '@antv/x6-common';\nimport { ToolsView } from '../../view/tool';\nimport { Util } from '../../util';\nexport class CellEditor extends ToolsView.ToolItem {\n    constructor() {\n        super(...arguments);\n        this.labelIndex = -1;\n        this.distance = 0.5;\n        this.dblClick = this.onCellDblClick.bind(this);\n    }\n    onRender() {\n        const cellView = this.cellView;\n        if (cellView) {\n            cellView.on('cell:dblclick', this.dblClick);\n        }\n    }\n    createElement() {\n        const classNames = [\n            this.prefixClassName(`${this.cell.isEdge() ? 'edge' : 'node'}-tool-editor`),\n            this.prefixClassName('cell-tool-editor'),\n        ];\n        this.editor = ToolsView.createElement('div', false);\n        this.addClass(classNames, this.editor);\n        this.editor.contentEditable = 'true';\n        this.container.appendChild(this.editor);\n    }\n    removeElement() {\n        this.undelegateDocumentEvents();\n        if (this.editor) {\n            this.container.removeChild(this.editor);\n            this.editor = null;\n        }\n    }\n    updateEditor() {\n        const { cell, editor } = this;\n        if (!editor) {\n            return;\n        }\n        const { style } = editor;\n        if (cell.isNode()) {\n            this.updateNodeEditorTransform();\n        }\n        else if (cell.isEdge()) {\n            this.updateEdgeEditorTransform();\n        }\n        // set font style\n        const { attrs } = this.options;\n        style.fontSize = `${attrs.fontSize}px`;\n        style.fontFamily = attrs.fontFamily;\n        style.color = attrs.color;\n        style.backgroundColor = attrs.backgroundColor;\n        // set init value\n        const text = this.getCellText() || '';\n        editor.innerText = text;\n        this.setCellText(''); // clear display value when edit status because char ghosting.\n        return this;\n    }\n    updateNodeEditorTransform() {\n        const { graph, cell, editor } = this;\n        if (!editor) {\n            return;\n        }\n        let pos = Point.create();\n        let minWidth = 20;\n        let translate = '';\n        let { x, y } = this.options;\n        if (typeof x !== 'undefined' && typeof y !== 'undefined') {\n            const bbox = cell.getBBox();\n            x = NumberExt.normalizePercentage(x, bbox.width);\n            y = NumberExt.normalizePercentage(y, bbox.height);\n            pos = bbox.topLeft.translate(x, y);\n            minWidth = bbox.width - x * 2;\n        }\n        else {\n            const bbox = cell.getBBox();\n            pos = bbox.center;\n            minWidth = bbox.width - 4;\n            translate = 'translate(-50%, -50%)';\n        }\n        const scale = graph.scale();\n        const { style } = editor;\n        pos = graph.localToGraph(pos);\n        style.left = `${pos.x}px`;\n        style.top = `${pos.y}px`;\n        style.transform = `scale(${scale.sx}, ${scale.sy}) ${translate}`;\n        style.minWidth = `${minWidth}px`;\n    }\n    updateEdgeEditorTransform() {\n        if (!this.event) {\n            return;\n        }\n        const { graph, editor } = this;\n        if (!editor) {\n            return;\n        }\n        let pos = Point.create();\n        let minWidth = 20;\n        const { style } = editor;\n        const target = this.event.target;\n        const parent = target.parentElement;\n        const isEdgeLabel = parent && Dom.hasClass(parent, this.prefixClassName('edge-label'));\n        if (isEdgeLabel) {\n            const index = parent.getAttribute('data-index') || '0';\n            this.labelIndex = parseInt(index, 10);\n            const matrix = parent.getAttribute('transform');\n            const { translation } = Dom.parseTransformString(matrix);\n            pos = new Point(translation.tx, translation.ty);\n            minWidth = Util.getBBox(target).width;\n        }\n        else {\n            if (!this.options.labelAddable) {\n                return this;\n            }\n            pos = graph.clientToLocal(Point.create(this.event.clientX, this.event.clientY));\n            const view = this.cellView;\n            const d = view.path.closestPointLength(pos);\n            this.distance = d;\n            this.labelIndex = -1;\n        }\n        pos = graph.localToGraph(pos);\n        const scale = graph.scale();\n        style.left = `${pos.x}px`;\n        style.top = `${pos.y}px`;\n        style.minWidth = `${minWidth}px`;\n        style.transform = `scale(${scale.sx}, ${scale.sy}) translate(-50%, -50%)`;\n    }\n    onDocumentMouseDown(e) {\n        if (this.editor && e.target !== this.editor) {\n            const value = this.editor.innerText.replace(/\\n$/, '') || '';\n            // set value, when value is null, we will remove label in edge\n            this.setCellText(value !== '' ? value : null);\n            // remove tool\n            this.removeElement();\n        }\n    }\n    onCellDblClick({ e }) {\n        e.stopPropagation();\n        this.removeElement();\n        this.event = e;\n        this.createElement();\n        this.updateEditor();\n        this.autoFocus();\n        this.delegateDocumentEvents(this.options.documentEvents);\n    }\n    onMouseDown(e) {\n        e.stopPropagation();\n    }\n    autoFocus() {\n        setTimeout(() => {\n            if (this.editor) {\n                this.editor.focus();\n                this.selectText();\n            }\n        });\n    }\n    selectText() {\n        if (window.getSelection && this.editor) {\n            const range = document.createRange();\n            const selection = window.getSelection();\n            range.selectNodeContents(this.editor);\n            selection.removeAllRanges();\n            selection.addRange(range);\n        }\n    }\n    getCellText() {\n        const { getText } = this.options;\n        if (typeof getText === 'function') {\n            return FunctionExt.call(getText, this.cellView, {\n                cell: this.cell,\n                index: this.labelIndex,\n            });\n        }\n        if (typeof getText === 'string') {\n            if (this.cell.isNode()) {\n                return this.cell.attr(getText);\n            }\n            if (this.cell.isEdge()) {\n                if (this.labelIndex !== -1) {\n                    return this.cell.prop(`labels/${this.labelIndex}/attrs/${getText}`);\n                }\n            }\n        }\n    }\n    setCellText(value) {\n        const setText = this.options.setText;\n        if (typeof setText === 'function') {\n            FunctionExt.call(setText, this.cellView, {\n                cell: this.cell,\n                value,\n                index: this.labelIndex,\n                distance: this.distance,\n            });\n            return;\n        }\n        if (typeof setText === 'string') {\n            if (this.cell.isNode()) {\n                if (value !== null) {\n                    this.cell.attr(setText, value);\n                }\n                return;\n            }\n            if (this.cell.isEdge()) {\n                const edge = this.cell;\n                if (this.labelIndex === -1) {\n                    if (value) {\n                        const newLabel = {\n                            position: {\n                                distance: this.distance,\n                            },\n                            attrs: {},\n                        };\n                        ObjectExt.setByPath(newLabel, `attrs/${setText}`, value);\n                        edge.appendLabel(newLabel);\n                    }\n                }\n                else {\n                    if (value !== null) {\n                        edge.prop(`labels/${this.labelIndex}/attrs/${setText}`, value);\n                    }\n                    else if (typeof this.labelIndex === 'number') {\n                        edge.removeLabelAt(this.labelIndex);\n                    }\n                }\n            }\n        }\n    }\n    onRemove() {\n        const cellView = this.cellView;\n        if (cellView) {\n            cellView.off('cell:dblclick', this.dblClick);\n        }\n        this.removeElement();\n    }\n}\n(function (CellEditor) {\n    CellEditor.config({\n        tagName: 'div',\n        isSVGElement: false,\n        events: {\n            mousedown: 'onMouseDown',\n        },\n        documentEvents: {\n            mousedown: 'onDocumentMouseDown',\n        },\n    });\n})(CellEditor || (CellEditor = {}));\n(function (CellEditor) {\n    CellEditor.NodeEditor = CellEditor.define({\n        attrs: {\n            fontSize: 14,\n            fontFamily: 'Arial, helvetica, sans-serif',\n            color: '#000',\n            backgroundColor: '#fff',\n        },\n        getText: 'text/text',\n        setText: 'text/text',\n    });\n    CellEditor.EdgeEditor = CellEditor.define({\n        attrs: {\n            fontSize: 14,\n            fontFamily: 'Arial, helvetica, sans-serif',\n            color: '#000',\n            backgroundColor: '#fff',\n        },\n        labelAddable: true,\n        getText: 'label/text',\n        setText: 'label/text',\n    });\n})(CellEditor || (CellEditor = {}));\n//# sourceMappingURL=editor.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Registry } from '../registry';\nimport { ToolsView } from '../../view/tool';\nimport { Button } from './button';\nimport { Boundary } from './boundary';\nimport { Vertices } from './vertices';\nimport { Segments } from './segments';\nimport { SourceAnchor, TargetAnchor } from './anchor';\nimport { SourceArrowhead, TargetArrowhead } from './arrowhead';\nimport { CellEditor } from './editor';\nexport var NodeTool;\n(function (NodeTool) {\n    NodeTool.presets = {\n        boundary: Boundary,\n        button: Button,\n        'button-remove': Button.Remove,\n        'node-editor': CellEditor.NodeEditor,\n    };\n    NodeTool.registry = Registry.create({\n        type: 'node tool',\n        process(name, options) {\n            if (typeof options === 'function') {\n                return options;\n            }\n            let parent = ToolsView.ToolItem;\n            const { inherit } = options, others = __rest(options, [\"inherit\"]);\n            if (inherit) {\n                const base = this.get(inherit);\n                if (base == null) {\n                    this.onNotFound(inherit, 'inherited');\n                }\n                else {\n                    parent = base;\n                }\n            }\n            if (others.name == null) {\n                others.name = name;\n            }\n            return parent.define.call(parent, others);\n        },\n    });\n    NodeTool.registry.register(NodeTool.presets, true);\n})(NodeTool || (NodeTool = {}));\nexport var EdgeTool;\n(function (EdgeTool) {\n    EdgeTool.presets = {\n        boundary: Boundary,\n        vertices: Vertices,\n        segments: Segments,\n        button: Button,\n        'button-remove': Button.Remove,\n        'source-anchor': SourceAnchor,\n        'target-anchor': TargetAnchor,\n        'source-arrowhead': SourceArrowhead,\n        'target-arrowhead': TargetArrowhead,\n        'edge-editor': CellEditor.EdgeEditor,\n    };\n    EdgeTool.registry = Registry.create({\n        type: 'edge tool',\n        process(name, options) {\n            if (typeof options === 'function') {\n                return options;\n            }\n            let parent = ToolsView.ToolItem;\n            const { inherit } = options, others = __rest(options, [\"inherit\"]);\n            if (inherit) {\n                const base = this.get(inherit);\n                if (base == null) {\n                    this.onNotFound(inherit, 'inherited');\n                }\n                else {\n                    parent = base;\n                }\n            }\n            if (others.name == null) {\n                others.name = name;\n            }\n            return parent.define.call(parent, others);\n        },\n    });\n    EdgeTool.registry.register(EdgeTool.presets, true);\n})(EdgeTool || (EdgeTool = {}));\n//# sourceMappingURL=index.js.map","import { NumberExt } from '@antv/x6-common';\nexport const center = createBBoxAnchor('center');\nexport const top = createBBoxAnchor('topCenter');\nexport const bottom = createBBoxAnchor('bottomCenter');\nexport const left = createBBoxAnchor('leftMiddle');\nexport const right = createBBoxAnchor('rightMiddle');\nexport const topLeft = createBBoxAnchor('topLeft');\nexport const topRight = createBBoxAnchor('topRight');\nexport const bottomLeft = createBBoxAnchor('bottomLeft');\nexport const bottomRight = createBBoxAnchor('bottomRight');\nfunction createBBoxAnchor(method) {\n    return function (view, magnet, ref, options = {}) {\n        const bbox = options.rotate\n            ? view.getUnrotatedBBoxOfElement(magnet)\n            : view.getBBoxOfElement(magnet);\n        const result = bbox[method];\n        result.x += NumberExt.normalizePercentage(options.dx, bbox.width);\n        result.y += NumberExt.normalizePercentage(options.dy, bbox.height);\n        const cell = view.cell;\n        return options.rotate\n            ? result.rotate(-cell.getAngle(), cell.getBBox().getCenter())\n            : result;\n    };\n}\n//# sourceMappingURL=bbox.js.map","import { NumberExt } from '@antv/x6-common';\nimport { Point } from '@antv/x6-geometry';\n// eslint-disable-next-line\nexport function resolve(fn) {\n    return function (view, magnet, ref, options) {\n        if (ref instanceof Element) {\n            const refView = this.graph.findViewByElem(ref);\n            let refPoint;\n            if (refView) {\n                if (refView.isEdgeElement(ref)) {\n                    const distance = options.fixedAt != null ? options.fixedAt : '50%';\n                    refPoint = getPointAtEdge(refView, distance);\n                }\n                else {\n                    refPoint = refView.getBBoxOfElement(ref).getCenter();\n                }\n            }\n            else {\n                refPoint = new Point();\n            }\n            return fn.call(this, view, magnet, refPoint, options);\n        }\n        return fn.apply(this, arguments); // eslint-disable-line\n    };\n}\nexport function getPointAtEdge(edgeView, value) {\n    const isPercentage = NumberExt.isPercentage(value);\n    const num = typeof value === 'string' ? parseFloat(value) : value;\n    if (isPercentage) {\n        return edgeView.getPointAtRatio(num / 100);\n    }\n    return edgeView.getPointAtLength(num);\n}\n//# sourceMappingURL=util.js.map","import { Angle } from '@antv/x6-geometry';\nimport { resolve } from './util';\nconst orthogonal = function (view, magnet, refPoint, options) {\n    const angle = view.cell.getAngle();\n    const bbox = view.getBBoxOfElement(magnet);\n    const result = bbox.getCenter();\n    const topLeft = bbox.getTopLeft();\n    const bottomRight = bbox.getBottomRight();\n    let padding = options.padding;\n    if (!Number.isFinite(padding)) {\n        padding = 0;\n    }\n    if (topLeft.y + padding <= refPoint.y &&\n        refPoint.y <= bottomRight.y - padding) {\n        const dy = refPoint.y - result.y;\n        result.x +=\n            angle === 0 || angle === 180\n                ? 0\n                : (dy * 1) / Math.tan(Angle.toRad(angle));\n        result.y += dy;\n    }\n    else if (topLeft.x + padding <= refPoint.x &&\n        refPoint.x <= bottomRight.x - padding) {\n        const dx = refPoint.x - result.x;\n        result.y +=\n            angle === 90 || angle === 270 ? 0 : dx * Math.tan(Angle.toRad(angle));\n        result.x += dx;\n    }\n    return result;\n};\n/**\n * Tries to place the anchor of the edge inside the view bbox so that the\n * edge is made orthogonal. The anchor is placed along two line segments\n * inside the view bbox (between the centers of the top and bottom side and\n * between the centers of the left and right sides). If it is not possible\n * to place the anchor so that the edge would be orthogonal, the anchor is\n * placed at the center of the view bbox instead.\n */\nexport const orth = resolve(orthogonal);\n//# sourceMappingURL=orth.js.map","/**\n * Places the anchor of the edge at center of the node bbox.\n */\nexport const nodeCenter = function (view, magnet, ref, options, endType) {\n    const result = view.cell.getConnectionPoint(this.cell, endType);\n    if (options.dx || options.dy) {\n        result.translate(options.dx || 0, options.dy || 0);\n    }\n    return result;\n};\n//# sourceMappingURL=node-center.js.map","import { resolve } from './util';\nconst middleSide = function (view, magnet, refPoint, options) {\n    let bbox;\n    let angle = 0;\n    let center;\n    const node = view.cell;\n    if (options.rotate) {\n        bbox = view.getUnrotatedBBoxOfElement(magnet);\n        center = node.getBBox().getCenter();\n        angle = node.getAngle();\n    }\n    else {\n        bbox = view.getBBoxOfElement(magnet);\n    }\n    const padding = options.padding;\n    if (padding != null && Number.isFinite(padding)) {\n        bbox.inflate(padding);\n    }\n    if (options.rotate) {\n        refPoint.rotate(angle, center);\n    }\n    const side = bbox.getNearestSideToPoint(refPoint);\n    let result;\n    switch (side) {\n        case 'left':\n            result = bbox.getLeftMiddle();\n            break;\n        case 'right':\n            result = bbox.getRightMiddle();\n            break;\n        case 'top':\n            result = bbox.getTopCenter();\n            break;\n        case 'bottom':\n            result = bbox.getBottomCenter();\n            break;\n        default:\n            break;\n    }\n    const direction = options.direction;\n    if (direction === 'H') {\n        if (side === 'top' || side === 'bottom') {\n            if (refPoint.x <= bbox.x + bbox.width) {\n                result = bbox.getLeftMiddle();\n            }\n            else {\n                result = bbox.getRightMiddle();\n            }\n        }\n    }\n    else if (direction === 'V') {\n        if (refPoint.y <= bbox.y + bbox.height) {\n            result = bbox.getTopCenter();\n        }\n        else {\n            result = bbox.getBottomCenter();\n        }\n    }\n    return options.rotate ? result.rotate(-angle, center) : result;\n};\n/**\n * Places the anchor of the edge in the middle of the side of view bbox\n * closest to the other endpoint.\n */\nexport const midSide = resolve(middleSide);\n//# sourceMappingURL=middle-side.js.map","import { Registry } from '../registry';\nimport * as anchors from './main';\nexport var NodeAnchor;\n(function (NodeAnchor) {\n    NodeAnchor.presets = anchors;\n    NodeAnchor.registry = Registry.create({\n        type: 'node endpoint',\n    });\n    NodeAnchor.registry.register(NodeAnchor.presets, true);\n})(NodeAnchor || (NodeAnchor = {}));\n//# sourceMappingURL=index.js.map","export const ratio = function (view, magnet, ref, options) {\n    let ratio = options.ratio != null ? options.ratio : 0.5;\n    if (ratio > 1) {\n        ratio /= 100;\n    }\n    return view.getPointAtRatio(ratio);\n};\n//# sourceMappingURL=ratio.js.map","export const length = function (view, magnet, ref, options) {\n    const length = options.length != null ? options.length : 20;\n    return view.getPointAtLength(length);\n};\n//# sourceMappingURL=length.js.map","import { Point } from '@antv/x6-geometry';\nimport { resolve } from '../node-anchor/util';\nexport const getClosestPoint = function (view, magnet, refPoint, options) {\n    const closestPoint = view.getClosestPoint(refPoint);\n    return closestPoint != null ? closestPoint : new Point();\n};\nexport const closest = resolve(getClosestPoint);\n//# sourceMappingURL=closest.js.map","import { Line } from '@antv/x6-geometry';\nimport { FunctionExt } from '@antv/x6-common';\nimport { resolve, getPointAtEdge } from '../node-anchor/util';\nimport { getClosestPoint } from './closest';\nconst orthogonal = function (view, magnet, refPoint, options) {\n    const OFFSET = 1e6;\n    const path = view.getConnection();\n    const segmentSubdivisions = view.getConnectionSubdivisions();\n    const vLine = new Line(refPoint.clone().translate(0, OFFSET), refPoint.clone().translate(0, -OFFSET));\n    const hLine = new Line(refPoint.clone().translate(OFFSET, 0), refPoint.clone().translate(-OFFSET, 0));\n    const vIntersections = vLine.intersect(path, {\n        segmentSubdivisions,\n    });\n    const hIntersections = hLine.intersect(path, {\n        segmentSubdivisions,\n    });\n    const intersections = [];\n    if (vIntersections) {\n        intersections.push(...vIntersections);\n    }\n    if (hIntersections) {\n        intersections.push(...hIntersections);\n    }\n    if (intersections.length > 0) {\n        return refPoint.closest(intersections);\n    }\n    if (options.fallbackAt != null) {\n        return getPointAtEdge(view, options.fallbackAt);\n    }\n    return FunctionExt.call(getClosestPoint, this, view, magnet, refPoint, options);\n};\nexport const orth = resolve(orthogonal);\n//# sourceMappingURL=orth.js.map","import { Registry } from '../registry';\nimport * as anchors from './main';\nexport var EdgeAnchor;\n(function (EdgeAnchor) {\n    EdgeAnchor.presets = anchors;\n    EdgeAnchor.registry = Registry.create({\n        type: 'edge endpoint',\n    });\n    EdgeAnchor.registry.register(EdgeAnchor.presets, true);\n})(EdgeAnchor || (EdgeAnchor = {}));\n//# sourceMappingURL=index.js.map","import { Line } from '@antv/x6-geometry';\nexport function offset(p1, p2, offset) {\n    let tx;\n    if (typeof offset === 'object') {\n        if (Number.isFinite(offset.y)) {\n            const line = new Line(p2, p1);\n            const { start, end } = line.parallel(offset.y);\n            p2 = start; // eslint-disable-line\n            p1 = end; // eslint-disable-line\n        }\n        tx = offset.x;\n    }\n    else {\n        tx = offset;\n    }\n    if (tx == null || !Number.isFinite(tx)) {\n        return p1;\n    }\n    const length = p1.distance(p2);\n    if (tx === 0 && length > 0) {\n        return p1;\n    }\n    return p1.move(p2, -Math.min(tx, length - 1));\n}\nexport function getStrokeWidth(magnet) {\n    const stroke = magnet.getAttribute('stroke-width');\n    if (stroke === null) {\n        return 0;\n    }\n    return parseFloat(stroke) || 0;\n}\nexport function findShapeNode(magnet) {\n    if (magnet == null) {\n        return null;\n    }\n    let node = magnet;\n    do {\n        let tagName = node.tagName;\n        if (typeof tagName !== 'string')\n            return null;\n        tagName = tagName.toUpperCase();\n        if (tagName === 'G') {\n            node = node.firstElementChild;\n        }\n        else if (tagName === 'TITLE') {\n            node = node.nextElementSibling;\n        }\n        else\n            break;\n    } while (node);\n    return node;\n}\n//# sourceMappingURL=util.js.map","import { offset, getStrokeWidth } from './util';\n/**\n * Places the connection point at the intersection between the edge\n * path end segment and the target node bbox.\n */\nexport const bbox = function (line, view, magnet, options) {\n    const bbox = view.getBBoxOfElement(magnet);\n    if (options.stroked) {\n        bbox.inflate(getStrokeWidth(magnet) / 2);\n    }\n    const intersections = line.intersect(bbox);\n    const p = intersections && intersections.length\n        ? line.start.closest(intersections)\n        : line.end;\n    return offset(p, line.start, options.offset);\n};\n//# sourceMappingURL=bbox.js.map","import { FunctionExt } from '@antv/x6-common';\nimport { bbox } from './bbox';\nimport { offset, getStrokeWidth } from './util';\n/**\n * Places the connection point at the intersection between the\n * link path end segment and the element's unrotated bbox.\n */\nexport const rect = function (line, view, magnet, options, type) {\n    const cell = view.cell;\n    const angle = cell.isNode() ? cell.getAngle() : 0;\n    if (angle === 0) {\n        return FunctionExt.call(bbox, this, line, view, magnet, options, type);\n    }\n    const bboxRaw = view.getUnrotatedBBoxOfElement(magnet);\n    if (options.stroked) {\n        bboxRaw.inflate(getStrokeWidth(magnet) / 2);\n    }\n    const center = bboxRaw.getCenter();\n    const lineRaw = line.clone().rotate(angle, center);\n    const intersections = lineRaw.setLength(1e6).intersect(bboxRaw);\n    const p = intersections && intersections.length\n        ? lineRaw.start.closest(intersections).rotate(-angle, center)\n        : line.end;\n    return offset(p, line.start, options.offset);\n};\n//# sourceMappingURL=rect.js.map","import { ObjectExt, Dom } from '@antv/x6-common';\nimport { Path, Rectangle, Ellipse } from '@antv/x6-geometry';\nimport { offset, getStrokeWidth, findShapeNode } from './util';\nimport { Util } from '../../util';\n/**\n * Places the connection point at the intersection between the\n * edge path end segment and the actual shape of the target magnet.\n */\nexport const boundary = function (line, view, magnet, options) {\n    let node;\n    let intersection;\n    const anchor = line.end;\n    const selector = options.selector;\n    if (typeof selector === 'string') {\n        node = view.findOne(selector);\n    }\n    else if (Array.isArray(selector)) {\n        node = ObjectExt.getByPath(magnet, selector);\n    }\n    else {\n        node = findShapeNode(magnet);\n    }\n    if (!Dom.isSVGGraphicsElement(node)) {\n        if (node === magnet || !Dom.isSVGGraphicsElement(magnet)) {\n            return anchor;\n        }\n        node = magnet;\n    }\n    const localShape = view.getShapeOfElement(node);\n    const magnetMatrix = view.getMatrixOfElement(node);\n    const translateMatrix = view.getRootTranslatedMatrix();\n    const rotateMatrix = view.getRootRotatedMatrix();\n    const targetMatrix = translateMatrix\n        .multiply(rotateMatrix)\n        .multiply(magnetMatrix);\n    const localMatrix = targetMatrix.inverse();\n    const localLine = Util.transformLine(line, localMatrix);\n    const localRef = localLine.start.clone();\n    const data = view.getDataOfElement(node);\n    if (options.insideout === false) {\n        if (data.shapeBBox == null) {\n            data.shapeBBox = localShape.bbox();\n        }\n        const localBBox = data.shapeBBox;\n        if (localBBox != null && localBBox.containsPoint(localRef)) {\n            return anchor;\n        }\n    }\n    if (options.extrapolate === true) {\n        localLine.setLength(1e6);\n    }\n    // Caching segment subdivisions for paths\n    let pathOptions;\n    if (Path.isPath(localShape)) {\n        const precision = options.precision || 2;\n        if (data.segmentSubdivisions == null) {\n            data.segmentSubdivisions = localShape.getSegmentSubdivisions({\n                precision,\n            });\n        }\n        pathOptions = {\n            precision,\n            segmentSubdivisions: data.segmentSubdivisions,\n        };\n        intersection = localLine.intersect(localShape, pathOptions);\n    }\n    else {\n        intersection = localLine.intersect(localShape);\n    }\n    if (intersection) {\n        if (Array.isArray(intersection)) {\n            intersection = localRef.closest(intersection);\n        }\n    }\n    else if (options.sticky === true) {\n        // No intersection, find the closest point instead\n        if (Rectangle.isRectangle(localShape)) {\n            intersection = localShape.getNearestPointToPoint(localRef);\n        }\n        else if (Ellipse.isEllipse(localShape)) {\n            intersection = localShape.intersectsWithLineFromCenterToPoint(localRef);\n        }\n        else {\n            intersection = localShape.closestPoint(localRef, pathOptions);\n        }\n    }\n    const cp = intersection\n        ? Util.transformPoint(intersection, targetMatrix)\n        : anchor;\n    let cpOffset = options.offset || 0;\n    if (options.stroked !== false) {\n        if (typeof cpOffset === 'object') {\n            cpOffset = Object.assign({}, cpOffset);\n            if (cpOffset.x == null) {\n                cpOffset.x = 0;\n            }\n            cpOffset.x += getStrokeWidth(node) / 2;\n        }\n        else {\n            cpOffset += getStrokeWidth(node) / 2;\n        }\n    }\n    return offset(cp, line.start, cpOffset);\n};\n//# sourceMappingURL=boundary.js.map","import { offset } from './util';\nfunction alignLine(line, type, offset = 0) {\n    const { start, end } = line;\n    let a;\n    let b;\n    let direction;\n    let coordinate;\n    switch (type) {\n        case 'left':\n            coordinate = 'x';\n            a = end;\n            b = start;\n            direction = -1;\n            break;\n        case 'right':\n            coordinate = 'x';\n            a = start;\n            b = end;\n            direction = 1;\n            break;\n        case 'top':\n            coordinate = 'y';\n            a = end;\n            b = start;\n            direction = -1;\n            break;\n        case 'bottom':\n            coordinate = 'y';\n            a = start;\n            b = end;\n            direction = 1;\n            break;\n        default:\n            return;\n    }\n    if (start[coordinate] < end[coordinate]) {\n        a[coordinate] = b[coordinate];\n    }\n    else {\n        b[coordinate] = a[coordinate];\n    }\n    if (Number.isFinite(offset)) {\n        a[coordinate] += direction * offset;\n        b[coordinate] += direction * offset;\n    }\n}\n/**\n * Places the connection point at the edge's endpoint.\n */\nexport const anchor = function (line, view, magnet, options) {\n    const { alignOffset, align } = options;\n    if (align) {\n        alignLine(line, align, alignOffset);\n    }\n    return offset(line.end, line.start, options.offset);\n};\n//# sourceMappingURL=anchor.js.map","import { Registry } from '../registry';\nimport * as connectionPoints from './main';\nexport var ConnectionPoint;\n(function (ConnectionPoint) {\n    ConnectionPoint.presets = connectionPoints;\n    ConnectionPoint.registry = Registry.create({\n        type: 'connection point',\n    });\n    ConnectionPoint.registry.register(ConnectionPoint.presets, true);\n})(ConnectionPoint || (ConnectionPoint = {}));\n//# sourceMappingURL=index.js.map","export const normal = function (vertices) {\n    return [...vertices];\n};\n//# sourceMappingURL=normal.js.map","import { NumberExt } from '@antv/x6-common';\n/**\n * Routes the edge always to/from a certain side\n */\nexport const oneSide = function (vertices, options, edgeView) {\n    const side = options.side || 'bottom';\n    const padding = NumberExt.normalizeSides(options.padding || 40);\n    const sourceBBox = edgeView.sourceBBox;\n    const targetBBox = edgeView.targetBBox;\n    const sourcePoint = sourceBBox.getCenter();\n    const targetPoint = targetBBox.getCenter();\n    let coord;\n    let dim;\n    let factor;\n    switch (side) {\n        case 'top':\n            factor = -1;\n            coord = 'y';\n            dim = 'height';\n            break;\n        case 'left':\n            factor = -1;\n            coord = 'x';\n            dim = 'width';\n            break;\n        case 'right':\n            factor = 1;\n            coord = 'x';\n            dim = 'width';\n            break;\n        case 'bottom':\n        default:\n            factor = 1;\n            coord = 'y';\n            dim = 'height';\n            break;\n    }\n    // Move the points from the center of the element to outside of it.\n    sourcePoint[coord] += factor * (sourceBBox[dim] / 2 + padding[side]);\n    targetPoint[coord] += factor * (targetBBox[dim] / 2 + padding[side]);\n    // Make edge orthogonal (at least the first and last vertex).\n    if (factor * (sourcePoint[coord] - targetPoint[coord]) > 0) {\n        targetPoint[coord] = sourcePoint[coord];\n    }\n    else {\n        sourcePoint[coord] = targetPoint[coord];\n    }\n    return [sourcePoint.toJSON(), ...vertices, targetPoint.toJSON()];\n};\n//# sourceMappingURL=oneside.js.map","import { NumberExt } from '@antv/x6-common';\nimport { Rectangle } from '@antv/x6-geometry';\nexport function getPointBBox(p) {\n    return new Rectangle(p.x, p.y, 0, 0);\n}\nexport function getPaddingBox(options = {}) {\n    const sides = NumberExt.normalizeSides(options.padding || 20);\n    return {\n        x: -sides.left,\n        y: -sides.top,\n        width: sides.left + sides.right,\n        height: sides.top + sides.bottom,\n    };\n}\nexport function getSourceBBox(view, options = {}) {\n    return view.sourceBBox.clone().moveAndExpand(getPaddingBox(options));\n}\nexport function getTargetBBox(view, options = {}) {\n    return view.targetBBox.clone().moveAndExpand(getPaddingBox(options));\n}\nexport function getSourceAnchor(view, options = {}) {\n    if (view.sourceAnchor) {\n        return view.sourceAnchor;\n    }\n    const bbox = getSourceBBox(view, options);\n    return bbox.getCenter();\n}\nexport function getTargetAnchor(view, options = {}) {\n    if (view.targetAnchor) {\n        return view.targetAnchor;\n    }\n    const bbox = getTargetBBox(view, options);\n    return bbox.getCenter();\n}\n//# sourceMappingURL=util.js.map","import { ArrayExt } from '@antv/x6-common';\nimport { Point, Line, Angle } from '@antv/x6-geometry';\nimport * as Util from './util';\n/**\n * Returns a route with orthogonal line segments.\n */\nexport const orth = function (vertices, options, edgeView) {\n    let sourceBBox = Util.getSourceBBox(edgeView, options);\n    let targetBBox = Util.getTargetBBox(edgeView, options);\n    const sourceAnchor = Util.getSourceAnchor(edgeView, options);\n    const targetAnchor = Util.getTargetAnchor(edgeView, options);\n    // If anchor lies outside of bbox, the bbox expands to include it\n    sourceBBox = sourceBBox.union(Util.getPointBBox(sourceAnchor));\n    targetBBox = targetBBox.union(Util.getPointBBox(targetAnchor));\n    const points = vertices.map((p) => Point.create(p));\n    points.unshift(sourceAnchor);\n    points.push(targetAnchor);\n    // bearing of previous route segment\n    let bearing = null;\n    const result = [];\n    for (let i = 0, len = points.length - 1; i < len; i += 1) {\n        let route = null;\n        const from = points[i];\n        const to = points[i + 1];\n        const isOrthogonal = Private.getBearing(from, to) != null;\n        if (i === 0) {\n            // source\n            if (i + 1 === len) {\n                // source -> target\n                // Expand one of the nodes by 1px to detect situations when the two\n                // nodes are positioned next to each other with no gap in between.\n                if (sourceBBox.intersectsWithRect(targetBBox.clone().inflate(1))) {\n                    route = Private.insideNode(from, to, sourceBBox, targetBBox);\n                }\n                else if (!isOrthogonal) {\n                    route = Private.nodeToNode(from, to, sourceBBox, targetBBox);\n                }\n            }\n            else {\n                // source -> vertex\n                if (sourceBBox.containsPoint(to)) {\n                    route = Private.insideNode(from, to, sourceBBox, Util.getPointBBox(to).moveAndExpand(Util.getPaddingBox(options)));\n                }\n                else if (!isOrthogonal) {\n                    route = Private.nodeToVertex(from, to, sourceBBox);\n                }\n            }\n        }\n        else if (i + 1 === len) {\n            // vertex -> target\n            // prevent overlaps with previous line segment\n            const isOrthogonalLoop = isOrthogonal && Private.getBearing(to, from) === bearing;\n            if (targetBBox.containsPoint(from) || isOrthogonalLoop) {\n                route = Private.insideNode(from, to, Util.getPointBBox(from).moveAndExpand(Util.getPaddingBox(options)), targetBBox, bearing);\n            }\n            else if (!isOrthogonal) {\n                route = Private.vertexToNode(from, to, targetBBox, bearing);\n            }\n        }\n        else if (!isOrthogonal) {\n            // vertex -> vertex\n            route = Private.vertexToVertex(from, to, bearing);\n        }\n        // set bearing for next iteration\n        if (route) {\n            result.push(...route.points);\n            bearing = route.direction;\n        }\n        else {\n            // orthogonal route and not looped\n            bearing = Private.getBearing(from, to);\n        }\n        // push `to` point to identified orthogonal vertices array\n        if (i + 1 < len) {\n            result.push(to);\n        }\n    }\n    return result;\n};\nvar Private;\n(function (Private) {\n    /**\n     * Bearing to opposite bearing map\n     */\n    const opposites = {\n        N: 'S',\n        S: 'N',\n        E: 'W',\n        W: 'E',\n    };\n    /**\n     * Bearing to radians map\n     */\n    const radians = {\n        N: (-Math.PI / 2) * 3,\n        S: -Math.PI / 2,\n        E: 0,\n        W: Math.PI,\n    };\n    /**\n     * Returns a point `p` where lines p,p1 and p,p2 are perpendicular\n     * and p is not contained in the given box\n     */\n    function freeJoin(p1, p2, bbox) {\n        let p = new Point(p1.x, p2.y);\n        if (bbox.containsPoint(p)) {\n            p = new Point(p2.x, p1.y);\n        }\n        // kept for reference\n        // if (bbox.containsPoint(p)) {\n        //   return null\n        // }\n        return p;\n    }\n    /**\n     * Returns either width or height of a bbox based on the given bearing.\n     */\n    function getBBoxSize(bbox, bearing) {\n        return bbox[bearing === 'W' || bearing === 'E' ? 'width' : 'height'];\n    }\n    Private.getBBoxSize = getBBoxSize;\n    function getBearing(from, to) {\n        if (from.x === to.x) {\n            return from.y > to.y ? 'N' : 'S';\n        }\n        if (from.y === to.y) {\n            return from.x > to.x ? 'W' : 'E';\n        }\n        return null;\n    }\n    Private.getBearing = getBearing;\n    function vertexToVertex(from, to, bearing) {\n        const p1 = new Point(from.x, to.y);\n        const p2 = new Point(to.x, from.y);\n        const d1 = getBearing(from, p1);\n        const d2 = getBearing(from, p2);\n        const opposite = bearing ? opposites[bearing] : null;\n        const p = d1 === bearing || (d1 !== opposite && (d2 === opposite || d2 !== bearing))\n            ? p1\n            : p2;\n        return { points: [p], direction: getBearing(p, to) };\n    }\n    Private.vertexToVertex = vertexToVertex;\n    function nodeToVertex(from, to, fromBBox) {\n        const p = freeJoin(from, to, fromBBox);\n        return { points: [p], direction: getBearing(p, to) };\n    }\n    Private.nodeToVertex = nodeToVertex;\n    function vertexToNode(from, to, toBBox, bearing) {\n        const points = [new Point(from.x, to.y), new Point(to.x, from.y)];\n        const freePoints = points.filter((p) => !toBBox.containsPoint(p));\n        const freeBearingPoints = freePoints.filter((p) => getBearing(p, from) !== bearing);\n        let p;\n        if (freeBearingPoints.length > 0) {\n            // Try to pick a point which bears the same direction as the previous segment.\n            p = freeBearingPoints.filter((p) => getBearing(from, p) === bearing).pop();\n            p = p || freeBearingPoints[0];\n            return {\n                points: [p],\n                direction: getBearing(p, to),\n            };\n        }\n        {\n            // Here we found only points which are either contained in the element or they would create\n            // a link segment going in opposite direction from the previous one.\n            // We take the point inside element and move it outside the element in the direction the\n            // route is going. Now we can join this point with the current end (using freeJoin).\n            p = ArrayExt.difference(points, freePoints)[0];\n            const p2 = Point.create(to).move(p, -getBBoxSize(toBBox, bearing) / 2);\n            const p1 = freeJoin(p2, from, toBBox);\n            return {\n                points: [p1, p2],\n                direction: getBearing(p2, to),\n            };\n        }\n    }\n    Private.vertexToNode = vertexToNode;\n    function nodeToNode(from, to, fromBBox, toBBox) {\n        let route = nodeToVertex(to, from, toBBox);\n        const p1 = route.points[0];\n        if (fromBBox.containsPoint(p1)) {\n            route = nodeToVertex(from, to, fromBBox);\n            const p2 = route.points[0];\n            if (toBBox.containsPoint(p2)) {\n                const fromBorder = Point.create(from).move(p2, -getBBoxSize(fromBBox, getBearing(from, p2)) / 2);\n                const toBorder = Point.create(to).move(p1, -getBBoxSize(toBBox, getBearing(to, p1)) / 2);\n                const mid = new Line(fromBorder, toBorder).getCenter();\n                const startRoute = nodeToVertex(from, mid, fromBBox);\n                const endRoute = vertexToVertex(mid, to, startRoute.direction);\n                route.points = [startRoute.points[0], endRoute.points[0]];\n                route.direction = endRoute.direction;\n            }\n        }\n        return route;\n    }\n    Private.nodeToNode = nodeToNode;\n    // Finds route for situations where one node is inside the other.\n    // Typically the route is directed outside the outer node first and\n    // then back towards the inner node.\n    function insideNode(from, to, fromBBox, toBBox, bearing) {\n        const boundary = fromBBox.union(toBBox).inflate(1);\n        // start from the point which is closer to the boundary\n        const center = boundary.getCenter();\n        const reversed = center.distance(to) > center.distance(from);\n        const start = reversed ? to : from;\n        const end = reversed ? from : to;\n        let p1;\n        let p2;\n        let p3;\n        if (bearing) {\n            // Points on circle with radius equals 'W + H` are always outside the rectangle\n            // with width W and height H if the center of that circle is the center of that rectangle.\n            p1 = Point.fromPolar(boundary.width + boundary.height, radians[bearing], start);\n            p1 = boundary.getNearestPointToPoint(p1).move(p1, -1);\n        }\n        else {\n            p1 = boundary.getNearestPointToPoint(start).move(start, 1);\n        }\n        p2 = freeJoin(p1, end, boundary);\n        let points;\n        if (p1.round().equals(p2.round())) {\n            p2 = Point.fromPolar(boundary.width + boundary.height, Angle.toRad(p1.theta(start)) + Math.PI / 2, end);\n            p2 = boundary.getNearestPointToPoint(p2).move(end, 1).round();\n            p3 = freeJoin(p1, p2, boundary);\n            points = reversed ? [p2, p3, p1] : [p1, p3, p2];\n        }\n        else {\n            points = reversed ? [p2, p1] : [p1, p2];\n        }\n        const direction = reversed ? getBearing(p1, to) : getBearing(p2, to);\n        return {\n            points,\n            direction,\n        };\n    }\n    Private.insideNode = insideNode;\n})(Private || (Private = {}));\n//# sourceMappingURL=orth.js.map","import { NumberExt } from '@antv/x6-common';\nimport { Point, Angle } from '@antv/x6-geometry';\nimport { orth } from '../orth';\nexport const defaults = {\n    step: 10,\n    maxLoopCount: 2000,\n    precision: 1,\n    maxDirectionChange: 90,\n    perpendicular: true,\n    excludeTerminals: [],\n    excludeNodes: [],\n    excludeShapes: [],\n    startDirections: ['top', 'right', 'bottom', 'left'],\n    endDirections: ['top', 'right', 'bottom', 'left'],\n    directionMap: {\n        top: { x: 0, y: -1 },\n        right: { x: 1, y: 0 },\n        bottom: { x: 0, y: 1 },\n        left: { x: -1, y: 0 },\n    },\n    cost() {\n        const step = resolve(this.step, this);\n        return step;\n    },\n    directions() {\n        const step = resolve(this.step, this);\n        const cost = resolve(this.cost, this);\n        return [\n            { cost, offsetX: step, offsetY: 0 },\n            { cost, offsetX: -step, offsetY: 0 },\n            { cost, offsetX: 0, offsetY: step },\n            { cost, offsetX: 0, offsetY: -step },\n        ];\n    },\n    penalties() {\n        const step = resolve(this.step, this);\n        return {\n            0: 0,\n            45: step / 2,\n            90: step / 2,\n        };\n    },\n    paddingBox() {\n        const step = resolve(this.step, this);\n        return {\n            x: -step,\n            y: -step,\n            width: 2 * step,\n            height: 2 * step,\n        };\n    },\n    fallbackRouter: orth,\n    draggingRouter: null,\n    snapToGrid: true,\n};\nexport function resolve(input, options) {\n    if (typeof input === 'function') {\n        return input.call(options);\n    }\n    return input;\n}\nexport function resolveOptions(options) {\n    const result = Object.keys(options).reduce((memo, key) => {\n        const ret = memo;\n        if (key === 'fallbackRouter' ||\n            key === 'draggingRouter' ||\n            key === 'fallbackRoute') {\n            ret[key] = options[key];\n        }\n        else {\n            ret[key] = resolve(options[key], options);\n        }\n        return memo;\n    }, {});\n    if (result.padding) {\n        const sides = NumberExt.normalizeSides(result.padding);\n        result.paddingBox = {\n            x: -sides.left,\n            y: -sides.top,\n            width: sides.left + sides.right,\n            height: sides.top + sides.bottom,\n        };\n    }\n    result.directions.forEach((direction) => {\n        const point1 = new Point(0, 0);\n        const point2 = new Point(direction.offsetX, direction.offsetY);\n        direction.angle = Angle.normalize(point1.theta(point2));\n    });\n    return result;\n}\n//# sourceMappingURL=options.js.map","import { ArrayExt } from '@antv/x6-common';\nconst OPEN = 1;\nconst CLOSE = 2;\nexport class SortedSet {\n    constructor() {\n        this.items = [];\n        this.hash = {};\n        this.values = {};\n    }\n    add(item, value) {\n        if (this.hash[item]) {\n            // item removal\n            this.items.splice(this.items.indexOf(item), 1);\n        }\n        else {\n            this.hash[item] = OPEN;\n        }\n        this.values[item] = value;\n        const index = ArrayExt.sortedIndexBy(this.items, item, (key) => this.values[key]);\n        this.items.splice(index, 0, item);\n    }\n    pop() {\n        const item = this.items.shift();\n        if (item) {\n            this.hash[item] = CLOSE;\n        }\n        return item;\n    }\n    isOpen(item) {\n        return this.hash[item] === OPEN;\n    }\n    isClose(item) {\n        return this.hash[item] === CLOSE;\n    }\n    isEmpty() {\n        return this.items.length === 0;\n    }\n}\n//# sourceMappingURL=sorted-set.js.map","import { ArrayExt } from '@antv/x6-common';\nimport { Point } from '@antv/x6-geometry';\n/**\n * Helper structure to identify whether a point lies inside an obstacle.\n */\nexport class ObstacleMap {\n    constructor(options) {\n        this.options = options;\n        this.mapGridSize = 100;\n        this.map = {};\n    }\n    /**\n     * Builds a map of all nodes for quicker obstacle queries i.e. is a point\n     * contained in any obstacle?\n     *\n     * A simplified grid search.\n     */\n    build(model, edge) {\n        const options = this.options;\n        // source or target node could be excluded from set of obstacles\n        const excludedTerminals = options.excludeTerminals.reduce((memo, type) => {\n            const terminal = edge[type];\n            if (terminal) {\n                const cell = model.getCell(terminal.cell);\n                if (cell) {\n                    memo.push(cell);\n                }\n            }\n            return memo;\n        }, []);\n        let excludedAncestors = [];\n        const source = model.getCell(edge.getSourceCellId());\n        if (source) {\n            excludedAncestors = ArrayExt.union(excludedAncestors, source.getAncestors().map((cell) => cell.id));\n        }\n        const target = model.getCell(edge.getTargetCellId());\n        if (target) {\n            excludedAncestors = ArrayExt.union(excludedAncestors, target.getAncestors().map((cell) => cell.id));\n        }\n        // The graph is divided into smaller cells, where each holds information\n        // about which node belong to it. When we query whether a point lies\n        // inside an obstacle we don't need to go through all obstacles, we check\n        // only those in a particular cell.\n        const mapGridSize = this.mapGridSize;\n        model.getNodes().reduce((map, node) => {\n            const excludedTerminal = excludedTerminals.some((cell) => cell.id === node.id);\n            const excludedShape = node.shape\n                ? options.excludeShapes.includes(node.shape)\n                : false;\n            const excludedNode = options.excludeNodes.some((item) => {\n                if (typeof item === 'string') {\n                    return node.id === item;\n                }\n                return item === node;\n            });\n            const excludedAncestor = excludedAncestors.includes(node.id);\n            const excluded = excludedShape || excludedTerminal || excludedNode || excludedAncestor;\n            if (!excluded) {\n                const bbox = node.getBBox().moveAndExpand(options.paddingBox);\n                const origin = bbox.getOrigin().snapToGrid(mapGridSize);\n                const corner = bbox.getCorner().snapToGrid(mapGridSize);\n                for (let x = origin.x; x <= corner.x; x += mapGridSize) {\n                    for (let y = origin.y; y <= corner.y; y += mapGridSize) {\n                        const key = new Point(x, y).toString();\n                        if (map[key] == null) {\n                            map[key] = [];\n                        }\n                        map[key].push(bbox);\n                    }\n                }\n            }\n            return map;\n        }, this.map);\n        return this;\n    }\n    isAccessible(point) {\n        const key = point.clone().snapToGrid(this.mapGridSize).toString();\n        const rects = this.map[key];\n        return rects ? rects.every((rect) => !rect.containsPoint(point)) : true;\n    }\n}\n//# sourceMappingURL=obstacle-map.js.map","import { Point, Line, Angle, GeometryUtil } from '@antv/x6-geometry';\nexport function getSourceBBox(view, options) {\n    const bbox = view.sourceBBox.clone();\n    if (options && options.paddingBox) {\n        return bbox.moveAndExpand(options.paddingBox);\n    }\n    return bbox;\n}\nexport function getTargetBBox(view, options) {\n    const bbox = view.targetBBox.clone();\n    if (options && options.paddingBox) {\n        return bbox.moveAndExpand(options.paddingBox);\n    }\n    return bbox;\n}\nexport function getSourceEndpoint(view, options) {\n    if (view.sourceAnchor) {\n        return view.sourceAnchor;\n    }\n    const sourceBBox = getSourceBBox(view, options);\n    return sourceBBox.getCenter();\n}\nexport function getTargetEndpoint(view, options) {\n    if (view.targetAnchor) {\n        return view.targetAnchor;\n    }\n    const targetBBox = getTargetBBox(view, options);\n    return targetBBox.getCenter();\n}\n// returns a direction index from start point to end point\n// corrects for grid deformation between start and end\nexport function getDirectionAngle(start, end, directionCount, grid, options) {\n    const quadrant = 360 / directionCount;\n    const angleTheta = start.theta(fixAngleEnd(start, end, grid, options));\n    const normalizedAngle = Angle.normalize(angleTheta + quadrant / 2);\n    return quadrant * Math.floor(normalizedAngle / quadrant);\n}\nfunction fixAngleEnd(start, end, grid, options) {\n    const step = options.step;\n    const diffX = end.x - start.x;\n    const diffY = end.y - start.y;\n    const gridStepsX = diffX / grid.x;\n    const gridStepsY = diffY / grid.y;\n    const distanceX = gridStepsX * step;\n    const distanceY = gridStepsY * step;\n    return new Point(start.x + distanceX, start.y + distanceY);\n}\n/**\n * Returns the change in direction between two direction angles.\n */\nexport function getDirectionChange(angle1, angle2) {\n    const change = Math.abs(angle1 - angle2);\n    return change > 180 ? 360 - change : change;\n}\n// fix direction offsets according to current grid\nexport function getGridOffsets(grid, options) {\n    const step = options.step;\n    options.directions.forEach((direction) => {\n        direction.gridOffsetX = (direction.offsetX / step) * grid.x;\n        direction.gridOffsetY = (direction.offsetY / step) * grid.y;\n    });\n    return options.directions;\n}\n// get grid size in x and y dimensions, adapted to source and target positions\nexport function getGrid(step, source, target) {\n    return {\n        source: source.clone(),\n        x: getGridDimension(target.x - source.x, step),\n        y: getGridDimension(target.y - source.y, step),\n    };\n}\nfunction getGridDimension(diff, step) {\n    // return step if diff = 0\n    if (!diff) {\n        return step;\n    }\n    const abs = Math.abs(diff);\n    const count = Math.round(abs / step);\n    // return `abs` if less than one step apart\n    if (!count) {\n        return abs;\n    }\n    // otherwise, return corrected step\n    const roundedDiff = count * step;\n    const remainder = abs - roundedDiff;\n    const correction = remainder / count;\n    return step + correction;\n}\nfunction snapGrid(point, grid) {\n    const source = grid.source;\n    const x = GeometryUtil.snapToGrid(point.x - source.x, grid.x) + source.x;\n    const y = GeometryUtil.snapToGrid(point.y - source.y, grid.y) + source.y;\n    return new Point(x, y);\n}\nexport function round(point, precision) {\n    return point.round(precision);\n}\nexport function align(point, grid, precision) {\n    return round(snapGrid(point.clone(), grid), precision);\n}\nexport function getKey(point) {\n    return point.toString();\n}\nexport function normalizePoint(point) {\n    return new Point(point.x === 0 ? 0 : Math.abs(point.x) / point.x, point.y === 0 ? 0 : Math.abs(point.y) / point.y);\n}\nexport function getCost(from, anchors) {\n    let min = Infinity;\n    for (let i = 0, len = anchors.length; i < len; i += 1) {\n        const dist = from.manhattanDistance(anchors[i]);\n        if (dist < min) {\n            min = dist;\n        }\n    }\n    return min;\n}\n// Find points around the bbox taking given directions into account\n// lines are drawn from anchor in given directions, intersections recorded\n// if anchor is outside bbox, only those directions that intersect get a rect point\n// the anchor itself is returned as rect point (representing some directions)\n// (since those directions are unobstructed by the bbox)\nexport function getRectPoints(anchor, bbox, directionList, grid, options) {\n    const precision = options.precision;\n    const directionMap = options.directionMap;\n    const centerVector = anchor.diff(bbox.getCenter());\n    const rectPoints = Object.keys(directionMap).reduce((res, key) => {\n        if (directionList.includes(key)) {\n            const direction = directionMap[key];\n            // Create a line that is guaranteed to intersect the bbox if bbox\n            // is in the direction even if anchor lies outside of bbox.\n            const ending = new Point(anchor.x + direction.x * (Math.abs(centerVector.x) + bbox.width), anchor.y + direction.y * (Math.abs(centerVector.y) + bbox.height));\n            const intersectionLine = new Line(anchor, ending);\n            // Get the farther intersection, in case there are two\n            // (that happens if anchor lies next to bbox)\n            const intersections = intersectionLine.intersect(bbox) || [];\n            let farthestIntersectionDistance;\n            let farthestIntersection = null;\n            for (let i = 0; i < intersections.length; i += 1) {\n                const intersection = intersections[i];\n                const distance = anchor.squaredDistance(intersection);\n                if (farthestIntersectionDistance == null ||\n                    distance > farthestIntersectionDistance) {\n                    farthestIntersectionDistance = distance;\n                    farthestIntersection = intersection;\n                }\n            }\n            // If an intersection was found in this direction, it is our rectPoint\n            if (farthestIntersection) {\n                let target = align(farthestIntersection, grid, precision);\n                // If the rectPoint lies inside the bbox, offset it by one more step\n                if (bbox.containsPoint(target)) {\n                    target = align(target.translate(direction.x * grid.x, direction.y * grid.y), grid, precision);\n                }\n                res.push(target);\n            }\n        }\n        return res;\n    }, []);\n    // if anchor lies outside of bbox, add it to the array of points\n    if (!bbox.containsPoint(anchor)) {\n        rectPoints.push(align(anchor, grid, precision));\n    }\n    return rectPoints;\n}\n// reconstructs a route by concatenating points with their parents\nexport function reconstructRoute(parents, points, tailPoint, from, to) {\n    const route = [];\n    let prevDiff = normalizePoint(to.diff(tailPoint));\n    // tailPoint is assumed to be aligned already\n    let currentKey = getKey(tailPoint);\n    let parent = parents[currentKey];\n    let point;\n    while (parent) {\n        // point is assumed to be aligned already\n        point = points[currentKey];\n        const diff = normalizePoint(point.diff(parent));\n        if (!diff.equals(prevDiff)) {\n            route.unshift(point);\n            prevDiff = diff;\n        }\n        // parent is assumed to be aligned already\n        currentKey = getKey(parent);\n        parent = parents[currentKey];\n    }\n    // leadPoint is assumed to be aligned already\n    const leadPoint = points[currentKey];\n    const fromDiff = normalizePoint(leadPoint.diff(from));\n    if (!fromDiff.equals(prevDiff)) {\n        route.unshift(leadPoint);\n    }\n    return route;\n}\n//# sourceMappingURL=util.js.map","import { FunctionExt } from '@antv/x6-common';\nimport { Point, Rectangle } from '@antv/x6-geometry';\nimport { SortedSet } from './sorted-set';\nimport { ObstacleMap } from './obstacle-map';\nimport * as util from './util';\nimport { resolveOptions, } from './options';\n/**\n * Finds the route between two points (`from`, `to`).\n */\nfunction findRoute(edgeView, from, to, map, options) {\n    const precision = options.precision;\n    let sourceEndpoint;\n    let targetEndpoint;\n    if (Rectangle.isRectangle(from)) {\n        sourceEndpoint = util.round(util.getSourceEndpoint(edgeView, options).clone(), precision);\n    }\n    else {\n        sourceEndpoint = util.round(from.clone(), precision);\n    }\n    if (Rectangle.isRectangle(to)) {\n        targetEndpoint = util.round(util.getTargetEndpoint(edgeView, options).clone(), precision);\n    }\n    else {\n        targetEndpoint = util.round(to.clone(), precision);\n    }\n    // Get grid for this route.\n    const grid = util.getGrid(options.step, sourceEndpoint, targetEndpoint);\n    // Get pathfinding points.\n    // -----------------------\n    const startPoint = sourceEndpoint;\n    const endPoint = targetEndpoint;\n    let startPoints;\n    let endPoints;\n    if (Rectangle.isRectangle(from)) {\n        startPoints = util.getRectPoints(startPoint, from, options.startDirections, grid, options);\n    }\n    else {\n        startPoints = [startPoint];\n    }\n    if (Rectangle.isRectangle(to)) {\n        endPoints = util.getRectPoints(targetEndpoint, to, options.endDirections, grid, options);\n    }\n    else {\n        endPoints = [endPoint];\n    }\n    // take into account only accessible rect points (those not under obstacles)\n    startPoints = startPoints.filter((p) => map.isAccessible(p));\n    endPoints = endPoints.filter((p) => map.isAccessible(p));\n    // There is an accessible route point on both sides.\n    if (startPoints.length > 0 && endPoints.length > 0) {\n        const openSet = new SortedSet();\n        // Keeps the actual points for given nodes of the open set.\n        const points = {};\n        // Keeps the point that is immediate predecessor of given element.\n        const parents = {};\n        // Cost from start to a point along best known path.\n        const costs = {};\n        for (let i = 0, n = startPoints.length; i < n; i += 1) {\n            // startPoint is assumed to be aligned already\n            const startPoint = startPoints[i];\n            const key = util.getKey(startPoint);\n            openSet.add(key, util.getCost(startPoint, endPoints));\n            points[key] = startPoint;\n            costs[key] = 0;\n        }\n        const previousRouteDirectionAngle = options.previousDirectionAngle;\n        // undefined for first route\n        const isPathBeginning = previousRouteDirectionAngle === undefined;\n        // directions\n        let direction;\n        let directionChange;\n        const directions = util.getGridOffsets(grid, options);\n        const numDirections = directions.length;\n        const endPointsKeys = endPoints.reduce((res, endPoint) => {\n            const key = util.getKey(endPoint);\n            res.push(key);\n            return res;\n        }, []);\n        // main route finding loop\n        const sameStartEndPoints = Point.equalPoints(startPoints, endPoints);\n        let loopsRemaining = options.maxLoopCount;\n        while (!openSet.isEmpty() && loopsRemaining > 0) {\n            // Get the closest item and mark it CLOSED\n            const currentKey = openSet.pop();\n            const currentPoint = points[currentKey];\n            const currentParent = parents[currentKey];\n            const currentCost = costs[currentKey];\n            const isStartPoint = currentPoint.equals(startPoint);\n            const isRouteBeginning = currentParent == null;\n            let previousDirectionAngle;\n            if (!isRouteBeginning) {\n                previousDirectionAngle = util.getDirectionAngle(currentParent, currentPoint, numDirections, grid, options);\n            }\n            else if (!isPathBeginning) {\n                // a vertex on the route\n                previousDirectionAngle = previousRouteDirectionAngle;\n            }\n            else if (!isStartPoint) {\n                // beginning of route on the path\n                previousDirectionAngle = util.getDirectionAngle(startPoint, currentPoint, numDirections, grid, options);\n            }\n            else {\n                previousDirectionAngle = null;\n            }\n            // Check if we reached any endpoint\n            const skipEndCheck = isRouteBeginning && sameStartEndPoints;\n            if (!skipEndCheck && endPointsKeys.indexOf(currentKey) >= 0) {\n                options.previousDirectionAngle = previousDirectionAngle;\n                return util.reconstructRoute(parents, points, currentPoint, startPoint, endPoint);\n            }\n            // Go over all possible directions and find neighbors\n            for (let i = 0; i < numDirections; i += 1) {\n                direction = directions[i];\n                const directionAngle = direction.angle;\n                directionChange = util.getDirectionChange(previousDirectionAngle, directionAngle);\n                // Don't use the point changed rapidly.\n                if (!(isPathBeginning && isStartPoint) &&\n                    directionChange > options.maxDirectionChange) {\n                    continue;\n                }\n                const neighborPoint = util.align(currentPoint\n                    .clone()\n                    .translate(direction.gridOffsetX || 0, direction.gridOffsetY || 0), grid, precision);\n                const neighborKey = util.getKey(neighborPoint);\n                // Closed points were already evaluated.\n                if (openSet.isClose(neighborKey) || !map.isAccessible(neighborPoint)) {\n                    continue;\n                }\n                // Neighbor is an end point.\n                if (endPointsKeys.indexOf(neighborKey) >= 0) {\n                    const isEndPoint = neighborPoint.equals(endPoint);\n                    if (!isEndPoint) {\n                        const endDirectionAngle = util.getDirectionAngle(neighborPoint, endPoint, numDirections, grid, options);\n                        const endDirectionChange = util.getDirectionChange(directionAngle, endDirectionAngle);\n                        if (endDirectionChange > options.maxDirectionChange) {\n                            continue;\n                        }\n                    }\n                }\n                // The current direction is ok.\n                // ----------------------------\n                const neighborCost = direction.cost;\n                const neighborPenalty = isStartPoint\n                    ? 0\n                    : options.penalties[directionChange];\n                const costFromStart = currentCost + neighborCost + neighborPenalty;\n                // Neighbor point has not been processed yet or the cost of\n                // the path from start is lower than previously calculated.\n                if (!openSet.isOpen(neighborKey) ||\n                    costFromStart < costs[neighborKey]) {\n                    points[neighborKey] = neighborPoint;\n                    parents[neighborKey] = currentPoint;\n                    costs[neighborKey] = costFromStart;\n                    openSet.add(neighborKey, costFromStart + util.getCost(neighborPoint, endPoints));\n                }\n            }\n            loopsRemaining -= 1;\n        }\n    }\n    if (options.fallbackRoute) {\n        return FunctionExt.call(options.fallbackRoute, this, startPoint, endPoint, options);\n    }\n    return null;\n}\nfunction snap(vertices, gridSize = 10) {\n    if (vertices.length <= 1) {\n        return vertices;\n    }\n    for (let i = 0, len = vertices.length; i < len - 1; i += 1) {\n        const first = vertices[i];\n        const second = vertices[i + 1];\n        if (first.x === second.x) {\n            const x = gridSize * Math.round(first.x / gridSize);\n            if (first.x !== x) {\n                first.x = x;\n                second.x = x;\n            }\n        }\n        else if (first.y === second.y) {\n            const y = gridSize * Math.round(first.y / gridSize);\n            if (first.y !== y) {\n                first.y = y;\n                second.y = y;\n            }\n        }\n    }\n    return vertices;\n}\nexport const router = function (vertices, optionsRaw, edgeView) {\n    const options = resolveOptions(optionsRaw);\n    const sourceBBox = util.getSourceBBox(edgeView, options);\n    const targetBBox = util.getTargetBBox(edgeView, options);\n    const sourceEndpoint = util.getSourceEndpoint(edgeView, options);\n    // pathfinding\n    const map = new ObstacleMap(options).build(edgeView.graph.model, edgeView.cell);\n    const oldVertices = vertices.map((p) => Point.create(p));\n    const newVertices = [];\n    // The origin of first route's grid, does not need snapping\n    let tailPoint = sourceEndpoint;\n    let from;\n    let to;\n    for (let i = 0, len = oldVertices.length; i <= len; i += 1) {\n        let partialRoute = null;\n        from = to || sourceBBox;\n        to = oldVertices[i];\n        // This is the last iteration\n        if (to == null) {\n            to = targetBBox;\n            // If the target is a point, we should use dragging route\n            // instead of main routing method if it has been provided.\n            const edge = edgeView.cell;\n            const isEndingAtPoint = edge.getSourceCellId() == null || edge.getTargetCellId() == null;\n            if (isEndingAtPoint && typeof options.draggingRouter === 'function') {\n                const dragFrom = from === sourceBBox ? sourceEndpoint : from;\n                const dragTo = to.getOrigin();\n                partialRoute = FunctionExt.call(options.draggingRouter, edgeView, dragFrom, dragTo, options);\n            }\n        }\n        // Find the partial route\n        if (partialRoute == null) {\n            partialRoute = findRoute(edgeView, from, to, map, options);\n        }\n        // Cannot found the partial route.\n        if (partialRoute === null) {\n            // eslint-next-line\n            console.warn(`Unable to execute manhattan algorithm, use orth instead`);\n            return FunctionExt.call(options.fallbackRouter, this, vertices, options, edgeView);\n        }\n        // Remove the first point if the previous partial route has\n        // the same point as last.\n        const leadPoint = partialRoute[0];\n        if (leadPoint && leadPoint.equals(tailPoint)) {\n            partialRoute.shift();\n        }\n        // Save tailPoint for next iteration\n        tailPoint = partialRoute[partialRoute.length - 1] || tailPoint;\n        newVertices.push(...partialRoute);\n    }\n    if (options.snapToGrid) {\n        return snap(newVertices, edgeView.graph.grid.getGridSize());\n    }\n    return newVertices;\n};\n//# sourceMappingURL=router.js.map","import { FunctionExt } from '@antv/x6-common';\nimport { router } from './router';\nimport { defaults } from './options';\nexport const manhattan = function (vertices, options, edgeView) {\n    return FunctionExt.call(router, this, vertices, Object.assign(Object.assign({}, defaults), options), edgeView);\n};\n//# sourceMappingURL=index.js.map","import { FunctionExt } from '@antv/x6-common';\nimport { Point, Line, Angle } from '@antv/x6-geometry';\nimport { resolve } from './manhattan/options';\nimport { manhattan } from './manhattan/index';\nconst defaults = {\n    maxDirectionChange: 45,\n    // an array of directions to find next points on the route\n    // different from start/end directions\n    directions() {\n        const step = resolve(this.step, this);\n        const cost = resolve(this.cost, this);\n        const diagonalCost = Math.ceil(Math.sqrt((step * step) << 1)); // eslint-disable-line no-bitwise\n        return [\n            { cost, offsetX: step, offsetY: 0 },\n            { cost: diagonalCost, offsetX: step, offsetY: step },\n            { cost, offsetX: 0, offsetY: step },\n            { cost: diagonalCost, offsetX: -step, offsetY: step },\n            { cost, offsetX: -step, offsetY: 0 },\n            { cost: diagonalCost, offsetX: -step, offsetY: -step },\n            { cost, offsetX: 0, offsetY: -step },\n            { cost: diagonalCost, offsetX: step, offsetY: -step },\n        ];\n    },\n    // a simple route used in situations when main routing method fails\n    // (exceed max number of loop iterations, inaccessible)\n    fallbackRoute(from, to, options) {\n        // Find a route which breaks by 45 degrees ignoring all obstacles.\n        const theta = from.theta(to);\n        const route = [];\n        let a = { x: to.x, y: from.y };\n        let b = { x: from.x, y: to.y };\n        if (theta % 180 > 90) {\n            const t = a;\n            a = b;\n            b = t;\n        }\n        const p1 = theta % 90 < 45 ? a : b;\n        const l1 = new Line(from, p1);\n        const alpha = 90 * Math.ceil(theta / 90);\n        const p2 = Point.fromPolar(l1.squaredLength(), Angle.toRad(alpha + 135), p1);\n        const l2 = new Line(to, p2);\n        const intersectionPoint = l1.intersectsWithLine(l2);\n        const point = intersectionPoint || to;\n        const directionFrom = intersectionPoint ? point : from;\n        const quadrant = 360 / options.directions.length;\n        const angleTheta = directionFrom.theta(to);\n        const normalizedAngle = Angle.normalize(angleTheta + quadrant / 2);\n        const directionAngle = quadrant * Math.floor(normalizedAngle / quadrant);\n        options.previousDirectionAngle = directionAngle;\n        if (point)\n            route.push(point.round());\n        route.push(to);\n        return route;\n    },\n};\nexport const metro = function (vertices, options, linkView) {\n    return FunctionExt.call(manhattan, this, vertices, Object.assign(Object.assign({}, defaults), options), linkView);\n};\n//# sourceMappingURL=metro.js.map","export const er = function (vertices, options, edgeView) {\n    const offsetRaw = options.offset || 32;\n    const min = options.min == null ? 16 : options.min;\n    let offset = 0;\n    let direction = options.direction;\n    const sourceBBox = edgeView.sourceBBox;\n    const targetBBox = edgeView.targetBBox;\n    const sourcePoint = sourceBBox.getCenter();\n    const targetPoint = targetBBox.getCenter();\n    if (typeof offsetRaw === 'number') {\n        offset = offsetRaw;\n    }\n    if (direction == null) {\n        let dx = targetBBox.left - sourceBBox.right;\n        let dy = targetBBox.top - sourceBBox.bottom;\n        if (dx >= 0 && dy >= 0) {\n            direction = dx >= dy ? 'L' : 'T';\n        }\n        else if (dx <= 0 && dy >= 0) {\n            dx = sourceBBox.left - targetBBox.right;\n            if (dx >= 0) {\n                direction = dx >= dy ? 'R' : 'T';\n            }\n            else {\n                direction = 'T';\n            }\n        }\n        else if (dx >= 0 && dy <= 0) {\n            dy = sourceBBox.top - targetBBox.bottom;\n            if (dy >= 0) {\n                direction = dx >= dy ? 'L' : 'B';\n            }\n            else {\n                direction = 'L';\n            }\n        }\n        else {\n            dx = sourceBBox.left - targetBBox.right;\n            dy = sourceBBox.top - targetBBox.bottom;\n            if (dx >= 0 && dy >= 0) {\n                direction = dx >= dy ? 'R' : 'B';\n            }\n            else if (dx <= 0 && dy >= 0) {\n                direction = 'B';\n            }\n            else if (dx >= 0 && dy <= 0) {\n                direction = 'R';\n            }\n            else {\n                direction = Math.abs(dx) > Math.abs(dy) ? 'R' : 'B';\n            }\n        }\n    }\n    if (direction === 'H') {\n        direction = targetPoint.x - sourcePoint.x >= 0 ? 'L' : 'R';\n    }\n    else if (direction === 'V') {\n        direction = targetPoint.y - sourcePoint.y >= 0 ? 'T' : 'B';\n    }\n    if (offsetRaw === 'center') {\n        if (direction === 'L') {\n            offset = (targetBBox.left - sourceBBox.right) / 2;\n        }\n        else if (direction === 'R') {\n            offset = (sourceBBox.left - targetBBox.right) / 2;\n        }\n        else if (direction === 'T') {\n            offset = (targetBBox.top - sourceBBox.bottom) / 2;\n        }\n        else if (direction === 'B') {\n            offset = (sourceBBox.top - targetBBox.bottom) / 2;\n        }\n    }\n    let coord;\n    let dim;\n    let factor;\n    const horizontal = direction === 'L' || direction === 'R';\n    if (horizontal) {\n        if (targetPoint.y === sourcePoint.y) {\n            return [...vertices];\n        }\n        factor = direction === 'L' ? 1 : -1;\n        coord = 'x';\n        dim = 'width';\n    }\n    else {\n        if (targetPoint.x === sourcePoint.x) {\n            return [...vertices];\n        }\n        factor = direction === 'T' ? 1 : -1;\n        coord = 'y';\n        dim = 'height';\n    }\n    const source = sourcePoint.clone();\n    const target = targetPoint.clone();\n    source[coord] += factor * (sourceBBox[dim] / 2 + offset);\n    target[coord] -= factor * (targetBBox[dim] / 2 + offset);\n    if (horizontal) {\n        const sourceX = source.x;\n        const targetX = target.x;\n        const sourceDelta = sourceBBox.width / 2 + min;\n        const targetDelta = targetBBox.width / 2 + min;\n        if (targetPoint.x > sourcePoint.x) {\n            if (targetX <= sourceX) {\n                source.x = Math.max(targetX, sourcePoint.x + sourceDelta);\n                target.x = Math.min(sourceX, targetPoint.x - targetDelta);\n            }\n        }\n        else if (targetX >= sourceX) {\n            source.x = Math.min(targetX, sourcePoint.x - sourceDelta);\n            target.x = Math.max(sourceX, targetPoint.x + targetDelta);\n        }\n    }\n    else {\n        const sourceY = source.y;\n        const targetY = target.y;\n        const sourceDelta = sourceBBox.height / 2 + min;\n        const targetDelta = targetBBox.height / 2 + min;\n        if (targetPoint.y > sourcePoint.y) {\n            if (targetY <= sourceY) {\n                source.y = Math.max(targetY, sourcePoint.y + sourceDelta);\n                target.y = Math.min(sourceY, targetPoint.y - targetDelta);\n            }\n        }\n        else if (targetY >= sourceY) {\n            source.y = Math.min(targetY, sourcePoint.y - sourceDelta);\n            target.y = Math.max(sourceY, targetPoint.y + targetDelta);\n        }\n    }\n    return [source.toJSON(), ...vertices, target.toJSON()];\n};\n//# sourceMappingURL=er.js.map","import { Angle, Point, Line } from '@antv/x6-geometry';\nfunction rollup(points, merge) {\n    if (merge != null && merge !== false) {\n        const amount = typeof merge === 'boolean' ? 0 : merge;\n        if (amount > 0) {\n            const center1 = Point.create(points[1]).move(points[2], amount);\n            const center2 = Point.create(points[1]).move(points[0], amount);\n            return [center1.toJSON(), ...points, center2.toJSON()];\n        }\n        {\n            const center = points[1];\n            return [Object.assign({}, center), ...points, Object.assign({}, center)];\n        }\n    }\n    return points;\n}\nexport const loop = function (vertices, options, edgeView) {\n    const width = options.width || 50;\n    const height = options.height || 80;\n    const halfHeight = height / 2;\n    const angle = options.angle || 'auto';\n    const sourceAnchor = edgeView.sourceAnchor;\n    const targetAnchor = edgeView.targetAnchor;\n    const sourceBBox = edgeView.sourceBBox;\n    const targetBBox = edgeView.targetBBox;\n    if (sourceAnchor.equals(targetAnchor)) {\n        const getVertices = (angle) => {\n            const rad = Angle.toRad(angle);\n            const sin = Math.sin(rad);\n            const cos = Math.cos(rad);\n            const center = new Point(sourceAnchor.x + cos * width, sourceAnchor.y + sin * width);\n            const ref = new Point(center.x - cos * halfHeight, center.y - sin * halfHeight);\n            const p1 = ref.clone().rotate(-90, center);\n            const p2 = ref.clone().rotate(90, center);\n            return [p1.toJSON(), center.toJSON(), p2.toJSON()];\n        };\n        const validate = (end) => {\n            const start = sourceAnchor.clone().move(end, -1);\n            const line = new Line(start, end);\n            return (!sourceBBox.containsPoint(end) && !sourceBBox.intersectsWithLine(line));\n        };\n        const angles = [0, 90, 180, 270, 45, 135, 225, 315];\n        if (typeof angle === 'number') {\n            return rollup(getVertices(angle), options.merge);\n        }\n        const center = sourceBBox.getCenter();\n        if (center.equals(sourceAnchor)) {\n            return rollup(getVertices(0), options.merge);\n        }\n        const deg = center.angleBetween(sourceAnchor, center.clone().translate(1, 0));\n        let ret = getVertices(deg);\n        if (validate(ret[1])) {\n            return rollup(ret, options.merge);\n        }\n        // return the best vertices\n        for (let i = 1, l = angles.length; i < l; i += 1) {\n            ret = getVertices(deg + angles[i]);\n            if (validate(ret[1])) {\n                return rollup(ret, options.merge);\n            }\n        }\n        return rollup(ret, options.merge);\n    }\n    {\n        const line = new Line(sourceAnchor, targetAnchor);\n        let parallel = line.parallel(-width);\n        let center = parallel.getCenter();\n        let p1 = parallel.start.clone().move(parallel.end, halfHeight);\n        let p2 = parallel.end.clone().move(parallel.start, halfHeight);\n        const ref = line.parallel(-1);\n        const line1 = new Line(ref.start, center);\n        const line2 = new Line(ref.end, center);\n        if (sourceBBox.containsPoint(center) ||\n            targetBBox.containsPoint(center) ||\n            sourceBBox.intersectsWithLine(line1) ||\n            sourceBBox.intersectsWithLine(line2) ||\n            targetBBox.intersectsWithLine(line1) ||\n            targetBBox.intersectsWithLine(line2)) {\n            parallel = line.parallel(width);\n            center = parallel.getCenter();\n            p1 = parallel.start.clone().move(parallel.end, halfHeight);\n            p2 = parallel.end.clone().move(parallel.start, halfHeight);\n        }\n        if (options.merge) {\n            const line = new Line(sourceAnchor, targetAnchor);\n            const normal = new Line(center, line.center).setLength(Number.MAX_SAFE_INTEGER);\n            const intersects1 = sourceBBox.intersectsWithLine(normal);\n            const intersects2 = targetBBox.intersectsWithLine(normal);\n            const intersects = intersects1\n                ? Array.isArray(intersects1)\n                    ? intersects1\n                    : [intersects1]\n                : [];\n            if (intersects2) {\n                if (Array.isArray(intersects2)) {\n                    intersects.push(...intersects2);\n                }\n                else {\n                    intersects.push(intersects2);\n                }\n            }\n            const anchor = line.center.closest(intersects);\n            if (anchor) {\n                edgeView.sourceAnchor = anchor.clone();\n                edgeView.targetAnchor = anchor.clone();\n            }\n            else {\n                edgeView.sourceAnchor = line.center.clone();\n                edgeView.targetAnchor = line.center.clone();\n            }\n        }\n        return rollup([p1.toJSON(), center.toJSON(), p2.toJSON()], options.merge);\n    }\n};\n//# sourceMappingURL=loop.js.map","import { Registry } from '../registry';\nimport * as routers from './main';\nexport var Router;\n(function (Router) {\n    Router.presets = routers;\n    Router.registry = Registry.create({\n        type: 'router',\n    });\n    Router.registry.register(Router.presets, true);\n})(Router || (Router = {}));\n//# sourceMappingURL=index.js.map","import { Polyline, Path } from '@antv/x6-geometry';\nexport const normal = function (sourcePoint, targetPoint, routePoints, options = {}) {\n    const points = [sourcePoint, ...routePoints, targetPoint];\n    const polyline = new Polyline(points);\n    const path = new Path(polyline);\n    return options.raw ? path : path.serialize();\n};\n//# sourceMappingURL=normal.js.map","import { Path, Point } from '@antv/x6-geometry';\nexport const loop = function (sourcePoint, targetPoint, routePoints, options = {}) {\n    const fix = routePoints.length === 3 ? 0 : 1;\n    const p1 = Point.create(routePoints[0 + fix]);\n    const p2 = Point.create(routePoints[2 + fix]);\n    const center = Point.create(routePoints[1 + fix]);\n    if (!Point.equals(sourcePoint, targetPoint)) {\n        const middle = new Point((sourcePoint.x + targetPoint.x) / 2, (sourcePoint.y + targetPoint.y) / 2);\n        const angle = middle.angleBetween(Point.create(sourcePoint).rotate(90, middle), center);\n        if (angle > 1) {\n            p1.rotate(180 - angle, middle);\n            p2.rotate(180 - angle, middle);\n            center.rotate(180 - angle, middle);\n        }\n    }\n    const pathData = `\n     M ${sourcePoint.x} ${sourcePoint.y}\n     Q ${p1.x} ${p1.y} ${center.x} ${center.y}\n     Q ${p2.x} ${p2.y} ${targetPoint.x} ${targetPoint.y}\n  `;\n    return options.raw ? Path.parse(pathData) : pathData;\n};\n//# sourceMappingURL=loop.js.map","import { Point, Path } from '@antv/x6-geometry';\nexport const rounded = function (sourcePoint, targetPoint, routePoints, options = {}) {\n    const path = new Path();\n    path.appendSegment(Path.createSegment('M', sourcePoint));\n    const f13 = 1 / 3;\n    const f23 = 2 / 3;\n    const radius = options.radius || 10;\n    let prevDistance;\n    let nextDistance;\n    for (let i = 0, ii = routePoints.length; i < ii; i += 1) {\n        const curr = Point.create(routePoints[i]);\n        const prev = routePoints[i - 1] || sourcePoint;\n        const next = routePoints[i + 1] || targetPoint;\n        prevDistance = nextDistance || curr.distance(prev) / 2;\n        nextDistance = curr.distance(next) / 2;\n        const startMove = -Math.min(radius, prevDistance);\n        const endMove = -Math.min(radius, nextDistance);\n        const roundedStart = curr.clone().move(prev, startMove).round();\n        const roundedEnd = curr.clone().move(next, endMove).round();\n        const control1 = new Point(f13 * roundedStart.x + f23 * curr.x, f23 * curr.y + f13 * roundedStart.y);\n        const control2 = new Point(f13 * roundedEnd.x + f23 * curr.x, f23 * curr.y + f13 * roundedEnd.y);\n        path.appendSegment(Path.createSegment('L', roundedStart));\n        path.appendSegment(Path.createSegment('C', control1, control2, roundedEnd));\n    }\n    path.appendSegment(Path.createSegment('L', targetPoint));\n    return options.raw ? path : path.serialize();\n};\n//# sourceMappingURL=rounded.js.map","import { Curve, Path } from '@antv/x6-geometry';\nexport const smooth = function (sourcePoint, targetPoint, routePoints, options = {}) {\n    let path;\n    let direction = options.direction;\n    if (routePoints && routePoints.length !== 0) {\n        const points = [sourcePoint, ...routePoints, targetPoint];\n        const curves = Curve.throughPoints(points);\n        path = new Path(curves);\n    }\n    else {\n        // If we have no route, use a default cubic bezier curve, cubic bezier\n        // requires two control points, the control points have `x` midway\n        // between source and target. This produces an S-like curve.\n        path = new Path();\n        path.appendSegment(Path.createSegment('M', sourcePoint));\n        if (!direction) {\n            direction =\n                Math.abs(sourcePoint.x - targetPoint.x) >=\n                    Math.abs(sourcePoint.y - targetPoint.y)\n                    ? 'H'\n                    : 'V';\n        }\n        if (direction === 'H') {\n            const controlPointX = (sourcePoint.x + targetPoint.x) / 2;\n            path.appendSegment(Path.createSegment('C', controlPointX, sourcePoint.y, controlPointX, targetPoint.y, targetPoint.x, targetPoint.y));\n        }\n        else {\n            const controlPointY = (sourcePoint.y + targetPoint.y) / 2;\n            path.appendSegment(Path.createSegment('C', sourcePoint.x, controlPointY, targetPoint.x, controlPointY, targetPoint.x, targetPoint.y));\n        }\n    }\n    return options.raw ? path : path.serialize();\n};\n//# sourceMappingURL=smooth.js.map","/* eslint-disable no-underscore-dangle */\nimport { Point, Line, Path } from '@antv/x6-geometry';\n// takes care of math. error for case when jump is too close to end of line\nconst CLOSE_PROXIMITY_PADDING = 1;\nconst F13 = 1 / 3;\nconst F23 = 2 / 3;\nfunction setupUpdating(view) {\n    let updateList = view.graph._jumpOverUpdateList;\n    // first time setup for this paper\n    if (updateList == null) {\n        updateList = view.graph._jumpOverUpdateList = [];\n        view.graph.on('cell:mouseup', () => {\n            const list = view.graph._jumpOverUpdateList;\n            // add timeout to wait for the target node to be connected\n            // fix https://github.com/antvis/X6/issues/3387\n            setTimeout(() => {\n                for (let i = 0; i < list.length; i += 1) {\n                    list[i].update();\n                }\n            });\n        });\n        view.graph.on('model:reseted', () => {\n            updateList = view.graph._jumpOverUpdateList = [];\n        });\n    }\n    // add this link to a list so it can be updated when some other link is updated\n    if (updateList.indexOf(view) < 0) {\n        updateList.push(view);\n        // watch for change of connector type or removal of link itself\n        // to remove the link from a list of jump over connectors\n        const clean = () => updateList.splice(updateList.indexOf(view), 1);\n        view.cell.once('change:connector', clean);\n        view.cell.once('removed', clean);\n    }\n}\nfunction createLines(sourcePoint, targetPoint, route = []) {\n    const points = [sourcePoint, ...route, targetPoint];\n    const lines = [];\n    points.forEach((point, idx) => {\n        const next = points[idx + 1];\n        if (next != null) {\n            lines.push(new Line(point, next));\n        }\n    });\n    return lines;\n}\nfunction findLineIntersections(line, crossCheckLines) {\n    const intersections = [];\n    crossCheckLines.forEach((crossCheckLine) => {\n        const intersection = line.intersectsWithLine(crossCheckLine);\n        if (intersection) {\n            intersections.push(intersection);\n        }\n    });\n    return intersections;\n}\nfunction getDistence(p1, p2) {\n    return new Line(p1, p2).squaredLength();\n}\n/**\n * Split input line into multiple based on intersection points.\n */\nfunction createJumps(line, intersections, jumpSize) {\n    return intersections.reduce((memo, point, idx) => {\n        // skipping points that were merged with the previous line\n        // to make bigger arc over multiple lines that are close to each other\n        if (skippedPoints.includes(point)) {\n            return memo;\n        }\n        // always grab the last line from buffer and modify it\n        const lastLine = memo.pop() || line;\n        // calculate start and end of jump by moving by a given size of jump\n        const jumpStart = Point.create(point).move(lastLine.start, -jumpSize);\n        let jumpEnd = Point.create(point).move(lastLine.start, +jumpSize);\n        // now try to look at the next intersection point\n        const nextPoint = intersections[idx + 1];\n        if (nextPoint != null) {\n            const distance = jumpEnd.distance(nextPoint);\n            if (distance <= jumpSize) {\n                // next point is close enough, move the jump end by this\n                // difference and mark the next point to be skipped\n                jumpEnd = nextPoint.move(lastLine.start, distance);\n                skippedPoints.push(nextPoint);\n            }\n        }\n        else {\n            // this block is inside of `else` as an optimization so the distance is\n            // not calculated when we know there are no other intersection points\n            const endDistance = jumpStart.distance(lastLine.end);\n            // if the end is too close to possible jump, draw remaining line instead of a jump\n            if (endDistance < jumpSize * 2 + CLOSE_PROXIMITY_PADDING) {\n                memo.push(lastLine);\n                return memo;\n            }\n        }\n        const startDistance = jumpEnd.distance(lastLine.start);\n        if (startDistance < jumpSize * 2 + CLOSE_PROXIMITY_PADDING) {\n            // if the start of line is too close to jump, draw that line instead of a jump\n            memo.push(lastLine);\n            return memo;\n        }\n        // finally create a jump line\n        const jumpLine = new Line(jumpStart, jumpEnd);\n        // it's just simple line but with a `isJump` property\n        jumppedLines.push(jumpLine);\n        memo.push(new Line(lastLine.start, jumpStart), jumpLine, new Line(jumpEnd, lastLine.end));\n        return memo;\n    }, []);\n}\nfunction buildPath(lines, jumpSize, jumpType, radius) {\n    const path = new Path();\n    let segment;\n    // first move to the start of a first line\n    segment = Path.createSegment('M', lines[0].start);\n    path.appendSegment(segment);\n    lines.forEach((line, index) => {\n        if (jumppedLines.includes(line)) {\n            let angle;\n            let diff;\n            let control1;\n            let control2;\n            if (jumpType === 'arc') {\n                // approximates semicircle with 2 curves\n                angle = -90;\n                // determine rotation of arc based on difference between points\n                diff = line.start.diff(line.end);\n                // make sure the arc always points up (or right)\n                const xAxisRotate = diff.x < 0 || (diff.x === 0 && diff.y < 0);\n                if (xAxisRotate) {\n                    angle += 180;\n                }\n                const center = line.getCenter();\n                const centerLine = new Line(center, line.end).rotate(angle, center);\n                let halfLine;\n                // first half\n                halfLine = new Line(line.start, center);\n                control1 = halfLine.pointAt(2 / 3).rotate(angle, line.start);\n                control2 = centerLine.pointAt(1 / 3).rotate(-angle, centerLine.end);\n                segment = Path.createSegment('C', control1, control2, centerLine.end);\n                path.appendSegment(segment);\n                // second half\n                halfLine = new Line(center, line.end);\n                control1 = centerLine.pointAt(1 / 3).rotate(angle, centerLine.end);\n                control2 = halfLine.pointAt(1 / 3).rotate(-angle, line.end);\n                segment = Path.createSegment('C', control1, control2, line.end);\n                path.appendSegment(segment);\n            }\n            else if (jumpType === 'gap') {\n                segment = Path.createSegment('M', line.end);\n                path.appendSegment(segment);\n            }\n            else if (jumpType === 'cubic') {\n                // approximates semicircle with 1 curve\n                angle = line.start.theta(line.end);\n                const xOffset = jumpSize * 0.6;\n                let yOffset = jumpSize * 1.35;\n                // determine rotation of arc based on difference between points\n                diff = line.start.diff(line.end);\n                // make sure the arc always points up (or right)\n                const xAxisRotate = diff.x < 0 || (diff.x === 0 && diff.y < 0);\n                if (xAxisRotate) {\n                    yOffset *= -1;\n                }\n                control1 = new Point(line.start.x + xOffset, line.start.y + yOffset).rotate(angle, line.start);\n                control2 = new Point(line.end.x - xOffset, line.end.y + yOffset).rotate(angle, line.end);\n                segment = Path.createSegment('C', control1, control2, line.end);\n                path.appendSegment(segment);\n            }\n        }\n        else {\n            const nextLine = lines[index + 1];\n            if (radius === 0 || !nextLine || jumppedLines.includes(nextLine)) {\n                segment = Path.createSegment('L', line.end);\n                path.appendSegment(segment);\n            }\n            else {\n                buildRoundedSegment(radius, path, line.end, line.start, nextLine.end);\n            }\n        }\n    });\n    return path;\n}\nfunction buildRoundedSegment(offset, path, curr, prev, next) {\n    const prevDistance = curr.distance(prev) / 2;\n    const nextDistance = curr.distance(next) / 2;\n    const startMove = -Math.min(offset, prevDistance);\n    const endMove = -Math.min(offset, nextDistance);\n    const roundedStart = curr.clone().move(prev, startMove).round();\n    const roundedEnd = curr.clone().move(next, endMove).round();\n    const control1 = new Point(F13 * roundedStart.x + F23 * curr.x, F23 * curr.y + F13 * roundedStart.y);\n    const control2 = new Point(F13 * roundedEnd.x + F23 * curr.x, F23 * curr.y + F13 * roundedEnd.y);\n    let segment;\n    segment = Path.createSegment('L', roundedStart);\n    path.appendSegment(segment);\n    segment = Path.createSegment('C', control1, control2, roundedEnd);\n    path.appendSegment(segment);\n}\nlet jumppedLines;\nlet skippedPoints;\nexport const jumpover = function (sourcePoint, targetPoint, routePoints, options = {}) {\n    jumppedLines = [];\n    skippedPoints = [];\n    setupUpdating(this);\n    const jumpSize = options.size || 5;\n    const jumpType = options.type || 'arc';\n    const radius = options.radius || 0;\n    // list of connector types not to jump over.\n    const ignoreConnectors = options.ignoreConnectors || ['smooth'];\n    const graph = this.graph;\n    const model = graph.model;\n    const allLinks = model.getEdges();\n    // there is just one link, draw it directly\n    if (allLinks.length === 1) {\n        return buildPath(createLines(sourcePoint, targetPoint, routePoints), jumpSize, jumpType, radius);\n    }\n    const edge = this.cell;\n    const thisIndex = allLinks.indexOf(edge);\n    const defaultConnector = graph.options.connecting.connector || {};\n    // not all links are meant to be jumped over.\n    const edges = allLinks.filter((link, idx) => {\n        const connector = link.getConnector() || defaultConnector;\n        // avoid jumping over links with connector type listed in `ignored connectors`.\n        if (ignoreConnectors.includes(connector.name)) {\n            return false;\n        }\n        // filter out links that are above this one and  have the same connector type\n        // otherwise there would double hoops for each intersection\n        if (idx > thisIndex) {\n            return connector.name !== 'jumpover';\n        }\n        return true;\n    });\n    // find views for all links\n    const linkViews = edges.map((edge) => {\n        return graph.findViewByCell(edge);\n    });\n    // create lines for this link\n    const thisLines = createLines(sourcePoint, targetPoint, routePoints);\n    // create lines for all other links\n    const linkLines = linkViews.map((linkView) => {\n        if (linkView == null) {\n            return [];\n        }\n        if (linkView === this) {\n            return thisLines;\n        }\n        return createLines(linkView.sourcePoint, linkView.targetPoint, linkView.routePoints);\n    });\n    // transform lines for this link by splitting with jump lines at\n    // points of intersection with other links\n    const jumpingLines = [];\n    thisLines.forEach((line) => {\n        // iterate all links and grab the intersections with this line\n        // these are then sorted by distance so the line can be split more easily\n        const intersections = edges\n            .reduce((memo, link, i) => {\n            // don't intersection with itself\n            if (link !== edge) {\n                const lineIntersections = findLineIntersections(line, linkLines[i]);\n                memo.push(...lineIntersections);\n            }\n            return memo;\n        }, [])\n            .sort((a, b) => getDistence(line.start, a) - getDistence(line.start, b));\n        if (intersections.length > 0) {\n            // split the line based on found intersection points\n            jumpingLines.push(...createJumps(line, intersections, jumpSize));\n        }\n        else {\n            // without any intersection the line goes uninterrupted\n            jumpingLines.push(line);\n        }\n    });\n    const path = buildPath(jumpingLines, jumpSize, jumpType, radius);\n    jumppedLines = [];\n    skippedPoints = [];\n    return options.raw ? path : path.serialize();\n};\n//# sourceMappingURL=jumpover.js.map","import { Registry } from '../registry';\nimport * as connectors from './main';\nexport var Connector;\n(function (Connector) {\n    Connector.presets = connectors;\n    Connector.registry = Registry.create({\n        type: 'connector',\n    });\n    Connector.registry.register(Connector.presets, true);\n})(Connector || (Connector = {}));\n//# sourceMappingURL=index.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ObjectExt, Basecoat } from '@antv/x6-common';\nexport class Store extends Basecoat {\n    constructor(data = {}) {\n        super();\n        this.pending = false;\n        this.changing = false;\n        this.data = {};\n        this.mutate(ObjectExt.cloneDeep(data));\n        this.changed = {};\n    }\n    mutate(data, options = {}) {\n        const unset = options.unset === true;\n        const silent = options.silent === true;\n        const changes = [];\n        const changing = this.changing;\n        this.changing = true;\n        if (!changing) {\n            this.previous = ObjectExt.cloneDeep(this.data);\n            this.changed = {};\n        }\n        const current = this.data;\n        const previous = this.previous;\n        const changed = this.changed;\n        Object.keys(data).forEach((k) => {\n            const key = k;\n            const newValue = data[key];\n            if (!ObjectExt.isEqual(current[key], newValue)) {\n                changes.push(key);\n            }\n            if (!ObjectExt.isEqual(previous[key], newValue)) {\n                changed[key] = newValue;\n            }\n            else {\n                delete changed[key];\n            }\n            if (unset) {\n                delete current[key];\n            }\n            else {\n                current[key] = newValue;\n            }\n        });\n        if (!silent && changes.length > 0) {\n            this.pending = true;\n            this.pendingOptions = options;\n            changes.forEach((key) => {\n                this.emit('change:*', {\n                    key,\n                    options,\n                    store: this,\n                    current: current[key],\n                    previous: previous[key],\n                });\n            });\n        }\n        if (changing) {\n            return this;\n        }\n        if (!silent) {\n            // Changes can be recursively nested within `\"change\"` events.\n            while (this.pending) {\n                this.pending = false;\n                this.emit('changed', {\n                    current,\n                    previous,\n                    store: this,\n                    options: this.pendingOptions,\n                });\n            }\n        }\n        this.pending = false;\n        this.changing = false;\n        this.pendingOptions = null;\n        return this;\n    }\n    get(key, defaultValue) {\n        if (key == null) {\n            return this.data;\n        }\n        const ret = this.data[key];\n        return ret == null ? defaultValue : ret;\n    }\n    getPrevious(key) {\n        if (this.previous) {\n            const ret = this.previous[key];\n            return ret == null ? undefined : ret;\n        }\n        return undefined;\n    }\n    set(key, value, options) {\n        if (key != null) {\n            if (typeof key === 'object') {\n                this.mutate(key, value);\n            }\n            else {\n                this.mutate({ [key]: value }, options);\n            }\n        }\n        return this;\n    }\n    remove(key, options) {\n        const empty = undefined;\n        const subset = {};\n        let opts;\n        if (typeof key === 'string') {\n            subset[key] = empty;\n            opts = options;\n        }\n        else if (Array.isArray(key)) {\n            key.forEach((k) => (subset[k] = empty));\n            opts = options;\n        }\n        else {\n            // eslint-disable-next-line\n            for (const key in this.data) {\n                subset[key] = empty;\n            }\n            opts = key;\n        }\n        this.mutate(subset, Object.assign(Object.assign({}, opts), { unset: true }));\n        return this;\n    }\n    getByPath(path) {\n        return ObjectExt.getByPath(this.data, path, '/');\n    }\n    setByPath(path, value, options = {}) {\n        const delim = '/';\n        const pathArray = Array.isArray(path) ? [...path] : path.split(delim);\n        const pathString = Array.isArray(path) ? path.join(delim) : path;\n        const property = pathArray[0];\n        const pathArrayLength = pathArray.length;\n        options.propertyPath = pathString;\n        options.propertyValue = value;\n        options.propertyPathArray = pathArray;\n        if (pathArrayLength === 1) {\n            this.set(property, value, options);\n        }\n        else {\n            const update = {};\n            let diver = update;\n            let nextKey = property;\n            // Initialize the nested object. Subobjects are either arrays or objects.\n            // An empty array is created if the sub-key is an integer. Otherwise, an\n            // empty object is created.\n            for (let i = 1; i < pathArrayLength; i += 1) {\n                const key = pathArray[i];\n                const isArrayIndex = Number.isFinite(Number(key));\n                diver = diver[nextKey] = isArrayIndex ? [] : {};\n                nextKey = key;\n            }\n            // Fills update with the `value` on `path`.\n            ObjectExt.setByPath(update, pathArray, value, delim);\n            const data = ObjectExt.cloneDeep(this.data);\n            // If rewrite mode enabled, we replace value referenced by path with the\n            // new one (we don't merge).\n            if (options.rewrite) {\n                ObjectExt.unsetByPath(data, path, delim);\n            }\n            const merged = ObjectExt.merge(data, update);\n            this.set(property, merged[property], options);\n        }\n        return this;\n    }\n    removeByPath(path, options) {\n        const keys = Array.isArray(path) ? path : path.split('/');\n        const key = keys[0];\n        if (keys.length === 1) {\n            this.remove(key, options);\n        }\n        else {\n            const paths = keys.slice(1);\n            const prop = ObjectExt.cloneDeep(this.get(key));\n            if (prop) {\n                ObjectExt.unsetByPath(prop, paths);\n            }\n            this.set(key, prop, options);\n        }\n        return this;\n    }\n    hasChanged(key) {\n        if (key == null) {\n            return Object.keys(this.changed).length > 0;\n        }\n        return key in this.changed;\n    }\n    /**\n     * Returns an object containing all the data that have changed,\n     * or `null` if there are no changes. Useful for determining what\n     * parts of a view need to be updated.\n     */\n    getChanges(diff) {\n        if (diff == null) {\n            return this.hasChanged() ? ObjectExt.cloneDeep(this.changed) : null;\n        }\n        const old = this.changing ? this.previous : this.data;\n        const changed = {};\n        let hasChanged;\n        // eslint-disable-next-line\n        for (const key in diff) {\n            const val = diff[key];\n            if (!ObjectExt.isEqual(old[key], val)) {\n                changed[key] = val;\n                hasChanged = true;\n            }\n        }\n        return hasChanged ? ObjectExt.cloneDeep(changed) : null;\n    }\n    /**\n     * Returns a copy of the store's `data` object.\n     */\n    toJSON() {\n        return ObjectExt.cloneDeep(this.data);\n    }\n    clone() {\n        const constructor = this.constructor;\n        return new constructor(this.data);\n    }\n    dispose() {\n        this.off();\n        this.data = {};\n        this.previous = {};\n        this.changed = {};\n        this.pending = false;\n        this.changing = false;\n        this.pendingOptions = null;\n        this.trigger('disposed', { store: this });\n    }\n}\n__decorate([\n    Basecoat.dispose()\n], Store.prototype, \"dispose\", null);\n//# sourceMappingURL=store.js.map","import { ObjectExt, Timing, Interp } from '@antv/x6-common';\nexport class Animation {\n    constructor(cell) {\n        this.cell = cell;\n        this.ids = {};\n        this.cache = {};\n    }\n    get() {\n        return Object.keys(this.ids);\n    }\n    start(path, targetValue, options = {}, delim = '/') {\n        const startValue = this.cell.getPropByPath(path);\n        const localOptions = ObjectExt.defaults(options, Animation.defaultOptions);\n        const timing = this.getTiming(localOptions.timing);\n        const interpolate = this.getInterp(localOptions.interp, startValue, targetValue);\n        let startTime = 0;\n        const key = Array.isArray(path) ? path.join(delim) : path;\n        const paths = Array.isArray(path) ? path : path.split(delim);\n        const iterate = () => {\n            const now = new Date().getTime();\n            if (startTime === 0) {\n                startTime = now;\n            }\n            const elaspe = now - startTime;\n            let progress = elaspe / localOptions.duration;\n            if (progress < 1) {\n                this.ids[key] = requestAnimationFrame(iterate);\n            }\n            else {\n                progress = 1;\n            }\n            const currentValue = interpolate(timing(progress));\n            this.cell.setPropByPath(paths, currentValue);\n            if (options.progress) {\n                options.progress(Object.assign({ progress, currentValue }, this.getArgs(key)));\n            }\n            if (progress === 1) {\n                this.cell.notify('transition:complete', this.getArgs(key));\n                options.complete && options.complete(this.getArgs(key));\n                this.cell.notify('transition:finish', this.getArgs(key));\n                options.finish && options.finish(this.getArgs(key));\n                this.clean(key);\n            }\n        };\n        setTimeout(() => {\n            this.stop(path, undefined, delim);\n            this.cache[key] = { startValue, targetValue, options: localOptions };\n            this.ids[key] = requestAnimationFrame(iterate);\n            this.cell.notify('transition:start', this.getArgs(key));\n            options.start && options.start(this.getArgs(key));\n        }, options.delay);\n        return this.stop.bind(this, path, delim, options);\n    }\n    stop(path, options = {}, delim = '/') {\n        const paths = Array.isArray(path) ? path : path.split(delim);\n        Object.keys(this.ids)\n            .filter((key) => ObjectExt.isEqual(paths, key.split(delim).slice(0, paths.length)))\n            .forEach((key) => {\n            cancelAnimationFrame(this.ids[key]);\n            const data = this.cache[key];\n            const commonArgs = this.getArgs(key);\n            const localOptions = Object.assign(Object.assign({}, data.options), options);\n            const jumpedToEnd = localOptions.jumpedToEnd;\n            if (jumpedToEnd && data.targetValue != null) {\n                this.cell.setPropByPath(key, data.targetValue);\n                this.cell.notify('transition:end', Object.assign({}, commonArgs));\n                this.cell.notify('transition:complete', Object.assign({}, commonArgs));\n                localOptions.complete && localOptions.complete(Object.assign({}, commonArgs));\n            }\n            const stopArgs = Object.assign({ jumpedToEnd }, commonArgs);\n            this.cell.notify('transition:stop', Object.assign({}, stopArgs));\n            localOptions.stop && localOptions.stop(Object.assign({}, stopArgs));\n            this.cell.notify('transition:finish', Object.assign({}, commonArgs));\n            localOptions.finish && localOptions.finish(Object.assign({}, commonArgs));\n            this.clean(key);\n        });\n        return this;\n    }\n    clean(key) {\n        delete this.ids[key];\n        delete this.cache[key];\n    }\n    getTiming(timing) {\n        return typeof timing === 'string' ? Timing[timing] : timing;\n    }\n    getInterp(interp, startValue, targetValue) {\n        if (interp) {\n            return interp(startValue, targetValue);\n        }\n        if (typeof targetValue === 'number') {\n            return Interp.number(startValue, targetValue);\n        }\n        if (typeof targetValue === 'string') {\n            if (targetValue[0] === '#') {\n                return Interp.color(startValue, targetValue);\n            }\n            return Interp.unit(startValue, targetValue);\n        }\n        return Interp.object(startValue, targetValue);\n    }\n    getArgs(key) {\n        const data = this.cache[key];\n        return {\n            path: key,\n            startValue: data.startValue,\n            targetValue: data.targetValue,\n            cell: this.cell,\n        };\n    }\n}\n(function (Animation) {\n    Animation.defaultOptions = {\n        delay: 10,\n        duration: 100,\n        timing: 'linear',\n    };\n})(Animation || (Animation = {}));\n//# sourceMappingURL=animation.js.map","/* eslint-disable no-underscore-dangle */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { ArrayExt, StringExt, ObjectExt, FunctionExt, Basecoat, } from '@antv/x6-common';\nimport { Rectangle, Point } from '@antv/x6-geometry';\nimport { Attr } from '../registry';\nimport { Store } from './store';\nimport { Animation } from './animation';\nexport class Cell extends Basecoat {\n    static config(presets) {\n        const { markup, propHooks, attrHooks } = presets, others = __rest(presets, [\"markup\", \"propHooks\", \"attrHooks\"]);\n        if (markup != null) {\n            this.markup = markup;\n        }\n        if (propHooks) {\n            this.propHooks = this.propHooks.slice();\n            if (Array.isArray(propHooks)) {\n                this.propHooks.push(...propHooks);\n            }\n            else if (typeof propHooks === 'function') {\n                this.propHooks.push(propHooks);\n            }\n            else {\n                Object.values(propHooks).forEach((hook) => {\n                    if (typeof hook === 'function') {\n                        this.propHooks.push(hook);\n                    }\n                });\n            }\n        }\n        if (attrHooks) {\n            this.attrHooks = Object.assign(Object.assign({}, this.attrHooks), attrHooks);\n        }\n        this.defaults = ObjectExt.merge({}, this.defaults, others);\n    }\n    static getMarkup() {\n        return this.markup;\n    }\n    static getDefaults(raw) {\n        return (raw ? this.defaults : ObjectExt.cloneDeep(this.defaults));\n    }\n    static getAttrHooks() {\n        return this.attrHooks;\n    }\n    static applyPropHooks(cell, metadata) {\n        return this.propHooks.reduce((memo, hook) => {\n            return hook ? FunctionExt.call(hook, cell, memo) : memo;\n        }, metadata);\n    }\n    // #endregion\n    get [Symbol.toStringTag]() {\n        return Cell.toStringTag;\n    }\n    constructor(metadata = {}) {\n        super();\n        const ctor = this.constructor;\n        const defaults = ctor.getDefaults(true);\n        const props = ObjectExt.merge({}, this.preprocess(defaults), this.preprocess(metadata));\n        this.id = props.id || StringExt.uuid();\n        this.store = new Store(props);\n        this.animation = new Animation(this);\n        this.setup();\n        this.init();\n        this.postprocess(metadata);\n    }\n    init() { }\n    // #region model\n    get model() {\n        return this._model;\n    }\n    set model(model) {\n        if (this._model !== model) {\n            this._model = model;\n        }\n    }\n    // #endregion\n    preprocess(metadata, ignoreIdCheck) {\n        const id = metadata.id;\n        const ctor = this.constructor;\n        const props = ctor.applyPropHooks(this, metadata);\n        if (id == null && ignoreIdCheck !== true) {\n            props.id = StringExt.uuid();\n        }\n        return props;\n    }\n    postprocess(metadata) { } // eslint-disable-line\n    setup() {\n        this.store.on('change:*', (metadata) => {\n            const { key, current, previous, options } = metadata;\n            this.notify('change:*', {\n                key,\n                options,\n                current,\n                previous,\n                cell: this,\n            });\n            this.notify(`change:${key}`, {\n                options,\n                current,\n                previous,\n                cell: this,\n            });\n            const type = key;\n            if (type === 'source' || type === 'target') {\n                this.notify(`change:terminal`, {\n                    type,\n                    current,\n                    previous,\n                    options,\n                    cell: this,\n                });\n            }\n        });\n        this.store.on('changed', ({ options }) => this.notify('changed', { options, cell: this }));\n    }\n    notify(name, args) {\n        this.trigger(name, args);\n        const model = this.model;\n        if (model) {\n            model.notify(`cell:${name}`, args);\n            if (this.isNode()) {\n                model.notify(`node:${name}`, Object.assign(Object.assign({}, args), { node: this }));\n            }\n            else if (this.isEdge()) {\n                model.notify(`edge:${name}`, Object.assign(Object.assign({}, args), { edge: this }));\n            }\n        }\n        return this;\n    }\n    isNode() {\n        return false;\n    }\n    isEdge() {\n        return false;\n    }\n    isSameStore(cell) {\n        return this.store === cell.store;\n    }\n    get view() {\n        return this.store.get('view');\n    }\n    get shape() {\n        return this.store.get('shape', '');\n    }\n    getProp(key, defaultValue) {\n        if (key == null) {\n            return this.store.get();\n        }\n        return this.store.get(key, defaultValue);\n    }\n    setProp(key, value, options) {\n        if (typeof key === 'string') {\n            this.store.set(key, value, options);\n        }\n        else {\n            const props = this.preprocess(key, true);\n            this.store.set(ObjectExt.merge({}, this.getProp(), props), value);\n            this.postprocess(key);\n        }\n        return this;\n    }\n    removeProp(key, options) {\n        if (typeof key === 'string' || Array.isArray(key)) {\n            this.store.removeByPath(key, options);\n        }\n        else {\n            this.store.remove(options);\n        }\n        return this;\n    }\n    hasChanged(key) {\n        return key == null ? this.store.hasChanged() : this.store.hasChanged(key);\n    }\n    getPropByPath(path) {\n        return this.store.getByPath(path);\n    }\n    setPropByPath(path, value, options = {}) {\n        if (this.model) {\n            // update inner reference\n            if (path === 'children') {\n                this._children = value\n                    ? value\n                        .map((id) => this.model.getCell(id))\n                        .filter((child) => child != null)\n                    : null;\n            }\n            else if (path === 'parent') {\n                this._parent = value ? this.model.getCell(value) : null;\n            }\n        }\n        this.store.setByPath(path, value, options);\n        return this;\n    }\n    removePropByPath(path, options = {}) {\n        const paths = Array.isArray(path) ? path : path.split('/');\n        // Once a property is removed from the `attrs` the CellView will\n        // recognize a `dirty` flag and re-render itself in order to remove\n        // the attribute from SVGElement.\n        if (paths[0] === 'attrs') {\n            options.dirty = true;\n        }\n        this.store.removeByPath(paths, options);\n        return this;\n    }\n    prop(key, value, options) {\n        if (key == null) {\n            return this.getProp();\n        }\n        if (typeof key === 'string' || Array.isArray(key)) {\n            if (arguments.length === 1) {\n                return this.getPropByPath(key);\n            }\n            if (value == null) {\n                return this.removePropByPath(key, options || {});\n            }\n            return this.setPropByPath(key, value, options || {});\n        }\n        return this.setProp(key, value || {});\n    }\n    previous(name) {\n        return this.store.getPrevious(name);\n    }\n    // #endregion\n    // #region zIndex\n    get zIndex() {\n        return this.getZIndex();\n    }\n    set zIndex(z) {\n        if (z == null) {\n            this.removeZIndex();\n        }\n        else {\n            this.setZIndex(z);\n        }\n    }\n    getZIndex() {\n        return this.store.get('zIndex');\n    }\n    setZIndex(z, options = {}) {\n        this.store.set('zIndex', z, options);\n        return this;\n    }\n    removeZIndex(options = {}) {\n        this.store.remove('zIndex', options);\n        return this;\n    }\n    toFront(options = {}) {\n        const model = this.model;\n        if (model) {\n            let z = model.getMaxZIndex();\n            let cells;\n            if (options.deep) {\n                cells = this.getDescendants({ deep: true, breadthFirst: true });\n                cells.unshift(this);\n            }\n            else {\n                cells = [this];\n            }\n            z = z - cells.length + 1;\n            const count = model.total();\n            let changed = model.indexOf(this) !== count - cells.length;\n            if (!changed) {\n                changed = cells.some((cell, index) => cell.getZIndex() !== z + index);\n            }\n            if (changed) {\n                this.batchUpdate('to-front', () => {\n                    z += cells.length;\n                    cells.forEach((cell, index) => {\n                        cell.setZIndex(z + index, options);\n                    });\n                });\n            }\n        }\n        return this;\n    }\n    toBack(options = {}) {\n        const model = this.model;\n        if (model) {\n            let z = model.getMinZIndex();\n            let cells;\n            if (options.deep) {\n                cells = this.getDescendants({ deep: true, breadthFirst: true });\n                cells.unshift(this);\n            }\n            else {\n                cells = [this];\n            }\n            let changed = model.indexOf(this) !== 0;\n            if (!changed) {\n                changed = cells.some((cell, index) => cell.getZIndex() !== z + index);\n            }\n            if (changed) {\n                this.batchUpdate('to-back', () => {\n                    z -= cells.length;\n                    cells.forEach((cell, index) => {\n                        cell.setZIndex(z + index, options);\n                    });\n                });\n            }\n        }\n        return this;\n    }\n    // #endregion\n    // #region markup\n    get markup() {\n        return this.getMarkup();\n    }\n    set markup(value) {\n        if (value == null) {\n            this.removeMarkup();\n        }\n        else {\n            this.setMarkup(value);\n        }\n    }\n    getMarkup() {\n        let markup = this.store.get('markup');\n        if (markup == null) {\n            const ctor = this.constructor;\n            markup = ctor.getMarkup();\n        }\n        return markup;\n    }\n    setMarkup(markup, options = {}) {\n        this.store.set('markup', markup, options);\n        return this;\n    }\n    removeMarkup(options = {}) {\n        this.store.remove('markup', options);\n        return this;\n    }\n    // #endregion\n    // #region attrs\n    get attrs() {\n        return this.getAttrs();\n    }\n    set attrs(value) {\n        if (value == null) {\n            this.removeAttrs();\n        }\n        else {\n            this.setAttrs(value);\n        }\n    }\n    getAttrs() {\n        const result = this.store.get('attrs');\n        return result ? Object.assign({}, result) : {};\n    }\n    setAttrs(attrs, options = {}) {\n        if (attrs == null) {\n            this.removeAttrs(options);\n        }\n        else {\n            const set = (attrs) => this.store.set('attrs', attrs, options);\n            if (options.overwrite === true) {\n                set(attrs);\n            }\n            else {\n                const prev = this.getAttrs();\n                if (options.deep === false) {\n                    set(Object.assign(Object.assign({}, prev), attrs));\n                }\n                else {\n                    set(ObjectExt.merge({}, prev, attrs));\n                }\n            }\n        }\n        return this;\n    }\n    replaceAttrs(attrs, options = {}) {\n        return this.setAttrs(attrs, Object.assign(Object.assign({}, options), { overwrite: true }));\n    }\n    updateAttrs(attrs, options = {}) {\n        return this.setAttrs(attrs, Object.assign(Object.assign({}, options), { deep: false }));\n    }\n    removeAttrs(options = {}) {\n        this.store.remove('attrs', options);\n        return this;\n    }\n    getAttrDefinition(attrName) {\n        if (!attrName) {\n            return null;\n        }\n        const ctor = this.constructor;\n        const hooks = ctor.getAttrHooks() || {};\n        let definition = hooks[attrName] || Attr.registry.get(attrName);\n        if (!definition) {\n            const name = StringExt.camelCase(attrName);\n            definition = hooks[name] || Attr.registry.get(name);\n        }\n        return definition || null;\n    }\n    getAttrByPath(path) {\n        if (path == null || path === '') {\n            return this.getAttrs();\n        }\n        return this.getPropByPath(this.prefixAttrPath(path));\n    }\n    setAttrByPath(path, value, options = {}) {\n        this.setPropByPath(this.prefixAttrPath(path), value, options);\n        return this;\n    }\n    removeAttrByPath(path, options = {}) {\n        this.removePropByPath(this.prefixAttrPath(path), options);\n        return this;\n    }\n    prefixAttrPath(path) {\n        return Array.isArray(path) ? ['attrs'].concat(path) : `attrs/${path}`;\n    }\n    attr(path, value, options) {\n        if (path == null) {\n            return this.getAttrByPath();\n        }\n        if (typeof path === 'string' || Array.isArray(path)) {\n            if (arguments.length === 1) {\n                return this.getAttrByPath(path);\n            }\n            if (value == null) {\n                return this.removeAttrByPath(path, options || {});\n            }\n            return this.setAttrByPath(path, value, options || {});\n        }\n        return this.setAttrs(path, (value || {}));\n    }\n    // #endregion\n    // #region visible\n    get visible() {\n        return this.isVisible();\n    }\n    set visible(value) {\n        this.setVisible(value);\n    }\n    setVisible(visible, options = {}) {\n        this.store.set('visible', visible, options);\n        return this;\n    }\n    isVisible() {\n        return this.store.get('visible') !== false;\n    }\n    show(options = {}) {\n        if (!this.isVisible()) {\n            this.setVisible(true, options);\n        }\n        return this;\n    }\n    hide(options = {}) {\n        if (this.isVisible()) {\n            this.setVisible(false, options);\n        }\n        return this;\n    }\n    toggleVisible(isVisible, options = {}) {\n        const visible = typeof isVisible === 'boolean' ? isVisible : !this.isVisible();\n        const localOptions = typeof isVisible === 'boolean' ? options : isVisible;\n        if (visible) {\n            this.show(localOptions);\n        }\n        else {\n            this.hide(localOptions);\n        }\n        return this;\n    }\n    // #endregion\n    // #region data\n    get data() {\n        return this.getData();\n    }\n    set data(val) {\n        this.setData(val);\n    }\n    getData() {\n        return this.store.get('data');\n    }\n    setData(data, options = {}) {\n        if (data == null) {\n            this.removeData(options);\n        }\n        else {\n            const set = (data) => this.store.set('data', data, options);\n            if (options.overwrite === true) {\n                set(data);\n            }\n            else {\n                const prev = this.getData();\n                if (options.deep === false) {\n                    set(typeof data === 'object' ? Object.assign(Object.assign({}, prev), data) : data);\n                }\n                else {\n                    set(ObjectExt.merge({}, prev, data));\n                }\n            }\n        }\n        return this;\n    }\n    replaceData(data, options = {}) {\n        return this.setData(data, Object.assign(Object.assign({}, options), { overwrite: true }));\n    }\n    updateData(data, options = {}) {\n        return this.setData(data, Object.assign(Object.assign({}, options), { deep: false }));\n    }\n    removeData(options = {}) {\n        this.store.remove('data', options);\n        return this;\n    }\n    // #endregion\n    // #region parent children\n    get parent() {\n        return this.getParent();\n    }\n    get children() {\n        return this.getChildren();\n    }\n    getParentId() {\n        return this.store.get('parent');\n    }\n    getParent() {\n        const parentId = this.getParentId();\n        if (parentId && this.model) {\n            const parent = this.model.getCell(parentId);\n            this._parent = parent;\n            return parent;\n        }\n        return null;\n    }\n    getChildren() {\n        const childrenIds = this.store.get('children');\n        if (childrenIds && childrenIds.length && this.model) {\n            const children = childrenIds\n                .map((id) => { var _a; return (_a = this.model) === null || _a === void 0 ? void 0 : _a.getCell(id); })\n                .filter((cell) => cell != null);\n            this._children = children;\n            return [...children];\n        }\n        return null;\n    }\n    hasParent() {\n        return this.parent != null;\n    }\n    isParentOf(child) {\n        return child != null && child.getParent() === this;\n    }\n    isChildOf(parent) {\n        return parent != null && this.getParent() === parent;\n    }\n    eachChild(iterator, context) {\n        if (this.children) {\n            this.children.forEach(iterator, context);\n        }\n        return this;\n    }\n    filterChild(filter, context) {\n        return this.children ? this.children.filter(filter, context) : [];\n    }\n    getChildCount() {\n        return this.children == null ? 0 : this.children.length;\n    }\n    getChildIndex(child) {\n        return this.children == null ? -1 : this.children.indexOf(child);\n    }\n    getChildAt(index) {\n        return this.children != null && index >= 0 ? this.children[index] : null;\n    }\n    getAncestors(options = {}) {\n        const ancestors = [];\n        let parent = this.getParent();\n        while (parent) {\n            ancestors.push(parent);\n            parent = options.deep !== false ? parent.getParent() : null;\n        }\n        return ancestors;\n    }\n    getDescendants(options = {}) {\n        if (options.deep !== false) {\n            // breadth first\n            if (options.breadthFirst) {\n                const cells = [];\n                const queue = this.getChildren() || [];\n                while (queue.length > 0) {\n                    const parent = queue.shift();\n                    const children = parent.getChildren();\n                    cells.push(parent);\n                    if (children) {\n                        queue.push(...children);\n                    }\n                }\n                return cells;\n            }\n            // depth first\n            {\n                const cells = this.getChildren() || [];\n                cells.forEach((cell) => {\n                    cells.push(...cell.getDescendants(options));\n                });\n                return cells;\n            }\n        }\n        return this.getChildren() || [];\n    }\n    isDescendantOf(ancestor, options = {}) {\n        if (ancestor == null) {\n            return false;\n        }\n        if (options.deep !== false) {\n            let current = this.getParent();\n            while (current) {\n                if (current === ancestor) {\n                    return true;\n                }\n                current = current.getParent();\n            }\n            return false;\n        }\n        return this.isChildOf(ancestor);\n    }\n    isAncestorOf(descendant, options = {}) {\n        if (descendant == null) {\n            return false;\n        }\n        return descendant.isDescendantOf(this, options);\n    }\n    contains(cell) {\n        return this.isAncestorOf(cell);\n    }\n    getCommonAncestor(...cells) {\n        return Cell.getCommonAncestor(this, ...cells);\n    }\n    setParent(parent, options = {}) {\n        this._parent = parent;\n        if (parent) {\n            this.store.set('parent', parent.id, options);\n        }\n        else {\n            this.store.remove('parent', options);\n        }\n        return this;\n    }\n    setChildren(children, options = {}) {\n        this._children = children;\n        if (children != null) {\n            this.store.set('children', children.map((child) => child.id), options);\n        }\n        else {\n            this.store.remove('children', options);\n        }\n        return this;\n    }\n    unembed(child, options = {}) {\n        const children = this.children;\n        if (children != null && child != null) {\n            const index = this.getChildIndex(child);\n            if (index !== -1) {\n                children.splice(index, 1);\n                child.setParent(null, options);\n                this.setChildren(children, options);\n            }\n        }\n        return this;\n    }\n    embed(child, options = {}) {\n        child.addTo(this, options);\n        return this;\n    }\n    addTo(target, options = {}) {\n        if (Cell.isCell(target)) {\n            target.addChild(this, options);\n        }\n        else {\n            target.addCell(this, options);\n        }\n        return this;\n    }\n    insertTo(parent, index, options = {}) {\n        parent.insertChild(this, index, options);\n        return this;\n    }\n    addChild(child, options = {}) {\n        return this.insertChild(child, undefined, options);\n    }\n    insertChild(child, index, options = {}) {\n        if (child != null && child !== this) {\n            const oldParent = child.getParent();\n            const changed = this !== oldParent;\n            let pos = index;\n            if (pos == null) {\n                pos = this.getChildCount();\n                if (!changed) {\n                    pos -= 1;\n                }\n            }\n            // remove from old parent\n            if (oldParent) {\n                const children = oldParent.getChildren();\n                if (children) {\n                    const index = children.indexOf(child);\n                    if (index >= 0) {\n                        child.setParent(null, options);\n                        children.splice(index, 1);\n                        oldParent.setChildren(children, options);\n                    }\n                }\n            }\n            let children = this.children;\n            if (children == null) {\n                children = [];\n                children.push(child);\n            }\n            else {\n                children.splice(pos, 0, child);\n            }\n            child.setParent(this, options);\n            this.setChildren(children, options);\n            if (changed && this.model) {\n                const incomings = this.model.getIncomingEdges(this);\n                const outgoings = this.model.getOutgoingEdges(this);\n                if (incomings) {\n                    incomings.forEach((edge) => edge.updateParent(options));\n                }\n                if (outgoings) {\n                    outgoings.forEach((edge) => edge.updateParent(options));\n                }\n            }\n            if (this.model) {\n                this.model.addCell(child, options);\n            }\n        }\n        return this;\n    }\n    removeFromParent(options = {}) {\n        const parent = this.getParent();\n        if (parent != null) {\n            const index = parent.getChildIndex(this);\n            parent.removeChildAt(index, options);\n        }\n        return this;\n    }\n    removeChild(child, options = {}) {\n        const index = this.getChildIndex(child);\n        return this.removeChildAt(index, options);\n    }\n    removeChildAt(index, options = {}) {\n        const child = this.getChildAt(index);\n        const children = this.children;\n        if (children != null && child != null) {\n            this.unembed(child, options);\n            child.remove(options);\n        }\n        return child;\n    }\n    remove(options = {}) {\n        this.batchUpdate('remove', () => {\n            const parent = this.getParent();\n            if (parent) {\n                parent.removeChild(this, options);\n            }\n            if (options.deep !== false) {\n                this.eachChild((child) => child.remove(options));\n            }\n            if (this.model) {\n                this.model.removeCell(this, options);\n            }\n        });\n        return this;\n    }\n    transition(path, target, options = {}, delim = '/') {\n        return this.animation.start(path, target, options, delim);\n    }\n    stopTransition(path, options, delim = '/') {\n        this.animation.stop(path, options, delim);\n        return this;\n    }\n    getTransitions() {\n        return this.animation.get();\n    }\n    // #endregion\n    // #region transform\n    // eslint-disable-next-line\n    translate(tx, ty, options) {\n        return this;\n    }\n    scale(sx, // eslint-disable-line\n    sy, // eslint-disable-line\n    origin, // eslint-disable-line\n    options) {\n        return this;\n    }\n    addTools(items, obj, options) {\n        const toolItems = Array.isArray(items) ? items : [items];\n        const name = typeof obj === 'string' ? obj : null;\n        const config = typeof obj === 'object' ? obj : typeof options === 'object' ? options : {};\n        if (config.reset) {\n            return this.setTools({ name, items: toolItems, local: config.local }, config);\n        }\n        let tools = ObjectExt.cloneDeep(this.getTools());\n        if (tools == null || name == null || tools.name === name) {\n            if (tools == null) {\n                tools = {};\n            }\n            if (!tools.items) {\n                tools.items = [];\n            }\n            tools.name = name;\n            tools.items = [...tools.items, ...toolItems];\n            return this.setTools(Object.assign({}, tools), config);\n        }\n    }\n    setTools(tools, options = {}) {\n        if (tools == null) {\n            this.removeTools();\n        }\n        else {\n            this.store.set('tools', Cell.normalizeTools(tools), options);\n        }\n        return this;\n    }\n    getTools() {\n        return this.store.get('tools');\n    }\n    removeTools(options = {}) {\n        this.store.remove('tools', options);\n        return this;\n    }\n    hasTools(name) {\n        const tools = this.getTools();\n        if (tools == null) {\n            return false;\n        }\n        if (name == null) {\n            return true;\n        }\n        return tools.name === name;\n    }\n    hasTool(name) {\n        const tools = this.getTools();\n        if (tools == null) {\n            return false;\n        }\n        return tools.items.some((item) => typeof item === 'string' ? item === name : item.name === name);\n    }\n    removeTool(nameOrIndex, options = {}) {\n        const tools = ObjectExt.cloneDeep(this.getTools());\n        if (tools) {\n            let updated = false;\n            const items = tools.items.slice();\n            const remove = (index) => {\n                items.splice(index, 1);\n                updated = true;\n            };\n            if (typeof nameOrIndex === 'number') {\n                remove(nameOrIndex);\n            }\n            else {\n                for (let i = items.length - 1; i >= 0; i -= 1) {\n                    const item = items[i];\n                    const exist = typeof item === 'string'\n                        ? item === nameOrIndex\n                        : item.name === nameOrIndex;\n                    if (exist) {\n                        remove(i);\n                    }\n                }\n            }\n            if (updated) {\n                tools.items = items;\n                this.setTools(tools, options);\n            }\n        }\n        return this;\n    }\n    // #endregion\n    // #region common\n    // eslint-disable-next-line\n    getBBox(options) {\n        return new Rectangle();\n    }\n    // eslint-disable-next-line\n    getConnectionPoint(edge, type) {\n        return new Point();\n    }\n    toJSON(options = {}) {\n        const props = Object.assign({}, this.store.get());\n        const toString = Object.prototype.toString;\n        const cellType = this.isNode() ? 'node' : this.isEdge() ? 'edge' : 'cell';\n        if (!props.shape) {\n            const ctor = this.constructor;\n            throw new Error(`Unable to serialize ${cellType} missing \"shape\" prop, check the ${cellType} \"${ctor.name || toString.call(ctor)}\"`);\n        }\n        const ctor = this.constructor;\n        const diff = options.diff === true;\n        const attrs = props.attrs || {};\n        const presets = ctor.getDefaults(true);\n        // When `options.diff` is `true`, we should process the custom options,\n        // such as `width`, `height` etc. to ensure the comparing work correctly.\n        const defaults = diff ? this.preprocess(presets, true) : presets;\n        const defaultAttrs = defaults.attrs || {};\n        const finalAttrs = {};\n        Object.entries(props).forEach(([key, val]) => {\n            if (val != null &&\n                !Array.isArray(val) &&\n                typeof val === 'object' &&\n                !ObjectExt.isPlainObject(val)) {\n                throw new Error(`Can only serialize ${cellType} with plain-object props, but got a \"${toString.call(val)}\" type of key \"${key}\" on ${cellType} \"${this.id}\"`);\n            }\n            if (key !== 'attrs' && key !== 'shape' && diff) {\n                const preset = defaults[key];\n                if (ObjectExt.isEqual(val, preset)) {\n                    delete props[key];\n                }\n            }\n        });\n        Object.keys(attrs).forEach((key) => {\n            const attr = attrs[key];\n            const defaultAttr = defaultAttrs[key];\n            Object.keys(attr).forEach((name) => {\n                const value = attr[name];\n                const defaultValue = defaultAttr ? defaultAttr[name] : null;\n                if (value != null &&\n                    typeof value === 'object' &&\n                    !Array.isArray(value)) {\n                    Object.keys(value).forEach((subName) => {\n                        const subValue = value[subName];\n                        if (defaultAttr == null ||\n                            defaultValue == null ||\n                            !ObjectExt.isObject(defaultValue) ||\n                            !ObjectExt.isEqual(defaultValue[subName], subValue)) {\n                            if (finalAttrs[key] == null) {\n                                finalAttrs[key] = {};\n                            }\n                            if (finalAttrs[key][name] == null) {\n                                finalAttrs[key][name] = {};\n                            }\n                            const tmp = finalAttrs[key][name];\n                            tmp[subName] = subValue;\n                        }\n                    });\n                }\n                else if (defaultAttr == null ||\n                    !ObjectExt.isEqual(defaultValue, value)) {\n                    // `value` is not an object, default attribute with `key` does not\n                    // exist or it is different than the attribute value set on the cell.\n                    if (finalAttrs[key] == null) {\n                        finalAttrs[key] = {};\n                    }\n                    finalAttrs[key][name] = value;\n                }\n            });\n        });\n        const finalProps = Object.assign(Object.assign({}, props), { attrs: ObjectExt.isEmpty(finalAttrs) ? undefined : finalAttrs });\n        if (finalProps.attrs == null) {\n            delete finalProps.attrs;\n        }\n        const ret = finalProps;\n        if (ret.angle === 0) {\n            delete ret.angle;\n        }\n        return ObjectExt.cloneDeep(ret);\n    }\n    clone(options = {}) {\n        if (!options.deep) {\n            const data = Object.assign({}, this.store.get());\n            if (!options.keepId) {\n                delete data.id;\n            }\n            delete data.parent;\n            delete data.children;\n            const ctor = this.constructor;\n            return new ctor(data); // eslint-disable-line new-cap\n        }\n        // Deep cloning. Clone the cell itself and all its children.\n        const map = Cell.deepClone(this);\n        return map[this.id];\n    }\n    findView(graph) {\n        return graph.findViewByCell(this);\n    }\n    // #endregion\n    // #region batch\n    startBatch(name, data = {}, model = this.model) {\n        this.notify('batch:start', { name, data, cell: this });\n        if (model) {\n            model.startBatch(name, Object.assign(Object.assign({}, data), { cell: this }));\n        }\n        return this;\n    }\n    stopBatch(name, data = {}, model = this.model) {\n        if (model) {\n            model.stopBatch(name, Object.assign(Object.assign({}, data), { cell: this }));\n        }\n        this.notify('batch:stop', { name, data, cell: this });\n        return this;\n    }\n    batchUpdate(name, execute, data) {\n        // The model is null after cell was removed(remove batch).\n        // So we should temp save model to trigger pairing batch event.\n        const model = this.model;\n        this.startBatch(name, data, model);\n        const result = execute();\n        this.stopBatch(name, data, model);\n        return result;\n    }\n    // #endregion\n    // #region IDisposable\n    dispose() {\n        this.removeFromParent();\n        this.store.dispose();\n    }\n}\nCell.defaults = {};\nCell.attrHooks = {};\nCell.propHooks = [];\n__decorate([\n    Basecoat.dispose()\n], Cell.prototype, \"dispose\", null);\n(function (Cell) {\n    function normalizeTools(raw) {\n        if (typeof raw === 'string') {\n            return { items: [raw] };\n        }\n        if (Array.isArray(raw)) {\n            return { items: raw };\n        }\n        if (raw.items) {\n            return raw;\n        }\n        return {\n            items: [raw],\n        };\n    }\n    Cell.normalizeTools = normalizeTools;\n})(Cell || (Cell = {}));\n(function (Cell) {\n    Cell.toStringTag = `X6.${Cell.name}`;\n    function isCell(instance) {\n        if (instance == null) {\n            return false;\n        }\n        if (instance instanceof Cell) {\n            return true;\n        }\n        const tag = instance[Symbol.toStringTag];\n        const cell = instance;\n        if ((tag == null || tag === Cell.toStringTag) &&\n            typeof cell.isNode === 'function' &&\n            typeof cell.isEdge === 'function' &&\n            typeof cell.prop === 'function' &&\n            typeof cell.attr === 'function') {\n            return true;\n        }\n        return false;\n    }\n    Cell.isCell = isCell;\n})(Cell || (Cell = {}));\n(function (Cell) {\n    function getCommonAncestor(...cells) {\n        const ancestors = cells\n            .filter((cell) => cell != null)\n            .map((cell) => cell.getAncestors())\n            .sort((a, b) => {\n            return a.length - b.length;\n        });\n        const first = ancestors.shift();\n        return (first.find((cell) => ancestors.every((item) => item.includes(cell))) ||\n            null);\n    }\n    Cell.getCommonAncestor = getCommonAncestor;\n    function getCellsBBox(cells, options = {}) {\n        let bbox = null;\n        for (let i = 0, ii = cells.length; i < ii; i += 1) {\n            const cell = cells[i];\n            let rect = cell.getBBox(options);\n            if (rect) {\n                if (cell.isNode()) {\n                    const angle = cell.getAngle();\n                    if (angle != null && angle !== 0) {\n                        rect = rect.bbox(angle);\n                    }\n                }\n                bbox = bbox == null ? rect : bbox.union(rect);\n            }\n        }\n        return bbox;\n    }\n    Cell.getCellsBBox = getCellsBBox;\n    function deepClone(cell) {\n        const cells = [cell, ...cell.getDescendants({ deep: true })];\n        return Cell.cloneCells(cells);\n    }\n    Cell.deepClone = deepClone;\n    function cloneCells(cells) {\n        const inputs = ArrayExt.uniq(cells);\n        const cloneMap = inputs.reduce((map, cell) => {\n            map[cell.id] = cell.clone();\n            return map;\n        }, {});\n        inputs.forEach((cell) => {\n            const clone = cloneMap[cell.id];\n            if (clone.isEdge()) {\n                const sourceId = clone.getSourceCellId();\n                const targetId = clone.getTargetCellId();\n                if (sourceId && cloneMap[sourceId]) {\n                    // Source is a node and the node is among the clones.\n                    // Then update the source of the cloned edge.\n                    clone.setSource(Object.assign(Object.assign({}, clone.getSource()), { cell: cloneMap[sourceId].id }));\n                }\n                if (targetId && cloneMap[targetId]) {\n                    // Target is a node and the node is among the clones.\n                    // Then update the target of the cloned edge.\n                    clone.setTarget(Object.assign(Object.assign({}, clone.getTarget()), { cell: cloneMap[targetId].id }));\n                }\n            }\n            // Find the parent of the original cell\n            const parent = cell.getParent();\n            if (parent && cloneMap[parent.id]) {\n                clone.setParent(cloneMap[parent.id]);\n            }\n            // Find the children of the original cell\n            const children = cell.getChildren();\n            if (children && children.length) {\n                const embeds = children.reduce((memo, child) => {\n                    // Embedded cells that are not being cloned can not be carried\n                    // over with other embedded cells.\n                    if (cloneMap[child.id]) {\n                        memo.push(cloneMap[child.id]);\n                    }\n                    return memo;\n                }, []);\n                if (embeds.length > 0) {\n                    clone.setChildren(embeds);\n                }\n            }\n        });\n        return cloneMap;\n    }\n    Cell.cloneCells = cloneCells;\n})(Cell || (Cell = {}));\n(function (Cell) {\n    Cell.config({\n        propHooks(_a) {\n            var { tools } = _a, metadata = __rest(_a, [\"tools\"]);\n            if (tools) {\n                metadata.tools = Cell.normalizeTools(tools);\n            }\n            return metadata;\n        },\n    });\n})(Cell || (Cell = {}));\n//# sourceMappingURL=cell.js.map","export var ShareRegistry;\n(function (ShareRegistry) {\n    let edgeRegistry;\n    let nodeRegistry;\n    function exist(name, isNode) {\n        return isNode\n            ? edgeRegistry != null && edgeRegistry.exist(name)\n            : nodeRegistry != null && nodeRegistry.exist(name);\n    }\n    ShareRegistry.exist = exist;\n    function setEdgeRegistry(registry) {\n        edgeRegistry = registry;\n    }\n    ShareRegistry.setEdgeRegistry = setEdgeRegistry;\n    function setNodeRegistry(registry) {\n        nodeRegistry = registry;\n    }\n    ShareRegistry.setNodeRegistry = setNodeRegistry;\n})(ShareRegistry || (ShareRegistry = {}));\n//# sourceMappingURL=registry.js.map","import { ObjectExt } from '@antv/x6-common';\nimport { Point } from '@antv/x6-geometry';\nimport { PortLayout, PortLabelLayout } from '../registry';\nexport class PortManager {\n    constructor(data) {\n        this.ports = [];\n        this.groups = {};\n        this.init(ObjectExt.cloneDeep(data));\n    }\n    getPorts() {\n        return this.ports;\n    }\n    getGroup(groupName) {\n        return groupName != null ? this.groups[groupName] : null;\n    }\n    getPortsByGroup(groupName) {\n        return this.ports.filter((p) => p.group === groupName || (p.group == null && groupName == null));\n    }\n    getPortsLayoutByGroup(groupName, elemBBox) {\n        const ports = this.getPortsByGroup(groupName);\n        const group = groupName ? this.getGroup(groupName) : null;\n        const groupPosition = group ? group.position : null;\n        const groupPositionName = groupPosition ? groupPosition.name : null;\n        let layoutFn;\n        if (groupPositionName != null) {\n            const fn = PortLayout.registry.get(groupPositionName);\n            if (fn == null) {\n                return PortLayout.registry.onNotFound(groupPositionName);\n            }\n            layoutFn = fn;\n        }\n        else {\n            layoutFn = PortLayout.presets.left;\n        }\n        const portsArgs = ports.map((port) => (port && port.position && port.position.args) || {});\n        const groupArgs = (groupPosition && groupPosition.args) || {};\n        const layouts = layoutFn(portsArgs, elemBBox, groupArgs);\n        return layouts.map((portLayout, index) => {\n            const port = ports[index];\n            return {\n                portLayout,\n                portId: port.id,\n                portSize: port.size,\n                portAttrs: port.attrs,\n                labelSize: port.label.size,\n                labelLayout: this.getPortLabelLayout(port, Point.create(portLayout.position), elemBBox),\n            };\n        });\n    }\n    init(data) {\n        const { groups, items } = data;\n        if (groups != null) {\n            Object.keys(groups).forEach((key) => {\n                this.groups[key] = this.parseGroup(groups[key]);\n            });\n        }\n        if (Array.isArray(items)) {\n            items.forEach((item) => {\n                this.ports.push(this.parsePort(item));\n            });\n        }\n    }\n    parseGroup(group) {\n        return Object.assign(Object.assign({}, group), { label: this.getLabel(group, true), position: this.getPortPosition(group.position, true) });\n    }\n    parsePort(port) {\n        const result = Object.assign({}, port);\n        const group = this.getGroup(port.group) || {};\n        result.markup = result.markup || group.markup;\n        result.attrs = ObjectExt.merge({}, group.attrs, result.attrs);\n        result.position = this.createPosition(group, result);\n        result.label = ObjectExt.merge({}, group.label, this.getLabel(result));\n        result.zIndex = this.getZIndex(group, result);\n        result.size = Object.assign(Object.assign({}, group.size), result.size);\n        return result;\n    }\n    getZIndex(group, port) {\n        if (typeof port.zIndex === 'number') {\n            return port.zIndex;\n        }\n        if (typeof group.zIndex === 'number' || group.zIndex === 'auto') {\n            return group.zIndex;\n        }\n        return 'auto';\n    }\n    createPosition(group, port) {\n        return ObjectExt.merge({\n            name: 'left',\n            args: {},\n        }, group.position, { args: port.args });\n    }\n    getPortPosition(position, setDefault = false) {\n        if (position == null) {\n            if (setDefault) {\n                return { name: 'left', args: {} };\n            }\n        }\n        else {\n            if (typeof position === 'string') {\n                return {\n                    name: position,\n                    args: {},\n                };\n            }\n            if (Array.isArray(position)) {\n                return {\n                    name: 'absolute',\n                    args: { x: position[0], y: position[1] },\n                };\n            }\n            if (typeof position === 'object') {\n                return position;\n            }\n        }\n        return { args: {} };\n    }\n    getPortLabelPosition(position, setDefault = false) {\n        if (position == null) {\n            if (setDefault) {\n                return { name: 'left', args: {} };\n            }\n        }\n        else {\n            if (typeof position === 'string') {\n                return {\n                    name: position,\n                    args: {},\n                };\n            }\n            if (typeof position === 'object') {\n                return position;\n            }\n        }\n        return { args: {} };\n    }\n    getLabel(item, setDefaults = false) {\n        const label = item.label || {};\n        label.position = this.getPortLabelPosition(label.position, setDefaults);\n        return label;\n    }\n    getPortLabelLayout(port, portPosition, elemBBox) {\n        const name = port.label.position.name || 'left';\n        const args = port.label.position.args || {};\n        const layoutFn = PortLabelLayout.registry.get(name) || PortLabelLayout.presets.left;\n        if (layoutFn) {\n            return layoutFn(portPosition, elemBBox, args);\n        }\n        return null;\n    }\n}\n//# sourceMappingURL=port.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Point, Rectangle, Angle } from '@antv/x6-geometry';\nimport { StringExt, ObjectExt, NumberExt, Interp, } from '@antv/x6-common';\nimport { Registry } from '../registry/registry';\nimport { Markup } from '../view/markup';\nimport { Cell } from './cell';\nimport { ShareRegistry } from './registry';\nimport { PortManager } from './port';\nexport class Node extends Cell {\n    get [Symbol.toStringTag]() {\n        return Node.toStringTag;\n    }\n    constructor(metadata = {}) {\n        super(metadata);\n        this.initPorts();\n    }\n    preprocess(metadata, ignoreIdCheck) {\n        const { x, y, width, height } = metadata, others = __rest(metadata, [\"x\", \"y\", \"width\", \"height\"]);\n        if (x != null || y != null) {\n            const position = others.position;\n            others.position = Object.assign(Object.assign({}, position), { x: x != null ? x : position ? position.x : 0, y: y != null ? y : position ? position.y : 0 });\n        }\n        if (width != null || height != null) {\n            const size = others.size;\n            others.size = Object.assign(Object.assign({}, size), { width: width != null ? width : size ? size.width : 0, height: height != null ? height : size ? size.height : 0 });\n        }\n        return super.preprocess(others, ignoreIdCheck);\n    }\n    isNode() {\n        return true;\n    }\n    size(width, height, options) {\n        if (width === undefined) {\n            return this.getSize();\n        }\n        if (typeof width === 'number') {\n            return this.setSize(width, height, options);\n        }\n        return this.setSize(width, height);\n    }\n    getSize() {\n        const size = this.store.get('size');\n        return size ? Object.assign({}, size) : { width: 1, height: 1 };\n    }\n    setSize(width, height, options) {\n        if (typeof width === 'object') {\n            this.resize(width.width, width.height, height);\n        }\n        else {\n            this.resize(width, height, options);\n        }\n        return this;\n    }\n    resize(width, height, options = {}) {\n        this.startBatch('resize', options);\n        const direction = options.direction;\n        if (direction) {\n            const currentSize = this.getSize();\n            switch (direction) {\n                case 'left':\n                case 'right':\n                    // Don't change height when resizing horizontally.\n                    height = currentSize.height; // eslint-disable-line\n                    break;\n                case 'top':\n                case 'bottom':\n                    // Don't change width when resizing vertically.\n                    width = currentSize.width; // eslint-disable-line\n                    break;\n                default:\n                    break;\n            }\n            const map = {\n                right: 0,\n                'top-right': 0,\n                top: 1,\n                'top-left': 1,\n                left: 2,\n                'bottom-left': 2,\n                bottom: 3,\n                'bottom-right': 3,\n            };\n            let quadrant = map[direction];\n            const angle = Angle.normalize(this.getAngle() || 0);\n            if (options.absolute) {\n                // We are taking the node's rotation into account\n                quadrant += Math.floor((angle + 45) / 90);\n                quadrant %= 4;\n            }\n            // This is a rectangle in size of the un-rotated node.\n            const bbox = this.getBBox();\n            // Pick the corner point on the node, which meant to stay on its\n            // place before and after the rotation.\n            let fixedPoint;\n            if (quadrant === 0) {\n                fixedPoint = bbox.getBottomLeft();\n            }\n            else if (quadrant === 1) {\n                fixedPoint = bbox.getCorner();\n            }\n            else if (quadrant === 2) {\n                fixedPoint = bbox.getTopRight();\n            }\n            else {\n                fixedPoint = bbox.getOrigin();\n            }\n            // Find an image of the previous indent point. This is the position,\n            // where is the point actually located on the screen.\n            const imageFixedPoint = fixedPoint\n                .clone()\n                .rotate(-angle, bbox.getCenter());\n            // Every point on the element rotates around a circle with the centre of\n            // rotation in the middle of the element while the whole element is being\n            // rotated. That means that the distance from a point in the corner of\n            // the element (supposed its always rect) to the center of the element\n            // doesn't change during the rotation and therefore it equals to a\n            // distance on un-rotated element.\n            // We can find the distance as DISTANCE = (ELEMENTWIDTH/2)^2 + (ELEMENTHEIGHT/2)^2)^0.5.\n            const radius = Math.sqrt(width * width + height * height) / 2;\n            // Now we are looking for an angle between x-axis and the line starting\n            // at image of fixed point and ending at the center of the element.\n            // We call this angle `alpha`.\n            // The image of a fixed point is located in n-th quadrant. For each\n            // quadrant passed going anti-clockwise we have to add 90 degrees.\n            // Note that the first quadrant has index 0.\n            //\n            // 3 | 2\n            // --c-- Quadrant positions around the element's center `c`\n            // 0 | 1\n            //\n            let alpha = (quadrant * Math.PI) / 2;\n            // Add an angle between the beginning of the current quadrant (line\n            // parallel with x-axis or y-axis going through the center of the\n            // element) and line crossing the indent of the fixed point and the\n            // center of the element. This is the angle we need but on the\n            // un-rotated element.\n            alpha += Math.atan(quadrant % 2 === 0 ? height / width : width / height);\n            // Lastly we have to deduct the original angle the element was rotated\n            // by and that's it.\n            alpha -= Angle.toRad(angle);\n            // With this angle and distance we can easily calculate the centre of\n            // the un-rotated element.\n            // Note that fromPolar constructor accepts an angle in radians.\n            const center = Point.fromPolar(radius, alpha, imageFixedPoint);\n            // The top left corner on the un-rotated element has to be half a width\n            // on the left and half a height to the top from the center. This will\n            // be the origin of rectangle we were looking for.\n            const origin = center.clone().translate(width / -2, height / -2);\n            this.store.set('size', { width, height }, options);\n            this.setPosition(origin.x, origin.y, options);\n        }\n        else {\n            this.store.set('size', { width, height }, options);\n        }\n        this.stopBatch('resize', options);\n        return this;\n    }\n    scale(sx, sy, origin, options = {}) {\n        const scaledBBox = this.getBBox().scale(sx, sy, origin == null ? undefined : origin);\n        this.startBatch('scale', options);\n        this.setPosition(scaledBBox.x, scaledBBox.y, options);\n        this.resize(scaledBBox.width, scaledBBox.height, options);\n        this.stopBatch('scale');\n        return this;\n    }\n    position(arg0, arg1, arg2) {\n        if (typeof arg0 === 'number') {\n            return this.setPosition(arg0, arg1, arg2);\n        }\n        return this.getPosition(arg0);\n    }\n    getPosition(options = {}) {\n        if (options.relative) {\n            const parent = this.getParent();\n            if (parent != null && parent.isNode()) {\n                const currentPosition = this.getPosition();\n                const parentPosition = parent.getPosition();\n                return {\n                    x: currentPosition.x - parentPosition.x,\n                    y: currentPosition.y - parentPosition.y,\n                };\n            }\n        }\n        const pos = this.store.get('position');\n        return pos ? Object.assign({}, pos) : { x: 0, y: 0 };\n    }\n    setPosition(arg0, arg1, arg2 = {}) {\n        let x;\n        let y;\n        let options;\n        if (typeof arg0 === 'object') {\n            x = arg0.x;\n            y = arg0.y;\n            options = arg1 || {};\n        }\n        else {\n            x = arg0;\n            y = arg1;\n            options = arg2 || {};\n        }\n        if (options.relative) {\n            const parent = this.getParent();\n            if (parent != null && parent.isNode()) {\n                const parentPosition = parent.getPosition();\n                x += parentPosition.x;\n                y += parentPosition.y;\n            }\n        }\n        if (options.deep) {\n            const currentPosition = this.getPosition();\n            this.translate(x - currentPosition.x, y - currentPosition.y, options);\n        }\n        else {\n            this.store.set('position', { x, y }, options);\n        }\n        return this;\n    }\n    translate(tx = 0, ty = 0, options = {}) {\n        if (tx === 0 && ty === 0) {\n            return this;\n        }\n        // Pass the initiator of the translation.\n        options.translateBy = options.translateBy || this.id;\n        const position = this.getPosition();\n        if (options.restrict != null && options.translateBy === this.id) {\n            // We are restricting the translation for the element itself only. We get\n            // the bounding box of the element including all its embeds.\n            // All embeds have to be translated the exact same way as the element.\n            const bbox = this.getBBox({ deep: true });\n            const ra = options.restrict;\n            // - - - - - - - - - - - - -> ra.x + ra.width\n            // - - - -> position.x      |\n            // -> bbox.x\n            //                   |\n            //         \n            //                 |\n            //   \n            //                  |\n            //   <-dx->                     | restricted area right border\n            //         <-width->        |    translated element\n            //   <- - bbox.width - ->        embedded element\n            const dx = position.x - bbox.x;\n            const dy = position.y - bbox.y;\n            // Find the maximal/minimal coordinates that the element can be translated\n            // while complies the restrictions.\n            const x = Math.max(ra.x + dx, Math.min(ra.x + ra.width + dx - bbox.width, position.x + tx));\n            const y = Math.max(ra.y + dy, Math.min(ra.y + ra.height + dy - bbox.height, position.y + ty));\n            // recalculate the translation taking the restrictions into account.\n            tx = x - position.x; // eslint-disable-line\n            ty = y - position.y; // eslint-disable-line\n        }\n        const translatedPosition = {\n            x: position.x + tx,\n            y: position.y + ty,\n        };\n        // To find out by how much an element was translated in event\n        // 'change:position' handlers.\n        options.tx = tx;\n        options.ty = ty;\n        if (options.transition) {\n            if (typeof options.transition !== 'object') {\n                options.transition = {};\n            }\n            this.transition('position', translatedPosition, Object.assign(Object.assign({}, options.transition), { interp: Interp.object }));\n            this.eachChild((child) => {\n                var _a;\n                const excluded = (_a = options.exclude) === null || _a === void 0 ? void 0 : _a.includes(child);\n                if (!excluded) {\n                    child.translate(tx, ty, options);\n                }\n            });\n        }\n        else {\n            this.startBatch('translate', options);\n            this.store.set('position', translatedPosition, options);\n            this.eachChild((child) => {\n                var _a;\n                const excluded = (_a = options.exclude) === null || _a === void 0 ? void 0 : _a.includes(child);\n                if (!excluded) {\n                    child.translate(tx, ty, options);\n                }\n            });\n            this.stopBatch('translate', options);\n        }\n        return this;\n    }\n    angle(val, options) {\n        if (val == null) {\n            return this.getAngle();\n        }\n        return this.rotate(val, options);\n    }\n    getAngle() {\n        return this.store.get('angle', 0);\n    }\n    rotate(angle, options = {}) {\n        const currentAngle = this.getAngle();\n        if (options.center) {\n            const size = this.getSize();\n            const position = this.getPosition();\n            const center = this.getBBox().getCenter();\n            center.rotate(currentAngle - angle, options.center);\n            const dx = center.x - size.width / 2 - position.x;\n            const dy = center.y - size.height / 2 - position.y;\n            this.startBatch('rotate', { angle, options });\n            this.setPosition(position.x + dx, position.y + dy, options);\n            this.rotate(angle, Object.assign(Object.assign({}, options), { center: null }));\n            this.stopBatch('rotate');\n        }\n        else {\n            this.store.set('angle', options.absolute ? angle : (currentAngle + angle) % 360, options);\n        }\n        return this;\n    }\n    // #endregion\n    // #region common\n    getBBox(options = {}) {\n        if (options.deep) {\n            const cells = this.getDescendants({ deep: true, breadthFirst: true });\n            cells.push(this);\n            return Cell.getCellsBBox(cells);\n        }\n        return Rectangle.fromPositionAndSize(this.getPosition(), this.getSize());\n    }\n    getConnectionPoint(edge, type) {\n        const bbox = this.getBBox();\n        const center = bbox.getCenter();\n        const terminal = edge.getTerminal(type);\n        if (terminal == null) {\n            return center;\n        }\n        const portId = terminal.port;\n        if (!portId || !this.hasPort(portId)) {\n            return center;\n        }\n        const port = this.getPort(portId);\n        if (!port || !port.group) {\n            return center;\n        }\n        const layouts = this.getPortsPosition(port.group);\n        const position = layouts[portId].position;\n        const portCenter = Point.create(position).translate(bbox.getOrigin());\n        const angle = this.getAngle();\n        if (angle) {\n            portCenter.rotate(-angle, center);\n        }\n        return portCenter;\n    }\n    /**\n     * Sets cell's size and position based on the children bbox and given padding.\n     */\n    fit(options = {}) {\n        const children = this.getChildren() || [];\n        const embeds = children.filter((cell) => cell.isNode());\n        if (embeds.length === 0) {\n            return this;\n        }\n        this.startBatch('fit-embeds', options);\n        if (options.deep) {\n            embeds.forEach((cell) => cell.fit(options));\n        }\n        let { x, y, width, height } = Cell.getCellsBBox(embeds);\n        const padding = NumberExt.normalizeSides(options.padding);\n        x -= padding.left;\n        y -= padding.top;\n        width += padding.left + padding.right;\n        height += padding.bottom + padding.top;\n        this.store.set({\n            position: { x, y },\n            size: { width, height },\n        }, options);\n        this.stopBatch('fit-embeds');\n        return this;\n    }\n    // #endregion\n    // #region ports\n    get portContainerMarkup() {\n        return this.getPortContainerMarkup();\n    }\n    set portContainerMarkup(markup) {\n        this.setPortContainerMarkup(markup);\n    }\n    getDefaultPortContainerMarkup() {\n        return (this.store.get('defaultPortContainerMarkup') ||\n            Markup.getPortContainerMarkup());\n    }\n    getPortContainerMarkup() {\n        return (this.store.get('portContainerMarkup') ||\n            this.getDefaultPortContainerMarkup());\n    }\n    setPortContainerMarkup(markup, options = {}) {\n        this.store.set('portContainerMarkup', Markup.clone(markup), options);\n        return this;\n    }\n    get portMarkup() {\n        return this.getPortMarkup();\n    }\n    set portMarkup(markup) {\n        this.setPortMarkup(markup);\n    }\n    getDefaultPortMarkup() {\n        return this.store.get('defaultPortMarkup') || Markup.getPortMarkup();\n    }\n    getPortMarkup() {\n        return this.store.get('portMarkup') || this.getDefaultPortMarkup();\n    }\n    setPortMarkup(markup, options = {}) {\n        this.store.set('portMarkup', Markup.clone(markup), options);\n        return this;\n    }\n    get portLabelMarkup() {\n        return this.getPortLabelMarkup();\n    }\n    set portLabelMarkup(markup) {\n        this.setPortLabelMarkup(markup);\n    }\n    getDefaultPortLabelMarkup() {\n        return (this.store.get('defaultPortLabelMarkup') || Markup.getPortLabelMarkup());\n    }\n    getPortLabelMarkup() {\n        return this.store.get('portLabelMarkup') || this.getDefaultPortLabelMarkup();\n    }\n    setPortLabelMarkup(markup, options = {}) {\n        this.store.set('portLabelMarkup', Markup.clone(markup), options);\n        return this;\n    }\n    get ports() {\n        const res = this.store.get('ports', { items: [] });\n        if (res.items == null) {\n            res.items = [];\n        }\n        return res;\n    }\n    getPorts() {\n        return ObjectExt.cloneDeep(this.ports.items);\n    }\n    getPortsByGroup(groupName) {\n        return this.getPorts().filter((port) => port.group === groupName);\n    }\n    getPort(portId) {\n        return ObjectExt.cloneDeep(this.ports.items.find((port) => port.id && port.id === portId));\n    }\n    getPortAt(index) {\n        return this.ports.items[index] || null;\n    }\n    hasPorts() {\n        return this.ports.items.length > 0;\n    }\n    hasPort(portId) {\n        return this.getPortIndex(portId) !== -1;\n    }\n    getPortIndex(port) {\n        const portId = typeof port === 'string' ? port : port.id;\n        return portId != null\n            ? this.ports.items.findIndex((item) => item.id === portId)\n            : -1;\n    }\n    getPortsPosition(groupName) {\n        const size = this.getSize();\n        const layouts = this.port.getPortsLayoutByGroup(groupName, new Rectangle(0, 0, size.width, size.height));\n        return layouts.reduce((memo, item) => {\n            const layout = item.portLayout;\n            memo[item.portId] = {\n                position: Object.assign({}, layout.position),\n                angle: layout.angle || 0,\n            };\n            return memo;\n        }, {});\n    }\n    getPortProp(portId, path) {\n        return this.getPropByPath(this.prefixPortPath(portId, path));\n    }\n    setPortProp(portId, arg1, arg2, arg3) {\n        if (typeof arg1 === 'string' || Array.isArray(arg1)) {\n            const path = this.prefixPortPath(portId, arg1);\n            const value = arg2;\n            return this.setPropByPath(path, value, arg3);\n        }\n        const path = this.prefixPortPath(portId);\n        const value = arg1;\n        return this.setPropByPath(path, value, arg2);\n    }\n    removePortProp(portId, path, options) {\n        if (typeof path === 'string' || Array.isArray(path)) {\n            return this.removePropByPath(this.prefixPortPath(portId, path), options);\n        }\n        return this.removePropByPath(this.prefixPortPath(portId), path);\n    }\n    portProp(portId, path, value, options) {\n        if (path == null) {\n            return this.getPortProp(portId);\n        }\n        if (typeof path === 'string' || Array.isArray(path)) {\n            if (arguments.length === 2) {\n                return this.getPortProp(portId, path);\n            }\n            if (value == null) {\n                return this.removePortProp(portId, path, options);\n            }\n            return this.setPortProp(portId, path, value, options);\n        }\n        return this.setPortProp(portId, path, value);\n    }\n    prefixPortPath(portId, path) {\n        const index = this.getPortIndex(portId);\n        if (index === -1) {\n            throw new Error(`Unable to find port with id: \"${portId}\"`);\n        }\n        if (path == null || path === '') {\n            return ['ports', 'items', `${index}`];\n        }\n        if (Array.isArray(path)) {\n            return ['ports', 'items', `${index}`, ...path];\n        }\n        return `ports/items/${index}/${path}`;\n    }\n    addPort(port, options) {\n        const ports = [...this.ports.items];\n        ports.push(port);\n        this.setPropByPath('ports/items', ports, options);\n        return this;\n    }\n    addPorts(ports, options) {\n        this.setPropByPath('ports/items', [...this.ports.items, ...ports], options);\n        return this;\n    }\n    insertPort(index, port, options) {\n        const ports = [...this.ports.items];\n        ports.splice(index, 0, port);\n        this.setPropByPath('ports/items', ports, options);\n        return this;\n    }\n    removePort(port, options = {}) {\n        return this.removePortAt(this.getPortIndex(port), options);\n    }\n    removePortAt(index, options = {}) {\n        if (index >= 0) {\n            const ports = [...this.ports.items];\n            ports.splice(index, 1);\n            options.rewrite = true;\n            this.setPropByPath('ports/items', ports, options);\n        }\n        return this;\n    }\n    removePorts(portsForRemoval, opt) {\n        let options;\n        if (Array.isArray(portsForRemoval)) {\n            options = opt || {};\n            if (portsForRemoval.length) {\n                options.rewrite = true;\n                const currentPorts = [...this.ports.items];\n                const remainingPorts = currentPorts.filter((cp) => !portsForRemoval.some((p) => {\n                    const id = typeof p === 'string' ? p : p.id;\n                    return cp.id === id;\n                }));\n                this.setPropByPath('ports/items', remainingPorts, options);\n            }\n        }\n        else {\n            options = portsForRemoval || {};\n            options.rewrite = true;\n            this.setPropByPath('ports/items', [], options);\n        }\n        return this;\n    }\n    getParsedPorts() {\n        return this.port.getPorts();\n    }\n    getParsedGroups() {\n        return this.port.groups;\n    }\n    getPortsLayoutByGroup(groupName, bbox) {\n        return this.port.getPortsLayoutByGroup(groupName, bbox);\n    }\n    initPorts() {\n        this.updatePortData();\n        this.on('change:ports', () => {\n            this.processRemovedPort();\n            this.updatePortData();\n        });\n    }\n    processRemovedPort() {\n        const current = this.ports;\n        const currentItemsMap = {};\n        current.items.forEach((item) => {\n            if (item.id) {\n                currentItemsMap[item.id] = true;\n            }\n        });\n        const removed = {};\n        const previous = this.store.getPrevious('ports') || {\n            items: [],\n        };\n        previous.items.forEach((item) => {\n            if (item.id && !currentItemsMap[item.id]) {\n                removed[item.id] = true;\n            }\n        });\n        const model = this.model;\n        if (model && !ObjectExt.isEmpty(removed)) {\n            const incomings = model.getConnectedEdges(this, { incoming: true });\n            incomings.forEach((edge) => {\n                const portId = edge.getTargetPortId();\n                if (portId && removed[portId]) {\n                    edge.remove();\n                }\n            });\n            const outgoings = model.getConnectedEdges(this, { outgoing: true });\n            outgoings.forEach((edge) => {\n                const portId = edge.getSourcePortId();\n                if (portId && removed[portId]) {\n                    edge.remove();\n                }\n            });\n        }\n    }\n    validatePorts() {\n        const ids = {};\n        const errors = [];\n        this.ports.items.forEach((p) => {\n            if (typeof p !== 'object') {\n                errors.push(`Invalid port ${p}.`);\n            }\n            if (p.id == null) {\n                p.id = this.generatePortId();\n            }\n            if (ids[p.id]) {\n                errors.push('Duplicitied port id.');\n            }\n            ids[p.id] = true;\n        });\n        return errors;\n    }\n    generatePortId() {\n        return StringExt.uuid();\n    }\n    updatePortData() {\n        const err = this.validatePorts();\n        if (err.length > 0) {\n            this.store.set('ports', this.store.getPrevious('ports'));\n            throw new Error(err.join(' '));\n        }\n        const prev = this.port ? this.port.getPorts() : null;\n        this.port = new PortManager(this.ports);\n        const curr = this.port.getPorts();\n        const added = prev\n            ? curr.filter((item) => {\n                if (!prev.find((prevPort) => prevPort.id === item.id)) {\n                    return item;\n                }\n                return null;\n            })\n            : [...curr];\n        const removed = prev\n            ? prev.filter((item) => {\n                if (!curr.find((curPort) => curPort.id === item.id)) {\n                    return item;\n                }\n                return null;\n            })\n            : [];\n        if (added.length > 0) {\n            this.notify('ports:added', { added, cell: this, node: this });\n        }\n        if (removed.length > 0) {\n            this.notify('ports:removed', { removed, cell: this, node: this });\n        }\n    }\n}\nNode.defaults = {\n    angle: 0,\n    position: { x: 0, y: 0 },\n    size: { width: 1, height: 1 },\n};\n(function (Node) {\n    Node.toStringTag = `X6.${Node.name}`;\n    function isNode(instance) {\n        if (instance == null) {\n            return false;\n        }\n        if (instance instanceof Node) {\n            return true;\n        }\n        const tag = instance[Symbol.toStringTag];\n        const node = instance;\n        if ((tag == null || tag === Node.toStringTag) &&\n            typeof node.isNode === 'function' &&\n            typeof node.isEdge === 'function' &&\n            typeof node.prop === 'function' &&\n            typeof node.attr === 'function' &&\n            typeof node.size === 'function' &&\n            typeof node.position === 'function') {\n            return true;\n        }\n        return false;\n    }\n    Node.isNode = isNode;\n})(Node || (Node = {}));\n(function (Node) {\n    Node.config({\n        propHooks(_a) {\n            var { ports } = _a, metadata = __rest(_a, [\"ports\"]);\n            if (ports) {\n                metadata.ports = Array.isArray(ports) ? { items: ports } : ports;\n            }\n            return metadata;\n        },\n    });\n})(Node || (Node = {}));\n(function (Node) {\n    Node.registry = Registry.create({\n        type: 'node',\n        process(shape, options) {\n            if (ShareRegistry.exist(shape, true)) {\n                throw new Error(`Node with name '${shape}' was registered by anthor Edge`);\n            }\n            if (typeof options === 'function') {\n                options.config({ shape });\n                return options;\n            }\n            let parent = Node;\n            const { inherit } = options, config = __rest(options, [\"inherit\"]);\n            if (inherit) {\n                if (typeof inherit === 'string') {\n                    const base = this.get(inherit);\n                    if (base == null) {\n                        this.onNotFound(inherit, 'inherited');\n                    }\n                    else {\n                        parent = base;\n                    }\n                }\n                else {\n                    parent = inherit;\n                }\n            }\n            if (config.constructorName == null) {\n                config.constructorName = shape;\n            }\n            const ctor = parent.define.call(parent, config);\n            ctor.config({ shape });\n            return ctor;\n        },\n    });\n    ShareRegistry.setNodeRegistry(Node.registry);\n})(Node || (Node = {}));\n(function (Node) {\n    let counter = 0;\n    function getClassName(name) {\n        if (name) {\n            return StringExt.pascalCase(name);\n        }\n        counter += 1;\n        return `CustomNode${counter}`;\n    }\n    function define(config) {\n        const { constructorName, overwrite } = config, others = __rest(config, [\"constructorName\", \"overwrite\"]);\n        const ctor = ObjectExt.createClass(getClassName(constructorName || others.shape), this);\n        ctor.config(others);\n        if (others.shape) {\n            Node.registry.register(others.shape, ctor, overwrite);\n        }\n        return ctor;\n    }\n    Node.define = define;\n    function create(options) {\n        const shape = options.shape || 'rect';\n        const Ctor = Node.registry.get(shape);\n        if (Ctor) {\n            return new Ctor(options);\n        }\n        return Node.registry.onNotFound(shape);\n    }\n    Node.create = create;\n})(Node || (Node = {}));\n//# sourceMappingURL=node.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { ObjectExt, StringExt } from '@antv/x6-common';\nimport { Point, Polyline } from '@antv/x6-geometry';\nimport { Registry } from '../registry/registry';\nimport { Markup } from '../view/markup';\nimport { ShareRegistry } from './registry';\nimport { Cell } from './cell';\nexport class Edge extends Cell {\n    get [Symbol.toStringTag]() {\n        return Edge.toStringTag;\n    }\n    constructor(metadata = {}) {\n        super(metadata);\n    }\n    preprocess(metadata, ignoreIdCheck) {\n        const { source, sourceCell, sourcePort, sourcePoint, target, targetCell, targetPort, targetPoint } = metadata, others = __rest(metadata, [\"source\", \"sourceCell\", \"sourcePort\", \"sourcePoint\", \"target\", \"targetCell\", \"targetPort\", \"targetPoint\"]);\n        const data = others;\n        const isValidId = (val) => typeof val === 'string' || typeof val === 'number';\n        if (source != null) {\n            if (Cell.isCell(source)) {\n                data.source = { cell: source.id };\n            }\n            else if (isValidId(source)) {\n                data.source = { cell: source };\n            }\n            else if (Point.isPoint(source)) {\n                data.source = source.toJSON();\n            }\n            else if (Array.isArray(source)) {\n                data.source = { x: source[0], y: source[1] };\n            }\n            else {\n                const cell = source.cell;\n                if (Cell.isCell(cell)) {\n                    data.source = Object.assign(Object.assign({}, source), { cell: cell.id });\n                }\n                else {\n                    data.source = source;\n                }\n            }\n        }\n        if (sourceCell != null || sourcePort != null) {\n            let terminal = data.source;\n            if (sourceCell != null) {\n                const id = isValidId(sourceCell) ? sourceCell : sourceCell.id;\n                if (terminal) {\n                    terminal.cell = id;\n                }\n                else {\n                    terminal = data.source = { cell: id };\n                }\n            }\n            if (sourcePort != null && terminal) {\n                terminal.port = sourcePort;\n            }\n        }\n        else if (sourcePoint != null) {\n            data.source = Point.create(sourcePoint).toJSON();\n        }\n        if (target != null) {\n            if (Cell.isCell(target)) {\n                data.target = { cell: target.id };\n            }\n            else if (isValidId(target)) {\n                data.target = { cell: target };\n            }\n            else if (Point.isPoint(target)) {\n                data.target = target.toJSON();\n            }\n            else if (Array.isArray(target)) {\n                data.target = { x: target[0], y: target[1] };\n            }\n            else {\n                const cell = target.cell;\n                if (Cell.isCell(cell)) {\n                    data.target = Object.assign(Object.assign({}, target), { cell: cell.id });\n                }\n                else {\n                    data.target = target;\n                }\n            }\n        }\n        if (targetCell != null || targetPort != null) {\n            let terminal = data.target;\n            if (targetCell != null) {\n                const id = isValidId(targetCell) ? targetCell : targetCell.id;\n                if (terminal) {\n                    terminal.cell = id;\n                }\n                else {\n                    terminal = data.target = { cell: id };\n                }\n            }\n            if (targetPort != null && terminal) {\n                terminal.port = targetPort;\n            }\n        }\n        else if (targetPoint != null) {\n            data.target = Point.create(targetPoint).toJSON();\n        }\n        return super.preprocess(data, ignoreIdCheck);\n    }\n    setup() {\n        super.setup();\n        this.on('change:labels', (args) => this.onLabelsChanged(args));\n        this.on('change:vertices', (args) => this.onVertexsChanged(args));\n    }\n    isEdge() {\n        return true;\n    }\n    // #region terminal\n    disconnect(options = {}) {\n        this.store.set({\n            source: { x: 0, y: 0 },\n            target: { x: 0, y: 0 },\n        }, options);\n        return this;\n    }\n    get source() {\n        return this.getSource();\n    }\n    set source(data) {\n        this.setSource(data);\n    }\n    getSource() {\n        return this.getTerminal('source');\n    }\n    getSourceCellId() {\n        return this.source.cell;\n    }\n    getSourcePortId() {\n        return this.source.port;\n    }\n    setSource(source, args, options = {}) {\n        return this.setTerminal('source', source, args, options);\n    }\n    get target() {\n        return this.getTarget();\n    }\n    set target(data) {\n        this.setTarget(data);\n    }\n    getTarget() {\n        return this.getTerminal('target');\n    }\n    getTargetCellId() {\n        return this.target.cell;\n    }\n    getTargetPortId() {\n        return this.target.port;\n    }\n    setTarget(target, args, options = {}) {\n        return this.setTerminal('target', target, args, options);\n    }\n    getTerminal(type) {\n        return Object.assign({}, this.store.get(type));\n    }\n    setTerminal(type, terminal, args, options = {}) {\n        // `terminal` is a cell\n        if (Cell.isCell(terminal)) {\n            this.store.set(type, ObjectExt.merge({}, args, { cell: terminal.id }), options);\n            return this;\n        }\n        // `terminal` is a point-like object\n        const p = terminal;\n        if (Point.isPoint(terminal) || (p.x != null && p.y != null)) {\n            this.store.set(type, ObjectExt.merge({}, args, { x: p.x, y: p.y }), options);\n            return this;\n        }\n        // `terminal` is an object\n        this.store.set(type, ObjectExt.cloneDeep(terminal), options);\n        return this;\n    }\n    getSourcePoint() {\n        return this.getTerminalPoint('source');\n    }\n    getTargetPoint() {\n        return this.getTerminalPoint('target');\n    }\n    getTerminalPoint(type) {\n        const terminal = this[type];\n        if (Point.isPointLike(terminal)) {\n            return Point.create(terminal);\n        }\n        const cell = this.getTerminalCell(type);\n        if (cell) {\n            return cell.getConnectionPoint(this, type);\n        }\n        return new Point();\n    }\n    getSourceCell() {\n        return this.getTerminalCell('source');\n    }\n    getTargetCell() {\n        return this.getTerminalCell('target');\n    }\n    getTerminalCell(type) {\n        if (this.model) {\n            const cellId = type === 'source' ? this.getSourceCellId() : this.getTargetCellId();\n            if (cellId) {\n                return this.model.getCell(cellId);\n            }\n        }\n        return null;\n    }\n    getSourceNode() {\n        return this.getTerminalNode('source');\n    }\n    getTargetNode() {\n        return this.getTerminalNode('target');\n    }\n    getTerminalNode(type) {\n        let cell = this; // eslint-disable-line\n        const visited = {};\n        while (cell && cell.isEdge()) {\n            if (visited[cell.id]) {\n                return null;\n            }\n            visited[cell.id] = true;\n            cell = cell.getTerminalCell(type);\n        }\n        return cell && cell.isNode() ? cell : null;\n    }\n    // #endregion\n    // #region router\n    get router() {\n        return this.getRouter();\n    }\n    set router(data) {\n        if (data == null) {\n            this.removeRouter();\n        }\n        else {\n            this.setRouter(data);\n        }\n    }\n    getRouter() {\n        return this.store.get('router');\n    }\n    setRouter(name, args, options) {\n        if (typeof name === 'object') {\n            this.store.set('router', name, args);\n        }\n        else {\n            this.store.set('router', { name, args }, options);\n        }\n        return this;\n    }\n    removeRouter(options = {}) {\n        this.store.remove('router', options);\n        return this;\n    }\n    // #endregion\n    // #region connector\n    get connector() {\n        return this.getConnector();\n    }\n    set connector(data) {\n        if (data == null) {\n            this.removeConnector();\n        }\n        else {\n            this.setConnector(data);\n        }\n    }\n    getConnector() {\n        return this.store.get('connector');\n    }\n    setConnector(name, args, options) {\n        if (typeof name === 'object') {\n            this.store.set('connector', name, args);\n        }\n        else {\n            this.store.set('connector', { name, args }, options);\n        }\n        return this;\n    }\n    removeConnector(options = {}) {\n        return this.store.remove('connector', options);\n    }\n    // #endregion\n    // #region labels\n    getDefaultLabel() {\n        const ctor = this.constructor;\n        const defaults = this.store.get('defaultLabel') || ctor.defaultLabel || {};\n        return ObjectExt.cloneDeep(defaults);\n    }\n    get labels() {\n        return this.getLabels();\n    }\n    set labels(labels) {\n        this.setLabels(labels);\n    }\n    getLabels() {\n        return [...this.store.get('labels', [])].map((item) => this.parseLabel(item));\n    }\n    setLabels(labels, options = {}) {\n        this.store.set('labels', Array.isArray(labels) ? labels : [labels], options);\n        return this;\n    }\n    insertLabel(label, index, options = {}) {\n        const labels = this.getLabels();\n        const len = labels.length;\n        let idx = index != null && Number.isFinite(index) ? index : len;\n        if (idx < 0) {\n            idx = len + idx + 1;\n        }\n        labels.splice(idx, 0, this.parseLabel(label));\n        return this.setLabels(labels, options);\n    }\n    appendLabel(label, options = {}) {\n        return this.insertLabel(label, -1, options);\n    }\n    getLabelAt(index) {\n        const labels = this.getLabels();\n        if (index != null && Number.isFinite(index)) {\n            return this.parseLabel(labels[index]);\n        }\n        return null;\n    }\n    setLabelAt(index, label, options = {}) {\n        if (index != null && Number.isFinite(index)) {\n            const labels = this.getLabels();\n            labels[index] = this.parseLabel(label);\n            this.setLabels(labels, options);\n        }\n        return this;\n    }\n    removeLabelAt(index, options = {}) {\n        const labels = this.getLabels();\n        const idx = index != null && Number.isFinite(index) ? index : -1;\n        const removed = labels.splice(idx, 1);\n        this.setLabels(labels, options);\n        return removed.length ? removed[0] : null;\n    }\n    parseLabel(label) {\n        if (typeof label === 'string') {\n            const ctor = this.constructor;\n            return ctor.parseStringLabel(label);\n        }\n        return label;\n    }\n    onLabelsChanged({ previous, current, }) {\n        const added = previous && current\n            ? current.filter((label1) => {\n                if (!previous.find((label2) => label1 === label2 || ObjectExt.isEqual(label1, label2))) {\n                    return label1;\n                }\n                return null;\n            })\n            : current\n                ? [...current]\n                : [];\n        const removed = previous && current\n            ? previous.filter((label1) => {\n                if (!current.find((label2) => label1 === label2 || ObjectExt.isEqual(label1, label2))) {\n                    return label1;\n                }\n                return null;\n            })\n            : previous\n                ? [...previous]\n                : [];\n        if (added.length > 0) {\n            this.notify('labels:added', { added, cell: this, edge: this });\n        }\n        if (removed.length > 0) {\n            this.notify('labels:removed', { removed, cell: this, edge: this });\n        }\n    }\n    // #endregion\n    // #region vertices\n    get vertices() {\n        return this.getVertices();\n    }\n    set vertices(vertices) {\n        this.setVertices(vertices);\n    }\n    getVertices() {\n        return [...this.store.get('vertices', [])];\n    }\n    setVertices(vertices, options = {}) {\n        const points = Array.isArray(vertices) ? vertices : [vertices];\n        this.store.set('vertices', points.map((p) => Point.toJSON(p)), options);\n        return this;\n    }\n    insertVertex(vertice, index, options = {}) {\n        const vertices = this.getVertices();\n        const len = vertices.length;\n        let idx = index != null && Number.isFinite(index) ? index : len;\n        if (idx < 0) {\n            idx = len + idx + 1;\n        }\n        vertices.splice(idx, 0, Point.toJSON(vertice));\n        return this.setVertices(vertices, options);\n    }\n    appendVertex(vertex, options = {}) {\n        return this.insertVertex(vertex, -1, options);\n    }\n    getVertexAt(index) {\n        if (index != null && Number.isFinite(index)) {\n            const vertices = this.getVertices();\n            return vertices[index];\n        }\n        return null;\n    }\n    setVertexAt(index, vertice, options = {}) {\n        if (index != null && Number.isFinite(index)) {\n            const vertices = this.getVertices();\n            vertices[index] = vertice;\n            this.setVertices(vertices, options);\n        }\n        return this;\n    }\n    removeVertexAt(index, options = {}) {\n        const vertices = this.getVertices();\n        const idx = index != null && Number.isFinite(index) ? index : -1;\n        vertices.splice(idx, 1);\n        return this.setVertices(vertices, options);\n    }\n    onVertexsChanged({ previous, current, }) {\n        const added = previous && current\n            ? current.filter((p1) => {\n                if (!previous.find((p2) => Point.equals(p1, p2))) {\n                    return p1;\n                }\n                return null;\n            })\n            : current\n                ? [...current]\n                : [];\n        const removed = previous && current\n            ? previous.filter((p1) => {\n                if (!current.find((p2) => Point.equals(p1, p2))) {\n                    return p1;\n                }\n                return null;\n            })\n            : previous\n                ? [...previous]\n                : [];\n        if (added.length > 0) {\n            this.notify('vertexs:added', { added, cell: this, edge: this });\n        }\n        if (removed.length > 0) {\n            this.notify('vertexs:removed', { removed, cell: this, edge: this });\n        }\n    }\n    // #endregion\n    // #region markup\n    getDefaultMarkup() {\n        return this.store.get('defaultMarkup') || Markup.getEdgeMarkup();\n    }\n    getMarkup() {\n        return super.getMarkup() || this.getDefaultMarkup();\n    }\n    // #endregion\n    // #region transform\n    /**\n     * Translate the edge vertices (and source and target if they are points)\n     * by `tx` pixels in the x-axis and `ty` pixels in the y-axis.\n     */\n    translate(tx, ty, options = {}) {\n        options.translateBy = options.translateBy || this.id;\n        options.tx = tx;\n        options.ty = ty;\n        return this.applyToPoints((p) => ({\n            x: (p.x || 0) + tx,\n            y: (p.y || 0) + ty,\n        }), options);\n    }\n    /**\n     * Scales the edge's points (vertices) relative to the given origin.\n     */\n    scale(sx, sy, origin, options = {}) {\n        return this.applyToPoints((p) => {\n            return Point.create(p).scale(sx, sy, origin).toJSON();\n        }, options);\n    }\n    applyToPoints(worker, options = {}) {\n        const attrs = {};\n        const source = this.getSource();\n        const target = this.getTarget();\n        if (Point.isPointLike(source)) {\n            attrs.source = worker(source);\n        }\n        if (Point.isPointLike(target)) {\n            attrs.target = worker(target);\n        }\n        const vertices = this.getVertices();\n        if (vertices.length > 0) {\n            attrs.vertices = vertices.map(worker);\n        }\n        this.store.set(attrs, options);\n        return this;\n    }\n    // #endregion\n    // #region common\n    getBBox() {\n        return this.getPolyline().bbox();\n    }\n    getConnectionPoint() {\n        return this.getPolyline().pointAt(0.5);\n    }\n    getPolyline() {\n        const points = [\n            this.getSourcePoint(),\n            ...this.getVertices().map((vertice) => Point.create(vertice)),\n            this.getTargetPoint(),\n        ];\n        return new Polyline(points);\n    }\n    updateParent(options) {\n        let newParent = null;\n        const source = this.getSourceCell();\n        const target = this.getTargetCell();\n        const prevParent = this.getParent();\n        if (source && target) {\n            if (source === target || source.isDescendantOf(target)) {\n                newParent = target;\n            }\n            else if (target.isDescendantOf(source)) {\n                newParent = source;\n            }\n            else {\n                newParent = Cell.getCommonAncestor(source, target);\n            }\n        }\n        // Unembeds the edge if source and target has no common\n        // ancestor or common ancestor changed\n        if (prevParent && newParent && newParent.id !== prevParent.id) {\n            prevParent.unembed(this, options);\n        }\n        // Embeds the edge if source and target are not same\n        if (newParent && (!prevParent || prevParent.id !== newParent.id)) {\n            newParent.embed(this, options);\n        }\n        return newParent;\n    }\n    hasLoop(options = {}) {\n        const source = this.getSource();\n        const target = this.getTarget();\n        const sourceId = source.cell;\n        const targetId = target.cell;\n        if (!sourceId || !targetId) {\n            return false;\n        }\n        let loop = sourceId === targetId;\n        // Note that there in the deep mode a edge can have a loop,\n        // even if it connects only a parent and its embed.\n        // A loop \"target equals source\" is valid in both shallow and deep mode.\n        // eslint-disable-next-line\n        if (!loop && options.deep && this._model) {\n            const sourceCell = this.getSourceCell();\n            const targetCell = this.getTargetCell();\n            if (sourceCell && targetCell) {\n                loop =\n                    sourceCell.isAncestorOf(targetCell, options) ||\n                        targetCell.isAncestorOf(sourceCell, options);\n            }\n        }\n        return loop;\n    }\n    getFragmentAncestor() {\n        const cells = [this, this.getSourceNode(), this.getTargetNode()].filter((item) => item != null);\n        return this.getCommonAncestor(...cells);\n    }\n    isFragmentDescendantOf(cell) {\n        const ancestor = this.getFragmentAncestor();\n        return (!!ancestor && (ancestor.id === cell.id || ancestor.isDescendantOf(cell)));\n    }\n}\nEdge.defaults = {};\n(function (Edge) {\n    function equalTerminals(a, b) {\n        const a1 = a;\n        const b1 = b;\n        if (a1.cell === b1.cell) {\n            return a1.port === b1.port || (a1.port == null && b1.port == null);\n        }\n        return false;\n    }\n    Edge.equalTerminals = equalTerminals;\n})(Edge || (Edge = {}));\n(function (Edge) {\n    Edge.defaultLabel = {\n        markup: [\n            {\n                tagName: 'rect',\n                selector: 'body',\n            },\n            {\n                tagName: 'text',\n                selector: 'label',\n            },\n        ],\n        attrs: {\n            text: {\n                fill: '#000',\n                fontSize: 14,\n                textAnchor: 'middle',\n                textVerticalAnchor: 'middle',\n                pointerEvents: 'none',\n            },\n            rect: {\n                ref: 'label',\n                fill: '#fff',\n                rx: 3,\n                ry: 3,\n                refWidth: 1,\n                refHeight: 1,\n                refX: 0,\n                refY: 0,\n            },\n        },\n        position: {\n            distance: 0.5,\n        },\n    };\n    function parseStringLabel(text) {\n        return {\n            attrs: { label: { text } },\n        };\n    }\n    Edge.parseStringLabel = parseStringLabel;\n})(Edge || (Edge = {}));\n(function (Edge) {\n    Edge.toStringTag = `X6.${Edge.name}`;\n    function isEdge(instance) {\n        if (instance == null) {\n            return false;\n        }\n        if (instance instanceof Edge) {\n            return true;\n        }\n        const tag = instance[Symbol.toStringTag];\n        const edge = instance;\n        if ((tag == null || tag === Edge.toStringTag) &&\n            typeof edge.isNode === 'function' &&\n            typeof edge.isEdge === 'function' &&\n            typeof edge.prop === 'function' &&\n            typeof edge.attr === 'function' &&\n            typeof edge.disconnect === 'function' &&\n            typeof edge.getSource === 'function' &&\n            typeof edge.getTarget === 'function') {\n            return true;\n        }\n        return false;\n    }\n    Edge.isEdge = isEdge;\n})(Edge || (Edge = {}));\n(function (Edge) {\n    Edge.registry = Registry.create({\n        type: 'edge',\n        process(shape, options) {\n            if (ShareRegistry.exist(shape, false)) {\n                throw new Error(`Edge with name '${shape}' was registered by anthor Node`);\n            }\n            if (typeof options === 'function') {\n                options.config({ shape });\n                return options;\n            }\n            let parent = Edge;\n            // default inherit from 'dege'\n            const { inherit = 'edge' } = options, others = __rest(options, [\"inherit\"]);\n            if (typeof inherit === 'string') {\n                const base = this.get(inherit || 'edge');\n                if (base == null && inherit) {\n                    this.onNotFound(inherit, 'inherited');\n                }\n                else {\n                    parent = base;\n                }\n            }\n            else {\n                parent = inherit;\n            }\n            if (others.constructorName == null) {\n                others.constructorName = shape;\n            }\n            const ctor = parent.define.call(parent, others);\n            ctor.config({ shape });\n            return ctor;\n        },\n    });\n    ShareRegistry.setEdgeRegistry(Edge.registry);\n})(Edge || (Edge = {}));\n(function (Edge) {\n    let counter = 0;\n    function getClassName(name) {\n        if (name) {\n            return StringExt.pascalCase(name);\n        }\n        counter += 1;\n        return `CustomEdge${counter}`;\n    }\n    function define(config) {\n        const { constructorName, overwrite } = config, others = __rest(config, [\"constructorName\", \"overwrite\"]);\n        const ctor = ObjectExt.createClass(getClassName(constructorName || others.shape), this);\n        ctor.config(others);\n        if (others.shape) {\n            Edge.registry.register(others.shape, ctor, overwrite);\n        }\n        return ctor;\n    }\n    Edge.define = define;\n    function create(options) {\n        const shape = options.shape || 'edge';\n        const Ctor = Edge.registry.get(shape);\n        if (Ctor) {\n            return new Ctor(options);\n        }\n        return Edge.registry.onNotFound(shape);\n    }\n    Edge.create = create;\n})(Edge || (Edge = {}));\n(function (Edge) {\n    const shape = 'basic.edge';\n    Edge.config({\n        shape,\n        propHooks(metadata) {\n            const { label, vertices } = metadata, others = __rest(metadata, [\"label\", \"vertices\"]);\n            if (label) {\n                if (others.labels == null) {\n                    others.labels = [];\n                }\n                const formated = typeof label === 'string' ? Edge.parseStringLabel(label) : label;\n                others.labels.push(formated);\n            }\n            if (vertices) {\n                if (Array.isArray(vertices)) {\n                    others.vertices = vertices.map((item) => Point.create(item).toJSON());\n                }\n            }\n            return others;\n        },\n    });\n    Edge.registry.register(shape, Edge);\n})(Edge || (Edge = {}));\n//# sourceMappingURL=edge.js.map","import { ArrayExt, Basecoat } from '@antv/x6-common';\nexport class Collection extends Basecoat {\n    constructor(cells, options = {}) {\n        super();\n        this.length = 0;\n        this.comparator = options.comparator || 'zIndex';\n        this.clean();\n        if (cells) {\n            this.reset(cells, { silent: true });\n        }\n    }\n    toJSON() {\n        return this.cells.map((cell) => cell.toJSON());\n    }\n    add(cells, index, options) {\n        let localIndex;\n        let localOptions;\n        if (typeof index === 'number') {\n            localIndex = index;\n            localOptions = Object.assign({ merge: false }, options);\n        }\n        else {\n            localIndex = this.length;\n            localOptions = Object.assign({ merge: false }, index);\n        }\n        if (localIndex > this.length) {\n            localIndex = this.length;\n        }\n        if (localIndex < 0) {\n            localIndex += this.length + 1;\n        }\n        const entities = Array.isArray(cells) ? cells : [cells];\n        const sortable = this.comparator &&\n            typeof index !== 'number' &&\n            localOptions.sort !== false;\n        const sortAttr = this.comparator || null;\n        let sort = false;\n        const added = [];\n        const merged = [];\n        entities.forEach((cell) => {\n            const existing = this.get(cell);\n            if (existing) {\n                if (localOptions.merge && !cell.isSameStore(existing)) {\n                    existing.setProp(cell.getProp(), options); // merge\n                    merged.push(existing);\n                    if (sortable && !sort) {\n                        if (sortAttr == null || typeof sortAttr === 'function') {\n                            sort = existing.hasChanged();\n                        }\n                        else if (typeof sortAttr === 'string') {\n                            sort = existing.hasChanged(sortAttr);\n                        }\n                        else {\n                            sort = sortAttr.some((key) => existing.hasChanged(key));\n                        }\n                    }\n                }\n            }\n            else {\n                added.push(cell);\n                this.reference(cell);\n            }\n        });\n        if (added.length) {\n            if (sortable) {\n                sort = true;\n            }\n            this.cells.splice(localIndex, 0, ...added);\n            this.length = this.cells.length;\n        }\n        if (sort) {\n            this.sort({ silent: true });\n        }\n        if (!localOptions.silent) {\n            added.forEach((cell, i) => {\n                const args = {\n                    cell,\n                    index: localIndex + i,\n                    options: localOptions,\n                };\n                this.trigger('added', args);\n                if (!localOptions.dryrun) {\n                    cell.notify('added', Object.assign({}, args));\n                }\n            });\n            if (sort) {\n                this.trigger('sorted');\n            }\n            if (added.length || merged.length) {\n                this.trigger('updated', {\n                    added,\n                    merged,\n                    removed: [],\n                    options: localOptions,\n                });\n            }\n        }\n        return this;\n    }\n    remove(cells, options = {}) {\n        const arr = Array.isArray(cells) ? cells : [cells];\n        const removed = this.removeCells(arr, options);\n        if (!options.silent && removed.length > 0) {\n            this.trigger('updated', {\n                options,\n                removed,\n                added: [],\n                merged: [],\n            });\n        }\n        return Array.isArray(cells) ? removed : removed[0];\n    }\n    removeCells(cells, options) {\n        const removed = [];\n        for (let i = 0; i < cells.length; i += 1) {\n            const cell = this.get(cells[i]);\n            if (cell == null) {\n                continue;\n            }\n            const index = this.cells.indexOf(cell);\n            this.cells.splice(index, 1);\n            this.length -= 1;\n            delete this.map[cell.id];\n            removed.push(cell);\n            this.unreference(cell);\n            if (!options.dryrun) {\n                cell.remove();\n            }\n            if (!options.silent) {\n                this.trigger('removed', { cell, index, options });\n                if (!options.dryrun) {\n                    cell.notify('removed', { cell, index, options });\n                }\n            }\n        }\n        return removed;\n    }\n    reset(cells, options = {}) {\n        const previous = this.cells.slice();\n        previous.forEach((cell) => this.unreference(cell));\n        this.clean();\n        this.add(cells, Object.assign({ silent: true }, options));\n        if (!options.silent) {\n            const current = this.cells.slice();\n            this.trigger('reseted', {\n                options,\n                previous,\n                current,\n            });\n            const added = [];\n            const removed = [];\n            current.forEach((a) => {\n                const exist = previous.some((b) => b.id === a.id);\n                if (!exist) {\n                    added.push(a);\n                }\n            });\n            previous.forEach((a) => {\n                const exist = current.some((b) => b.id === a.id);\n                if (!exist) {\n                    removed.push(a);\n                }\n            });\n            this.trigger('updated', { options, added, removed, merged: [] });\n        }\n        return this;\n    }\n    push(cell, options) {\n        return this.add(cell, this.length, options);\n    }\n    pop(options) {\n        const cell = this.at(this.length - 1);\n        return this.remove(cell, options);\n    }\n    unshift(cell, options) {\n        return this.add(cell, 0, options);\n    }\n    shift(options) {\n        const cell = this.at(0);\n        return this.remove(cell, options);\n    }\n    get(cell) {\n        if (cell == null) {\n            return null;\n        }\n        const id = typeof cell === 'string' || typeof cell === 'number' ? cell : cell.id;\n        return this.map[id] || null;\n    }\n    has(cell) {\n        return this.get(cell) != null;\n    }\n    at(index) {\n        if (index < 0) {\n            index += this.length; // eslint-disable-line\n        }\n        return this.cells[index] || null;\n    }\n    first() {\n        return this.at(0);\n    }\n    last() {\n        return this.at(-1);\n    }\n    indexOf(cell) {\n        return this.cells.indexOf(cell);\n    }\n    toArray() {\n        return this.cells.slice();\n    }\n    sort(options = {}) {\n        if (this.comparator != null) {\n            this.cells = ArrayExt.sortBy(this.cells, this.comparator);\n            if (!options.silent) {\n                this.trigger('sorted');\n            }\n        }\n        return this;\n    }\n    clone() {\n        const constructor = this.constructor;\n        return new constructor(this.cells.slice(), {\n            comparator: this.comparator,\n        });\n    }\n    reference(cell) {\n        this.map[cell.id] = cell;\n        cell.on('*', this.notifyCellEvent, this);\n    }\n    unreference(cell) {\n        cell.off('*', this.notifyCellEvent, this);\n        delete this.map[cell.id];\n    }\n    notifyCellEvent(name, args) {\n        const cell = args.cell;\n        this.trigger(`cell:${name}`, args);\n        if (cell) {\n            if (cell.isNode()) {\n                this.trigger(`node:${name}`, Object.assign(Object.assign({}, args), { node: cell }));\n            }\n            else if (cell.isEdge()) {\n                this.trigger(`edge:${name}`, Object.assign(Object.assign({}, args), { edge: cell }));\n            }\n        }\n    }\n    clean() {\n        this.length = 0;\n        this.cells = [];\n        this.map = {};\n    }\n}\n//# sourceMappingURL=collection.js.map","import { FunctionExt, Dijkstra, Basecoat } from '@antv/x6-common';\nimport { Rectangle } from '@antv/x6-geometry';\nimport { Cell } from './cell';\nimport { Edge } from './edge';\nimport { Node } from './node';\nimport { Collection } from './collection';\nexport class Model extends Basecoat {\n    get [Symbol.toStringTag]() {\n        return Model.toStringTag;\n    }\n    constructor(cells = []) {\n        super();\n        this.batches = {};\n        this.addings = new WeakMap();\n        this.nodes = {};\n        this.edges = {};\n        this.outgoings = {};\n        this.incomings = {};\n        this.collection = new Collection(cells);\n        this.setup();\n    }\n    notify(name, args) {\n        this.trigger(name, args);\n        const graph = this.graph;\n        if (graph) {\n            if (name === 'sorted' || name === 'reseted' || name === 'updated') {\n                graph.trigger(`model:${name}`, args);\n            }\n            else {\n                graph.trigger(name, args);\n            }\n        }\n        return this;\n    }\n    setup() {\n        const collection = this.collection;\n        collection.on('sorted', () => this.notify('sorted', null));\n        collection.on('updated', (args) => this.notify('updated', args));\n        collection.on('cell:change:zIndex', () => this.sortOnChangeZ());\n        collection.on('added', ({ cell }) => {\n            this.onCellAdded(cell);\n        });\n        collection.on('removed', (args) => {\n            const cell = args.cell;\n            this.onCellRemoved(cell, args.options);\n            // Should trigger remove-event manually after cell was removed.\n            this.notify('cell:removed', args);\n            if (cell.isNode()) {\n                this.notify('node:removed', Object.assign(Object.assign({}, args), { node: cell }));\n            }\n            else if (cell.isEdge()) {\n                this.notify('edge:removed', Object.assign(Object.assign({}, args), { edge: cell }));\n            }\n        });\n        collection.on('reseted', (args) => {\n            this.onReset(args.current);\n            this.notify('reseted', args);\n        });\n        collection.on('edge:change:source', ({ edge }) => this.onEdgeTerminalChanged(edge, 'source'));\n        collection.on('edge:change:target', ({ edge }) => {\n            this.onEdgeTerminalChanged(edge, 'target');\n        });\n    }\n    sortOnChangeZ() {\n        this.collection.sort();\n    }\n    onCellAdded(cell) {\n        const cellId = cell.id;\n        if (cell.isEdge()) {\n            // Auto update edge's parent\n            cell.updateParent();\n            this.edges[cellId] = true;\n            this.onEdgeTerminalChanged(cell, 'source');\n            this.onEdgeTerminalChanged(cell, 'target');\n        }\n        else {\n            this.nodes[cellId] = true;\n        }\n    }\n    onCellRemoved(cell, options) {\n        const cellId = cell.id;\n        if (cell.isEdge()) {\n            delete this.edges[cellId];\n            const source = cell.getSource();\n            const target = cell.getTarget();\n            if (source && source.cell) {\n                const cache = this.outgoings[source.cell];\n                const index = cache ? cache.indexOf(cellId) : -1;\n                if (index >= 0) {\n                    cache.splice(index, 1);\n                    if (cache.length === 0) {\n                        delete this.outgoings[source.cell];\n                    }\n                }\n            }\n            if (target && target.cell) {\n                const cache = this.incomings[target.cell];\n                const index = cache ? cache.indexOf(cellId) : -1;\n                if (index >= 0) {\n                    cache.splice(index, 1);\n                    if (cache.length === 0) {\n                        delete this.incomings[target.cell];\n                    }\n                }\n            }\n        }\n        else {\n            delete this.nodes[cellId];\n        }\n        if (!options.clear) {\n            if (options.disconnectEdges) {\n                this.disconnectConnectedEdges(cell, options);\n            }\n            else {\n                this.removeConnectedEdges(cell, options);\n            }\n        }\n        if (cell.model === this) {\n            cell.model = null;\n        }\n    }\n    onReset(cells) {\n        this.nodes = {};\n        this.edges = {};\n        this.outgoings = {};\n        this.incomings = {};\n        cells.forEach((cell) => this.onCellAdded(cell));\n    }\n    onEdgeTerminalChanged(edge, type) {\n        const ref = type === 'source' ? this.outgoings : this.incomings;\n        const prev = edge.previous(type);\n        if (prev && prev.cell) {\n            const cellId = Cell.isCell(prev.cell) ? prev.cell.id : prev.cell;\n            const cache = ref[cellId];\n            const index = cache ? cache.indexOf(edge.id) : -1;\n            if (index >= 0) {\n                cache.splice(index, 1);\n                if (cache.length === 0) {\n                    delete ref[cellId];\n                }\n            }\n        }\n        const terminal = edge.getTerminal(type);\n        if (terminal && terminal.cell) {\n            const terminalId = Cell.isCell(terminal.cell)\n                ? terminal.cell.id\n                : terminal.cell;\n            const cache = ref[terminalId] || [];\n            const index = cache.indexOf(edge.id);\n            if (index === -1) {\n                cache.push(edge.id);\n            }\n            ref[terminalId] = cache;\n        }\n    }\n    prepareCell(cell, options) {\n        if (!cell.model && (!options || !options.dryrun)) {\n            cell.model = this;\n        }\n        if (cell.zIndex == null) {\n            cell.setZIndex(this.getMaxZIndex() + 1, { silent: true });\n        }\n        return cell;\n    }\n    resetCells(cells, options = {}) {\n        // Do not update model at this time. Because if we just update the graph\n        // with the same json-data, the edge will reference to the old nodes.\n        cells.map((cell) => this.prepareCell(cell, Object.assign(Object.assign({}, options), { dryrun: true })));\n        this.collection.reset(cells, options);\n        // Update model and trigger edge update it's references\n        cells.map((cell) => this.prepareCell(cell, { options }));\n        return this;\n    }\n    clear(options = {}) {\n        const raw = this.getCells();\n        if (raw.length === 0) {\n            return this;\n        }\n        const localOptions = Object.assign(Object.assign({}, options), { clear: true });\n        this.batchUpdate('clear', () => {\n            // The nodes come after the edges.\n            const cells = raw.sort((a, b) => {\n                const v1 = a.isEdge() ? 1 : 2;\n                const v2 = b.isEdge() ? 1 : 2;\n                return v1 - v2;\n            });\n            while (cells.length > 0) {\n                // Note that all the edges are removed first, so it's safe to\n                // remove the nodes without removing the connected edges first.\n                const cell = cells.shift();\n                if (cell) {\n                    cell.remove(localOptions);\n                }\n            }\n        }, localOptions);\n        return this;\n    }\n    addNode(metadata, options = {}) {\n        const node = Node.isNode(metadata) ? metadata : this.createNode(metadata);\n        this.addCell(node, options);\n        return node;\n    }\n    updateNode(metadata, options = {}) {\n        const node = this.createNode(metadata);\n        const prop = node.getProp();\n        node.dispose();\n        return this.updateCell(prop, options);\n    }\n    createNode(metadata) {\n        return Node.create(metadata);\n    }\n    addEdge(metadata, options = {}) {\n        const edge = Edge.isEdge(metadata) ? metadata : this.createEdge(metadata);\n        this.addCell(edge, options);\n        return edge;\n    }\n    createEdge(metadata) {\n        return Edge.create(metadata);\n    }\n    updateEdge(metadata, options = {}) {\n        const edge = this.createEdge(metadata);\n        const prop = edge.getProp();\n        edge.dispose();\n        return this.updateCell(prop, options);\n    }\n    addCell(cell, options = {}) {\n        if (Array.isArray(cell)) {\n            return this.addCells(cell, options);\n        }\n        if (!this.collection.has(cell) && !this.addings.has(cell)) {\n            this.addings.set(cell, true);\n            this.collection.add(this.prepareCell(cell, options), options);\n            cell.eachChild((child) => this.addCell(child, options));\n            this.addings.delete(cell);\n        }\n        return this;\n    }\n    addCells(cells, options = {}) {\n        const count = cells.length;\n        if (count === 0) {\n            return this;\n        }\n        const localOptions = Object.assign(Object.assign({}, options), { position: count - 1, maxPosition: count - 1 });\n        this.startBatch('add', Object.assign(Object.assign({}, localOptions), { cells }));\n        cells.forEach((cell) => {\n            this.addCell(cell, localOptions);\n            localOptions.position -= 1;\n        });\n        this.stopBatch('add', Object.assign(Object.assign({}, localOptions), { cells }));\n        return this;\n    }\n    updateCell(prop, options = {}) {\n        const existing = prop.id && this.getCell(prop.id);\n        if (existing) {\n            return this.batchUpdate('update', () => {\n                Object.entries(prop).forEach(([key, val]) => existing.setProp(key, val, options));\n                return true;\n            }, prop);\n        }\n        return false;\n    }\n    removeCell(obj, options = {}) {\n        const cell = typeof obj === 'string' ? this.getCell(obj) : obj;\n        if (cell && this.has(cell)) {\n            return this.collection.remove(cell, options);\n        }\n        return null;\n    }\n    updateCellId(cell, newId) {\n        this.startBatch('update', { id: newId });\n        cell.prop('id', newId);\n        const newCell = cell.clone({ keepId: true });\n        this.addCell(newCell);\n        // update connected edge terminal\n        const edges = this.getConnectedEdges(cell);\n        edges.forEach((edge) => {\n            const sourceCell = edge.getSourceCell();\n            const targetCell = edge.getTargetCell();\n            if (sourceCell === cell) {\n                edge.setSource(Object.assign(Object.assign({}, edge.getSource()), { cell: newId }));\n            }\n            if (targetCell === cell) {\n                edge.setTarget(Object.assign(Object.assign({}, edge.getTarget()), { cell: newId }));\n            }\n        });\n        this.removeCell(cell);\n        this.stopBatch('update', { id: newId });\n        return newCell;\n    }\n    removeCells(cells, options = {}) {\n        if (cells.length) {\n            return this.batchUpdate('remove', () => {\n                return cells.map((cell) => this.removeCell(cell, options));\n            });\n        }\n        return [];\n    }\n    removeConnectedEdges(cell, options = {}) {\n        const edges = this.getConnectedEdges(cell);\n        edges.forEach((edge) => {\n            edge.remove(options);\n        });\n        return edges;\n    }\n    disconnectConnectedEdges(cell, options = {}) {\n        const cellId = typeof cell === 'string' ? cell : cell.id;\n        this.getConnectedEdges(cell).forEach((edge) => {\n            const sourceCellId = edge.getSourceCellId();\n            const targetCellId = edge.getTargetCellId();\n            if (sourceCellId === cellId) {\n                edge.setSource({ x: 0, y: 0 }, options);\n            }\n            if (targetCellId === cellId) {\n                edge.setTarget({ x: 0, y: 0 }, options);\n            }\n        });\n    }\n    has(obj) {\n        return this.collection.has(obj);\n    }\n    total() {\n        return this.collection.length;\n    }\n    indexOf(cell) {\n        return this.collection.indexOf(cell);\n    }\n    /**\n     * Returns a cell from the graph by its id.\n     */\n    getCell(id) {\n        return this.collection.get(id);\n    }\n    /**\n     * Returns all the nodes and edges in the graph.\n     */\n    getCells() {\n        return this.collection.toArray();\n    }\n    /**\n     * Returns the first cell (node or edge) in the graph. The first cell is\n     * defined as the cell with the lowest `zIndex`.\n     */\n    getFirstCell() {\n        return this.collection.first();\n    }\n    /**\n     * Returns the last cell (node or edge) in the graph. The last cell is\n     * defined as the cell with the highest `zIndex`.\n     */\n    getLastCell() {\n        return this.collection.last();\n    }\n    /**\n     * Returns the lowest `zIndex` value in the graph.\n     */\n    getMinZIndex() {\n        const first = this.collection.first();\n        return first ? first.getZIndex() || 0 : 0;\n    }\n    /**\n     * Returns the highest `zIndex` value in the graph.\n     */\n    getMaxZIndex() {\n        const last = this.collection.last();\n        return last ? last.getZIndex() || 0 : 0;\n    }\n    getCellsFromCache(cache) {\n        return cache\n            ? Object.keys(cache)\n                .map((id) => this.getCell(id))\n                .filter((cell) => cell != null)\n            : [];\n    }\n    /**\n     * Returns all the nodes in the graph.\n     */\n    getNodes() {\n        return this.getCellsFromCache(this.nodes);\n    }\n    /**\n     * Returns all the edges in the graph.\n     */\n    getEdges() {\n        return this.getCellsFromCache(this.edges);\n    }\n    /**\n     * Returns all outgoing edges for the node.\n     */\n    getOutgoingEdges(cell) {\n        const cellId = typeof cell === 'string' ? cell : cell.id;\n        const cellIds = this.outgoings[cellId];\n        return cellIds\n            ? cellIds\n                .map((id) => this.getCell(id))\n                .filter((cell) => cell && cell.isEdge())\n            : null;\n    }\n    /**\n     * Returns all incoming edges for the node.\n     */\n    getIncomingEdges(cell) {\n        const cellId = typeof cell === 'string' ? cell : cell.id;\n        const cellIds = this.incomings[cellId];\n        return cellIds\n            ? cellIds\n                .map((id) => this.getCell(id))\n                .filter((cell) => cell && cell.isEdge())\n            : null;\n    }\n    /**\n     * Returns edges connected with cell.\n     */\n    getConnectedEdges(cell, options = {}) {\n        const result = [];\n        const node = typeof cell === 'string' ? this.getCell(cell) : cell;\n        if (node == null) {\n            return result;\n        }\n        const cache = {};\n        const indirect = options.indirect;\n        let incoming = options.incoming;\n        let outgoing = options.outgoing;\n        if (incoming == null && outgoing == null) {\n            incoming = outgoing = true;\n        }\n        const collect = (cell, isOutgoing) => {\n            const edges = isOutgoing\n                ? this.getOutgoingEdges(cell)\n                : this.getIncomingEdges(cell);\n            if (edges != null) {\n                edges.forEach((edge) => {\n                    if (cache[edge.id]) {\n                        return;\n                    }\n                    result.push(edge);\n                    cache[edge.id] = true;\n                    if (indirect) {\n                        if (incoming) {\n                            collect(edge, false);\n                        }\n                        if (outgoing) {\n                            collect(edge, true);\n                        }\n                    }\n                });\n            }\n            if (indirect && cell.isEdge()) {\n                const terminal = isOutgoing\n                    ? cell.getTargetCell()\n                    : cell.getSourceCell();\n                if (terminal && terminal.isEdge()) {\n                    if (!cache[terminal.id]) {\n                        result.push(terminal);\n                        collect(terminal, isOutgoing);\n                    }\n                }\n            }\n        };\n        if (outgoing) {\n            collect(node, true);\n        }\n        if (incoming) {\n            collect(node, false);\n        }\n        if (options.deep) {\n            const descendants = node.getDescendants({ deep: true });\n            const embedsCache = {};\n            descendants.forEach((cell) => {\n                if (cell.isNode()) {\n                    embedsCache[cell.id] = true;\n                }\n            });\n            const collectSub = (cell, isOutgoing) => {\n                const edges = isOutgoing\n                    ? this.getOutgoingEdges(cell.id)\n                    : this.getIncomingEdges(cell.id);\n                if (edges != null) {\n                    edges.forEach((edge) => {\n                        if (!cache[edge.id]) {\n                            const sourceCell = edge.getSourceCell();\n                            const targetCell = edge.getTargetCell();\n                            if (!options.enclosed &&\n                                sourceCell &&\n                                embedsCache[sourceCell.id] &&\n                                targetCell &&\n                                embedsCache[targetCell.id]) {\n                                return;\n                            }\n                            result.push(edge);\n                            cache[edge.id] = true;\n                        }\n                    });\n                }\n            };\n            descendants.forEach((cell) => {\n                if (cell.isEdge()) {\n                    return;\n                }\n                if (outgoing) {\n                    collectSub(cell, true);\n                }\n                if (incoming) {\n                    collectSub(cell, false);\n                }\n            });\n        }\n        return result;\n    }\n    isBoundary(cell, isOrigin) {\n        const node = typeof cell === 'string' ? this.getCell(cell) : cell;\n        const arr = isOrigin\n            ? this.getIncomingEdges(node)\n            : this.getOutgoingEdges(node);\n        return arr == null || arr.length === 0;\n    }\n    getBoundaryNodes(isOrigin) {\n        const result = [];\n        Object.keys(this.nodes).forEach((nodeId) => {\n            if (this.isBoundary(nodeId, isOrigin)) {\n                const node = this.getCell(nodeId);\n                if (node) {\n                    result.push(node);\n                }\n            }\n        });\n        return result;\n    }\n    /**\n     * Returns an array of all the roots of the graph.\n     */\n    getRoots() {\n        return this.getBoundaryNodes(true);\n    }\n    /**\n     * Returns an array of all the leafs of the graph.\n     */\n    getLeafs() {\n        return this.getBoundaryNodes(false);\n    }\n    /**\n     * Returns `true` if the node is a root node, i.e. there is no edges\n     * coming to the node.\n     */\n    isRoot(cell) {\n        return this.isBoundary(cell, true);\n    }\n    /**\n     * Returns `true` if the node is a leaf node, i.e. there is no edges\n     * going out from the node.\n     */\n    isLeaf(cell) {\n        return this.isBoundary(cell, false);\n    }\n    /**\n     * Returns all the neighbors of node in the graph. Neighbors are all\n     * the nodes connected to node via either incoming or outgoing edge.\n     */\n    getNeighbors(cell, options = {}) {\n        let incoming = options.incoming;\n        let outgoing = options.outgoing;\n        if (incoming == null && outgoing == null) {\n            incoming = outgoing = true;\n        }\n        const edges = this.getConnectedEdges(cell, options);\n        const map = edges.reduce((memo, edge) => {\n            const hasLoop = edge.hasLoop(options);\n            const sourceCell = edge.getSourceCell();\n            const targetCell = edge.getTargetCell();\n            if (incoming &&\n                sourceCell &&\n                sourceCell.isNode() &&\n                !memo[sourceCell.id]) {\n                if (hasLoop ||\n                    (sourceCell !== cell &&\n                        (!options.deep || !sourceCell.isDescendantOf(cell)))) {\n                    memo[sourceCell.id] = sourceCell;\n                }\n            }\n            if (outgoing &&\n                targetCell &&\n                targetCell.isNode() &&\n                !memo[targetCell.id]) {\n                if (hasLoop ||\n                    (targetCell !== cell &&\n                        (!options.deep || !targetCell.isDescendantOf(cell)))) {\n                    memo[targetCell.id] = targetCell;\n                }\n            }\n            return memo;\n        }, {});\n        if (cell.isEdge()) {\n            if (incoming) {\n                const sourceCell = cell.getSourceCell();\n                if (sourceCell && sourceCell.isNode() && !map[sourceCell.id]) {\n                    map[sourceCell.id] = sourceCell;\n                }\n            }\n            if (outgoing) {\n                const targetCell = cell.getTargetCell();\n                if (targetCell && targetCell.isNode() && !map[targetCell.id]) {\n                    map[targetCell.id] = targetCell;\n                }\n            }\n        }\n        return Object.keys(map).map((id) => map[id]);\n    }\n    /**\n     * Returns `true` if `cell2` is a neighbor of `cell1`.\n     */\n    isNeighbor(cell1, cell2, options = {}) {\n        let incoming = options.incoming;\n        let outgoing = options.outgoing;\n        if (incoming == null && outgoing == null) {\n            incoming = outgoing = true;\n        }\n        return this.getConnectedEdges(cell1, options).some((edge) => {\n            const sourceCell = edge.getSourceCell();\n            const targetCell = edge.getTargetCell();\n            if (incoming && sourceCell && sourceCell.id === cell2.id) {\n                return true;\n            }\n            if (outgoing && targetCell && targetCell.id === cell2.id) {\n                return true;\n            }\n            return false;\n        });\n    }\n    getSuccessors(cell, options = {}) {\n        const successors = [];\n        this.search(cell, (curr, distance) => {\n            if (curr !== cell && this.matchDistance(distance, options.distance)) {\n                successors.push(curr);\n            }\n        }, Object.assign(Object.assign({}, options), { outgoing: true }));\n        return successors;\n    }\n    /**\n     * Returns `true` if `cell2` is a successor of `cell1`.\n     */\n    isSuccessor(cell1, cell2, options = {}) {\n        let result = false;\n        this.search(cell1, (curr, distance) => {\n            if (curr === cell2 &&\n                curr !== cell1 &&\n                this.matchDistance(distance, options.distance)) {\n                result = true;\n                return false;\n            }\n        }, Object.assign(Object.assign({}, options), { outgoing: true }));\n        return result;\n    }\n    getPredecessors(cell, options = {}) {\n        const predecessors = [];\n        this.search(cell, (curr, distance) => {\n            if (curr !== cell && this.matchDistance(distance, options.distance)) {\n                predecessors.push(curr);\n            }\n        }, Object.assign(Object.assign({}, options), { incoming: true }));\n        return predecessors;\n    }\n    /**\n     * Returns `true` if `cell2` is a predecessor of `cell1`.\n     */\n    isPredecessor(cell1, cell2, options = {}) {\n        let result = false;\n        this.search(cell1, (curr, distance) => {\n            if (curr === cell2 &&\n                curr !== cell1 &&\n                this.matchDistance(distance, options.distance)) {\n                result = true;\n                return false;\n            }\n        }, Object.assign(Object.assign({}, options), { incoming: true }));\n        return result;\n    }\n    matchDistance(distance, preset) {\n        if (preset == null) {\n            return true;\n        }\n        if (typeof preset === 'function') {\n            return preset(distance);\n        }\n        if (Array.isArray(preset) && preset.includes(distance)) {\n            return true;\n        }\n        return distance === preset;\n    }\n    /**\n     * Returns the common ancestor of the passed cells.\n     */\n    getCommonAncestor(...cells) {\n        const arr = [];\n        cells.forEach((item) => {\n            if (item) {\n                if (Array.isArray(item)) {\n                    arr.push(...item);\n                }\n                else {\n                    arr.push(item);\n                }\n            }\n        });\n        return Cell.getCommonAncestor(...arr);\n    }\n    /**\n     * Returns an array of cells that result from finding nodes/edges that\n     * are connected to any of the cells in the cells array. This function\n     * loops over cells and if the current cell is a edge, it collects its\n     * source/target nodes; if it is an node, it collects its incoming and\n     * outgoing edges if both the edge terminal (source/target) are in the\n     * cells array.\n     */\n    getSubGraph(cells, options = {}) {\n        const subgraph = [];\n        const cache = {};\n        const nodes = [];\n        const edges = [];\n        const collect = (cell) => {\n            if (!cache[cell.id]) {\n                subgraph.push(cell);\n                cache[cell.id] = cell;\n                if (cell.isEdge()) {\n                    edges.push(cell);\n                }\n                if (cell.isNode()) {\n                    nodes.push(cell);\n                }\n            }\n        };\n        cells.forEach((cell) => {\n            collect(cell);\n            if (options.deep) {\n                const descendants = cell.getDescendants({ deep: true });\n                descendants.forEach((descendant) => collect(descendant));\n            }\n        });\n        edges.forEach((edge) => {\n            // For edges, include their source & target\n            const sourceCell = edge.getSourceCell();\n            const targetCell = edge.getTargetCell();\n            if (sourceCell && !cache[sourceCell.id]) {\n                subgraph.push(sourceCell);\n                cache[sourceCell.id] = sourceCell;\n                if (sourceCell.isNode()) {\n                    nodes.push(sourceCell);\n                }\n            }\n            if (targetCell && !cache[targetCell.id]) {\n                subgraph.push(targetCell);\n                cache[targetCell.id] = targetCell;\n                if (targetCell.isNode()) {\n                    nodes.push(targetCell);\n                }\n            }\n        });\n        nodes.forEach((node) => {\n            // For nodes, include their connected edges if their source/target\n            // is in the subgraph.\n            const edges = this.getConnectedEdges(node, options);\n            edges.forEach((edge) => {\n                const sourceCell = edge.getSourceCell();\n                const targetCell = edge.getTargetCell();\n                if (!cache[edge.id] &&\n                    sourceCell &&\n                    cache[sourceCell.id] &&\n                    targetCell &&\n                    cache[targetCell.id]) {\n                    subgraph.push(edge);\n                    cache[edge.id] = edge;\n                }\n            });\n        });\n        return subgraph;\n    }\n    /**\n     * Clones the whole subgraph (including all the connected links whose\n     * source/target is in the subgraph). If `options.deep` is `true`, also\n     * take into account all the embedded cells of all the subgraph cells.\n     *\n     * Returns a map of the form: { [original cell ID]: [clone] }.\n     */\n    cloneSubGraph(cells, options = {}) {\n        const subgraph = this.getSubGraph(cells, options);\n        return this.cloneCells(subgraph);\n    }\n    cloneCells(cells) {\n        return Cell.cloneCells(cells);\n    }\n    getNodesFromPoint(x, y) {\n        const p = typeof x === 'number' ? { x, y: y || 0 } : x;\n        return this.getNodes().filter((node) => {\n            return node.getBBox().containsPoint(p);\n        });\n    }\n    getNodesInArea(x, y, w, h, options) {\n        const rect = typeof x === 'number'\n            ? new Rectangle(x, y, w, h)\n            : Rectangle.create(x);\n        const opts = typeof x === 'number' ? options : y;\n        const strict = opts && opts.strict;\n        return this.getNodes().filter((node) => {\n            const bbox = node.getBBox();\n            return strict ? rect.containsRect(bbox) : rect.isIntersectWithRect(bbox);\n        });\n    }\n    getEdgesInArea(x, y, w, h, options) {\n        const rect = typeof x === 'number'\n            ? new Rectangle(x, y, w, h)\n            : Rectangle.create(x);\n        const opts = typeof x === 'number' ? options : y;\n        const strict = opts && opts.strict;\n        return this.getEdges().filter((edge) => {\n            const bbox = edge.getBBox();\n            if (bbox.width === 0) {\n                bbox.inflate(1, 0);\n            }\n            else if (bbox.height === 0) {\n                bbox.inflate(0, 1);\n            }\n            return strict ? rect.containsRect(bbox) : rect.isIntersectWithRect(bbox);\n        });\n    }\n    getNodesUnderNode(node, options = {}) {\n        const bbox = node.getBBox();\n        const nodes = options.by == null || options.by === 'bbox'\n            ? this.getNodesInArea(bbox)\n            : this.getNodesFromPoint(bbox[options.by]);\n        return nodes.filter((curr) => node.id !== curr.id && !curr.isDescendantOf(node));\n    }\n    /**\n     * Returns the bounding box that surrounds all cells in the graph.\n     */\n    getAllCellsBBox() {\n        return this.getCellsBBox(this.getCells());\n    }\n    /**\n     * Returns the bounding box that surrounds all the given cells.\n     */\n    getCellsBBox(cells, options = {}) {\n        return Cell.getCellsBBox(cells, options);\n    }\n    // #region search\n    search(cell, iterator, options = {}) {\n        if (options.breadthFirst) {\n            this.breadthFirstSearch(cell, iterator, options);\n        }\n        else {\n            this.depthFirstSearch(cell, iterator, options);\n        }\n    }\n    breadthFirstSearch(cell, iterator, options = {}) {\n        const queue = [];\n        const visited = {};\n        const distance = {};\n        queue.push(cell);\n        distance[cell.id] = 0;\n        while (queue.length > 0) {\n            const next = queue.shift();\n            if (next == null || visited[next.id]) {\n                continue;\n            }\n            visited[next.id] = true;\n            if (FunctionExt.call(iterator, this, next, distance[next.id]) === false) {\n                continue;\n            }\n            const neighbors = this.getNeighbors(next, options);\n            neighbors.forEach((neighbor) => {\n                distance[neighbor.id] = distance[next.id] + 1;\n                queue.push(neighbor);\n            });\n        }\n    }\n    depthFirstSearch(cell, iterator, options = {}) {\n        const queue = [];\n        const visited = {};\n        const distance = {};\n        queue.push(cell);\n        distance[cell.id] = 0;\n        while (queue.length > 0) {\n            const next = queue.pop();\n            if (next == null || visited[next.id]) {\n                continue;\n            }\n            visited[next.id] = true;\n            if (FunctionExt.call(iterator, this, next, distance[next.id]) === false) {\n                continue;\n            }\n            const neighbors = this.getNeighbors(next, options);\n            const lastIndex = queue.length;\n            neighbors.forEach((neighbor) => {\n                distance[neighbor.id] = distance[next.id] + 1;\n                queue.splice(lastIndex, 0, neighbor);\n            });\n        }\n    }\n    // #endregion\n    // #region shortest path\n    /** *\n     * Returns an array of IDs of nodes on the shortest\n     * path between source and target.\n     */\n    getShortestPath(source, target, options = {}) {\n        const adjacencyList = {};\n        this.getEdges().forEach((edge) => {\n            const sourceId = edge.getSourceCellId();\n            const targetId = edge.getTargetCellId();\n            if (sourceId && targetId) {\n                if (!adjacencyList[sourceId]) {\n                    adjacencyList[sourceId] = [];\n                }\n                if (!adjacencyList[targetId]) {\n                    adjacencyList[targetId] = [];\n                }\n                adjacencyList[sourceId].push(targetId);\n                if (!options.directed) {\n                    adjacencyList[targetId].push(sourceId);\n                }\n            }\n        });\n        const sourceId = typeof source === 'string' ? source : source.id;\n        const previous = Dijkstra.run(adjacencyList, sourceId, options.weight);\n        const path = [];\n        let targetId = typeof target === 'string' ? target : target.id;\n        if (previous[targetId]) {\n            path.push(targetId);\n        }\n        while ((targetId = previous[targetId])) {\n            path.unshift(targetId);\n        }\n        return path;\n    }\n    // #endregion\n    // #region transform\n    /**\n     * Translate all cells in the graph by `tx` and `ty` pixels.\n     */\n    translate(tx, ty, options) {\n        this.getCells()\n            .filter((cell) => !cell.hasParent())\n            .forEach((cell) => cell.translate(tx, ty, options));\n        return this;\n    }\n    resize(width, height, options) {\n        return this.resizeCells(width, height, this.getCells(), options);\n    }\n    resizeCells(width, height, cells, options = {}) {\n        const bbox = this.getCellsBBox(cells);\n        if (bbox) {\n            const sx = Math.max(width / bbox.width, 0);\n            const sy = Math.max(height / bbox.height, 0);\n            const origin = bbox.getOrigin();\n            cells.forEach((cell) => cell.scale(sx, sy, origin, options));\n        }\n        return this;\n    }\n    // #endregion\n    // #region serialize/deserialize\n    toJSON(options = {}) {\n        return Model.toJSON(this.getCells(), options);\n    }\n    parseJSON(data) {\n        return Model.fromJSON(data);\n    }\n    fromJSON(data, options = {}) {\n        const cells = this.parseJSON(data);\n        this.resetCells(cells, options);\n        return this;\n    }\n    // #endregion\n    // #region batch\n    startBatch(name, data = {}) {\n        this.batches[name] = (this.batches[name] || 0) + 1;\n        this.notify('batch:start', { name, data });\n        return this;\n    }\n    stopBatch(name, data = {}) {\n        this.batches[name] = (this.batches[name] || 0) - 1;\n        this.notify('batch:stop', { name, data });\n        return this;\n    }\n    batchUpdate(name, execute, data = {}) {\n        this.startBatch(name, data);\n        const result = execute();\n        this.stopBatch(name, data);\n        return result;\n    }\n    hasActiveBatch(name = Object.keys(this.batches)) {\n        const names = Array.isArray(name) ? name : [name];\n        return names.some((batch) => this.batches[batch] > 0);\n    }\n}\n(function (Model) {\n    Model.toStringTag = `X6.${Model.name}`;\n    function isModel(instance) {\n        if (instance == null) {\n            return false;\n        }\n        if (instance instanceof Model) {\n            return true;\n        }\n        const tag = instance[Symbol.toStringTag];\n        const model = instance;\n        if ((tag == null || tag === Model.toStringTag) &&\n            typeof model.addNode === 'function' &&\n            typeof model.addEdge === 'function' &&\n            model.collection != null) {\n            return true;\n        }\n        return false;\n    }\n    Model.isModel = isModel;\n})(Model || (Model = {}));\n(function (Model) {\n    function toJSON(cells, options = {}) {\n        return {\n            cells: cells.map((cell) => cell.toJSON(options)),\n        };\n    }\n    Model.toJSON = toJSON;\n    function fromJSON(data) {\n        const cells = [];\n        if (Array.isArray(data)) {\n            cells.push(...data);\n        }\n        else {\n            if (data.cells) {\n                cells.push(...data.cells);\n            }\n            if (data.nodes) {\n                data.nodes.forEach((node) => {\n                    if (node.shape == null) {\n                        node.shape = 'rect';\n                    }\n                    cells.push(node);\n                });\n            }\n            if (data.edges) {\n                data.edges.forEach((edge) => {\n                    if (edge.shape == null) {\n                        edge.shape = 'edge';\n                    }\n                    cells.push(edge);\n                });\n            }\n        }\n        return cells.map((cell) => {\n            const type = cell.shape;\n            if (type) {\n                if (Node.registry.exist(type)) {\n                    return Node.create(cell);\n                }\n                if (Edge.registry.exist(type)) {\n                    return Edge.create(cell);\n                }\n            }\n            throw new Error('The `shape` should be specified when creating a node/edge instance');\n        });\n    }\n    Model.fromJSON = fromJSON;\n})(Model || (Model = {}));\n//# sourceMappingURL=model.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { ObjectExt } from '@antv/x6-common';\nimport { Node } from '../model';\nexport class Base extends Node {\n    get label() {\n        return this.getLabel();\n    }\n    set label(val) {\n        this.setLabel(val);\n    }\n    getLabel() {\n        return this.getAttrByPath('text/text');\n    }\n    setLabel(label, options) {\n        if (label == null) {\n            this.removeLabel();\n        }\n        else {\n            this.setAttrByPath('text/text', label, options);\n        }\n        return this;\n    }\n    removeLabel() {\n        this.removeAttrByPath('text/text');\n        return this;\n    }\n}\n(function (Base) {\n    Base.bodyAttr = {\n        fill: '#ffffff',\n        stroke: '#333333',\n        strokeWidth: 2,\n    };\n    Base.labelAttr = {\n        fontSize: 14,\n        fill: '#000000',\n        refX: 0.5,\n        refY: 0.5,\n        textAnchor: 'middle',\n        textVerticalAnchor: 'middle',\n        fontFamily: 'Arial, helvetica, sans-serif',\n    };\n    Base.config({\n        attrs: { text: Object.assign({}, Base.labelAttr) },\n        propHooks(metadata) {\n            const { label } = metadata, others = __rest(metadata, [\"label\"]);\n            if (label) {\n                ObjectExt.setByPath(others, 'attrs/text/text', label);\n            }\n            return others;\n        },\n        visible: true,\n    });\n})(Base || (Base = {}));\n//# sourceMappingURL=base.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { ObjectExt } from '@antv/x6-common';\nimport { Base } from './base';\nexport function getMarkup(tagName, selector = 'body') {\n    return [\n        {\n            tagName,\n            selector,\n        },\n        {\n            tagName: 'text',\n            selector: 'label',\n        },\n    ];\n}\nexport function getImageUrlHook(attrName = 'xlink:href') {\n    const hook = (metadata) => {\n        const { imageUrl, imageWidth, imageHeight } = metadata, others = __rest(metadata, [\"imageUrl\", \"imageWidth\", \"imageHeight\"]);\n        if (imageUrl != null || imageWidth != null || imageHeight != null) {\n            const apply = () => {\n                if (others.attrs) {\n                    const image = others.attrs.image;\n                    if (imageUrl != null) {\n                        image[attrName] = imageUrl;\n                    }\n                    if (imageWidth != null) {\n                        image.width = imageWidth;\n                    }\n                    if (imageHeight != null) {\n                        image.height = imageHeight;\n                    }\n                    others.attrs.image = image;\n                }\n            };\n            if (others.attrs) {\n                if (others.attrs.image == null) {\n                    others.attrs.image = {};\n                }\n                apply();\n            }\n            else {\n                others.attrs = {\n                    image: {},\n                };\n                apply();\n            }\n        }\n        return others;\n    };\n    return hook;\n}\nexport function createShape(shape, config, options = {}) {\n    const defaults = {\n        constructorName: shape,\n        markup: getMarkup(shape, options.selector),\n        attrs: {\n            [shape]: Object.assign({}, Base.bodyAttr),\n        },\n    };\n    const base = options.parent || Base;\n    return base.define(ObjectExt.merge(defaults, config, { shape }));\n}\n//# sourceMappingURL=util.js.map","import { createShape } from './util';\nexport const Rect = createShape('rect', {\n    attrs: {\n        body: {\n            refWidth: '100%',\n            refHeight: '100%',\n        },\n    },\n});\n//# sourceMappingURL=rect.js.map","import { Edge as EdgeBase } from '../model/edge';\nexport const Edge = EdgeBase.define({\n    shape: 'edge',\n    markup: [\n        {\n            tagName: 'path',\n            selector: 'wrap',\n            groupSelector: 'lines',\n            attrs: {\n                fill: 'none',\n                cursor: 'pointer',\n                stroke: 'transparent',\n                strokeLinecap: 'round',\n            },\n        },\n        {\n            tagName: 'path',\n            selector: 'line',\n            groupSelector: 'lines',\n            attrs: {\n                fill: 'none',\n                pointerEvents: 'none',\n            },\n        },\n    ],\n    attrs: {\n        lines: {\n            connection: true,\n            strokeLinejoin: 'round',\n        },\n        wrap: {\n            strokeWidth: 10,\n        },\n        line: {\n            stroke: '#333',\n            strokeWidth: 2,\n            targetMarker: 'classic',\n        },\n    },\n});\n//# sourceMappingURL=edge.js.map","import { createShape } from './util';\nexport const Ellipse = createShape('ellipse', {\n    attrs: {\n        body: {\n            refCx: '50%',\n            refCy: '50%',\n            refRx: '50%',\n            refRy: '50%',\n        },\n    },\n});\n//# sourceMappingURL=ellipse.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Point } from '@antv/x6-geometry';\nimport { ObjectExt } from '@antv/x6-common';\nimport { Base } from './base';\nexport class Poly extends Base {\n    get points() {\n        return this.getPoints();\n    }\n    set points(pts) {\n        this.setPoints(pts);\n    }\n    getPoints() {\n        return this.getAttrByPath('body/refPoints');\n    }\n    setPoints(points, options) {\n        if (points == null) {\n            this.removePoints();\n        }\n        else {\n            this.setAttrByPath('body/refPoints', Poly.pointsToString(points), options);\n        }\n        return this;\n    }\n    removePoints() {\n        this.removeAttrByPath('body/refPoints');\n        return this;\n    }\n}\n(function (Poly) {\n    function pointsToString(points) {\n        return typeof points === 'string'\n            ? points\n            : points\n                .map((p) => {\n                if (Array.isArray(p)) {\n                    return p.join(',');\n                }\n                if (Point.isPointLike(p)) {\n                    return `${p.x}, ${p.y}`;\n                }\n                return '';\n            })\n                .join(' ');\n    }\n    Poly.pointsToString = pointsToString;\n    Poly.config({\n        propHooks(metadata) {\n            const { points } = metadata, others = __rest(metadata, [\"points\"]);\n            if (points) {\n                const data = pointsToString(points);\n                if (data) {\n                    ObjectExt.setByPath(others, 'attrs/body/refPoints', data);\n                }\n            }\n            return others;\n        },\n    });\n})(Poly || (Poly = {}));\n//# sourceMappingURL=poly.js.map","import { Poly } from './poly';\nimport { createShape } from './util';\nexport const Polygon = createShape('polygon', {}, { parent: Poly });\n//# sourceMappingURL=polygon.js.map","import { Poly } from './poly';\nimport { createShape } from './util';\nexport const Polyline = createShape('polyline', {}, { parent: Poly });\n//# sourceMappingURL=polyline.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { ObjectExt } from '@antv/x6-common';\nimport { Base } from './base';\nexport const Path = Base.define({\n    shape: 'path',\n    markup: [\n        {\n            tagName: 'rect',\n            selector: 'bg',\n        },\n        {\n            tagName: 'path',\n            selector: 'body',\n        },\n        {\n            tagName: 'text',\n            selector: 'label',\n        },\n    ],\n    attrs: {\n        bg: {\n            refWidth: '100%',\n            refHeight: '100%',\n            fill: 'none',\n            stroke: 'none',\n            pointerEvents: 'all',\n        },\n        body: {\n            fill: 'none',\n            stroke: '#000',\n            strokeWidth: 2,\n        },\n    },\n    propHooks(metadata) {\n        const { path } = metadata, others = __rest(metadata, [\"path\"]);\n        if (path) {\n            ObjectExt.setByPath(others, 'attrs/body/refD', path);\n        }\n        return others;\n    },\n});\n//# sourceMappingURL=path.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Platform, Dom, FunctionExt, ObjectExt } from '@antv/x6-common';\nimport { Attr } from '../registry';\nimport { Base } from './base';\nexport const TextBlock = Base.define({\n    shape: 'text-block',\n    markup: [\n        {\n            tagName: 'rect',\n            selector: 'body',\n        },\n        Platform.SUPPORT_FOREIGNOBJECT\n            ? {\n                tagName: 'foreignObject',\n                selector: 'foreignObject',\n                children: [\n                    {\n                        tagName: 'div',\n                        ns: Dom.ns.xhtml,\n                        selector: 'label',\n                        style: {\n                            width: '100%',\n                            height: '100%',\n                            position: 'static',\n                            backgroundColor: 'transparent',\n                            textAlign: 'center',\n                            margin: 0,\n                            padding: '0px 5px',\n                            boxSizing: 'border-box',\n                            display: 'flex',\n                            alignItems: 'center',\n                            justifyContent: 'center',\n                        },\n                    },\n                ],\n            }\n            : {\n                tagName: 'text',\n                selector: 'label',\n                attrs: {\n                    textAnchor: 'middle',\n                },\n            },\n    ],\n    attrs: {\n        body: Object.assign(Object.assign({}, Base.bodyAttr), { refWidth: '100%', refHeight: '100%' }),\n        foreignObject: {\n            refWidth: '100%',\n            refHeight: '100%',\n        },\n        label: {\n            style: {\n                fontSize: 14,\n            },\n        },\n    },\n    propHooks(metadata) {\n        const { text } = metadata, others = __rest(metadata, [\"text\"]);\n        if (text) {\n            ObjectExt.setByPath(others, 'attrs/label/text', text);\n        }\n        return others;\n    },\n    attrHooks: {\n        text: {\n            set(text, { cell, view, refBBox, elem, attrs }) {\n                if (elem instanceof HTMLElement) {\n                    elem.textContent = text;\n                }\n                else {\n                    // No foreign object\n                    const style = attrs.style || {};\n                    const wrapValue = { text, width: -5, height: '100%' };\n                    const wrapAttrs = Object.assign({ textVerticalAnchor: 'middle' }, style);\n                    const textWrap = Attr.presets.textWrap;\n                    FunctionExt.call(textWrap.set, this, wrapValue, {\n                        cell,\n                        view,\n                        elem,\n                        refBBox,\n                        attrs: wrapAttrs,\n                    });\n                    return { fill: style.color || null };\n                }\n            },\n            position(text, { refBBox, elem }) {\n                if (elem instanceof SVGElement) {\n                    return refBBox.getCenter();\n                }\n            },\n        },\n    },\n});\n//# sourceMappingURL=text-block.js.map","import { getImageUrlHook, createShape } from './util';\nexport const Image = createShape('image', {\n    attrs: {\n        image: {\n            refWidth: '100%',\n            refHeight: '100%',\n        },\n    },\n    propHooks: getImageUrlHook(),\n}, {\n    selector: 'image',\n});\n//# sourceMappingURL=image.js.map","import { createShape } from './util';\nexport const Circle = createShape('circle', {\n    attrs: {\n        body: {\n            refCx: '50%',\n            refCy: '50%',\n            refR: '50%',\n        },\n    },\n});\n//# sourceMappingURL=circle.js.map","import { ArrayExt, FunctionExt, Dom } from '@antv/x6-common';\nimport { Rectangle, Point, GeometryUtil } from '@antv/x6-geometry';\nimport { Config } from '../config';\nimport { Cell } from '../model/cell';\nimport { CellView } from './cell';\nimport { Markup } from './markup';\nexport class NodeView extends CellView {\n    constructor() {\n        super(...arguments);\n        this.portsCache = {};\n        // #endregion\n    }\n    get [Symbol.toStringTag]() {\n        return NodeView.toStringTag;\n    }\n    getContainerClassName() {\n        const classList = [\n            super.getContainerClassName(),\n            this.prefixClassName('node'),\n        ];\n        if (!this.can('nodeMovable')) {\n            classList.push(this.prefixClassName('node-immovable'));\n        }\n        return classList.join(' ');\n    }\n    updateClassName(e) {\n        const target = e.target;\n        if (target.hasAttribute('magnet')) {\n            // port\n            const className = this.prefixClassName('port-unconnectable');\n            if (this.can('magnetConnectable')) {\n                Dom.removeClass(target, className);\n            }\n            else {\n                Dom.addClass(target, className);\n            }\n        }\n        else {\n            // node\n            const className = this.prefixClassName('node-immovable');\n            if (this.can('nodeMovable')) {\n                this.removeClass(className);\n            }\n            else {\n                this.addClass(className);\n            }\n        }\n    }\n    isNodeView() {\n        return true;\n    }\n    confirmUpdate(flag, options = {}) {\n        let ret = flag;\n        if (this.hasAction(ret, 'ports')) {\n            this.removePorts();\n            this.cleanPortsCache();\n        }\n        if (this.hasAction(ret, 'render')) {\n            this.render();\n            ret = this.removeAction(ret, [\n                'render',\n                'update',\n                'resize',\n                'translate',\n                'rotate',\n                'ports',\n                'tools',\n            ]);\n        }\n        else {\n            ret = this.handleAction(ret, 'resize', () => this.resize(), 'update');\n            ret = this.handleAction(ret, 'update', () => this.update(), \n            // `update()` will render ports when useCSSSelectors are enabled\n            Config.useCSSSelector ? 'ports' : null);\n            ret = this.handleAction(ret, 'translate', () => this.translate());\n            ret = this.handleAction(ret, 'rotate', () => this.rotate());\n            ret = this.handleAction(ret, 'ports', () => this.renderPorts());\n            ret = this.handleAction(ret, 'tools', () => {\n                if (this.getFlag('tools') === flag) {\n                    this.renderTools();\n                }\n                else {\n                    this.updateTools(options);\n                }\n            });\n        }\n        return ret;\n    }\n    update(partialAttrs) {\n        this.cleanCache();\n        // When CSS selector strings are used, make sure no rule matches port nodes.\n        if (Config.useCSSSelector) {\n            this.removePorts();\n        }\n        const node = this.cell;\n        const size = node.getSize();\n        const attrs = node.getAttrs();\n        this.updateAttrs(this.container, attrs, {\n            attrs: partialAttrs === attrs ? null : partialAttrs,\n            rootBBox: new Rectangle(0, 0, size.width, size.height),\n            selectors: this.selectors,\n        });\n        if (Config.useCSSSelector) {\n            this.renderPorts();\n        }\n    }\n    renderMarkup() {\n        const markup = this.cell.markup;\n        if (markup) {\n            if (typeof markup === 'string') {\n                throw new TypeError('Not support string markup.');\n            }\n            return this.renderJSONMarkup(markup);\n        }\n        throw new TypeError('Invalid node markup.');\n    }\n    renderJSONMarkup(markup) {\n        const ret = this.parseJSONMarkup(markup, this.container);\n        this.selectors = ret.selectors;\n        this.container.appendChild(ret.fragment);\n    }\n    render() {\n        this.empty();\n        this.renderMarkup();\n        this.resize();\n        this.updateTransform();\n        if (!Config.useCSSSelector) {\n            this.renderPorts();\n        }\n        this.renderTools();\n        return this;\n    }\n    resize() {\n        if (this.cell.getAngle()) {\n            this.rotate();\n        }\n        this.update();\n    }\n    translate() {\n        this.updateTransform();\n    }\n    rotate() {\n        this.updateTransform();\n    }\n    getTranslationString() {\n        const position = this.cell.getPosition();\n        return `translate(${position.x},${position.y})`;\n    }\n    getRotationString() {\n        const angle = this.cell.getAngle();\n        if (angle) {\n            const size = this.cell.getSize();\n            return `rotate(${angle},${size.width / 2},${size.height / 2})`;\n        }\n    }\n    updateTransform() {\n        let transform = this.getTranslationString();\n        const rot = this.getRotationString();\n        if (rot) {\n            transform += ` ${rot}`;\n        }\n        this.container.setAttribute('transform', transform);\n    }\n    // #region ports\n    findPortElem(portId, selector) {\n        const cache = portId ? this.portsCache[portId] : null;\n        if (!cache) {\n            return null;\n        }\n        const portRoot = cache.portContentElement;\n        const portSelectors = cache.portContentSelectors || {};\n        return this.findOne(selector, portRoot, portSelectors);\n    }\n    cleanPortsCache() {\n        this.portsCache = {};\n    }\n    removePorts() {\n        Object.values(this.portsCache).forEach((cached) => {\n            Dom.remove(cached.portElement);\n        });\n    }\n    renderPorts() {\n        const container = this.container;\n        // References to rendered elements without z-index\n        const references = [];\n        container.childNodes.forEach((child) => {\n            references.push(child);\n        });\n        const parsedPorts = this.cell.getParsedPorts();\n        const portsGropsByZ = ArrayExt.groupBy(parsedPorts, 'zIndex');\n        const autoZIndexKey = 'auto';\n        // render non-z first\n        if (portsGropsByZ[autoZIndexKey]) {\n            portsGropsByZ[autoZIndexKey].forEach((port) => {\n                const portElement = this.getPortElement(port);\n                container.append(portElement);\n                references.push(portElement);\n            });\n        }\n        Object.keys(portsGropsByZ).forEach((key) => {\n            if (key !== autoZIndexKey) {\n                const zIndex = parseInt(key, 10);\n                this.appendPorts(portsGropsByZ[key], zIndex, references);\n            }\n        });\n        this.updatePorts();\n    }\n    appendPorts(ports, zIndex, refs) {\n        const elems = ports.map((p) => this.getPortElement(p));\n        if (refs[zIndex] || zIndex < 0) {\n            Dom.before(refs[Math.max(zIndex, 0)], elems);\n        }\n        else {\n            Dom.append(this.container, elems);\n        }\n    }\n    getPortElement(port) {\n        const cached = this.portsCache[port.id];\n        if (cached) {\n            return cached.portElement;\n        }\n        return this.createPortElement(port);\n    }\n    createPortElement(port) {\n        let renderResult = Markup.renderMarkup(this.cell.getPortContainerMarkup());\n        const portElement = renderResult.elem;\n        if (portElement == null) {\n            throw new Error('Invalid port container markup.');\n        }\n        renderResult = Markup.renderMarkup(this.getPortMarkup(port));\n        const portContentElement = renderResult.elem;\n        const portContentSelectors = renderResult.selectors;\n        if (portContentElement == null) {\n            throw new Error('Invalid port markup.');\n        }\n        this.setAttrs({\n            port: port.id,\n            'port-group': port.group,\n        }, portContentElement);\n        let portClass = 'x6-port';\n        if (port.group) {\n            portClass += ` x6-port-${port.group}`;\n        }\n        Dom.addClass(portElement, portClass);\n        Dom.addClass(portElement, 'x6-port');\n        Dom.addClass(portContentElement, 'x6-port-body');\n        portElement.appendChild(portContentElement);\n        let portSelectors = portContentSelectors;\n        let portLabelElement;\n        let portLabelSelectors;\n        const existLabel = this.existPortLabel(port);\n        if (existLabel) {\n            renderResult = Markup.renderMarkup(this.getPortLabelMarkup(port.label));\n            portLabelElement = renderResult.elem;\n            portLabelSelectors = renderResult.selectors;\n            if (portLabelElement == null) {\n                throw new Error('Invalid port label markup.');\n            }\n            if (portContentSelectors && portLabelSelectors) {\n                // eslint-disable-next-line\n                for (const key in portLabelSelectors) {\n                    if (portContentSelectors[key] && key !== this.rootSelector) {\n                        throw new Error('Selectors within port must be unique.');\n                    }\n                }\n                portSelectors = Object.assign(Object.assign({}, portContentSelectors), portLabelSelectors);\n            }\n            Dom.addClass(portLabelElement, 'x6-port-label');\n            portElement.appendChild(portLabelElement);\n        }\n        this.portsCache[port.id] = {\n            portElement,\n            portSelectors,\n            portLabelElement,\n            portLabelSelectors,\n            portContentElement,\n            portContentSelectors,\n        };\n        if (this.graph.options.onPortRendered) {\n            this.graph.options.onPortRendered({\n                port,\n                node: this.cell,\n                container: portElement,\n                selectors: portSelectors,\n                labelContainer: portLabelElement,\n                labelSelectors: portLabelSelectors,\n                contentContainer: portContentElement,\n                contentSelectors: portContentSelectors,\n            });\n        }\n        return portElement;\n    }\n    updatePorts() {\n        const groups = this.cell.getParsedGroups();\n        const groupList = Object.keys(groups);\n        if (groupList.length === 0) {\n            this.updatePortGroup();\n        }\n        else {\n            groupList.forEach((groupName) => this.updatePortGroup(groupName));\n        }\n    }\n    updatePortGroup(groupName) {\n        const bbox = Rectangle.fromSize(this.cell.getSize());\n        const metrics = this.cell.getPortsLayoutByGroup(groupName, bbox);\n        for (let i = 0, n = metrics.length; i < n; i += 1) {\n            const metric = metrics[i];\n            const portId = metric.portId;\n            const cached = this.portsCache[portId] || {};\n            const portLayout = metric.portLayout;\n            this.applyPortTransform(cached.portElement, portLayout);\n            if (metric.portAttrs != null) {\n                const options = {\n                    selectors: cached.portSelectors || {},\n                };\n                if (metric.portSize) {\n                    options.rootBBox = Rectangle.fromSize(metric.portSize);\n                }\n                this.updateAttrs(cached.portElement, metric.portAttrs, options);\n            }\n            const labelLayout = metric.labelLayout;\n            if (labelLayout && cached.portLabelElement) {\n                this.applyPortTransform(cached.portLabelElement, labelLayout, -(portLayout.angle || 0));\n                if (labelLayout.attrs) {\n                    const options = {\n                        selectors: cached.portLabelSelectors || {},\n                    };\n                    if (metric.labelSize) {\n                        options.rootBBox = Rectangle.fromSize(metric.labelSize);\n                    }\n                    this.updateAttrs(cached.portLabelElement, labelLayout.attrs, options);\n                }\n            }\n        }\n    }\n    applyPortTransform(element, layout, initialAngle = 0) {\n        const angle = layout.angle;\n        const position = layout.position;\n        const matrix = Dom.createSVGMatrix()\n            .rotate(initialAngle)\n            .translate(position.x || 0, position.y || 0)\n            .rotate(angle || 0);\n        Dom.transform(element, matrix, { absolute: true });\n    }\n    getPortMarkup(port) {\n        return port.markup || this.cell.portMarkup;\n    }\n    getPortLabelMarkup(label) {\n        return label.markup || this.cell.portLabelMarkup;\n    }\n    existPortLabel(port) {\n        return port.attrs && port.attrs.text;\n    }\n    getEventArgs(e, x, y) {\n        const view = this; // eslint-disable-line\n        const node = view.cell;\n        const cell = node;\n        if (x == null || y == null) {\n            return { e, view, node, cell };\n        }\n        return { e, x, y, view, node, cell };\n    }\n    getPortEventArgs(e, port, pos) {\n        const view = this; // eslint-disable-line\n        const node = view.cell;\n        const cell = node;\n        if (pos) {\n            return {\n                e,\n                x: pos.x,\n                y: pos.y,\n                view,\n                node,\n                cell,\n                port,\n            };\n        }\n        return { e, view, node, cell, port };\n    }\n    notifyMouseDown(e, x, y) {\n        super.onMouseDown(e, x, y);\n        this.notify('node:mousedown', this.getEventArgs(e, x, y));\n    }\n    notifyMouseMove(e, x, y) {\n        super.onMouseMove(e, x, y);\n        this.notify('node:mousemove', this.getEventArgs(e, x, y));\n    }\n    notifyMouseUp(e, x, y) {\n        super.onMouseUp(e, x, y);\n        this.notify('node:mouseup', this.getEventArgs(e, x, y));\n    }\n    notifyPortEvent(name, e, pos) {\n        const port = this.findAttr('port', e.target);\n        if (port) {\n            const originType = e.type;\n            if (name === 'node:port:mouseenter') {\n                e.type = 'mouseenter';\n            }\n            else if (name === 'node:port:mouseleave') {\n                e.type = 'mouseleave';\n            }\n            this.notify(name, this.getPortEventArgs(e, port, pos));\n            e.type = originType;\n        }\n    }\n    onClick(e, x, y) {\n        super.onClick(e, x, y);\n        this.notify('node:click', this.getEventArgs(e, x, y));\n        this.notifyPortEvent('node:port:click', e, { x, y });\n    }\n    onDblClick(e, x, y) {\n        super.onDblClick(e, x, y);\n        this.notify('node:dblclick', this.getEventArgs(e, x, y));\n        this.notifyPortEvent('node:port:dblclick', e, { x, y });\n    }\n    onContextMenu(e, x, y) {\n        super.onContextMenu(e, x, y);\n        this.notify('node:contextmenu', this.getEventArgs(e, x, y));\n        this.notifyPortEvent('node:port:contextmenu', e, { x, y });\n    }\n    onMouseDown(e, x, y) {\n        if (this.isPropagationStopped(e)) {\n            return;\n        }\n        this.notifyMouseDown(e, x, y);\n        this.notifyPortEvent('node:port:mousedown', e, { x, y });\n        this.startNodeDragging(e, x, y);\n    }\n    onMouseMove(e, x, y) {\n        const data = this.getEventData(e);\n        const action = data.action;\n        if (action === 'magnet') {\n            this.dragMagnet(e, x, y);\n        }\n        else {\n            if (action === 'move') {\n                const meta = data;\n                const view = meta.targetView || this;\n                view.dragNode(e, x, y);\n                view.notify('node:moving', {\n                    e,\n                    x,\n                    y,\n                    view,\n                    cell: view.cell,\n                    node: view.cell,\n                });\n            }\n            this.notifyMouseMove(e, x, y);\n            this.notifyPortEvent('node:port:mousemove', e, { x, y });\n        }\n        this.setEventData(e, data);\n    }\n    onMouseUp(e, x, y) {\n        const data = this.getEventData(e);\n        const action = data.action;\n        if (action === 'magnet') {\n            this.stopMagnetDragging(e, x, y);\n        }\n        else {\n            this.notifyMouseUp(e, x, y);\n            this.notifyPortEvent('node:port:mouseup', e, { x, y });\n            if (action === 'move') {\n                const meta = data;\n                const view = meta.targetView || this;\n                view.stopNodeDragging(e, x, y);\n            }\n        }\n        const magnet = data.targetMagnet;\n        if (magnet) {\n            this.onMagnetClick(e, magnet, x, y);\n        }\n        this.checkMouseleave(e);\n    }\n    onMouseOver(e) {\n        super.onMouseOver(e);\n        this.notify('node:mouseover', this.getEventArgs(e));\n        // mock mouseenter event,so we can get correct trigger time when move mouse from node to port\n        // wo also need to change e.type for use get correct event args\n        this.notifyPortEvent('node:port:mouseenter', e);\n        this.notifyPortEvent('node:port:mouseover', e);\n    }\n    onMouseOut(e) {\n        super.onMouseOut(e);\n        this.notify('node:mouseout', this.getEventArgs(e));\n        // mock mouseleave event,so we can get correct trigger time when move mouse from port to node\n        // wo also need to change e.type for use get correct event args\n        this.notifyPortEvent('node:port:mouseleave', e);\n        this.notifyPortEvent('node:port:mouseout', e);\n    }\n    onMouseEnter(e) {\n        this.updateClassName(e);\n        super.onMouseEnter(e);\n        this.notify('node:mouseenter', this.getEventArgs(e));\n    }\n    onMouseLeave(e) {\n        super.onMouseLeave(e);\n        this.notify('node:mouseleave', this.getEventArgs(e));\n    }\n    onMouseWheel(e, x, y, delta) {\n        super.onMouseWheel(e, x, y, delta);\n        this.notify('node:mousewheel', Object.assign({ delta }, this.getEventArgs(e, x, y)));\n    }\n    onMagnetClick(e, magnet, x, y) {\n        const graph = this.graph;\n        const count = graph.view.getMouseMovedCount(e);\n        if (count > graph.options.clickThreshold) {\n            return;\n        }\n        this.notify('node:magnet:click', Object.assign({ magnet }, this.getEventArgs(e, x, y)));\n    }\n    onMagnetDblClick(e, magnet, x, y) {\n        this.notify('node:magnet:dblclick', Object.assign({ magnet }, this.getEventArgs(e, x, y)));\n    }\n    onMagnetContextMenu(e, magnet, x, y) {\n        this.notify('node:magnet:contextmenu', Object.assign({ magnet }, this.getEventArgs(e, x, y)));\n    }\n    onMagnetMouseDown(e, magnet, x, y) {\n        this.startMagnetDragging(e, x, y);\n    }\n    onCustomEvent(e, name, x, y) {\n        this.notify('node:customevent', Object.assign({ name }, this.getEventArgs(e, x, y)));\n        super.onCustomEvent(e, name, x, y);\n    }\n    prepareEmbedding(e) {\n        const graph = this.graph;\n        const data = this.getEventData(e);\n        const node = data.cell || this.cell;\n        const view = graph.findViewByCell(node);\n        const localPoint = graph.snapToGrid(e.clientX, e.clientY);\n        this.notify('node:embed', {\n            e,\n            node,\n            view,\n            cell: node,\n            x: localPoint.x,\n            y: localPoint.y,\n            currentParent: node.getParent(),\n        });\n    }\n    processEmbedding(e, data) {\n        const cell = data.cell || this.cell;\n        const graph = data.graph || this.graph;\n        const options = graph.options.embedding;\n        const findParent = options.findParent;\n        let candidates = typeof findParent === 'function'\n            ? FunctionExt.call(findParent, graph, {\n                view: this,\n                node: this.cell,\n            }).filter((c) => {\n                return (Cell.isCell(c) &&\n                    this.cell.id !== c.id &&\n                    !c.isDescendantOf(this.cell));\n            })\n            : graph.model.getNodesUnderNode(cell, {\n                by: findParent,\n            });\n        // Picks the node with the highest `z` index\n        if (options.frontOnly) {\n            if (candidates.length > 0) {\n                const zIndexMap = ArrayExt.groupBy(candidates, 'zIndex');\n                const maxZIndex = ArrayExt.max(Object.keys(zIndexMap).map((z) => parseInt(z, 10)));\n                if (maxZIndex) {\n                    candidates = zIndexMap[maxZIndex];\n                }\n            }\n        }\n        // Filter the nodes which is invisiable\n        candidates = candidates.filter((candidate) => candidate.visible);\n        let newCandidateView = null;\n        const prevCandidateView = data.candidateEmbedView;\n        const validateEmbeding = options.validate;\n        for (let i = candidates.length - 1; i >= 0; i -= 1) {\n            const candidate = candidates[i];\n            if (prevCandidateView && prevCandidateView.cell.id === candidate.id) {\n                // candidate remains the same\n                newCandidateView = prevCandidateView;\n                break;\n            }\n            else {\n                const view = candidate.findView(graph);\n                if (FunctionExt.call(validateEmbeding, graph, {\n                    child: this.cell,\n                    parent: view.cell,\n                    childView: this,\n                    parentView: view,\n                })) {\n                    // flip to the new candidate\n                    newCandidateView = view;\n                    break;\n                }\n            }\n        }\n        this.clearEmbedding(data);\n        if (newCandidateView) {\n            newCandidateView.highlight(null, { type: 'embedding' });\n        }\n        data.candidateEmbedView = newCandidateView;\n        const localPoint = graph.snapToGrid(e.clientX, e.clientY);\n        this.notify('node:embedding', {\n            e,\n            cell,\n            node: cell,\n            view: graph.findViewByCell(cell),\n            x: localPoint.x,\n            y: localPoint.y,\n            currentParent: cell.getParent(),\n            candidateParent: newCandidateView ? newCandidateView.cell : null,\n        });\n    }\n    clearEmbedding(data) {\n        const candidateView = data.candidateEmbedView;\n        if (candidateView) {\n            candidateView.unhighlight(null, { type: 'embedding' });\n            data.candidateEmbedView = null;\n        }\n    }\n    finalizeEmbedding(e, data) {\n        this.graph.startBatch('embedding');\n        const cell = data.cell || this.cell;\n        const graph = data.graph || this.graph;\n        const view = graph.findViewByCell(cell);\n        const parent = cell.getParent();\n        const candidateView = data.candidateEmbedView;\n        if (candidateView) {\n            // Candidate view is chosen to become the parent of the node.\n            candidateView.unhighlight(null, { type: 'embedding' });\n            data.candidateEmbedView = null;\n            if (parent == null || parent.id !== candidateView.cell.id) {\n                candidateView.cell.insertChild(cell, undefined, { ui: true });\n            }\n        }\n        else if (parent) {\n            parent.unembed(cell, { ui: true });\n        }\n        graph.model.getConnectedEdges(cell, { deep: true }).forEach((edge) => {\n            edge.updateParent({ ui: true });\n        });\n        if (view && candidateView) {\n            const localPoint = graph.snapToGrid(e.clientX, e.clientY);\n            view.notify('node:embedded', {\n                e,\n                cell,\n                x: localPoint.x,\n                y: localPoint.y,\n                node: cell,\n                view: graph.findViewByCell(cell),\n                previousParent: parent,\n                currentParent: cell.getParent(),\n            });\n        }\n        this.graph.stopBatch('embedding');\n    }\n    getDelegatedView() {\n        let cell = this.cell;\n        let view = this; // eslint-disable-line\n        while (view) {\n            if (cell.isEdge()) {\n                break;\n            }\n            if (!cell.hasParent() || view.can('stopDelegateOnDragging')) {\n                return view;\n            }\n            cell = cell.getParent();\n            view = this.graph.findViewByCell(cell);\n        }\n        return null;\n    }\n    validateMagnet(cellView, magnet, e) {\n        if (magnet.getAttribute('magnet') !== 'passive') {\n            const validate = this.graph.options.connecting.validateMagnet;\n            if (validate) {\n                return FunctionExt.call(validate, this.graph, {\n                    e,\n                    magnet,\n                    view: cellView,\n                    cell: cellView.cell,\n                });\n            }\n            return true;\n        }\n        return false;\n    }\n    startMagnetDragging(e, x, y) {\n        if (!this.can('magnetConnectable')) {\n            return;\n        }\n        e.stopPropagation();\n        const magnet = e.currentTarget;\n        const graph = this.graph;\n        this.setEventData(e, {\n            targetMagnet: magnet,\n        });\n        if (this.validateMagnet(this, magnet, e)) {\n            if (graph.options.magnetThreshold <= 0) {\n                this.startConnectting(e, magnet, x, y);\n            }\n            this.setEventData(e, {\n                action: 'magnet',\n            });\n            this.stopPropagation(e);\n        }\n        else {\n            this.onMouseDown(e, x, y);\n        }\n        graph.view.delegateDragEvents(e, this);\n    }\n    startConnectting(e, magnet, x, y) {\n        this.graph.model.startBatch('add-edge');\n        const edgeView = this.createEdgeFromMagnet(magnet, x, y);\n        edgeView.setEventData(e, edgeView.prepareArrowheadDragging('target', {\n            x,\n            y,\n            isNewEdge: true,\n            fallbackAction: 'remove',\n        }));\n        this.setEventData(e, { edgeView });\n        edgeView.notifyMouseDown(e, x, y);\n    }\n    getDefaultEdge(sourceView, sourceMagnet) {\n        let edge;\n        const create = this.graph.options.connecting.createEdge;\n        if (create) {\n            edge = FunctionExt.call(create, this.graph, {\n                sourceMagnet,\n                sourceView,\n                sourceCell: sourceView.cell,\n            });\n        }\n        return edge;\n    }\n    createEdgeFromMagnet(magnet, x, y) {\n        const graph = this.graph;\n        const model = graph.model;\n        const edge = this.getDefaultEdge(this, magnet);\n        edge.setSource(Object.assign(Object.assign({}, edge.getSource()), this.getEdgeTerminal(magnet, x, y, edge, 'source')));\n        edge.setTarget(Object.assign(Object.assign({}, edge.getTarget()), { x, y }));\n        edge.addTo(model, { async: false, ui: true });\n        return edge.findView(graph);\n    }\n    dragMagnet(e, x, y) {\n        const data = this.getEventData(e);\n        const edgeView = data.edgeView;\n        if (edgeView) {\n            edgeView.onMouseMove(e, x, y);\n            this.autoScrollGraph(e.clientX, e.clientY);\n        }\n        else {\n            const graph = this.graph;\n            const magnetThreshold = graph.options.magnetThreshold;\n            const currentTarget = this.getEventTarget(e);\n            const targetMagnet = data.targetMagnet;\n            // magnetThreshold when the pointer leaves the magnet\n            if (magnetThreshold === 'onleave') {\n                if (targetMagnet === currentTarget ||\n                    targetMagnet.contains(currentTarget)) {\n                    return;\n                }\n                // eslint-disable-next-line no-lonely-if\n            }\n            else {\n                // magnetThreshold defined as a number of movements\n                if (graph.view.getMouseMovedCount(e) <= magnetThreshold) {\n                    return;\n                }\n            }\n            this.startConnectting(e, targetMagnet, x, y);\n        }\n    }\n    stopMagnetDragging(e, x, y) {\n        const data = this.eventData(e);\n        const edgeView = data.edgeView;\n        if (edgeView) {\n            edgeView.onMouseUp(e, x, y);\n            this.graph.model.stopBatch('add-edge');\n        }\n    }\n    notifyUnhandledMouseDown(e, x, y) {\n        this.notify('node:unhandled:mousedown', {\n            e,\n            x,\n            y,\n            view: this,\n            cell: this.cell,\n            node: this.cell,\n        });\n    }\n    notifyNodeMove(name, e, x, y, cell) {\n        let cells = [cell];\n        const selection = this.graph.getPlugin('selection');\n        if (selection && selection.isSelectionMovable()) {\n            const selectedCells = selection.getSelectedCells();\n            if (selectedCells.includes(cell)) {\n                cells = selectedCells.filter((c) => c.isNode());\n            }\n        }\n        cells.forEach((c) => {\n            this.notify(name, {\n                e,\n                x,\n                y,\n                cell: c,\n                node: c,\n                view: c.findView(this.graph),\n            });\n        });\n    }\n    getRestrictArea(view) {\n        const restrict = this.graph.options.translating.restrict;\n        const area = typeof restrict === 'function'\n            ? FunctionExt.call(restrict, this.graph, view)\n            : restrict;\n        if (typeof area === 'number') {\n            return this.graph.transform.getGraphArea().inflate(area);\n        }\n        if (area === true) {\n            return this.graph.transform.getGraphArea();\n        }\n        return area || null;\n    }\n    startNodeDragging(e, x, y) {\n        const targetView = this.getDelegatedView();\n        if (targetView == null || !targetView.can('nodeMovable')) {\n            return this.notifyUnhandledMouseDown(e, x, y);\n        }\n        this.setEventData(e, {\n            targetView,\n            action: 'move',\n        });\n        const position = Point.create(targetView.cell.getPosition());\n        targetView.setEventData(e, {\n            moving: false,\n            offset: position.diff(x, y),\n            restrict: this.getRestrictArea(targetView),\n        });\n    }\n    dragNode(e, x, y) {\n        const node = this.cell;\n        const graph = this.graph;\n        const gridSize = graph.getGridSize();\n        const data = this.getEventData(e);\n        const offset = data.offset;\n        const restrict = data.restrict;\n        if (!data.moving) {\n            data.moving = true;\n            this.addClass('node-moving');\n            this.notifyNodeMove('node:move', e, x, y, this.cell);\n        }\n        this.autoScrollGraph(e.clientX, e.clientY);\n        const posX = GeometryUtil.snapToGrid(x + offset.x, gridSize);\n        const posY = GeometryUtil.snapToGrid(y + offset.y, gridSize);\n        node.setPosition(posX, posY, {\n            restrict,\n            deep: true,\n            ui: true,\n        });\n        if (graph.options.embedding.enabled) {\n            if (!data.embedding) {\n                this.prepareEmbedding(e);\n                data.embedding = true;\n            }\n            this.processEmbedding(e, data);\n        }\n    }\n    stopNodeDragging(e, x, y) {\n        const data = this.getEventData(e);\n        if (data.embedding) {\n            this.finalizeEmbedding(e, data);\n        }\n        if (data.moving) {\n            this.removeClass('node-moving');\n            this.notifyNodeMove('node:moved', e, x, y, this.cell);\n        }\n        data.moving = false;\n        data.embedding = false;\n    }\n    // eslint-disable-next-line\n    autoScrollGraph(x, y) {\n        const scroller = this.graph.getPlugin('scroller');\n        if (scroller) {\n            scroller.autoScroll(x, y);\n        }\n    }\n}\n(function (NodeView) {\n    NodeView.toStringTag = `X6.${NodeView.name}`;\n    function isNodeView(instance) {\n        if (instance == null) {\n            return false;\n        }\n        if (instance instanceof NodeView) {\n            return true;\n        }\n        const tag = instance[Symbol.toStringTag];\n        const view = instance;\n        if ((tag == null || tag === NodeView.toStringTag) &&\n            typeof view.isNodeView === 'function' &&\n            typeof view.isEdgeView === 'function' &&\n            typeof view.confirmUpdate === 'function' &&\n            typeof view.update === 'function' &&\n            typeof view.findPortElem === 'function' &&\n            typeof view.resize === 'function' &&\n            typeof view.rotate === 'function' &&\n            typeof view.translate === 'function') {\n            return true;\n        }\n        return false;\n    }\n    NodeView.isNodeView = isNodeView;\n})(NodeView || (NodeView = {}));\nNodeView.config({\n    isSvgElement: true,\n    priority: 0,\n    bootstrap: ['render'],\n    actions: {\n        view: ['render'],\n        markup: ['render'],\n        attrs: ['update'],\n        size: ['resize', 'ports', 'tools'],\n        angle: ['rotate', 'tools'],\n        position: ['translate', 'tools'],\n        ports: ['ports'],\n        tools: ['tools'],\n    },\n});\nNodeView.registry.register('node', NodeView, true);\n//# sourceMappingURL=node.js.map","import { Rectangle, Polyline, Point, Angle, Path, Line, } from '@antv/x6-geometry';\nimport { ObjectExt, NumberExt, FunctionExt, Dom, Vector, } from '@antv/x6-common';\nimport { Router, Connector, NodeAnchor, EdgeAnchor, ConnectionPoint, } from '../registry';\nimport { Edge } from '../model/edge';\nimport { CellView } from './cell';\nimport { NodeView } from './node';\nexport class EdgeView extends CellView {\n    constructor() {\n        super(...arguments);\n        this.POINT_ROUNDING = 2;\n        // #endregion\n    }\n    get [Symbol.toStringTag]() {\n        return EdgeView.toStringTag;\n    }\n    getContainerClassName() {\n        return [super.getContainerClassName(), this.prefixClassName('edge')].join(' ');\n    }\n    get sourceBBox() {\n        const sourceView = this.sourceView;\n        if (!sourceView) {\n            const sourceDef = this.cell.getSource();\n            return new Rectangle(sourceDef.x, sourceDef.y);\n        }\n        const sourceMagnet = this.sourceMagnet;\n        if (sourceView.isEdgeElement(sourceMagnet)) {\n            return new Rectangle(this.sourceAnchor.x, this.sourceAnchor.y);\n        }\n        return sourceView.getBBoxOfElement(sourceMagnet || sourceView.container);\n    }\n    get targetBBox() {\n        const targetView = this.targetView;\n        if (!targetView) {\n            const targetDef = this.cell.getTarget();\n            return new Rectangle(targetDef.x, targetDef.y);\n        }\n        const targetMagnet = this.targetMagnet;\n        if (targetView.isEdgeElement(targetMagnet)) {\n            return new Rectangle(this.targetAnchor.x, this.targetAnchor.y);\n        }\n        return targetView.getBBoxOfElement(targetMagnet || targetView.container);\n    }\n    isEdgeView() {\n        return true;\n    }\n    confirmUpdate(flag, options = {}) {\n        let ref = flag;\n        if (this.hasAction(ref, 'source')) {\n            if (!this.updateTerminalProperties('source')) {\n                return ref;\n            }\n            ref = this.removeAction(ref, 'source');\n        }\n        if (this.hasAction(ref, 'target')) {\n            if (!this.updateTerminalProperties('target')) {\n                return ref;\n            }\n            ref = this.removeAction(ref, 'target');\n        }\n        if (this.hasAction(ref, 'render')) {\n            this.render();\n            ref = this.removeAction(ref, ['render', 'update', 'labels', 'tools']);\n            return ref;\n        }\n        ref = this.handleAction(ref, 'update', () => this.update(options));\n        ref = this.handleAction(ref, 'labels', () => this.onLabelsChange(options));\n        ref = this.handleAction(ref, 'tools', () => this.renderTools());\n        return ref;\n    }\n    // #region render\n    render() {\n        this.empty();\n        this.renderMarkup();\n        this.labelContainer = null;\n        this.renderLabels();\n        this.update();\n        this.renderTools();\n        return this;\n    }\n    renderMarkup() {\n        const markup = this.cell.markup;\n        if (markup) {\n            if (typeof markup === 'string') {\n                throw new TypeError('Not support string markup.');\n            }\n            return this.renderJSONMarkup(markup);\n        }\n        throw new TypeError('Invalid edge markup.');\n    }\n    renderJSONMarkup(markup) {\n        const ret = this.parseJSONMarkup(markup, this.container);\n        this.selectors = ret.selectors;\n        this.container.append(ret.fragment);\n    }\n    customizeLabels() {\n        if (this.labelContainer) {\n            const edge = this.cell;\n            const labels = edge.labels;\n            for (let i = 0, n = labels.length; i < n; i += 1) {\n                const label = labels[i];\n                const container = this.labelCache[i];\n                const selectors = this.labelSelectors[i];\n                const onEdgeLabelRendered = this.graph.options.onEdgeLabelRendered;\n                if (onEdgeLabelRendered) {\n                    onEdgeLabelRendered({\n                        edge,\n                        label,\n                        container,\n                        selectors,\n                    });\n                }\n            }\n        }\n    }\n    renderLabels() {\n        const edge = this.cell;\n        const labels = edge.getLabels();\n        const count = labels.length;\n        let container = this.labelContainer;\n        this.labelCache = {};\n        this.labelSelectors = {};\n        if (count <= 0) {\n            if (container && container.parentNode) {\n                container.parentNode.removeChild(container);\n            }\n            return this;\n        }\n        if (container) {\n            this.empty(container);\n        }\n        else {\n            container = Dom.createSvgElement('g');\n            this.addClass(this.prefixClassName('edge-labels'), container);\n            this.labelContainer = container;\n        }\n        for (let i = 0, ii = labels.length; i < ii; i += 1) {\n            const label = labels[i];\n            const normalized = this.normalizeLabelMarkup(this.parseLabelMarkup(label.markup));\n            let labelNode;\n            let selectors;\n            if (normalized) {\n                labelNode = normalized.node;\n                selectors = normalized.selectors;\n            }\n            else {\n                const defaultLabel = edge.getDefaultLabel();\n                const normalized = this.normalizeLabelMarkup(this.parseLabelMarkup(defaultLabel.markup));\n                labelNode = normalized.node;\n                selectors = normalized.selectors;\n            }\n            labelNode.setAttribute('data-index', `${i}`);\n            container.appendChild(labelNode);\n            const rootSelector = this.rootSelector;\n            if (selectors[rootSelector]) {\n                throw new Error('Ambiguous label root selector.');\n            }\n            selectors[rootSelector] = labelNode;\n            this.labelCache[i] = labelNode;\n            this.labelSelectors[i] = selectors;\n        }\n        if (container.parentNode == null) {\n            this.container.appendChild(container);\n        }\n        this.updateLabels();\n        this.customizeLabels();\n        return this;\n    }\n    onLabelsChange(options = {}) {\n        if (this.shouldRerenderLabels(options)) {\n            this.renderLabels();\n        }\n        else {\n            this.updateLabels();\n        }\n        this.updateLabelPositions();\n    }\n    shouldRerenderLabels(options = {}) {\n        const previousLabels = this.cell.previous('labels');\n        if (previousLabels == null) {\n            return true;\n        }\n        // Here is an optimization for cases when we know, that change does\n        // not require re-rendering of all labels.\n        if ('propertyPathArray' in options && 'propertyValue' in options) {\n            // The label is setting by `prop()` method\n            const pathArray = options.propertyPathArray || [];\n            const pathLength = pathArray.length;\n            if (pathLength > 1) {\n                // We are changing a single label here e.g. 'labels/0/position'\n                const index = pathArray[1];\n                if (previousLabels[index]) {\n                    if (pathLength === 2) {\n                        // We are changing the entire label. Need to check if the\n                        // markup is also being changed.\n                        return (typeof options.propertyValue === 'object' &&\n                            ObjectExt.has(options.propertyValue, 'markup'));\n                    }\n                    // We are changing a label property but not the markup\n                    if (pathArray[2] !== 'markup') {\n                        return false;\n                    }\n                }\n            }\n        }\n        return true;\n    }\n    parseLabelMarkup(markup) {\n        if (markup) {\n            if (typeof markup === 'string') {\n                return this.parseLabelStringMarkup(markup);\n            }\n            return this.parseJSONMarkup(markup);\n        }\n        return null;\n    }\n    parseLabelStringMarkup(labelMarkup) {\n        const children = Vector.createVectors(labelMarkup);\n        const fragment = document.createDocumentFragment();\n        for (let i = 0, n = children.length; i < n; i += 1) {\n            const currentChild = children[i].node;\n            fragment.appendChild(currentChild);\n        }\n        return { fragment, selectors: {} };\n    }\n    normalizeLabelMarkup(markup) {\n        if (markup == null) {\n            return;\n        }\n        const fragment = markup.fragment;\n        if (!(fragment instanceof DocumentFragment) || !fragment.hasChildNodes()) {\n            throw new Error('Invalid label markup.');\n        }\n        let vel;\n        const childNodes = fragment.childNodes;\n        if (childNodes.length > 1 || childNodes[0].nodeName.toUpperCase() !== 'G') {\n            vel = Vector.create('g').append(fragment);\n        }\n        else {\n            vel = Vector.create(childNodes[0]);\n        }\n        vel.addClass(this.prefixClassName('edge-label'));\n        return {\n            node: vel.node,\n            selectors: markup.selectors,\n        };\n    }\n    updateLabels() {\n        if (this.labelContainer) {\n            const edge = this.cell;\n            const labels = edge.labels;\n            const canLabelMove = this.can('edgeLabelMovable');\n            const defaultLabel = edge.getDefaultLabel();\n            for (let i = 0, n = labels.length; i < n; i += 1) {\n                const elem = this.labelCache[i];\n                const selectors = this.labelSelectors[i];\n                elem.setAttribute('cursor', canLabelMove ? 'move' : 'default');\n                const label = labels[i];\n                const attrs = ObjectExt.merge({}, defaultLabel.attrs, label.attrs);\n                this.updateAttrs(elem, attrs, {\n                    selectors,\n                    rootBBox: label.size ? Rectangle.fromSize(label.size) : undefined,\n                });\n            }\n        }\n    }\n    renderTools() {\n        const tools = this.cell.getTools();\n        this.addTools(tools);\n        return this;\n    }\n    // #endregion\n    // #region updating\n    update(options = {}) {\n        this.cleanCache();\n        this.updateConnection(options);\n        const attrs = this.cell.getAttrs();\n        if (attrs != null) {\n            this.updateAttrs(this.container, attrs, {\n                selectors: this.selectors,\n            });\n        }\n        this.updateLabelPositions();\n        this.updateTools(options);\n        return this;\n    }\n    removeRedundantLinearVertices(options = {}) {\n        const edge = this.cell;\n        const vertices = edge.getVertices();\n        const routePoints = [this.sourceAnchor, ...vertices, this.targetAnchor];\n        const rawCount = routePoints.length;\n        // Puts the route points into a polyline and try to simplify.\n        const polyline = new Polyline(routePoints);\n        polyline.simplify({ threshold: 0.01 });\n        const simplifiedPoints = polyline.points.map((point) => point.toJSON());\n        const simplifiedCount = simplifiedPoints.length;\n        // If simplification did not remove any redundant vertices.\n        if (rawCount === simplifiedCount) {\n            return 0;\n        }\n        // Sets simplified polyline points as edge vertices.\n        // Removes first and last polyline points again (source/target anchors).\n        edge.setVertices(simplifiedPoints.slice(1, simplifiedCount - 1), options);\n        return rawCount - simplifiedCount;\n    }\n    getTerminalView(type) {\n        switch (type) {\n            case 'source':\n                return this.sourceView || null;\n            case 'target':\n                return this.targetView || null;\n            default:\n                throw new Error(`Unknown terminal type '${type}'`);\n        }\n    }\n    getTerminalAnchor(type) {\n        switch (type) {\n            case 'source':\n                return Point.create(this.sourceAnchor);\n            case 'target':\n                return Point.create(this.targetAnchor);\n            default:\n                throw new Error(`Unknown terminal type '${type}'`);\n        }\n    }\n    getTerminalConnectionPoint(type) {\n        switch (type) {\n            case 'source':\n                return Point.create(this.sourcePoint);\n            case 'target':\n                return Point.create(this.targetPoint);\n            default:\n                throw new Error(`Unknown terminal type '${type}'`);\n        }\n    }\n    getTerminalMagnet(type, options = {}) {\n        switch (type) {\n            case 'source': {\n                if (options.raw) {\n                    return this.sourceMagnet;\n                }\n                const sourceView = this.sourceView;\n                if (!sourceView) {\n                    return null;\n                }\n                return this.sourceMagnet || sourceView.container;\n            }\n            case 'target': {\n                if (options.raw) {\n                    return this.targetMagnet;\n                }\n                const targetView = this.targetView;\n                if (!targetView) {\n                    return null;\n                }\n                return this.targetMagnet || targetView.container;\n            }\n            default: {\n                throw new Error(`Unknown terminal type '${type}'`);\n            }\n        }\n    }\n    updateConnection(options = {}) {\n        const edge = this.cell;\n        // The edge is being translated by an ancestor that will shift\n        // source, target and vertices by an equal distance.\n        // todo isFragmentDescendantOf is invalid\n        if (options.translateBy &&\n            edge.isFragmentDescendantOf(options.translateBy)) {\n            const tx = options.tx || 0;\n            const ty = options.ty || 0;\n            this.routePoints = new Polyline(this.routePoints).translate(tx, ty).points;\n            this.translateConnectionPoints(tx, ty);\n            this.path.translate(tx, ty);\n        }\n        else {\n            const vertices = edge.getVertices();\n            // 1. Find anchor points\n            const anchors = this.findAnchors(vertices);\n            this.sourceAnchor = anchors.source;\n            this.targetAnchor = anchors.target;\n            // 2. Find route points\n            this.routePoints = this.findRoutePoints(vertices);\n            // 3. Find connection points\n            const connectionPoints = this.findConnectionPoints(this.routePoints, this.sourceAnchor, this.targetAnchor);\n            this.sourcePoint = connectionPoints.source;\n            this.targetPoint = connectionPoints.target;\n            // 4. Find Marker Connection Point\n            const markerPoints = this.findMarkerPoints(this.routePoints, this.sourcePoint, this.targetPoint);\n            // 5. Make path\n            this.path = this.findPath(this.routePoints, markerPoints.source || this.sourcePoint, markerPoints.target || this.targetPoint);\n        }\n        this.cleanCache();\n    }\n    findAnchors(vertices) {\n        const edge = this.cell;\n        const source = edge.source;\n        const target = edge.target;\n        const firstVertex = vertices[0];\n        const lastVertex = vertices[vertices.length - 1];\n        if (target.priority && !source.priority) {\n            // Reversed order\n            return this.findAnchorsOrdered('target', lastVertex, 'source', firstVertex);\n        }\n        // Usual order\n        return this.findAnchorsOrdered('source', firstVertex, 'target', lastVertex);\n    }\n    findAnchorsOrdered(firstType, firstPoint, secondType, secondPoint) {\n        let firstAnchor;\n        let secondAnchor;\n        const edge = this.cell;\n        const firstTerminal = edge[firstType];\n        const secondTerminal = edge[secondType];\n        const firstView = this.getTerminalView(firstType);\n        const secondView = this.getTerminalView(secondType);\n        const firstMagnet = this.getTerminalMagnet(firstType);\n        const secondMagnet = this.getTerminalMagnet(secondType);\n        if (firstView) {\n            let firstRef;\n            if (firstPoint) {\n                firstRef = Point.create(firstPoint);\n            }\n            else if (secondView) {\n                firstRef = secondMagnet;\n            }\n            else {\n                firstRef = Point.create(secondTerminal);\n            }\n            firstAnchor = this.getAnchor(firstTerminal.anchor, firstView, firstMagnet, firstRef, firstType);\n        }\n        else {\n            firstAnchor = Point.create(firstTerminal);\n        }\n        if (secondView) {\n            const secondRef = Point.create(secondPoint || firstAnchor);\n            secondAnchor = this.getAnchor(secondTerminal.anchor, secondView, secondMagnet, secondRef, secondType);\n        }\n        else {\n            secondAnchor = Point.isPointLike(secondTerminal)\n                ? Point.create(secondTerminal)\n                : new Point();\n        }\n        return {\n            [firstType]: firstAnchor,\n            [secondType]: secondAnchor,\n        };\n    }\n    getAnchor(def, cellView, magnet, ref, terminalType) {\n        const isEdge = cellView.isEdgeElement(magnet);\n        const connecting = this.graph.options.connecting;\n        let config = typeof def === 'string' ? { name: def } : def;\n        if (!config) {\n            const defaults = isEdge\n                ? (terminalType === 'source'\n                    ? connecting.sourceEdgeAnchor\n                    : connecting.targetEdgeAnchor) || connecting.edgeAnchor\n                : (terminalType === 'source'\n                    ? connecting.sourceAnchor\n                    : connecting.targetAnchor) || connecting.anchor;\n            config = typeof defaults === 'string' ? { name: defaults } : defaults;\n        }\n        if (!config) {\n            throw new Error(`Anchor should be specified.`);\n        }\n        let anchor;\n        const name = config.name;\n        if (isEdge) {\n            const fn = EdgeAnchor.registry.get(name);\n            if (typeof fn !== 'function') {\n                return EdgeAnchor.registry.onNotFound(name);\n            }\n            anchor = FunctionExt.call(fn, this, cellView, magnet, ref, config.args || {}, terminalType);\n        }\n        else {\n            const fn = NodeAnchor.registry.get(name);\n            if (typeof fn !== 'function') {\n                return NodeAnchor.registry.onNotFound(name);\n            }\n            anchor = FunctionExt.call(fn, this, cellView, magnet, ref, config.args || {}, terminalType);\n        }\n        return anchor ? anchor.round(this.POINT_ROUNDING) : new Point();\n    }\n    findRoutePoints(vertices = []) {\n        const defaultRouter = this.graph.options.connecting.router || Router.presets.normal;\n        const router = this.cell.getRouter() || defaultRouter;\n        let routePoints;\n        if (typeof router === 'function') {\n            routePoints = FunctionExt.call(router, this, vertices, {}, this);\n        }\n        else {\n            const name = typeof router === 'string' ? router : router.name;\n            const args = typeof router === 'string' ? {} : router.args || {};\n            const fn = name ? Router.registry.get(name) : Router.presets.normal;\n            if (typeof fn !== 'function') {\n                return Router.registry.onNotFound(name);\n            }\n            routePoints = FunctionExt.call(fn, this, vertices, args, this);\n        }\n        return routePoints == null\n            ? vertices.map((p) => Point.create(p))\n            : routePoints.map((p) => Point.create(p));\n    }\n    findConnectionPoints(routePoints, sourceAnchor, targetAnchor) {\n        const edge = this.cell;\n        const connecting = this.graph.options.connecting;\n        const sourceTerminal = edge.getSource();\n        const targetTerminal = edge.getTarget();\n        const sourceView = this.sourceView;\n        const targetView = this.targetView;\n        const firstRoutePoint = routePoints[0];\n        const lastRoutePoint = routePoints[routePoints.length - 1];\n        // source\n        let sourcePoint;\n        if (sourceView && !sourceView.isEdgeElement(this.sourceMagnet)) {\n            const sourceMagnet = this.sourceMagnet || sourceView.container;\n            const sourcePointRef = firstRoutePoint || targetAnchor;\n            const sourceLine = new Line(sourcePointRef, sourceAnchor);\n            const connectionPointDef = sourceTerminal.connectionPoint ||\n                connecting.sourceConnectionPoint ||\n                connecting.connectionPoint;\n            sourcePoint = this.getConnectionPoint(connectionPointDef, sourceView, sourceMagnet, sourceLine, 'source');\n        }\n        else {\n            sourcePoint = sourceAnchor;\n        }\n        // target\n        let targetPoint;\n        if (targetView && !targetView.isEdgeElement(this.targetMagnet)) {\n            const targetMagnet = this.targetMagnet || targetView.container;\n            const targetConnectionPointDef = targetTerminal.connectionPoint ||\n                connecting.targetConnectionPoint ||\n                connecting.connectionPoint;\n            const targetPointRef = lastRoutePoint || sourceAnchor;\n            const targetLine = new Line(targetPointRef, targetAnchor);\n            targetPoint = this.getConnectionPoint(targetConnectionPointDef, targetView, targetMagnet, targetLine, 'target');\n        }\n        else {\n            targetPoint = targetAnchor;\n        }\n        return {\n            source: sourcePoint,\n            target: targetPoint,\n        };\n    }\n    getConnectionPoint(def, view, magnet, line, endType) {\n        const anchor = line.end;\n        if (def == null) {\n            return anchor;\n        }\n        const name = typeof def === 'string' ? def : def.name;\n        const args = typeof def === 'string' ? {} : def.args;\n        const fn = ConnectionPoint.registry.get(name);\n        if (typeof fn !== 'function') {\n            return ConnectionPoint.registry.onNotFound(name);\n        }\n        const connectionPoint = FunctionExt.call(fn, this, line, view, magnet, args || {}, endType);\n        return connectionPoint ? connectionPoint.round(this.POINT_ROUNDING) : anchor;\n    }\n    findMarkerPoints(routePoints, sourcePoint, targetPoint) {\n        const getLineWidth = (type) => {\n            const attrs = this.cell.getAttrs();\n            const keys = Object.keys(attrs);\n            for (let i = 0, l = keys.length; i < l; i += 1) {\n                const attr = attrs[keys[i]];\n                if (attr[`${type}Marker`] || attr[`${type}-marker`]) {\n                    const strokeWidth = attr.strokeWidth || attr['stroke-width'];\n                    if (strokeWidth) {\n                        return parseFloat(strokeWidth);\n                    }\n                    break;\n                }\n            }\n            return null;\n        };\n        const firstRoutePoint = routePoints[0];\n        const lastRoutePoint = routePoints[routePoints.length - 1];\n        let sourceMarkerPoint;\n        let targetMarkerPoint;\n        const sourceStrokeWidth = getLineWidth('source');\n        if (sourceStrokeWidth) {\n            sourceMarkerPoint = sourcePoint\n                .clone()\n                .move(firstRoutePoint || targetPoint, -sourceStrokeWidth);\n        }\n        const targetStrokeWidth = getLineWidth('target');\n        if (targetStrokeWidth) {\n            targetMarkerPoint = targetPoint\n                .clone()\n                .move(lastRoutePoint || sourcePoint, -targetStrokeWidth);\n        }\n        this.sourceMarkerPoint = sourceMarkerPoint || sourcePoint.clone();\n        this.targetMarkerPoint = targetMarkerPoint || targetPoint.clone();\n        return {\n            source: sourceMarkerPoint,\n            target: targetMarkerPoint,\n        };\n    }\n    findPath(routePoints, sourcePoint, targetPoint) {\n        const def = this.cell.getConnector() || this.graph.options.connecting.connector;\n        let name;\n        let args;\n        let fn;\n        if (typeof def === 'string') {\n            name = def;\n        }\n        else {\n            name = def.name;\n            args = def.args;\n        }\n        if (name) {\n            const method = Connector.registry.get(name);\n            if (typeof method !== 'function') {\n                return Connector.registry.onNotFound(name);\n            }\n            fn = method;\n        }\n        else {\n            fn = Connector.presets.normal;\n        }\n        const path = FunctionExt.call(fn, this, sourcePoint, targetPoint, routePoints, Object.assign(Object.assign({}, args), { raw: true }), this);\n        return typeof path === 'string' ? Path.parse(path) : path;\n    }\n    translateConnectionPoints(tx, ty) {\n        this.sourcePoint.translate(tx, ty);\n        this.targetPoint.translate(tx, ty);\n        this.sourceAnchor.translate(tx, ty);\n        this.targetAnchor.translate(tx, ty);\n        this.sourceMarkerPoint.translate(tx, ty);\n        this.targetMarkerPoint.translate(tx, ty);\n    }\n    updateLabelPositions() {\n        if (this.labelContainer == null) {\n            return this;\n        }\n        const path = this.path;\n        if (!path) {\n            return this;\n        }\n        const edge = this.cell;\n        const labels = edge.getLabels();\n        if (labels.length === 0) {\n            return this;\n        }\n        const defaultLabel = edge.getDefaultLabel();\n        const defaultPosition = this.normalizeLabelPosition(defaultLabel.position);\n        for (let i = 0, ii = labels.length; i < ii; i += 1) {\n            const label = labels[i];\n            const labelNode = this.labelCache[i];\n            if (!labelNode) {\n                continue;\n            }\n            const labelPosition = this.normalizeLabelPosition(label.position);\n            const pos = ObjectExt.merge({}, defaultPosition, labelPosition);\n            const matrix = this.getLabelTransformationMatrix(pos);\n            labelNode.setAttribute('transform', Dom.matrixToTransformString(matrix));\n        }\n        return this;\n    }\n    updateTerminalProperties(type) {\n        const edge = this.cell;\n        const graph = this.graph;\n        const terminal = edge[type];\n        const nodeId = terminal && terminal.cell;\n        const viewKey = `${type}View`;\n        // terminal is a point\n        if (!nodeId) {\n            this[viewKey] = null;\n            this.updateTerminalMagnet(type);\n            return true;\n        }\n        const terminalCell = graph.getCellById(nodeId);\n        if (!terminalCell) {\n            throw new Error(`Edge's ${type} node with id \"${nodeId}\" not exists`);\n        }\n        const endView = terminalCell.findView(graph);\n        if (!endView) {\n            return false;\n        }\n        this[viewKey] = endView;\n        this.updateTerminalMagnet(type);\n        return true;\n    }\n    updateTerminalMagnet(type) {\n        const propName = `${type}Magnet`;\n        const terminalView = this.getTerminalView(type);\n        if (terminalView) {\n            let magnet = terminalView.getMagnetFromEdgeTerminal(this.cell[type]);\n            if (magnet === terminalView.container) {\n                magnet = null;\n            }\n            this[propName] = magnet;\n        }\n        else {\n            this[propName] = null;\n        }\n    }\n    getLabelPositionAngle(idx) {\n        const label = this.cell.getLabelAt(idx);\n        if (label && label.position && typeof label.position === 'object') {\n            return label.position.angle || 0;\n        }\n        return 0;\n    }\n    getLabelPositionArgs(idx) {\n        const label = this.cell.getLabelAt(idx);\n        if (label && label.position && typeof label.position === 'object') {\n            return label.position.options;\n        }\n    }\n    getDefaultLabelPositionArgs() {\n        const defaultLabel = this.cell.getDefaultLabel();\n        if (defaultLabel &&\n            defaultLabel.position &&\n            typeof defaultLabel.position === 'object') {\n            return defaultLabel.position.options;\n        }\n    }\n    mergeLabelPositionArgs(labelPositionArgs, defaultLabelPositionArgs) {\n        if (labelPositionArgs === null) {\n            return null;\n        }\n        if (labelPositionArgs === undefined) {\n            if (defaultLabelPositionArgs === null) {\n                return null;\n            }\n            return defaultLabelPositionArgs;\n        }\n        return ObjectExt.merge({}, defaultLabelPositionArgs, labelPositionArgs);\n    }\n    // #endregion\n    getConnection() {\n        return this.path != null ? this.path.clone() : null;\n    }\n    getConnectionPathData() {\n        if (this.path == null) {\n            return '';\n        }\n        const cache = this.cache.pathCache;\n        if (!ObjectExt.has(cache, 'data')) {\n            cache.data = this.path.serialize();\n        }\n        return cache.data || '';\n    }\n    getConnectionSubdivisions() {\n        if (this.path == null) {\n            return null;\n        }\n        const cache = this.cache.pathCache;\n        if (!ObjectExt.has(cache, 'segmentSubdivisions')) {\n            cache.segmentSubdivisions = this.path.getSegmentSubdivisions();\n        }\n        return cache.segmentSubdivisions;\n    }\n    getConnectionLength() {\n        if (this.path == null) {\n            return 0;\n        }\n        const cache = this.cache.pathCache;\n        if (!ObjectExt.has(cache, 'length')) {\n            cache.length = this.path.length({\n                segmentSubdivisions: this.getConnectionSubdivisions(),\n            });\n        }\n        return cache.length;\n    }\n    getPointAtLength(length) {\n        if (this.path == null) {\n            return null;\n        }\n        return this.path.pointAtLength(length, {\n            segmentSubdivisions: this.getConnectionSubdivisions(),\n        });\n    }\n    getPointAtRatio(ratio) {\n        if (this.path == null) {\n            return null;\n        }\n        if (NumberExt.isPercentage(ratio)) {\n            // eslint-disable-next-line\n            ratio = parseFloat(ratio) / 100;\n        }\n        return this.path.pointAt(ratio, {\n            segmentSubdivisions: this.getConnectionSubdivisions(),\n        });\n    }\n    getTangentAtLength(length) {\n        if (this.path == null) {\n            return null;\n        }\n        return this.path.tangentAtLength(length, {\n            segmentSubdivisions: this.getConnectionSubdivisions(),\n        });\n    }\n    getTangentAtRatio(ratio) {\n        if (this.path == null) {\n            return null;\n        }\n        return this.path.tangentAt(ratio, {\n            segmentSubdivisions: this.getConnectionSubdivisions(),\n        });\n    }\n    getClosestPoint(point) {\n        if (this.path == null) {\n            return null;\n        }\n        return this.path.closestPoint(point, {\n            segmentSubdivisions: this.getConnectionSubdivisions(),\n        });\n    }\n    getClosestPointLength(point) {\n        if (this.path == null) {\n            return null;\n        }\n        return this.path.closestPointLength(point, {\n            segmentSubdivisions: this.getConnectionSubdivisions(),\n        });\n    }\n    getClosestPointRatio(point) {\n        if (this.path == null) {\n            return null;\n        }\n        return this.path.closestPointNormalizedLength(point, {\n            segmentSubdivisions: this.getConnectionSubdivisions(),\n        });\n    }\n    getLabelPosition(x, y, p3, p4) {\n        const pos = { distance: 0 };\n        // normalize data from the two possible signatures\n        let angle = 0;\n        let options;\n        if (typeof p3 === 'number') {\n            angle = p3;\n            options = p4;\n        }\n        else {\n            options = p3;\n        }\n        if (options != null) {\n            pos.options = options;\n        }\n        // identify distance/offset settings\n        const isOffsetAbsolute = options && options.absoluteOffset;\n        const isDistanceRelative = !(options && options.absoluteDistance);\n        const isDistanceAbsoluteReverse = options && options.absoluteDistance && options.reverseDistance;\n        // find closest point t\n        const path = this.path;\n        const pathOptions = {\n            segmentSubdivisions: this.getConnectionSubdivisions(),\n        };\n        const labelPoint = new Point(x, y);\n        const t = path.closestPointT(labelPoint, pathOptions);\n        // distance\n        const totalLength = this.getConnectionLength() || 0;\n        let labelDistance = path.lengthAtT(t, pathOptions);\n        if (isDistanceRelative) {\n            labelDistance = totalLength > 0 ? labelDistance / totalLength : 0;\n        }\n        if (isDistanceAbsoluteReverse) {\n            // fix for end point (-0 => 1)\n            labelDistance = -1 * (totalLength - labelDistance) || 1;\n        }\n        pos.distance = labelDistance;\n        // offset\n        // use absolute offset if:\n        // - options.absoluteOffset is true,\n        // - options.absoluteOffset is not true but there is no tangent\n        let tangent;\n        if (!isOffsetAbsolute)\n            tangent = path.tangentAtT(t);\n        let labelOffset;\n        if (tangent) {\n            labelOffset = tangent.pointOffset(labelPoint);\n        }\n        else {\n            const closestPoint = path.pointAtT(t);\n            const labelOffsetDiff = labelPoint.diff(closestPoint);\n            labelOffset = { x: labelOffsetDiff.x, y: labelOffsetDiff.y };\n        }\n        pos.offset = labelOffset;\n        pos.angle = angle;\n        return pos;\n    }\n    normalizeLabelPosition(pos) {\n        if (typeof pos === 'number') {\n            return { distance: pos };\n        }\n        return pos;\n    }\n    getLabelTransformationMatrix(labelPosition) {\n        const pos = this.normalizeLabelPosition(labelPosition);\n        const options = pos.options || {};\n        const labelAngle = pos.angle || 0;\n        const labelDistance = pos.distance;\n        const isDistanceRelative = labelDistance > 0 && labelDistance <= 1;\n        let labelOffset = 0;\n        const offsetCoord = { x: 0, y: 0 };\n        const offset = pos.offset;\n        if (offset) {\n            if (typeof offset === 'number') {\n                labelOffset = offset;\n            }\n            else {\n                if (offset.x != null) {\n                    offsetCoord.x = offset.x;\n                }\n                if (offset.y != null) {\n                    offsetCoord.y = offset.y;\n                }\n            }\n        }\n        const isOffsetAbsolute = offsetCoord.x !== 0 || offsetCoord.y !== 0 || labelOffset === 0;\n        const isKeepGradient = options.keepGradient;\n        const isEnsureLegibility = options.ensureLegibility;\n        const path = this.path;\n        const pathOpt = { segmentSubdivisions: this.getConnectionSubdivisions() };\n        const distance = isDistanceRelative\n            ? labelDistance * this.getConnectionLength()\n            : labelDistance;\n        const tangent = path.tangentAtLength(distance, pathOpt);\n        let translation;\n        let angle = labelAngle;\n        if (tangent) {\n            if (isOffsetAbsolute) {\n                translation = tangent.start;\n                translation.translate(offsetCoord);\n            }\n            else {\n                const normal = tangent.clone();\n                normal.rotate(-90, tangent.start);\n                normal.setLength(labelOffset);\n                translation = normal.end;\n            }\n            if (isKeepGradient) {\n                angle = tangent.angle() + labelAngle;\n                if (isEnsureLegibility) {\n                    angle = Angle.normalize(((angle + 90) % 180) - 90);\n                }\n            }\n        }\n        else {\n            // fallback - the connection has zero length\n            translation = path.start;\n            if (isOffsetAbsolute) {\n                translation.translate(offsetCoord);\n            }\n        }\n        return Dom.createSVGMatrix()\n            .translate(translation.x, translation.y)\n            .rotate(angle);\n    }\n    getVertexIndex(x, y) {\n        const edge = this.cell;\n        const vertices = edge.getVertices();\n        const vertexLength = this.getClosestPointLength(new Point(x, y));\n        let index = 0;\n        if (vertexLength != null) {\n            for (const ii = vertices.length; index < ii; index += 1) {\n                const currentVertex = vertices[index];\n                const currentLength = this.getClosestPointLength(currentVertex);\n                if (currentLength != null && vertexLength < currentLength) {\n                    break;\n                }\n            }\n        }\n        return index;\n    }\n    getEventArgs(e, x, y) {\n        const view = this; // eslint-disable-line\n        const edge = view.cell;\n        const cell = edge;\n        if (x == null || y == null) {\n            return { e, view, edge, cell };\n        }\n        return { e, x, y, view, edge, cell };\n    }\n    notifyUnhandledMouseDown(e, x, y) {\n        this.notify('edge:unhandled:mousedown', {\n            e,\n            x,\n            y,\n            view: this,\n            cell: this.cell,\n            edge: this.cell,\n        });\n    }\n    notifyMouseDown(e, x, y) {\n        super.onMouseDown(e, x, y);\n        this.notify('edge:mousedown', this.getEventArgs(e, x, y));\n    }\n    notifyMouseMove(e, x, y) {\n        super.onMouseMove(e, x, y);\n        this.notify('edge:mousemove', this.getEventArgs(e, x, y));\n    }\n    notifyMouseUp(e, x, y) {\n        super.onMouseUp(e, x, y);\n        this.notify('edge:mouseup', this.getEventArgs(e, x, y));\n    }\n    onClick(e, x, y) {\n        super.onClick(e, x, y);\n        this.notify('edge:click', this.getEventArgs(e, x, y));\n    }\n    onDblClick(e, x, y) {\n        super.onDblClick(e, x, y);\n        this.notify('edge:dblclick', this.getEventArgs(e, x, y));\n    }\n    onContextMenu(e, x, y) {\n        super.onContextMenu(e, x, y);\n        this.notify('edge:contextmenu', this.getEventArgs(e, x, y));\n    }\n    onMouseDown(e, x, y) {\n        this.notifyMouseDown(e, x, y);\n        this.startEdgeDragging(e, x, y);\n    }\n    onMouseMove(e, x, y) {\n        const data = this.getEventData(e);\n        switch (data.action) {\n            case 'drag-label': {\n                this.dragLabel(e, x, y);\n                break;\n            }\n            case 'drag-arrowhead': {\n                this.dragArrowhead(e, x, y);\n                break;\n            }\n            case 'drag-edge': {\n                this.dragEdge(e, x, y);\n                break;\n            }\n            default:\n                break;\n        }\n        this.notifyMouseMove(e, x, y);\n        return data;\n    }\n    onMouseUp(e, x, y) {\n        const data = this.getEventData(e);\n        switch (data.action) {\n            case 'drag-label': {\n                this.stopLabelDragging(e, x, y);\n                break;\n            }\n            case 'drag-arrowhead': {\n                this.stopArrowheadDragging(e, x, y);\n                break;\n            }\n            case 'drag-edge': {\n                this.stopEdgeDragging(e, x, y);\n                break;\n            }\n            default:\n                break;\n        }\n        this.notifyMouseUp(e, x, y);\n        this.checkMouseleave(e);\n        return data;\n    }\n    onMouseOver(e) {\n        super.onMouseOver(e);\n        this.notify('edge:mouseover', this.getEventArgs(e));\n    }\n    onMouseOut(e) {\n        super.onMouseOut(e);\n        this.notify('edge:mouseout', this.getEventArgs(e));\n    }\n    onMouseEnter(e) {\n        super.onMouseEnter(e);\n        this.notify('edge:mouseenter', this.getEventArgs(e));\n    }\n    onMouseLeave(e) {\n        super.onMouseLeave(e);\n        this.notify('edge:mouseleave', this.getEventArgs(e));\n    }\n    onMouseWheel(e, x, y, delta) {\n        super.onMouseWheel(e, x, y, delta);\n        this.notify('edge:mousewheel', Object.assign({ delta }, this.getEventArgs(e, x, y)));\n    }\n    onCustomEvent(e, name, x, y) {\n        // For default edge tool\n        const tool = Dom.findParentByClass(e.target, 'edge-tool', this.container);\n        if (tool) {\n            e.stopPropagation(); // no further action to be executed\n            if (this.can('useEdgeTools')) {\n                if (name === 'edge:remove') {\n                    this.cell.remove({ ui: true });\n                    return;\n                }\n                this.notify('edge:customevent', Object.assign({ name }, this.getEventArgs(e, x, y)));\n            }\n            this.notifyMouseDown(e, x, y);\n        }\n        else {\n            this.notify('edge:customevent', Object.assign({ name }, this.getEventArgs(e, x, y)));\n            super.onCustomEvent(e, name, x, y);\n        }\n    }\n    onLabelMouseDown(e, x, y) {\n        this.notifyMouseDown(e, x, y);\n        this.startLabelDragging(e, x, y);\n        const stopPropagation = this.getEventData(e).stopPropagation;\n        if (stopPropagation) {\n            e.stopPropagation();\n        }\n    }\n    // #region drag edge\n    startEdgeDragging(e, x, y) {\n        if (!this.can('edgeMovable')) {\n            this.notifyUnhandledMouseDown(e, x, y);\n            return;\n        }\n        this.setEventData(e, {\n            x,\n            y,\n            moving: false,\n            action: 'drag-edge',\n        });\n    }\n    dragEdge(e, x, y) {\n        const data = this.getEventData(e);\n        if (!data.moving) {\n            data.moving = true;\n            this.addClass('edge-moving');\n            this.notify('edge:move', {\n                e,\n                x,\n                y,\n                view: this,\n                cell: this.cell,\n                edge: this.cell,\n            });\n        }\n        this.cell.translate(x - data.x, y - data.y, { ui: true });\n        this.setEventData(e, { x, y });\n        this.notify('edge:moving', {\n            e,\n            x,\n            y,\n            view: this,\n            cell: this.cell,\n            edge: this.cell,\n        });\n    }\n    stopEdgeDragging(e, x, y) {\n        const data = this.getEventData(e);\n        if (data.moving) {\n            this.removeClass('edge-moving');\n            this.notify('edge:moved', {\n                e,\n                x,\n                y,\n                view: this,\n                cell: this.cell,\n                edge: this.cell,\n            });\n        }\n        data.moving = false;\n    }\n    // #endregion\n    // #region drag arrowhead\n    prepareArrowheadDragging(type, options) {\n        const magnet = this.getTerminalMagnet(type);\n        const data = {\n            action: 'drag-arrowhead',\n            x: options.x,\n            y: options.y,\n            isNewEdge: options.isNewEdge === true,\n            terminalType: type,\n            initialMagnet: magnet,\n            initialTerminal: ObjectExt.clone(this.cell[type]),\n            fallbackAction: options.fallbackAction || 'revert',\n            getValidateConnectionArgs: this.createValidateConnectionArgs(type),\n            options: options.options,\n        };\n        this.beforeArrowheadDragging(data);\n        return data;\n    }\n    createValidateConnectionArgs(type) {\n        const args = [];\n        args[4] = type;\n        args[5] = this;\n        let opposite;\n        let i = 0;\n        let j = 0;\n        if (type === 'source') {\n            i = 2;\n            opposite = 'target';\n        }\n        else {\n            j = 2;\n            opposite = 'source';\n        }\n        const terminal = this.cell[opposite];\n        const cellId = terminal.cell;\n        if (cellId) {\n            let magnet;\n            const view = (args[i] = this.graph.findViewByCell(cellId));\n            if (view) {\n                magnet = view.getMagnetFromEdgeTerminal(terminal);\n                if (magnet === view.container) {\n                    magnet = undefined;\n                }\n            }\n            args[i + 1] = magnet;\n        }\n        return (cellView, magnet) => {\n            args[j] = cellView;\n            args[j + 1] = cellView.container === magnet ? undefined : magnet;\n            return args;\n        };\n    }\n    beforeArrowheadDragging(data) {\n        data.zIndex = this.cell.zIndex;\n        this.cell.toFront();\n        const style = this.container.style;\n        data.pointerEvents = style.pointerEvents;\n        style.pointerEvents = 'none';\n        if (this.graph.options.connecting.highlight) {\n            this.highlightAvailableMagnets(data);\n        }\n    }\n    afterArrowheadDragging(data) {\n        if (data.zIndex != null) {\n            this.cell.setZIndex(data.zIndex, { ui: true });\n            data.zIndex = null;\n        }\n        const container = this.container;\n        container.style.pointerEvents = data.pointerEvents || '';\n        if (this.graph.options.connecting.highlight) {\n            this.unhighlightAvailableMagnets(data);\n        }\n    }\n    validateConnection(sourceView, sourceMagnet, targetView, targetMagnet, terminalType, edgeView, candidateTerminal) {\n        const options = this.graph.options.connecting;\n        const allowLoop = options.allowLoop;\n        const allowNode = options.allowNode;\n        const allowEdge = options.allowEdge;\n        const allowPort = options.allowPort;\n        const allowMulti = options.allowMulti;\n        const validate = options.validateConnection;\n        const edge = edgeView ? edgeView.cell : null;\n        const terminalView = terminalType === 'target' ? targetView : sourceView;\n        const terminalMagnet = terminalType === 'target' ? targetMagnet : sourceMagnet;\n        let valid = true;\n        const doValidate = (validate) => {\n            const sourcePort = terminalType === 'source'\n                ? candidateTerminal\n                    ? candidateTerminal.port\n                    : null\n                : edge\n                    ? edge.getSourcePortId()\n                    : null;\n            const targetPort = terminalType === 'target'\n                ? candidateTerminal\n                    ? candidateTerminal.port\n                    : null\n                : edge\n                    ? edge.getTargetPortId()\n                    : null;\n            return FunctionExt.call(validate, this.graph, {\n                edge,\n                edgeView,\n                sourceView,\n                targetView,\n                sourcePort,\n                targetPort,\n                sourceMagnet,\n                targetMagnet,\n                sourceCell: sourceView ? sourceView.cell : null,\n                targetCell: targetView ? targetView.cell : null,\n                type: terminalType,\n            });\n        };\n        if (allowLoop != null) {\n            if (typeof allowLoop === 'boolean') {\n                if (!allowLoop && sourceView === targetView) {\n                    valid = false;\n                }\n            }\n            else {\n                valid = doValidate(allowLoop);\n            }\n        }\n        if (valid && allowPort != null) {\n            if (typeof allowPort === 'boolean') {\n                if (!allowPort && terminalMagnet) {\n                    valid = false;\n                }\n            }\n            else {\n                valid = doValidate(allowPort);\n            }\n        }\n        if (valid && allowEdge != null) {\n            if (typeof allowEdge === 'boolean') {\n                if (!allowEdge && EdgeView.isEdgeView(terminalView)) {\n                    valid = false;\n                }\n            }\n            else {\n                valid = doValidate(allowEdge);\n            }\n        }\n        // When judging nodes, the influence of the ports should be excluded,\n        // because the ports and nodes have the same terminalView\n        if (valid && allowNode != null && terminalMagnet == null) {\n            if (typeof allowNode === 'boolean') {\n                if (!allowNode && NodeView.isNodeView(terminalView)) {\n                    valid = false;\n                }\n            }\n            else {\n                valid = doValidate(allowNode);\n            }\n        }\n        if (valid && allowMulti != null && edgeView) {\n            const edge = edgeView.cell;\n            const source = terminalType === 'source'\n                ? candidateTerminal\n                : edge.getSource();\n            const target = terminalType === 'target'\n                ? candidateTerminal\n                : edge.getTarget();\n            const terminalCell = candidateTerminal\n                ? this.graph.getCellById(candidateTerminal.cell)\n                : null;\n            if (source && target && source.cell && target.cell && terminalCell) {\n                if (typeof allowMulti === 'function') {\n                    valid = doValidate(allowMulti);\n                }\n                else {\n                    const connectedEdges = this.graph.model.getConnectedEdges(terminalCell, {\n                        outgoing: terminalType === 'source',\n                        incoming: terminalType === 'target',\n                    });\n                    if (connectedEdges.length) {\n                        if (allowMulti === 'withPort') {\n                            const exist = connectedEdges.some((link) => {\n                                const s = link.getSource();\n                                const t = link.getTarget();\n                                return (s &&\n                                    t &&\n                                    s.cell === source.cell &&\n                                    t.cell === target.cell &&\n                                    s.port != null &&\n                                    s.port === source.port &&\n                                    t.port != null &&\n                                    t.port === target.port);\n                            });\n                            if (exist) {\n                                valid = false;\n                            }\n                        }\n                        else if (!allowMulti) {\n                            const exist = connectedEdges.some((link) => {\n                                const s = link.getSource();\n                                const t = link.getTarget();\n                                return (s && t && s.cell === source.cell && t.cell === target.cell);\n                            });\n                            if (exist) {\n                                valid = false;\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        if (valid && validate != null) {\n            valid = doValidate(validate);\n        }\n        return valid;\n    }\n    allowConnectToBlank(edge) {\n        const graph = this.graph;\n        const options = graph.options.connecting;\n        const allowBlank = options.allowBlank;\n        if (typeof allowBlank !== 'function') {\n            return !!allowBlank;\n        }\n        const edgeView = graph.findViewByCell(edge);\n        const sourceCell = edge.getSourceCell();\n        const targetCell = edge.getTargetCell();\n        const sourceView = graph.findViewByCell(sourceCell);\n        const targetView = graph.findViewByCell(targetCell);\n        return FunctionExt.call(allowBlank, graph, {\n            edge,\n            edgeView,\n            sourceCell,\n            targetCell,\n            sourceView,\n            targetView,\n            sourcePort: edge.getSourcePortId(),\n            targetPort: edge.getTargetPortId(),\n            sourceMagnet: edgeView.sourceMagnet,\n            targetMagnet: edgeView.targetMagnet,\n        });\n    }\n    validateEdge(edge, type, initialTerminal) {\n        const graph = this.graph;\n        if (!this.allowConnectToBlank(edge)) {\n            const sourceId = edge.getSourceCellId();\n            const targetId = edge.getTargetCellId();\n            if (!(sourceId && targetId)) {\n                return false;\n            }\n        }\n        const validate = graph.options.connecting.validateEdge;\n        if (validate) {\n            return FunctionExt.call(validate, graph, {\n                edge,\n                type,\n                previous: initialTerminal,\n            });\n        }\n        return true;\n    }\n    arrowheadDragging(target, x, y, data) {\n        data.x = x;\n        data.y = y;\n        // Checking views right under the pointer\n        if (data.currentTarget !== target) {\n            // Unhighlight the previous view under pointer if there was one.\n            if (data.currentMagnet && data.currentView) {\n                data.currentView.unhighlight(data.currentMagnet, {\n                    type: 'magnetAdsorbed',\n                });\n            }\n            data.currentView = this.graph.findViewByElem(target);\n            if (data.currentView) {\n                // If we found a view that is under the pointer, we need to find\n                // the closest magnet based on the real target element of the event.\n                data.currentMagnet = data.currentView.findMagnet(target);\n                if (data.currentMagnet &&\n                    this.validateConnection(...data.getValidateConnectionArgs(data.currentView, data.currentMagnet), data.currentView.getEdgeTerminal(data.currentMagnet, x, y, this.cell, data.terminalType))) {\n                    data.currentView.highlight(data.currentMagnet, {\n                        type: 'magnetAdsorbed',\n                    });\n                }\n                else {\n                    // This type of connection is not valid. Disregard this magnet.\n                    data.currentMagnet = null;\n                }\n            }\n            else {\n                // Make sure we'll unset previous magnet.\n                data.currentMagnet = null;\n            }\n        }\n        data.currentTarget = target;\n        this.cell.prop(data.terminalType, { x, y }, Object.assign(Object.assign({}, data.options), { ui: true }));\n    }\n    arrowheadDragged(data, x, y) {\n        const view = data.currentView;\n        const magnet = data.currentMagnet;\n        if (!magnet || !view) {\n            return;\n        }\n        view.unhighlight(magnet, { type: 'magnetAdsorbed' });\n        const type = data.terminalType;\n        const terminal = view.getEdgeTerminal(magnet, x, y, this.cell, type);\n        this.cell.setTerminal(type, terminal, { ui: true });\n    }\n    snapArrowhead(x, y, data) {\n        const graph = this.graph;\n        const { snap, allowEdge } = graph.options.connecting;\n        const radius = (typeof snap === 'object' && snap.radius) || 50;\n        const views = graph.renderer.findViewsInArea({\n            x: x - radius,\n            y: y - radius,\n            width: 2 * radius,\n            height: 2 * radius,\n        }, { nodeOnly: true });\n        if (allowEdge) {\n            const edgeViews = graph.renderer\n                .findEdgeViewsFromPoint({ x, y }, radius)\n                .filter((view) => {\n                return view !== this;\n            });\n            views.push(...edgeViews);\n        }\n        const prevView = data.closestView || null;\n        const prevMagnet = data.closestMagnet || null;\n        data.closestView = null;\n        data.closestMagnet = null;\n        let distance;\n        let minDistance = Number.MAX_SAFE_INTEGER;\n        const pos = new Point(x, y);\n        views.forEach((view) => {\n            if (view.container.getAttribute('magnet') !== 'false') {\n                if (view.isNodeView()) {\n                    distance = view.cell.getBBox().getCenter().distance(pos);\n                }\n                else if (view.isEdgeView()) {\n                    const point = view.getClosestPoint(pos);\n                    if (point) {\n                        distance = point.distance(pos);\n                    }\n                    else {\n                        distance = Number.MAX_SAFE_INTEGER;\n                    }\n                }\n                if (distance < radius && distance < minDistance) {\n                    if (prevMagnet === view.container ||\n                        this.validateConnection(...data.getValidateConnectionArgs(view, null), view.getEdgeTerminal(view.container, x, y, this.cell, data.terminalType))) {\n                        minDistance = distance;\n                        data.closestView = view;\n                        data.closestMagnet = view.container;\n                    }\n                }\n            }\n            view.container.querySelectorAll('[magnet]').forEach((magnet) => {\n                if (magnet.getAttribute('magnet') !== 'false') {\n                    const bbox = view.getBBoxOfElement(magnet);\n                    distance = pos.distance(bbox.getCenter());\n                    if (distance < radius && distance < minDistance) {\n                        if (prevMagnet === magnet ||\n                            this.validateConnection(...data.getValidateConnectionArgs(view, magnet), view.getEdgeTerminal(magnet, x, y, this.cell, data.terminalType))) {\n                            minDistance = distance;\n                            data.closestView = view;\n                            data.closestMagnet = magnet;\n                        }\n                    }\n                }\n            });\n        });\n        let terminal;\n        const type = data.terminalType;\n        const closestView = data.closestView;\n        const closestMagnet = data.closestMagnet;\n        const changed = prevMagnet !== closestMagnet;\n        if (prevView && changed) {\n            prevView.unhighlight(prevMagnet, {\n                type: 'magnetAdsorbed',\n            });\n        }\n        if (closestView) {\n            if (!changed) {\n                return;\n            }\n            closestView.highlight(closestMagnet, {\n                type: 'magnetAdsorbed',\n            });\n            terminal = closestView.getEdgeTerminal(closestMagnet, x, y, this.cell, type);\n        }\n        else {\n            terminal = { x, y };\n        }\n        this.cell.setTerminal(type, terminal, {}, Object.assign(Object.assign({}, data.options), { ui: true }));\n    }\n    snapArrowheadEnd(data) {\n        // Finish off link snapping.\n        // Everything except view unhighlighting was already done on pointermove.\n        const closestView = data.closestView;\n        const closestMagnet = data.closestMagnet;\n        if (closestView && closestMagnet) {\n            closestView.unhighlight(closestMagnet, {\n                type: 'magnetAdsorbed',\n            });\n            data.currentMagnet = closestView.findMagnet(closestMagnet);\n        }\n        data.closestView = null;\n        data.closestMagnet = null;\n    }\n    finishEmbedding(data) {\n        // Resets parent of the edge if embedding is enabled\n        if (this.graph.options.embedding.enabled && this.cell.updateParent()) {\n            // Make sure we don't reverse to the original 'z' index\n            data.zIndex = null;\n        }\n    }\n    fallbackConnection(data) {\n        switch (data.fallbackAction) {\n            case 'remove':\n                this.cell.remove({ ui: true });\n                break;\n            case 'revert':\n            default:\n                this.cell.prop(data.terminalType, data.initialTerminal, {\n                    ui: true,\n                });\n                break;\n        }\n    }\n    notifyConnectionEvent(data, e) {\n        const terminalType = data.terminalType;\n        const initialTerminal = data.initialTerminal;\n        const currentTerminal = this.cell[terminalType];\n        const changed = currentTerminal && !Edge.equalTerminals(initialTerminal, currentTerminal);\n        if (changed) {\n            const graph = this.graph;\n            const previous = initialTerminal;\n            const previousCell = previous.cell\n                ? graph.getCellById(previous.cell)\n                : null;\n            const previousPort = previous.port;\n            const previousView = previousCell\n                ? graph.findViewByCell(previousCell)\n                : null;\n            const previousPoint = previousCell || data.isNewEdge\n                ? null\n                : Point.create(initialTerminal).toJSON();\n            const current = currentTerminal;\n            const currentCell = current.cell ? graph.getCellById(current.cell) : null;\n            const currentPort = current.port;\n            const currentView = currentCell ? graph.findViewByCell(currentCell) : null;\n            const currentPoint = currentCell\n                ? null\n                : Point.create(currentTerminal).toJSON();\n            this.notify('edge:connected', {\n                e,\n                previousCell,\n                previousPort,\n                previousView,\n                previousPoint,\n                currentCell,\n                currentView,\n                currentPort,\n                currentPoint,\n                previousMagnet: data.initialMagnet,\n                currentMagnet: data.currentMagnet,\n                edge: this.cell,\n                view: this,\n                type: terminalType,\n                isNew: data.isNewEdge,\n            });\n        }\n    }\n    highlightAvailableMagnets(data) {\n        const graph = this.graph;\n        const cells = graph.model.getCells();\n        data.marked = {};\n        for (let i = 0, ii = cells.length; i < ii; i += 1) {\n            const view = graph.findViewByCell(cells[i]);\n            // Prevent highlighting new edge\n            // Close https://github.com/antvis/X6/issues/2853\n            if (!view || view.cell.id === this.cell.id) {\n                continue;\n            }\n            const magnets = Array.prototype.slice.call(view.container.querySelectorAll('[magnet]'));\n            if (view.container.getAttribute('magnet') !== 'false') {\n                magnets.push(view.container);\n            }\n            const availableMagnets = magnets.filter((magnet) => this.validateConnection(...data.getValidateConnectionArgs(view, magnet), view.getEdgeTerminal(magnet, data.x, data.y, this.cell, data.terminalType)));\n            if (availableMagnets.length > 0) {\n                // highlight all available magnets\n                for (let j = 0, jj = availableMagnets.length; j < jj; j += 1) {\n                    view.highlight(availableMagnets[j], { type: 'magnetAvailable' });\n                }\n                // highlight the entire view\n                view.highlight(null, { type: 'nodeAvailable' });\n                data.marked[view.cell.id] = availableMagnets;\n            }\n        }\n    }\n    unhighlightAvailableMagnets(data) {\n        const marked = data.marked || {};\n        Object.keys(marked).forEach((id) => {\n            const view = this.graph.findViewByCell(id);\n            if (view) {\n                const magnets = marked[id];\n                magnets.forEach((magnet) => {\n                    view.unhighlight(magnet, { type: 'magnetAvailable' });\n                });\n                view.unhighlight(null, { type: 'nodeAvailable' });\n            }\n        });\n        data.marked = null;\n    }\n    startArrowheadDragging(e, x, y) {\n        if (!this.can('arrowheadMovable')) {\n            this.notifyUnhandledMouseDown(e, x, y);\n            return;\n        }\n        const elem = e.target;\n        const type = elem.getAttribute('data-terminal');\n        const data = this.prepareArrowheadDragging(type, { x, y });\n        this.setEventData(e, data);\n    }\n    dragArrowhead(e, x, y) {\n        const data = this.getEventData(e);\n        if (this.graph.options.connecting.snap) {\n            this.snapArrowhead(x, y, data);\n        }\n        else {\n            this.arrowheadDragging(this.getEventTarget(e), x, y, data);\n        }\n    }\n    stopArrowheadDragging(e, x, y) {\n        const graph = this.graph;\n        const data = this.getEventData(e);\n        if (graph.options.connecting.snap) {\n            this.snapArrowheadEnd(data);\n        }\n        else {\n            this.arrowheadDragged(data, x, y);\n        }\n        const valid = this.validateEdge(this.cell, data.terminalType, data.initialTerminal);\n        if (valid) {\n            this.finishEmbedding(data);\n            this.notifyConnectionEvent(data, e);\n        }\n        else {\n            // If the changed edge is not allowed, revert to its previous state.\n            this.fallbackConnection(data);\n        }\n        this.afterArrowheadDragging(data);\n    }\n    // #endregion\n    // #region drag lable\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    startLabelDragging(e, x, y) {\n        if (this.can('edgeLabelMovable')) {\n            const target = e.currentTarget;\n            const index = parseInt(target.getAttribute('data-index'), 10);\n            const positionAngle = this.getLabelPositionAngle(index);\n            const labelPositionArgs = this.getLabelPositionArgs(index);\n            const defaultLabelPositionArgs = this.getDefaultLabelPositionArgs();\n            const positionArgs = this.mergeLabelPositionArgs(labelPositionArgs, defaultLabelPositionArgs);\n            this.setEventData(e, {\n                index,\n                positionAngle,\n                positionArgs,\n                stopPropagation: true,\n                action: 'drag-label',\n            });\n        }\n        else {\n            // If labels can't be dragged no default action is triggered.\n            this.setEventData(e, { stopPropagation: true });\n        }\n        this.graph.view.delegateDragEvents(e, this);\n    }\n    dragLabel(e, x, y) {\n        const data = this.getEventData(e);\n        const originLabel = this.cell.getLabelAt(data.index);\n        const label = ObjectExt.merge({}, originLabel, {\n            position: this.getLabelPosition(x, y, data.positionAngle, data.positionArgs),\n        });\n        this.cell.setLabelAt(data.index, label);\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    stopLabelDragging(e, x, y) { }\n}\n(function (EdgeView) {\n    EdgeView.toStringTag = `X6.${EdgeView.name}`;\n    function isEdgeView(instance) {\n        if (instance == null) {\n            return false;\n        }\n        if (instance instanceof EdgeView) {\n            return true;\n        }\n        const tag = instance[Symbol.toStringTag];\n        const view = instance;\n        if ((tag == null || tag === EdgeView.toStringTag) &&\n            typeof view.isNodeView === 'function' &&\n            typeof view.isEdgeView === 'function' &&\n            typeof view.confirmUpdate === 'function' &&\n            typeof view.update === 'function' &&\n            typeof view.getConnection === 'function') {\n            return true;\n        }\n        return false;\n    }\n    EdgeView.isEdgeView = isEdgeView;\n})(EdgeView || (EdgeView = {}));\nEdgeView.config({\n    isSvgElement: true,\n    priority: 1,\n    bootstrap: ['render', 'source', 'target'],\n    actions: {\n        view: ['render'],\n        markup: ['render'],\n        attrs: ['update'],\n        source: ['source', 'update'],\n        target: ['target', 'update'],\n        router: ['update'],\n        connector: ['update'],\n        labels: ['labels'],\n        defaultLabel: ['labels'],\n        tools: ['tools'],\n        vertices: ['vertices', 'update'],\n    },\n});\nEdgeView.registry.register('edge', EdgeView, true);\n//# sourceMappingURL=edge.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Dom, FunctionExt } from '@antv/x6-common';\nimport { Cell } from '../model';\nimport { Config } from '../config';\nimport { View, Markup } from '../view';\nexport class GraphView extends View {\n    get options() {\n        return this.graph.options;\n    }\n    constructor(graph) {\n        super();\n        this.graph = graph;\n        const { selectors, fragment } = Markup.parseJSONMarkup(GraphView.markup);\n        this.background = selectors.background;\n        this.grid = selectors.grid;\n        this.svg = selectors.svg;\n        this.defs = selectors.defs;\n        this.viewport = selectors.viewport;\n        this.primer = selectors.primer;\n        this.stage = selectors.stage;\n        this.decorator = selectors.decorator;\n        this.overlay = selectors.overlay;\n        this.container = this.options.container;\n        this.restore = GraphView.snapshoot(this.container);\n        Dom.addClass(this.container, this.prefixClassName('graph'));\n        Dom.append(this.container, fragment);\n        this.delegateEvents();\n    }\n    delegateEvents() {\n        const ctor = this.constructor;\n        super.delegateEvents(ctor.events);\n        return this;\n    }\n    /**\n     * Guard the specified event. If the event is not interesting, it\n     * returns `true`, otherwise returns `false`.\n     */\n    guard(e, view) {\n        // handled as `contextmenu` type\n        if (e.type === 'mousedown' && e.button === 2) {\n            return true;\n        }\n        if (this.options.guard && this.options.guard(e, view)) {\n            return true;\n        }\n        if (e.data && e.data.guarded !== undefined) {\n            return e.data.guarded;\n        }\n        if (view && view.cell && Cell.isCell(view.cell)) {\n            return false;\n        }\n        if (this.svg === e.target ||\n            this.container === e.target ||\n            this.svg.contains(e.target)) {\n            return false;\n        }\n        return true;\n    }\n    findView(elem) {\n        return this.graph.findViewByElem(elem);\n    }\n    onDblClick(evt) {\n        if (this.options.preventDefaultDblClick) {\n            evt.preventDefault();\n        }\n        const e = this.normalizeEvent(evt);\n        const view = this.findView(e.target);\n        if (this.guard(e, view)) {\n            return;\n        }\n        const localPoint = this.graph.snapToGrid(e.clientX, e.clientY);\n        if (view) {\n            view.onDblClick(e, localPoint.x, localPoint.y);\n        }\n        else {\n            this.graph.trigger('blank:dblclick', {\n                e,\n                x: localPoint.x,\n                y: localPoint.y,\n            });\n        }\n    }\n    onClick(evt) {\n        if (this.getMouseMovedCount(evt) <= this.options.clickThreshold) {\n            const e = this.normalizeEvent(evt);\n            const view = this.findView(e.target);\n            if (this.guard(e, view)) {\n                return;\n            }\n            const localPoint = this.graph.snapToGrid(e.clientX, e.clientY);\n            if (view) {\n                view.onClick(e, localPoint.x, localPoint.y);\n            }\n            else {\n                this.graph.trigger('blank:click', {\n                    e,\n                    x: localPoint.x,\n                    y: localPoint.y,\n                });\n            }\n        }\n    }\n    isPreventDefaultContextMenu(view) {\n        let preventDefaultContextMenu = this.options.preventDefaultContextMenu;\n        if (typeof preventDefaultContextMenu === 'function') {\n            preventDefaultContextMenu = FunctionExt.call(preventDefaultContextMenu, this.graph, { view });\n        }\n        return preventDefaultContextMenu;\n    }\n    onContextMenu(evt) {\n        const e = this.normalizeEvent(evt);\n        const view = this.findView(e.target);\n        if (this.isPreventDefaultContextMenu(view)) {\n            evt.preventDefault();\n        }\n        if (this.guard(e, view)) {\n            return;\n        }\n        const localPoint = this.graph.snapToGrid(e.clientX, e.clientY);\n        if (view) {\n            view.onContextMenu(e, localPoint.x, localPoint.y);\n        }\n        else {\n            this.graph.trigger('blank:contextmenu', {\n                e,\n                x: localPoint.x,\n                y: localPoint.y,\n            });\n        }\n    }\n    delegateDragEvents(e, view) {\n        if (e.data == null) {\n            e.data = {};\n        }\n        this.setEventData(e, {\n            currentView: view || null,\n            mouseMovedCount: 0,\n            startPosition: {\n                x: e.clientX,\n                y: e.clientY,\n            },\n        });\n        const ctor = this.constructor;\n        this.delegateDocumentEvents(ctor.documentEvents, e.data);\n        this.undelegateEvents();\n    }\n    getMouseMovedCount(e) {\n        const data = this.getEventData(e);\n        return data.mouseMovedCount || 0;\n    }\n    onMouseDown(evt) {\n        const e = this.normalizeEvent(evt);\n        const view = this.findView(e.target);\n        if (this.guard(e, view)) {\n            return;\n        }\n        if (this.options.preventDefaultMouseDown) {\n            evt.preventDefault();\n        }\n        const localPoint = this.graph.snapToGrid(e.clientX, e.clientY);\n        if (view) {\n            view.onMouseDown(e, localPoint.x, localPoint.y);\n        }\n        else {\n            if (this.options.preventDefaultBlankAction &&\n                ['touchstart'].includes(e.type)) {\n                evt.preventDefault();\n            }\n            this.graph.trigger('blank:mousedown', {\n                e,\n                x: localPoint.x,\n                y: localPoint.y,\n            });\n        }\n        this.delegateDragEvents(e, view);\n    }\n    onMouseMove(evt) {\n        const data = this.getEventData(evt);\n        const startPosition = data.startPosition;\n        if (startPosition &&\n            startPosition.x === evt.clientX &&\n            startPosition.y === evt.clientY) {\n            return;\n        }\n        if (data.mouseMovedCount == null) {\n            data.mouseMovedCount = 0;\n        }\n        data.mouseMovedCount += 1;\n        const mouseMovedCount = data.mouseMovedCount;\n        if (mouseMovedCount <= this.options.moveThreshold) {\n            return;\n        }\n        const e = this.normalizeEvent(evt);\n        const localPoint = this.graph.snapToGrid(e.clientX, e.clientY);\n        const view = data.currentView;\n        if (view) {\n            view.onMouseMove(e, localPoint.x, localPoint.y);\n        }\n        else {\n            this.graph.trigger('blank:mousemove', {\n                e,\n                x: localPoint.x,\n                y: localPoint.y,\n            });\n        }\n        this.setEventData(e, data);\n    }\n    onMouseUp(e) {\n        this.undelegateDocumentEvents();\n        const normalized = this.normalizeEvent(e);\n        const localPoint = this.graph.snapToGrid(normalized.clientX, normalized.clientY);\n        const data = this.getEventData(e);\n        const view = data.currentView;\n        if (view) {\n            view.onMouseUp(normalized, localPoint.x, localPoint.y);\n        }\n        else {\n            this.graph.trigger('blank:mouseup', {\n                e: normalized,\n                x: localPoint.x,\n                y: localPoint.y,\n            });\n        }\n        if (!e.isPropagationStopped()) {\n            const ev = new Dom.EventObject(e, {\n                type: 'click',\n                data: e.data,\n            });\n            this.onClick(ev);\n        }\n        e.stopImmediatePropagation();\n        this.delegateEvents();\n    }\n    onMouseOver(evt) {\n        const e = this.normalizeEvent(evt);\n        const view = this.findView(e.target);\n        if (this.guard(e, view)) {\n            return;\n        }\n        if (view) {\n            view.onMouseOver(e);\n        }\n        else {\n            // prevent border of paper from triggering this\n            if (this.container === e.target) {\n                return;\n            }\n            this.graph.trigger('blank:mouseover', { e });\n        }\n    }\n    onMouseOut(evt) {\n        const e = this.normalizeEvent(evt);\n        const view = this.findView(e.target);\n        if (this.guard(e, view)) {\n            return;\n        }\n        if (view) {\n            view.onMouseOut(e);\n        }\n        else {\n            if (this.container === e.target) {\n                return;\n            }\n            this.graph.trigger('blank:mouseout', { e });\n        }\n    }\n    onMouseEnter(evt) {\n        const e = this.normalizeEvent(evt);\n        const view = this.findView(e.target);\n        if (this.guard(e, view)) {\n            return;\n        }\n        const relatedView = this.graph.findViewByElem(e.relatedTarget);\n        if (view) {\n            if (relatedView === view) {\n                // mouse moved from tool to view\n                return;\n            }\n            view.onMouseEnter(e);\n        }\n        else {\n            if (relatedView) {\n                return;\n            }\n            this.graph.trigger('graph:mouseenter', { e });\n        }\n    }\n    onMouseLeave(evt) {\n        const e = this.normalizeEvent(evt);\n        const view = this.findView(e.target);\n        if (this.guard(e, view)) {\n            return;\n        }\n        const relatedView = this.graph.findViewByElem(e.relatedTarget);\n        if (view) {\n            if (relatedView === view) {\n                // mouse moved from view to tool\n                return;\n            }\n            view.onMouseLeave(e);\n        }\n        else {\n            if (relatedView) {\n                return;\n            }\n            this.graph.trigger('graph:mouseleave', { e });\n        }\n    }\n    onMouseWheel(evt) {\n        const e = this.normalizeEvent(evt);\n        const view = this.findView(e.target);\n        if (this.guard(e, view)) {\n            return;\n        }\n        const originalEvent = e.originalEvent;\n        const localPoint = this.graph.snapToGrid(originalEvent.clientX, originalEvent.clientY);\n        const delta = Math.max(-1, Math.min(1, originalEvent.wheelDelta || -originalEvent.detail));\n        if (view) {\n            view.onMouseWheel(e, localPoint.x, localPoint.y, delta);\n        }\n        else {\n            this.graph.trigger('blank:mousewheel', {\n                e,\n                delta,\n                x: localPoint.x,\n                y: localPoint.y,\n            });\n        }\n    }\n    onCustomEvent(evt) {\n        const elem = evt.currentTarget;\n        const event = elem.getAttribute('event') || elem.getAttribute('data-event');\n        if (event) {\n            const view = this.findView(elem);\n            if (view) {\n                const e = this.normalizeEvent(evt);\n                if (this.guard(e, view)) {\n                    return;\n                }\n                const localPoint = this.graph.snapToGrid(e.clientX, e.clientY);\n                view.onCustomEvent(e, event, localPoint.x, localPoint.y);\n            }\n        }\n    }\n    handleMagnetEvent(evt, handler) {\n        const magnetElem = evt.currentTarget;\n        const magnetValue = magnetElem.getAttribute('magnet');\n        if (magnetValue && magnetValue.toLowerCase() !== 'false') {\n            const view = this.findView(magnetElem);\n            if (view) {\n                const e = this.normalizeEvent(evt);\n                if (this.guard(e, view)) {\n                    return;\n                }\n                const localPoint = this.graph.snapToGrid(e.clientX, e.clientY);\n                FunctionExt.call(handler, this.graph, view, e, magnetElem, localPoint.x, localPoint.y);\n            }\n        }\n    }\n    onMagnetMouseDown(e) {\n        this.handleMagnetEvent(e, (view, e, magnet, x, y) => {\n            view.onMagnetMouseDown(e, magnet, x, y);\n        });\n    }\n    onMagnetDblClick(e) {\n        this.handleMagnetEvent(e, (view, e, magnet, x, y) => {\n            view.onMagnetDblClick(e, magnet, x, y);\n        });\n    }\n    onMagnetContextMenu(e) {\n        const view = this.findView(e.target);\n        if (this.isPreventDefaultContextMenu(view)) {\n            e.preventDefault();\n        }\n        this.handleMagnetEvent(e, (view, e, magnet, x, y) => {\n            view.onMagnetContextMenu(e, magnet, x, y);\n        });\n    }\n    onLabelMouseDown(evt) {\n        const labelNode = evt.currentTarget;\n        const view = this.findView(labelNode);\n        if (view) {\n            const e = this.normalizeEvent(evt);\n            if (this.guard(e, view)) {\n                return;\n            }\n            const localPoint = this.graph.snapToGrid(e.clientX, e.clientY);\n            view.onLabelMouseDown(e, localPoint.x, localPoint.y);\n        }\n    }\n    onImageDragStart() {\n        // This is the only way to prevent image dragging in Firefox that works.\n        // Setting -moz-user-select: none, draggable=\"false\" attribute or\n        // user-drag: none didn't help.\n        return false;\n    }\n    dispose() {\n        this.undelegateEvents();\n        this.undelegateDocumentEvents();\n        this.restore();\n        this.restore = () => { };\n    }\n}\n__decorate([\n    View.dispose()\n], GraphView.prototype, \"dispose\", null);\n(function (GraphView) {\n    const prefixCls = `${Config.prefixCls}-graph`;\n    GraphView.markup = [\n        {\n            ns: Dom.ns.xhtml,\n            tagName: 'div',\n            selector: 'background',\n            className: `${prefixCls}-background`,\n        },\n        {\n            ns: Dom.ns.xhtml,\n            tagName: 'div',\n            selector: 'grid',\n            className: `${prefixCls}-grid`,\n        },\n        {\n            ns: Dom.ns.svg,\n            tagName: 'svg',\n            selector: 'svg',\n            className: `${prefixCls}-svg`,\n            attrs: {\n                width: '100%',\n                height: '100%',\n                'xmlns:xlink': Dom.ns.xlink,\n            },\n            children: [\n                {\n                    tagName: 'defs',\n                    selector: 'defs',\n                },\n                {\n                    tagName: 'g',\n                    selector: 'viewport',\n                    className: `${prefixCls}-svg-viewport`,\n                    children: [\n                        {\n                            tagName: 'g',\n                            selector: 'primer',\n                            className: `${prefixCls}-svg-primer`,\n                        },\n                        {\n                            tagName: 'g',\n                            selector: 'stage',\n                            className: `${prefixCls}-svg-stage`,\n                        },\n                        {\n                            tagName: 'g',\n                            selector: 'decorator',\n                            className: `${prefixCls}-svg-decorator`,\n                        },\n                        {\n                            tagName: 'g',\n                            selector: 'overlay',\n                            className: `${prefixCls}-svg-overlay`,\n                        },\n                    ],\n                },\n            ],\n        },\n    ];\n    function snapshoot(elem) {\n        const cloned = elem.cloneNode();\n        elem.childNodes.forEach((child) => cloned.appendChild(child));\n        return () => {\n            // remove all children\n            Dom.empty(elem);\n            // remove all attributes\n            while (elem.attributes.length > 0) {\n                elem.removeAttribute(elem.attributes[0].name);\n            }\n            // restore attributes\n            for (let i = 0, l = cloned.attributes.length; i < l; i += 1) {\n                const attr = cloned.attributes[i];\n                elem.setAttribute(attr.name, attr.value);\n            }\n            // restore children\n            cloned.childNodes.forEach((child) => elem.appendChild(child));\n        };\n    }\n    GraphView.snapshoot = snapshoot;\n})(GraphView || (GraphView = {}));\n(function (GraphView) {\n    const prefixCls = Config.prefixCls;\n    GraphView.events = {\n        dblclick: 'onDblClick',\n        contextmenu: 'onContextMenu',\n        touchstart: 'onMouseDown',\n        mousedown: 'onMouseDown',\n        mouseover: 'onMouseOver',\n        mouseout: 'onMouseOut',\n        mouseenter: 'onMouseEnter',\n        mouseleave: 'onMouseLeave',\n        mousewheel: 'onMouseWheel',\n        DOMMouseScroll: 'onMouseWheel',\n        [`mouseenter  .${prefixCls}-cell`]: 'onMouseEnter',\n        [`mouseleave  .${prefixCls}-cell`]: 'onMouseLeave',\n        [`mouseenter  .${prefixCls}-cell-tools`]: 'onMouseEnter',\n        [`mouseleave  .${prefixCls}-cell-tools`]: 'onMouseLeave',\n        [`mousedown   .${prefixCls}-cell [event]`]: 'onCustomEvent',\n        [`touchstart  .${prefixCls}-cell [event]`]: 'onCustomEvent',\n        [`mousedown   .${prefixCls}-cell [data-event]`]: 'onCustomEvent',\n        [`touchstart  .${prefixCls}-cell [data-event]`]: 'onCustomEvent',\n        [`dblclick    .${prefixCls}-cell [magnet]`]: 'onMagnetDblClick',\n        [`contextmenu .${prefixCls}-cell [magnet]`]: 'onMagnetContextMenu',\n        [`mousedown   .${prefixCls}-cell [magnet]`]: 'onMagnetMouseDown',\n        [`touchstart  .${prefixCls}-cell [magnet]`]: 'onMagnetMouseDown',\n        [`dblclick    .${prefixCls}-cell [data-magnet]`]: 'onMagnetDblClick',\n        [`contextmenu .${prefixCls}-cell [data-magnet]`]: 'onMagnetContextMenu',\n        [`mousedown   .${prefixCls}-cell [data-magnet]`]: 'onMagnetMouseDown',\n        [`touchstart  .${prefixCls}-cell [data-magnet]`]: 'onMagnetMouseDown',\n        [`dragstart   .${prefixCls}-cell image`]: 'onImageDragStart',\n        [`mousedown   .${prefixCls}-edge .${prefixCls}-edge-label`]: 'onLabelMouseDown',\n        [`touchstart  .${prefixCls}-edge .${prefixCls}-edge-label`]: 'onLabelMouseDown',\n    };\n    GraphView.documentEvents = {\n        mousemove: 'onMouseMove',\n        touchmove: 'onMouseMove',\n        mouseup: 'onMouseUp',\n        touchend: 'onMouseUp',\n        touchcancel: 'onMouseUp',\n    };\n})(GraphView || (GraphView = {}));\n//# sourceMappingURL=view.js.map","/* eslint-disable */\n/**\n * Auto generated file, do not modify it!\n */\nexport const content = `.x6-graph {\n  position: relative;\n  overflow: hidden;\n  outline: none;\n  touch-action: none;\n}\n.x6-graph-background,\n.x6-graph-grid,\n.x6-graph-svg {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n}\n.x6-graph-background-stage,\n.x6-graph-grid-stage,\n.x6-graph-svg-stage {\n  user-select: none;\n}\n.x6-graph.x6-graph-pannable {\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n}\n.x6-graph.x6-graph-panning {\n  cursor: grabbing;\n  cursor: -moz-grabbing;\n  cursor: -webkit-grabbing;\n  user-select: none;\n}\n.x6-node {\n  cursor: move;\n  /* stylelint-disable-next-line */\n}\n.x6-node.x6-node-immovable {\n  cursor: default;\n}\n.x6-node * {\n  -webkit-user-drag: none;\n}\n.x6-node .scalable * {\n  vector-effect: non-scaling-stroke;\n}\n.x6-node [magnet='true'] {\n  cursor: crosshair;\n  transition: opacity 0.3s;\n}\n.x6-node [magnet='true']:hover {\n  opacity: 0.7;\n}\n.x6-node foreignObject {\n  display: block;\n  overflow: visible;\n  background-color: transparent;\n}\n.x6-node foreignObject > body {\n  position: static;\n  width: 100%;\n  height: 100%;\n  margin: 0;\n  padding: 0;\n  overflow: visible;\n  background-color: transparent;\n}\n.x6-edge .source-marker,\n.x6-edge .target-marker {\n  vector-effect: non-scaling-stroke;\n}\n.x6-edge .connection {\n  stroke-linejoin: round;\n  fill: none;\n}\n.x6-edge .connection-wrap {\n  cursor: move;\n  opacity: 0;\n  fill: none;\n  stroke: #000;\n  stroke-width: 15;\n  stroke-linecap: round;\n  stroke-linejoin: round;\n}\n.x6-edge .connection-wrap:hover {\n  opacity: 0.4;\n  stroke-opacity: 0.4;\n}\n.x6-edge .vertices {\n  cursor: move;\n  opacity: 0;\n}\n.x6-edge .vertices .vertex {\n  fill: #1abc9c;\n}\n.x6-edge .vertices .vertex :hover {\n  fill: #34495e;\n  stroke: none;\n}\n.x6-edge .vertices .vertex-remove {\n  cursor: pointer;\n  fill: #fff;\n}\n.x6-edge .vertices .vertex-remove-area {\n  cursor: pointer;\n  opacity: 0.1;\n}\n.x6-edge .vertices .vertex-group:hover .vertex-remove-area {\n  opacity: 1;\n}\n.x6-edge .arrowheads {\n  cursor: move;\n  opacity: 0;\n}\n.x6-edge .arrowheads .arrowhead {\n  fill: #1abc9c;\n}\n.x6-edge .arrowheads .arrowhead :hover {\n  fill: #f39c12;\n  stroke: none;\n}\n.x6-edge .tools {\n  cursor: pointer;\n  opacity: 0;\n}\n.x6-edge .tools .tool-options {\n  display: none;\n}\n.x6-edge .tools .tool-remove circle {\n  fill: #f00;\n}\n.x6-edge .tools .tool-remove path {\n  fill: #fff;\n}\n.x6-edge:hover .vertices,\n.x6-edge:hover .arrowheads,\n.x6-edge:hover .tools {\n  opacity: 1;\n}\n.x6-highlight-opacity {\n  opacity: 0.3;\n}\n.x6-cell-tool-editor {\n  position: relative;\n  display: inline-block;\n  min-height: 1em;\n  margin: 0;\n  padding: 0;\n  line-height: 1;\n  white-space: normal;\n  text-align: center;\n  vertical-align: top;\n  overflow-wrap: normal;\n  outline: none;\n  transform-origin: 0 0;\n  -webkit-user-drag: none;\n}\n.x6-edge-tool-editor {\n  border: 1px solid #275fc5;\n  border-radius: 2px;\n}\n`;\n//# sourceMappingURL=raw.js.map","import { Disposable } from '@antv/x6-common';\nexport class Base extends Disposable {\n    get options() {\n        return this.graph.options;\n    }\n    get model() {\n        return this.graph.model;\n    }\n    get view() {\n        return this.graph.view;\n    }\n    constructor(graph) {\n        super();\n        this.graph = graph;\n        this.init();\n    }\n    init() { }\n}\n//# sourceMappingURL=base.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { CssLoader } from '@antv/x6-common';\nimport { Config } from '../config';\nimport { content } from '../style/raw';\nimport { Base } from './base';\nexport class CSSManager extends Base {\n    init() {\n        if (Config.autoInsertCSS) {\n            CssLoader.ensure('core', content);\n        }\n    }\n    dispose() {\n        CssLoader.clean('core');\n    }\n}\n__decorate([\n    CSSManager.dispose()\n], CSSManager.prototype, \"dispose\", null);\n//# sourceMappingURL=css.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { ObjectExt } from '@antv/x6-common';\nimport { Config } from '../config';\nimport { Edge as StandardEdge } from '../shape';\nexport var Options;\n(function (Options) {\n    function get(options) {\n        const { grid, panning, mousewheel, embedding } = options, others = __rest(options\n        // size\n        // ----\n        , [\"grid\", \"panning\", \"mousewheel\", \"embedding\"]);\n        // size\n        // ----\n        const container = options.container;\n        if (container != null) {\n            if (others.width == null) {\n                others.width = container.clientWidth;\n            }\n            if (others.height == null) {\n                others.height = container.clientHeight;\n            }\n        }\n        else {\n            throw new Error(`Ensure the container of the graph is specified and valid`);\n        }\n        const result = ObjectExt.merge({}, Options.defaults, others);\n        // grid\n        // ----\n        const defaultGrid = { size: 10, visible: false };\n        if (typeof grid === 'number') {\n            result.grid = { size: grid, visible: false };\n        }\n        else if (typeof grid === 'boolean') {\n            result.grid = Object.assign(Object.assign({}, defaultGrid), { visible: grid });\n        }\n        else {\n            result.grid = Object.assign(Object.assign({}, defaultGrid), grid);\n        }\n        // booleas\n        // -------\n        const booleas = [\n            'panning',\n            'mousewheel',\n            'embedding',\n        ];\n        booleas.forEach((key) => {\n            const val = options[key];\n            if (typeof val === 'boolean') {\n                result[key].enabled = val;\n            }\n            else {\n                result[key] = Object.assign(Object.assign({}, result[key]), val);\n            }\n        });\n        return result;\n    }\n    Options.get = get;\n})(Options || (Options = {}));\n(function (Options) {\n    Options.defaults = {\n        x: 0,\n        y: 0,\n        scaling: {\n            min: 0.01,\n            max: 16,\n        },\n        grid: {\n            size: 10,\n            visible: false,\n        },\n        background: false,\n        panning: {\n            enabled: false,\n            eventTypes: ['leftMouseDown'],\n        },\n        mousewheel: {\n            enabled: false,\n            factor: 1.2,\n            zoomAtMousePosition: true,\n        },\n        highlighting: {\n            default: {\n                name: 'stroke',\n                args: {\n                    padding: 3,\n                },\n            },\n            nodeAvailable: {\n                name: 'className',\n                args: {\n                    className: Config.prefix('available-node'),\n                },\n            },\n            magnetAvailable: {\n                name: 'className',\n                args: {\n                    className: Config.prefix('available-magnet'),\n                },\n            },\n        },\n        connecting: {\n            snap: false,\n            allowLoop: true,\n            allowNode: true,\n            allowEdge: false,\n            allowPort: true,\n            allowBlank: true,\n            allowMulti: true,\n            highlight: false,\n            anchor: 'center',\n            edgeAnchor: 'ratio',\n            connectionPoint: 'boundary',\n            router: 'normal',\n            connector: 'normal',\n            validateConnection({ type, sourceView, targetView }) {\n                const view = type === 'target' ? targetView : sourceView;\n                return view != null;\n            },\n            createEdge() {\n                return new StandardEdge();\n            },\n        },\n        translating: {\n            restrict: false,\n        },\n        embedding: {\n            enabled: false,\n            findParent: 'bbox',\n            frontOnly: true,\n            validate: () => true,\n        },\n        moveThreshold: 0,\n        clickThreshold: 0,\n        magnetThreshold: 0,\n        preventDefaultDblClick: true,\n        preventDefaultMouseDown: false,\n        preventDefaultContextMenu: true,\n        preventDefaultBlankAction: true,\n        interacting: {\n            edgeLabelMovable: false,\n        },\n        async: true,\n        virtual: false,\n        guard: () => false,\n    };\n})(Options || (Options = {}));\n//# sourceMappingURL=options.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Dom, Vector } from '@antv/x6-common';\nimport * as Registry from '../registry';\nimport { Base } from './base';\nexport class GridManager extends Base {\n    get elem() {\n        return this.view.grid;\n    }\n    get grid() {\n        return this.options.grid;\n    }\n    init() {\n        this.startListening();\n        this.draw(this.grid);\n    }\n    startListening() {\n        this.graph.on('scale', this.update, this);\n        this.graph.on('translate', this.update, this);\n    }\n    stopListening() {\n        this.graph.off('scale', this.update, this);\n        this.graph.off('translate', this.update, this);\n    }\n    setVisible(visible) {\n        if (this.grid.visible !== visible) {\n            this.grid.visible = visible;\n            this.update();\n        }\n    }\n    getGridSize() {\n        return this.grid.size;\n    }\n    setGridSize(size) {\n        this.grid.size = Math.max(size, 1);\n        this.update();\n    }\n    show() {\n        this.setVisible(true);\n        this.update();\n    }\n    hide() {\n        this.setVisible(false);\n        this.update();\n    }\n    clear() {\n        this.elem.style.backgroundImage = '';\n    }\n    draw(options) {\n        this.clear();\n        this.instance = null;\n        Object.assign(this.grid, options);\n        this.patterns = this.resolveGrid(options);\n        this.update();\n    }\n    update(options = {}) {\n        const gridSize = this.grid.size;\n        if (gridSize <= 1 || !this.grid.visible) {\n            return this.clear();\n        }\n        const ctm = this.graph.matrix();\n        const grid = this.getInstance();\n        const items = Array.isArray(options) ? options : [options];\n        this.patterns.forEach((settings, index) => {\n            const id = `pattern_${index}`;\n            const sx = ctm.a || 1;\n            const sy = ctm.d || 1;\n            const { update, markup } = settings, others = __rest(settings, [\"update\", \"markup\"]);\n            const options = Object.assign(Object.assign(Object.assign({}, others), items[index]), { sx,\n                sy, ox: ctm.e || 0, oy: ctm.f || 0, width: gridSize * sx, height: gridSize * sy });\n            if (!grid.has(id)) {\n                grid.add(id, Vector.create('pattern', { id, patternUnits: 'userSpaceOnUse' }, Vector.createVectors(markup)).node);\n            }\n            const patternElem = grid.get(id);\n            if (typeof update === 'function') {\n                update(patternElem.childNodes[0], options);\n            }\n            let x = options.ox % options.width;\n            if (x < 0) {\n                x += options.width;\n            }\n            let y = options.oy % options.height;\n            if (y < 0) {\n                y += options.height;\n            }\n            Dom.attr(patternElem, {\n                x,\n                y,\n                width: options.width,\n                height: options.height,\n            });\n        });\n        const base64 = new XMLSerializer().serializeToString(grid.root);\n        const url = `url(data:image/svg+xml;base64,${btoa(base64)})`;\n        this.elem.style.backgroundImage = url;\n    }\n    getInstance() {\n        if (!this.instance) {\n            this.instance = new Registry.Grid();\n        }\n        return this.instance;\n    }\n    resolveGrid(options) {\n        if (!options) {\n            return [];\n        }\n        const type = options.type;\n        if (type == null) {\n            return [\n                Object.assign(Object.assign({}, Registry.Grid.presets.dot), options.args),\n            ];\n        }\n        const items = Registry.Grid.registry.get(type);\n        if (items) {\n            let args = options.args || [];\n            if (!Array.isArray(args)) {\n                args = [args];\n            }\n            return Array.isArray(items)\n                ? items.map((item, index) => (Object.assign(Object.assign({}, item), args[index])))\n                : [Object.assign(Object.assign({}, items), args[0])];\n        }\n        return Registry.Grid.registry.onNotFound(type);\n    }\n    dispose() {\n        this.stopListening();\n        this.clear();\n    }\n}\n__decorate([\n    Base.dispose()\n], GridManager.prototype, \"dispose\", null);\n//# sourceMappingURL=grid.js.map","import { Dom, NumberExt } from '@antv/x6-common';\nimport { Point, Rectangle } from '@antv/x6-geometry';\nimport { Base } from './base';\nimport { Util } from '../util';\nexport class TransformManager extends Base {\n    get container() {\n        return this.graph.view.container;\n    }\n    get viewport() {\n        return this.graph.view.viewport;\n    }\n    get stage() {\n        return this.graph.view.stage;\n    }\n    init() {\n        this.resize();\n    }\n    /**\n     * Returns the current transformation matrix of the graph.\n     */\n    getMatrix() {\n        const transform = this.viewport.getAttribute('transform');\n        if (transform !== this.viewportTransformString) {\n            // `getCTM`: top-left relative to the SVG element\n            // `getScreenCTM`: top-left relative to the document\n            this.viewportMatrix = this.viewport.getCTM();\n            this.viewportTransformString = transform;\n        }\n        // Clone the cached current transformation matrix.\n        // If no matrix previously stored the identity matrix is returned.\n        return Dom.createSVGMatrix(this.viewportMatrix);\n    }\n    /**\n     * Sets new transformation with the given `matrix`\n     */\n    setMatrix(matrix) {\n        const ctm = Dom.createSVGMatrix(matrix);\n        const transform = Dom.matrixToTransformString(ctm);\n        this.viewport.setAttribute('transform', transform);\n        this.viewportMatrix = ctm;\n        this.viewportTransformString = transform;\n    }\n    resize(width, height) {\n        let w = width === undefined ? this.options.width : width;\n        let h = height === undefined ? this.options.height : height;\n        this.options.width = w;\n        this.options.height = h;\n        if (typeof w === 'number') {\n            w = Math.round(w);\n        }\n        if (typeof h === 'number') {\n            h = Math.round(h);\n        }\n        this.container.style.width = w == null ? '' : `${w}px`;\n        this.container.style.height = h == null ? '' : `${h}px`;\n        const size = this.getComputedSize();\n        this.graph.trigger('resize', Object.assign({}, size));\n        return this;\n    }\n    getComputedSize() {\n        let w = this.options.width;\n        let h = this.options.height;\n        if (!NumberExt.isNumber(w)) {\n            w = this.container.clientWidth;\n        }\n        if (!NumberExt.isNumber(h)) {\n            h = this.container.clientHeight;\n        }\n        return { width: w, height: h };\n    }\n    getScale() {\n        return Dom.matrixToScale(this.getMatrix());\n    }\n    scale(sx, sy = sx, ox = 0, oy = 0) {\n        sx = this.clampScale(sx); // eslint-disable-line\n        sy = this.clampScale(sy); // eslint-disable-line\n        if (ox || oy) {\n            const ts = this.getTranslation();\n            const tx = ts.tx - ox * (sx - 1);\n            const ty = ts.ty - oy * (sy - 1);\n            if (tx !== ts.tx || ty !== ts.ty) {\n                this.translate(tx, ty);\n            }\n        }\n        const matrix = this.getMatrix();\n        matrix.a = sx;\n        matrix.d = sy;\n        this.setMatrix(matrix);\n        this.graph.trigger('scale', { sx, sy, ox, oy });\n        return this;\n    }\n    clampScale(scale) {\n        const range = this.graph.options.scaling;\n        return NumberExt.clamp(scale, range.min || 0.01, range.max || 16);\n    }\n    getZoom() {\n        return this.getScale().sx;\n    }\n    zoom(factor, options) {\n        options = options || {}; // eslint-disable-line\n        let sx = factor;\n        let sy = factor;\n        const scale = this.getScale();\n        const clientSize = this.getComputedSize();\n        let cx = clientSize.width / 2;\n        let cy = clientSize.height / 2;\n        if (!options.absolute) {\n            sx += scale.sx;\n            sy += scale.sy;\n        }\n        if (options.scaleGrid) {\n            sx = Math.round(sx / options.scaleGrid) * options.scaleGrid;\n            sy = Math.round(sy / options.scaleGrid) * options.scaleGrid;\n        }\n        if (options.maxScale) {\n            sx = Math.min(options.maxScale, sx);\n            sy = Math.min(options.maxScale, sy);\n        }\n        if (options.minScale) {\n            sx = Math.max(options.minScale, sx);\n            sy = Math.max(options.minScale, sy);\n        }\n        if (options.center) {\n            cx = options.center.x;\n            cy = options.center.y;\n        }\n        sx = this.clampScale(sx);\n        sy = this.clampScale(sy);\n        if (cx || cy) {\n            const ts = this.getTranslation();\n            const tx = cx - (cx - ts.tx) * (sx / scale.sx);\n            const ty = cy - (cy - ts.ty) * (sy / scale.sy);\n            if (tx !== ts.tx || ty !== ts.ty) {\n                this.translate(tx, ty);\n            }\n        }\n        this.scale(sx, sy);\n        return this;\n    }\n    getRotation() {\n        return Dom.matrixToRotation(this.getMatrix());\n    }\n    rotate(angle, cx, cy) {\n        if (cx == null || cy == null) {\n            const bbox = Util.getBBox(this.stage);\n            cx = bbox.width / 2; // eslint-disable-line\n            cy = bbox.height / 2; // eslint-disable-line\n        }\n        const ctm = this.getMatrix()\n            .translate(cx, cy)\n            .rotate(angle)\n            .translate(-cx, -cy);\n        this.setMatrix(ctm);\n        return this;\n    }\n    getTranslation() {\n        return Dom.matrixToTranslation(this.getMatrix());\n    }\n    translate(tx, ty) {\n        const matrix = this.getMatrix();\n        matrix.e = tx || 0;\n        matrix.f = ty || 0;\n        this.setMatrix(matrix);\n        const ts = this.getTranslation();\n        this.options.x = ts.tx;\n        this.options.y = ts.ty;\n        this.graph.trigger('translate', Object.assign({}, ts));\n        return this;\n    }\n    setOrigin(ox, oy) {\n        return this.translate(ox || 0, oy || 0);\n    }\n    fitToContent(gridWidth, gridHeight, padding, options) {\n        if (typeof gridWidth === 'object') {\n            const opts = gridWidth;\n            gridWidth = opts.gridWidth || 1; // eslint-disable-line\n            gridHeight = opts.gridHeight || 1; // eslint-disable-line\n            padding = opts.padding || 0; // eslint-disable-line\n            options = opts; // eslint-disable-line\n        }\n        else {\n            gridWidth = gridWidth || 1; // eslint-disable-line\n            gridHeight = gridHeight || 1; // eslint-disable-line\n            padding = padding || 0; // eslint-disable-line\n            if (options == null) {\n                options = {}; // eslint-disable-line\n            }\n        }\n        const paddings = NumberExt.normalizeSides(padding);\n        const border = options.border || 0;\n        const contentArea = options.contentArea\n            ? Rectangle.create(options.contentArea)\n            : this.getContentArea(options);\n        if (border > 0) {\n            contentArea.inflate(border);\n        }\n        const scale = this.getScale();\n        const translate = this.getTranslation();\n        const sx = scale.sx;\n        const sy = scale.sy;\n        contentArea.x *= sx;\n        contentArea.y *= sy;\n        contentArea.width *= sx;\n        contentArea.height *= sy;\n        let width = Math.max(Math.ceil((contentArea.width + contentArea.x) / gridWidth), 1) *\n            gridWidth;\n        let height = Math.max(Math.ceil((contentArea.height + contentArea.y) / gridHeight), 1) * gridHeight;\n        let tx = 0;\n        let ty = 0;\n        if ((options.allowNewOrigin === 'negative' && contentArea.x < 0) ||\n            (options.allowNewOrigin === 'positive' && contentArea.x >= 0) ||\n            options.allowNewOrigin === 'any') {\n            tx = Math.ceil(-contentArea.x / gridWidth) * gridWidth;\n            tx += paddings.left;\n            width += tx;\n        }\n        if ((options.allowNewOrigin === 'negative' && contentArea.y < 0) ||\n            (options.allowNewOrigin === 'positive' && contentArea.y >= 0) ||\n            options.allowNewOrigin === 'any') {\n            ty = Math.ceil(-contentArea.y / gridHeight) * gridHeight;\n            ty += paddings.top;\n            height += ty;\n        }\n        width += paddings.right;\n        height += paddings.bottom;\n        // Make sure the resulting width and height are greater than minimum.\n        width = Math.max(width, options.minWidth || 0);\n        height = Math.max(height, options.minHeight || 0);\n        // Make sure the resulting width and height are lesser than maximum.\n        width = Math.min(width, options.maxWidth || Number.MAX_SAFE_INTEGER);\n        height = Math.min(height, options.maxHeight || Number.MAX_SAFE_INTEGER);\n        const size = this.getComputedSize();\n        const sizeChanged = width !== size.width || height !== size.height;\n        const originChanged = tx !== translate.tx || ty !== translate.ty;\n        // Change the dimensions only if there is a size discrepency or an origin change\n        if (originChanged) {\n            this.translate(tx, ty);\n        }\n        if (sizeChanged) {\n            this.resize(width, height);\n        }\n        return new Rectangle(-tx / sx, -ty / sy, width / sx, height / sy);\n    }\n    scaleContentToFit(options = {}) {\n        this.scaleContentToFitImpl(options);\n    }\n    scaleContentToFitImpl(options = {}, translate = true) {\n        let contentBBox;\n        let contentLocalOrigin;\n        if (options.contentArea) {\n            const contentArea = options.contentArea;\n            contentBBox = this.graph.localToGraph(contentArea);\n            contentLocalOrigin = Point.create(contentArea);\n        }\n        else {\n            contentBBox = this.getContentBBox(options);\n            contentLocalOrigin = this.graph.graphToLocal(contentBBox);\n        }\n        if (!contentBBox.width || !contentBBox.height) {\n            return;\n        }\n        const padding = NumberExt.normalizeSides(options.padding);\n        const minScale = options.minScale || 0;\n        const maxScale = options.maxScale || Number.MAX_SAFE_INTEGER;\n        const minScaleX = options.minScaleX || minScale;\n        const maxScaleX = options.maxScaleX || maxScale;\n        const minScaleY = options.minScaleY || minScale;\n        const maxScaleY = options.maxScaleY || maxScale;\n        let fittingBox;\n        if (options.viewportArea) {\n            fittingBox = options.viewportArea;\n        }\n        else {\n            const computedSize = this.getComputedSize();\n            const currentTranslate = this.getTranslation();\n            fittingBox = {\n                x: currentTranslate.tx,\n                y: currentTranslate.ty,\n                width: computedSize.width,\n                height: computedSize.height,\n            };\n        }\n        fittingBox = Rectangle.create(fittingBox).moveAndExpand({\n            x: padding.left,\n            y: padding.top,\n            width: -padding.left - padding.right,\n            height: -padding.top - padding.bottom,\n        });\n        const currentScale = this.getScale();\n        let newSX = (fittingBox.width / contentBBox.width) * currentScale.sx;\n        let newSY = (fittingBox.height / contentBBox.height) * currentScale.sy;\n        if (options.preserveAspectRatio !== false) {\n            newSX = newSY = Math.min(newSX, newSY);\n        }\n        // snap scale to a grid\n        const gridSize = options.scaleGrid;\n        if (gridSize) {\n            newSX = gridSize * Math.floor(newSX / gridSize);\n            newSY = gridSize * Math.floor(newSY / gridSize);\n        }\n        // scale min/max boundaries\n        newSX = NumberExt.clamp(newSX, minScaleX, maxScaleX);\n        newSY = NumberExt.clamp(newSY, minScaleY, maxScaleY);\n        this.scale(newSX, newSY);\n        if (translate) {\n            const origin = this.options;\n            const newOX = fittingBox.x - contentLocalOrigin.x * newSX - origin.x;\n            const newOY = fittingBox.y - contentLocalOrigin.y * newSY - origin.y;\n            this.translate(newOX, newOY);\n        }\n    }\n    getContentArea(options = {}) {\n        // use geometry calc default\n        if (options.useCellGeometry !== false) {\n            return this.model.getAllCellsBBox() || new Rectangle();\n        }\n        return Util.getBBox(this.stage);\n    }\n    getContentBBox(options = {}) {\n        return this.graph.localToGraph(this.getContentArea(options));\n    }\n    getGraphArea() {\n        const rect = Rectangle.fromSize(this.getComputedSize());\n        return this.graph.graphToLocal(rect);\n    }\n    zoomToRect(rect, options = {}) {\n        const area = Rectangle.create(rect);\n        const graph = this.graph;\n        options.contentArea = area;\n        if (options.viewportArea == null) {\n            options.viewportArea = {\n                x: graph.options.x,\n                y: graph.options.y,\n                width: this.options.width,\n                height: this.options.height,\n            };\n        }\n        this.scaleContentToFitImpl(options, false);\n        const center = area.getCenter();\n        this.centerPoint(center.x, center.y);\n        return this;\n    }\n    zoomToFit(options = {}) {\n        return this.zoomToRect(this.getContentArea(options), options);\n    }\n    centerPoint(x, y) {\n        const clientSize = this.getComputedSize();\n        const scale = this.getScale();\n        const ts = this.getTranslation();\n        const cx = clientSize.width / 2;\n        const cy = clientSize.height / 2;\n        x = typeof x === 'number' ? x : cx; // eslint-disable-line\n        y = typeof y === 'number' ? y : cy; // eslint-disable-line\n        x = cx - x * scale.sx; // eslint-disable-line\n        y = cy - y * scale.sy; // eslint-disable-line\n        if (ts.tx !== x || ts.ty !== y) {\n            this.translate(x, y);\n        }\n    }\n    centerContent(options) {\n        const rect = this.graph.getContentArea(options);\n        const center = rect.getCenter();\n        this.centerPoint(center.x, center.y);\n    }\n    centerCell(cell) {\n        return this.positionCell(cell, 'center');\n    }\n    positionPoint(point, x, y) {\n        const clientSize = this.getComputedSize();\n        // eslint-disable-next-line\n        x = NumberExt.normalizePercentage(x, Math.max(0, clientSize.width));\n        if (x < 0) {\n            x = clientSize.width + x; // eslint-disable-line\n        }\n        // eslint-disable-next-line\n        y = NumberExt.normalizePercentage(y, Math.max(0, clientSize.height));\n        if (y < 0) {\n            y = clientSize.height + y; // eslint-disable-line\n        }\n        const ts = this.getTranslation();\n        const scale = this.getScale();\n        const dx = x - point.x * scale.sx;\n        const dy = y - point.y * scale.sy;\n        if (ts.tx !== dx || ts.ty !== dy) {\n            this.translate(dx, dy);\n        }\n    }\n    positionRect(rect, pos) {\n        const bbox = Rectangle.create(rect);\n        switch (pos) {\n            case 'center':\n                return this.positionPoint(bbox.getCenter(), '50%', '50%');\n            case 'top':\n                return this.positionPoint(bbox.getTopCenter(), '50%', 0);\n            case 'top-right':\n                return this.positionPoint(bbox.getTopRight(), '100%', 0);\n            case 'right':\n                return this.positionPoint(bbox.getRightMiddle(), '100%', '50%');\n            case 'bottom-right':\n                return this.positionPoint(bbox.getBottomRight(), '100%', '100%');\n            case 'bottom':\n                return this.positionPoint(bbox.getBottomCenter(), '50%', '100%');\n            case 'bottom-left':\n                return this.positionPoint(bbox.getBottomLeft(), 0, '100%');\n            case 'left':\n                return this.positionPoint(bbox.getLeftMiddle(), 0, '50%');\n            case 'top-left':\n                return this.positionPoint(bbox.getTopLeft(), 0, 0);\n            default:\n                return this;\n        }\n    }\n    positionCell(cell, pos) {\n        const bbox = cell.getBBox();\n        return this.positionRect(bbox, pos);\n    }\n    positionContent(pos, options) {\n        const rect = this.graph.getContentArea(options);\n        return this.positionRect(rect, pos);\n    }\n}\n//# sourceMappingURL=transform.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ObjectExt } from '@antv/x6-common';\nimport { Rectangle } from '@antv/x6-geometry';\nimport { Background } from '../registry';\nimport { Base } from './base';\nexport class BackgroundManager extends Base {\n    get elem() {\n        return this.view.background;\n    }\n    init() {\n        this.startListening();\n        if (this.options.background) {\n            this.draw(this.options.background);\n        }\n    }\n    startListening() {\n        this.graph.on('scale', this.update, this);\n        this.graph.on('translate', this.update, this);\n    }\n    stopListening() {\n        this.graph.off('scale', this.update, this);\n        this.graph.off('translate', this.update, this);\n    }\n    updateBackgroundImage(options = {}) {\n        let backgroundSize = options.size || 'auto auto';\n        let backgroundPosition = options.position || 'center';\n        const scale = this.graph.transform.getScale();\n        const ts = this.graph.translate();\n        // backgroundPosition\n        if (typeof backgroundPosition === 'object') {\n            const x = ts.tx + scale.sx * (backgroundPosition.x || 0);\n            const y = ts.ty + scale.sy * (backgroundPosition.y || 0);\n            backgroundPosition = `${x}px ${y}px`;\n        }\n        // backgroundSize\n        if (typeof backgroundSize === 'object') {\n            backgroundSize = Rectangle.fromSize(backgroundSize).scale(scale.sx, scale.sy);\n            backgroundSize = `${backgroundSize.width}px ${backgroundSize.height}px`;\n        }\n        this.elem.style.backgroundSize = backgroundSize;\n        this.elem.style.backgroundPosition = backgroundPosition;\n    }\n    drawBackgroundImage(img, options = {}) {\n        if (!(img instanceof HTMLImageElement)) {\n            this.elem.style.backgroundImage = '';\n            return;\n        }\n        // draw multiple times to show the last image\n        const cache = this.optionsCache;\n        if (cache && cache.image !== options.image) {\n            return;\n        }\n        let uri;\n        const opacity = options.opacity;\n        const backgroundSize = options.size;\n        let backgroundRepeat = options.repeat || 'no-repeat';\n        const pattern = Background.registry.get(backgroundRepeat);\n        if (typeof pattern === 'function') {\n            const quality = options.quality || 1;\n            img.width *= quality;\n            img.height *= quality;\n            const canvas = pattern(img, options);\n            if (!(canvas instanceof HTMLCanvasElement)) {\n                throw new Error('Background pattern must return an HTML Canvas instance');\n            }\n            uri = canvas.toDataURL('image/png');\n            // `repeat` was changed in pattern function\n            if (options.repeat && backgroundRepeat !== options.repeat) {\n                backgroundRepeat = options.repeat;\n            }\n            else {\n                backgroundRepeat = 'repeat';\n            }\n            if (typeof backgroundSize === 'object') {\n                // recalculate the tile size if an object passed in\n                backgroundSize.width *= canvas.width / img.width;\n                backgroundSize.height *= canvas.height / img.height;\n            }\n            else if (backgroundSize === undefined) {\n                // calcule the tile size if no provided\n                options.size = {\n                    width: canvas.width / quality,\n                    height: canvas.height / quality,\n                };\n            }\n        }\n        else {\n            uri = img.src;\n            if (backgroundSize === undefined) {\n                options.size = {\n                    width: img.width,\n                    height: img.height,\n                };\n            }\n        }\n        if (cache != null &&\n            typeof options.size === 'object' &&\n            options.image === cache.image &&\n            options.repeat === cache.repeat &&\n            options.quality ===\n                cache.quality) {\n            cache.size = ObjectExt.clone(options.size);\n        }\n        const style = this.elem.style;\n        style.backgroundImage = `url(${uri})`;\n        style.backgroundRepeat = backgroundRepeat;\n        style.opacity = opacity == null || opacity >= 1 ? '' : `${opacity}`;\n        this.updateBackgroundImage(options);\n    }\n    updateBackgroundColor(color) {\n        this.elem.style.backgroundColor = color || '';\n    }\n    updateBackgroundOptions(options) {\n        this.graph.options.background = options;\n    }\n    update() {\n        if (this.optionsCache) {\n            this.updateBackgroundImage(this.optionsCache);\n        }\n    }\n    draw(options) {\n        const opts = options || {};\n        this.updateBackgroundOptions(options);\n        this.updateBackgroundColor(opts.color);\n        if (opts.image) {\n            this.optionsCache = ObjectExt.clone(opts);\n            const img = document.createElement('img');\n            img.onload = () => this.drawBackgroundImage(img, options);\n            img.setAttribute('crossorigin', 'anonymous');\n            img.src = opts.image;\n        }\n        else {\n            this.drawBackgroundImage(null);\n            this.optionsCache = null;\n        }\n    }\n    clear() {\n        this.draw();\n    }\n    dispose() {\n        this.clear();\n        this.stopListening();\n    }\n}\n__decorate([\n    Base.dispose()\n], BackgroundManager.prototype, \"dispose\", null);\n//# sourceMappingURL=background.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ModifierKey, Dom } from '@antv/x6-common';\nimport { Base } from './base';\nexport class PanningManager extends Base {\n    get widgetOptions() {\n        return this.options.panning;\n    }\n    get pannable() {\n        return this.widgetOptions && this.widgetOptions.enabled === true;\n    }\n    init() {\n        this.startListening();\n        this.updateClassName();\n    }\n    startListening() {\n        const eventTypes = this.widgetOptions.eventTypes;\n        if (!eventTypes) {\n            return;\n        }\n        if (eventTypes.includes('leftMouseDown')) {\n            this.graph.on('blank:mousedown', this.preparePanning, this);\n            this.graph.on('node:unhandled:mousedown', this.preparePanning, this);\n            this.graph.on('edge:unhandled:mousedown', this.preparePanning, this);\n        }\n        if (eventTypes.includes('rightMouseDown')) {\n            this.onRightMouseDown = this.onRightMouseDown.bind(this);\n            Dom.Event.on(this.graph.container, 'mousedown', this.onRightMouseDown);\n        }\n        if (eventTypes.includes('mouseWheel')) {\n            this.mousewheelHandle = new Dom.MouseWheelHandle(this.graph.container, this.onMouseWheel.bind(this), this.allowMouseWheel.bind(this));\n            this.mousewheelHandle.enable();\n        }\n    }\n    stopListening() {\n        const eventTypes = this.widgetOptions.eventTypes;\n        if (!eventTypes) {\n            return;\n        }\n        if (eventTypes.includes('leftMouseDown')) {\n            this.graph.off('blank:mousedown', this.preparePanning, this);\n            this.graph.off('node:unhandled:mousedown', this.preparePanning, this);\n            this.graph.off('edge:unhandled:mousedown', this.preparePanning, this);\n        }\n        if (eventTypes.includes('rightMouseDown')) {\n            Dom.Event.off(this.graph.container, 'mousedown', this.onRightMouseDown);\n        }\n        if (eventTypes.includes('mouseWheel')) {\n            if (this.mousewheelHandle) {\n                this.mousewheelHandle.disable();\n            }\n        }\n    }\n    preparePanning({ e }) {\n        const selection = this.graph.getPlugin('selection');\n        const allowRubberband = selection && selection.allowRubberband(e, true);\n        if (this.allowPanning(e, true) ||\n            (this.allowPanning(e) && !allowRubberband)) {\n            this.startPanning(e);\n        }\n    }\n    allowPanning(e, strict) {\n        return (this.pannable &&\n            ModifierKey.isMatch(e, this.widgetOptions.modifiers, strict));\n    }\n    startPanning(evt) {\n        const e = this.view.normalizeEvent(evt);\n        this.clientX = e.clientX;\n        this.clientY = e.clientY;\n        this.panning = true;\n        this.updateClassName();\n        Dom.Event.on(document.body, {\n            'mousemove.panning touchmove.panning': this.pan.bind(this),\n            'mouseup.panning touchend.panning': this.stopPanning.bind(this),\n            'mouseleave.panning': this.stopPanning.bind(this),\n        });\n        Dom.Event.on(window, 'mouseup.panning', this.stopPanning.bind(this));\n    }\n    pan(evt) {\n        const e = this.view.normalizeEvent(evt);\n        const dx = e.clientX - this.clientX;\n        const dy = e.clientY - this.clientY;\n        this.clientX = e.clientX;\n        this.clientY = e.clientY;\n        this.graph.translateBy(dx, dy);\n    }\n    // eslint-disable-next-line\n    stopPanning(e) {\n        this.panning = false;\n        this.updateClassName();\n        Dom.Event.off(document.body, '.panning');\n        Dom.Event.off(window, '.panning');\n    }\n    updateClassName() {\n        const container = this.view.container;\n        const panning = this.view.prefixClassName('graph-panning');\n        const pannable = this.view.prefixClassName('graph-pannable');\n        if (this.pannable) {\n            if (this.panning) {\n                Dom.addClass(container, panning);\n                Dom.removeClass(container, pannable);\n            }\n            else {\n                Dom.removeClass(container, panning);\n                Dom.addClass(container, pannable);\n            }\n        }\n        else {\n            Dom.removeClass(container, panning);\n            Dom.removeClass(container, pannable);\n        }\n    }\n    onRightMouseDown(e) {\n        if (e.button === 2 && this.allowPanning(e, true)) {\n            this.startPanning(e);\n        }\n    }\n    allowMouseWheel(e) {\n        return this.pannable && !e.ctrlKey;\n    }\n    onMouseWheel(e, deltaX, deltaY) {\n        if (!e.ctrlKey) {\n            this.graph.translateBy(-deltaX, -deltaY);\n        }\n    }\n    autoPanning(x, y) {\n        const buffer = 10;\n        const graphArea = this.graph.getGraphArea();\n        let dx = 0;\n        let dy = 0;\n        if (x <= graphArea.left + buffer) {\n            dx = -buffer;\n        }\n        if (y <= graphArea.top + buffer) {\n            dy = -buffer;\n        }\n        if (x >= graphArea.right - buffer) {\n            dx = buffer;\n        }\n        if (y >= graphArea.bottom - buffer) {\n            dy = buffer;\n        }\n        if (dx !== 0 || dy !== 0) {\n            this.graph.translateBy(-dx, -dy);\n        }\n    }\n    enablePanning() {\n        if (!this.pannable) {\n            this.widgetOptions.enabled = true;\n            this.updateClassName();\n        }\n    }\n    disablePanning() {\n        if (this.pannable) {\n            this.widgetOptions.enabled = false;\n            this.updateClassName();\n        }\n    }\n    dispose() {\n        this.stopListening();\n    }\n}\n__decorate([\n    Base.dispose()\n], PanningManager.prototype, \"dispose\", null);\n//# sourceMappingURL=panning.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ModifierKey, Dom, NumberExt, Disposable } from '@antv/x6-common';\nimport { Base } from './base';\nexport class MouseWheel extends Base {\n    constructor() {\n        super(...arguments);\n        this.cumulatedFactor = 1;\n    }\n    get widgetOptions() {\n        return this.options.mousewheel;\n    }\n    init() {\n        this.container = this.graph.container;\n        this.target = this.widgetOptions.global ? document : this.container;\n        this.mousewheelHandle = new Dom.MouseWheelHandle(this.target, this.onMouseWheel.bind(this), this.allowMouseWheel.bind(this));\n        if (this.widgetOptions.enabled) {\n            this.enable(true);\n        }\n    }\n    get disabled() {\n        return this.widgetOptions.enabled !== true;\n    }\n    enable(force) {\n        if (this.disabled || force) {\n            this.widgetOptions.enabled = true;\n            this.mousewheelHandle.enable();\n        }\n    }\n    disable() {\n        if (!this.disabled) {\n            this.widgetOptions.enabled = false;\n            this.mousewheelHandle.disable();\n        }\n    }\n    allowMouseWheel(e) {\n        const guard = this.widgetOptions.guard;\n        return ((guard == null || guard(e)) &&\n            ModifierKey.isMatch(e, this.widgetOptions.modifiers));\n    }\n    onMouseWheel(e) {\n        const guard = this.widgetOptions.guard;\n        if ((guard == null || guard(e)) &&\n            ModifierKey.isMatch(e, this.widgetOptions.modifiers)) {\n            const factor = this.widgetOptions.factor || 1.2;\n            if (this.currentScale == null) {\n                this.startPos = { x: e.clientX, y: e.clientY };\n                this.currentScale = this.graph.transform.getScale().sx;\n            }\n            const delta = e.deltaY;\n            if (delta < 0) {\n                // zoomin\n                // ------\n                // Switches to 1% zoom steps below 15%\n                if (this.currentScale < 0.15) {\n                    this.cumulatedFactor = (this.currentScale + 0.01) / this.currentScale;\n                }\n                else {\n                    // Uses to 5% zoom steps for better grid rendering in\n                    // webkit and to avoid rounding errors for zoom steps\n                    this.cumulatedFactor =\n                        Math.round(this.currentScale * factor * 20) / 20 / this.currentScale;\n                    if (this.cumulatedFactor === 1) {\n                        this.cumulatedFactor = 1.05;\n                    }\n                }\n            }\n            else {\n                // zoomout\n                // -------\n                // Switches to 1% zoom steps below 15%\n                if (this.currentScale <= 0.15) {\n                    this.cumulatedFactor = (this.currentScale - 0.01) / this.currentScale;\n                }\n                else {\n                    // Uses to 5% zoom steps for better grid rendering in\n                    // webkit and to avoid rounding errors for zoom steps\n                    this.cumulatedFactor =\n                        Math.round(this.currentScale * (1 / factor) * 20) /\n                            20 /\n                            this.currentScale;\n                    if (this.cumulatedFactor === 1) {\n                        this.cumulatedFactor = 0.95;\n                    }\n                }\n            }\n            this.cumulatedFactor = Math.max(0.01, Math.min(this.currentScale * this.cumulatedFactor, 160) /\n                this.currentScale);\n            const currentScale = this.currentScale;\n            let targetScale = this.graph.transform.clampScale(currentScale * this.cumulatedFactor);\n            const minScale = this.widgetOptions.minScale || Number.MIN_SAFE_INTEGER;\n            const maxScale = this.widgetOptions.maxScale || Number.MAX_SAFE_INTEGER;\n            targetScale = NumberExt.clamp(targetScale, minScale, maxScale);\n            if (targetScale !== currentScale) {\n                if (this.widgetOptions.zoomAtMousePosition) {\n                    const hasScroller = !!this.graph.getPlugin('scroller');\n                    const origin = hasScroller\n                        ? this.graph.clientToLocal(this.startPos)\n                        : this.graph.clientToGraph(this.startPos);\n                    this.graph.zoom(targetScale, {\n                        absolute: true,\n                        center: origin.clone(),\n                    });\n                }\n                else {\n                    this.graph.zoom(targetScale, { absolute: true });\n                }\n            }\n            this.currentScale = null;\n            this.cumulatedFactor = 1;\n        }\n    }\n    dispose() {\n        this.disable();\n    }\n}\n__decorate([\n    Disposable.dispose()\n], MouseWheel.prototype, \"dispose\", null);\n//# sourceMappingURL=mousewheel.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { FunctionExt } from '@antv/x6-common';\nimport { Base } from './base';\nexport class VirtualRenderManager extends Base {\n    init() {\n        this.resetRenderArea = FunctionExt.throttle(this.resetRenderArea, 200, {\n            leading: true,\n        });\n        this.resetRenderArea();\n        this.startListening();\n    }\n    startListening() {\n        this.graph.on('translate', this.resetRenderArea, this);\n        this.graph.on('scale', this.resetRenderArea, this);\n        this.graph.on('resize', this.resetRenderArea, this);\n    }\n    stopListening() {\n        this.graph.off('translate', this.resetRenderArea, this);\n        this.graph.off('scale', this.resetRenderArea, this);\n        this.graph.off('resize', this.resetRenderArea, this);\n    }\n    enableVirtualRender() {\n        this.options.virtual = true;\n        this.resetRenderArea();\n    }\n    disableVirtualRender() {\n        this.options.virtual = false;\n        this.graph.renderer.setRenderArea(undefined);\n    }\n    resetRenderArea() {\n        if (this.options.virtual) {\n            const renderArea = this.graph.getGraphArea();\n            this.graph.renderer.setRenderArea(renderArea);\n        }\n    }\n    dispose() {\n        this.stopListening();\n    }\n}\n__decorate([\n    Base.dispose()\n], VirtualRenderManager.prototype, \"dispose\", null);\n//# sourceMappingURL=virtual-render.js.map","export class JobQueue {\n    constructor() {\n        this.isFlushing = false;\n        this.isFlushPending = false;\n        this.scheduleId = 0;\n        this.queue = [];\n        this.frameInterval = 33;\n        this.initialTime = Date.now();\n    }\n    queueJob(job) {\n        if (job.priority & JOB_PRIORITY.PRIOR) {\n            job.cb();\n        }\n        else {\n            const index = this.findInsertionIndex(job);\n            if (index >= 0) {\n                this.queue.splice(index, 0, job);\n            }\n        }\n    }\n    queueFlush() {\n        if (!this.isFlushing && !this.isFlushPending) {\n            this.isFlushPending = true;\n            this.scheduleJob();\n        }\n    }\n    queueFlushSync() {\n        if (!this.isFlushing && !this.isFlushPending) {\n            this.isFlushPending = true;\n            this.flushJobsSync();\n        }\n    }\n    clearJobs() {\n        this.queue.length = 0;\n        this.isFlushing = false;\n        this.isFlushPending = false;\n        this.cancelScheduleJob();\n    }\n    flushJobs() {\n        this.isFlushPending = false;\n        this.isFlushing = true;\n        const startTime = this.getCurrentTime();\n        let job;\n        while ((job = this.queue.shift())) {\n            job.cb();\n            if (this.getCurrentTime() - startTime >= this.frameInterval) {\n                break;\n            }\n        }\n        this.isFlushing = false;\n        if (this.queue.length) {\n            this.queueFlush();\n        }\n    }\n    flushJobsSync() {\n        this.isFlushPending = false;\n        this.isFlushing = true;\n        let job;\n        while ((job = this.queue.shift())) {\n            try {\n                job.cb();\n            }\n            catch (error) {\n                // eslint-disable-next-line\n                console.log(error);\n            }\n        }\n        this.isFlushing = false;\n    }\n    findInsertionIndex(job) {\n        let left = 0;\n        let ins = this.queue.length;\n        let right = ins - 1;\n        const priority = job.priority;\n        while (left <= right) {\n            const mid = ((right - left) >> 1) + left;\n            if (priority <= this.queue[mid].priority) {\n                left = mid + 1;\n            }\n            else {\n                ins = mid;\n                right = mid - 1;\n            }\n        }\n        return ins;\n    }\n    scheduleJob() {\n        if ('requestIdleCallback' in window) {\n            if (this.scheduleId) {\n                this.cancelScheduleJob();\n            }\n            this.scheduleId = window.requestIdleCallback(this.flushJobs.bind(this), {\n                timeout: 100,\n            });\n        }\n        else {\n            if (this.scheduleId) {\n                this.cancelScheduleJob();\n            }\n            this.scheduleId = window.setTimeout(this.flushJobs.bind(this));\n        }\n    }\n    cancelScheduleJob() {\n        if ('cancelIdleCallback' in window) {\n            if (this.scheduleId) {\n                window.cancelIdleCallback(this.scheduleId);\n            }\n            this.scheduleId = 0;\n        }\n        else {\n            if (this.scheduleId) {\n                clearTimeout(this.scheduleId);\n            }\n            this.scheduleId = 0;\n        }\n    }\n    getCurrentTime() {\n        const hasPerformanceNow = typeof performance === 'object' && typeof performance.now === 'function';\n        if (hasPerformanceNow) {\n            return performance.now();\n        }\n        return Date.now() - this.initialTime;\n    }\n}\nexport var JOB_PRIORITY;\n(function (JOB_PRIORITY) {\n    JOB_PRIORITY[JOB_PRIORITY[\"Update\"] = 2] = \"Update\";\n    JOB_PRIORITY[JOB_PRIORITY[\"RenderEdge\"] = 4] = \"RenderEdge\";\n    JOB_PRIORITY[JOB_PRIORITY[\"RenderNode\"] = 8] = \"RenderNode\";\n    JOB_PRIORITY[JOB_PRIORITY[\"PRIOR\"] = 1048576] = \"PRIOR\";\n})(JOB_PRIORITY || (JOB_PRIORITY = {}));\n// function findInsertionIndex(job: Job) {\n//   let start = 0\n//   for (let i = 0, len = queue.length; i < len; i += 1) {\n//     const j = queue[i]\n//     if (j.id === job.id) {\n//       console.log('xx', j.bit, job.bit)\n//     }\n//     if (j.id === job.id && (job.bit ^ (job.bit & j.bit)) === 0) {\n//       return -1\n//     }\n//     if (j.priority <= job.priority) {\n//       start += 1\n//     }\n//   }\n//   return start\n// }\n//# sourceMappingURL=queueJob.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Dom, Disposable, FunctionExt } from '@antv/x6-common';\nimport { CellView, NodeView, EdgeView } from '../view';\nimport { JobQueue, JOB_PRIORITY } from './queueJob';\nexport class Scheduler extends Disposable {\n    get model() {\n        return this.graph.model;\n    }\n    get container() {\n        return this.graph.view.stage;\n    }\n    constructor(graph) {\n        super();\n        this.views = {};\n        this.willRemoveViews = {};\n        this.queue = new JobQueue();\n        this.graph = graph;\n        this.init();\n    }\n    init() {\n        this.startListening();\n        this.renderViews(this.model.getCells());\n    }\n    startListening() {\n        this.model.on('reseted', this.onModelReseted, this);\n        this.model.on('cell:added', this.onCellAdded, this);\n        this.model.on('cell:removed', this.onCellRemoved, this);\n        this.model.on('cell:change:zIndex', this.onCellZIndexChanged, this);\n        this.model.on('cell:change:visible', this.onCellVisibleChanged, this);\n    }\n    stopListening() {\n        this.model.off('reseted', this.onModelReseted, this);\n        this.model.off('cell:added', this.onCellAdded, this);\n        this.model.off('cell:removed', this.onCellRemoved, this);\n        this.model.off('cell:change:zIndex', this.onCellZIndexChanged, this);\n        this.model.off('cell:change:visible', this.onCellVisibleChanged, this);\n    }\n    onModelReseted({ options }) {\n        this.queue.clearJobs();\n        this.removeZPivots();\n        this.resetViews();\n        this.renderViews(this.model.getCells(), options);\n    }\n    onCellAdded({ cell, options }) {\n        this.renderViews([cell], options);\n    }\n    onCellRemoved({ cell }) {\n        this.removeViews([cell]);\n    }\n    onCellZIndexChanged({ cell, options, }) {\n        const viewItem = this.views[cell.id];\n        if (viewItem) {\n            this.requestViewUpdate(viewItem.view, Scheduler.FLAG_INSERT, options, JOB_PRIORITY.Update, true);\n        }\n    }\n    onCellVisibleChanged({ cell, current, }) {\n        this.toggleVisible(cell, !!current);\n    }\n    requestViewUpdate(view, flag, options = {}, priority = JOB_PRIORITY.Update, flush = true) {\n        const id = view.cell.id;\n        const viewItem = this.views[id];\n        if (!viewItem) {\n            return;\n        }\n        viewItem.flag = flag;\n        viewItem.options = options;\n        const priorAction = view.hasAction(flag, ['translate', 'resize', 'rotate']);\n        if (priorAction || options.async === false) {\n            priority = JOB_PRIORITY.PRIOR; // eslint-disable-line\n            flush = false; // eslint-disable-line\n        }\n        this.queue.queueJob({\n            id,\n            priority,\n            cb: () => {\n                this.renderViewInArea(view, flag, options);\n            },\n        });\n        const effectedEdges = this.getEffectedEdges(view);\n        effectedEdges.forEach((edge) => {\n            this.requestViewUpdate(edge.view, edge.flag, options, priority, false);\n        });\n        if (flush) {\n            this.flush();\n        }\n    }\n    setRenderArea(area) {\n        this.renderArea = area;\n        this.flushWaitingViews();\n    }\n    isViewMounted(view) {\n        if (view == null) {\n            return false;\n        }\n        const viewItem = this.views[view.cell.id];\n        if (!viewItem) {\n            return false;\n        }\n        return viewItem.state === Scheduler.ViewState.MOUNTED;\n    }\n    renderViews(cells, options = {}) {\n        cells.sort((c1, c2) => {\n            if (c1.isNode() && c2.isEdge()) {\n                return -1;\n            }\n            return 0;\n        });\n        cells.forEach((cell) => {\n            const id = cell.id;\n            const views = this.views;\n            let flag = 0;\n            let viewItem = views[id];\n            if (viewItem) {\n                flag = Scheduler.FLAG_INSERT;\n            }\n            else {\n                const cellView = this.createCellView(cell);\n                if (cellView) {\n                    cellView.graph = this.graph;\n                    flag = Scheduler.FLAG_INSERT | cellView.getBootstrapFlag();\n                    viewItem = {\n                        view: cellView,\n                        flag,\n                        options,\n                        state: Scheduler.ViewState.CREATED,\n                    };\n                    this.views[id] = viewItem;\n                }\n            }\n            if (viewItem) {\n                this.requestViewUpdate(viewItem.view, flag, options, this.getRenderPriority(viewItem.view), false);\n            }\n        });\n        this.flush();\n    }\n    renderViewInArea(view, flag, options = {}) {\n        const cell = view.cell;\n        const id = cell.id;\n        const viewItem = this.views[id];\n        if (!viewItem) {\n            return;\n        }\n        let result = 0;\n        if (this.isUpdatable(view)) {\n            result = this.updateView(view, flag, options);\n            viewItem.flag = result;\n        }\n        else {\n            if (viewItem.state === Scheduler.ViewState.MOUNTED) {\n                result = this.updateView(view, flag, options);\n                viewItem.flag = result;\n            }\n            else {\n                viewItem.state = Scheduler.ViewState.WAITING;\n            }\n        }\n        if (result) {\n            if (cell.isEdge() &&\n                (result & view.getFlag(['source', 'target'])) === 0) {\n                this.queue.queueJob({\n                    id,\n                    priority: JOB_PRIORITY.RenderEdge,\n                    cb: () => {\n                        this.updateView(view, flag, options);\n                    },\n                });\n            }\n        }\n    }\n    removeViews(cells) {\n        cells.forEach((cell) => {\n            const id = cell.id;\n            const viewItem = this.views[id];\n            if (viewItem) {\n                this.willRemoveViews[id] = viewItem;\n                delete this.views[id];\n                this.queue.queueJob({\n                    id,\n                    priority: this.getRenderPriority(viewItem.view),\n                    cb: () => {\n                        this.removeView(viewItem.view);\n                    },\n                });\n            }\n        });\n        this.flush();\n    }\n    flush() {\n        this.graph.options.async\n            ? this.queue.queueFlush()\n            : this.queue.queueFlushSync();\n    }\n    flushWaitingViews() {\n        Object.values(this.views).forEach((viewItem) => {\n            if (viewItem && viewItem.state === Scheduler.ViewState.WAITING) {\n                const { view, flag, options } = viewItem;\n                this.requestViewUpdate(view, flag, options, this.getRenderPriority(view), false);\n            }\n        });\n        this.flush();\n    }\n    updateView(view, flag, options = {}) {\n        if (view == null) {\n            return 0;\n        }\n        if (CellView.isCellView(view)) {\n            if (flag & Scheduler.FLAG_REMOVE) {\n                this.removeView(view.cell);\n                return 0;\n            }\n            if (flag & Scheduler.FLAG_INSERT) {\n                this.insertView(view);\n                flag ^= Scheduler.FLAG_INSERT; // eslint-disable-line\n            }\n        }\n        if (!flag) {\n            return 0;\n        }\n        return view.confirmUpdate(flag, options);\n    }\n    insertView(view) {\n        const viewItem = this.views[view.cell.id];\n        if (viewItem) {\n            const zIndex = view.cell.getZIndex();\n            const pivot = this.addZPivot(zIndex);\n            this.container.insertBefore(view.container, pivot);\n            if (!view.cell.isVisible()) {\n                this.toggleVisible(view.cell, false);\n            }\n            viewItem.state = Scheduler.ViewState.MOUNTED;\n            this.graph.trigger('view:mounted', { view });\n        }\n    }\n    resetViews() {\n        this.willRemoveViews = Object.assign(Object.assign({}, this.views), this.willRemoveViews);\n        Object.values(this.willRemoveViews).forEach((viewItem) => {\n            if (viewItem) {\n                this.removeView(viewItem.view);\n            }\n        });\n        this.views = {};\n        this.willRemoveViews = {};\n    }\n    removeView(view) {\n        const cell = view.cell;\n        const viewItem = this.willRemoveViews[cell.id];\n        if (viewItem && view) {\n            viewItem.view.remove();\n            delete this.willRemoveViews[cell.id];\n            this.graph.trigger('view:unmounted', { view });\n        }\n    }\n    toggleVisible(cell, visible) {\n        const edges = this.model.getConnectedEdges(cell);\n        for (let i = 0, len = edges.length; i < len; i += 1) {\n            const edge = edges[i];\n            if (visible) {\n                const source = edge.getSourceCell();\n                const target = edge.getTargetCell();\n                if ((source && !source.isVisible()) ||\n                    (target && !target.isVisible())) {\n                    continue;\n                }\n                this.toggleVisible(edge, true);\n            }\n            else {\n                this.toggleVisible(edge, false);\n            }\n        }\n        const viewItem = this.views[cell.id];\n        if (viewItem) {\n            Dom.css(viewItem.view.container, {\n                display: visible ? 'unset' : 'none',\n            });\n        }\n    }\n    addZPivot(zIndex = 0) {\n        if (this.zPivots == null) {\n            this.zPivots = {};\n        }\n        const pivots = this.zPivots;\n        let pivot = pivots[zIndex];\n        if (pivot) {\n            return pivot;\n        }\n        pivot = pivots[zIndex] = document.createComment(`z-index:${zIndex + 1}`);\n        let neighborZ = -Infinity;\n        // eslint-disable-next-line\n        for (const key in pivots) {\n            const currentZ = +key;\n            if (currentZ < zIndex && currentZ > neighborZ) {\n                neighborZ = currentZ;\n                if (neighborZ === zIndex - 1) {\n                    continue;\n                }\n            }\n        }\n        const layer = this.container;\n        if (neighborZ !== -Infinity) {\n            const neighborPivot = pivots[neighborZ];\n            layer.insertBefore(pivot, neighborPivot.nextSibling);\n        }\n        else {\n            layer.insertBefore(pivot, layer.firstChild);\n        }\n        return pivot;\n    }\n    removeZPivots() {\n        if (this.zPivots) {\n            Object.values(this.zPivots).forEach((elem) => {\n                if (elem && elem.parentNode) {\n                    elem.parentNode.removeChild(elem);\n                }\n            });\n        }\n        this.zPivots = {};\n    }\n    createCellView(cell) {\n        const options = { graph: this.graph };\n        const createViewHook = this.graph.options.createCellView;\n        if (createViewHook) {\n            const ret = FunctionExt.call(createViewHook, this.graph, cell);\n            if (ret) {\n                return new ret(cell, options); // eslint-disable-line new-cap\n            }\n            if (ret === null) {\n                // null means not render\n                return null;\n            }\n        }\n        const view = cell.view;\n        if (view != null && typeof view === 'string') {\n            const def = CellView.registry.get(view);\n            if (def) {\n                return new def(cell, options); // eslint-disable-line new-cap\n            }\n            return CellView.registry.onNotFound(view);\n        }\n        if (cell.isNode()) {\n            return new NodeView(cell, options);\n        }\n        if (cell.isEdge()) {\n            return new EdgeView(cell, options);\n        }\n        return null;\n    }\n    getEffectedEdges(view) {\n        const effectedEdges = [];\n        const cell = view.cell;\n        const edges = this.model.getConnectedEdges(cell);\n        for (let i = 0, n = edges.length; i < n; i += 1) {\n            const edge = edges[i];\n            const viewItem = this.views[edge.id];\n            if (!viewItem) {\n                continue;\n            }\n            const edgeView = viewItem.view;\n            if (!this.isViewMounted(edgeView)) {\n                continue;\n            }\n            const flagLabels = ['update'];\n            if (edge.getTargetCell() === cell) {\n                flagLabels.push('target');\n            }\n            if (edge.getSourceCell() === cell) {\n                flagLabels.push('source');\n            }\n            effectedEdges.push({\n                id: edge.id,\n                view: edgeView,\n                flag: edgeView.getFlag(flagLabels),\n            });\n        }\n        return effectedEdges;\n    }\n    isUpdatable(view) {\n        if (view.isNodeView()) {\n            if (this.renderArea) {\n                return this.renderArea.isIntersectWithRect(view.cell.getBBox());\n            }\n            return true;\n        }\n        if (view.isEdgeView()) {\n            const edge = view.cell;\n            const sourceCell = edge.getSourceCell();\n            const targetCell = edge.getTargetCell();\n            if (this.renderArea && sourceCell && targetCell) {\n                return (this.renderArea.isIntersectWithRect(sourceCell.getBBox()) ||\n                    this.renderArea.isIntersectWithRect(targetCell.getBBox()));\n            }\n        }\n        return true;\n    }\n    getRenderPriority(view) {\n        return view.cell.isNode()\n            ? JOB_PRIORITY.RenderNode\n            : JOB_PRIORITY.RenderEdge;\n    }\n    dispose() {\n        this.stopListening();\n    }\n}\n__decorate([\n    Disposable.dispose()\n], Scheduler.prototype, \"dispose\", null);\n(function (Scheduler) {\n    Scheduler.FLAG_INSERT = 1 << 30;\n    Scheduler.FLAG_REMOVE = 1 << 29;\n    Scheduler.FLAG_RENDER = (1 << 26) - 1;\n})(Scheduler || (Scheduler = {}));\n(function (Scheduler) {\n    let ViewState;\n    (function (ViewState) {\n        ViewState[ViewState[\"CREATED\"] = 0] = \"CREATED\";\n        ViewState[ViewState[\"MOUNTED\"] = 1] = \"MOUNTED\";\n        ViewState[ViewState[\"WAITING\"] = 2] = \"WAITING\";\n    })(ViewState = Scheduler.ViewState || (Scheduler.ViewState = {}));\n})(Scheduler || (Scheduler = {}));\n//# sourceMappingURL=scheduler.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/* eslint-disable @typescript-eslint/no-unused-vars */\nimport { Rectangle } from '@antv/x6-geometry';\nimport { Base } from '../graph/base';\nimport { Cell } from '../model';\nimport { Scheduler } from './scheduler';\nimport { Util } from '../util';\nexport class Renderer extends Base {\n    constructor() {\n        super(...arguments);\n        this.schedule = new Scheduler(this.graph);\n    }\n    requestViewUpdate(view, flag, options = {}) {\n        this.schedule.requestViewUpdate(view, flag, options);\n    }\n    isViewMounted(view) {\n        return this.schedule.isViewMounted(view);\n    }\n    setRenderArea(area) {\n        this.schedule.setRenderArea(area);\n    }\n    findViewByElem(elem) {\n        if (elem == null) {\n            return null;\n        }\n        const container = this.options.container;\n        const target = typeof elem === 'string'\n            ? container.querySelector(elem)\n            : elem instanceof Element\n                ? elem\n                : elem[0];\n        if (target) {\n            const id = this.graph.view.findAttr('data-cell-id', target);\n            if (id) {\n                const views = this.schedule.views;\n                if (views[id]) {\n                    return views[id].view;\n                }\n            }\n        }\n        return null;\n    }\n    findViewByCell(cell) {\n        if (cell == null) {\n            return null;\n        }\n        const id = Cell.isCell(cell) ? cell.id : cell;\n        const views = this.schedule.views;\n        if (views[id]) {\n            return views[id].view;\n        }\n        return null;\n    }\n    findViewsFromPoint(p) {\n        const ref = { x: p.x, y: p.y };\n        return this.model\n            .getCells()\n            .map((cell) => this.findViewByCell(cell))\n            .filter((view) => {\n            if (view != null) {\n                return Util.getBBox(view.container, {\n                    target: this.view.stage,\n                }).containsPoint(ref);\n            }\n            return false;\n        });\n    }\n    findEdgeViewsFromPoint(p, threshold = 5) {\n        return this.model\n            .getEdges()\n            .map((edge) => this.findViewByCell(edge))\n            .filter((view) => {\n            if (view != null) {\n                const point = view.getClosestPoint(p);\n                if (point) {\n                    return point.distance(p) <= threshold;\n                }\n            }\n            return false;\n        });\n    }\n    findViewsInArea(rect, options = {}) {\n        const area = Rectangle.create(rect);\n        return this.model\n            .getCells()\n            .map((cell) => this.findViewByCell(cell))\n            .filter((view) => {\n            if (view) {\n                if (options.nodeOnly && !view.isNodeView()) {\n                    return false;\n                }\n                const bbox = Util.getBBox(view.container, {\n                    target: this.view.stage,\n                });\n                if (bbox.width === 0) {\n                    bbox.inflate(1, 0);\n                }\n                else if (bbox.height === 0) {\n                    bbox.inflate(0, 1);\n                }\n                return options.strict\n                    ? area.containsRect(bbox)\n                    : area.isIntersectWithRect(bbox);\n            }\n            return false;\n        });\n    }\n    dispose() {\n        this.schedule.dispose();\n    }\n}\n__decorate([\n    Base.dispose()\n], Renderer.prototype, \"dispose\", null);\n//# sourceMappingURL=renderer.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { StringExt, Dom, Vector } from '@antv/x6-common';\nimport { Filter } from '../registry';\nimport { Markup } from '../view';\nimport { Base } from './base';\nexport class DefsManager extends Base {\n    get cid() {\n        return this.graph.view.cid;\n    }\n    get svg() {\n        return this.view.svg;\n    }\n    get defs() {\n        return this.view.defs;\n    }\n    isDefined(id) {\n        return this.svg.getElementById(id) != null;\n    }\n    filter(options) {\n        let filterId = options.id;\n        const name = options.name;\n        if (!filterId) {\n            filterId = `filter-${name}-${this.cid}-${StringExt.hashcode(JSON.stringify(options))}`;\n        }\n        if (!this.isDefined(filterId)) {\n            const fn = Filter.registry.get(name);\n            if (fn == null) {\n                return Filter.registry.onNotFound(name);\n            }\n            const markup = fn(options.args || {});\n            // Set the filter area to be 3x the bounding box of the cell\n            // and center the filter around the cell.\n            const attrs = Object.assign(Object.assign({ x: -1, y: -1, width: 3, height: 3, filterUnits: 'objectBoundingBox' }, options.attrs), { id: filterId });\n            Vector.create(Markup.sanitize(markup), attrs).appendTo(this.defs);\n        }\n        return filterId;\n    }\n    gradient(options) {\n        let id = options.id;\n        const type = options.type;\n        if (!id) {\n            id = `gradient-${type}-${this.cid}-${StringExt.hashcode(JSON.stringify(options))}`;\n        }\n        if (!this.isDefined(id)) {\n            const stops = options.stops;\n            const arr = stops.map((stop) => {\n                const opacity = stop.opacity != null && Number.isFinite(stop.opacity)\n                    ? stop.opacity\n                    : 1;\n                return `<stop offset=\"${stop.offset}\" stop-color=\"${stop.color}\" stop-opacity=\"${opacity}\"/>`;\n            });\n            const markup = `<${type}>${arr.join('')}</${type}>`;\n            const attrs = Object.assign({ id }, options.attrs);\n            Vector.create(markup, attrs).appendTo(this.defs);\n        }\n        return id;\n    }\n    marker(options) {\n        const { id, refX, refY, markerUnits, markerOrient, tagName, children } = options, attrs = __rest(options, [\"id\", \"refX\", \"refY\", \"markerUnits\", \"markerOrient\", \"tagName\", \"children\"]);\n        let markerId = id;\n        if (!markerId) {\n            markerId = `marker-${this.cid}-${StringExt.hashcode(JSON.stringify(options))}`;\n        }\n        if (!this.isDefined(markerId)) {\n            if (tagName !== 'path') {\n                // remove unnecessary d attribute inherit from standard edge.\n                delete attrs.d;\n            }\n            const pathMarker = Vector.create('marker', {\n                refX,\n                refY,\n                id: markerId,\n                overflow: 'visible',\n                orient: markerOrient != null ? markerOrient : 'auto',\n                markerUnits: markerUnits || 'userSpaceOnUse',\n            }, children\n                ? children.map((_a) => {\n                    var { tagName } = _a, other = __rest(_a, [\"tagName\"]);\n                    return Vector.create(`${tagName}` || 'path', Dom.kebablizeAttrs(Object.assign(Object.assign({}, attrs), other)));\n                })\n                : [Vector.create(tagName || 'path', Dom.kebablizeAttrs(attrs))]);\n            this.defs.appendChild(pathMarker.node);\n        }\n        return markerId;\n    }\n    remove(id) {\n        const elem = this.svg.getElementById(id);\n        if (elem && elem.parentNode) {\n            elem.parentNode.removeChild(elem);\n        }\n    }\n}\n//# sourceMappingURL=defs.js.map","import { Dom } from '@antv/x6-common';\nimport { Point, Rectangle } from '@antv/x6-geometry';\nimport { Base } from './base';\nimport { Util } from '../util';\nexport class CoordManager extends Base {\n    getClientMatrix() {\n        return Dom.createSVGMatrix(this.view.stage.getScreenCTM());\n    }\n    /**\n     * Returns coordinates of the graph viewport, relative to the window.\n     */\n    getClientOffset() {\n        // see: https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect\n        const rect = this.view.svg.getBoundingClientRect();\n        return new Point(rect.left, rect.top);\n    }\n    /**\n     * Returns coordinates of the graph viewport, relative to the document.\n     */\n    getPageOffset() {\n        // see: https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect\n        return this.getClientOffset().translate(window.scrollX, window.scrollY);\n    }\n    snapToGrid(x, y) {\n        const p = typeof x === 'number'\n            ? this.clientToLocalPoint(x, y)\n            : this.clientToLocalPoint(x.x, x.y);\n        return p.snapToGrid(this.graph.getGridSize());\n    }\n    localToGraphPoint(x, y) {\n        const localPoint = Point.create(x, y);\n        return Util.transformPoint(localPoint, this.graph.matrix());\n    }\n    localToClientPoint(x, y) {\n        const localPoint = Point.create(x, y);\n        return Util.transformPoint(localPoint, this.getClientMatrix());\n    }\n    localToPagePoint(x, y) {\n        const p = typeof x === 'number'\n            ? this.localToGraphPoint(x, y)\n            : this.localToGraphPoint(x);\n        return p.translate(this.getPageOffset());\n    }\n    localToGraphRect(x, y, width, height) {\n        const localRect = Rectangle.create(x, y, width, height);\n        return Util.transformRectangle(localRect, this.graph.matrix());\n    }\n    localToClientRect(x, y, width, height) {\n        const localRect = Rectangle.create(x, y, width, height);\n        return Util.transformRectangle(localRect, this.getClientMatrix());\n    }\n    localToPageRect(x, y, width, height) {\n        const rect = typeof x === 'number'\n            ? this.localToGraphRect(x, y, width, height)\n            : this.localToGraphRect(x);\n        return rect.translate(this.getPageOffset());\n    }\n    graphToLocalPoint(x, y) {\n        const graphPoint = Point.create(x, y);\n        return Util.transformPoint(graphPoint, this.graph.matrix().inverse());\n    }\n    clientToLocalPoint(x, y) {\n        const clientPoint = Point.create(x, y);\n        return Util.transformPoint(clientPoint, this.getClientMatrix().inverse());\n    }\n    clientToGraphPoint(x, y) {\n        const clientPoint = Point.create(x, y);\n        return Util.transformPoint(clientPoint, this.graph.matrix().multiply(this.getClientMatrix().inverse()));\n    }\n    pageToLocalPoint(x, y) {\n        const pagePoint = Point.create(x, y);\n        const graphPoint = pagePoint.diff(this.getPageOffset());\n        return this.graphToLocalPoint(graphPoint);\n    }\n    graphToLocalRect(x, y, width, height) {\n        const graphRect = Rectangle.create(x, y, width, height);\n        return Util.transformRectangle(graphRect, this.graph.matrix().inverse());\n    }\n    clientToLocalRect(x, y, width, height) {\n        const clientRect = Rectangle.create(x, y, width, height);\n        return Util.transformRectangle(clientRect, this.getClientMatrix().inverse());\n    }\n    clientToGraphRect(x, y, width, height) {\n        const clientRect = Rectangle.create(x, y, width, height);\n        return Util.transformRectangle(clientRect, this.graph.matrix().multiply(this.getClientMatrix().inverse()));\n    }\n    pageToLocalRect(x, y, width, height) {\n        const graphRect = Rectangle.create(x, y, width, height);\n        const pageOffset = this.getPageOffset();\n        graphRect.x -= pageOffset.x;\n        graphRect.y -= pageOffset.y;\n        return this.graphToLocalRect(graphRect);\n    }\n}\n//# sourceMappingURL=coord.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Dom } from '@antv/x6-common';\nimport { Highlighter } from '../registry';\nimport { Base } from './base';\nexport class HighlightManager extends Base {\n    constructor() {\n        super(...arguments);\n        this.highlights = {};\n    }\n    init() {\n        this.startListening();\n    }\n    startListening() {\n        this.graph.on('cell:highlight', this.onCellHighlight, this);\n        this.graph.on('cell:unhighlight', this.onCellUnhighlight, this);\n    }\n    stopListening() {\n        this.graph.off('cell:highlight', this.onCellHighlight, this);\n        this.graph.off('cell:unhighlight', this.onCellUnhighlight, this);\n    }\n    onCellHighlight({ view: cellView, magnet, options = {}, }) {\n        const resolved = this.resolveHighlighter(options);\n        if (!resolved) {\n            return;\n        }\n        const key = this.getHighlighterId(magnet, resolved);\n        if (!this.highlights[key]) {\n            const highlighter = resolved.highlighter;\n            highlighter.highlight(cellView, magnet, Object.assign({}, resolved.args));\n            this.highlights[key] = {\n                cellView,\n                magnet,\n                highlighter,\n                args: resolved.args,\n            };\n        }\n    }\n    onCellUnhighlight({ magnet, options = {}, }) {\n        const resolved = this.resolveHighlighter(options);\n        if (!resolved) {\n            return;\n        }\n        const id = this.getHighlighterId(magnet, resolved);\n        this.unhighlight(id);\n    }\n    resolveHighlighter(options) {\n        const graphOptions = this.options;\n        let highlighterDef = options.highlighter;\n        if (highlighterDef == null) {\n            // check for built-in types\n            const type = options.type;\n            highlighterDef =\n                (type && graphOptions.highlighting[type]) ||\n                    graphOptions.highlighting.default;\n        }\n        if (highlighterDef == null) {\n            return null;\n        }\n        const def = typeof highlighterDef === 'string'\n            ? {\n                name: highlighterDef,\n            }\n            : highlighterDef;\n        const name = def.name;\n        const highlighter = Highlighter.registry.get(name);\n        if (highlighter == null) {\n            return Highlighter.registry.onNotFound(name);\n        }\n        Highlighter.check(name, highlighter);\n        return {\n            name,\n            highlighter,\n            args: def.args || {},\n        };\n    }\n    getHighlighterId(magnet, options) {\n        Dom.ensureId(magnet);\n        return options.name + magnet.id + JSON.stringify(options.args);\n    }\n    unhighlight(id) {\n        const highlight = this.highlights[id];\n        if (highlight) {\n            highlight.highlighter.unhighlight(highlight.cellView, highlight.magnet, highlight.args);\n            delete this.highlights[id];\n        }\n    }\n    dispose() {\n        Object.keys(this.highlights).forEach((id) => this.unhighlight(id));\n        this.stopListening();\n    }\n}\n__decorate([\n    HighlightManager.dispose()\n], HighlightManager.prototype, \"dispose\", null);\n//# sourceMappingURL=highlight.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { SizeSensor } from '@antv/x6-common';\nimport { Base } from './base';\nexport class SizeManager extends Base {\n    getScroller() {\n        const scroller = this.graph.getPlugin('scroller');\n        if (scroller && scroller.options.enabled) {\n            return scroller;\n        }\n        return null;\n    }\n    getContainer() {\n        const scroller = this.getScroller();\n        if (scroller) {\n            return scroller.container.parentElement;\n        }\n        return this.graph.container.parentElement;\n    }\n    getSensorTarget() {\n        const autoResize = this.options.autoResize;\n        if (autoResize) {\n            if (typeof autoResize === 'boolean') {\n                return this.getContainer();\n            }\n            return autoResize;\n        }\n    }\n    init() {\n        const autoResize = this.options.autoResize;\n        if (autoResize) {\n            const target = this.getSensorTarget();\n            if (target) {\n                SizeSensor.bind(target, () => {\n                    const width = target.offsetWidth;\n                    const height = target.offsetHeight;\n                    this.resize(width, height);\n                });\n            }\n        }\n    }\n    resize(width, height) {\n        const scroller = this.getScroller();\n        if (scroller) {\n            scroller.resize(width, height);\n        }\n        else {\n            this.graph.transform.resize(width, height);\n        }\n    }\n    dispose() {\n        SizeSensor.clear(this.graph.container);\n    }\n}\n__decorate([\n    Base.dispose()\n], SizeManager.prototype, \"dispose\", null);\n//# sourceMappingURL=size.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Basecoat } from '@antv/x6-common';\nimport { Point, Rectangle } from '@antv/x6-geometry';\nimport { Model, Cell, Node, Edge } from '../model';\nimport { CellView } from '../view';\nimport * as Registry from '../registry';\nimport { GraphView } from './view';\nimport { CSSManager as Css } from './css';\nimport { Options as GraphOptions } from './options';\nimport { GridManager as Grid } from './grid';\nimport { TransformManager as Transform } from './transform';\nimport { BackgroundManager as Background } from './background';\nimport { PanningManager as Panning } from './panning';\nimport { MouseWheel as Wheel } from './mousewheel';\nimport { VirtualRenderManager as VirtualRender } from './virtual-render';\nimport { Renderer as ViewRenderer } from '../renderer';\nimport { DefsManager as Defs } from './defs';\nimport { CoordManager as Coord } from './coord';\nimport { HighlightManager as Highlight } from './highlight';\nimport { SizeManager as Size } from './size';\nexport class Graph extends Basecoat {\n    get container() {\n        return this.options.container;\n    }\n    get [Symbol.toStringTag]() {\n        return Graph.toStringTag;\n    }\n    constructor(options) {\n        super();\n        this.installedPlugins = new Set();\n        this.options = GraphOptions.get(options);\n        this.css = new Css(this);\n        this.view = new GraphView(this);\n        this.defs = new Defs(this);\n        this.coord = new Coord(this);\n        this.transform = new Transform(this);\n        this.highlight = new Highlight(this);\n        this.grid = new Grid(this);\n        this.background = new Background(this);\n        if (this.options.model) {\n            this.model = this.options.model;\n        }\n        else {\n            this.model = new Model();\n            this.model.graph = this;\n        }\n        this.renderer = new ViewRenderer(this);\n        this.panning = new Panning(this);\n        this.mousewheel = new Wheel(this);\n        this.virtualRender = new VirtualRender(this);\n        this.size = new Size(this);\n    }\n    // #region model\n    isNode(cell) {\n        return cell.isNode();\n    }\n    isEdge(cell) {\n        return cell.isEdge();\n    }\n    resetCells(cells, options = {}) {\n        this.model.resetCells(cells, options);\n        return this;\n    }\n    clearCells(options = {}) {\n        this.model.clear(options);\n        return this;\n    }\n    toJSON(options = {}) {\n        return this.model.toJSON(options);\n    }\n    parseJSON(data) {\n        return this.model.parseJSON(data);\n    }\n    fromJSON(data, options = {}) {\n        this.model.fromJSON(data, options);\n        return this;\n    }\n    getCellById(id) {\n        return this.model.getCell(id);\n    }\n    addNode(node, options = {}) {\n        return this.model.addNode(node, options);\n    }\n    addNodes(nodes, options = {}) {\n        return this.addCell(nodes.map((node) => (Node.isNode(node) ? node : this.createNode(node))), options);\n    }\n    createNode(metadata) {\n        return this.model.createNode(metadata);\n    }\n    removeNode(node, options = {}) {\n        return this.model.removeCell(node, options);\n    }\n    addEdge(edge, options = {}) {\n        return this.model.addEdge(edge, options);\n    }\n    addEdges(edges, options = {}) {\n        return this.addCell(edges.map((edge) => (Edge.isEdge(edge) ? edge : this.createEdge(edge))), options);\n    }\n    removeEdge(edge, options = {}) {\n        return this.model.removeCell(edge, options);\n    }\n    createEdge(metadata) {\n        return this.model.createEdge(metadata);\n    }\n    addCell(cell, options = {}) {\n        this.model.addCell(cell, options);\n        return this;\n    }\n    removeCell(cell, options = {}) {\n        return this.model.removeCell(cell, options);\n    }\n    removeCells(cells, options = {}) {\n        return this.model.removeCells(cells, options);\n    }\n    removeConnectedEdges(cell, options = {}) {\n        return this.model.removeConnectedEdges(cell, options);\n    }\n    disconnectConnectedEdges(cell, options = {}) {\n        this.model.disconnectConnectedEdges(cell, options);\n        return this;\n    }\n    hasCell(cell) {\n        return this.model.has(cell);\n    }\n    getCells() {\n        return this.model.getCells();\n    }\n    getCellCount() {\n        return this.model.total();\n    }\n    /**\n     * Returns all the nodes in the graph.\n     */\n    getNodes() {\n        return this.model.getNodes();\n    }\n    /**\n     * Returns all the edges in the graph.\n     */\n    getEdges() {\n        return this.model.getEdges();\n    }\n    /**\n     * Returns all outgoing edges for the node.\n     */\n    getOutgoingEdges(cell) {\n        return this.model.getOutgoingEdges(cell);\n    }\n    /**\n     * Returns all incoming edges for the node.\n     */\n    getIncomingEdges(cell) {\n        return this.model.getIncomingEdges(cell);\n    }\n    /**\n     * Returns edges connected with cell.\n     */\n    getConnectedEdges(cell, options = {}) {\n        return this.model.getConnectedEdges(cell, options);\n    }\n    /**\n     * Returns an array of all the roots of the graph.\n     */\n    getRootNodes() {\n        return this.model.getRoots();\n    }\n    /**\n     * Returns an array of all the leafs of the graph.\n     */\n    getLeafNodes() {\n        return this.model.getLeafs();\n    }\n    /**\n     * Returns `true` if the node is a root node, i.e.\n     * there is no  edges coming to the node.\n     */\n    isRootNode(cell) {\n        return this.model.isRoot(cell);\n    }\n    /**\n     * Returns `true` if the node is a leaf node, i.e.\n     * there is no edges going out from the node.\n     */\n    isLeafNode(cell) {\n        return this.model.isLeaf(cell);\n    }\n    /**\n     * Returns all the neighbors of node in the graph. Neighbors are all\n     * the nodes connected to node via either incoming or outgoing edge.\n     */\n    getNeighbors(cell, options = {}) {\n        return this.model.getNeighbors(cell, options);\n    }\n    /**\n     * Returns `true` if `cell2` is a neighbor of `cell1`.\n     */\n    isNeighbor(cell1, cell2, options = {}) {\n        return this.model.isNeighbor(cell1, cell2, options);\n    }\n    getSuccessors(cell, options = {}) {\n        return this.model.getSuccessors(cell, options);\n    }\n    /**\n     * Returns `true` if `cell2` is a successor of `cell1`.\n     */\n    isSuccessor(cell1, cell2, options = {}) {\n        return this.model.isSuccessor(cell1, cell2, options);\n    }\n    getPredecessors(cell, options = {}) {\n        return this.model.getPredecessors(cell, options);\n    }\n    /**\n     * Returns `true` if `cell2` is a predecessor of `cell1`.\n     */\n    isPredecessor(cell1, cell2, options = {}) {\n        return this.model.isPredecessor(cell1, cell2, options);\n    }\n    getCommonAncestor(...cells) {\n        return this.model.getCommonAncestor(...cells);\n    }\n    /**\n     * Returns an array of cells that result from finding nodes/edges that\n     * are connected to any of the cells in the cells array. This function\n     * loops over cells and if the current cell is a edge, it collects its\n     * source/target nodes; if it is an node, it collects its incoming and\n     * outgoing edges if both the edge terminal (source/target) are in the\n     * cells array.\n     */\n    getSubGraph(cells, options = {}) {\n        return this.model.getSubGraph(cells, options);\n    }\n    /**\n     * Clones the whole subgraph (including all the connected links whose\n     * source/target is in the subgraph). If `options.deep` is `true`, also\n     * take into account all the embedded cells of all the subgraph cells.\n     *\n     * Returns a map of the form: { [original cell ID]: [clone] }.\n     */\n    cloneSubGraph(cells, options = {}) {\n        return this.model.cloneSubGraph(cells, options);\n    }\n    cloneCells(cells) {\n        return this.model.cloneCells(cells);\n    }\n    getNodesFromPoint(x, y) {\n        return this.model.getNodesFromPoint(x, y);\n    }\n    getNodesInArea(x, y, w, h, options) {\n        return this.model.getNodesInArea(x, y, w, h, options);\n    }\n    getNodesUnderNode(node, options = {}) {\n        return this.model.getNodesUnderNode(node, options);\n    }\n    searchCell(cell, iterator, options = {}) {\n        this.model.search(cell, iterator, options);\n        return this;\n    }\n    /** *\n     * Returns an array of IDs of nodes on the shortest\n     * path between source and target.\n     */\n    getShortestPath(source, target, options = {}) {\n        return this.model.getShortestPath(source, target, options);\n    }\n    /**\n     * Returns the bounding box that surrounds all cells in the graph.\n     */\n    getAllCellsBBox() {\n        return this.model.getAllCellsBBox();\n    }\n    /**\n     * Returns the bounding box that surrounds all the given cells.\n     */\n    getCellsBBox(cells, options = {}) {\n        return this.model.getCellsBBox(cells, options);\n    }\n    startBatch(name, data = {}) {\n        this.model.startBatch(name, data);\n    }\n    stopBatch(name, data = {}) {\n        this.model.stopBatch(name, data);\n    }\n    batchUpdate(arg1, arg2, arg3) {\n        const name = typeof arg1 === 'string' ? arg1 : 'update';\n        const execute = typeof arg1 === 'string' ? arg2 : arg1;\n        const data = typeof arg2 === 'function' ? arg3 : arg2;\n        this.startBatch(name, data);\n        const result = execute();\n        this.stopBatch(name, data);\n        return result;\n    }\n    updateCellId(cell, newId) {\n        return this.model.updateCellId(cell, newId);\n    }\n    // #endregion\n    // #region view\n    findView(ref) {\n        if (Cell.isCell(ref)) {\n            return this.findViewByCell(ref);\n        }\n        return this.findViewByElem(ref);\n    }\n    findViews(ref) {\n        if (Rectangle.isRectangleLike(ref)) {\n            return this.findViewsInArea(ref);\n        }\n        if (Point.isPointLike(ref)) {\n            return this.findViewsFromPoint(ref);\n        }\n        return [];\n    }\n    findViewByCell(cell) {\n        return this.renderer.findViewByCell(cell);\n    }\n    findViewByElem(elem) {\n        return this.renderer.findViewByElem(elem);\n    }\n    findViewsFromPoint(x, y) {\n        const p = typeof x === 'number' ? { x, y: y } : x;\n        return this.renderer.findViewsFromPoint(p);\n    }\n    findViewsInArea(x, y, width, height, options) {\n        const rect = typeof x === 'number'\n            ? {\n                x,\n                y: y,\n                width: width,\n                height: height,\n            }\n            : x;\n        const localOptions = typeof x === 'number'\n            ? options\n            : y;\n        return this.renderer.findViewsInArea(rect, localOptions);\n    }\n    matrix(mat) {\n        if (typeof mat === 'undefined') {\n            return this.transform.getMatrix();\n        }\n        this.transform.setMatrix(mat);\n        return this;\n    }\n    resize(width, height) {\n        const scroller = this.getPlugin('scroller');\n        if (scroller) {\n            scroller.resize(width, height);\n        }\n        else {\n            this.transform.resize(width, height);\n        }\n        return this;\n    }\n    scale(sx, sy = sx, cx = 0, cy = 0) {\n        if (typeof sx === 'undefined') {\n            return this.transform.getScale();\n        }\n        this.transform.scale(sx, sy, cx, cy);\n        return this;\n    }\n    zoom(factor, options) {\n        const scroller = this.getPlugin('scroller');\n        if (scroller) {\n            if (typeof factor === 'undefined') {\n                return scroller.zoom();\n            }\n            scroller.zoom(factor, options);\n        }\n        else {\n            if (typeof factor === 'undefined') {\n                return this.transform.getZoom();\n            }\n            this.transform.zoom(factor, options);\n        }\n        return this;\n    }\n    zoomTo(factor, options = {}) {\n        const scroller = this.getPlugin('scroller');\n        if (scroller) {\n            scroller.zoom(factor, Object.assign(Object.assign({}, options), { absolute: true }));\n        }\n        else {\n            this.transform.zoom(factor, Object.assign(Object.assign({}, options), { absolute: true }));\n        }\n        return this;\n    }\n    zoomToRect(rect, options = {}) {\n        const scroller = this.getPlugin('scroller');\n        if (scroller) {\n            scroller.zoomToRect(rect, options);\n        }\n        else {\n            this.transform.zoomToRect(rect, options);\n        }\n        return this;\n    }\n    zoomToFit(options = {}) {\n        const scroller = this.getPlugin('scroller');\n        if (scroller) {\n            scroller.zoomToFit(options);\n        }\n        else {\n            this.transform.zoomToFit(options);\n        }\n        return this;\n    }\n    rotate(angle, cx, cy) {\n        if (typeof angle === 'undefined') {\n            return this.transform.getRotation();\n        }\n        this.transform.rotate(angle, cx, cy);\n        return this;\n    }\n    translate(tx, ty) {\n        if (typeof tx === 'undefined') {\n            return this.transform.getTranslation();\n        }\n        this.transform.translate(tx, ty);\n        return this;\n    }\n    translateBy(dx, dy) {\n        const ts = this.translate();\n        const tx = ts.tx + dx;\n        const ty = ts.ty + dy;\n        return this.translate(tx, ty);\n    }\n    getGraphArea() {\n        return this.transform.getGraphArea();\n    }\n    getContentArea(options = {}) {\n        return this.transform.getContentArea(options);\n    }\n    getContentBBox(options = {}) {\n        return this.transform.getContentBBox(options);\n    }\n    fitToContent(gridWidth, gridHeight, padding, options) {\n        return this.transform.fitToContent(gridWidth, gridHeight, padding, options);\n    }\n    scaleContentToFit(options = {}) {\n        this.transform.scaleContentToFit(options);\n        return this;\n    }\n    /**\n     * Position the center of graph to the center of the viewport.\n     */\n    center(options) {\n        return this.centerPoint(options);\n    }\n    centerPoint(x, y, options) {\n        const scroller = this.getPlugin('scroller');\n        if (scroller) {\n            scroller.centerPoint(x, y, options);\n        }\n        else {\n            this.transform.centerPoint(x, y);\n        }\n        return this;\n    }\n    centerContent(options) {\n        const scroller = this.getPlugin('scroller');\n        if (scroller) {\n            scroller.centerContent(options);\n        }\n        else {\n            this.transform.centerContent(options);\n        }\n        return this;\n    }\n    centerCell(cell, options) {\n        const scroller = this.getPlugin('scroller');\n        if (scroller) {\n            scroller.centerCell(cell, options);\n        }\n        else {\n            this.transform.centerCell(cell);\n        }\n        return this;\n    }\n    positionPoint(point, x, y, options = {}) {\n        const scroller = this.getPlugin('scroller');\n        if (scroller) {\n            scroller.positionPoint(point, x, y, options);\n        }\n        else {\n            this.transform.positionPoint(point, x, y);\n        }\n        return this;\n    }\n    positionRect(rect, direction, options) {\n        const scroller = this.getPlugin('scroller');\n        if (scroller) {\n            scroller.positionRect(rect, direction, options);\n        }\n        else {\n            this.transform.positionRect(rect, direction);\n        }\n        return this;\n    }\n    positionCell(cell, direction, options) {\n        const scroller = this.getPlugin('scroller');\n        if (scroller) {\n            scroller.positionCell(cell, direction, options);\n        }\n        else {\n            this.transform.positionCell(cell, direction);\n        }\n        return this;\n    }\n    positionContent(pos, options) {\n        const scroller = this.getPlugin('scroller');\n        if (scroller) {\n            scroller.positionContent(pos, options);\n        }\n        else {\n            this.transform.positionContent(pos, options);\n        }\n        return this;\n    }\n    snapToGrid(x, y) {\n        return this.coord.snapToGrid(x, y);\n    }\n    pageToLocal(x, y, width, height) {\n        if (Rectangle.isRectangleLike(x)) {\n            return this.coord.pageToLocalRect(x);\n        }\n        if (typeof x === 'number' &&\n            typeof y === 'number' &&\n            typeof width === 'number' &&\n            typeof height === 'number') {\n            return this.coord.pageToLocalRect(x, y, width, height);\n        }\n        return this.coord.pageToLocalPoint(x, y);\n    }\n    localToPage(x, y, width, height) {\n        if (Rectangle.isRectangleLike(x)) {\n            return this.coord.localToPageRect(x);\n        }\n        if (typeof x === 'number' &&\n            typeof y === 'number' &&\n            typeof width === 'number' &&\n            typeof height === 'number') {\n            return this.coord.localToPageRect(x, y, width, height);\n        }\n        return this.coord.localToPagePoint(x, y);\n    }\n    clientToLocal(x, y, width, height) {\n        if (Rectangle.isRectangleLike(x)) {\n            return this.coord.clientToLocalRect(x);\n        }\n        if (typeof x === 'number' &&\n            typeof y === 'number' &&\n            typeof width === 'number' &&\n            typeof height === 'number') {\n            return this.coord.clientToLocalRect(x, y, width, height);\n        }\n        return this.coord.clientToLocalPoint(x, y);\n    }\n    localToClient(x, y, width, height) {\n        if (Rectangle.isRectangleLike(x)) {\n            return this.coord.localToClientRect(x);\n        }\n        if (typeof x === 'number' &&\n            typeof y === 'number' &&\n            typeof width === 'number' &&\n            typeof height === 'number') {\n            return this.coord.localToClientRect(x, y, width, height);\n        }\n        return this.coord.localToClientPoint(x, y);\n    }\n    localToGraph(x, y, width, height) {\n        if (Rectangle.isRectangleLike(x)) {\n            return this.coord.localToGraphRect(x);\n        }\n        if (typeof x === 'number' &&\n            typeof y === 'number' &&\n            typeof width === 'number' &&\n            typeof height === 'number') {\n            return this.coord.localToGraphRect(x, y, width, height);\n        }\n        return this.coord.localToGraphPoint(x, y);\n    }\n    graphToLocal(x, y, width, height) {\n        if (Rectangle.isRectangleLike(x)) {\n            return this.coord.graphToLocalRect(x);\n        }\n        if (typeof x === 'number' &&\n            typeof y === 'number' &&\n            typeof width === 'number' &&\n            typeof height === 'number') {\n            return this.coord.graphToLocalRect(x, y, width, height);\n        }\n        return this.coord.graphToLocalPoint(x, y);\n    }\n    clientToGraph(x, y, width, height) {\n        if (Rectangle.isRectangleLike(x)) {\n            return this.coord.clientToGraphRect(x);\n        }\n        if (typeof x === 'number' &&\n            typeof y === 'number' &&\n            typeof width === 'number' &&\n            typeof height === 'number') {\n            return this.coord.clientToGraphRect(x, y, width, height);\n        }\n        return this.coord.clientToGraphPoint(x, y);\n    }\n    // #endregion\n    // #region defs\n    defineFilter(options) {\n        return this.defs.filter(options);\n    }\n    defineGradient(options) {\n        return this.defs.gradient(options);\n    }\n    defineMarker(options) {\n        return this.defs.marker(options);\n    }\n    // #endregion\n    // #region grid\n    getGridSize() {\n        return this.grid.getGridSize();\n    }\n    setGridSize(gridSize) {\n        this.grid.setGridSize(gridSize);\n        return this;\n    }\n    showGrid() {\n        this.grid.show();\n        return this;\n    }\n    hideGrid() {\n        this.grid.hide();\n        return this;\n    }\n    clearGrid() {\n        this.grid.clear();\n        return this;\n    }\n    drawGrid(options) {\n        this.grid.draw(options);\n        return this;\n    }\n    // #endregion\n    // #region background\n    updateBackground() {\n        this.background.update();\n        return this;\n    }\n    drawBackground(options, onGraph) {\n        const scroller = this.getPlugin('scroller');\n        if (scroller != null && (this.options.background == null || !onGraph)) {\n            scroller.drawBackground(options, onGraph);\n        }\n        else {\n            this.background.draw(options);\n        }\n        return this;\n    }\n    clearBackground(onGraph) {\n        const scroller = this.getPlugin('scroller');\n        if (scroller != null && (this.options.background == null || !onGraph)) {\n            scroller.clearBackground(onGraph);\n        }\n        else {\n            this.background.clear();\n        }\n        return this;\n    }\n    // #endregion\n    // #region virtual-render\n    enableVirtualRender() {\n        this.virtualRender.enableVirtualRender();\n        return this;\n    }\n    disableVirtualRender() {\n        this.virtualRender.disableVirtualRender();\n        return this;\n    }\n    // #endregion\n    // #region mousewheel\n    isMouseWheelEnabled() {\n        return !this.mousewheel.disabled;\n    }\n    enableMouseWheel() {\n        this.mousewheel.enable();\n        return this;\n    }\n    disableMouseWheel() {\n        this.mousewheel.disable();\n        return this;\n    }\n    toggleMouseWheel(enabled) {\n        if (enabled == null) {\n            if (this.isMouseWheelEnabled()) {\n                this.disableMouseWheel();\n            }\n            else {\n                this.enableMouseWheel();\n            }\n        }\n        else if (enabled) {\n            this.enableMouseWheel();\n        }\n        else {\n            this.disableMouseWheel();\n        }\n        return this;\n    }\n    // #endregion\n    // #region panning\n    isPannable() {\n        const scroller = this.getPlugin('scroller');\n        if (scroller) {\n            return scroller.isPannable();\n        }\n        return this.panning.pannable;\n    }\n    enablePanning() {\n        const scroller = this.getPlugin('scroller');\n        if (scroller) {\n            scroller.enablePanning();\n        }\n        else {\n            this.panning.enablePanning();\n        }\n        return this;\n    }\n    disablePanning() {\n        const scroller = this.getPlugin('scroller');\n        if (scroller) {\n            scroller.disablePanning();\n        }\n        else {\n            this.panning.disablePanning();\n        }\n        return this;\n    }\n    togglePanning(pannable) {\n        if (pannable == null) {\n            if (this.isPannable()) {\n                this.disablePanning();\n            }\n            else {\n                this.enablePanning();\n            }\n        }\n        else if (pannable !== this.isPannable()) {\n            if (pannable) {\n                this.enablePanning();\n            }\n            else {\n                this.disablePanning();\n            }\n        }\n        return this;\n    }\n    // #endregion\n    // #region plugin\n    use(plugin, ...options) {\n        if (!this.installedPlugins.has(plugin)) {\n            this.installedPlugins.add(plugin);\n            plugin.init(this, ...options);\n        }\n        return this;\n    }\n    getPlugin(pluginName) {\n        return Array.from(this.installedPlugins).find((plugin) => plugin.name === pluginName);\n    }\n    getPlugins(pluginName) {\n        return Array.from(this.installedPlugins).filter((plugin) => pluginName.includes(plugin.name));\n    }\n    enablePlugins(plugins) {\n        let postPlugins = plugins;\n        if (!Array.isArray(postPlugins)) {\n            postPlugins = [postPlugins];\n        }\n        const aboutToChangePlugins = this.getPlugins(postPlugins);\n        aboutToChangePlugins === null || aboutToChangePlugins === void 0 ? void 0 : aboutToChangePlugins.forEach((plugin) => {\n            var _a;\n            (_a = plugin === null || plugin === void 0 ? void 0 : plugin.enable) === null || _a === void 0 ? void 0 : _a.call(plugin);\n        });\n        return this;\n    }\n    disablePlugins(plugins) {\n        let postPlugins = plugins;\n        if (!Array.isArray(postPlugins)) {\n            postPlugins = [postPlugins];\n        }\n        const aboutToChangePlugins = this.getPlugins(postPlugins);\n        aboutToChangePlugins === null || aboutToChangePlugins === void 0 ? void 0 : aboutToChangePlugins.forEach((plugin) => {\n            var _a;\n            (_a = plugin === null || plugin === void 0 ? void 0 : plugin.disable) === null || _a === void 0 ? void 0 : _a.call(plugin);\n        });\n        return this;\n    }\n    isPluginEnabled(pluginName) {\n        var _a;\n        const pluginIns = this.getPlugin(pluginName);\n        return (_a = pluginIns === null || pluginIns === void 0 ? void 0 : pluginIns.isEnabled) === null || _a === void 0 ? void 0 : _a.call(pluginIns);\n    }\n    disposePlugins(plugins) {\n        let postPlugins = plugins;\n        if (!Array.isArray(postPlugins)) {\n            postPlugins = [postPlugins];\n        }\n        const aboutToChangePlugins = this.getPlugins(postPlugins);\n        aboutToChangePlugins === null || aboutToChangePlugins === void 0 ? void 0 : aboutToChangePlugins.forEach((plugin) => {\n            plugin.dispose();\n        });\n        return this;\n    }\n    // #endregion\n    // #region dispose\n    dispose() {\n        this.clearCells();\n        this.off();\n        this.css.dispose();\n        this.defs.dispose();\n        this.grid.dispose();\n        this.coord.dispose();\n        this.transform.dispose();\n        this.highlight.dispose();\n        this.background.dispose();\n        this.mousewheel.dispose();\n        this.panning.dispose();\n        this.view.dispose();\n        this.renderer.dispose();\n        this.installedPlugins.forEach((plugin) => {\n            plugin.dispose();\n        });\n    }\n}\n__decorate([\n    Basecoat.dispose()\n], Graph.prototype, \"dispose\", null);\n(function (Graph) {\n    /* eslint-disable @typescript-eslint/no-unused-vars */\n    Graph.View = GraphView;\n    Graph.Renderer = ViewRenderer;\n    Graph.MouseWheel = Wheel;\n    Graph.DefsManager = Defs;\n    Graph.GridManager = Grid;\n    Graph.CoordManager = Coord;\n    Graph.TransformManager = Transform;\n    Graph.HighlightManager = Highlight;\n    Graph.BackgroundManager = Background;\n})(Graph || (Graph = {}));\n(function (Graph) {\n    Graph.toStringTag = `X6.${Graph.name}`;\n    function isGraph(instance) {\n        if (instance == null) {\n            return false;\n        }\n        if (instance instanceof Graph) {\n            return true;\n        }\n        const tag = instance[Symbol.toStringTag];\n        if (tag == null || tag === Graph.toStringTag) {\n            return true;\n        }\n        return false;\n    }\n    Graph.isGraph = isGraph;\n})(Graph || (Graph = {}));\n(function (Graph) {\n    function render(options, data) {\n        const graph = options instanceof HTMLElement\n            ? new Graph({ container: options })\n            : new Graph(options);\n        if (data != null) {\n            graph.fromJSON(data);\n        }\n        return graph;\n    }\n    Graph.render = render;\n})(Graph || (Graph = {}));\n(function (Graph) {\n    Graph.registerNode = Node.registry.register;\n    Graph.registerEdge = Edge.registry.register;\n    Graph.registerView = CellView.registry.register;\n    Graph.registerAttr = Registry.Attr.registry.register;\n    Graph.registerGrid = Registry.Grid.registry.register;\n    Graph.registerFilter = Registry.Filter.registry.register;\n    Graph.registerNodeTool = Registry.NodeTool.registry.register;\n    Graph.registerEdgeTool = Registry.EdgeTool.registry.register;\n    Graph.registerBackground = Registry.Background.registry.register;\n    Graph.registerHighlighter = Registry.Highlighter.registry.register;\n    Graph.registerPortLayout = Registry.PortLayout.registry.register;\n    Graph.registerPortLabelLayout = Registry.PortLabelLayout.registry.register;\n    Graph.registerMarker = Registry.Marker.registry.register;\n    Graph.registerRouter = Registry.Router.registry.register;\n    Graph.registerConnector = Registry.Connector.registry.register;\n    Graph.registerAnchor = Registry.NodeAnchor.registry.register;\n    Graph.registerEdgeAnchor = Registry.EdgeAnchor.registry.register;\n    Graph.registerConnectionPoint = Registry.ConnectionPoint.registry.register;\n})(Graph || (Graph = {}));\n(function (Graph) {\n    Graph.unregisterNode = Node.registry.unregister;\n    Graph.unregisterEdge = Edge.registry.unregister;\n    Graph.unregisterView = CellView.registry.unregister;\n    Graph.unregisterAttr = Registry.Attr.registry.unregister;\n    Graph.unregisterGrid = Registry.Grid.registry.unregister;\n    Graph.unregisterFilter = Registry.Filter.registry.unregister;\n    Graph.unregisterNodeTool = Registry.NodeTool.registry.unregister;\n    Graph.unregisterEdgeTool = Registry.EdgeTool.registry.unregister;\n    Graph.unregisterBackground = Registry.Background.registry.unregister;\n    Graph.unregisterHighlighter = Registry.Highlighter.registry.unregister;\n    Graph.unregisterPortLayout = Registry.PortLayout.registry.unregister;\n    Graph.unregisterPortLabelLayout = Registry.PortLabelLayout.registry.unregister;\n    Graph.unregisterMarker = Registry.Marker.registry.unregister;\n    Graph.unregisterRouter = Registry.Router.registry.unregister;\n    Graph.unregisterConnector = Registry.Connector.registry.unregister;\n    Graph.unregisterAnchor = Registry.NodeAnchor.registry.unregister;\n    Graph.unregisterEdgeAnchor = Registry.EdgeAnchor.registry.unregister;\n    Graph.unregisterConnectionPoint = Registry.ConnectionPoint.registry.unregister;\n})(Graph || (Graph = {}));\n//# sourceMappingURL=graph.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Dom } from '@antv/x6-common';\nimport { Markup } from '../view';\nimport { Node } from '../model/node';\nimport { NodeView } from '../view/node';\nimport { Graph } from '../graph/graph';\nexport class HTML extends Node {\n}\n(function (HTML) {\n    class View extends NodeView {\n        init() {\n            super.init();\n            this.cell.on('change:*', ({ key }) => {\n                const content = HTML.shapeMaps[this.cell.shape];\n                if (content) {\n                    const { effect } = content;\n                    if (!effect || effect.includes(key)) {\n                        this.renderHTMLComponent();\n                    }\n                }\n            });\n        }\n        confirmUpdate(flag) {\n            const ret = super.confirmUpdate(flag);\n            return this.handleAction(ret, View.action, () => this.renderHTMLComponent());\n        }\n        renderHTMLComponent() {\n            const container = this.selectors && this.selectors.foContent;\n            if (container) {\n                Dom.empty(container);\n                const content = HTML.shapeMaps[this.cell.shape];\n                if (!content) {\n                    return;\n                }\n                let { html } = content;\n                if (typeof html === 'function') {\n                    html = html(this.cell);\n                }\n                if (html) {\n                    if (typeof html === 'string') {\n                        container.innerHTML = html;\n                    }\n                    else {\n                        Dom.append(container, html);\n                    }\n                }\n            }\n        }\n    }\n    HTML.View = View;\n    (function (View) {\n        View.action = 'html';\n        View.config({\n            bootstrap: [View.action],\n            actions: {\n                html: View.action,\n            },\n        });\n        NodeView.registry.register('html-view', View, true);\n    })(View = HTML.View || (HTML.View = {}));\n})(HTML || (HTML = {}));\n(function (HTML) {\n    HTML.config({\n        view: 'html-view',\n        markup: [\n            {\n                tagName: 'rect',\n                selector: 'body',\n            },\n            Object.assign({}, Markup.getForeignObjectMarkup()),\n            {\n                tagName: 'text',\n                selector: 'label',\n            },\n        ],\n        attrs: {\n            body: {\n                fill: 'none',\n                stroke: 'none',\n                refWidth: '100%',\n                refHeight: '100%',\n            },\n            fo: {\n                refWidth: '100%',\n                refHeight: '100%',\n            },\n        },\n    });\n    Node.registry.register('html', HTML, true);\n})(HTML || (HTML = {}));\n(function (HTML) {\n    HTML.shapeMaps = {};\n    function register(config) {\n        const { shape, html, effect, inherit } = config, others = __rest(config, [\"shape\", \"html\", \"effect\", \"inherit\"]);\n        if (!shape) {\n            throw new Error('should specify shape in config');\n        }\n        HTML.shapeMaps[shape] = {\n            html,\n            effect,\n        };\n        Graph.registerNode(shape, Object.assign({ inherit: inherit || 'html' }, others), true);\n    }\n    HTML.register = register;\n})(HTML || (HTML = {}));\n//# sourceMappingURL=html.js.map","/* eslint-disable */\n/**\n * Auto generated file, do not modify it!\n */\nexport const content = `.x6-widget-dnd {\n  position: absolute;\n  top: -10000px;\n  left: -10000px;\n  z-index: 999999;\n  display: none;\n  cursor: move;\n  opacity: 0.7;\n  pointer-events: 'cursor';\n}\n.x6-widget-dnd.dragging {\n  display: inline-block;\n}\n.x6-widget-dnd.dragging * {\n  pointer-events: none !important;\n}\n.x6-widget-dnd .x6-graph {\n  background: transparent;\n  box-shadow: none;\n}\n`;\n//# sourceMappingURL=raw.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { GeometryUtil, Rectangle, FunctionExt, Dom, CssLoader, View, Graph, } from '@antv/x6';\nimport { content } from './style/raw';\nexport class Dnd extends View {\n    get targetScroller() {\n        const target = this.options.target;\n        const scroller = target.getPlugin('scroller');\n        return scroller;\n    }\n    get targetGraph() {\n        return this.options.target;\n    }\n    get targetModel() {\n        return this.targetGraph.model;\n    }\n    get snapline() {\n        const target = this.options.target;\n        const snapline = target.getPlugin('snapline');\n        return snapline;\n    }\n    constructor(options) {\n        super();\n        this.name = 'dnd';\n        this.options = Object.assign(Object.assign({}, Dnd.defaults), options);\n        this.init();\n    }\n    init() {\n        CssLoader.ensure(this.name, content);\n        this.container = document.createElement('div');\n        Dom.addClass(this.container, this.prefixClassName('widget-dnd'));\n        this.draggingGraph = new Graph(Object.assign(Object.assign({}, this.options.delegateGraphOptions), { container: document.createElement('div'), width: 1, height: 1, async: false }));\n        Dom.append(this.container, this.draggingGraph.container);\n    }\n    start(node, evt) {\n        const e = evt;\n        e.preventDefault();\n        this.targetModel.startBatch('dnd');\n        Dom.addClass(this.container, 'dragging');\n        Dom.appendTo(this.container, this.options.draggingContainer || document.body);\n        this.sourceNode = node;\n        this.prepareDragging(node, e.clientX, e.clientY);\n        const local = this.updateNodePosition(e.clientX, e.clientY);\n        if (this.isSnaplineEnabled()) {\n            this.snapline.captureCursorOffset({\n                e,\n                node,\n                cell: node,\n                view: this.draggingView,\n                x: local.x,\n                y: local.y,\n            });\n            this.draggingNode.on('change:position', this.snap, this);\n        }\n        this.delegateDocumentEvents(Dnd.documentEvents, e.data);\n    }\n    isSnaplineEnabled() {\n        return this.snapline && this.snapline.isEnabled();\n    }\n    prepareDragging(sourceNode, clientX, clientY) {\n        const draggingGraph = this.draggingGraph;\n        const draggingModel = draggingGraph.model;\n        const draggingNode = this.options.getDragNode(sourceNode, {\n            sourceNode,\n            draggingGraph,\n            targetGraph: this.targetGraph,\n        });\n        draggingNode.position(0, 0);\n        let padding = 5;\n        if (this.isSnaplineEnabled()) {\n            padding += this.snapline.options.tolerance || 0;\n        }\n        if (this.isSnaplineEnabled() || this.options.scaled) {\n            const scale = this.targetGraph.transform.getScale();\n            draggingGraph.scale(scale.sx, scale.sy);\n            padding *= Math.max(scale.sx, scale.sy);\n        }\n        else {\n            draggingGraph.scale(1, 1);\n        }\n        this.clearDragging();\n        // if (this.options.animation) {\n        //   this.$container.stop(true, true)\n        // }\n        draggingModel.resetCells([draggingNode]);\n        const delegateView = draggingGraph.findViewByCell(draggingNode);\n        delegateView.undelegateEvents();\n        delegateView.cell.off('changed');\n        draggingGraph.fitToContent({\n            padding,\n            allowNewOrigin: 'any',\n            useCellGeometry: false,\n        });\n        const bbox = delegateView.getBBox();\n        this.geometryBBox = delegateView.getBBox({ useCellGeometry: true });\n        this.delta = this.geometryBBox.getTopLeft().diff(bbox.getTopLeft());\n        this.draggingNode = draggingNode;\n        this.draggingView = delegateView;\n        this.draggingBBox = draggingNode.getBBox();\n        this.padding = padding;\n        this.originOffset = this.updateGraphPosition(clientX, clientY);\n    }\n    updateGraphPosition(clientX, clientY) {\n        const scrollTop = document.body.scrollTop || document.documentElement.scrollTop;\n        const delta = this.delta;\n        const nodeBBox = this.geometryBBox;\n        const padding = this.padding || 5;\n        const offset = {\n            left: clientX - delta.x - nodeBBox.width / 2 - padding,\n            top: clientY - delta.y - nodeBBox.height / 2 - padding + scrollTop,\n        };\n        if (this.draggingGraph) {\n            Dom.css(this.container, {\n                left: `${offset.left}px`,\n                top: `${offset.top}px`,\n            });\n        }\n        return offset;\n    }\n    updateNodePosition(x, y) {\n        const local = this.targetGraph.clientToLocal(x, y);\n        const bbox = this.draggingBBox;\n        local.x -= bbox.width / 2;\n        local.y -= bbox.height / 2;\n        this.draggingNode.position(local.x, local.y);\n        return local;\n    }\n    snap({ cell, current, options, }) {\n        const node = cell;\n        if (options.snapped) {\n            const bbox = this.draggingBBox;\n            node.position(bbox.x + options.tx, bbox.y + options.ty, { silent: true });\n            this.draggingView.translate();\n            node.position(current.x, current.y, { silent: true });\n            this.snapOffset = {\n                x: options.tx,\n                y: options.ty,\n            };\n        }\n        else {\n            this.snapOffset = null;\n        }\n    }\n    onDragging(evt) {\n        const draggingView = this.draggingView;\n        if (draggingView) {\n            evt.preventDefault();\n            const e = this.normalizeEvent(evt);\n            const clientX = e.clientX;\n            const clientY = e.clientY;\n            this.updateGraphPosition(clientX, clientY);\n            const local = this.updateNodePosition(clientX, clientY);\n            const embeddingMode = this.targetGraph.options.embedding.enabled;\n            const isValidArea = (embeddingMode || this.isSnaplineEnabled()) &&\n                this.isInsideValidArea({\n                    x: clientX,\n                    y: clientY,\n                });\n            if (embeddingMode) {\n                draggingView.setEventData(e, {\n                    graph: this.targetGraph,\n                    candidateEmbedView: this.candidateEmbedView,\n                });\n                const data = draggingView.getEventData(e);\n                if (isValidArea) {\n                    draggingView.processEmbedding(e, data);\n                }\n                else {\n                    draggingView.clearEmbedding(data);\n                }\n                this.candidateEmbedView = data.candidateEmbedView;\n            }\n            // update snapline\n            if (this.isSnaplineEnabled()) {\n                if (isValidArea) {\n                    this.snapline.snapOnMoving({\n                        e,\n                        view: draggingView,\n                        x: local.x,\n                        y: local.y,\n                    });\n                }\n                else {\n                    this.snapline.hide();\n                }\n            }\n        }\n    }\n    onDragEnd(evt) {\n        const draggingNode = this.draggingNode;\n        if (draggingNode) {\n            const e = this.normalizeEvent(evt);\n            const draggingView = this.draggingView;\n            const draggingBBox = this.draggingBBox;\n            const snapOffset = this.snapOffset;\n            let x = draggingBBox.x;\n            let y = draggingBBox.y;\n            if (snapOffset) {\n                x += snapOffset.x;\n                y += snapOffset.y;\n            }\n            draggingNode.position(x, y, { silent: true });\n            const ret = this.drop(draggingNode, { x: e.clientX, y: e.clientY });\n            const callback = (node) => {\n                if (node) {\n                    this.onDropped(draggingNode);\n                    if (this.targetGraph.options.embedding.enabled && draggingView) {\n                        draggingView.setEventData(e, {\n                            cell: node,\n                            graph: this.targetGraph,\n                            candidateEmbedView: this.candidateEmbedView,\n                        });\n                        draggingView.finalizeEmbedding(e, draggingView.getEventData(e));\n                    }\n                }\n                else {\n                    this.onDropInvalid();\n                }\n                this.candidateEmbedView = null;\n                this.targetModel.stopBatch('dnd');\n            };\n            if (FunctionExt.isAsync(ret)) {\n                // stop dragging\n                this.undelegateDocumentEvents();\n                ret.then(callback); // eslint-disable-line\n            }\n            else {\n                callback(ret);\n            }\n        }\n    }\n    clearDragging() {\n        if (this.draggingNode) {\n            this.sourceNode = null;\n            this.draggingNode.remove();\n            this.draggingNode = null;\n            this.draggingView = null;\n            this.delta = null;\n            this.padding = null;\n            this.snapOffset = null;\n            this.originOffset = null;\n            this.undelegateDocumentEvents();\n        }\n    }\n    onDropped(draggingNode) {\n        if (this.draggingNode === draggingNode) {\n            this.clearDragging();\n            Dom.removeClass(this.container, 'dragging');\n            Dom.remove(this.container);\n        }\n    }\n    onDropInvalid() {\n        const draggingNode = this.draggingNode;\n        if (draggingNode) {\n            this.onDropped(draggingNode);\n            // todo\n            // const anim = this.options.animation\n            // if (anim) {\n            //   const duration = (typeof anim === 'object' && anim.duration) || 150\n            //   const easing = (typeof anim === 'object' && anim.easing) || 'swing'\n            //   this.draggingView = null\n            //   this.$container.animate(this.originOffset!, duration, easing, () =>\n            //     this.onDropped(draggingNode),\n            //   )\n            // } else {\n            //   this.onDropped(draggingNode)\n            // }\n        }\n    }\n    isInsideValidArea(p) {\n        let targetRect;\n        let dndRect = null;\n        const targetGraph = this.targetGraph;\n        const targetScroller = this.targetScroller;\n        if (this.options.dndContainer) {\n            dndRect = this.getDropArea(this.options.dndContainer);\n        }\n        const isInsideDndRect = dndRect && dndRect.containsPoint(p);\n        if (targetScroller) {\n            if (targetScroller.options.autoResize) {\n                targetRect = this.getDropArea(targetScroller.container);\n            }\n            else {\n                const outter = this.getDropArea(targetScroller.container);\n                targetRect = this.getDropArea(targetGraph.container).intersectsWithRect(outter);\n            }\n        }\n        else {\n            targetRect = this.getDropArea(targetGraph.container);\n        }\n        return !isInsideDndRect && targetRect && targetRect.containsPoint(p);\n    }\n    getDropArea(elem) {\n        const offset = Dom.offset(elem);\n        const scrollTop = document.body.scrollTop || document.documentElement.scrollTop;\n        const scrollLeft = document.body.scrollLeft || document.documentElement.scrollLeft;\n        return Rectangle.create({\n            x: offset.left +\n                parseInt(Dom.css(elem, 'border-left-width'), 10) -\n                scrollLeft,\n            y: offset.top +\n                parseInt(Dom.css(elem, 'border-top-width'), 10) -\n                scrollTop,\n            width: elem.clientWidth,\n            height: elem.clientHeight,\n        });\n    }\n    drop(draggingNode, pos) {\n        if (this.isInsideValidArea(pos)) {\n            const targetGraph = this.targetGraph;\n            const targetModel = targetGraph.model;\n            const local = targetGraph.clientToLocal(pos);\n            const sourceNode = this.sourceNode;\n            const droppingNode = this.options.getDropNode(draggingNode, {\n                sourceNode,\n                draggingNode,\n                targetGraph: this.targetGraph,\n                draggingGraph: this.draggingGraph,\n            });\n            const bbox = droppingNode.getBBox();\n            local.x += bbox.x - bbox.width / 2;\n            local.y += bbox.y - bbox.height / 2;\n            const gridSize = this.snapOffset ? 1 : targetGraph.getGridSize();\n            droppingNode.position(GeometryUtil.snapToGrid(local.x, gridSize), GeometryUtil.snapToGrid(local.y, gridSize));\n            droppingNode.removeZIndex();\n            const validateNode = this.options.validateNode;\n            const ret = validateNode\n                ? validateNode(droppingNode, {\n                    sourceNode,\n                    draggingNode,\n                    droppingNode,\n                    targetGraph,\n                    draggingGraph: this.draggingGraph,\n                })\n                : true;\n            if (typeof ret === 'boolean') {\n                if (ret) {\n                    targetModel.addCell(droppingNode, { stencil: this.cid });\n                    return droppingNode;\n                }\n                return null;\n            }\n            return FunctionExt.toDeferredBoolean(ret).then((valid) => {\n                if (valid) {\n                    targetModel.addCell(droppingNode, { stencil: this.cid });\n                    return droppingNode;\n                }\n                return null;\n            });\n        }\n        return null;\n    }\n    onRemove() {\n        if (this.draggingGraph) {\n            this.draggingGraph.view.remove();\n            this.draggingGraph.dispose();\n        }\n    }\n    dispose() {\n        this.remove();\n        CssLoader.clean(this.name);\n    }\n}\n__decorate([\n    View.dispose()\n], Dnd.prototype, \"dispose\", null);\n(function (Dnd) {\n    Dnd.defaults = {\n        // animation: false,\n        getDragNode: (sourceNode) => sourceNode.clone(),\n        getDropNode: (draggingNode) => draggingNode.clone(),\n    };\n    Dnd.documentEvents = {\n        mousemove: 'onDragging',\n        touchmove: 'onDragging',\n        mouseup: 'onDragEnd',\n        touchend: 'onDragEnd',\n        touchcancel: 'onDragEnd',\n    };\n})(Dnd || (Dnd = {}));\n//# sourceMappingURL=index.js.map","import { Model } from '@antv/x6';\nexport function grid(cells, options = {}) {\n    const model = Model.isModel(cells)\n        ? cells\n        : new Model().resetCells(cells, {\n            sort: false,\n            dryrun: true,\n        });\n    const nodes = model.getNodes();\n    const columns = options.columns || 1;\n    const rows = Math.ceil(nodes.length / columns);\n    const dx = options.dx || 0;\n    const dy = options.dy || 0;\n    const centre = options.center !== false;\n    const resizeToFit = options.resizeToFit === true;\n    const marginX = options.marginX || 0;\n    const marginY = options.marginY || 0;\n    const columnWidths = [];\n    let columnWidth = options.columnWidth;\n    if (columnWidth === 'compact') {\n        for (let j = 0; j < columns; j += 1) {\n            const items = GridLayout.getNodesInColumn(nodes, j, columns);\n            columnWidths.push(GridLayout.getMaxDim(items, 'width') + dx);\n        }\n    }\n    else {\n        if (columnWidth == null || columnWidth === 'auto') {\n            columnWidth = GridLayout.getMaxDim(nodes, 'width') + dx;\n        }\n        for (let i = 0; i < columns; i += 1) {\n            columnWidths.push(columnWidth);\n        }\n    }\n    const columnLefts = GridLayout.accumulate(columnWidths, marginX);\n    const rowHeights = [];\n    let rowHeight = options.rowHeight;\n    if (rowHeight === 'compact') {\n        for (let i = 0; i < rows; i += 1) {\n            const items = GridLayout.getNodesInRow(nodes, i, columns);\n            rowHeights.push(GridLayout.getMaxDim(items, 'height') + dy);\n        }\n    }\n    else {\n        if (rowHeight == null || rowHeight === 'auto') {\n            rowHeight = GridLayout.getMaxDim(nodes, 'height') + dy;\n        }\n        for (let i = 0; i < rows; i += 1) {\n            rowHeights.push(rowHeight);\n        }\n    }\n    const rowTops = GridLayout.accumulate(rowHeights, marginY);\n    model.startBatch('layout');\n    nodes.forEach((node, index) => {\n        const rowIndex = index % columns;\n        const columnIndex = Math.floor(index / columns);\n        const columnWidth = columnWidths[rowIndex];\n        const rowHeight = rowHeights[columnIndex];\n        let cx = 0;\n        let cy = 0;\n        let size = node.getSize();\n        if (resizeToFit) {\n            let width = columnWidth - 2 * dx;\n            let height = rowHeight - 2 * dy;\n            const calcHeight = size.height * (size.width ? width / size.width : 1);\n            const calcWidth = size.width * (size.height ? height / size.height : 1);\n            if (rowHeight < calcHeight) {\n                width = calcWidth;\n            }\n            else {\n                height = calcHeight;\n            }\n            size = {\n                width,\n                height,\n            };\n            node.setSize(size, options);\n        }\n        if (centre) {\n            cx = (columnWidth - size.width) / 2;\n            cy = (rowHeight - size.height) / 2;\n        }\n        node.position(columnLefts[rowIndex] + dx + cx, rowTops[columnIndex] + dy + cy, options);\n    });\n    model.stopBatch('layout');\n}\nvar GridLayout;\n(function (GridLayout) {\n    function getMaxDim(nodes, name) {\n        return nodes.reduce((memo, node) => Math.max(node === null || node === void 0 ? void 0 : node.getSize()[name], memo), 0);\n    }\n    GridLayout.getMaxDim = getMaxDim;\n    function getNodesInRow(nodes, rowIndex, columnCount) {\n        const res = [];\n        for (let i = columnCount * rowIndex, ii = i + columnCount; i < ii; i += 1) {\n            if (nodes[i])\n                res.push(nodes[i]);\n        }\n        return res;\n    }\n    GridLayout.getNodesInRow = getNodesInRow;\n    function getNodesInColumn(nodes, columnIndex, columnCount) {\n        const res = [];\n        for (let i = columnIndex, ii = nodes.length; i < ii; i += columnCount) {\n            if (nodes[i])\n                res.push(nodes[i]);\n        }\n        return res;\n    }\n    GridLayout.getNodesInColumn = getNodesInColumn;\n    function accumulate(items, start) {\n        return items.reduce((memo, item, i) => {\n            memo.push(memo[i] + item);\n            return memo;\n        }, [start || 0]);\n    }\n    GridLayout.accumulate = accumulate;\n})(GridLayout || (GridLayout = {}));\n//# sourceMappingURL=grid.js.map","/* eslint-disable */\n/**\n * Auto generated file, do not modify it!\n */\nexport const content = `.x6-widget-dnd {\n  position: absolute;\n  top: -10000px;\n  left: -10000px;\n  z-index: 999999;\n  display: none;\n  cursor: move;\n  opacity: 0.7;\n  pointer-events: 'cursor';\n}\n.x6-widget-dnd.dragging {\n  display: inline-block;\n}\n.x6-widget-dnd.dragging * {\n  pointer-events: none !important;\n}\n.x6-widget-dnd .x6-graph {\n  background: transparent;\n  box-shadow: none;\n}\n.x6-widget-stencil {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n}\n.x6-widget-stencil::after {\n  position: absolute;\n  top: 0;\n  display: block;\n  width: 100%;\n  height: 20px;\n  padding: 8px 0;\n  line-height: 20px;\n  text-align: center;\n  opacity: 0;\n  transition: top 0.1s linear, opacity 0.1s linear;\n  content: ' ';\n  pointer-events: none;\n}\n.x6-widget-stencil-content {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  height: auto;\n  overflow-x: hidden;\n  overflow-y: auto;\n}\n.x6-widget-stencil .x6-node [magnet]:not([magnet='passive']) {\n  pointer-events: none;\n}\n.x6-widget-stencil-group {\n  padding: 0;\n  padding-bottom: 8px;\n  overflow: hidden;\n  user-select: none;\n}\n.x6-widget-stencil-group.collapsed {\n  height: auto;\n  padding-bottom: 0;\n}\n.x6-widget-stencil-group-title {\n  position: relative;\n  margin-top: 0;\n  margin-bottom: 0;\n  padding: 4px;\n  cursor: pointer;\n}\n.x6-widget-stencil-title,\n.x6-widget-stencil-group > .x6-widget-stencil-group-title {\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  user-select: none;\n}\n.x6-widget-stencil .unmatched {\n  opacity: 0.3;\n}\n.x6-widget-stencil .x6-node.unmatched {\n  display: none;\n}\n.x6-widget-stencil-group.unmatched {\n  display: none;\n}\n.x6-widget-stencil-search-text {\n  position: relative;\n  z-index: 1;\n  box-sizing: border-box;\n  width: 100%;\n  height: 30px;\n  max-height: 30px;\n  line-height: 30px;\n  outline: 0;\n}\n.x6-widget-stencil.not-found::after {\n  opacity: 1;\n  content: attr(data-not-found-text);\n}\n.x6-widget-stencil.not-found.searchable::after {\n  top: 30px;\n}\n.x6-widget-stencil.not-found.searchable.collapsable::after {\n  top: 50px;\n}\n.x6-widget-stencil {\n  color: #333;\n  background: #f5f5f5;\n}\n.x6-widget-stencil-content {\n  position: absolute;\n}\n.x6-widget-stencil.collapsable > .x6-widget-stencil-content {\n  top: 32px;\n}\n.x6-widget-stencil.searchable > .x6-widget-stencil-content {\n  top: 80px;\n}\n.x6-widget-stencil.not-found::after {\n  position: absolute;\n}\n.x6-widget-stencil.not-found.searchable.collapsable::after {\n  top: 80px;\n}\n.x6-widget-stencil.not-found.searchable::after {\n  top: 60px;\n}\n.x6-widget-stencil-group {\n  height: auto;\n  margin-bottom: 1px;\n  padding: 0;\n  transition: none;\n}\n.x6-widget-stencil-group .x6-graph {\n  background: transparent;\n  box-shadow: none;\n}\n.x6-widget-stencil-group.collapsed {\n  height: auto;\n  max-height: 31px;\n}\n.x6-widget-stencil-title,\n.x6-widget-stencil-group > .x6-widget-stencil-group-title {\n  position: relative;\n  left: 0;\n  box-sizing: border-box;\n  width: 100%;\n  height: 32px;\n  padding: 0 5px 0 8px;\n  color: #666;\n  font-weight: 700;\n  font-size: 12px;\n  line-height: 32px;\n  cursor: default;\n  transition: all 0.3;\n}\n.x6-widget-stencil-title:hover,\n.x6-widget-stencil-group > .x6-widget-stencil-group-title:hover {\n  color: #444;\n}\n.x6-widget-stencil-title {\n  background: #e9e9e9;\n}\n.x6-widget-stencil-group > .x6-widget-stencil-group-title {\n  background: #ededed;\n}\n.x6-widget-stencil.collapsable > .x6-widget-stencil-title,\n.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title {\n  padding-left: 32px;\n  cursor: pointer;\n}\n.x6-widget-stencil.collapsable > .x6-widget-stencil-title::before,\n.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title::before {\n  position: absolute;\n  top: 6px;\n  left: 8px;\n  display: block;\n  width: 18px;\n  height: 18px;\n  margin: 0;\n  padding: 0;\n  background-color: transparent;\n  background-repeat: no-repeat;\n  background-position: 0 0;\n  border: none;\n  content: ' ';\n}\n.x6-widget-stencil.collapsable > .x6-widget-stencil-title::before,\n.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title::before {\n  background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJub256ZXJvIj48cGF0aCBkPSJNOS4zNzUuNUM0LjY4Ny41Ljg3NSA0LjMxMy44NzUgOWMwIDQuNjg4IDMuODEyIDguNSA4LjUgOC41IDQuNjg3IDAgOC41LTMuODEyIDguNS04LjUgMC00LjY4Ny0zLjgxMy04LjUtOC41LTguNXptMCAxNS44ODZDNS4zMDMgMTYuMzg2IDEuOTkgMTMuMDcyIDEuOTkgOXMzLjMxMi03LjM4NSA3LjM4NS03LjM4NVMxNi43NiA0LjkyOCAxNi43NiA5YzAgNC4wNzItMy4zMTMgNy4zODYtNy4zODUgNy4zODZ6Ii8+PHBhdGggZD0iTTEyLjc1MyA4LjQ0M0g1Ljk5N2EuNTU4LjU1OCAwIDAwMCAxLjExNmg2Ljc1NmEuNTU4LjU1OCAwIDAwMC0xLjExNnoiLz48L2c+PC9zdmc+');\n  opacity: 0.4;\n  transition: all 0.3s;\n}\n.x6-widget-stencil.collapsable > .x6-widget-stencil-title:hover::before,\n.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title:hover::before {\n  opacity: 0.6;\n}\n.x6-widget-stencil.collapsable.collapsed > .x6-widget-stencil-title::before,\n.x6-widget-stencil-group.collapsable.collapsed > .x6-widget-stencil-group-title::before {\n  background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJub256ZXJvIj48cGF0aCBkPSJNOS4zNzUuNUM0LjY4Ny41Ljg3NSA0LjMxMy44NzUgOWMwIDQuNjg4IDMuODEyIDguNSA4LjUgOC41IDQuNjg3IDAgOC41LTMuODEyIDguNS04LjUgMC00LjY4Ny0zLjgxMy04LjUtOC41LTguNXptMCAxNS44ODZDNS4zMDMgMTYuMzg2IDEuOTkgMTMuMDcyIDEuOTkgOXMzLjMxMi03LjM4NSA3LjM4NS03LjM4NVMxNi43NiA0LjkyOCAxNi43NiA5YzAgNC4wNzItMy4zMTMgNy4zODYtNy4zODUgNy4zODZ6Ii8+PHBhdGggZD0iTTEyLjc1MyA4LjQ0M0g1Ljk5N2EuNTU4LjU1OCAwIDAwMCAxLjExNmg2Ljc1NmEuNTU4LjU1OCAwIDAwMC0xLjExNnoiLz48cGF0aCBkPSJNOC44MTcgNS42MjN2Ni43NTZhLjU1OC41NTggMCAwMDEuMTE2IDBWNS42MjNhLjU1OC41NTggMCAxMC0xLjExNiAweiIvPjwvZz48L3N2Zz4=');\n  opacity: 0.4;\n}\n.x6-widget-stencil.collapsable.collapsed > .x6-widget-stencil-title:hover::before,\n.x6-widget-stencil-group.collapsable.collapsed > .x6-widget-stencil-group-title:hover::before {\n  opacity: 0.6;\n}\n.x6-widget-stencil input[type='search'] {\n  appearance: textfield;\n}\n.x6-widget-stencil input[type='search']::-webkit-search-cancel-button,\n.x6-widget-stencil input[type='search']::-webkit-search-decoration {\n  appearance: none;\n}\n.x6-widget-stencil-search-text {\n  display: block;\n  width: 90%;\n  margin: 8px 5%;\n  padding-left: 8px;\n  color: #333;\n  background: #fff;\n  border: 1px solid #e9e9e9;\n  border-radius: 12px;\n  outline: 0;\n}\n.x6-widget-stencil-search-text:focus {\n  outline: 0;\n}\n.x6-widget-stencil::after {\n  color: #808080;\n  font-weight: 600;\n  font-size: 12px;\n  background: 0 0;\n}\n`;\n//# sourceMappingURL=raw.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Dom, FunctionExt, CssLoader, Node, Model, View, Graph, } from '@antv/x6';\nimport { Dnd } from '@antv/x6-plugin-dnd';\nimport { grid } from './grid';\nimport { content } from './style/raw';\nexport class Stencil extends View {\n    get targetScroller() {\n        const target = this.options.target;\n        const scroller = target.getPlugin('scroller');\n        return scroller;\n    }\n    get targetGraph() {\n        return this.options.target;\n    }\n    get targetModel() {\n        return this.targetGraph.model;\n    }\n    constructor(options = {}) {\n        super();\n        this.name = 'stencil';\n        CssLoader.ensure(this.name, content);\n        this.graphs = {};\n        this.groups = {};\n        this.options = Object.assign(Object.assign({}, Stencil.defaultOptions), options);\n        this.init();\n    }\n    init() {\n        this.dnd = new Dnd(this.options);\n        this.onSearch = FunctionExt.debounce(this.onSearch, 200);\n        this.initContainer();\n        this.initSearch();\n        this.initContent();\n        this.initGroups();\n        this.setTitle();\n        this.startListening();\n    }\n    load(data, groupName) {\n        if (Array.isArray(data)) {\n            this.loadGroup(data, groupName);\n        }\n        else if (this.options.groups) {\n            Object.keys(this.options.groups).forEach((groupName) => {\n                if (data[groupName]) {\n                    this.loadGroup(data[groupName], groupName);\n                }\n            });\n        }\n        return this;\n    }\n    unload(data, groupName) {\n        if (Array.isArray(data)) {\n            this.loadGroup(data, groupName, true);\n        }\n        else if (this.options.groups) {\n            Object.keys(this.options.groups).forEach((groupName) => {\n                if (data[groupName]) {\n                    this.loadGroup(data[groupName], groupName, true);\n                }\n            });\n        }\n        return this;\n    }\n    toggleGroup(groupName) {\n        if (this.isGroupCollapsed(groupName)) {\n            this.expandGroup(groupName);\n        }\n        else {\n            this.collapseGroup(groupName);\n        }\n        return this;\n    }\n    collapseGroup(groupName) {\n        if (this.isGroupCollapsable(groupName)) {\n            const group = this.groups[groupName];\n            if (group && !this.isGroupCollapsed(groupName)) {\n                this.trigger('group:collapse', { name: groupName });\n                Dom.addClass(group, 'collapsed');\n            }\n        }\n        return this;\n    }\n    expandGroup(groupName) {\n        if (this.isGroupCollapsable(groupName)) {\n            const group = this.groups[groupName];\n            if (group && this.isGroupCollapsed(groupName)) {\n                this.trigger('group:expand', { name: groupName });\n                Dom.removeClass(group, 'collapsed');\n            }\n        }\n        return this;\n    }\n    isGroupCollapsable(groupName) {\n        const group = this.groups[groupName];\n        return Dom.hasClass(group, 'collapsable');\n    }\n    isGroupCollapsed(groupName) {\n        const group = this.groups[groupName];\n        return group && Dom.hasClass(group, 'collapsed');\n    }\n    collapseGroups() {\n        Object.keys(this.groups).forEach((groupName) => this.collapseGroup(groupName));\n        return this;\n    }\n    expandGroups() {\n        Object.keys(this.groups).forEach((groupName) => this.expandGroup(groupName));\n        return this;\n    }\n    resizeGroup(groupName, size) {\n        const graph = this.graphs[groupName];\n        if (graph) {\n            graph.resize(size.width, size.height);\n        }\n        return this;\n    }\n    addGroup(group) {\n        const groups = Array.isArray(group) ? group : [group];\n        if (this.options.groups) {\n            this.options.groups.push(...groups);\n        }\n        else {\n            this.options.groups = groups;\n        }\n        groups.forEach((group) => this.initGroup(group));\n    }\n    removeGroup(groupName) {\n        const groupNames = Array.isArray(groupName) ? groupName : [groupName];\n        if (this.options.groups) {\n            this.options.groups = this.options.groups.filter((group) => !groupNames.includes(group.name));\n            groupNames.forEach((groupName) => {\n                const graph = this.graphs[groupName];\n                graph.dispose();\n                delete this.graphs[groupName];\n                const elem = this.groups[groupName];\n                Dom.remove(elem);\n                delete this.groups[groupName];\n            });\n        }\n    }\n    // #endregion\n    initContainer() {\n        this.container = document.createElement('div');\n        Dom.addClass(this.container, this.prefixClassName(ClassNames.base));\n        Dom.attr(this.container, 'data-not-found-text', this.options.notFoundText || 'No matches found');\n    }\n    initContent() {\n        this.content = document.createElement('div');\n        Dom.addClass(this.content, this.prefixClassName(ClassNames.content));\n        Dom.appendTo(this.content, this.container);\n    }\n    initSearch() {\n        if (this.options.search) {\n            Dom.addClass(this.container, 'searchable');\n            Dom.append(this.container, this.renderSearch());\n        }\n    }\n    initGroup(group) {\n        const globalGraphOptions = this.options.stencilGraphOptions || {};\n        const groupElem = document.createElement('div');\n        Dom.addClass(groupElem, this.prefixClassName(ClassNames.group));\n        Dom.attr(groupElem, 'data-name', group.name);\n        if ((group.collapsable == null && this.options.collapsable) ||\n            group.collapsable !== false) {\n            Dom.addClass(groupElem, 'collapsable');\n        }\n        Dom.toggleClass(groupElem, 'collapsed', group.collapsed === true);\n        const title = document.createElement('h3');\n        Dom.addClass(title, this.prefixClassName(ClassNames.groupTitle));\n        title.innerHTML = group.title || group.name;\n        const content = document.createElement('div');\n        Dom.addClass(content, this.prefixClassName(ClassNames.groupContent));\n        const graphOptionsInGroup = group.graphOptions;\n        const graph = new Graph(Object.assign(Object.assign(Object.assign({}, globalGraphOptions), graphOptionsInGroup), { container: document.createElement('div'), model: globalGraphOptions.model || new Model(), width: group.graphWidth || this.options.stencilGraphWidth, height: group.graphHeight || this.options.stencilGraphHeight, interacting: false, preventDefaultBlankAction: false }));\n        Dom.append(content, graph.container);\n        Dom.append(groupElem, [title, content]);\n        Dom.appendTo(groupElem, this.content);\n        this.groups[group.name] = groupElem;\n        this.graphs[group.name] = graph;\n    }\n    initGroups() {\n        this.clearGroups();\n        this.setCollapsableState();\n        if (this.options.groups && this.options.groups.length) {\n            this.options.groups.forEach((group) => {\n                this.initGroup(group);\n            });\n        }\n        else {\n            const globalGraphOptions = this.options.stencilGraphOptions || {};\n            const graph = new Graph(Object.assign(Object.assign({}, globalGraphOptions), { container: document.createElement('div'), model: globalGraphOptions.model || new Model(), width: this.options.stencilGraphWidth, height: this.options.stencilGraphHeight, interacting: false, preventDefaultBlankAction: false }));\n            Dom.append(this.content, graph.container);\n            this.graphs[Private.defaultGroupName] = graph;\n        }\n    }\n    setCollapsableState() {\n        this.options.collapsable =\n            this.options.collapsable &&\n                this.options.groups &&\n                this.options.groups.some((group) => group.collapsable !== false);\n        if (this.options.collapsable) {\n            Dom.addClass(this.container, 'collapsable');\n            const collapsed = this.options.groups &&\n                this.options.groups.every((group) => group.collapsed || group.collapsable === false);\n            if (collapsed) {\n                Dom.addClass(this.container, 'collapsed');\n            }\n            else {\n                Dom.removeClass(this.container, 'collapsed');\n            }\n        }\n        else {\n            Dom.removeClass(this.container, 'collapsable');\n        }\n    }\n    setTitle() {\n        const title = document.createElement('div');\n        Dom.addClass(title, this.prefixClassName(ClassNames.title));\n        title.innerHTML = this.options.title;\n        Dom.appendTo(title, this.container);\n    }\n    renderSearch() {\n        const elem = document.createElement('div');\n        Dom.addClass(elem, this.prefixClassName(ClassNames.search));\n        const input = document.createElement('input');\n        Dom.attr(input, {\n            type: 'search',\n            placeholder: this.options.placeholder || 'Search',\n        });\n        Dom.addClass(input, this.prefixClassName(ClassNames.searchText));\n        Dom.append(elem, input);\n        return elem;\n    }\n    startListening() {\n        const title = this.prefixClassName(ClassNames.title);\n        const searchText = this.prefixClassName(ClassNames.searchText);\n        const groupTitle = this.prefixClassName(ClassNames.groupTitle);\n        this.delegateEvents({\n            [`click .${title}`]: 'onTitleClick',\n            [`touchstart .${title}`]: 'onTitleClick',\n            [`click .${groupTitle}`]: 'onGroupTitleClick',\n            [`touchstart .${groupTitle}`]: 'onGroupTitleClick',\n            [`input .${searchText}`]: 'onSearch',\n            [`focusin .${searchText}`]: 'onSearchFocusIn',\n            [`focusout .${searchText}`]: 'onSearchFocusOut',\n        });\n        Object.keys(this.graphs).forEach((groupName) => {\n            const graph = this.graphs[groupName];\n            graph.on('cell:mousedown', this.onDragStart, this);\n        });\n    }\n    stopListening() {\n        this.undelegateEvents();\n        Object.keys(this.graphs).forEach((groupName) => {\n            const graph = this.graphs[groupName];\n            graph.off('cell:mousedown', this.onDragStart, this);\n        });\n    }\n    loadGroup(cells, groupName, reverse) {\n        const model = this.getModel(groupName);\n        if (model) {\n            const nodes = cells.map((cell) => Node.isNode(cell) ? cell : Node.create(cell));\n            if (reverse === true) {\n                model.removeCells(nodes);\n            }\n            else {\n                model.resetCells(nodes);\n            }\n        }\n        const group = this.getGroup(groupName);\n        let height = this.options.stencilGraphHeight;\n        if (group && group.graphHeight != null) {\n            height = group.graphHeight;\n        }\n        const layout = (group && group.layout) || this.options.layout;\n        if (layout && model) {\n            FunctionExt.call(layout, this, model, group);\n        }\n        if (!height) {\n            const graph = this.getGraph(groupName);\n            graph.fitToContent({\n                minWidth: graph.options.width,\n                gridHeight: 1,\n                padding: (group && group.graphPadding) ||\n                    this.options.stencilGraphPadding ||\n                    10,\n            });\n        }\n        return this;\n    }\n    onDragStart(args) {\n        const { e, node } = args;\n        const group = this.getGroupByNode(node);\n        if (group && group.nodeMovable === false) {\n            return;\n        }\n        this.dnd.start(node, e);\n    }\n    filter(keyword, filter) {\n        const found = Object.keys(this.graphs).reduce((memo, groupName) => {\n            const graph = this.graphs[groupName];\n            const name = groupName === Private.defaultGroupName ? null : groupName;\n            const items = graph.model.getNodes().filter((cell) => {\n                let matched = false;\n                if (typeof filter === 'function') {\n                    matched = FunctionExt.call(filter, this, cell, keyword, name, this);\n                }\n                else if (typeof filter === 'boolean') {\n                    matched = filter;\n                }\n                else {\n                    matched = this.isCellMatched(cell, keyword, filter, keyword.toLowerCase() !== keyword);\n                }\n                const view = graph.renderer.findViewByCell(cell);\n                if (view) {\n                    Dom.toggleClass(view.container, 'unmatched', !matched);\n                }\n                return matched;\n            });\n            const found = items.length > 0;\n            const options = this.options;\n            const model = new Model();\n            model.resetCells(items);\n            if (options.layout) {\n                FunctionExt.call(options.layout, this, model, this.getGroup(groupName));\n            }\n            if (this.groups[groupName]) {\n                Dom.toggleClass(this.groups[groupName], 'unmatched', !found);\n            }\n            graph.fitToContent({\n                gridWidth: 1,\n                gridHeight: 1,\n                padding: options.stencilGraphPadding || 10,\n            });\n            return memo || found;\n        }, false);\n        Dom.toggleClass(this.container, 'not-found', !found);\n    }\n    isCellMatched(cell, keyword, filters, ignoreCase) {\n        if (keyword && filters) {\n            return Object.keys(filters).some((shape) => {\n                if (shape === '*' || cell.shape === shape) {\n                    const filter = filters[shape];\n                    if (typeof filter === 'boolean') {\n                        return filter;\n                    }\n                    const paths = Array.isArray(filter) ? filter : [filter];\n                    return paths.some((path) => {\n                        let val = cell.getPropByPath(path);\n                        if (val != null) {\n                            val = `${val}`;\n                            if (!ignoreCase) {\n                                val = val.toLowerCase();\n                            }\n                            return val.indexOf(keyword) >= 0;\n                        }\n                        return false;\n                    });\n                }\n                return false;\n            });\n        }\n        return true;\n    }\n    onSearch(evt) {\n        this.filter(evt.target.value, this.options.search);\n    }\n    onSearchFocusIn() {\n        Dom.addClass(this.container, 'is-focused');\n    }\n    onSearchFocusOut() {\n        Dom.removeClass(this.container, 'is-focused');\n    }\n    onTitleClick() {\n        if (this.options.collapsable) {\n            Dom.toggleClass(this.container, 'collapsed');\n            if (Dom.hasClass(this.container, 'collapsed')) {\n                this.collapseGroups();\n            }\n            else {\n                this.expandGroups();\n            }\n        }\n    }\n    onGroupTitleClick(evt) {\n        const group = evt.target.closest(`.${this.prefixClassName(ClassNames.group)}`);\n        if (group) {\n            this.toggleGroup(Dom.attr(group, 'data-name') || '');\n        }\n        const allCollapsed = Object.keys(this.groups).every((name) => {\n            const group = this.getGroup(name);\n            const groupElem = this.groups[name];\n            return ((group && group.collapsable === false) ||\n                Dom.hasClass(groupElem, 'collapsed'));\n        });\n        Dom.toggleClass(this.container, 'collapsed', allCollapsed);\n    }\n    getModel(groupName) {\n        const graph = this.getGraph(groupName);\n        return graph ? graph.model : null;\n    }\n    getGraph(groupName) {\n        return this.graphs[groupName || Private.defaultGroupName];\n    }\n    getGroup(groupName) {\n        const groups = this.options.groups;\n        if (groupName != null && groups && groups.length) {\n            return groups.find((group) => group.name === groupName);\n        }\n        return null;\n    }\n    getGroupByNode(node) {\n        const groups = this.options.groups;\n        if (groups) {\n            return groups.find((group) => {\n                const model = this.getModel(group.name);\n                if (model) {\n                    return model.has(node.id);\n                }\n                return false;\n            });\n        }\n        return null;\n    }\n    clearGroups() {\n        Object.keys(this.graphs).forEach((groupName) => {\n            const graph = this.graphs[groupName];\n            graph.dispose();\n        });\n        Object.keys(this.groups).forEach((groupName) => {\n            const elem = this.groups[groupName];\n            Dom.remove(elem);\n        });\n        this.graphs = {};\n        this.groups = {};\n    }\n    onRemove() {\n        this.clearGroups();\n        this.dnd.remove();\n        this.stopListening();\n        this.undelegateDocumentEvents();\n    }\n    dispose() {\n        this.remove();\n        CssLoader.clean(this.name);\n    }\n}\n__decorate([\n    View.dispose()\n], Stencil.prototype, \"dispose\", null);\n(function (Stencil) {\n    Stencil.defaultOptions = Object.assign({ stencilGraphWidth: 200, stencilGraphHeight: 800, title: 'Stencil', collapsable: false, placeholder: 'Search', notFoundText: 'No matches found', layout(model, group) {\n            const options = {\n                columnWidth: this.options.stencilGraphWidth / 2 - 10,\n                columns: 2,\n                rowHeight: 80,\n                resizeToFit: false,\n                dx: 10,\n                dy: 10,\n            };\n            grid(model, Object.assign(Object.assign(Object.assign({}, options), this.options.layoutOptions), (group ? group.layoutOptions : {})));\n        } }, Dnd.defaults);\n})(Stencil || (Stencil = {}));\nvar ClassNames;\n(function (ClassNames) {\n    ClassNames.base = 'widget-stencil';\n    ClassNames.title = `${ClassNames.base}-title`;\n    ClassNames.search = `${ClassNames.base}-search`;\n    ClassNames.searchText = `${ClassNames.search}-text`;\n    ClassNames.content = `${ClassNames.base}-content`;\n    ClassNames.group = `${ClassNames.base}-group`;\n    ClassNames.groupTitle = `${ClassNames.group}-title`;\n    ClassNames.groupContent = `${ClassNames.group}-content`;\n})(ClassNames || (ClassNames = {}));\nvar Private;\n(function (Private) {\n    Private.defaultGroupName = '__default__';\n})(Private || (Private = {}));\n//# sourceMappingURL=index.js.map","import {Graph, Shape} from '@antv/x6'\r\n\r\n// /\r\nexport const showPorts = (ports: NodeListOf<SVGElement>, show: boolean) => {\r\n    for (let i = 0, len = ports.length; i < len; i = i + 1) {\r\n        ports[i].style.visibility = show ? 'visible' : 'hidden'\r\n    }\r\n}\r\n\r\nexport function createBlock() {\r\n// #region \r\n    const ports = {\r\n        groups: {\r\n            top: {\r\n                position: 'top',\r\n                attrs: {\r\n                    circle: {\r\n                        r: 4,\r\n                        magnet: true,\r\n                        stroke: '#5F95FF',\r\n                        strokeWidth: 1,\r\n                        fill: '#fff',\r\n                        style: {\r\n                            visibility: 'hidden',\r\n                        },\r\n                    },\r\n                },\r\n            },\r\n            right: {\r\n                position: 'right',\r\n                attrs: {\r\n                    circle: {\r\n                        r: 4,\r\n                        magnet: true,\r\n                        stroke: '#5F95FF',\r\n                        strokeWidth: 1,\r\n                        fill: '#fff',\r\n                        style: {\r\n                            visibility: 'hidden',\r\n                        },\r\n                    },\r\n                },\r\n            },\r\n            bottom: {\r\n                position: 'bottom',\r\n                attrs: {\r\n                    circle: {\r\n                        r: 4,\r\n                        magnet: true,\r\n                        stroke: '#5F95FF',\r\n                        strokeWidth: 1,\r\n                        fill: '#fff',\r\n                        style: {\r\n                            visibility: 'hidden',\r\n                        },\r\n                    },\r\n                },\r\n            },\r\n            left: {\r\n                position: 'left',\r\n                attrs: {\r\n                    circle: {\r\n                        r: 4,\r\n                        magnet: true,\r\n                        stroke: '#5F95FF',\r\n                        strokeWidth: 1,\r\n                        fill: '#fff',\r\n                        style: {\r\n                            visibility: 'hidden',\r\n                        },\r\n                    },\r\n                },\r\n            },\r\n        },\r\n        items: [\r\n            {\r\n                group: 'top',\r\n            },\r\n            {\r\n                group: 'right',\r\n            },\r\n            {\r\n                group: 'bottom',\r\n            },\r\n            {\r\n                group: 'left',\r\n            },\r\n        ],\r\n    }\r\n\r\n    Graph.registerNode(\r\n        'custom-rect',\r\n        {\r\n            inherit: 'rect',\r\n            width: 66,\r\n            height: 36,\r\n            attrs: {\r\n                body: {\r\n                    strokeWidth: 1,\r\n                    stroke: '#5F95FF',\r\n                    fill: '#EFF4FF',\r\n                },\r\n                text: {\r\n                    fontSize: 12,\r\n                    fill: '#262626',\r\n                },\r\n            },\r\n            ports: {...ports},\r\n        },\r\n        true,\r\n    )\r\n\r\n    Graph.registerNode(\r\n        'custom-polygon',\r\n        {\r\n            inherit: 'polygon',\r\n            width: 66,\r\n            height: 36,\r\n            attrs: {\r\n                body: {\r\n                    strokeWidth: 1,\r\n                    stroke: '#5F95FF',\r\n                    fill: '#EFF4FF',\r\n                },\r\n                text: {\r\n                    fontSize: 12,\r\n                    fill: '#262626',\r\n                },\r\n            },\r\n            ports: {\r\n                ...ports,\r\n                items: [\r\n                    {\r\n                        group: 'top',\r\n                    },\r\n                    {\r\n                        group: 'bottom',\r\n                    },\r\n                ],\r\n            },\r\n        },\r\n        true,\r\n    )\r\n\r\n    Graph.registerNode(\r\n        'custom-circle',\r\n        {\r\n            inherit: 'circle',\r\n            width: 45,\r\n            height: 45,\r\n            attrs: {\r\n                body: {\r\n                    strokeWidth: 1,\r\n                    stroke: '#5F95FF',\r\n                    fill: '#EFF4FF',\r\n                },\r\n                text: {\r\n                    fontSize: 12,\r\n                    fill: '#262626',\r\n                },\r\n            },\r\n            ports: {...ports},\r\n        },\r\n        true,\r\n    )\r\n\r\n    Graph.registerNode(\r\n        'custom-image',\r\n        {\r\n            inherit: 'rect',\r\n            width: 52,\r\n            height: 52,\r\n            markup: [\r\n                {\r\n                    tagName: 'rect',\r\n                    selector: 'body',\r\n                },\r\n                {\r\n                    tagName: 'image',\r\n                },\r\n                {\r\n                    tagName: 'text',\r\n                    selector: 'label',\r\n                },\r\n            ],\r\n            attrs: {\r\n                body: {\r\n                    stroke: '#5F95FF',\r\n                    fill: '#5F95FF',\r\n                },\r\n                image: {\r\n                    width: 26,\r\n                    height: 26,\r\n                    refX: 13,\r\n                    refY: 16,\r\n                },\r\n                label: {\r\n                    refX: 3,\r\n                    refY: 2,\r\n                    textAnchor: 'left',\r\n                    textVerticalAnchor: 'top',\r\n                    fontSize: 12,\r\n                    fill: '#fff',\r\n                },\r\n            },\r\n            ports: {...ports},\r\n        },\r\n        true,\r\n    )\r\n\r\n}\r\n\r\nexport function block(graph) {\r\n    return {\r\n        imageShapes: [\r\n            {\r\n                label: 'Client',\r\n                image:\r\n                    'https://gw.alipayobjects.com/zos/bmw-prod/687b6cb9-4b97-42a6-96d0-34b3099133ac.svg',\r\n            },\r\n            {\r\n                label: 'Http',\r\n                image:\r\n                    'https://gw.alipayobjects.com/zos/bmw-prod/dc1ced06-417d-466f-927b-b4a4d3265791.svg',\r\n            },\r\n            {\r\n                label: 'Api',\r\n                image:\r\n                    'https://gw.alipayobjects.com/zos/bmw-prod/c55d7ae1-8d20-4585-bd8f-ca23653a4489.svg',\r\n            },\r\n            {\r\n                label: 'Sql',\r\n                image:\r\n                    'https://gw.alipayobjects.com/zos/bmw-prod/6eb71764-18ed-4149-b868-53ad1542c405.svg',\r\n            },\r\n            {\r\n                label: 'Clound',\r\n                image:\r\n                    'https://gw.alipayobjects.com/zos/bmw-prod/c36fe7cb-dc24-4854-aeb5-88d8dc36d52e.svg',\r\n            },\r\n            {\r\n                label: 'Mq',\r\n                image:\r\n                    'https://gw.alipayobjects.com/zos/bmw-prod/2010ac9f-40e7-49d4-8c4a-4fcf2f83033b.svg',\r\n            },\r\n        ],\r\n        r1: graph.createNode({\r\n            shape: 'custom-rect',\r\n            label: '',\r\n            attrs: {\r\n                body: {\r\n                    rx: 20,\r\n                    ry: 26,\r\n                },\r\n            },\r\n        }),\r\n        r2: graph.createNode({\r\n            shape: 'custom-rect',\r\n            label: '',\r\n        }),\r\n        r3: graph.createNode({\r\n            shape: 'custom-rect',\r\n            attrs: {\r\n                body: {\r\n                    rx: 6,\r\n                    ry: 6,\r\n                },\r\n            },\r\n            label: '',\r\n        }),\r\n        r4: graph.createNode({\r\n            shape: 'custom-polygon',\r\n            attrs: {\r\n                body: {\r\n                    refPoints: '0,10 10,0 20,10 10,20',\r\n                },\r\n            },\r\n            label: '',\r\n        }),\r\n        r5: graph.createNode({\r\n            shape: 'custom-polygon',\r\n            attrs: {\r\n                body: {\r\n                    refPoints: '10,0 40,0 30,20 0,20',\r\n                },\r\n            },\r\n            label: '',\r\n        }),\r\n        r6: graph.createNode({\r\n            shape: 'custom-circle',\r\n            label: '',\r\n        })\r\n    }\r\n}\r\n\r\nexport function reverseObject(object) {\r\n    const newObject = {};\r\n    const keys: any = [];\r\n\r\n    for (const key in object) {\r\n        keys.push(key);\r\n    }\r\n\r\n    for (let i = keys.length - 1; i >= 0; i--) {\r\n        const value = object[keys[i]];\r\n        newObject[keys[i]] = value;\r\n    }\r\n\r\n    return newObject;\r\n}\r\n","import { Graph } from '@antv/x6';\nGraph.prototype.toSVG = function (callback, options) {\n    const instance = this.getPlugin('export');\n    if (instance) {\n        instance.toSVG(callback, options);\n    }\n};\nGraph.prototype.toPNG = function (callback, options) {\n    const instance = this.getPlugin('export');\n    if (instance) {\n        instance.toPNG(callback, options);\n    }\n};\nGraph.prototype.toJPEG = function (callback, options) {\n    const instance = this.getPlugin('export');\n    if (instance) {\n        instance.toJPEG(callback, options);\n    }\n};\nGraph.prototype.exportPNG = function (fileName, options) {\n    const instance = this.getPlugin('export');\n    if (instance) {\n        instance.exportPNG(fileName, options);\n    }\n};\nGraph.prototype.exportJPEG = function (fileName, options) {\n    const instance = this.getPlugin('export');\n    if (instance) {\n        instance.exportJPEG(fileName, options);\n    }\n};\nGraph.prototype.exportSVG = function (fileName, options) {\n    const instance = this.getPlugin('export');\n    if (instance) {\n        instance.exportSVG(fileName, options);\n    }\n};\n//# sourceMappingURL=api.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { DataUri, NumberExt, FunctionExt, Vector, Rectangle, Basecoat, Dom, } from '@antv/x6';\nimport './api';\nexport class Export extends Basecoat {\n    constructor() {\n        super();\n        this.name = 'export';\n    }\n    get view() {\n        return this.graph.view;\n    }\n    init(graph) {\n        this.graph = graph;\n    }\n    exportPNG(fileName = 'chart', options = {}) {\n        this.toPNG((dataUri) => {\n            DataUri.downloadDataUri(dataUri, fileName);\n        }, options);\n    }\n    exportJPEG(fileName = 'chart', options = {}) {\n        this.toPNG((dataUri) => {\n            DataUri.downloadDataUri(dataUri, fileName);\n        }, options);\n    }\n    exportSVG(fileName = 'chart', options = {}) {\n        this.toSVG((svg) => {\n            DataUri.downloadDataUri(DataUri.svgToDataUrl(svg), fileName);\n        }, options);\n    }\n    toSVG(callback, options = {}) {\n        this.notify('before:export', options);\n        const rawSVG = this.view.svg;\n        const vSVG = Vector.create(rawSVG).clone();\n        let clonedSVG = vSVG.node;\n        const vStage = vSVG.findOne(`.${this.view.prefixClassName('graph-svg-stage')}`);\n        const viewBox = options.viewBox || this.graph.graphToLocal(this.graph.getContentBBox());\n        const dimension = options.preserveDimensions;\n        if (dimension) {\n            const size = typeof dimension === 'boolean' ? viewBox : dimension;\n            vSVG.attr({\n                width: size.width,\n                height: size.height,\n            });\n        }\n        vSVG\n            .removeAttribute('style')\n            .attr('viewBox', [viewBox.x, viewBox.y, viewBox.width, viewBox.height].join(' '));\n        vStage.removeAttribute('transform');\n        // Stores all the CSS declarations from external stylesheets to the\n        // `style` attribute of the SVG document nodes.\n        // This is achieved in three steps.\n        // -----------------------------------\n        // 1. Disabling all the stylesheets in the page and therefore collecting\n        //    only default style values. This, together with the step 2, makes it\n        //    possible to discard default CSS property values and store only those\n        //    that differ.\n        //\n        // 2. Enabling back all the stylesheets in the page and collecting styles\n        //    that differ from the default values.\n        //\n        // 3. Applying the difference between default values and the ones set by\n        //    custom stylesheets onto the `style` attribute of each of the nodes\n        //    in SVG.\n        if (options.copyStyles !== false) {\n            const document = rawSVG.ownerDocument;\n            const raws = Array.from(rawSVG.querySelectorAll('*'));\n            const clones = Array.from(clonedSVG.querySelectorAll('*'));\n            const styleSheetCount = document.styleSheets.length;\n            const styleSheetsCopy = [];\n            for (let k = styleSheetCount - 1; k >= 0; k -= 1) {\n                // There is a bug (bugSS) in Chrome 14 and Safari. When you set\n                // `stylesheet.disable = true` it will also remove it from\n                // `document.styleSheets`. So we need to store all stylesheets before\n                // we disable them. Later on we put them back to `document.styleSheets`\n                // if needed.\n                // See the bug `https://code.google.com/p/chromium/issues/detail?id=88310`.\n                styleSheetsCopy[k] = document.styleSheets[k];\n                document.styleSheets[k].disabled = true;\n            }\n            const defaultComputedStyles = {};\n            raws.forEach((elem, index) => {\n                const computedStyle = window.getComputedStyle(elem, null);\n                // We're making a deep copy of the `computedStyle` so that it's not affected\n                // by that next step when all the stylesheets are re-enabled again.\n                const defaultComputedStyle = {};\n                Object.keys(computedStyle).forEach((property) => {\n                    defaultComputedStyle[property] =\n                        computedStyle.getPropertyValue(property);\n                });\n                defaultComputedStyles[index] = defaultComputedStyle;\n            });\n            // Copy all stylesheets back\n            if (styleSheetCount !== document.styleSheets.length) {\n                styleSheetsCopy.forEach((copy, index) => {\n                    document.styleSheets[index] = copy;\n                });\n            }\n            for (let i = 0; i < styleSheetCount; i += 1) {\n                document.styleSheets[i].disabled = false;\n            }\n            const customStyles = {};\n            raws.forEach((elem, index) => {\n                const computedStyle = window.getComputedStyle(elem, null);\n                const defaultComputedStyle = defaultComputedStyles[index];\n                const customStyle = {};\n                Object.keys(computedStyle).forEach((property) => {\n                    if (!NumberExt.isNumber(property) &&\n                        computedStyle.getPropertyValue(property) !==\n                            defaultComputedStyle[property]) {\n                        customStyle[property] = computedStyle.getPropertyValue(property);\n                    }\n                });\n                customStyles[index] = customStyle;\n            });\n            clones.forEach((elem, index) => {\n                Dom.css(elem, customStyles[index]);\n            });\n        }\n        const stylesheet = options.stylesheet;\n        if (typeof stylesheet === 'string') {\n            const cDATASection = rawSVG\n                .ownerDocument.implementation.createDocument(null, 'xml', null)\n                .createCDATASection(stylesheet);\n            vSVG.prepend(Vector.create('style', {\n                type: 'text/css',\n            }, [cDATASection]));\n        }\n        const format = () => {\n            const beforeSerialize = options.beforeSerialize;\n            if (typeof beforeSerialize === 'function') {\n                const ret = FunctionExt.call(beforeSerialize, this.graph, clonedSVG);\n                if (ret instanceof SVGSVGElement) {\n                    clonedSVG = ret;\n                }\n            }\n            const dataUri = new XMLSerializer()\n                .serializeToString(clonedSVG)\n                .replace(/&nbsp;/g, '\\u00a0');\n            this.notify('after:export', options);\n            callback(dataUri);\n        };\n        if (options.serializeImages) {\n            const deferrals = vSVG.find('image').map((vImage) => {\n                return new Promise((resolve) => {\n                    const url = vImage.attr('xlink:href') || vImage.attr('href');\n                    DataUri.imageToDataUri(url, (err, dataUri) => {\n                        if (!err && dataUri) {\n                            vImage.attr('xlink:href', dataUri);\n                        }\n                        resolve();\n                    });\n                });\n            });\n            Promise.all(deferrals).then(format);\n        }\n        else {\n            format();\n        }\n    }\n    toDataURL(callback, options) {\n        let viewBox = options.viewBox || this.graph.getContentBBox();\n        const padding = NumberExt.normalizeSides(options.padding);\n        if (options.width && options.height) {\n            if (padding.left + padding.right >= options.width) {\n                padding.left = padding.right = 0;\n            }\n            if (padding.top + padding.bottom >= options.height) {\n                padding.top = padding.bottom = 0;\n            }\n        }\n        const expanding = new Rectangle(-padding.left, -padding.top, padding.left + padding.right, padding.top + padding.bottom);\n        if (options.width && options.height) {\n            const width = viewBox.width + padding.left + padding.right;\n            const height = viewBox.height + padding.top + padding.bottom;\n            expanding.scale(width / options.width, height / options.height);\n        }\n        viewBox = Rectangle.create(viewBox).moveAndExpand(expanding);\n        const rawSize = typeof options.width === 'number' && typeof options.height === 'number'\n            ? { width: options.width, height: options.height }\n            : viewBox;\n        let scale = options.ratio ? parseFloat(options.ratio) : 1;\n        if (!Number.isFinite(scale) || scale === 0) {\n            scale = 1;\n        }\n        const size = {\n            width: Math.max(Math.round(rawSize.width * scale), 1),\n            height: Math.max(Math.round(rawSize.height * scale), 1),\n        };\n        {\n            const imgDataCanvas = document.createElement('canvas');\n            const context2D = imgDataCanvas.getContext('2d');\n            imgDataCanvas.width = size.width;\n            imgDataCanvas.height = size.height;\n            const x = size.width - 1;\n            const y = size.height - 1;\n            context2D.fillStyle = 'rgb(1,1,1)';\n            context2D.fillRect(x, y, 1, 1);\n            const data = context2D.getImageData(x, y, 1, 1).data;\n            if (data[0] !== 1 || data[1] !== 1 || data[2] !== 1) {\n                throw new Error('size exceeded');\n            }\n        }\n        const img = new Image();\n        img.onload = () => {\n            const canvas = document.createElement('canvas');\n            canvas.width = size.width;\n            canvas.height = size.height;\n            const context = canvas.getContext('2d');\n            context.fillStyle = options.backgroundColor || 'white';\n            context.fillRect(0, 0, size.width, size.height);\n            try {\n                context.drawImage(img, 0, 0, size.width, size.height);\n                const dataUri = canvas.toDataURL(options.type, options.quality);\n                callback(dataUri);\n            }\n            catch (error) {\n                // pass\n            }\n        };\n        this.toSVG((dataUri) => {\n            img.src = `data:image/svg+xml,${encodeURIComponent(dataUri)}`;\n        }, Object.assign(Object.assign({}, options), { viewBox, serializeImages: true, preserveDimensions: Object.assign({}, size) }));\n    }\n    toPNG(callback, options = {}) {\n        this.toDataURL(callback, Object.assign(Object.assign({}, options), { type: 'image/png' }));\n    }\n    toJPEG(callback, options = {}) {\n        this.toDataURL(callback, Object.assign(Object.assign({}, options), { type: 'image/jpeg' }));\n    }\n    notify(name, args) {\n        this.trigger(name, args);\n        this.graph.trigger(name, args);\n    }\n    dispose() {\n        this.off();\n    }\n}\n__decorate([\n    Basecoat.dispose()\n], Export.prototype, \"dispose\", null);\n//# sourceMappingURL=index.js.map","\r\n    import {defineComponent, reactive, toRefs, onMounted} from 'vue';\r\n    import {Graph, Shape} from '@antv/x6'\r\n    import {Stencil} from \"@antv/x6-plugin-stencil\"\r\n    import {createBlock, showPorts, block, reverseObject} from './hook/UseAntVFlow'\r\n    import {Export} from '@antv/x6-plugin-export';\r\n    import {ElMessage} from 'element-plus';\r\n    import {uniqBy} from 'lodash'\r\n\r\n\r\n    export default defineComponent({\r\n        name: 'AntVX6',\r\n        setup() {\r\n            const data = reactive({})\r\n            onMounted(() => {\r\n                createBlock()\r\n                init()\r\n            })\r\n\r\n\r\n            let graph;\r\n\r\n            function init() {\r\n                // #region \r\n                graph = new Graph({\r\n                    container: document.getElementById('graph-container')!,\r\n                    grid: true,\r\n                    // resizing: true,\r\n                    // rotating: true,\r\n                    // selecting: {\r\n                    //     enabled: true,\r\n                    //     rubberband: true,\r\n                    //     showNodeSelectionBox: true,\r\n                    // },\r\n                    // snapline: true,\r\n                    // keyboard: true,\r\n                    // clipboard: true,\r\n                    mousewheel: {\r\n                        enabled: true,\r\n                        zoomAtMousePosition: true,\r\n                        modifiers: 'ctrl',\r\n                        minScale: 0.5,\r\n                        maxScale: 3,\r\n                    },\r\n                    connecting: {\r\n                        router: {\r\n                            name: 'manhattan',\r\n                            args: {\r\n                                padding: 1,\r\n                            },\r\n                        },\r\n                        connector: {\r\n                            name: 'rounded',\r\n                            args: {\r\n                                radius: 8,\r\n                            },\r\n                        },\r\n                        anchor: 'center',\r\n                        connectionPoint: 'anchor',\r\n                        allowBlank: false,\r\n                        snap: {\r\n                            radius: 20,\r\n                        },\r\n                        createEdge() {\r\n                            return new Shape.Edge({\r\n                                attrs: {\r\n                                    line: {\r\n                                        stroke: '#A2B1C3',\r\n                                        strokeWidth: 2,\r\n                                        targetMarker: {\r\n                                            name: 'block',\r\n                                            width: 12,\r\n                                            height: 8,\r\n                                        },\r\n                                    },\r\n                                },\r\n                                zIndex: 0,\r\n                            })\r\n                        },\r\n                        validateConnection({targetMagnet}) {\r\n                            return !!targetMagnet\r\n                        },\r\n                    },\r\n                    highlighting: {\r\n                        magnetAdsorbed: {\r\n                            name: 'stroke',\r\n                            args: {\r\n                                attrs: {\r\n                                    fill: '#5F95FF',\r\n                                    stroke: '#5F95FF',\r\n                                },\r\n                            },\r\n                        },\r\n                    },\r\n                })\r\n                // #endregion\r\n                graph.on('node:mouseenter', () => {\r\n                    const container = document.getElementById('graph-container')!\r\n                    const ports = container.querySelectorAll(\r\n                        '.x6-port-body',\r\n                    ) as NodeListOf<SVGElement>\r\n                    showPorts(ports, true)\r\n                })\r\n                graph.on('node:mouseleave', () => {\r\n                    const container = document.getElementById('graph-container')!\r\n                    const ports = container.querySelectorAll(\r\n                        '.x6-port-body',\r\n                    ) as NodeListOf<SVGElement>\r\n                    showPorts(ports, false)\r\n                })\r\n                // #region  stencil\r\n                const stencil = new Stencil({\r\n                    title: '',\r\n                    target: graph,\r\n                    stencilGraphWidth: 200,\r\n                    stencilGraphHeight: 180,\r\n                    collapsable: true,\r\n                    groups: [\r\n                        {\r\n                            title: '',\r\n                            name: 'group1',\r\n                        },\r\n                        {\r\n                            title: '',\r\n                            name: 'group2',\r\n                            graphHeight: 250,\r\n                            layoutOptions: {\r\n                                rowHeight: 70,\r\n                            },\r\n                        },\r\n                    ],\r\n                    layoutOptions: {\r\n                        columns: 2,\r\n                        columnWidth: 80,\r\n                        rowHeight: 55,\r\n                    },\r\n                })\r\n                document.getElementById('stencil')!.appendChild(stencil.container)\r\n\r\n                const {r1, r2, r3, r4, r5, r6, imageShapes} = block(graph)\r\n                stencil.load([r1, r2, r3, r4, r5, r6], 'group1')\r\n                const imageNodes = imageShapes.map((item) =>\r\n                    graph.createNode({\r\n                        shape: 'custom-image',\r\n                        label: item.label,\r\n                        attrs: {\r\n                            image: {\r\n                                'xlink:href': item.image,\r\n                            },\r\n                        },\r\n                    }),\r\n                )\r\n                stencil.load(imageNodes, 'group2')\r\n                graph.use(new Export())\r\n            }\r\n\r\n            function exportPng() {\r\n                graph.exportPNG('chart', {})\r\n            }\r\n\r\n            function exportSvg() {\r\n                ElMessage.warning(\"tmd\")\r\n                graph.exportSVG('chart', {\r\n                    preserveDimensions: true\r\n                })\r\n            }\r\n\r\n            function getShape() {\r\n                ElMessage.success(\"\")\r\n                // console.log(graph)\r\n                console.log('', graph.getCells())\r\n                console.log('', graph.getNodes())\r\n                const line = graph.getCells().filter(item => item.shape === 'edge')\r\n                const blocks = graph.getNodes()\r\n                let blocksSort:any[] = []\r\n                line.forEach(item => {\r\n                    const sourceId = item['source']['cell']\r\n                    const targetId = item['target']['cell']\r\n                    blocks.forEach(b => {\r\n                        if (b.id === sourceId) {\r\n                            blocksSort.push(b)\r\n                        }\r\n                        if (b.id === targetId) {\r\n                            blocksSort.push(b)\r\n                        }\r\n                    })\r\n                })\r\n                console.log(\"\", uniqBy(blocksSort,'id'))\r\n            }\r\n\r\n            return {\r\n                ...toRefs(data),\r\n                exportPng,\r\n                exportSvg,\r\n                getShape\r\n            };\r\n        },\r\n    });\r\n","import { render } from \"./AntVX6.vue?vue&type=template&id=6880c36a&scoped=true\"\nimport script from \"./AntVX6.vue?vue&type=script&lang=ts\"\nexport * from \"./AntVX6.vue?vue&type=script&lang=ts\"\n\nimport \"./AntVX6.vue?vue&type=style&index=0&id=6880c36a&scoped=true&lang=less\"\nscript.render = render\nscript.__scopeId = \"data-v-6880c36a\"\n\nexport default script","'use strict';\nvar $ = require('../internals/export');\nvar $map = require('../internals/array-iteration').map;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('map');\n\n// `Array.prototype.map` method\n// https://tc39.es/ecma262/#sec-array.prototype.map\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  map: function map(callbackfn /* , thisArg */) {\n    return $map(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","import root from './_root.js';\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    allocUnsafe = Buffer ? Buffer.allocUnsafe : undefined;\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var length = buffer.length,\n      result = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);\n\n  buffer.copy(result);\n  return result;\n}\n\nexport default cloneBuffer;\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./AntVX6.vue?vue&type=style&index=0&id=6880c36a&scoped=true&lang=less\""],"sourceRoot":""}